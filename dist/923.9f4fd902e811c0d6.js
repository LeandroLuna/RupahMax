(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[923],{39307:()=>{window.CKEDITOR_BASEPATH="//cdn.ckeditor.com/4.6.2/full-all/"},19923:(v,t,c)=>{"use strict";c.r(t),c.d(t,{EditorsModule:()=>k});var o=c(16089),s=c(15671),a=c(43144),f=c(66903),d=c(69808),i=c(93075),l=["host"],r=function(){var b=function(){function x(){(0,s.Z)(this,x),this.click=new f.EventEmitter}return(0,a.Z)(x,[{key:"initialize",value:function(H){var L=this;H.instance.addCommand(this.command,{exec:function(R){L.click.emit(R)}}),H.instance.ui.addButton(this.name,{label:this.label,command:this.command,toolbar:this.toolbar,icon:this.icon})}},{key:"ngOnInit",value:function(){if(!this.name)throw new Error('Attribute "name" is required on <ckbutton>');if(!this.command)throw new Error('Attribute "command" is required on <ckbutton>')}}]),x}();return b.\u0275fac=function(S){return new(S||b)},b.\u0275dir=f.\u0275\u0275defineDirective({type:b,selectors:[["ckbutton"]],inputs:{label:"label",command:"command",toolbar:"toolbar",name:"name",icon:"icon"},outputs:{click:"click"}}),b}(),e=function(){var b=function(){function x(){(0,s.Z)(this,x)}return(0,a.Z)(x,[{key:"ngAfterContentInit",value:function(){var H=this;this.toolbarButtons.forEach(function(L){return L.toolbar=H.name})}},{key:"initialize",value:function(H){H.instance.ui.addToolbarGroup(this.name,this.previous,this.subgroupOf),this.toolbarButtons.forEach(function(L){L.initialize(H)})}}]),x}();return b.\u0275fac=function(S){return new(S||b)},b.\u0275dir=f.\u0275\u0275defineDirective({type:b,selectors:[["ckgroup"]],contentQueries:function(S,H,L){var E;1&S&&f.\u0275\u0275contentQuery(L,r,4),2&S&&f.\u0275\u0275queryRefresh(E=f.\u0275\u0275loadQuery())&&(H.toolbarButtons=E)},inputs:{name:"name",previous:"previous",subgroupOf:"subgroupOf"}}),b}(),n=function(){var b=function(){function x(S){(0,s.Z)(this,x),this.zone=S,this.change=new f.EventEmitter,this.editorChange=new f.EventEmitter,this.ready=new f.EventEmitter,this.blur=new f.EventEmitter,this.focus=new f.EventEmitter,this.contentDom=new f.EventEmitter,this.fileUploadRequest=new f.EventEmitter,this.fileUploadResponse=new f.EventEmitter,this.paste=new f.EventEmitter,this.drop=new f.EventEmitter,this._value=""}return(0,a.Z)(x,[{key:"value",get:function(){return this._value},set:function(H){H!==this._value&&(this._value=H,this.onChange(H))}},{key:"ngOnChanges",value:function(H){H.readonly&&this.instance&&this.instance.setReadOnly(H.readonly.currentValue)}},{key:"ngOnDestroy",value:function(){this.instance&&(this.instance.removeAllListeners(),CKEDITOR.instances[this.instance.name].destroy(),this.instance.destroy(),this.instance=null)}},{key:"ngAfterViewInit",value:function(){this.ckeditorInit(this.config||{})}},{key:"ngAfterViewChecked",value:function(){this.ckeditorInit(this.config||{})}},{key:"updateValue",value:function(H){var L=this;this.zone.run(function(){L.value=H,L.onChange(H),L.onTouched(),L.change.emit(H)})}},{key:"ckeditorInit",value:function(H){var L=this;if("undefined"==typeof CKEDITOR)console.warn("CKEditor 4.x is missing (http://ckeditor.com/)");else{if(this.instance||!this.documentContains(this.host.nativeElement))return;this.readonly&&(H.readOnly=this.readonly),this.instance=CKEDITOR.replace(this.host.nativeElement,H),this.instance.setData(this.value),this.instance.on("instanceReady",function(E){L.instance.getData()!==L.value&&L.instance.setData(L.value),L.ready.emit(E)}),this.instance.on("change",function(E){L.onTouched();var R=L.instance.getData();L.value!==R&&(L.debounce?(L.debounceTimeout&&clearTimeout(L.debounceTimeout),L.debounceTimeout=setTimeout(function(){L.updateValue(R),L.debounceTimeout=null},parseInt(L.debounce))):L.updateValue(R)),L.editorChange.emit(E)}),this.instance.on("blur",function(E){L.blur.emit(E)}),this.instance.on("focus",function(E){L.focus.emit(E)}),this.instance.on("contentDom",function(E){L.contentDom.emit(E)}),this.instance.on("fileUploadRequest",function(E){L.fileUploadRequest.emit(E)}),this.instance.on("fileUploadResponse",function(E){L.fileUploadResponse.emit(E)}),this.instance.on("paste",function(E){L.paste.emit(E)}),this.instance.on("drop",function(E){L.drop.emit(E)}),this.toolbarGroups.forEach(function(E){E.initialize(L)}),this.toolbarButtons.forEach(function(E){E.initialize(L)})}}},{key:"writeValue",value:function(H){this._value=H,this.instance&&this.instance.setData(H)}},{key:"onChange",value:function(H){}},{key:"onTouched",value:function(){}},{key:"registerOnChange",value:function(H){this.onChange=H}},{key:"registerOnTouched",value:function(H){this.onTouched=H}},{key:"documentContains",value:function(H){return document.contains?document.contains(H):document.body.contains(H)}}]),x}();return b.\u0275fac=function(S){return new(S||b)(f.\u0275\u0275directiveInject(f.NgZone))},b.\u0275cmp=f.\u0275\u0275defineComponent({type:b,selectors:[["ckeditor"]],contentQueries:function(S,H,L){var E;1&S&&(f.\u0275\u0275contentQuery(L,r,4),f.\u0275\u0275contentQuery(L,e,4)),2&S&&(f.\u0275\u0275queryRefresh(E=f.\u0275\u0275loadQuery())&&(H.toolbarButtons=E),f.\u0275\u0275queryRefresh(E=f.\u0275\u0275loadQuery())&&(H.toolbarGroups=E))},viewQuery:function(S,H){var L;1&S&&f.\u0275\u0275viewQuery(l,5),2&S&&f.\u0275\u0275queryRefresh(L=f.\u0275\u0275loadQuery())&&(H.host=L.first)},inputs:{value:"value",config:"config",readonly:"readonly",debounce:"debounce"},outputs:{change:"change",editorChange:"editorChange",ready:"ready",blur:"blur",focus:"focus",contentDom:"contentDom",fileUploadRequest:"fileUploadRequest",fileUploadResponse:"fileUploadResponse",paste:"paste",drop:"drop"},features:[f.\u0275\u0275ProvidersFeature([{provide:i.JU,useExisting:(0,f.forwardRef)(function(){return b}),multi:!0}]),f.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["host",""]],template:function(S,H){1&S&&f.\u0275\u0275element(0,"textarea",null,0)},encapsulation:2}),b}(),u=function(){var b=(0,a.Z)(function x(){(0,s.Z)(this,x)});return b.\u0275fac=function(S){return new(S||b)},b.\u0275mod=f.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=f.\u0275\u0275defineInjector({imports:[d.ez]}),b}(),h=c(34703),T=c(41826);let m=(()=>{class b{}return b.\u0275fac=function(S){return new(S||b)},b.\u0275cmp=f.\u0275\u0275defineComponent({type:b,selectors:[["ngx-editors"]],decls:1,vars:0,template:function(S,H){1&S&&f.\u0275\u0275element(0,"router-outlet")},dependencies:[T.lC],encapsulation:2}),b})();var g=c(49030);let I=(()=>{class b{}return b.\u0275fac=function(S){return new(S||b)},b.\u0275cmp=f.\u0275\u0275defineComponent({type:b,selectors:[["ngx-tiny-mce-page"]],decls:5,vars:0,template:function(S,H){1&S&&(f.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header"),f.\u0275\u0275text(2," Tiny MCE "),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"nb-card-body"),f.\u0275\u0275element(4,"ngx-tiny-mce"),f.\u0275\u0275elementEnd()())},dependencies:[o.Asz,o.yKW,o.ndF,g.$],encapsulation:2}),b})();c(39307),c(66602);const O=function(){return{extraPlugins:"divarea",height:"320"}};const y=[{path:"",component:m,children:[{path:"tinymce",component:I},{path:"ckeditor",component:(()=>{class b{}return b.\u0275fac=function(S){return new(S||b)},b.\u0275cmp=f.\u0275\u0275defineComponent({type:b,selectors:[["ngx-ckeditor"]],decls:5,vars:2,consts:[[3,"config"]],template:function(S,H){1&S&&(f.\u0275\u0275elementStart(0,"nb-card")(1,"nb-card-header"),f.\u0275\u0275text(2," CKEditor "),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"nb-card-body"),f.\u0275\u0275element(4,"ckeditor",0),f.\u0275\u0275elementEnd()()),2&S&&(f.\u0275\u0275advance(4),f.\u0275\u0275property("config",f.\u0275\u0275pureFunction0(1,O)))},dependencies:[o.Asz,o.yKW,o.ndF,n],encapsulation:2}),b})()}]}];let C=(()=>{class b{}return b.\u0275fac=function(S){return new(S||b)},b.\u0275mod=f.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=f.\u0275\u0275defineInjector({imports:[T.Bz.forChild(y),T.Bz]}),b})(),k=(()=>{class b{}return b.\u0275fac=function(S){return new(S||b)},b.\u0275mod=f.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=f.\u0275\u0275defineInjector({imports:[o.zyh,h.O,C,u]}),b})()},66602:()=>{var v,t,c,o,s,a,f,d,i;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var v=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"J5S9",version:"4.12.1 (Standard)",revision:"64749bb245",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:v},status:"unloaded",basePath:function(){var s=window.CKEDITOR_BASEPATH||"";if(!s)for(var a=document.getElementsByTagName("script"),f=0;f<a.length;f++){var d=a[f].src.match(v);if(d){s=d[1];break}}if(-1==s.indexOf(":/")&&"//"!=s.slice(0,2)&&(s=0===s.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+s:location.href.match(/^[^\?]*\/(?:)/)[0]+s),!s)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return s}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function s(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",s,!1),a()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",s),a())}catch(d){}}function a(){for(var d;d=f.shift();)d()}var f=[];return function(d){if(f.push(d),"complete"===document.readyState&&setTimeout(s,1),1==f.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",s),window.attachEvent("onload",s),d=!1;try{d=!window.frameElement}catch(l){}document.documentElement.doScroll&&d&&function i(){try{document.documentElement.doScroll("left")}catch(l){return void setTimeout(i,1)}s()}()}}}()},c=window.CKEDITOR_GETURL;if(c){var o=t.getUrl;t.getUrl=function(s){return c.call(t,s)||o.call(t,s)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(v){var c,t=CKEDITOR.event.prototype;for(c in t)null==v[c]&&(v[c]=t[c])},CKEDITOR.event.prototype=function(){function v(o){var s=t(this);return s[o]||(s[o]=new c(o))}var o,s,a,f,t=function(s){return(s=s.getPrivate&&s.getPrivate()||s._||(s._={})).events||(s.events={})},c=function(s){this.name=s,this.listeners=[]};return c.prototype={getListenerIndex:function(s){for(var a=0,f=this.listeners;a<f.length;a++)if(f[a].fn==s)return a;return-1}},{define:function(s,a){var f=v.call(this,s);CKEDITOR.tools.extend(f,a,!0)},on:function(s,a,f,d,i){function l(h,T,m,g){return!1!==a.call(f,h={name:s,sender:this,editor:h,data:T,listenerData:d,stop:m,cancel:g,removeListener:r})&&h.data}function r(){n.removeListener(s,a)}var e=v.call(this,s);if(0>e.getListenerIndex(a)){e=e.listeners,f||(f=this),isNaN(i)&&(i=10);var n=this;l.fn=a,l.priority=i;for(var u=e.length-1;0<=u;u--)if(e[u].priority<=i)return e.splice(u+1,0,l),{removeListener:r};e.unshift(l)}return{removeListener:r}},once:function(){var s=Array.prototype.slice.call(arguments),a=s[1];return s[1]=function(f){return f.removeListener(),a.apply(this,arguments)},this.on.apply(this,s)},capture:function(){CKEDITOR.event.useCapture=1;var s=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,s},fire:(o=0,s=function(){o=1},a=0,f=function(){a=1},function(d,i,l){var r=t(this)[d];d=o;var e=a;if(o=a=0,r&&(n=r.listeners).length)for(var u,n=n.slice(0),h=0;h<n.length;h++){if(r.errorProof)try{u=n[h].call(this,l,i,s,f)}catch(m){}else u=n[h].call(this,l,i,s,f);if(!1===u?a=1:void 0!==u&&(i=u),o||a)break}return i=!a&&(void 0===i||i),o=d,a=e,i}),fireOnce:function(s,a,f){return a=this.fire(s,a,f),delete t(this)[s],a},removeListener:function(s,a){var f=t(this)[s];if(f){var d=f.getListenerIndex(a);0<=d&&f.listeners.splice(d,1)}},removeAllListeners:function(){var a,s=t(this);for(a in s)delete s[a]},hasListeners:function(s){return(s=t(this)[s])&&0<s.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(v,t){return v in{instanceReady:1,loaded:1}&&(this[v]=!0),CKEDITOR.event.prototype.fire.call(this,v,t,this)},CKEDITOR.editor.prototype.fireOnce=function(v,t){return v in{instanceReady:1,loaded:1}&&(this[v]=!0),CKEDITOR.event.prototype.fireOnce.call(this,v,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var v=navigator.userAgent.toLowerCase(),t=v.match(/edge[ \/](\d+.?\d*)/),c=-1<v.indexOf("trident/");(c={ie:c=!(!t&&!c),edge:!!t,webkit:!c&&-1<v.indexOf(" applewebkit/"),air:-1<v.indexOf(" adobeair/"),mac:-1<v.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<v.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(v),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,f=window.location.hostname;return a!=f&&a!="["+f+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!c.webkit&&!c.ie,c.webkit&&(-1<v.indexOf("chrome")?c.chrome=!0:c.safari=!0);var o=0;return c.ie&&(o=t?parseFloat(t[1]):c.quirks||!document.documentMode?parseFloat(v.match(/msie (\d+)/)[1]):document.documentMode,c.ie9Compat=9==o,c.ie8Compat=8==o,c.ie7Compat=7==o,c.ie6Compat=7>o||c.quirks),c.gecko&&(t=v.match(/rv:([\d\.]+)/))&&(o=1e4*(t=t[1].split("."))[0]+100*(t[1]||0)+1*(t[2]||0)),c.air&&(o=parseFloat(v.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(o=parseFloat(v.match(/ applewebkit\/(\d+)/)[1])),c.version=o,c.isCompatible=!(c.ie&&7>o||c.gecko&&4e4>o||c.webkit&&534>o),c.hidpi=2<=window.devicePixelRatio,c.needsBrFiller=c.gecko||c.webkit||c.ie&&10<o,c.needsNbspFiller=c.ie&&11>o,c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass+=" cke_browser_quirks"),c.ie&&(c.cssClass+=" cke_browser_ie"+(c.quirks?"6 cke_browser_iequirks":c.version)),c.air&&(c.cssClass+=" cke_browser_air"),c.iOS&&(c.cssClass+=" cke_browser_ios"),c.hidpi&&(c.cssClass+=" cke_hidpi"),c}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var v=document.createElement("script");v.type="text/javascript",v.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(v)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(v){(this._.pending||(this._.pending=[])).push(v)},CKEDITOR.domReady(function(){var v=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;v&&(CKEDITOR.status="basic_ready",v&&v._load?v():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*t))}),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(v,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:v,additionalData:t})},CKEDITOR.error=function(v,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:v,additionalData:t})},CKEDITOR.on("log",function(v){if(window.console&&window.console.log){var t=console[v.data.type]?v.data.type:"log",c=v.data.errorCode;(v=v.data.additionalData)?console[t]("[CKEDITOR] Error code: "+c+".",v):console[t]("[CKEDITOR] Error code: "+c+"."),console[t]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+c)}},null,null,999),CKEDITOR.dom={},function(){function v(e,n,u){this._minInterval=e,this._context=u,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(n,u||{});var h=this;this.input=function(){function T(){h._lastOutput=(new Date).getTime(),h._scheduledTimer=0,h._call()}if(!h._scheduledTimer||!1!==h._reschedule()){var m=(new Date).getTime()-h._lastOutput;m<h._minInterval?h._scheduledTimer=setTimeout(T,h._minInterval-m):T()}}}function t(e,n,u){v.call(this,e,n,u),this._args=[];var h=this;this.input=CKEDITOR.tools.override(this.input,function(T){return function(){h._args=Array.prototype.slice.call(arguments),T.call(this)}})}var e,n,c=[],o=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",s=/&/g,a=/>/g,f=/</g,d=/"/g,i=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,l={lt:"<",gt:">",amp:"&",quot:'"',nbsp:"\xa0",shy:"\xad"},r=function(n,u){return"#"==u[0]?String.fromCharCode(parseInt(u.slice(1),10)):l[u]};CKEDITOR.on("reset",function(){c=[]}),CKEDITOR.tools={arrayCompare:function(n,u){if(!n&&!u)return!0;if(!n||!u||n.length!=u.length)return!1;for(var h=0;h<n.length;h++)if(n[h]!=u[h])return!1;return!0},getIndex:function(n,u){for(var h=0;h<n.length;++h)if(u(n[h]))return h;return-1},clone:function(n){var u;if(n&&n instanceof Array){u=[];for(var h=0;h<n.length;h++)u[h]=CKEDITOR.tools.clone(n[h]);return u}if(null===n||"object"!=typeof n||n instanceof String||n instanceof Number||n instanceof Boolean||n instanceof Date||n instanceof RegExp||n.nodeType||n.window===n)return n;for(h in u=new n.constructor,n)u[h]=CKEDITOR.tools.clone(n[h]);return u},capitalize:function(n,u){return n.charAt(0).toUpperCase()+(u?n.slice(1):n.slice(1).toLowerCase())},extend:function(n){var h,T,u=arguments.length;"boolean"==typeof(h=arguments[u-1])?u--:"boolean"==typeof(h=arguments[u-2])&&(T=arguments[u-1],u-=2);for(var m=1;m<u;m++){var g=arguments[m]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(g),function(I){(!0===h||null==n[I])&&(!T||I in T)&&(n[I]=g[I])})}return n},prototypedCopy:function(n){var u=function(){};return u.prototype=n,new u},copy:function(n){var h,u={};for(h in n)u[h]=n[h];return u},isArray:function(n){return"[object Array]"==Object.prototype.toString.call(n)},isEmpty:function(n){for(var u in n)if(n.hasOwnProperty(u))return!1;return!0},cssVendorPrefix:function(n,u,h){return h?o+n+":"+u+";"+n+":"+u:((h={})[n]=u,h[o+n]=u,h)},cssStyleToDomStyle:(e=document.createElement("div").style,n=void 0!==e.cssFloat?"cssFloat":void 0!==e.styleFloat?"styleFloat":"float",function(u){return"float"==u?n:u.replace(/-./g,function(h){return h.substr(1).toUpperCase()})}),buildStyleHtml:function(n){n=[].concat(n);for(var u,h=[],T=0;T<n.length;T++)(u=n[T])&&(/@import|[{}]/.test(u)?h.push("<style>"+u+"</style>"):h.push('<link type="text/css" rel=stylesheet href="'+u+'">'));return h.join("")},htmlEncode:function(n){return null==n?"":String(n).replace(s,"&amp;").replace(a,"&gt;").replace(f,"&lt;")},htmlDecode:function(n){return n.replace(i,r)},htmlEncodeAttr:function(n){return CKEDITOR.tools.htmlEncode(n).replace(d,"&quot;")},htmlDecodeAttr:function(n){return CKEDITOR.tools.htmlDecode(n)},transformPlainTextToHtml:function(n,u){var h=u==CKEDITOR.ENTER_BR,T=(T=this.htmlEncode(n.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),m=u==CKEDITOR.ENTER_P?"p":"div";if(!h){var g=/\n{2}/g;if(g.test(T)){var I="<"+m+">",_="</"+m+">";T=I+T.replace(g,function(){return _+I})+_}}return T=T.replace(/\n/g,"<br>"),h||(T=T.replace(new RegExp("<br>(?=</"+m+">)"),function(K){return CKEDITOR.tools.repeat(K,2)})),(T=T.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(K,O){return O+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var n="e",u=0;8>u;u++)n+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return n},override:function(n,u){var h=u(n);return h.prototype=n.prototype,h},setTimeout:function(n,u,h,T,m){return m||(m=window),h||(h=m),m.setTimeout(function(){T?n.apply(h,[].concat(T)):n.apply(h)},u||0)},throttle:function(n,u,h){return new this.buffers.throttle(n,u,h)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(n){return n.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(n){return n.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(n){return n.replace(e,"")}}(),indexOf:function(n,u){if("function"==typeof u){for(var h=0,T=n.length;h<T;h++)if(u(n[h]))return h}else{if(n.indexOf)return n.indexOf(u);for(h=0,T=n.length;h<T;h++)if(n[h]===u)return h}return-1},search:function(n,u){var h=CKEDITOR.tools.indexOf(n,u);return 0<=h?n[h]:null},bind:function(n,u){return function(){return n.apply(u,arguments)}},createClass:function(n){var g=n.$,u=n.base,h=n.privates||n._,T=n.proto;if(n=n.statics,!g&&(g=function(){u&&this.base.apply(this,arguments)}),h){var m=g;g=function(){var K,_=this._||(this._={});for(K in h){var O=h[K];_[K]="function"==typeof O?CKEDITOR.tools.bind(O,this):O}m.apply(this,arguments)}}return u&&(g.prototype=this.prototypedCopy(u.prototype),g.prototype.constructor=g,g.base=u,g.baseProto=u.prototype,g.prototype.base=function I(){this.base=u.prototype.base,u.apply(this,arguments),this.base=I}),T&&this.extend(g.prototype,T,!0),n&&this.extend(g,n,!0),g},addFunction:function(n,u){return c.push(function(){return n.apply(u||this,arguments)})-1},removeFunction:function(n){c[n]=null},callFunction:function(n){var u=c[n];return u&&u.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var n,e=/^-?\d+\.?\d*px$/;return function(u){return n=CKEDITOR.tools.trim(u+"")+"px",e.test(n)?n:u||""}}(),convertToPx:function(){var e;return function(n){if(e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),!/%$/.test(n)){var u=0>parseFloat(n);return u&&(n=n.replace("-","")),e.setStyle("width",n),n=e.$.clientWidth,u?-n:n}return n}}(),repeat:function(n,u){return Array(u+1).join(n)},tryThese:function(){for(var n,u=0,h=arguments.length;u<h;u++){var T=arguments[u];try{n=T();break}catch(m){}}return n},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(n){return function(){var u=arguments,h=this;window.setTimeout(function(){n.apply(h,u)},0)}},normalizeCssText:function(n,u){var T,h=[],m=CKEDITOR.tools.parseCssText(n,!0,u);for(T in m)h.push(T+":"+m[T]);return h.sort(),h.length?h.join(";")+";":""},convertRgbToHex:function(n){return n.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(u,h,T,m){for(u=[h,T,m],h=0;3>h;h++)u[h]=("0"+parseInt(u[h],10).toString(16)).slice(-2);return"#"+u.join("")})},normalizeHex:function(n){return n.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(u,h,T,m){return 3==(u=h.toLowerCase()).length&&(u=[(u=u.split(""))[0],u[0],u[1],u[1],u[2],u[2]].join("")),"#"+u+m})},parseCssText:function(n,u,h){var T={};return h&&(n=new CKEDITOR.dom.element("span").setAttribute("style",n).getAttribute("style")||""),n&&(n=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(n))),!n||";"==n||n.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(m,g,I){u&&("font-family"==(g=g.toLowerCase())&&(I=I.replace(/\s*,\s*/g,",")),I=CKEDITOR.tools.trim(I)),T[g]=I}),T},writeCssText:function(n,u){var h,T=[];for(h in n)T.push(h+":"+n[h]);return u&&T.sort(),T.join("; ")},objectCompare:function(n,u,h){var T;if(!n&&!u)return!0;if(!n||!u)return!1;for(T in n)if(n[T]!=u[T])return!1;if(!h)for(T in u)if(n[T]!=u[T])return!1;return!0},objectKeys:function(n){return CKEDITOR.tools.object.keys(n)},convertArrayToObject:function(n,u){var h={};1==arguments.length&&(u=!0);for(var T=0,m=n.length;T<m;++T)h[n[T]]=u;return h},fixDomain:function(){for(var n;;)try{n=window.parent.document.domain;break}catch(u){if(!(n=n?n.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=n}return!!n},eventsBuffer:function(n,u,h){return new this.buffers.event(n,u,h)},enableHtml5Elements:function(n,u){for(var m,h="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),T=h.length;T--;)m=n.createElement(h[T]),u&&n.appendChild(m)},checkIfAnyArrayItemMatches:function(n,u){for(var h=0,T=n.length;h<T;++h)if(n[h].match(u))return!0;return!1},checkIfAnyObjectPropertyMatches:function(n,u){for(var h in n)if(h.match(u))return!0;return!1},keystrokeToString:function(n,u){var h=this.keystrokeToArray(n,u);return h.display=h.display.join("+"),h.aria=h.aria.join("+"),h},keystrokeToArray:function(n,u){var h=16711680&u,T=65535&u,m=CKEDITOR.env.mac,g=[],I=[];return h&CKEDITOR.CTRL&&(g.push(m?"\u2318":n[17]),I.push(m?n[224]:n[17])),h&CKEDITOR.ALT&&(g.push(m?"\u2325":n[18]),I.push(n[18])),h&CKEDITOR.SHIFT&&(g.push(m?"\u21e7":n[16]),I.push(n[16])),T&&(n[T]?(g.push(n[T]),I.push(n[T])):(g.push(String.fromCharCode(T)),I.push(String.fromCharCode(T)))),{display:g,aria:I}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(n){n=n.toLowerCase();for(var h,u=document.cookie.split(";"),m=0;m<u.length;m++)if(h=u[m].split("="),decodeURIComponent(CKEDITOR.tools.trim(h[0]).toLowerCase())===n)return decodeURIComponent(1<h.length?h[1]:"");return null},setCookie:function(n,u){document.cookie=encodeURIComponent(n)+"="+encodeURIComponent(u)+";path=/"},getCsrfToken:function(){if(!(n=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=n.length){var n=[],u="";if(window.crypto&&window.crypto.getRandomValues)n=new Uint8Array(40),window.crypto.getRandomValues(n);else for(var h=0;40>h;h++)n.push(Math.floor(256*Math.random()));for(h=0;h<n.length;h++){var T="abcdefghijklmnopqrstuvwxyz0123456789".charAt(n[h]%36);u+=.5<Math.random()?T.toUpperCase():T}n=u,CKEDITOR.tools.setCookie("ckCsrfToken",n)}return n},escapeCss:function(n){return n?window.CSS&&CSS.escape?CSS.escape(n):isNaN(parseInt(n.charAt(0),10))?n:"\\3"+n.charAt(0)+" "+n.substring(1,n.length):""},getMouseButton:function(n){return!!(n=n.data?n.data.$:n)&&(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.ie6Compat)?4===n.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===n.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:n.button)},convertHexStringToBytes:function(n){var T,u=[],h=n.length/2;for(T=0;T<h;T++)u.push(parseInt(n.substr(2*T,2),16));return u},convertBytesToBase64:function(n){var T,u="",h=n.length;for(T=0;T<h;T+=3){var _,m=n.slice(T,T+3),g=m.length,I=[];if(3>g)for(_=g;3>_;_++)m[_]=0;for(I[0]=(252&m[0])>>2,I[1]=(3&m[0])<<4|m[1]>>4,I[2]=(15&m[1])<<2|(192&m[2])>>6,I[3]=63&m[2],_=0;4>_;_++)u=_<=g?u+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(I[_]):u+"="}return u},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(n){var u={},h=this._findColor(n);return h.length&&(u.color=h[0],CKEDITOR.tools.array.forEach(h,function(T){n=n.replace(T,"")})),(n=CKEDITOR.tools.trim(n))&&(u.unprocessed=n),u},margin:function(n){return CKEDITOR.tools.style.parse.sideShorthand(n,function(u){return u.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]})},sideShorthand:function(n,u){function h(g){T.top=m[g[0]],T.right=m[g[1]],T.bottom=m[g[2]],T.left=m[g[3]]}var T={},m=u?u(n):n.split(/\s+/);switch(m.length){case 1:h([0,0,0,0]);break;case 2:h([0,1,0,1]);break;case 3:h([0,1,2,1]);break;case 4:h([0,1,2,3])}return T},border:function(n){return CKEDITOR.tools.style.border.fromCssRule(n)},_findColor:function(n){var h=[],u=CKEDITOR.tools.array;return(h=(h=h.concat(n.match(this._rgbaRegExp)||[])).concat(n.match(this._hslaRegExp)||[])).concat(u.filter(n.split(/\s+/),function(T){return!!T.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||T.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(n,u,h){var T=[];return this.forEach(n,function(m,g){u.call(h,m,g,n)&&T.push(m)}),T},find:function(n,u,h){for(var T=n.length,m=0;m<T;){if(u.call(h,n[m],m,n))return n[m];m++}},forEach:function(n,u,h){var m,T=n.length;for(m=0;m<T;m++)u.call(h,n[m],m,n)},map:function(n,u,h){for(var T=[],m=0;m<n.length;m++)T.push(u.call(h,n[m],m,n));return T},reduce:function(n,u,h,T){for(var m=0;m<n.length;m++)h=u.call(T,h,n[m],m,n);return h},every:function(n,u,h){return!n.length||(u=this.filter(n,u,h),n.length===u.length)}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(n){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(n),function(u){return[u,n[u]]})},values:function(n){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(n),function(u){return n[u]})},keys:function(n){var m,u=Object.prototype.hasOwnProperty,h=[],T=CKEDITOR.tools.object.DONT_ENUMS;for(m in n)h.push(m);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(m=0;m<T.length;m++)u.call(n,T[m])&&h.push(T[m]);return h},findKey:function(n,u){if("object"!=typeof n)return null;for(var h in n)if(n[h]===u)return h;return null},merge:function(n,u){var h=CKEDITOR.tools,T=h.clone(n),m=h.clone(u);return h.array.forEach(h.object.keys(m),function(g){T[g]="object"==typeof m[g]&&"object"==typeof T[g]?h.object.merge(T[g],m[g]):m[g]}),T}},getAbsoluteRectPosition:function(n,u){var T=CKEDITOR.tools.copy(u);!function h(g){if(g){var I=g.getClientRect();T.top+=I.top,T.left+=I.left,"x"in T&&"y"in T&&(T.x+=I.x,T.y+=I.y),h(g.getWindow().getFrame())}}(n.getFrame());var m=CKEDITOR.document.getWindow().getScrollPosition();return T.top+=m.y,T.left+=m.x,"x"in T&&"y"in T&&(T.y+=m.y,T.x+=m.x),T.right=T.left+T.width,T.bottom=T.top+T.height,T}},v.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},(t.prototype=CKEDITOR.tools.prototypedCopy(v.prototype))._reschedule=function(){this._scheduledTimer&&this._clearTimer()},t.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=v,CKEDITOR.tools.buffers.throttle=t,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(n){this.width=(n=n||{}).width,this.style=n.style,this.color=n.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var n in this._.normalizeMap){var u=this[n];u&&(this[n]=CKEDITOR.tools.array.reduce(this._.normalizeMap[n],function(h,T){return h.replace(T[0],T[1])},u))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],function(n){return!!n}).join(" ")}},statics:{fromCssRule:function(n){var u={},h=n.split(/\s+/g);return(n=CKEDITOR.tools.style.parse._findColor(n)).length&&(u.color=n[0]),CKEDITOR.tools.array.forEach(h,function(T){u.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,T)?!u.width&&CKEDITOR.tools.style.parse._widthRegExp.test(T)&&(u.width=T):u.style=T}),new CKEDITOR.tools.style.border(u)},splitCssValues:function(n,u){u=u||{};var h=CKEDITOR.tools.array.reduce(["width","style","color"],function(T,m){var g=n["border-"+m]||u[m];return T[m]=g?CKEDITOR.tools.style.parse.sideShorthand(g):null,T},{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],function(T,m){var I,g={};for(I in h)g[I]=n["border-"+m+"-"+I]||h[I]&&h[I][m];return T["border-"+m]=new CKEDITOR.tools.style.border(g),T},{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=(t=function(r,e){for(var n=CKEDITOR.tools.clone(r),u=1;u<arguments.length;u++)for(var h in e=arguments[u])delete n[h];return n},o={},s={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},a={command:1,link:1,meta:1,noscript:1,script:1,style:1},f={},i={center:1,dir:1,noframes:1},(v=CKEDITOR.tools.extend)(c={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},d={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),v(o,s,c,i),t={a:t(c,{a:1,button:1}),abbr:c,address:o,area:f,article:o,aside:o,audio:v({source:1,track:1},o),b:c,base:f,bdi:c,bdo:c,blockquote:o,body:o,br:f,button:t(c,{a:1,button:1}),canvas:c,caption:o,cite:c,code:c,col:f,colgroup:{col:1},command:f,datalist:v({option:1},c),dd:o,del:c,details:v({summary:1},o),dfn:c,div:o,dl:{dt:1,dd:1},dt:o,em:c,embed:f,fieldset:v({legend:1},o),figcaption:o,figure:v({figcaption:1},o),footer:o,form:o,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:v({title:1,base:1},a),header:o,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:f,html:v({head:1,body:1},o,a),i:c,iframe:d,img:f,input:f,ins:c,kbd:c,keygen:f,label:c,legend:c,li:o,link:f,main:o,map:o,mark:c,menu:v({li:1},o),meta:f,meter:t(c,{meter:1}),nav:o,noscript:v({link:1,meta:1,style:1},c),object:v({param:1},c),ol:{li:1},optgroup:{option:1},option:d,output:c,p:c,param:f,pre:c,progress:t(c,{progress:1}),q:c,rp:c,rt:c,ruby:v({rp:1,rt:1},c),s:c,samp:c,script:d,section:o,select:{optgroup:1,option:1},small:c,source:f,span:c,strong:c,style:d,sub:c,summary:v({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},c),sup:c,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:o,textarea:d,tfoot:{tr:1},th:o,thead:{tr:1},time:t(c,{time:1}),title:d,tr:{th:1,td:1},track:f,u:c,ul:{li:1},var:c,video:v({source:1,track:1},o),wbr:f,acronym:c,applet:v({param:1},o),basefont:f,big:c,center:o,dialog:f,dir:{li:1},font:c,isindex:f,noframes:o,strike:c,tt:c},v(t,{$block:v({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},s,i),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:c,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:v({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t),CKEDITOR.dom.event=function(v){this.$=v},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var t=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(t+=CKEDITOR.CTRL),this.$.shiftKey&&(t+=CKEDITOR.SHIFT),this.$.altKey&&(t+=CKEDITOR.ALT),t},preventDefault:function(t){var c=this.$;c.preventDefault?c.preventDefault():c.returnValue=!1,t&&this.stopPropagation()},stopPropagation:function(){var t=this.$;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getTarget:function(){var t=this.$.target||this.$.srcElement;return t?new CKEDITOR.dom.node(t):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var t=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(t.documentElement.scrollLeft||t.body.scrollLeft),y:this.$.pageY||this.$.clientY+(t.documentElement.scrollTop||t.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(v){v&&(this.$=v)},CKEDITOR.dom.domObject.prototype=function(){var v=function(c,o){return function(s){"undefined"!=typeof CKEDITOR&&c.fire(o,new CKEDITOR.dom.event(s))}};return{getPrivate:function(){var c;return(c=this.getCustomData("_"))||this.setCustomData("_",c={}),c},on:function(c){var o=this.getCustomData("_cke_nativeListeners");return o||this.setCustomData("_cke_nativeListeners",o={}),o[c]||(o=o[c]=v(this,c),this.$.addEventListener?this.$.addEventListener(c,o,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+c,o)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(c){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(c)){var o=this.getCustomData("_cke_nativeListeners"),s=o&&o[c];s&&(this.$.removeEventListener?this.$.removeEventListener(c,s,!1):this.$.detachEvent&&this.$.detachEvent("on"+c,s),delete o[c])}},removeAllListeners:function(){var o,c=this.getCustomData("_cke_nativeListeners");for(o in c){var s=c[o];this.$.detachEvent?this.$.detachEvent("on"+o,s):this.$.removeEventListener&&this.$.removeEventListener(o,s,!1),delete c[o]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(v){var t={};CKEDITOR.on("reset",function(){t={}}),v.equals=function(c){try{return c&&c.$===this.$}catch(o){return!1}},v.setCustomData=function(c,o){var s=this.getUniqueId();return(t[s]||(t[s]={}))[c]=o,this},v.getCustomData=function(c){var o=this.$["data-cke-expando"];return(o=o&&t[o])&&c in o?o[c]:null},v.removeCustomData=function(c){var o,s,a;return(o=(o=this.$["data-cke-expando"])&&t[o])&&(s=o[c],a=c in o,delete o[c]),a?s:null},v.clearCustomData=function(){this.removeAllListeners();var c=this.$["data-cke-expando"];c&&delete t[c]},v.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(v)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(v){return v?new CKEDITOR.dom[v.nodeType==CKEDITOR.NODE_DOCUMENT?"document":v.nodeType==CKEDITOR.NODE_ELEMENT?"element":v.nodeType==CKEDITOR.NODE_TEXT?"text":v.nodeType==CKEDITOR.NODE_COMMENT?"comment":v.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](v):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(t,c){return t.append(this,c),t},clone:function(t,c){var a=this.$.cloneNode(t);return function o(f){if(f["data-cke-expando"]&&(f["data-cke-expando"]=!1),(f.nodeType==CKEDITOR.NODE_ELEMENT||f.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(c||f.nodeType!=CKEDITOR.NODE_ELEMENT||f.removeAttribute("id",!1),t)){f=f.childNodes;for(var d=0;d<f.length;d++)o(f[d])}}(a),a=new CKEDITOR.dom.node(a),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function s(f){if(f.type==CKEDITOR.NODE_ELEMENT||f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(f.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=f.getName();":"==d[0]&&f.renameNode(d.substring(1))}if(t)for(d=0;d<f.getChildCount();d++)s(f.getChild(d))}}(a),a},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(t){return t.$.parentNode.insertBefore(this.$,t.$.nextSibling),t},insertBefore:function(t){return t.$.parentNode.insertBefore(this.$,t.$),t},insertBeforeMe:function(t){return this.$.parentNode.insertBefore(t.$,this.$),t},getAddress:function(t){for(var c=[],o=this.getDocument().$.documentElement,s=this.$;s&&s!=o;){var a=s.parentNode;a&&c.unshift(this.getIndex.call({$:s},t)),s=a}return c},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(t){function c(d,i){var l=i?d.nextSibling:d.previousSibling;return l&&l.nodeType==CKEDITOR.NODE_TEXT?o(l)?c(l,i):l:null}function o(d){return!d.nodeValue||d.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var f,s=this.$,a=-1;if(!this.$.parentNode||t&&s.nodeType==CKEDITOR.NODE_TEXT&&o(s)&&!c(s)&&!c(s,!0))return-1;do{t&&s!=this.$&&s.nodeType==CKEDITOR.NODE_TEXT&&(f||o(s))||(a++,f=s.nodeType==CKEDITOR.NODE_TEXT)}while(s=s.previousSibling);return a},getNextSourceNode:function(t,c,o){if(o&&!o.call){var s=o;o=function(d){return!d.equals(s)}}var a;if(!(t=!t&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&o&&!1===o(this,!0))return null;t=this.getNext()}for(;!t&&(a=(a||this).getParent());){if(o&&!1===o(a,!0))return null;t=a.getNext()}return!t||o&&!1===o(t)?null:c&&c!=t.type?t.getNextSourceNode(!1,c,o):t},getPreviousSourceNode:function(t,c,o){if(o&&!o.call){var s=o;o=function(d){return!d.equals(s)}}var a;if(!(t=!t&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&o&&!1===o(this,!0))return null;t=this.getPrevious()}for(;!t&&(a=(a||this).getParent());){if(o&&!1===o(a,!0))return null;t=a.getPrevious()}return!t||o&&!1===o(t)?null:c&&t.type!=c?t.getPreviousSourceNode(!1,c,o):t},getPrevious:function(t){var o,c=this.$;do{o=(c=c.previousSibling)&&10!=c.nodeType&&new CKEDITOR.dom.node(c)}while(o&&t&&!t(o));return o},getNext:function(t){var o,c=this.$;do{o=(c=c.nextSibling)&&new CKEDITOR.dom.node(c)}while(o&&t&&!t(o));return o},getParent:function(t){var c=this.$.parentNode;return c&&(c.nodeType==CKEDITOR.NODE_ELEMENT||t&&c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(c):null},getParents:function(t){var c=this,o=[];do{o[t?"push":"unshift"](c)}while(c=c.getParent());return o},getCommonAncestor:function(t){if(t.equals(this))return this;if(t.contains&&t.contains(this))return t;var c=this.contains?this:this.getParent();do{if(c.contains(t))return c}while(c=c.getParent());return null},getPosition:function(t){var c=this.$,o=t.$;if(c.compareDocumentPosition)return c.compareDocumentPosition(o);if(c==o)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&t.type==CKEDITOR.NODE_ELEMENT){if(c.contains){if(c.contains(o))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(o.contains(c))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in c)return 0>c.sourceIndex||0>o.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:c.sourceIndex<o.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}c=this.getAddress(),t=t.getAddress(),o=Math.min(c.length,t.length);for(var s=0;s<o;s++)if(c[s]!=t[s])return c[s]<t[s]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return c.length<t.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(t,c){var s,a,o=this.$;for(c||(o=o.parentNode),"function"==typeof t?(a=!0,s=t):(a=!1,s=function(d){return d="string"==typeof d.nodeName?d.nodeName.toLowerCase():"","string"==typeof t?d==t:d in t});o;){if(s(a?new CKEDITOR.dom.node(o):o))return new CKEDITOR.dom.node(o);try{o=o.parentNode}catch(f){o=null}}return null},hasAscendant:function(t,c){var o=this.$;for(c||(o=o.parentNode);o;){if(o.nodeName&&o.nodeName.toLowerCase()==t)return!0;o=o.parentNode}return!1},move:function(t,c){t.append(this.remove(),c)},remove:function(t){var c=this.$,o=c.parentNode;if(o){if(t)for(;t=c.firstChild;)o.insertBefore(c.removeChild(t),c);o.removeChild(c)}return this},replace:function(t){this.insertBefore(t),t.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var t;this.getFirst&&(t=this.getFirst());){if(t.type==CKEDITOR.NODE_TEXT){var c=CKEDITOR.tools.ltrim(t.getText()),o=t.getLength();if(!c){t.remove();continue}c.length<o&&(t.split(o-c.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var t;this.getLast&&(t=this.getLast());){if(t.type==CKEDITOR.NODE_TEXT){var c=CKEDITOR.tools.rtrim(t.getText()),o=t.getLength();if(!c){t.remove();continue}c.length<o&&(t.split(c.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(t=this.$.lastChild)&&1==t.type&&"br"==t.nodeName.toLowerCase()&&t.parentNode.removeChild(t)},isReadOnly:function(t){var c=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(c=this.getParent()),CKEDITOR.env.edge&&c&&c.is("textarea","input")&&(t=!0),!t&&c&&void 0!==c.$.isContentEditable)return!(c.$.isContentEditable||c.data("cke-editable"));for(;c;){if(c.data("cke-editable"))return!1;if(c.hasAttribute("contenteditable"))return"false"==c.getAttribute("contenteditable");c=c.getParent()}return!0}}),CKEDITOR.dom.window=function(v){CKEDITOR.dom.domObject.call(this,v)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var t=this.$.document,c="CSS1Compat"==t.compatMode;return{width:(c?t.documentElement.clientWidth:t.body.clientWidth)||0,height:(c?t.documentElement.clientHeight:t.body.clientHeight)||0}},getScrollPosition:function(){var t=this.$;return"pageXOffset"in t?{x:t.pageXOffset||0,y:t.pageYOffset||0}:{x:(t=t.document).documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},getFrame:function(){var t=this.$.frameElement;return t?new CKEDITOR.dom.element.get(t):null}}),CKEDITOR.dom.document=function(v){CKEDITOR.dom.domObject.call(this,v)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(t){if(this.$.createStyleSheet)this.$.createStyleSheet(t);else{var c=new CKEDITOR.dom.element("link");c.setAttributes({rel:"stylesheet",type:"text/css",href:t}),this.getHead().append(c)}},appendStyleText:function(t){if(this.$.createStyleSheet){var c=this.$.createStyleSheet("");c.cssText=t}else{var o=new CKEDITOR.dom.element("style",this);o.append(new CKEDITOR.dom.text(t,this)),this.getHead().append(o)}return c||o.$.sheet},createElement:function(t,c){var o=new CKEDITOR.dom.element(t,this);return c&&(c.attributes&&o.setAttributes(c.attributes),c.styles&&o.setStyles(c.styles)),o},createText:function(t){return new CKEDITOR.dom.text(t,this)},focus:function(){this.getWindow().focus()},getActive:function(){var t;try{t=this.$.activeElement}catch(c){return null}return new CKEDITOR.dom.element(t)},getById:function(t){return(t=this.$.getElementById(t))?new CKEDITOR.dom.element(t):null},getByAddress:function(t,c){for(var o=this.$.documentElement,s=0;o&&s<t.length;s++){var a=t[s];if(c)for(var f=-1,d=0;d<o.childNodes.length;d++){var i=o.childNodes[d];if((!0!==c||3!=i.nodeType||!i.previousSibling||3!=i.previousSibling.nodeType)&&++f==a){o=i;break}}else o=o.childNodes[a]}return o?new CKEDITOR.dom.node(o):null},getElementsByTag:function(t,c){return CKEDITOR.env.ie&&8>=document.documentMode||!c||(t=c+":"+t),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(t))},getHead:function(){var t=this.$.getElementsByTagName("head")[0];return t?new CKEDITOR.dom.element(t):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(t){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(t=t.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(t),this.$.close()},find:function(t){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t))},findOne:function(t){return(t=this.$.querySelector(t))?new CKEDITOR.dom.element(t):null},_getHtml5ShivFrag:function(){var t=this.getCustomData("html5ShivFrag");return t||(t=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(t,!0),this.setCustomData("html5ShivFrag",t)),t}}),CKEDITOR.dom.nodeList=function(v){this.$=v},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(t){return 0>t||t>=this.$.length?null:(t=this.$[t])?new CKEDITOR.dom.node(t):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(t){return new CKEDITOR.dom.node(t)})}},CKEDITOR.dom.element=function(v,t){"string"==typeof v&&(v=(t?t.$:document).createElement(v)),CKEDITOR.dom.domObject.call(this,v)},CKEDITOR.dom.element.get=function(v){return(v="string"==typeof v?document.getElementById(v)||document.getElementsByName(v)[0]:v)&&(v.$?v:new CKEDITOR.dom.element(v))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(v,t){var c=new CKEDITOR.dom.element("div",t);return c.setHtml(v),c.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(v,t,c,o){var s=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),a=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return v[s]=t,a[c]=1,t.setCustomData(c,o)},CKEDITOR.dom.element.clearAllMarkers=function(v){for(var t in v)CKEDITOR.dom.element.clearMarkers(v,v[t],1)},CKEDITOR.dom.element.clearMarkers=function(v,t,c){var a,o=t.getCustomData("list_marker_names"),s=t.getCustomData("list_marker_id");for(a in o)t.removeCustomData(a);t.removeCustomData("list_marker_names"),c&&(t.removeCustomData("list_marker_id"),delete v[s])},function(){function v(d,i){return-1<(" "+d+" ").replace(a," ").indexOf(" "+i+" ")}function t(d){var i=!0;return d.$.id||(d.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),i=!1),function(){i||d.removeAttribute("id")}}function c(d,i){var l=CKEDITOR.tools.escapeCss(d.$.id);return"#"+l+" "+i.split(/,\s*/).join(", #"+l+" ")}function o(d){for(var i=0,l=0,r=f[d].length;l<r;l++)i+=parseFloat(this.getComputedStyle(f[d][l])||0,10)||0;return i}var s=void 0!==(s=document.createElement("_").classList)&&null!==String(s.add).match(/\[Native code\]/gi),a=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:s?function(d){return this.$.classList.add(d),this}:function(d){var i=this.$.className;return i&&(v(i,d)||(i+=" "+d)),this.$.className=i||d,this},removeClass:s?function(d){var i=this.$;return i.classList.remove(d),i.className||i.removeAttribute("class"),this}:function(d){var i=this.getAttribute("class");return i&&v(i,d)&&((i=i.replace(new RegExp("(?:^|\\s+)"+d+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",i):this.removeAttribute("class")),this},hasClass:function(i){return v(this.$.className,i)},append:function(i,l){return"string"==typeof i&&(i=this.getDocument().createElement(i)),l?this.$.insertBefore(i.$,this.$.firstChild):this.$.appendChild(i.$),i},appendHtml:function(i){if(this.$.childNodes.length){var l=new CKEDITOR.dom.element("div",this.getDocument());l.setHtml(i),l.moveChildren(this)}else this.setHtml(i)},appendText:function(i){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=i:this.append(new CKEDITOR.dom.text(i))},appendBogus:function(i){if(i||CKEDITOR.env.needsBrFiller){for(i=this.getLast();i&&i.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(i.getText());)i=i.getPrevious();i&&i.is&&i.is("br")||(i=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&i.setAttribute("type","_moz"),this.append(i))}},breakParent:function(i,l){var r=new CKEDITOR.dom.range(this.getDocument());r.setStartAfter(this),r.setEndAfter(i);var n,e=r.extractContents(!1,l||!1);if(r.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(r=new CKEDITOR.dom.element("div");n=e.getFirst();)n.$.style.backgroundColor&&(n.$.style.backgroundColor=n.$.style.backgroundColor),r.append(n);r.insertAfter(this),r.remove(!0)}else e.insertAfterNode(this)},contains:document.compareDocumentPosition?function(d){return!!(16&this.$.compareDocumentPosition(d.$))}:function(d){var i=this.$;return d.type!=CKEDITOR.NODE_ELEMENT?i.contains(d.getParent().$):i!=d.$&&i.contains(d.$)},focus:function(){function d(){try{this.$.focus()}catch(i){}}return function(i){i?CKEDITOR.tools.setTimeout(d,100,this):d.call(this)}}(),getHtml:function(){var i=this.$.innerHTML;return CKEDITOR.env.ie?i.replace(/<\?[^>]*>/g,""):i},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var i=this.$.ownerDocument.createElement("div");return i.appendChild(this.$.cloneNode(!0)),i.innerHTML},getClientRect:function(i){var l=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!l.width&&(l.width=l.right-l.left),!l.height&&(l.height=l.bottom-l.top),i?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),l):l},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(d){try{var i=this.$;if(this.getParent())return i.innerHTML=d;var l=this.getDocument()._getHtml5ShivFrag();return l.appendChild(i),i.innerHTML=d,l.removeChild(i),d}catch(r){for(this.$.innerHTML="",(i=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=d,i=i.getChildren();i.count();)this.append(i.getItem(0));return d}}:function(d){return this.$.innerHTML=d},setText:function(){var d=document.createElement("p");return d.innerHTML="x",d=d.textContent,function(i){this.$[d?"textContent":"innerText"]=i}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(i){switch(i){case"class":i="className";break;case"http-equiv":i="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(i=this.$.getAttribute(i,2))&&0===this.$.tabIndex&&(i=null),i;case"checked":return((i=this.$.attributes.getNamedItem(i)).specified?i.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[i];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(i,2)}:function(l){return this.$.getAttribute(l,2)},getAttributes:function(i){var e,l={},r=this.$.attributes;for(i=CKEDITOR.tools.isArray(i)?i:[],e=0;e<r.length;e++)-1===CKEDITOR.tools.indexOf(i,r[e].name)&&(l[r[e].name]=r[e].value);return l},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(d){var i=this.getWindow().$.getComputedStyle(this.$,null);return i?i.getPropertyValue(d):""}:function(d){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(d)]},getDtd:function(){var i=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return i},i},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var i=this.$.tabIndex;return 0!==i||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?i:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var i=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var l=this.$.scopeName;"HTML"!=l&&(i=l.toLowerCase()+":"+i)}return this.getName=function(){return i},this.getName()},getValue:function(){return this.$.value},getFirst:function(i){var l=this.$.firstChild;return(l=l&&new CKEDITOR.dom.node(l))&&i&&!i(l)&&(l=l.getNext(i)),l},getLast:function(i){var l=this.$.lastChild;return(l=l&&new CKEDITOR.dom.node(l))&&i&&!i(l)&&(l=l.getPrevious(i)),l},getStyle:function(i){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(i)]},is:function(){var i=this.getName();if("object"==typeof arguments[0])return!!arguments[0][i];for(var l=0;l<arguments.length;l++)if(arguments[l]==i)return!0;return!1},isEditable:function(i){var l=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[l]||CKEDITOR.dtd.$empty[l]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==i&&(!(i=CKEDITOR.dtd[l]||CKEDITOR.dtd.span)||!i["#"]))},isIdentical:function(i){var l=this.clone(0,1);if(i=i.clone(0,1),l.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),i.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),l.$.isEqualNode)return l.$.style.cssText=CKEDITOR.tools.normalizeCssText(l.$.style.cssText),i.$.style.cssText=CKEDITOR.tools.normalizeCssText(i.$.style.cssText),l.$.isEqualNode(i.$);if(l=l.getOuterHtml(),i=i.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var r=this.getParent();r.type==CKEDITOR.NODE_ELEMENT&&((r=r.clone()).setHtml(l),l=r.getHtml(),r.setHtml(i),i=r.getHtml())}return l==i},isVisible:function(){var l,r,i=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return i&&CKEDITOR.env.webkit&&!(l=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(r=l.$.frameElement)&&(i=new CKEDITOR.dom.element(r).isVisible()),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var i=this.getChildren(),l=0,r=i.count();l<r;l++){var e=i.getItem(l);if((e.type!=CKEDITOR.NODE_ELEMENT||!e.data("cke-bookmark"))&&(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEmptyInlineRemoveable()||e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var d=this.$.attributes,i=0;i<d.length;i++){var l=d[i];switch(l.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(l.specified)return!0}}return!1}:function(){var d=this.$.attributes,i=d.length,l={"data-cke-expando":1,_moz_dirty:1};return 0<i&&(2<i||!l[d[0].nodeName]||2==i&&!l[d[1].nodeName])},hasAttribute:function(){function d(i){var l=this.$.attributes.getNamedItem(i);if("input"==this.getName())switch(i){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(i=this.getAttribute("type"))||"radio"==i?"on"!=this.$.value:!!this.$.value}return!!l&&l.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(i){return"name"==i?!!this.$.name:d.call(this,i)}:d:function(i){return!!this.$.attributes.getNamedItem(i)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(i,l){var e,r=this.$;if(r!=(i=i.$))if(l)for(;e=r.lastChild;)i.insertBefore(r.removeChild(e),i.firstChild);else for(;e=r.firstChild;)i.appendChild(r.removeChild(e))},mergeSiblings:function(){function d(i,l,r){if(l&&l.type==CKEDITOR.NODE_ELEMENT){for(var e=[];l.data("cke-bookmark")||l.isEmptyInlineRemoveable();)if(e.push(l),!(l=r?l.getNext():l.getPrevious())||l.type!=CKEDITOR.NODE_ELEMENT)return;if(i.isIdentical(l)){for(var n=r?i.getLast():i.getFirst();e.length;)e.shift().move(i,!r);l.moveChildren(i,!r),l.remove(),n&&n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings()}}}return function(i){(!1===i||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(d(this,this.getNext(),!0),d(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var d=function(l,r){return this.$.setAttribute(l,r),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(i,l){return"class"==i?this.$.className=l:"style"==i?this.$.style.cssText=l:"tabindex"==i?this.$.tabIndex=l:"checked"==i?this.$.checked=l:"contenteditable"==i?d.call(this,"contentEditable",l):d.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(i,l){if("src"==i&&l.match(/^http:\/\//))try{d.apply(this,arguments)}catch(r){}else d.apply(this,arguments);return this}:d}(),setAttributes:function(i){for(var l in i)this.setAttribute(l,i[l]);return this},setValue:function(i){return this.$.value=i,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(i){"class"==i?i="className":"tabindex"==i?i="tabIndex":"contenteditable"==i&&(i="contentEditable"),this.$.removeAttribute(i)}:function(l){this.$.removeAttribute(l)},removeAttributes:function(i){if(CKEDITOR.tools.isArray(i))for(var l=0;l<i.length;l++)this.removeAttribute(i[l]);else for(l in i=i||this.getAttributes())i.hasOwnProperty(l)&&this.removeAttribute(l)},removeStyle:function(i){if((l=this.$.style).removeProperty||"border"!=i&&"margin"!=i&&"padding"!=i)l.removeProperty?l.removeProperty(i):l.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(i)),this.$.style.cssText||this.removeAttribute("style");else{var e,r=["top","left","right","bottom"];"border"==i&&(e=["color","style","width"]);for(var l=[],n=0;n<r.length;n++)if(e)for(var u=0;u<e.length;u++)l.push([i,r[n],e[u]].join("-"));else l.push([i,r[n]].join("-"));for(i=0;i<l.length;i++)this.removeStyle(l[i])}},setStyle:function(i,l){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(i)]=l,this},setStyles:function(i){for(var l in i)this.setStyle(l,i[l]);return this},setOpacity:function(i){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(i=Math.round(100*i),this.setStyle("filter",100<=i?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")):this.setStyle("opacity",i)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var l=this.getElementsByTag("*"),r=0,e=l.count();r<e;r++)l.getItem(r).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var i=this;"html"!=i.getName();){if("static"!=i.getComputedStyle("position"))return i;i=i.getParent()}return null},getDocumentPosition:function(i){var l=0,r=0,e=this.getDocument(),n=e.getBody(),u="BackCompat"==e.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(m=this,g=null;m&&"body"!=m.getName()&&"html"!=m.getName();){for(l+=m.$.offsetLeft-m.$.scrollLeft,r+=m.$.offsetTop-m.$.scrollTop,m.equals(this)||(l+=m.$.clientLeft||0,r+=m.$.clientTop||0);g&&!g.equals(m);)l-=g.$.scrollLeft,r-=g.$.scrollTop,g=g.getParent();g=m,m=(h=m.$.offsetParent)?new CKEDITOR.dom.element(h):null}else{var h=this.$.getBoundingClientRect(),T=e.$.documentElement,m=T.clientTop||n.$.clientTop||0,g=T.clientLeft||n.$.clientLeft||0,I=!0;CKEDITOR.env.ie&&(I=e.getDocumentElement().contains(this),e=e.getBody().contains(this),I=u&&e||!u&&I),I&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(l=n.$.scrollLeft||T.scrollLeft,r=n.$.scrollTop||T.scrollTop):(l=(r=u?n.$:T).scrollLeft,r=r.scrollTop),l=h.left+l-g,r=h.top+r-m)}return i&&(h=this.getWindow(),m=i.getWindow(),!h.equals(m)&&h.$.frameElement&&(l+=(i=new CKEDITOR.dom.element(h.$.frameElement).getDocumentPosition(i)).x,r+=i.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||u||(l+=this.$.clientLeft?1:0,r+=this.$.clientTop?1:0),{x:l,y:r}},scrollIntoView:function(i){var l=this.getParent();if(l)do{if((l.$.clientWidth&&l.$.clientWidth<l.$.scrollWidth||l.$.clientHeight&&l.$.clientHeight<l.$.scrollHeight)&&!l.is("body")&&this.scrollIntoParent(l,i,1),l.is("html")){var r=l.getWindow();try{var e=r.$.frameElement;e&&(l=new CKEDITOR.dom.element(e))}catch(n){}}}while(l=l.getParent())},scrollIntoParent:function(i,l,r){var e,n,u,h;function T(y,C){/body|html/.test(i.getName())?i.getWindow().$.scrollBy(y,C):(i.$.scrollLeft+=y,i.$.scrollTop+=C)}function m(y,C){var N={x:0,y:0};if(!y.is(I?"body":"html")){var k=y.$.getBoundingClientRect();N.x=k.left,N.y=k.top}return(k=y.getWindow()).equals(C)||(k=m(CKEDITOR.dom.element.get(k.$.frameElement),C),N.x+=k.x,N.y+=k.y),N}function g(y,C){return parseInt(y.getComputedStyle("margin-"+C)||0,10)||0}!i&&(i=this.getWindow());var I="BackCompat"==(u=i.getDocument()).$.compatMode;i instanceof CKEDITOR.dom.window&&(i=I?u.getBody():u.getDocumentElement()),CKEDITOR.env.webkit&&(u=this.getEditor(!1))&&(u._.previousScrollTop=null),n=m(this,u=i.getWindow());var _=m(i,u),K=this.$.offsetHeight;e=this.$.offsetWidth;var O=i.$.clientHeight,p=i.$.clientWidth;u=n.x-g(this,"left")-_.x||0,h=n.y-g(this,"top")-_.y||0,e=n.x+e+g(this,"right")-(_.x+p)||0,n=n.y+K+g(this,"bottom")-(_.y+O)||0,(0>h||0<n)&&T(0,!0===l?h:!1===l?n:0>h?h:n),r&&(0>u||0<e)&&T(0>u?u:e,0)},setState:function(i,l,r){switch(l=l||"cke",i){case CKEDITOR.TRISTATE_ON:this.addClass(l+"_on"),this.removeClass(l+"_off"),this.removeClass(l+"_disabled"),r&&this.setAttribute("aria-pressed",!0),r&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(l+"_disabled"),this.removeClass(l+"_off"),this.removeClass(l+"_on"),r&&this.setAttribute("aria-disabled",!0),r&&this.removeAttribute("aria-pressed");break;default:this.addClass(l+"_off"),this.removeClass(l+"_on"),this.removeClass(l+"_disabled"),r&&this.removeAttribute("aria-pressed"),r&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var i=this.$;return i&&new CKEDITOR.dom.document(i.contentWindow.document)},copyAttributes:function(i,l){var r=this.$.attributes;l=l||{};for(var e=0;e<r.length;e++){var h,n=r[e],u=n.nodeName.toLowerCase();u in l||("checked"==u&&(h=this.getAttribute(u))?i.setAttribute(u,h):(!CKEDITOR.env.ie||this.hasAttribute(u))&&(null===(h=this.getAttribute(u))&&(h=n.nodeValue),i.setAttribute(u,h)))}""!==this.$.style.cssText&&(i.$.style.cssText=this.$.style.cssText)},renameNode:function(i){if(this.getName()!=i){var l=this.getDocument();i=new CKEDITOR.dom.element(i,l),this.copyAttributes(i),this.moveChildren(i),this.getParent(!0)&&this.$.parentNode.replaceChild(i.$,this.$),i.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=i.$,delete this.getName}},getChild:function(){function d(i,l){var r=i.childNodes;if(0<=l&&l<r.length)return r[l]}return function(i){var l=this.$;if(i.slice)for(i=i.slice();0<i.length&&l;)l=d(l,i.shift());else l=d(l,i);return l?new CKEDITOR.dom.node(l):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function i(l){return l.type==CKEDITOR.NODE_ELEMENT&&l.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(l){l.data.getTarget().getAscendant(i,!0)||l.data.preventDefault()})},getDirection:function(i){return i?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(i,l){return i="data-"+i,void 0===l?this.getAttribute(i):(!1===l?this.removeAttribute(i):this.setAttribute(i,l),null)},getEditor:function(i){var r,e,n,l=CKEDITOR.instances;for(r in i=i||void 0===i,l)if((e=l[r]).element.equals(this)&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!i&&(n=e.editable())&&(n.equals(this)||n.contains(this)))return e;return null},find:function(i){var l=t(this);return i=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(c(this,i))),l(),i},findOne:function(i){var l=t(this);return i=this.$.querySelector(c(this,i)),l(),i?new CKEDITOR.dom.element(i):null},forEach:function(i,l,r){if(!(r||l&&this.type!=l))var e=i(this);if(!1!==e){r=this.getChildren();for(var n=0;n<r.count();n++)(e=r.getItem(n)).type==CKEDITOR.NODE_ELEMENT?e.forEach(i,l):l&&e.type!=l||i(e)}}});var f={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(d,i,l){"number"==typeof i&&(!l||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(i-=o.call(this,d)),this.setStyle(d,i+"px"))},CKEDITOR.dom.element.prototype.getSize=function(d,i){var l=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(d)],this.$["client"+CKEDITOR.tools.capitalize(d)])||0;return i&&(l-=o.call(this,d)),l}}(),CKEDITOR.dom.documentFragment=function(v){v=v||CKEDITOR.document,this.$=v.type==CKEDITOR.NODE_DOCUMENT?v.$.createDocumentFragment():v},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(t){(t=t.$).parentNode.insertBefore(this.$,t.nextSibling)},getHtml:function(){var t=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(t),t.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function v(n,u){var h=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,h.collapsed)return this.end(),null;h.optimize()}var T,m=h.startContainer;T=h.endContainer;var _,g=h.startOffset,I=h.endOffset,K=this.guard,O=this.type,p=n?"getPreviousSourceNode":"getNextSourceNode";if(!n&&!this._.guardLTR){var y=T.type==CKEDITOR.NODE_ELEMENT?T:T.getParent(),C=T.type==CKEDITOR.NODE_ELEMENT?T.getChild(I):T.getNext();this._.guardLTR=function(x,S){return!(S&&y.equals(x)||C&&x.equals(C)||x.type==CKEDITOR.NODE_ELEMENT&&S&&x.equals(h.root))}}if(n&&!this._.guardRTL){var N=m.type==CKEDITOR.NODE_ELEMENT?m:m.getParent(),k=m.type==CKEDITOR.NODE_ELEMENT?g?m.getChild(g-1):null:m.getPrevious();this._.guardRTL=function(x,S){return!(S&&N.equals(x)||k&&x.equals(k)||x.type==CKEDITOR.NODE_ELEMENT&&S&&x.equals(h.root))}}var b=n?this._.guardRTL:this._.guardLTR;for(_=K?function(x,S){return!1!==b(x,S)&&K(x,S)}:b,this.current?T=this.current[p](!1,O,_):(n?T.type==CKEDITOR.NODE_ELEMENT&&(T=0<I?T.getChild(I-1):!1===_(T,!0)?null:T.getPreviousSourceNode(!0,O,_)):(T=m).type==CKEDITOR.NODE_ELEMENT&&((T=T.getChild(g))||(T=!1===_(m,!0)?null:m.getNextSourceNode(!0,O,_))),T&&!1===_(T)&&(T=null));T&&!this._.end;){if(this.current=T,this.evaluator&&!1===this.evaluator(T)){if(u&&this.evaluator)return!1}else if(!u)return T;T=T[p](!1,O,_)}return this.end(),this.current=null}function t(n){for(var u,h=null;u=v.call(this,n);)h=u;return h}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(u){this.range=u,this._={}},proto:{end:function(){this._.end=1},next:function(){return v.call(this)},previous:function(){return v.call(this,1)},checkForward:function(){return!1!==v.call(this,0,1)},checkBackward:function(){return!1!==v.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(n){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in o||!c[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||n&&this.is(n))},CKEDITOR.dom.walker.blockBoundary=function(n){return function(u){return!(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary(n))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(n,u){function h(T){return T&&T.getName&&"span"==T.getName()&&T.data("cke-bookmark")}return function(T){var m,g;return m=T&&T.type!=CKEDITOR.NODE_ELEMENT&&(g=T.getParent())&&h(g),m=n?m:m||h(T),!!(u^m)}},CKEDITOR.dom.walker.whitespaces=function(n){return function(u){var h;return u&&u.type==CKEDITOR.NODE_TEXT&&(h=!CKEDITOR.tools.trim(u.getText())||CKEDITOR.env.webkit&&u.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(n^h)}},CKEDITOR.dom.walker.invisible=function(n){var u=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.env.webkit?1:0;return function(T){return u(T)?T=1:(T.type==CKEDITOR.NODE_TEXT&&(T=T.getParent()),T=T.$.offsetWidth<=h),!!(n^T)}},CKEDITOR.dom.walker.nodeType=function(n,u){return function(h){return!!(u^h.type==n)}},CKEDITOR.dom.walker.bogus=function(n){function u(h){return!a(h)&&!f(h)}return function(h){var T=CKEDITOR.env.needsBrFiller?h.is&&h.is("br"):h.getText&&s.test(h.getText());return T&&(T=h.getParent(),h=h.getNext(u),T=T.isBlockBoundary()&&(!h||h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary())),!!(n^T)}},CKEDITOR.dom.walker.temp=function(n){return function(u){return u.type!=CKEDITOR.NODE_ELEMENT&&(u=u.getParent()),u=u&&u.hasAttribute("data-cke-temp"),!!(n^u)}};var s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,a=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(),d=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(n){return function(u){return u=a(u)||f(u)||d(u),!!(n^u)}};var l=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(n){return function(u){for(var h=0,T=u.getChildCount();h<T;++h)if(!l(u.getChild(h)))return!!n;return!n}};var r=CKEDITOR.dom.walker.empty(),e=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(n){var h,u={};for(h in n)CKEDITOR.dtd[h]["#"]&&(u[h]=1);return u}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(n){return function(u){return u=!l(u)&&!!(u.type==CKEDITOR.NODE_TEXT||u.type==CKEDITOR.NODE_ELEMENT&&(u.is(CKEDITOR.dtd.$inline)||u.is("hr")||"false"==u.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&u.is(e)&&r(u))),!!(n^u)}},CKEDITOR.dom.element.prototype.getBogus=function(){var u,n=this;do{n=n.getPreviousSourceNode()}while(f(u=n)||a(u)||u.type==CKEDITOR.NODE_ELEMENT&&u.is(CKEDITOR.dtd.$inline)&&!u.is(CKEDITOR.dtd.$empty));return!(!n||!(CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&s.test(n.getText())))&&n}}(),CKEDITOR.dom.range=function(v){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=v instanceof CKEDITOR.dom.document;this.document=t?v:v.getDocument(),this.root=t?v.getBody():v},function(){function v(r){r.collapsed=r.startContainer&&r.endContainer&&r.startContainer.equals(r.endContainer)&&r.startOffset==r.endOffset}function t(r,e,n,u,h){function T(G,J,Z,ee){var M=Z?G.getPrevious():G.getNext();return ee&&I||(K||ee?J.append(G.clone(!0,h),Z):(G.remove(),_&&J.append(G,Z))),M}r.optimizeBookmark();var I=0===e,_=1==e,K=2==e;e=K||_;var N,k,b,x,S,H,O=r.startContainer,p=r.endContainer,y=r.startOffset,C=r.endOffset;if(K&&p.type==CKEDITOR.NODE_TEXT&&(O.equals(p)||O.type===CKEDITOR.NODE_ELEMENT&&O.getFirst().equals(p)))n.append(r.document.createText(p.substring(y,C)));else{p.type==CKEDITOR.NODE_TEXT?K?H=!0:p=p.split(C):0<p.getChildCount()?C>=p.getChildCount()?(p=p.getChild(C-1),k=!0):p=p.getChild(C):x=k=!0,O.type==CKEDITOR.NODE_TEXT?K?S=!0:O.split(y):0<O.getChildCount()?0===y?(O=O.getChild(y),N=!0):O=O.getChild(y-1):b=N=!0;for(var D,w,P,L=O.getParents(),E=p.getParents(),R=function m(){var G,ee=Math.min(L.length,E.length);for(G=0;G<ee;G++)if(!L[G].equals(E[G]))return G;return G-1}(),A=L.length-1,F=E.length-1,$=n,z=-1,W=R;W<=A;W++){for(P=(w=L[W]).getNext(),W!=A||w.equals(E[W])&&A<F?e&&(D=$.append(w.clone(0,h))):N?T(w,$,!1,b):S&&$.append(r.document.createText(w.substring(y)));P;){if(P.equals(E[W])){z=W;break}P=T(P,$)}$=D}for($=n,W=R;W<=F;W++)if(P=(n=E[W]).getPrevious(),n.equals(L[W]))e&&($=$.getChild(0));else{if(W!=F||n.equals(L[W])&&F<A?e&&(D=$.append(n.clone(0,h))):k?T(n,$,!1,x):H&&$.append(r.document.createText(n.substring(0,C))),W>z)for(;P;)P=T(P,$,!0);$=D}K||function g(){var G=R-1,J=b&&x&&!O.equals(p);G<A-1||G<F-1||J?(J?r.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START):F==G+1&&k?r.moveToPosition(E[G],CKEDITOR.POSITION_BEFORE_END):r.moveToPosition(E[G+1],CKEDITOR.POSITION_BEFORE_START),u&&(G=L[G+1])&&G.type==CKEDITOR.NODE_ELEMENT&&((J=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',r.document)).insertAfter(G),G.mergeSiblings(!1),r.moveToBookmark({startNode:J}))):r.collapse(!0)}()}}function c(){var r=!1,e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),u=CKEDITOR.dom.walker.bogus();return function(h){return!(!n(h)&&!e(h))||(u(h)&&!r?r=!0:!(h.type==CKEDITOR.NODE_TEXT&&(h.hasAscendant("pre")||CKEDITOR.tools.trim(h.getText()).length)||h.type==CKEDITOR.NODE_ELEMENT&&!h.is(a)))}}function s(r){return function(){var e;return this[r?"getPreviousNode":"getNextNode"](function(n){return!e&&l(n)&&(e=n),i(n)&&!(f(n)&&n.equals(e))})}}var a={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},f=CKEDITOR.dom.walker.bogus(),d=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,i=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,n,!1,void 0===e||e),n},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,n){var u=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,u,e,void 0===n||n),u},createBookmark:function(e){var n,u,h,T,m=this.collapsed;return(n=this.document.createElement("span")).data("cke-bookmark",1),n.setStyle("display","none"),n.setHtml("&nbsp;"),e&&(h="cke_bm_"+CKEDITOR.tools.getNextNumber(),n.setAttribute("id",h+(m?"C":"S"))),m||((u=n.clone()).setHtml("&nbsp;"),e&&u.setAttribute("id",h+"E"),(T=this.clone()).collapse(),T.insertNode(u)),(T=this.clone()).collapse(!0),T.insertNode(n),u?(this.setStartAfter(n),this.setEndBefore(u)):this.moveToPosition(n,CKEDITOR.POSITION_AFTER_END),{startNode:e?h+(m?"C":"S"):n,endNode:e?h+"E":u,serializable:e,collapsed:m}},createBookmark2:function(){function r(u){var m,h=u.container,T=u.offset,g=T;if((m=(m=h).type!=CKEDITOR.NODE_ELEMENT||0===g||g==m.getChildCount()?0:m.getChild(g-1).type==CKEDITOR.NODE_TEXT&&m.getChild(g).type==CKEDITOR.NODE_TEXT)&&(T=(h=h.getChild(T-1)).getLength()),h.type==CKEDITOR.NODE_ELEMENT&&0<T){e:{for(m=h;T--;)if(0<=(g=m.getChild(T).getIndex(!0))){T=g;break e}T=-1}T+=1}if(h.type==CKEDITOR.NODE_TEXT){for(m=h,g=0;(m=m.getPrevious())&&m.type==CKEDITOR.NODE_TEXT;)g+=m.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;m=g,h.getText()?T+=m:(g=h.getPrevious(n),m?(T=m,h=g?g.getNext():h.getParent().getFirst()):(h=h.getParent(),T=g?g.getIndex(!0)+1:0))}u.container=h,u.offset=T}function e(u,h){var T=h.getCustomData("cke-fillingChar");if(T){var m=u.container;T.equals(m)&&(u.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=u.offset&&(u.offset=m.getIndex(),u.container=m.getParent()))}}var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(u){var h=this.collapsed,T={container:this.startContainer,offset:this.startOffset},m={container:this.endContainer,offset:this.endOffset};return u&&(r(T),e(T,this.root),h||(r(m),e(m,this.root))),{start:T.container.getAddress(u),end:h?null:m.container.getAddress(u),startOffset:T.offset,endOffset:m.offset,normalized:u,collapsed:h,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var n=this.document.getByAddress(e.start,e.normalized),u=e.startOffset,h=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(n,u),h?this.setEnd(h,e):this.collapse(!0)}else n=(u=e.serializable)?this.document.getById(e.startNode):e.startNode,e=u?this.document.getById(e.endNode):e.endNode,this.setStartBefore(n),n.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var T,e=this.startContainer,n=this.endContainer,u=this.startOffset,h=this.endOffset;if(e.type==CKEDITOR.NODE_ELEMENT)if((T=e.getChildCount())>u)e=e.getChild(u);else if(1>T)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=(e=new CKEDITOR.dom.node(e)).getNextSourceNode()||e}if(n.type==CKEDITOR.NODE_ELEMENT)if((T=n.getChildCount())>h)n=n.getChild(h).getPreviousSourceNode(!0);else if(1>T)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return e.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(e=n),{startNode:e,endNode:n}},getCommonAncestor:function(e,n){var u=this.endContainer,h=(h=this.startContainer).equals(u)?e&&h.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?h.getChild(this.startOffset):h:h.getCommonAncestor(u);return n&&!h.is?h.getParent():h},optimize:function(){var e=this.startContainer,n=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(n?n>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),n=this.endOffset,(e=this.endContainer).type!=CKEDITOR.NODE_ELEMENT&&(n?n>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,n=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),n&&n.is&&n.is("span")&&n.data("cke-bookmark")&&this.setEndAt(n,CKEDITOR.POSITION_AFTER_END)},trim:function(e,n){var u=this.startContainer,h=this.startOffset,T=this.collapsed;if((!e||T)&&u&&u.type==CKEDITOR.NODE_TEXT){if(h)if(h>=u.getLength())h=u.getIndex()+1,u=u.getParent();else{var m=u.split(h);h=u.getIndex()+1,u=u.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(m,this.endOffset-this.startOffset):u.equals(this.endContainer)&&(this.endOffset+=1)}else h=u.getIndex(),u=u.getParent();if(this.setStart(u,h),T)return void this.collapse(!0)}u=this.endContainer,h=this.endOffset,n||T||!u||u.type!=CKEDITOR.NODE_TEXT||(h?(h>=u.getLength()||u.split(h),h=u.getIndex()+1):h=u.getIndex(),u=u.getParent(),this.setEnd(u,h))},enlarge:function(e,n){function u(D){return D&&D.type==CKEDITOR.NODE_ELEMENT&&D.hasAttribute("contenteditable")?null:D}var h=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var A=1;case CKEDITOR.ENLARGE_ELEMENT:var T=function(w,P){var z,W;for((z=new CKEDITOR.dom.range(g)).setStart(w,P),z.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),(z=new CKEDITOR.dom.walker(z)).guard=function(G){return!(G.type==CKEDITOR.NODE_ELEMENT&&G.isBlockBoundary())};W=z.next();)if(W.type!=CKEDITOR.NODE_TEXT||(N=W!=w?W.getText():W.substring(P),h.test(N)))return!1;return!0};if(this.collapsed)break;var I,_,K,O,p,C,N,m=this.getCommonAncestor(),g=this.root,y=!1,k=this.startOffset;for((C=this.startContainer).type==CKEDITOR.NODE_TEXT?(k&&(y=!!(C=!CKEDITOR.tools.trim(C.substring(0,k)).length&&C)),C&&((O=C.getPrevious())||(K=C.getParent()))):(k&&(O=C.getChild(k-1)||C.getLast()),O||(K=C)),K=u(K);K||O;){if(K&&!O){if(!p&&K.equals(m)&&(p=!0),A?K.isBlockBoundary():!g.contains(K))break;y&&"inline"==K.getComputedStyle("display")||(y=!1,p?I=K:this.setStartBefore(K)),O=K.getPrevious()}for(;O;)if(C=!1,O.type==CKEDITOR.NODE_COMMENT)O=O.getPrevious();else{if(O.type==CKEDITOR.NODE_TEXT)N=O.getText(),h.test(N)&&(O=null),C=/[\s\ufeff]$/.test(N);else if((O.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||n&&O.is("br"))&&!O.data("cke-bookmark"))if(y&&CKEDITOR.dtd.$removeEmpty[O.getName()]){if(N=O.getText(),h.test(N))O=null;else{k=O.$.getElementsByTagName("*");for(var x,b=0;x=k[b++];)if(!CKEDITOR.dtd.$removeEmpty[x.nodeName.toLowerCase()]){O=null;break}}O&&(C=!!N.length)}else O=null;if(C&&(y?p?I=K:K&&this.setStartBefore(K):y=!0),O){if(C=O.getPrevious(),!K&&!C){K=O,O=null;break}O=C}else K=null}K&&(K=u(K.getParent()))}for(k=this.endOffset,K=O=null,p=y=!1,(C=this.endContainer).type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(C.substring(k)).length?y=!0:(y=!C.getLength(),k==C.getLength()?(O=C.getNext())||(K=C.getParent()):T(C,k)&&(K=C.getParent())):(O=C.getChild(k))||(K=C);K||O;){if(K&&!O){if(!p&&K.equals(m)&&(p=!0),A?K.isBlockBoundary():!g.contains(K))break;y&&"inline"==K.getComputedStyle("display")||(y=!1,p?_=K:K&&this.setEndAfter(K)),O=K.getNext()}for(;O;){if(C=!1,O.type==CKEDITOR.NODE_TEXT)N=O.getText(),T(O,0)||(O=null),C=/^[\s\ufeff]/.test(N);else if(O.type==CKEDITOR.NODE_ELEMENT){if((0<O.$.offsetWidth||n&&O.is("br"))&&!O.data("cke-bookmark"))if(y&&CKEDITOR.dtd.$removeEmpty[O.getName()]){if(N=O.getText(),h.test(N))O=null;else for(k=O.$.getElementsByTagName("*"),b=0;x=k[b++];)if(!CKEDITOR.dtd.$removeEmpty[x.nodeName.toLowerCase()]){O=null;break}O&&(C=!!N.length)}else O=null}else C=1;if(C&&y&&(p?_=K:this.setEndAfter(K)),O){if(C=O.getNext(),!K&&!C){K=O,O=null;break}O=C}else K=null}K&&(K=u(K.getParent()))}I&&_&&(m=I.contains(_)?_:I,this.setStartBefore(m),this.setEndAfter(m));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:(K=new CKEDITOR.dom.range(this.root)).setStartAt(g=this.root,CKEDITOR.POSITION_AFTER_START),K.setEnd(this.startContainer,this.startOffset),K=new CKEDITOR.dom.walker(K);var S,H,L=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),E=null,R=function(w){if(w.type==CKEDITOR.NODE_ELEMENT&&"false"==w.getAttribute("contenteditable"))if(E){if(E.equals(w))return void(E=null)}else E=w;else if(E)return;var P=L(w);return P||(S=w),P};if(A=function(w){var P=R(w);return!P&&w.is&&w.is("br")&&(H=w),P},K.guard=R,K=K.lastBackward(),this.setStartAt(S=S||g,!S.is("br")&&(!K&&this.checkStartOfBlock()||K&&S.contains(K))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){K=this.clone(),K=new CKEDITOR.dom.walker(K);var F=CKEDITOR.dom.walker.whitespaces(),$=CKEDITOR.dom.walker.bookmark();if(K.evaluator=function(D){return!F(D)&&!$(D)},(K=K.previous())&&K.type==CKEDITOR.NODE_ELEMENT&&K.is("br"))break}(K=this.clone()).collapse(),K.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),(K=new CKEDITOR.dom.walker(K)).guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?A:R,S=E=H=null,K=K.lastForward(),this.setEndAt(S=S||g,!K&&this.checkEndOfBlock()||K&&S.contains(K)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),H&&this.setEndAfter(H)}},shrink:function(e,n,u){var h="boolean"==typeof u?u:!u||"boolean"!=typeof u.shrinkOnBlockBoundary||u.shrinkOnBlockBoundary,T=u&&u.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var O=this.clone(),m=this.startContainer,g=this.endContainer,I=this.startOffset,_=this.endOffset,K=u=1;m&&m.type==CKEDITOR.NODE_TEXT&&(I?I>=m.getLength()?O.setStartAfter(m):(O.setStartBefore(m),u=0):O.setStartBefore(m)),g&&g.type==CKEDITOR.NODE_TEXT&&(_?_>=g.getLength()?O.setEndAfter(g):(O.setEndAfter(g),K=0):O.setEndBefore(g)),O=new CKEDITOR.dom.walker(O);var C,p=CKEDITOR.dom.walker.bookmark(),y=CKEDITOR.dom.walker.bogus();return O.evaluator=function(N){return N.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},O.guard=function(N,k){return!!(T&&y(N)||p(N))||!(e==CKEDITOR.SHRINK_ELEMENT&&N.type==CKEDITOR.NODE_TEXT||k&&N.equals(C)||!1===h&&N.type==CKEDITOR.NODE_ELEMENT&&N.isBlockBoundary()||N.type==CKEDITOR.NODE_ELEMENT&&N.hasAttribute("contenteditable"))&&(k||N.type!=CKEDITOR.NODE_ELEMENT||(C=N),!0)},u&&(m=O[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(m,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),K&&(O.reset(),(O=O[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(O,n?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!u&&!K)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var n=this.startContainer,u=n.getChild(this.startOffset);u?e.insertBefore(u):n.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,n){this.setStartAt(e,n),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(e,n){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(n=e.getIndex(),e=e.getParent()),this._setStartContainer(e),this.startOffset=n,this.endContainer||(this._setEndContainer(e),this.endOffset=n),v(this)},setEnd:function(e,n){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(n=e.getIndex()+1,e=e.getParent()),this._setEndContainer(e),this.endOffset=n,this.startContainer||(this._setStartContainer(e),this.startOffset=n),v(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(e,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}v(this)},setEndAt:function(e,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}v(this)},fixBlock:function(e,n){var u=this.createBookmark(),h=this.document.createElement(n);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(h),h.trim(),this.insertNode(h);var T=h.getBogus();return T&&T.remove(),h.appendBogus(),this.moveToBookmark(u),h},splitBlock:function(e,n){var u=new CKEDITOR.dom.elementPath(this.startContainer,this.root),h=new CKEDITOR.dom.elementPath(this.endContainer,this.root),T=u.block,m=h.block,g=null;return u.blockLimit.equals(h.blockLimit)?("br"!=e&&(T||(T=this.fixBlock(!0,e),m=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),m||(m=this.fixBlock(!1,e))),u=T&&this.checkStartOfBlock(),h=m&&this.checkEndOfBlock(),this.deleteContents(),T&&T.equals(m)&&(h?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(m,CKEDITOR.POSITION_AFTER_END),m=null):u?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(T,CKEDITOR.POSITION_BEFORE_START),T=null):(m=this.splitElement(T,n||!1),T.is("ul","ol")||T.appendBogus())),{previousBlock:T,nextBlock:m,wasStartOfBlock:u,wasEndOfBlock:h,elementPath:g}):null},splitElement:function(e,n){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var u=this.extractContents(!1,n||!1),h=e.clone(!1,n||!1);return u.appendTo(h),h.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),h},removeEmptyBlocksAtEnd:function(){function r(u){return function(h){return!(e(h)||n(h)||h.type==CKEDITOR.NODE_ELEMENT&&h.isEmptyInlineRemoveable()||u.is("table")&&h.is("caption"))}}var e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(u){for(var g,h=this.createBookmark(),T=this[u?"endPath":"startPath"](),m=T.block||T.blockLimit;m&&!m.equals(T.root)&&!m.getFirst(r(m));)g=m.getParent(),this[u?"setEndAt":"setStartAt"](m,CKEDITOR.POSITION_AFTER_END),m.remove(1),m=g;this.moveToBookmark(h)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,n){var u=n==CKEDITOR.START,h=this.clone();return h.collapse(u),h[u?"setStartAt":"setEndAt"](e,u?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(h=new CKEDITOR.dom.walker(h)).evaluator=function o(r){var e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(u){return!(!n(u)&&!e(u))||!r&&f(u)||u.type==CKEDITOR.NODE_ELEMENT&&u.is(CKEDITOR.dtd.$removeEmpty)}}(u),h[u?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,n=this.startOffset;return CKEDITOR.env.ie&&n&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,n)),d.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(n=this.clone()).collapse(!0),n.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(n)).evaluator=c(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,n=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(n)),d.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(n=this.clone()).collapse(!1),n.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(n)).evaluator=c(),e.checkForward()},getPreviousNode:function(e,n,u){var h=this.clone();return h.collapse(1),h.setStartAt(u||this.root,CKEDITOR.POSITION_AFTER_START),(u=new CKEDITOR.dom.walker(h)).evaluator=e,u.guard=n,u.previous()},getNextNode:function(e,n,u){var h=this.clone();return h.collapse(),h.setEndAt(u||this.root,CKEDITOR.POSITION_BEFORE_END),(u=new CKEDITOR.dom.walker(h)).evaluator=e,u.guard=n,u.next()},checkReadOnly:function(){function r(e,n){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(n)||e.equals(n)))break}e=e.getParent()}return 1}return function(){var e=this.startContainer,n=this.endContainer;return!(r(e,n)&&r(n,e))}}(),moveToElementEditablePosition:function(e,n){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,n?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var u=0;e;){if(e.type==CKEDITOR.NODE_TEXT){n&&this.endContainer&&this.checkEndOfBlock()&&d.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,n?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),u=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,n?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),u=1;else if(n&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var h=e,T=u,m=void 0;h.type==CKEDITOR.NODE_ELEMENT&&h.isEditable(!1)&&(m=h[n?"getLast":"getFirst"](l)),T||m||(m=h[n?"getPrevious":"getNext"](l)),e=m}return!!u},moveToClosestEditablePosition:function(e,n){var u,T,m,h=0,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(u=new CKEDITOR.dom.range(this.root)).moveToPosition(e,g[n?0:1]):u=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?h=1:(T=u[n?"getNextEditableNode":"getPreviousEditableNode"]())&&(h=1,(m=T.type==CKEDITOR.NODE_ELEMENT)&&T.is(CKEDITOR.dtd.$block)&&"false"==T.getAttribute("contenteditable")?(u.setStartAt(T,CKEDITOR.POSITION_BEFORE_START),u.setEndAt(T,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&m&&T.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(u.setEnd(T,0),u.collapse()):u.moveToPosition(T,g[n?1:0])),h&&this.moveToRange(u),!!h},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){if((e=this.clone()).optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),n=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(T){return u(T)&&n(T)};var h=e.next();return e.reset(),h&&h.equals(e.previous())?h:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:s(),getPreviousEditableNode:s(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var n=this.startContainer,u=this.endContainer,h=n.getAscendant("table",!0),T=u.getAscendant("table",!0);return h&&!this.root.contains(h)?null:CKEDITOR.env.safari&&h&&u.equals(this.root)?n.getAscendant(e,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):h&&T&&(h.equals(T)||h.contains(T)||T.contains(h))?n.getAscendant(e,!0):null},scrollIntoView:function(){var n,u,h,e=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),T=this.clone();T.optimize(),(h=T.startContainer.type==CKEDITOR.NODE_TEXT)?(u=T.startContainer.getText(),n=T.startContainer.split(T.startOffset),e.insertAfter(T.startContainer)):T.insertNode(e),e.scrollIntoView(),h&&(T.startContainer.setText(u),n.remove()),e.remove()},getClientRects:function(){function n(h,T,m){return h=CKEDITOR.tools.extend({},h),T&&(h=CKEDITOR.tools.getAbsoluteRectPosition(m.document.getWindow(),h)),!h.width&&(h.width=h.right-h.left),!h.height&&(h.height=h.bottom-h.top),h}function u(h){var m,T=h.startNode;return h=h.endNode,T.setText("\u200b"),T.removeStyle("display"),h?(h.setText("\u200b"),h.removeStyle("display"),m=[T.getClientRect(),h.getClientRect()],h.remove()):m=[T.getClientRect(),T.getClientRect()],T.remove(),{right:Math.max(m[0].right,m[1].right),bottom:Math.max(m[0].bottom,m[1].bottom),left:Math.min(m[0].left,m[1].left),top:Math.min(m[0].top,m[1].top),width:Math.abs(m[0].left-m[1].left),height:Math.max(m[0].bottom,m[1].bottom)-Math.min(m[0].top,m[1].top)}}return void 0!==this.document.getSelection?function(h){var m,T=this.root.getDocument().$.createRange();return T.setStart(this.startContainer.$,this.startOffset),T.setEnd(this.endContainer.$,this.endOffset),m=function r(h,T){var I,_,K,m=CKEDITOR.tools.array.map(h,function(O){return O}),g=new CKEDITOR.dom.range(T.root);if(T.startContainer instanceof CKEDITOR.dom.element&&(_=0===T.startOffset&&T.startContainer.hasAttribute("data-widget")),T.endContainer instanceof CKEDITOR.dom.element&&(K=(K=T.endOffset===(T.endContainer.getChildCount?T.endContainer.getChildCount():T.endContainer.length))&&T.endContainer.hasAttribute("data-widget")),_&&g.setStart(T.startContainer.getParent(),T.startContainer.getIndex()),K&&g.setEnd(T.endContainer.getParent(),T.endContainer.getIndex()+1),(_||K)&&(T=g),g=T.cloneContents().find("[data-cke-widget-id]").toArray(),g=CKEDITOR.tools.array.map(g,function(O){var p=T.root.editor;return O=O.getAttribute("data-cke-widget-id"),p.widgets.instances[O].element}))return g=CKEDITOR.tools.array.map(g,function(O){var p;return p=O.getParent().hasClass("cke_widget_wrapper")?O.getParent():O,(I=this.root.getDocument().$.createRange()).setStart(p.getParent().$,p.getIndex()),I.setEnd(p.getParent().$,p.getIndex()+1),(p=I.getClientRects()).widgetRect=O.getClientRect(),p},T),CKEDITOR.tools.array.forEach(g,function(O){var y;!function p(C){CKEDITOR.tools.array.forEach(m,function(N,k){var b=CKEDITOR.tools.objectCompare(O[C],N);b||(b=CKEDITOR.tools.objectCompare(O.widgetRect,N)),b&&(Array.prototype.splice.call(m,k,O.length-C,O.widgetRect),y=!0)}),y||(C<m.length-1?p(C+1):m.push(O.widgetRect))}(0)}),m}(m=T.getClientRects(),this),m.length||(m=function e(h,T,m){var g;return T.collapsed?m.startContainer instanceof CKEDITOR.dom.element?(h=m.checkStartOfBlock(),g=new CKEDITOR.dom.text("\u200b"),h?m.startContainer.append(g,!0):0===m.startOffset?g.insertBefore(m.startContainer.getFirst()):(m=m.startContainer.getChildren().getItem(m.startOffset-1),g.insertAfter(m)),T.setStart(g.$,0),T.setEnd(g.$,0),h=T.getClientRects(),g.remove()):m.startContainer instanceof CKEDITOR.dom.text&&(""===m.startContainer.getText()?(m.startContainer.setText("\u200b"),h=T.getClientRects(),m.startContainer.setText("")):h=[u(m.createBookmark())]):h=[u(m.createBookmark())],h}(m,T,this)),CKEDITOR.tools.array.map(m,function(g){return n(g,h,this)},this)}:function(h){return[n(u(this.createBookmark()),h,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,n){var m,g,I,_,u=this.getCommonAncestor(),h=this.getBoundaryNodes(),T=[];if(u&&u.find)for(g=u.find(e),m=0;m<g.count();m++)u=g.getItem(m),(n||!u.isReadOnly())&&(I=u.getPosition(h.startNode)&CKEDITOR.POSITION_FOLLOWING||h.startNode.equals(u),_=u.getPosition(h.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||h.endNode.equals(u),I&&_&&T.push(u));return T}},CKEDITOR.dom.range.mergeRanges=function(r){return CKEDITOR.tools.array.reduce(r,function(e,n){var u=e[e.length-1],h=!1;if((n=n.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),u){var T=new CKEDITOR.dom.range(n.root),m=(h=new CKEDITOR.dom.walker(T),CKEDITOR.dom.walker.whitespaces());for(T.setStart(u.endContainer,u.endOffset),T.setEnd(n.startContainer,n.startOffset),T=h.next();m(T)||n.endContainer.equals(T);)T=h.next();h=!T}return h?u.setEnd(n.endContainer,n.endOffset):e.push(n),e},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function v(l){1>arguments.length||(this.range=l,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function c(l,r,e,n){e:{null==n&&(n=function t(l){var r=[];return l.forEach(function(e){if("true"==e.getAttribute("contenteditable"))return r.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),r}(e));for(var u;u=n.shift();)if(u.getDtd().p){n={element:u,remaining:n};break e}n=null}return n?(u=CKEDITOR.filter.instances[n.element.data("cke-filter")])&&!u.check(r)?c(l,r,e,n.remaining):((r=new CKEDITOR.dom.range(n.element)).selectNodeContents(n.element),(r=r.createIterator()).enlargeBr=l.enlargeBr,r.enforceRealBlocks=l.enforceRealBlocks,r.activeFilter=r.filter=u,l._.nestedEditable={element:n.element,container:e,remaining:n.remaining,iterator:r},1):0}function o(l,r,e){return!!r&&((l=l.clone()).collapse(!e),l.checkBoundaryOfElement(r,e?CKEDITOR.START:CKEDITOR.END))}var s=/^[\r\n\t ]+$/,a=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.whitespaces(!0),d=function(r){return a(r)&&f(r)},i={dd:1,dt:1,li:1};v.prototype={getNextParagraph:function(r){var e,n,u,h,T;if(r=r||"p",this._.nestedEditable){if(e=this._.nestedEditable.iterator.getNextParagraph(r))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,e;if(this.activeFilter=this.filter,c(this,r,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(r);this._.nestedEditable=null}if(!this.range.root.getDtd()[r])return null;if(!this._.started){var m=this.range.clone();n=m.startPath();var g=m.endPath(),I=!m.collapsed&&o(m,n.block),_=!m.collapsed&&o(m,g.block,1);m.shrink(CKEDITOR.SHRINK_ELEMENT,!0),I&&m.setStartAt(n.block,CKEDITOR.POSITION_BEFORE_END),_&&m.setEndAt(g.block,CKEDITOR.POSITION_AFTER_START),n=m.endContainer.hasAscendant("pre",!0)||m.startContainer.hasAscendant("pre",!0),m.enlarge(this.forceBrBreak&&!n||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),m.collapsed||(n=new CKEDITOR.dom.walker(m.clone()),g=CKEDITOR.dom.walker.bookmark(!0,!0),n.evaluator=g,this._.nextNode=n.next(),(n=new CKEDITOR.dom.walker(m.clone())).evaluator=g,n=n.previous(),this._.lastNode=n.getNextSourceNode(!0,null,m.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((g=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),g.checkEndOfBlock()&&(g=new CKEDITOR.dom.elementPath(g.endContainer,g.root),this._.lastNode=(g.block||g.blockLimit).getNextSourceNode(!0))),this._.lastNode&&m.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=m.document.createText(""),this._.lastNode.insertAfter(n)),m=null),this._.started=1,n=m}for(g=this._.nextNode,m=this._.lastNode,this._.nextNode=null;g;){I=0,_=g.hasAscendant("pre");var K=g.type!=CKEDITOR.NODE_ELEMENT,O=0;if(K)g.type==CKEDITOR.NODE_TEXT&&s.test(g.getText())&&(K=0);else{var p=g.getName();if(CKEDITOR.dtd.$block[p]&&"false"==g.getAttribute("contenteditable")){c(this,r,e=g);break}if(g.isBlockBoundary(this.forceBrBreak&&!_&&{br:1})){if("br"==p)K=1;else if(!n&&!g.getChildCount()&&"hr"!=p){e=g,u=g.equals(m);break}n&&(n.setEndAt(g,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=g)),I=1}else{if(g.getFirst()){n||(n=this.range.clone()).setStartAt(g,CKEDITOR.POSITION_BEFORE_START),g=g.getFirst();continue}K=1}}if(K&&!n&&(n=this.range.clone()).setStartAt(g,CKEDITOR.POSITION_BEFORE_START),u=(!I||K)&&g.equals(m),n&&!I)for(;!g.getNext(d)&&!u;){if((p=g.getParent()).isBlockBoundary(this.forceBrBreak&&!_&&{br:1})){I=1,K=0,u||p.equals(m),n.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}K=1,u=(g=p).equals(m),O=1}if(K&&n.setEndAt(g,CKEDITOR.POSITION_AFTER_END),(u=!(g=this._getNextSourceNode(g,O,m)))||I&&n)break}if(!e){if(!n)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;g=(e=new CKEDITOR.dom.elementPath(n.startContainer,n.root)).blockLimit,I={div:1,th:1,td:1},!(e=e.block)&&g&&!this.enforceRealBlocks&&I[g.getName()]&&n.checkStartOfBlock()&&n.checkEndOfBlock()&&!g.equals(n.root)?e=g:!e||this.enforceRealBlocks&&e.is(i)?(e=this.range.document.createElement(r),n.extractContents().appendTo(e),e.trim(),n.insertNode(e),h=T=!0):"li"!=e.getName()?n.checkStartOfBlock()&&n.checkEndOfBlock()||(e=e.clone(!1),n.extractContents().appendTo(e),e.trim(),h=!(T=n.splitBlock()).wasStartOfBlock,T=!T.wasEndOfBlock,n.insertNode(e)):u||(this._.nextNode=e.equals(m)?null:this._getNextSourceNode(n.getBoundaryNodes().endNode,1,m))}return h&&(h=e.getPrevious())&&h.type==CKEDITOR.NODE_ELEMENT&&("br"==h.getName()?h.remove():h.getLast()&&"br"==h.getLast().$.nodeName.toLowerCase()&&h.getLast().remove()),T&&(h=e.getLast())&&h.type==CKEDITOR.NODE_ELEMENT&&"br"==h.getName()&&(!CKEDITOR.env.needsBrFiller||h.getPrevious(a)||h.getNext(a))&&h.remove(),this._.nextNode||(this._.nextNode=u||e.equals(m)||!m?null:this._getNextSourceNode(e,1,m)),e},_getNextSourceNode:function(r,e,n){function u(T){return!(T.equals(n)||T.equals(h))}var h=this.range.root;for(r=r.getNextSourceNode(e,null,u);!a(r);)r=r.getNextSourceNode(e,null,u);return r}},CKEDITOR.dom.range.prototype.createIterator=function(){return new v(this)}}(),CKEDITOR.command=function(v,t){var c;this.uiItems=[],this.exec=function(o){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&v.focus(),!1===this.fire("exec")||!1!==t.exec.call(this,v,o))},this.refresh=function(o,s){return!(this.readOnly||!o.readOnly)||(this.context&&!s.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[o.mode]&&this.disable(),!1===this.fire("refresh",{editor:o,path:s})||t.refresh&&!1!==t.refresh.apply(this,arguments)))},this.checkAllowed=function(o){return o||"boolean"!=typeof c?c=v.activeFilter.checkFeature(this):c},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(t){return!(this.state==t||t!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=t,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function v(D,w,P,z,W){var G,J,Q;for(G in D=[],w){J="boolean"==typeof(J=w[G])?{}:"function"==typeof J?{match:J}:b(J),"$"!=G.charAt(0)&&(J.elements=G),P&&(J.featureName=P.toLowerCase());var Z=J;Z.elements=f(Z.elements,/\s+/)||null,Z.propertiesOnly=Z.propertiesOnly||!0===Z.elements;var ee=/\s*,\s*/,M=void 0;for(M in H){Z[M]=f(Z[M],ee)||null;var B=Z,U=L[M],q=f(Z[L[M]],ee),j=Z[M],Y=[],V=!0,X=void 0;for(X in q?V=!1:q={},j)"!"==X.charAt(0)&&(X=X.slice(1),Y.push(X),q[X]=!0,V=!1);for(;X=Y.pop();)j[X]=j["!"+X],delete j["!"+X];B[U]=!V&&q||null}Z.match=Z.match||null,z.push(J),D.push(J)}for(w=W.elements,W=W.generic,P=0,z=D.length;P<z;++P){for(ee in J=!0===(G=b(D[P])).classes||!0===G.styles||!0===G.attributes,Z=G,M=U=ee=void 0,H)Z[ee]=g(Z[ee]);for(M in B=!0,L){for(j in q=[],j=void 0,U=Z[ee=L[M]])-1<j.indexOf("*")?q.push(new RegExp("^"+j.replace(/\*/g,".*")+"$")):q.push(j);(U=q).length&&(Z[ee]=U,B=!1)}if(Z.nothingRequired=B,Z.noProperties=!(Z.attributes||Z.classes||Z.styles),!0===G.elements||null===G.elements)W[J?"unshift":"push"](G);else for(Q in Z=G.elements,delete G.elements,Z)w[Q]?w[Q][J?"unshift":"push"](G):w[Q]=[G]}}function t(D,w,P,z){if((!D.match||D.match(w))&&(z||function d(D,w){if(D.nothingRequired)return!0;var P,z,W,G;if(W=D.requiredClasses)for(G=w.classes,P=0;P<W.length;++P)if("string"==typeof(z=W[P])){if(-1==CKEDITOR.tools.indexOf(G,z))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(G,z))return!1;return i(w.styles,D.requiredStyles)&&i(w.attributes,D.requiredAttributes)}(D,w))&&(D.propertiesOnly||(P.valid=!0),P.allAttributes||(P.allAttributes=c(D.attributes,w.attributes,P.validAttributes)),P.allStyles||(P.allStyles=c(D.styles,w.styles,P.validStyles)),!P.allClasses)){if(w=w.classes,z=P.validClasses,D=D.classes)if(!0===D)D=!0;else{for(var J,W=0,G=w.length;W<G;++W)z[J=w[W]]||(z[J]=D(J));D=!1}else D=!1;P.allClasses=D}}function c(D,w,P){if(!D)return!1;if(!0===D)return!0;for(var z in w)P[z]||(P[z]=D(z));return!1}function o(D,w,P){if(!D.match||D.match(w)){if(D.noProperties)return!1;if(P.hadInvalidAttribute=s(D.attributes,w.attributes)||P.hadInvalidAttribute,P.hadInvalidStyle=s(D.styles,w.styles)||P.hadInvalidStyle,w=w.classes,D=D.classes){for(var z=!1,W=!0===D,G=w.length;G--;)(W||D(w[G]))&&(w.splice(G,1),z=!0);D=z}else D=!1;P.hadInvalidClass=D||P.hadInvalidClass}}function s(D,w){if(!D)return!1;var W,P=!1,z=!0===D;for(W in w)(z||D(W))&&(delete w[W],P=!0);return P}function a(D,w,P){return!(D.disabled||D.customConfig&&!P||!w||(D._.cachedChecks={},0))}function f(D,w){if(!D)return!1;if(!0===D)return D;if("string"==typeof D)return"*"==(D=x(D))||CKEDITOR.tools.convertArrayToObject(D.split(w));if(CKEDITOR.tools.isArray(D))return!!D.length&&CKEDITOR.tools.convertArrayToObject(D);var W,P={},z=0;for(W in D)P[W]=D[W],z++;return!!z&&P}function i(D,w){if(!w)return!0;for(var z,P=0;P<w.length;++P)if("string"==typeof(z=w[P])){if(!(z in D))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(D,z))return!1;return!0}function l(D){if(!D)return{};D=D.split(/\s*,\s*/).sort();for(var w={};D.length;)w[D.shift()]="cke-test";return w}function r(D){var w,P,z,W,G={},J=1;for(D=x(D);w=D.match(E);)(P=w[2])?(z=e(P,"styles"),W=e(P,"attrs"),P=e(P,"classes")):z=W=P=null,G["$"+J++]={elements:w[1],classes:P,styles:z,attributes:W},D=D.slice(w[0].length);return G}function e(D,w){var P=D.match(R[w]);return P?x(P[1]):null}function n(D){var w=D.styleBackup=D.attributes.style,P=D.classBackup=D.attributes.class;D.styles||(D.styles=CKEDITOR.tools.parseCssText(w||"",1)),D.classes||(D.classes=P?P.split(/\s+/):[])}function u(D,w,P,z){var G,W=0;if(z.toHtml&&(w.name=w.name.replace(A,"$1")),z.doCallbacks&&D.elementCallbacks){e:{for(var ee,J=0,Z=(G=D.elementCallbacks).length;J<Z;++J)if(ee=G[J](w)){G=ee;break e}G=void 0}if(G)return G}if(z.doTransform&&(G=D._.transformations[w.name])){for(n(w),J=0;J<G.length;++J)O(D,w,G[J]);T(w)}if(z.doFilter){e:{D=(Z=D._).allowedRules.elements[J=w.name],G=Z.allowedRules.generic,J=Z.disallowedRules.elements[J],Z=Z.disallowedRules.generic,ee=z.skipRequired;var M,B,Q={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(D||G){if(n(w),J)for(M=0,B=J.length;M<B;++M)if(!1===o(J[M],w,Q)){D=null;break e}if(Z)for(M=0,B=Z.length;M<B;++M)o(Z[M],w,Q);if(D)for(M=0,B=D.length;M<B;++M)t(D[M],w,Q,ee);if(G)for(M=0,B=G.length;M<B;++M)t(G[M],w,Q,ee);D=Q}else D=null}if(!D||!D.valid)return P.push(w),1;B=D.validAttributes;var U=D.validStyles;G=D.validClasses;var q=w.styles;Z=w.classes,ee=w.classBackup;var Y,V,j=w.styleBackup,X=[],te=(Q=[],/^data-cke-/);if(M=!1,delete(J=w.attributes).style,delete J.class,delete w.classBackup,delete w.styleBackup,!D.allAttributes)for(Y in J)B[Y]||te.test(Y)&&(Y==(V=Y.replace(/^data-cke-saved-/,""))||B[V])||(delete J[Y],M=!0);if(!D.allStyles||D.hadInvalidStyle){for(Y in q)D.allStyles||U[Y]?X.push(Y+":"+q[Y]):M=!0;X.length&&(J.style=X.sort().join("; "))}else j&&(J.style=j);if(!D.allClasses||D.hadInvalidClass){for(Y=0;Y<Z.length;++Y)(D.allClasses||G[Z[Y]])&&Q.push(Z[Y]);Q.length&&(J.class=Q.sort().join(" ")),ee&&Q.length<ee.split(/\s+/).length&&(M=!0)}else ee&&(J.class=ee);if(M&&(W=1),!z.skipFinalValidation&&!m(w))return P.push(w),1}return z.toHtml&&(w.name=w.name.replace(F,"cke:$1")),W}function T(D){var P,w=D.attributes;delete w.style,delete w.class,(P=CKEDITOR.tools.writeCssText(D.styles,!0))&&(w.style=P),D.classes.length&&(w.class=D.classes.sort().join(" "))}function m(D){switch(D.name){case"a":if(!(D.children.length||D.attributes.name||D.attributes.id))return!1;break;case"img":if(!D.attributes.src)return!1}return!0}function g(D){if(!D)return!1;if(!0===D)return!0;var w=function h(D){var P,w=[];for(P in D)-1<P.indexOf("*")&&w.push(P.replace(/\*/g,".*"));return w.length?new RegExp("^(?:"+w.join("|")+")$"):null}(D);return function(P){return P in D||w&&P.match(w)}}function I(){return new CKEDITOR.htmlParser.element("br")}function _(D){return D.type==CKEDITOR.NODE_ELEMENT&&("br"==D.name||k.$block[D.name])}function K(D,w,P){if(k.$empty[z=D.name]||!D.children.length)"hr"==z&&"br"==w?D.replaceWith(I()):(D.parent&&P.push({check:"it",el:D.parent}),D.remove());else if(k.$block[z]||"tr"==z)if("br"==w)D.previous&&!_(D.previous)&&(w=I()).insertBefore(D),D.next&&!_(D.next)&&(w=I()).insertAfter(D),D.replaceWithChildren();else{var z,W;e:{W=k[w];for(var Z,G=0,J=(z=D.children).length;G<J;++G)if((Z=z[G]).type==CKEDITOR.NODE_ELEMENT&&!W[Z.name]){W=!1;break e}W=!0}if(W)D.name=w,D.attributes={},P.push({check:"parent-down",el:D});else{var ee,M;for(G=(W=D.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==W.name,J=z.length;0<J;)Z=z[--J],G&&(Z.type==CKEDITOR.NODE_TEXT||Z.type==CKEDITOR.NODE_ELEMENT&&k.$inline[Z.name])?(ee||((ee=new CKEDITOR.htmlParser.element(w)).insertAfter(D),P.push({check:"parent-down",el:ee})),ee.add(Z,0)):(ee=null,M=k[W.name]||k.span,Z.insertAfter(D),W.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||Z.type!=CKEDITOR.NODE_ELEMENT||M[Z.name]||P.push({check:"el-up",el:Z}));D.remove()}}else z in{style:1,script:1}?D.remove():(D.parent&&P.push({check:"it",el:D.parent}),D.replaceWithChildren())}function O(D,w,P){var z,W;for(z=0;z<P.length;++z)if(!((W=P[z]).check&&!D.check(W.check,!1)||W.left&&!W.left(w))){W.right(w,$);break}}function p(D,w){var G,J,Z,ee,P=w.getDefinition(),z=P.attributes,W=P.styles;if(D.name!=P.element)return!1;for(G in z)if("class"==G){for(P=z[G].split(/\s+/),Z=D.classes.join("|");ee=P.pop();)if(-1==Z.indexOf(ee))return!1}else if(D.attributes[G]!=z[G])return!1;for(J in W)if(D.styles[J]!=W[J])return!1;return!0}function y(D,w){var P,z;return"string"==typeof D?P=D:D instanceof CKEDITOR.style?z=D:(P=D[0],z=D[1]),[{element:P,left:z,right:function(G,J){J.transform(G,w)}}]}function C(D){return function(w){return p(w,D)}}function N(D){return function(w,P){P[D](w)}}var D,w,k=CKEDITOR.dtd,b=CKEDITOR.tools.copy,x=CKEDITOR.tools.trim,S=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(D,w){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var P=this.editor=D instanceof CKEDITOR.editor?D:null;if(P&&!w){this.customConfig=!0;var z=P.config.allowedContent;!0===z?this.disabled=!0:(z||(this.customConfig=!1),this.allow(z,"config",1),this.allow(P.config.extraAllowedContent,"extra",1),this.allow(S[P.enterMode]+" "+S[P.shiftEnterMode],"default",1),this.disallow(P.config.disallowedContent))}else this.customConfig=!1,this.allow(w||D,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(w,P,z){if(!a(this,w,z))return!1;var W,G;if("string"==typeof w)w=r(w);else if(w instanceof CKEDITOR.style){if(w.toAllowedContentRules)return this.allow(w.toAllowedContentRules(this.editor),P,z);z=(W=w.getDefinition()).attributes,(w={})[W.element]=W={styles:W.styles,requiredStyles:W.styles&&CKEDITOR.tools.object.keys(W.styles)},z&&(z=b(z),W.classes=z.class?z.class.split(/\s+/):null,W.requiredClasses=W.classes,delete z.class,W.attributes=z,W.requiredAttributes=z&&CKEDITOR.tools.object.keys(z))}else if(CKEDITOR.tools.isArray(w)){for(W=0;W<w.length;++W)G=this.allow(w[W],P,z);return G}return v(this,w,P,this.allowedContent,this._.allowedRules),!0},applyTo:function(w,P,z,W){if(this.disabled)return!1;var ee,U,q,G=this,J=[],Z=this.editor&&this.editor.config.protectedSource,M=!1,B={doFilter:!z,doTransform:!0,doCallbacks:!0,toHtml:P};for(w.forEach(function(j){if(j.type==CKEDITOR.NODE_ELEMENT){if("off"==j.attributes["data-cke-filter"])return!1;if(!P||"span"!=j.name||!~CKEDITOR.tools.object.keys(j.attributes).join("|").indexOf("data-cke-"))if(1&(ee=u(G,j,J,B)))M=!0;else if(2&ee)return!1}else if(j.type==CKEDITOR.NODE_COMMENT&&j.value.match(/^\{cke_protected\}(?!\{C\})/)){var Y;e:{var X,Q,te,V=decodeURIComponent(j.value.replace(/^\{cke_protected\}/,""));if(Y=[],Z)for(Q=0;Q<Z.length;++Q)if((te=V.match(Z[Q]))&&te[0].length==V.length){Y=!0;break e}1==(V=CKEDITOR.htmlParser.fragment.fromHtml(V)).children.length&&(X=V.children[0]).type==CKEDITOR.NODE_ELEMENT&&u(G,X,Y,B),Y=!Y.length}Y||J.push(j)}},null,!0),J.length&&(M=!0),w=[],W=S[W||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];z=J.pop();)z.type==CKEDITOR.NODE_ELEMENT?K(z,W,w):z.remove();for(;U=w.pop();)if((z=U.el).parent)switch(q=k[z.parent.name]||k.span,U.check){case"it":k.$removeEmpty[z.name]&&!z.children.length?K(z,W,w):m(z)||K(z,W,w);break;case"el-up":z.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||q[z.name]||K(z,W,w);break;case"parent-down":z.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||q[z.name]||K(z.parent,W,w)}return M},checkFeature:function(w){return!(!this.disabled&&w)||(w.toFeature&&(w=w.toFeature(this.editor)),!w.requiredContent||this.check(w.requiredContent))},disable:function(){this.disabled=!0},disallow:function(w){return!!a(this,w,!0)&&("string"==typeof w&&(w=r(w)),v(this,w,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(w){if(!this.disabled&&w){var P,z,G,W=[];for(P=0;P<w.length&&!G;++P)("string"==typeof(z=w[P])||z instanceof CKEDITOR.style)&&this.check(z)&&(G=z);if(G){for(P=0;P<w.length;++P)W.push(y(w[P],G));this.addTransformations(W)}}},addElementCallback:function(w){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(w)},addFeature:function(w){return!(!this.disabled&&w)||(w.toFeature&&(w=w.toFeature(this.editor)),this.allow(w.allowedContent,w.name),this.addTransformations(w.contentTransformations),this.addContentForms(w.contentForms),!w.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(w.requiredContent))},addTransformations:function(w){var P,z;if(!this.disabled&&w){var G,W=this._.transformations;for(G=0;G<w.length;++G){P=w[G];var J=void 0,Z=void 0,ee=void 0,M=void 0,B=void 0,U=void 0;for(z=[],Z=0;Z<P.length;++Z)"string"==typeof(ee=P[Z])?(M=(ee=ee.split(/\s*:\s*/))[0],B=null,U=ee[1]):(M=ee.check,B=ee.left,U=ee.right),J||(J=(J=ee).element?J.element:M?M.match(/^([a-z0-9]+)/i)[0]:J.left.getDefinition().element),B instanceof CKEDITOR.style&&(B=C(B)),z.push({check:M==J?null:M,left:B,right:"string"==typeof U?N(U):U});W[P=J]||(W[P]=[]),W[P].push(z)}}},check:function(w,P,z){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(w)){for(var W=w.length;W--;)if(this.check(w[W],P,z))return!0;return!1}var G,J;if("string"==typeof w){if((J=w+"<"+(!1===P?"0":"1")+(z?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[J];var Z=(G=r(w).$1).styles;W=G.classes,G.name=G.elements,G.classes=W=W?W.split(/\s*,\s*/):[],G.styles=l(Z),G.attributes=l(G.attributes),G.children=[],W.length&&(G.attributes.class=W.join(" ")),Z&&(G.attributes.style=CKEDITOR.tools.writeCssText(G.styles))}else W=(G=w.getDefinition()).attributes||{},(Z=G.styles)&&!CKEDITOR.tools.isEmpty(Z)?(Z=b(Z),W.style=CKEDITOR.tools.writeCssText(Z,!0)):Z={},G={name:G.element,attributes:W,classes:W.class?W.class.split(/\s+/):[],styles:Z,children:[]};Z=CKEDITOR.tools.clone(G);var M,ee=[];if(!1!==P&&(M=this._.transformations[G.name])){for(W=0;W<M.length;++W)O(this,G,M[W]);T(G)}return u(this,Z,ee,{doFilter:!0,doTransform:!1!==P,skipRequired:!z,skipFinalValidation:!z}),0<ee.length?z=!1:((P=G.attributes.class)&&(G.attributes.class=G.attributes.class.split(" ").sort().join(" ")),z=CKEDITOR.tools.objectCompare(G.attributes,Z.attributes,!0),P&&(G.attributes.class=P)),"string"==typeof w&&(this._.cachedChecks[J]=z),z},getAllowedEnterMode:(D=["p","div","br"],w={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR},function(P,z){var G,W=D.slice();if(this.check(S[P]))return P;for(z||(W=W.reverse());G=W.pop();)if(this.check(G))return w[G];return CKEDITOR.ENTER_BR}),clone:function(){var w=new CKEDITOR.filter,P=CKEDITOR.tools.clone;return w.allowedContent=P(this.allowedContent),w._.allowedRules=P(this._.allowedRules),w.disallowedContent=P(this.disallowedContent),w._.disallowedRules=P(this._.disallowedRules),w._.transformations=P(this._.transformations),w.disabled=this.disabled,w.editor=this.editor,w},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var $,H={styles:1,attributes:1,classes:1},L={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},E=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,R={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},A=/^cke:(object|embed|param)$/,F=/^(object|embed|param)$/;$=CKEDITOR.filter.transformationsTools={sizeToStyle:function(w){this.lengthToStyle(w,"width"),this.lengthToStyle(w,"height")},sizeToAttribute:function(w){this.lengthToAttribute(w,"width"),this.lengthToAttribute(w,"height")},lengthToStyle:function(w,P,z){if(!((z=z||P)in w.styles)){var W=w.attributes[P];W&&(/^\d+$/.test(W)&&(W+="px"),w.styles[z]=W)}delete w.attributes[P]},lengthToAttribute:function(w,P,z){if(!((z=z||P)in w.attributes)){var W=w.styles[P],G=W&&W.match(/^(\d+)(?:\.\d*)?px$/);G?w.attributes[z]=G[1]:"cke-test"==W&&(w.attributes[z]="cke-test")}delete w.styles[P]},alignmentToStyle:function(w){if(!("float"in w.styles)){var P=w.attributes.align;("left"==P||"right"==P)&&(w.styles.float=P)}delete w.attributes.align},alignmentToAttribute:function(w){if(!("align"in w.attributes)){var P=w.styles.float;("left"==P||"right"==P)&&(w.attributes.align=P)}delete w.styles.float},splitBorderShorthand:function(w){if(w.styles.border){var P=CKEDITOR.tools.style.parse.border(w.styles.border);P.color&&(w.styles["border-color"]=P.color),P.style&&(w.styles["border-style"]=P.style),P.width&&(w.styles["border-width"]=P.width),delete w.styles.border}},listTypeToStyle:function(w){if(w.attributes.type)switch(w.attributes.type){case"a":w.styles["list-style-type"]="lower-alpha";break;case"A":w.styles["list-style-type"]="upper-alpha";break;case"i":w.styles["list-style-type"]="lower-roman";break;case"I":w.styles["list-style-type"]="upper-roman";break;case"1":w.styles["list-style-type"]="decimal";break;default:w.styles["list-style-type"]=w.attributes.type}},splitMarginShorthand:function(w){function P(W){w.styles["margin-top"]=z[W[0]],w.styles["margin-right"]=z[W[1]],w.styles["margin-bottom"]=z[W[2]],w.styles["margin-left"]=z[W[3]]}if(w.styles.margin){var z=w.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(z.length){case 1:P([0,0,0,0]);break;case 2:P([0,1,0,1]);break;case 3:P([0,1,2,1]);break;case 4:P([0,1,2,3])}delete w.styles.margin}},matchesStyle:p,transform:function(w,P){if("string"==typeof P)w.name=P;else{var J,Z,ee,M,z=P.getDefinition(),W=z.styles,G=z.attributes;for(J in w.name=z.element,G)if("class"==J)for(z=w.classes.join("|"),ee=G[J].split(/\s+/);M=ee.pop();)-1==z.indexOf(M)&&w.classes.push(M);else w.attributes[J]=G[J];for(Z in W)w.styles[Z]=W[Z]}}}}(),CKEDITOR.focusManager=function(v){return v.focusManager?v.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:v},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(t){this._.timer&&clearTimeout(this._.timer),t&&(this.currentActive=t),this.hasFocus||this._.locked||((t=CKEDITOR.currentInstance)&&t.focusManager.blur(1),this.hasFocus=!0,(t=this._.editor.container)&&t.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(t){function c(){if(this.hasFocus){this.hasFocus=!1;var s=this._.editor.container;s&&s.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var o=CKEDITOR.focusManager._.blurDelay;t||!o?c.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,c.call(this)},o,this)}},add:function(t,c){if(!(o=t.getCustomData("focusmanager"))||o!=this){o&&o.remove(t);var o="focus",s="blur";c&&(CKEDITOR.env.ie?(o="focusin",s="focusout"):CKEDITOR.event.useCapture=1);var a={blur:function(){t.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(t)}};t.on(o,a.focus,this),t.on(s,a.blur,this),c&&(CKEDITOR.event.useCapture=0),t.setCustomData("focusmanager",this),t.setCustomData("focusmanager_handlers",a)}},remove:function(t){t.removeCustomData("focusmanager");var c=t.removeCustomData("focusmanager_handlers");t.removeListener("blur",c.blur),t.removeListener("focus",c.focus)}},CKEDITOR.keystrokeHandler=function(v){return v.keystrokeHandler?v.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:v},this)},function(){var v,t=function(s){var a=(s=s.data).getKeystroke(),f=this.keystrokes[a],d=this._.editor;return(v=!1===d.fire("key",{keyCode:a,domEvent:s}))||(f&&(v=!1!==d.execCommand(f,{from:"keystrokeHandler"})),v||(v=!!this.blockedKeystrokes[a])),v&&s.preventDefault(!0),!v},c=function(s){v&&(v=!1,s.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(s){s.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&s.on("keypress",c,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(t,c,o){t&&CKEDITOR.lang.languages[t]||(t=this.detect(c,t));var s=this;c=function(){s[t].dir=s.rtl[t]?"rtl":"ltr",o(t,s[t])},this[t]?c():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+t+".js"),c,this)},detect:function(t,c){var a,o=this.languages,s=(a=(c=c||navigator.userLanguage||navigator.language||t).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1];return o[s+"-"+(a=a[2])]?s=s+"-"+a:o[s]||(s=null),CKEDITOR.lang.detect=s?function(){return s}:function(f){return f},s||t}},CKEDITOR.scriptLoader=function(){var v={},t={};return{load:function(o,s,a,f){var d="string"==typeof o;d&&(o=[o]),a||(a=CKEDITOR);var i=o.length,l=[],r=[],e=function(g){s&&(d?s.call(a,g):s.call(a,l,r))};if(0===i)e(!0);else{var n=function(g,I){(I?l:r).push(g),0>=--i&&(f&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),e(I))},u=function(g,I){v[g]=1;var _=t[g];delete t[g];for(var K=0;K<_.length;K++)_[K](g,I)},h=function(g){if(v[g])n(g,!0);else{var I=t[g]||(t[g]=[]);if(I.push(n),!(1<I.length)){var _=new CKEDITOR.dom.element("script");_.setAttributes({type:"text/javascript",src:g}),s&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?_.$.onreadystatechange=function(){("loaded"==_.$.readyState||"complete"==_.$.readyState)&&(_.$.onreadystatechange=null,u(g,!0))}:(_.$.onload=function(){setTimeout(function(){_.$.onload=null,_.$.onerror=null,u(g,!0)},0)},_.$.onerror=function(){_.$.onload=null,_.$.onerror=null,u(g,!1)})),_.appendTo(CKEDITOR.document.getHead())}}};f&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var T=0;T<i;T++)h(o[T])}},queue:function(){function c(){var s;(s=o[0])&&this.load(s.scriptUrl,s.callback,CKEDITOR,0)}var o=[];return function(s,a){var f=this;o.push({scriptUrl:s,callback:function(){a&&a.apply(this,arguments),o.shift(),c.call(f)}}),1==o.length&&c.call(this)}}()}}(),CKEDITOR.resourceManager=function(v,t){this.basePath=v,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(t,c){if(this.registered[t])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+t+'" is already registered.');var o=this.registered[t]=c||{};return o.name=t,o.path=this.getPath(t),CKEDITOR.fire(t+CKEDITOR.tools.capitalize(this.fileName)+"Ready",o),this.get(t)},get:function(t){return this.registered[t]||null},getPath:function(t){var c=this.externals[t];return CKEDITOR.getUrl(c&&c.dir||this.basePath+t+"/")},getFilePath:function(t){var c=this.externals[t];return CKEDITOR.getUrl(this.getPath(t)+(c?c.file:this.fileName+".js"))},addExternal:function(t,c,o){t=t.split(",");for(var s=0;s<t.length;s++){var a=t[s];o||(c=c.replace(/[^\/]+$/,function(f){return o=f,""})),this.externals[a]={dir:c,file:o||this.fileName+".js"}}},load:function(t,c,o){CKEDITOR.tools.isArray(t)||(t=t?[t]:[]);for(var s=this.loaded,a=this.registered,f=[],d={},i={},l=0;l<t.length;l++){var r=t[l];if(r)if(s[r]||a[r])i[r]=this.get(r);else{var e=this.getFilePath(r);f.push(e),e in d||(d[e]=[]),d[e].push(r)}}CKEDITOR.scriptLoader.load(f,function(n,u){if(u.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+d[u[0]].join(",")+'" was not found at "'+u[0]+'".');for(var h=0;h<n.length;h++)for(var T=d[n[h]],m=0;m<T.length;m++){var g=T[m];i[g]=this.get(g),s[g]=1}c.call(o,i)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(v){var t={};return function(c,o,s){var a={};(function d(i){v.call(this,i,function(l){CKEDITOR.tools.extend(a,l);var e,r=[];for(e in l){var n=l[e],u=n&&n.requires;if(!t[e]){if(n.icons)for(var h=n.icons.split(","),T=h.length;T--;)CKEDITOR.skin.addIcon(h[T],n.path+"icons/"+(CKEDITOR.env.hidpi&&n.hidpi?"hidpi/":"")+h[T]+".png");n.isSupportedEnvironment=n.isSupportedEnvironment||function(){return!0},t[e]=1}if(u)for(u.split&&(u=u.split(",")),n=0;n<u.length;n++)a[u[n]]||r.push(u[n])}if(r.length)d.call(this,r);else{for(e in a)(n=a[e]).onLoad&&!n.onLoad._called&&(!1===n.onLoad()&&delete a[e],n.onLoad._called=1);o&&o.call(s||window,a)}},this)}).call(this,c)}}),CKEDITOR.plugins.setLang=function(v,t,c){var o=this.get(v);v=o.langEntries||(o.langEntries={}),(o=o.lang||(o.lang=[])).split&&(o=o.split(",")),-1==CKEDITOR.tools.indexOf(o,t)&&o.push(t),v[t]=c},CKEDITOR.ui=function(v){return v.ui?v.ui:(this.items={},this.instances={},this.editor=v,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(t,c,o){o.name=t.toLowerCase();var s=this.items[t]={type:c,command:o.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(s,o)},get:function(t){return this.instances[t]},create:function(t){var c=this.items[t],s=c&&this._.handlers[c.type],o=c&&c.command&&this.editor.getCommand(c.command);return s=s&&s.create.apply(this,c.args),this.instances[t]=s,o&&o.uiItems.push(s),s&&!s.type&&(s.type=c.type),s},addHandler:function(t,c){this._.handlers[t]=c},space:function(t){return CKEDITOR.document.getById(this.spaceId(t))},spaceId:function(t){return this.editor.id+"_"+t}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function v(m,g,I){if(CKEDITOR.event.call(this),m=m&&CKEDITOR.tools.clone(m),void 0!==g){if(!(g instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!I)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&I==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function c(m,g){return g==CKEDITOR.ELEMENT_MODE_INLINE?m.is(CKEDITOR.dtd.$editable)||m.is("textarea"):g==CKEDITOR.ELEMENT_MODE_REPLACE?!m.is(CKEDITOR.dtd.$nonBodyContent):1}(g,I))throw Error('The specified element mode is not supported on element: "'+g.getName()+'".');this.element=g,this.elementMode=I,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(g.getId()||g.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function t(){do{var m="editor"+ ++h}while(CKEDITOR.instances[m]);return m}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",o),this.on("selectionChange",function(_){a(this,_.data.path)}),this.on("activeFilterChange",function(){a(this,this.elementPath(),!0)}),this.on("mode",o),this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var _=this.createRange();_.selectNodeContents(this.editable()),_.shrink(CKEDITOR.SHRINK_ELEMENT,!0),_.collapse(),this.getSelection().selectRanges([_])}this.focus()}}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?function d(m,g){m.on("customConfigLoaded",function(){if(g){if(g.on)for(var I in g.on)m.on(I,g.on[I]);CKEDITOR.tools.extend(m.config,g,!0),delete m.config.on}m.readOnly=!!(I=m.config).readOnly||(m.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?m.element.is("textarea")?m.element.hasAttribute("disabled")||m.element.hasAttribute("readonly"):m.element.isReadOnly():m.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(m.element.hasAttribute("disabled")||m.element.hasAttribute("readonly"))),m.blockless=m.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(m.element.is("textarea")||CKEDITOR.dtd[m.element.getName()].p),m.tabIndex=I.tabIndex||m.element&&m.element.getAttribute("tabindex")||0,m.activeEnterMode=m.enterMode=m.blockless?CKEDITOR.ENTER_BR:I.enterMode,m.activeShiftEnterMode=m.shiftEnterMode=m.blockless?CKEDITOR.ENTER_BR:I.shiftEnterMode,I.skin&&(CKEDITOR.skinName=I.skin),m.fireOnce("configLoaded"),m.dataProcessor=new CKEDITOR.htmlDataProcessor(m),m.filter=m.activeFilter=new CKEDITOR.filter(m),function i(m){CKEDITOR.skin.loadPart("editor",function(){!function l(m){CKEDITOR.lang.load(m.config.language,m.config.defaultLanguage,function(g,I){var _=m.config.title;m.langCode=g,m.lang=CKEDITOR.tools.prototypedCopy(I),m.title="string"==typeof _||!1===_?_:[m.lang.editor,m.name].join(", "),m.config.contentsLangDirection||(m.config.contentsLangDirection=m.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?m.element.getDirection(1):m.lang.dir),m.fire("langLoaded"),function r(m){m.getStylesSet(function(g){m.once("loaded",function(){m.fire("stylesSet",{styles:g})},null,null,1),function e(m){function g(C){return C?(CKEDITOR.tools.isArray(C)&&(C=C.join(",")),C.replace(/\s/g,"")):""}var I=m.config,y=g(I.plugins),_=g(I.extraPlugins),K=g(I.removePlugins);if(_){var O=new RegExp("(?:^|,)(?:"+_.replace(/,/g,"|")+")(?=,|$)","g");y=(y=y.replace(O,""))+","+_}if(K){var p=new RegExp("(?:^|,)(?:"+K.replace(/,/g,"|")+")(?=,|$)","g");y=y.replace(p,"")}CKEDITOR.env.air&&(y+=",adobeair"),CKEDITOR.plugins.load(y.split(","),function(C){var N=[],k=[],b=[];for(var x in m.plugins=CKEDITOR.tools.extend({},m.plugins,C),C){var R,S=C[x],H=S.lang,L=null,E=S.requires;if(CKEDITOR.tools.isArray(E)&&(E=E.join(",")),E&&(R=E.match(p)))for(;E=R.pop();)CKEDITOR.error("editor-plugin-required",{plugin:E.replace(",",""),requiredBy:x});H&&!m.lang[x]&&(H.split&&(H=H.split(",")),L=0<=CKEDITOR.tools.indexOf(H,m.langCode)?m.langCode:(L=m.langCode.replace(/-.*/,""))!=m.langCode&&0<=CKEDITOR.tools.indexOf(H,L)?L:0<=CKEDITOR.tools.indexOf(H,"en")?"en":H[0],S.langEntries&&S.langEntries[L]?(m.lang[x]=S.langEntries[L],L=null):b.push(CKEDITOR.getUrl(S.path+"lang/"+L+".js"))),k.push(L),N.push(S)}CKEDITOR.scriptLoader.load(b,function(){for(var A=["beforeInit","init","afterInit"],F=0;F<A.length;F++)for(var $=0;$<N.length;$++){var D=N[$];0===F&&k[$]&&D.lang&&D.langEntries&&(m.lang[D.name]=D.langEntries[k[$]]),D[A[F]]&&D[A[F]](m)}for(m.fireOnce("pluginsLoaded"),I.keystrokes&&m.setKeystroke(m.config.keystrokes),$=0;$<m.config.blockedKeystrokes.length;$++)m.keystrokeHandler.blockedKeystrokes[m.config.blockedKeystrokes[$]]=1;m.status="loaded",m.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,m)})})}(m)})}(m)})}(m)})}(m)}),g&&null!=g.customConfig&&(m.config.customConfig=g.customConfig),f(m)||m.fireOnce("customConfigLoaded")}(this,m):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function o(){var g,m=this.commands;for(g in m)s(this,m[g])}function s(m,g){g[g.startDisabled||m.readOnly&&!g.readOnly?"disable":g.modes[m.mode]?"enable":"disable"]()}function a(m,g,I){if(g){var _,K,O=m.commands;for(K in O)_=O[K],(I||_.contextSensitive)&&_.refresh(m,g)}}function f(m){if(!(g=m.config.customConfig))return!1;var g=CKEDITOR.getUrl(g),I=T[g]||(T[g]={});return I.fn?(I.fn.call(m,m.config),CKEDITOR.getUrl(m.config.customConfig)!=g&&f(m)||m.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(g,function(){I.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},f(m)}),!0}function n(){var m=this.element;if(m&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var g=this.getData();return this.config.htmlEncodeOutput&&(g=CKEDITOR.tools.htmlEncode(g)),m.is("textarea")?m.setValue(g):m.setHtml(g),!0}return!1}v.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=v;var h=0,T={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(g,I){for(var _=0;_<I.length;_++){var K=I[_];if(this[K])return CKEDITOR.warn("editor-plugin-conflict",{plugin:g,replacedWith:K}),!0}return!1}},addCommand:function(g,I){I.name=g.toLowerCase();var _=I instanceof CKEDITOR.command?I:new CKEDITOR.command(this,I);return this.mode&&s(this,_),this.commands[g]=_},_attachToForm:function(){function g(p){_.updateElement(),_._.required&&!K.getValue()&&!1===_.fire("required")&&p.data.preventDefault()}var _=this,K=_.element,O=new CKEDITOR.dom.element(K.$.form);K.is("textarea")&&O&&(O.on("submit",g),function I(p){return!!(p&&p.call&&p.apply)}(O.$.submit)&&(O.$.submit=CKEDITOR.tools.override(O.$.submit,function(p){return function(){g(),p.apply?p.apply(this):p()}})),_.on("destroy",function(){O.removeListener("submit",g)}))},destroy:function(g){var I=CKEDITOR.filter.instances,_=this;this.fire("beforeDestroy"),!g&&n.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(I),function(K){_===(K=I[K]).editor&&K.destroy()}),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(g){if(!g){if(!(g=this.getSelection()))return null;g=g.getStartElement()}return g?new CKEDITOR.dom.elementPath(g,this.editable()):null},createRange:function(){var g=this.editable();return g?new CKEDITOR.dom.range(g):null},execCommand:function(g,I){var _=this.getCommand(g),K={name:g,commandData:I||{},command:_};return!(!_||_.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",K)||(K.returnValue=_.exec(K.commandData),_.async||!1===this.fire("afterCommandExec",K)))&&K.returnValue},getCommand:function(g){return this.commands[g]},getData:function(g){!g&&this.fire("beforeGetData");var I=this._.data;return"string"!=typeof I&&(I=(I=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?I.is("textarea")?I.getValue():I.getHtml():""),I={dataValue:I},!g&&this.fire("getData",I),I.dataValue},getSnapshot:function(){var g=this.fire("getSnapshot");return"string"!=typeof g&&(g=(g=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?g.is("textarea")?g.getValue():g.getHtml():""),g},loadSnapshot:function(g){this.fire("loadSnapshot",g)},setData:function(g,I,_){var K=!0,O=I;I&&"object"==typeof I&&(_=I.internal,O=I.callback,K=!I.noSnapshot),!_&&K&&this.fire("saveSnapshot"),(O||!_)&&this.once("dataReady",function(p){!_&&K&&this.fire("saveSnapshot"),O&&O.call(p.editor)}),g={dataValue:g},!_&&this.fire("setData",g),this._.data=g.dataValue,!_&&this.fire("afterSetData",g)},setReadOnly:function(g){this.readOnly!=(g=null==g||g)&&(this.readOnly=g,this.keystrokeHandler.blockedKeystrokes[8]=+g,this.editable().setReadOnly(g),this.fire("readOnly"))},insertHtml:function(g,I,_){this.fire("insertHtml",{dataValue:g,mode:I,range:_})},insertText:function(g){this.fire("insertText",g)},insertElement:function(g){this.fire("insertElement",g)},getSelectedHtml:function(g){var I=this.editable(),_=(_=this.getSelection())&&_.getRanges();return I&&_&&0!==_.length?(I=function u(m,g){function _(b){var x=b.startContainer;return x.is("tr")?b.cloneContents():x.clone(!0)}for(var O,p,y,K=new CKEDITOR.dom.documentFragment,C=0;C<m.length;C++){var N=m[C],k=N.startContainer.getAscendant("tr",!0);x=void 0,void 0,S=(b=N).endContainer,(x=b.startContainer).is&&(x.is("tr")||x.is("td")&&x.equals(S)&&b.endOffset===x.getChildCount())?(O||((O=k.getAscendant("table").clone()).append(k.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),K.append(O),O=O.findOne("thead, tbody, tfoot")),p&&p.equals(k)||(p=k,y=k.clone(),O.append(y)),y.append(_(N))):K.append(N.cloneContents())}var b,x,S;return O?K:g.getHtmlFromRange(m[0])}(_,I),g?I.getHtml():I):null},extractSelectedHtml:function(g,I){var p,_=this.editable(),K=this.getSelection().getRanges(),O=new CKEDITOR.dom.documentFragment;if(!_||0===K.length)return null;for(p=0;p<K.length;p++)O.append(_.extractHtmlFromRange(K[p],I));return I||this.getSelection().selectRanges([K[0]]),g?O.getHtml():O},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return n.call(this)},setKeystroke:function(){for(var _,K,g=this.keystrokeHandler.keystrokes,I=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],O=I.length;O--;)_=I[O],K=0,CKEDITOR.tools.isArray(_)&&(K=_[1],_=_[0]),K?g[_]=K:delete g[_]},getCommandKeystroke:function(g,I){var _="string"==typeof g?this.getCommand(g):g,K=[];if(_){var O=CKEDITOR.tools.object.findKey(this.commands,_),p=this.keystrokeHandler.keystrokes;if(_.fakeKeystroke)K.push(_.fakeKeystroke);else for(var y in p)p[y]===O&&K.push(y)}return I?K:K[0]||null},addFeature:function(g){return this.filter.addFeature(g)},setActiveFilter:function(g){g||(g=this.filter),this.activeFilter!==g&&(this.activeFilter=g,this.fire("activeFilterChange"),g===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(g.getAllowedEnterMode(this.enterMode),g.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(g,I){g=g?this.blockless?CKEDITOR.ENTER_BR:g:this.enterMode,I=I?this.blockless?CKEDITOR.ENTER_BR:I:this.shiftEnterMode,(this.activeEnterMode!=g||this.activeShiftEnterMode!=I)&&(this.activeEnterMode=g,this.activeShiftEnterMode=I,this.fire("activeEnterModeChange"))},showNotification:function(g){alert(g)}}),CKEDITOR.editor._getEditorElement=function(m){if(!CKEDITOR.env.isCompatible)return null;var g=CKEDITOR.dom.element.get(m);return g?g.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:g.getEditor().name}),null):g:(CKEDITOR.error("editor-incorrect-element",{element:m}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var v=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(o){for(var s,a,d,f=0;s=this._.htmlPartsRegex.exec(o);)if((a=s.index)>f&&(f=o.substring(f,a),d?d.push(f):this.onText(f)),f=this._.htmlPartsRegex.lastIndex,!(a=s[1])||(a=a.toLowerCase(),d&&CKEDITOR.dtd.$cdata[a]&&(this.onCDATA(d.join("")),d=null),d))if(d)d.push(s[0]);else if(a=s[3]){if(a=a.toLowerCase(),!/="/.test(a)){var l,i={},r=s[4];if(s=!!s[5],r)for(;l=v.exec(r);){var e=l[1].toLowerCase();i[e]=!(l=l[2]||l[3]||l[4]||"")&&t[e]?e:CKEDITOR.tools.htmlDecodeAttr(l)}this.onTagOpen(a,i,s),!d&&CKEDITOR.dtd.$cdata[a]&&(d=[])}}else(a=s[2])&&this.onComment(a);else this.onTagClose(a);o.length>f&&this.onText(o.substring(f,o.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(t){this._.output.push("<",t)},openTagClose:function(t,c){this._.output.push(c?" />":">")},attribute:function(t,c){"string"==typeof c&&(c=CKEDITOR.tools.htmlEncodeAttr(c)),this._.output.push(" ",t,'="',c,'"')},closeTag:function(t){this._.output.push("</",t,">")},text:function(t){this._.output.push(t)},comment:function(t){this._.output.push("\x3c!--",t,"--\x3e")},write:function(t){this._.output.push(t)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(t){var c=this._.output.join("");return t&&this.reset(),c}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var t=this.parent.children,c=CKEDITOR.tools.indexOf(t,this),o=this.previous,s=this.next;o&&(o.next=s),s&&(s.previous=o),t.splice(c,1),this.parent=null},replaceWith:function(t){var c=this.parent.children,o=CKEDITOR.tools.indexOf(c,this),s=t.previous=this.previous,a=t.next=this.next;s&&(s.next=t),a&&(a.previous=t),c[o]=t,t.parent=this.parent,this.parent=null},insertAfter:function(t){var c=t.parent.children,o=CKEDITOR.tools.indexOf(c,t),s=t.next;c.splice(o+1,0,this),this.next=t.next,this.previous=t,t.next=this,s&&(s.previous=this),this.parent=t.parent},insertBefore:function(t){var c=t.parent.children,o=CKEDITOR.tools.indexOf(c,t);c.splice(o,0,this),this.next=t,(this.previous=t.previous)&&(t.previous.next=this),t.previous=this,this.parent=t.parent},getAscendant:function(t){for(var c="function"==typeof t?t:"string"==typeof t?function(s){return s.name==t}:function(s){return s.name in t},o=this.parent;o&&o.type==CKEDITOR.NODE_ELEMENT;){if(c(o))return o;o=o.parent}return null},wrapWith:function(t){return this.replaceWith(t),t.add(this),t},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(t){return t||{}}},CKEDITOR.htmlParser.comment=function(v){this.value=v,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(t,c){var o=this.value;return(o=t.onComment(c,o,this))?"string"!=typeof o?(this.replaceWith(o),!1):(this.value=o,!0):(this.remove(),!1)},writeHtml:function(t,c){c&&this.filter(c),t.comment(this.value)}}),CKEDITOR.htmlParser.text=function(v){this.value=v,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(t,c){if(!(this.value=t.onText(c,this.value,this)))return this.remove(),!1},writeHtml:function(t,c){c&&this.filter(c),t.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(v){this.value=v},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(t){t.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function v(a){return!a.attributes["data-cke-survive"]&&("a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name])}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c={ol:1,ul:1},o=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),s={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(a,f,d){function i(O){var p;if(0<m.length)for(var y=0;y<m.length;y++){var C=m[y],N=C.name,k=CKEDITOR.dtd[N],b=I.name&&CKEDITOR.dtd[I.name];b&&!b[N]||O&&k&&!k[O]&&CKEDITOR.dtd[O]?N==I.name&&(e(I,I.parent,1),y--):(p||(l(),p=1),(C=C.clone()).parent=I,I=C,m.splice(y,1),y--)}}function l(){for(;g.length;)e(g.shift(),I)}function r(O){if(O._.isBlockLike&&"pre"!=O.name&&"textarea"!=O.name){var C,p=O.children.length,y=O.children[p-1];y&&y.type==CKEDITOR.NODE_TEXT&&((C=CKEDITOR.tools.rtrim(y.value))?y.value=C:O.children.length=p-1)}}function e(O,p,y){p=p||I||T;var C=I;void 0===O.previous&&(n(p,O)&&(I=p,h.onTagOpen(d,{}),O.returnPoint=p=I),r(O),v(O)&&!O.children.length||p.add(O),"pre"==O.name&&(K=!1),"textarea"==O.name&&(_=!1)),O.returnPoint?(I=O.returnPoint,delete O.returnPoint):I=y?p:C}function n(O,p){var y,C;if((O==T||"body"==O.name)&&d&&(!O.name||CKEDITOR.dtd[O.name][d]))return(y=p.attributes&&(C=p.attributes["data-cke-real-element-type"])?C:p.name)&&y in CKEDITOR.dtd.$inline&&!(y in CKEDITOR.dtd.head)&&!p.isOrphan||p.type==CKEDITOR.NODE_TEXT}function u(O,p){return(O in CKEDITOR.dtd.$listItem||O in CKEDITOR.dtd.$tableContent)&&(O==p||"dt"==O&&"dd"==p||"dd"==O&&"dt"==p)}var h=new CKEDITOR.htmlParser,T=f instanceof CKEDITOR.htmlParser.element?f:"string"==typeof f?new CKEDITOR.htmlParser.element(f):new CKEDITOR.htmlParser.fragment,m=[],g=[],I=T,_="textarea"==T.name,K="pre"==T.name;for(h.onTagOpen=function(O,p,y,C){if((p=new CKEDITOR.htmlParser.element(O,p)).isUnknown&&y&&(p.isEmpty=!0),p.isOptionalClose=C,v(p))m.push(p);else{if("pre"==O)K=!0;else{if("br"==O&&K)return void I.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==O&&(_=!0)}if("br"==O)g.push(p);else{for(;C=(y=I.name)?CKEDITOR.dtd[y]||(I._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):o,!(p.isUnknown||I.isUnknown||C[O]);)if(I.isOptionalClose)h.onTagClose(y);else if(O in c&&y in c)(y=(y=I.children)[y.length-1])&&"li"==y.name||e(y=new CKEDITOR.htmlParser.element("li"),I),!p.returnPoint&&(p.returnPoint=I),I=y;else if(O in CKEDITOR.dtd.$listItem&&!u(O,y))h.onTagOpen("li"==O?"ul":"dl",{},0,1);else if(y in t&&!u(O,y))!p.returnPoint&&(p.returnPoint=I),I=I.parent;else{if(y in CKEDITOR.dtd.$inline&&m.unshift(I),!I.parent){p.isOrphan=1;break}e(I,I.parent,1)}i(O),l(),p.parent=I,p.isEmpty?e(p):I=p}}},h.onTagClose=function(O){for(var p=m.length-1;0<=p;p--)if(O==m[p].name)return void m.splice(p,1);for(var y=[],C=[],N=I;N!=T&&N.name!=O;)N._.isBlockLike||C.unshift(N),y.push(N),N=N.returnPoint||N.parent;if(N!=T){for(p=0;p<y.length;p++){var k=y[p];e(k,k.parent)}I=N,N._.isBlockLike&&l(),e(N,N.parent),N==I&&(I=I.parent),m=m.concat(C)}"body"==O&&(d=!1)},h.onText=function(O){if(I._.hasInlineStarted&&!g.length||K||_||0!==(O=CKEDITOR.tools.ltrim(O)).length){var p=I.name,y=p?CKEDITOR.dtd[p]||(I._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):o;_||y["#"]||!(p in t)?(l(),i(),K||_||(O=O.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),O=new CKEDITOR.htmlParser.text(O),n(I,O)&&this.onTagOpen(d,{},0,1),I.add(O)):(h.onTagOpen(s[p]||""),h.onText(O))}},h.onCDATA=function(O){I.add(new CKEDITOR.htmlParser.cdata(O))},h.onComment=function(O){l(),i(),I.add(new CKEDITOR.htmlParser.comment(O))},h.parse(a),l();I!=T;)e(I,I.parent,1);return r(T),T},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(f,d){isNaN(d)&&(d=this.children.length);var i=0<d?this.children[d-1]:null;if(i){if(f._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),0===i.value.length))return this.children.pop(),void this.add(f);i.next=f}f.previous=i,f.parent=this,this.children.splice(d,0,f),this._.hasInlineStarted||(this._.hasInlineStarted=f.type==CKEDITOR.NODE_TEXT||f.type==CKEDITOR.NODE_ELEMENT&&!f._.isBlockLike)},filter:function(f,d){d=this.getFilterContext(d),f.onRoot(d,this),this.filterChildren(f,!1,d)},filterChildren:function(f,d,i){if(this.childrenFilteredBy!=f.id)for(i=this.getFilterContext(i),d&&!this.parent&&f.onRoot(i,this),this.childrenFilteredBy=f.id,d=0;d<this.children.length;d++)!1===this.children[d].filter(f,i)&&d--},writeHtml:function(f,d){d&&this.filter(d),this.writeChildrenHtml(f)},writeChildrenHtml:function(f,d,i){var l=this.getFilterContext();for(i&&!this.parent&&d&&d.onRoot(l,this),d&&this.filterChildren(d,!1,l),d=0,l=(i=this.children).length;d<l;d++)i[d].writeHtml(f)},forEach:function(f,d,i){if(!(i||d&&this.type!=d))var l=f(this);if(!1!==l){i=this.children;for(var r=0;r<i.length;r++)(l=i[r]).type==CKEDITOR.NODE_ELEMENT?l.forEach(f,d):d&&l.type!=d||f(l)}},getFilterContext:function(f){return f||{}}}}(),function(){function v(){this.rules=[]}function t(c,o,s,a){var f,d;for(f in o)(d=c[f])||(d=c[f]=new v),d.add(o[f],s,a)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(o){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new v,this.attributeNameRules=new v,this.elementsRules={},this.attributesRules={},this.textRules=new v,this.commentRules=new v,this.rootRules=new v,o&&this.addRules(o,10)},proto:{addRules:function(o,s){var a;"number"==typeof s?a=s:s&&"priority"in s&&(a=s.priority),"number"!=typeof a&&(a=10),"object"!=typeof s&&(s={}),o.elementNames&&this.elementNameRules.addMany(o.elementNames,a,s),o.attributeNames&&this.attributeNameRules.addMany(o.attributeNames,a,s),o.elements&&t(this.elementsRules,o.elements,a,s),o.attributes&&t(this.attributesRules,o.attributes,a,s),o.text&&this.textRules.add(o.text,a,s),o.comment&&this.commentRules.add(o.comment,a,s),o.root&&this.rootRules.add(o.root,a,s)},applyTo:function(o){o.filter(this)},onElementName:function(o,s){return this.elementNameRules.execOnName(o,s)},onAttributeName:function(o,s){return this.attributeNameRules.execOnName(o,s)},onText:function(o,s,a){return this.textRules.exec(o,s,a)},onComment:function(o,s,a){return this.commentRules.exec(o,s,a)},onRoot:function(o,s){return this.rootRules.exec(o,s)},onElement:function(o,s){for(var f,a=[this.elementsRules["^"],this.elementsRules[s.name],this.elementsRules.$],d=0;3>d;d++)if(f=a[d]){if(!1===(f=f.exec(o,s,this)))return null;if(f&&f!=s)return this.onNode(o,f);if(s.parent&&!s.name)break}return s},onNode:function(o,s){var a=s.type;return a==CKEDITOR.NODE_ELEMENT?this.onElement(o,s):a==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(o,s.value)):a==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(o,s.value)):null},onAttribute:function(o,s,a,f){return(a=this.attributesRules[a])?a.exec(o,f,s,this):f}}}),CKEDITOR.htmlParser.filterRulesGroup=v,v.prototype={add:function(o,s,a){this.rules.splice(this.findIndex(s),0,{value:o,priority:s,options:a})},addMany:function(o,s,a){for(var f=[this.findIndex(s),0],d=0,i=o.length;d<i;d++)f.push({value:o[d],priority:s,options:a});this.rules.splice.apply(this.rules,f)},findIndex:function(o){for(var s=this.rules,a=s.length-1;0<=a&&o<s[a].priority;)a--;return a+1},exec:function(o,s){var l,r,e,n,a=s instanceof CKEDITOR.htmlParser.node||s instanceof CKEDITOR.htmlParser.fragment,f=Array.prototype.slice.call(arguments,1),d=this.rules,i=d.length;for(n=0;n<i;n++)if(a&&(l=s.type,r=s.name),e=d[n],!(o.nonEditable&&!e.options.applyToAll||o.nestedEditable&&e.options.excludeNestedEditable)){if(!1===(e=e.value.apply(null,f))||a&&e&&(e.name!=r||e.type!=l))return e;null!=e&&(f[0]=s=e)}return s},execOnName:function(o,s){for(var i,a=0,f=this.rules,d=f.length;s&&a<d;a++)i=f[a],o.nonEditable&&!i.options.applyToAll||o.nestedEditable&&i.options.excludeNestedEditable||(s=s.replace(i.value[0],i.value[1]));return s}}}(),function(){function v(D,w){function P(M){return M||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("\xa0"):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function z(M,B){return function(U){if(U.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var Y,V,q=[],j=c(U);if(j)for(W(j,1)&&q.push(j);j;)a(j)&&(Y=o(j))&&W(Y)&&((V=o(Y))&&!a(V)?q.push(Y):(P(J).insertAfter(Y),Y.remove())),j=j.previous;for(j=0;j<q.length;j++)q[j].remove();(q=!M||!1!==("function"==typeof B?B(U):B))&&(q=!(!J&&!CKEDITOR.env.needsBrFiller&&U.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!J&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||U.name in CKEDITOR.dtd.tr||U.name in CKEDITOR.dtd.$listItem)||(q=c(U))&&("form"!=U.name||"input"!=q.name))),q&&U.add(P(M))}}}function W(M,B){return!(J&&!CKEDITOR.env.needsBrFiller||M.type!=CKEDITOR.NODE_ELEMENT||"br"!=M.name||M.attributes["data-cke-eol"])||!!(M.type==CKEDITOR.NODE_TEXT&&(U=M.value.match(I))&&(U.index&&(new CKEDITOR.htmlParser.text(M.value.substring(0,U.index)).insertBefore(M),M.value=U[0]),!CKEDITOR.env.needsBrFiller&&J&&(!B||M.parent.name in Z)||!J&&((U=M.previous)&&"br"==U.name||!U||a(U))));var U}var ee,M,G={elements:{}},J="html"==w,Z=CKEDITOR.tools.extend({},p);for(ee in Z)"#"in K[ee]||delete Z[ee];for(ee in Z)G.elements[ee]=z(J,D.config.fillEmptyBlocks);return G.root=z(J,!1),G.elements.br=(M=J,function(B){if(B.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var U=B.attributes;if("data-cke-bogus"in U||"data-cke-eol"in U)delete U["data-cke-bogus"];else{for(U=B.next;U&&s(U);)U=U.next;var q=o(B);!U&&a(B.parent)?f(B.parent,P(M)):a(U)&&q&&!a(q)&&P(M).insertBefore(U)}}}),G}function t(D,w){return D!=CKEDITOR.ENTER_BR&&!1!==w&&(D==CKEDITOR.ENTER_DIV?"div":"p")}function c(D){for(D=D.children[D.children.length-1];D&&s(D);)D=D.previous;return D}function o(D){for(D=D.previous;D&&s(D);)D=D.previous;return D}function s(D){return D.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(D.value)||D.type==CKEDITOR.NODE_ELEMENT&&D.attributes["data-cke-bookmark"]}function a(D){return D&&(D.type==CKEDITOR.NODE_ELEMENT&&D.name in p||D.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function f(D,w){var P=D.children[D.children.length-1];D.children.push(w),w.parent=D,P&&(P.next=w,w.previous=P)}function d(D){"false"!=(D=D.attributes).contenteditable&&(D["data-cke-editable"]=D.contenteditable?"true":1),D.contenteditable="false"}function i(D){switch((D=D.attributes)["data-cke-editable"]){case"true":D.contenteditable="true";break;case"1":delete D.contenteditable}}function r(D,w){return D.replace(w,function(P,z,W){return 0===P.indexOf("<textarea")&&(P=z+T(W).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(P)+"</cke:encoded>"})}function u(D){return CKEDITOR.tools.array.reduce(D.split(""),function(w,P){var z=P.toLowerCase(),W=P.toUpperCase(),G=h(z);return z!==W&&(G+="|"+h(W)),w+"("+G+")"},"")}function h(D){var w,P=(w=D.charCodeAt(0)).toString(16);for(var z in w={htmlCode:"&#"+w+";?",hex:"&#x0*"+P+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[D]})w[z]&&(D+="|"+w[z]);return D}function T(D){return D.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(w,P){return decodeURIComponent(P)})}function m(D,w){var P=w._.dataStore;return D.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(z,W){return decodeURIComponent(W)}).replace(/\{cke_protected_(\d+)\}/g,function(z,W){return P&&P[W]||""})}CKEDITOR.htmlDataProcessor=function(D){var w,P,z=this;this.editor=D,this.dataFilter=w=new CKEDITOR.htmlParser.filter,this.htmlFilter=P=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,w.addRules(y),w.addRules(C,{applyToAll:!0}),w.addRules(v(D,"data"),{applyToAll:!0}),P.addRules(N),P.addRules(k,{applyToAll:!0}),P.addRules(v(D,"html"),{applyToAll:!0}),D.on("toHtml",function(W){var G,Z,J=function g(D,w){var P=[],G=w.config.protectedSource,z=w._.dataStore||(w._.dataStore={id:1}),W=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;G=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(G),D=D.replace(/\x3c!--[\s\S]*?--\x3e/g,function(Z){return"\x3c!--{cke_tempcomment}"+(P.push(Z)-1)+"--\x3e"});for(var J=0;J<G.length;J++)D=D.replace(G[J],function(Z){return Z=Z.replace(W,function(ee,M,B){return P[B]}),/cke_temp(comment)?/.test(Z)?Z:"\x3c!--{cke_temp}"+(P.push(Z)-1)+"--\x3e"});return(D=(D=D.replace(W,function(Z,ee,M){return"\x3c!--"+_+(ee?"{C}":"")+encodeURIComponent(P[M]).replace(/--/g,"%2D%2D")+"--\x3e"})).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(Z){return Z.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(ee,M){return z[z.id]=decodeURIComponent(M),"{cke_protected_"+z.id+++"}"})})).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(Z,ee,M,B){return"<"+ee+M+">"+m(T(B),w)+"</"+ee+">"})}(J=(J=(W=W.data).dataValue).replace(R,""),D);J=function l(D){return D.replace(b,function(w,P,z){return"<"+P+z.replace(x,function(W,G){return S.test(G)&&-1==z.indexOf("data-cke-saved-"+G)?" data-cke-saved-"+W+" data-cke-"+CKEDITOR.rnd+"-"+W:W})+">"})}(J=r(J,L)),J=(J=(J=(J=(J=r(J,H)).replace(A,"$1cke:$2")).replace($,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),G=W.context||D.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==G&&(G="div",J="<pre>"+J+"</pre>",Z=1),(G=D.document.createElement(G)).setHtml("a"+J),J=(J=G.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),Z&&(J=J.replace(/^<pre>|<\/pre>$/gi,"")),J=function e(D){return D.replace(E,function(w,P){return decodeURIComponent(P)})}(J=J.replace(F,"$1$2")),J=T(J),G=!1!==W.fixForBody&&t(W.enterMode,D.config.autoParagraph),J=CKEDITOR.htmlParser.fragment.fromHtml(J,W.context,G),G&&!(Z=J).children.length&&CKEDITOR.dtd[Z.name][G]&&(G=new CKEDITOR.htmlParser.element(G),Z.add(G)),W.dataValue=J},null,null,5),D.on("toHtml",function(W){W.data.filter.applyTo(W.data.dataValue,!0,W.data.dontFilter,W.data.enterMode)&&D.fire("dataFiltered")},null,null,6),D.on("toHtml",function(W){W.data.dataValue.filterChildren(z.dataFilter,!0)},null,null,10),D.on("toHtml",function(W){var G=(W=W.data).dataValue,J=new CKEDITOR.htmlParser.basicWriter;G.writeChildrenHtml(J),G=J.getHtml(!0),W.dataValue=function n(D){return D.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(w){return"\x3c!--"+_+"{C}"+encodeURIComponent(w).replace(/--/g,"%2D%2D")+"--\x3e"})}(G)},null,null,15),D.on("toDataFormat",function(W){var G=W.data.dataValue;W.data.enterMode!=CKEDITOR.ENTER_BR&&(G=G.replace(/^<br *\/?>/i,"")),W.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(G,W.data.context,t(W.data.enterMode,D.config.autoParagraph))},null,null,5),D.on("toDataFormat",function(W){W.data.dataValue.filterChildren(z.htmlFilter,!0)},null,null,10),D.on("toDataFormat",function(W){W.data.filter.applyTo(W.data.dataValue,!1,!0)},null,null,11),D.on("toDataFormat",function(W){var G=W.data.dataValue,J=z.writer;J.reset(),G.writeChildrenHtml(J),G=m(G=T(G=J.getHtml(!0)),D),W.data.dataValue=G},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(w,P,z,W){var J,Z,ee,M,G=this.editor;return P&&"object"==typeof P?(J=P.context,z=P.fixForBody,W=P.dontFilter,Z=P.filter,ee=P.enterMode,M=P.protectedWhitespaces):J=P,J||null===J||(J=G.editable().getName()),G.fire("toHtml",{dataValue:w,context:J,fixForBody:z,dontFilter:W,filter:Z||G.filter,enterMode:ee||G.enterMode,protectedWhitespaces:M}).dataValue},toDataFormat:function(w,P){var z,W,G;return P&&(z=P.context,W=P.filter,G=P.enterMode),z||null===z||(z=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:w,filter:W||this.editor.filter,context:z,enterMode:G||this.editor.enterMode}).dataValue}};var I=/(?:&nbsp;|\xa0)$/,_="{cke_protected}",K=CKEDITOR.dtd,O="caption colgroup col thead tfoot tbody".split(" "),p=CKEDITOR.tools.extend({},K.$blockLimit,K.$block),y={elements:{input:d,textarea:d}},C={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(w){if(w.attributes&&w.attributes.src){var P=w.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");(0===P.indexOf("javascript")||0===P.indexOf("data"))&&(w.attributes["data-cke-pa-src"]=w.attributes.src,delete w.attributes.src)}}}},N={elements:{embed:function(w){if((P=w.parent)&&"object"==P.name){var z=P.attributes.width,P=P.attributes.height;z&&(w.attributes.width=z),P&&(w.attributes.height=P)}},a:function(w){var P=w.attributes;if(!(w.children.length||P.name||P.id||w.attributes["data-cke-saved-name"]))return!1}}},k={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(w){var P=w.attributes;if(P){if(P["data-cke-temp"])return!1;for(var z=["name","href","src"],G=0;G<z.length;G++)"data-cke-saved-"+z[G]in P&&delete P[z[G]]}return w},table:function(w){w.children.slice(0).sort(function(P,z){var W,G;return P.type==CKEDITOR.NODE_ELEMENT&&z.type==P.type&&(W=CKEDITOR.tools.indexOf(O,P.name),G=CKEDITOR.tools.indexOf(O,z.name)),-1<W&&-1<G&&W!=G||(W=P.parent?P.getIndex():-1,G=z.parent?z.getIndex():-1),W>G?1:-1})},param:function(w){return w.children=[],w.isEmpty=!0,w},span:function(w){"Apple-style-span"==w.attributes.class&&delete w.name},html:function(w){delete w.attributes.contenteditable,delete w.attributes.class},body:function(w){delete w.attributes.spellcheck,delete w.attributes.contenteditable},style:function(w){var P=w.children[0];P&&P.value&&(P.value=CKEDITOR.tools.trim(P.value)),w.attributes.type||(w.attributes.type="text/css")},title:function(w){var P=w.children[0];!P&&f(w,P=new CKEDITOR.htmlParser.text),P.value=w.attributes["data-cke-title"]||""},input:i,textarea:i},attributes:{class:function(w){return CKEDITOR.tools.ltrim(w.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(k.attributes.style=function(D){return D.replace(/(^|;)([^\:]+)/g,function(w){return w.toLowerCase()})});var b=/<(a|area|img|input|source)\b([^>]*)>/gi,x=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,S=/^(href|src|name)$/i,H=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,L=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,E=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,R=new RegExp("("+u("<cke:encoded>")+"(.*?)"+u("</cke:encoded>")+")|("+u("<")+u("/")+"?"+u("cke:encoded>")+")","gi"),A=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,F=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,$=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(v,t){this.name=v,this.attributes=t||{},this.children=[];var c=v||"",o=c.match(/^cke:(.*)/);o&&(c=o[1]),c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c),this.isEmpty=!!CKEDITOR.dtd.$empty[v],this.isUnknown=!CKEDITOR.dtd[v],this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}},CKEDITOR.htmlParser.cssStyle=function(v){var t={};return((v instanceof CKEDITOR.htmlParser.element?v.attributes.style:v)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(c,o,s){"font-family"==o&&(s=s.replace(/["']/g,"")),t[o.toLowerCase()]=s}),{rules:t,populate:function(o){var s=this.toString();s&&(o instanceof CKEDITOR.dom.element?o.setAttribute("style",s):o instanceof CKEDITOR.htmlParser.element?o.attributes.style=s:o.style=s)},toString:function(){var s,o=[];for(s in t)t[s]&&o.push(s,":",t[s],";");return o.join("")}}},function(){var t=function(s,a){return(s=s[0])<(a=a[0])?-1:s>a?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(s,a){var d,i,l,r,f=this;for(a=f.getFilterContext(a),f.parent||s.onRoot(a,f);;){if(!(i=s.onElementName(a,d=f.name)))return this.remove(),!1;if(f.name=i,!(f=s.onElement(a,f)))return this.remove(),!1;if(f!==this)return this.replaceWith(f),!1;if(f.name==d)break;if(f.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(f),!1;if(!f.name)return this.replaceWithChildren(),!1}for(l in d=f.attributes){for(i=d[l];;){if(!(r=s.onAttributeName(a,l))){delete d[l];break}if(r==l)break;delete d[l],l=r}r&&(!1===(i=s.onAttribute(a,f,r,i))?delete d[r]:d[r]=i)}return f.isEmpty||this.filterChildren(s,!1,a),!0},filterChildren:c.filterChildren,writeHtml:function(s,a){a&&this.filter(a);var l,r,f=this.name,d=[],i=this.attributes;for(l in s.openTag(f,i),i)d.push([l,i[l]]);for(s.sortAttributes&&d.sort(t),l=0,r=d.length;l<r;l++)s.attribute((i=d[l])[0],i[1]);s.openTagClose(f,this.isEmpty),this.writeChildrenHtml(s),this.isEmpty||s.closeTag(f)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var s=this.children,a=s.length;a;)s[--a].insertAfter(this);this.remove()},forEach:c.forEach,getFirst:function(s){if(!s)return this.children.length?this.children[0]:null;"function"!=typeof s&&(s=function v(o){return function(s){return s.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof o?s.name==o:s.name in o)}}(s));for(var a=0,f=this.children.length;a<f;++a)if(s(this.children[a]))return this.children[a];return null},getHtml:function(){var s=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(s),s.getHtml()},setHtml:function(s){for(var a=0,f=(s=this.children=CKEDITOR.htmlParser.fragment.fromHtml(s).children).length;a<f;++a)s[a].parent=this},getOuterHtml:function(){var s=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(s),s.getHtml()},split:function(s){for(var a=this.children.splice(s,this.children.length-s),f=this.clone(),d=0;d<a.length;++d)a[d].parent=f;return f.children=a,a[0]&&(a[0].previous=null),0<s&&(this.children[s-1].next=null),this.parent.add(f,this.getIndex()+1),f},find:function(s,a){void 0===a&&(a=!1);var d,f=[];for(d=0;d<this.children.length;d++){var i=this.children[d];("function"==typeof s&&s(i)||"string"==typeof s&&i.name===s)&&f.push(i),a&&i.find&&(f=f.concat(i.find(s,a)))}return f},findOne:function(s,a){var f=null,d=CKEDITOR.tools.array.find(this.children,function(i){var l="function"==typeof s?s(i):i.name===s;return l||!a?l:(i.children&&i.findOne&&(f=i.findOne(s,!0)),!!f)});return f||d||null},addClass:function(s){if(!this.hasClass(s)){var a=this.attributes.class||"";this.attributes.class=a+(a?" ":"")+s}},removeClass:function(s){var a=this.attributes.class;a&&((a=CKEDITOR.tools.trim(a.replace(new RegExp("(?:\\s+|^)"+s+"(?:\\s+|$)")," ")))?this.attributes.class=a:delete this.attributes.class)},hasClass:function(s){var a=this.attributes.class;return!!a&&new RegExp("(?:^|\\s)"+s+"(?=\\s|$)").test(a)},getFilterContext:function(s){var a=[];if(s||(s={nonEditable:!1,nestedEditable:!1}),s.nonEditable||"false"!=this.attributes.contenteditable?s.nonEditable&&!s.nestedEditable&&"true"==this.attributes.contenteditable&&a.push("nestedEditable",!0):a.push("nonEditable",!0),a.length){s=CKEDITOR.tools.copy(s);for(var f=0;f<a.length;f+=2)s[a[f]]=a[f+1]}return s}},!0)}(),function(){var v=/{([^}]+)}/g;CKEDITOR.template=function(t){this.source="function"==typeof t?t:String(t)},CKEDITOR.template.prototype.output=function(t,c){var o=("function"==typeof this.source?this.source(t):this.source).replace(v,function(s,a){return void 0!==t[a]?t[a]:s});return c?c.push(o):o}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(v){function t(){CKEDITOR.currentInstance==v&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[v.name]=v,v.on("focus",function(){CKEDITOR.currentInstance!=v&&(CKEDITOR.currentInstance=v,CKEDITOR.fire("currentInstance"))}),v.on("blur",t),v.on("destroy",t),CKEDITOR.fire("instance",null,v)},CKEDITOR.remove=function(v){delete CKEDITOR.instances[v.name]},function(){var v={};CKEDITOR.addTemplate=function(t,c){var o=v[t];return o||(o={name:t,source:c},CKEDITOR.fire("template",o),v[t]=new CKEDITOR.template(o.source))},CKEDITOR.getTemplate=function(t){return v[t]}}(),function(){var v=[];CKEDITOR.addCss=function(t){v.push(t)},CKEDITOR.getCss=function(){return v.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(v,t){if(!(v=CKEDITOR.editor._getEditorElement(v)))return null;var c=new CKEDITOR.editor(t,v,CKEDITOR.ELEMENT_MODE_INLINE),o=v.is("textarea")?v:null;return o?(c.setData(o.getValue(),null,!0),(v=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!c.readOnly+'" class="cke_textarea_inline">'+o.getValue()+"</div>",CKEDITOR.document)).insertAfter(o),o.hide(),o.$.form&&c._attachToForm()):c.setData(v.getHtml(),null,!0),c.on("loaded",function(){c.fire("uiReady"),c.editable(v),c.container=v,c.ui.contentsElement=v,c.setData(c.getData(1)),c.resetDirty(),c.fire("contentDom"),c.mode="wysiwyg",c.fire("mode"),c.status="ready",c.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,c)},null,null,1e4),c.on("destroy",function(){o&&(c.container.clearCustomData(),c.container.remove(),o.show()),c.element.clearCustomData(),delete c.element}),c},CKEDITOR.inlineAll=function(){var v,t,c;for(c in CKEDITOR.dtd.$editable)for(var o=CKEDITOR.document.getElementsByTag(c),s=0,a=o.count();s<a;s++)"true"==(v=o.getItem(s)).getAttribute("contenteditable")&&(t={element:v,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(v,t.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",function(){function v(o,s,a,f){if(!(o=CKEDITOR.editor._getEditorElement(o)))return null;var d=new CKEDITOR.editor(s,o,f);return f==CKEDITOR.ELEMENT_MODE_REPLACE&&(o.setStyle("visibility","hidden"),d._.required=o.hasAttribute("required"),o.removeAttribute("required")),a&&d.setData(a,null,!0),d.on("loaded",function(){(function c(o){var l=o.name,s=o.element,a=o.elementMode,f=o.fire("uiSpace",{space:"top",html:""}).html,d=o.fire("uiSpace",{space:"bottom",html:""}).html,i=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(o.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(o.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');l=CKEDITOR.dom.element.createFromHtml(i.output({id:o.id,name:l,langDir:o.lang.dir,langCode:o.langCode,voiceLabel:o.title,topHtml:f?'<span id="'+o.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+f+"</span>":"",contentId:o.ui.spaceId("contents"),bottomHtml:d?'<span id="'+o.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+d+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),a==CKEDITOR.ELEMENT_MODE_REPLACE?(s.hide(),l.insertAfter(s)):s.append(l),o.container=l,o.ui.contentsElement=o.ui.space("contents"),f&&o.ui.space("top").unselectable(),d&&o.ui.space("bottom").unselectable(),a=o.config.height,(s=o.config.width)&&l.setStyle("width",CKEDITOR.tools.cssLength(s)),a&&o.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(a)),l.disableContextMenu(),CKEDITOR.env.webkit&&l.on("focus",function(){o.focus()}),o.fireOnce("uiReady")})(d),f==CKEDITOR.ELEMENT_MODE_REPLACE&&d.config.autoUpdateElement&&o.$.form&&d._attachToForm(),d.setMode(d.config.startupMode,function(){d.resetDirty(),d.status="ready",d.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,d)})}),d.on("destroy",t),d}function t(){var o=this.container,s=this.element;o&&(o.clearCustomData(),o.remove()),s&&(s.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(s.show(),this._.required&&s.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(o,s){return v(o,s,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(o,s,a){return v(o,s,a,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var o=document.getElementsByTagName("textarea"),s=0;s<o.length;s++){var a=null,f=o[s];if(f.name||f.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(f.className))continue}else if("function"==typeof arguments[0]&&!1===arguments[0](f,a={}))continue;this.replace(f,a)}}},CKEDITOR.editor.prototype.addMode=function(o,s){(this._.modes||(this._.modes={}))[o]=s},CKEDITOR.editor.prototype.setMode=function(o,s){var a=this,f=this._.modes;if(o!=a.mode&&f&&f[o]){if(a.fire("beforeSetMode",o),a.mode){var i,d=a.checkDirty(),l=(f=a._.previousModeData,0);a.fire("beforeModeUnload"),a.editable(0),a._.previousMode=a.mode,a._.previousModeData=i=a.getData(1),"source"==a.mode&&f==i&&(a.fire("lockSnapshot",{forceUpdate:!0}),l=1),a.ui.space("contents").setHtml(""),a.mode=""}else a._.previousModeData=a.getData(1);this._.modes[o](function(){a.mode=o,void 0!==d&&!d&&a.resetDirty(),l?a.fire("unlockSnapshot"):"wysiwyg"==o&&a.fire("saveSnapshot"),setTimeout(function(){a.fire("mode"),s&&s.call(a)},0)})}},CKEDITOR.editor.prototype.resize=function(o,s,a,f){var r=this.container,d=this.ui.space("contents"),i=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(f=f?this.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")}):r).setSize("width",o,!0),i&&(i.style.width="1%");var l=(f.$.offsetHeight||0)-(d.$.clientHeight||0);r=Math.max(s-(a?0:l),0),s=a?s+l:s,d.setStyle("height",r+"px"),i&&(i.style.width="100%"),this.fire("resize",{outerHeight:s,contentsHeight:r,outerWidth:o||f.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(o){return o?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function c(O){var p=O.data.getTarget();p.is("input")&&("submit"!=(p=p.getAttribute("type"))&&"reset"!=p||O.data.preventDefault())}function o(O){return e(O)&&n(O)}function s(O,p){return function(y){var C=y.data.$.toElement||y.data.$.fromElement||y.data.$.relatedTarget;(C=C&&C.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(C):null)&&(p.equals(C)||p.contains(C))||O.call(this,y)}}function f(O,p,y){return!1!==O.config.autoParagraph&&O.activeEnterMode!=CKEDITOR.ENTER_BR&&(O.editable().equals(y)&&!p||p&&"true"==p.getAttribute("contenteditable"))}function d(O){return O.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==O.config.autoParagraph&&(O.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function i(O){O&&O.isEmptyInlineRemoveable()&&O.remove()}function l(O){var p=O.editor;p.getSelection().scrollIntoView(),setTimeout(function(){p.fire("saveSnapshot")},0)}function r(O,p,y){var C=O.getCommonAncestor(p);for(p=O=y?p:O;(O=O.getParent())&&!C.equals(O)&&1==O.getChildCount();)p=O;p.remove()}var e,n,u,h,T,m,g,I,_,K;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(p,y){this.base(y.$||y),this.editor=p,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var p;if(CKEDITOR.env.webkit&&!this.hasFocus&&(p=this.editor._.previousActive||this.getDocument().getActive(),this.contains(p)))p.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var y=this.$.scrollTop;this.$.focus(),this.$.scrollTop=y}else this.$.focus();else this.$.setActive()}catch(C){if(!CKEDITOR.env.ie)throw C}CKEDITOR.env.safari&&!this.isInline()&&((p=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(p,y){var C=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(p)&&(p="focus"==p?"focusin":"focusout",y=s(y,this),C[0]=p,C[1]=y),CKEDITOR.dom.element.prototype.on.apply(this,C)},attachListener:function(p){!this._.listeners&&(this._.listeners=[]);var y=Array.prototype.slice.call(arguments,1);return y=p.on.apply(p,y),this._.listeners.push(y),y},clearListeners:function(){var p=this._.listeners;try{for(;p.length;)p.pop().removeListener()}catch(y){}},restoreAttrs:function(){var y,C,p=this._.attrChanges;for(C in p)p.hasOwnProperty(C)&&(null!==(y=p[C])?this.setAttribute(C,y):this.removeAttribute(C))},attachClass:function(p){var y=this.getCustomData("classes");this.hasClass(p)||(!y&&(y=[]),y.push(p),this.setCustomData("classes",y),this.addClass(p))},changeAttr:function(p,y){var C=this.getAttribute(p);y!==C&&(!this._.attrChanges&&(this._.attrChanges={}),p in this._.attrChanges||(this._.attrChanges[p]=C),this.setAttribute(p,y))},insertText:function(p){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(p),"text")},transformPlainTextToHtml:function(p){var y=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(p,y)},insertHtml:function(p,y,C){var N=this.editor;N.focus(),N.fire("saveSnapshot"),C||(C=N.getSelection().getRanges()[0]),m(this,y||"html",p,C),C.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(p,y,C){m(this,C||"html",p,y),this.editor.fire("afterInsertHtml",{intoRange:y})},insertElement:function(p,y){(N=this.editor).focus(),N.fire("saveSnapshot");var C=N.activeEnterMode,N=N.getSelection(),k=p.getName();k=CKEDITOR.dtd.$block[k],y||(y=N.getRanges()[0]),this.insertElementIntoRange(p,y)&&(y.moveToPosition(p,CKEDITOR.POSITION_AFTER_END),k&&((k=p.getNext(function(b){return o(b)&&!h(b)}))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is(CKEDITOR.dtd.$block)?k.getDtd()["#"]?y.moveToElementEditStart(k):y.moveToElementEditEnd(p):k||C==CKEDITOR.ENTER_BR||(k=y.fixBlock(!0,C==CKEDITOR.ENTER_DIV?"div":"p"),y.moveToElementEditStart(k)))),N.selectRanges([y]),l(this)},insertElementIntoSelection:function(p){this.insertElement(p)},insertElementIntoRange:function(p,y){var x,S,C=this.editor,N=C.config.enterMode,k=p.getName(),b=CKEDITOR.dtd.$block[k];if(y.checkReadOnly())return!1;if(y.deleteContents(1),y.startContainer.type==CKEDITOR.NODE_ELEMENT&&(y.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?g(y):y.startContainer.is(CKEDITOR.dtd.$list)&&I(y)),b)for(;(x=y.getCommonAncestor(0,1))&&(S=CKEDITOR.dtd[x.getName()])&&(!S||!S[k]);)if(x.getName()in CKEDITOR.dtd.span){b=y.splitElement(x);var H=y.createBookmark();i(x),i(b),y.moveToBookmark(H)}else y.checkStartOfBlock()&&y.checkEndOfBlock()?(y.setStartBefore(x),y.collapse(!0),x.remove()):y.splitBlock(N==CKEDITOR.ENTER_DIV?"div":"p",C.editable());return y.insertNode(p),!0},setData:function(p,y){y||(p=this.editor.dataProcessor.toHtml(p)),this.setHtml(p),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(p){var y=this.getHtml();return p||(y=this.editor.dataProcessor.toDataFormat(y)),y},setReadOnly:function(p){this.setAttribute("contenteditable",!p)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var p=this.editor;this._.detach(),delete p.document,delete p.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function p(){var b,N=C.getDocument().$,k=N.getSelection();e:if(k.anchorNode&&k.anchorNode==C.$)b=!0;else{if(CKEDITOR.env.webkit&&(b=C.getDocument().getActive())&&b.equals(C)&&!k.anchorNode){b=!0;break e}b=void 0}b&&((b=new CKEDITOR.dom.range(C)).moveToElementEditStart(C),(N=N.createRange()).setStart(b.startContainer.$,b.startOffset),N.collapse(!0),k.removeAllRanges(),k.addRange(N))}var C=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function y(){var N=C.getDocument().$,k=N.selection,b=C.getDocument().getActive();"None"==k.type&&b.equals(C)&&(k=new CKEDITOR.dom.range(C),N=N.body.createTextRange(),k.moveToElementEditStart(C),(k=k.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(k=k.getParent()),N.moveToElementText(k.$),N.collapse(!0),N.select())}()):this.hasFocus?(this.focus(),p()):this.once("focus",function(){p()},null,null,-999)},getHtmlFromRange:function(p){return p.collapsed?new CKEDITOR.dom.documentFragment(p.document):(p={doc:this.getDocument(),range:p.clone()},_.eol.detect(p,this),_.bogus.exclude(p),_.cell.shrink(p),p.fragment=p.range.cloneContents(),_.tree.rebuild(p,this),_.eol.fix(p,this),new CKEDITOR.dom.documentFragment(p.fragment.$))},extractHtmlFromRange:function(p,y){var C=K,N={range:p,doc:p.document},k=this.getHtmlFromRange(p);if(p.collapsed)return p.optimize(),k;if(p.enlarge(CKEDITOR.ENLARGE_INLINE,1),C.table.detectPurge(N),N.bookmark=p.createBookmark(),delete N.range,(b=this.editor.createRange()).moveToPosition(N.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),N.targetBookmark=b.createBookmark(),C.list.detectMerge(N,this),C.table.detectRanges(N,this),C.block.detectMerge(N,this),N.tableContentsRanges?(C.table.deleteRanges(N),p.moveToBookmark(N.bookmark),N.range=p):(p.moveToBookmark(N.bookmark),N.range=p,p.extractContents(C.detectExtractMerge(N))),p.moveToBookmark(N.targetBookmark),p.optimize(),C.fixUneditableRangePosition(p),C.list.merge(N,this),C.table.purge(N,this),C.block.merge(N,this),y){if(C=p.startPath(),N=p.checkStartOfBlock()&&p.checkEndOfBlock()&&C.block&&!p.root.equals(C.block)){e:{var x,b=0;if(N=C.block.getElementsByTag("span"))for(;x=N.getItem(b++);)if(!n(x)){N=!0;break e}N=!1}N=!N}N&&(p.moveToPosition(C.block,CKEDITOR.POSITION_BEFORE_START),C.block.remove())}else C.autoParagraph(this.editor,p),u(p.startContainer)&&p.startContainer.appendBogus();return p.startContainer.mergeSiblings(),k},setup:function(){var p=this.editor;if(this.attachListener(p,"beforeGetData",function(){var S=this.getData();this.is("textarea")||!1!==p.config.ignoreEmptyParagraph&&(S=S.replace(T,function(H,L){return L})),p.setData(S,null,1)},this),this.attachListener(p,"getSnapshot",function(S){S.data=this.getData(1)},this),this.attachListener(p,"afterSetData",function(){this.setData(p.getData(1))},this),this.attachListener(p,"loadSnapshot",function(S){this.setData(S.data,1)},this),this.attachListener(p,"beforeFocus",function(){var S=p.getSelection();(S=S&&S.getNative())&&"Control"==S.type||this.focus()},this),this.attachListener(p,"insertHtml",function(S){this.insertHtml(S.data.dataValue,S.data.mode,S.data.range)},this),this.attachListener(p,"insertElement",function(S){this.insertElement(S.data)},this),this.attachListener(p,"insertText",function(S){this.insertText(S.data)},this),this.setReadOnly(p.readOnly),this.attachClass("cke_editable"),p.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):p.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&p.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+p.config.contentsLangDirection),p.keystrokeHandler.blockedKeystrokes[8]=+p.readOnly,p.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){p._.previousScrollTop=p.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version&&this.on("scroll",function S(){var H=p.editable();null!=p._.previousScrollTop&&H.getDocument().equals(CKEDITOR.document)&&(H.$.scrollTop=p._.previousScrollTop,p._.previousScrollTop=null,this.removeListener("scroll",S))}),p.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,p.once("contentDom",function(){p.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",p.tabIndex),!this.is("textarea")){p.document=this.getDocument(),p.window=this.getWindow();var C=p.document;this.changeAttr("spellcheck",!p.config.disableNativeSpellChecker);var N=p.config.contentsLangDirection;this.getDirection(1)!=N&&this.changeAttr("dir",N);var k=CKEDITOR.getCss();if(k){var b=(N=C.getHead()).getCustomData("stylesheet");b?k!=b.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?b.$.styleSheet.cssText=k:b.setText(k)):(k=C.appendStyleText(k),k=new CKEDITOR.dom.element(k.ownerNode||k.owningElement),N.setCustomData("stylesheet",k),k.data("cke-temp",1))}N=C.getCustomData("stylesheet_ref")||0,C.setCustomData("stylesheet_ref",N+1),this.setCustomData("cke_includeReadonly",!p.config.disableReadonlyStyling),this.attachListener(this,"click",function(S){S=S.data;var H=new CKEDITOR.dom.elementPath(S.getTarget(),this).contains("a");H&&2!=S.$.button&&H.isReadOnly()&&S.preventDefault()});var x={8:1,46:1};this.attachListener(p,"key",function(S){if(p.readOnly)return!0;var L,H=S.data.domEvent.getKey();if(0!==(S=p.getSelection()).getRanges().length){if(H in x){var E,F,$,D,R=S.getRanges()[0],A=R.startPath();H=8==H,CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(E=S.getSelectedElement())||(E=function a(O){function p(b){return function(x,S){if(S&&x.type==CKEDITOR.NODE_ELEMENT&&x.is(N)&&(y=x),!(S||!o(x)||b&&h(x)))return!1}}var y,C=O.getRanges()[0];O=O.root;var N={table:1,ul:1,ol:1,dl:1};if(C.startPath().contains(N)){var k=C.clone();if(k.collapse(1),k.setStartAt(O,CKEDITOR.POSITION_AFTER_START),(O=new CKEDITOR.dom.walker(k)).guard=p(),O.checkBackward(),y)return(k=C.clone()).collapse(),k.setEndAt(y,CKEDITOR.POSITION_AFTER_END),(O=new CKEDITOR.dom.walker(k)).guard=p(!0),y=!1,O.checkForward(),y}return null}(S))?(p.fire("saveSnapshot"),R.moveToPosition(E,CKEDITOR.POSITION_BEFORE_START),E.remove(),R.select(),p.fire("saveSnapshot"),L=1):R.collapsed&&((F=A.block)&&(D=F[H?"getPrevious":"getNext"](e))&&D.type==CKEDITOR.NODE_ELEMENT&&D.is("table")&&R[H?"checkStartOfBlock":"checkEndOfBlock"]()?(p.fire("saveSnapshot"),R[H?"checkEndOfBlock":"checkStartOfBlock"]()&&F.remove(),R["moveToElementEdit"+(H?"End":"Start")](D),R.select(),p.fire("saveSnapshot"),L=1):A.blockLimit&&A.blockLimit.is("td")&&($=A.blockLimit.getAscendant("table"))&&R.checkBoundaryOfElement($,H?CKEDITOR.START:CKEDITOR.END)&&(D=$[H?"getPrevious":"getNext"](e))?(p.fire("saveSnapshot"),R["moveToElementEdit"+(H?"End":"Start")](D),R.checkStartOfBlock()&&R.checkEndOfBlock()?D.remove():R.select(),p.fire("saveSnapshot"),L=1):($=A.contains(["td","th","caption"]))&&R.checkBoundaryOfElement($,H?CKEDITOR.START:CKEDITOR.END)&&(L=1))}return!L}}),p.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(S){S.data.getKeystroke()in x&&!this.getFirst(o)&&(this.appendBogus(),(S=p.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),S.select())}),this.attachListener(this,"dblclick",function(S){if(p.readOnly)return!1;S={element:S.data.getTarget()},p.fire("doubleclick",S)}),CKEDITOR.env.ie&&this.attachListener(this,"click",c),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(S){var H=S.data.getTarget();H.is("img","hr","input","textarea","select")&&!H.isReadOnly()&&(p.getSelection().selectElement(H),H.is("input","textarea","select")&&S.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(S){(S=S.data.getTarget())&&S.is("img")&&!S.isReadOnly()&&p.getSelection().selectElement(S)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(S){if(2==S.data.$.button&&!(S=S.data.getTarget()).getAscendant("table")&&!S.getOuterHtml().replace(T,"")){var H=p.createRange();H.moveToElementEditStart(S),H.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(S){S.data.getTarget().is("input","select")&&S.data.preventDefault()}),this.attachListener(this,"mouseup",function(S){S.data.getTarget().is("input","textarea")&&S.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(p,"key",function(S){if(p.readOnly)return!0;if((H=S.data.domEvent.getKey())in x&&0!==(S=p.getSelection()).getRanges().length){var H=8==H,L=S.getRanges()[0];if(S=L.startPath(),L.collapsed)e:{var E=S.block;if(E&&L[H?"checkStartOfBlock":"checkEndOfBlock"]()&&L.moveToClosestEditablePosition(E,!H)&&L.collapsed){if(L.startContainer.type==CKEDITOR.NODE_ELEMENT){var R=L.startContainer.getChild(L.startOffset-(H?1:0));if(R&&R.type==CKEDITOR.NODE_ELEMENT&&R.is("hr")){p.fire("saveSnapshot"),R.remove(),S=!0;break e}}var A;!(L=L.startPath().block)||L&&L.contains(E)?S=void 0:(p.fire("saveSnapshot"),(A=(H?L:E).getBogus())&&A.remove(),R=(A=p.getSelection()).createBookmarks(),(H?E:L).moveChildren(H?L:E,!1),S.lastElement.mergeSiblings(),r(E,L,!H),A.selectBookmarks(R),S=!0)}else S=!1}else A=S.block,L=(H=L).endPath().block,A&&L&&!A.equals(L)?(p.fire("saveSnapshot"),(E=A.getBogus())&&E.remove(),H.enlarge(CKEDITOR.ENLARGE_INLINE),H.deleteContents(),L.getParent()&&(L.moveChildren(A,!1),S.lastElement.mergeSiblings(),r(A,L,!0)),(H=p.getSelection().getRanges()[0]).collapse(1),H.optimize(),""===H.startContainer.getHtml()&&H.startContainer.appendBogus(),H.select(),S=!0):S=!1;return S?(p.getSelection().scrollIntoView(),p.fire("saveSnapshot"),!1):void 0}},this,null,100)}}},_:{detach:function(){var p;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),p=this.removeCustomData("classes"))for(;p.length;)this.removeClass(p.pop());if(!this.is("textarea")){var y=(p=this.getDocument()).getHead();if(y.getCustomData("stylesheet")){var C=p.getCustomData("stylesheet_ref");--C?p.setCustomData("stylesheet_ref",C):(p.removeCustomData("stylesheet_ref"),y.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(O){var p=this._.editable;return p&&O?0:(arguments.length&&(p=this._.editable=O?O instanceof CKEDITOR.editable?O:new CKEDITOR.editable(this,O):(p&&p.detach(),null)),p)},CKEDITOR.on("instanceLoaded",function(O){var p=O.editor;p.on("insertElement",function(y){(y=y.data).type==CKEDITOR.NODE_ELEMENT&&(y.is("input")||y.is("textarea"))&&("false"!=y.getAttribute("contentEditable")&&y.data("cke-editable",y.hasAttribute("contenteditable")?"true":"1"),y.setAttribute("contentEditable",!1))}),p.on("selectionChange",function(y){if(!p.readOnly){var C=p.getSelection();C&&!C.isLocked&&(C=p.checkDirty(),p.fire("lockSnapshot"),function v(O){var b,p=O.editor,y=O.data.path,C=y.blockLimit,N=O.data.selection,k=N.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(N=function t(O,p){if(O.isFake)return 0;var y=p.block||p.blockLimit,C=y&&y.getLast(o);return!y||!y.isBlockBoundary()||C&&C.type==CKEDITOR.NODE_ELEMENT&&C.isBlockBoundary()||y.is("pre")||y.getBogus()?void 0:y}(N,y))&&(N.appendBogus(),b=CKEDITOR.env.ie),f(p,y.block,C)&&k.collapsed&&!k.getCommonAncestor().isReadOnly()&&((y=k.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(C=new CKEDITOR.dom.walker(y)).guard=function(x){return!o(x)||x.type==CKEDITOR.NODE_COMMENT||x.isReadOnly()},!C.checkForward()||y.checkStartOfBlock()&&y.checkEndOfBlock())&&(p=k.fixBlock(!0,p.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(p=p.getFirst(o))&&p.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(p.getText()).match(/^(?:&nbsp;|\xa0)$/)&&p.remove(),b=1,O.cancel()),b&&k.select()}(y),p.fire("unlockSnapshot"),!C&&p.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(O){var p=O.editor;p.on("mode",function(){var y=p.editable();if(y&&y.isInline()){var C=p.title;if(y.changeAttr("role","textbox"),y.changeAttr("aria-multiline","true"),y.changeAttr("aria-label",C),C&&y.changeAttr("title",C),(N=p.fire("ariaEditorHelpLabel",{}).label)&&(C=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var k=CKEDITOR.tools.getNextId(),N=CKEDITOR.dom.element.createFromHtml('<span id="'+k+'" class="cke_voice_label">'+N+"</span>");C.append(N),y.changeAttr("aria-describedby",k)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),e=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.dom.walker.empty(),h=CKEDITOR.dom.walker.bogus(),T=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,m=function(){function O(E){return E.type==CKEDITOR.NODE_ELEMENT}function p(E,R){var A,F,$,D,w=[],P=R.range.startContainer;A=R.range.startPath(),P=x[P.getName()];for(var z=0,W=E.getChildren(),G=W.count(),J=-1,Z=-1,ee=0,M=A.contains(x.$list);z<G;++z)O(A=W.getItem(z))?($=A.getName(),M&&$ in CKEDITOR.dtd.$list?w=w.concat(p(A,R)):(D=!!P[$],"br"!=$||!A.data("cke-eol")||z&&z!=G-1||(ee=(F=z?w[z-1].node:W.getItem(z+1))&&(!O(F)||!F.is("br")),F=F&&O(F)&&x.$block[F.getName()]),-1!=J||D||(J=z),D||(Z=z),w.push({isElement:1,isLineBreak:ee,isBlock:A.isBlockBoundary(),hasBlockSibling:F,node:A,name:$,allowed:D}),F=ee=0)):w.push({isElement:0,node:A,allowed:1});return-1<J&&(w[J].firstNotAllowed=1),-1<Z&&(w[Z].lastNotAllowed=1),w}function y(E,R){var D,A=[],F=E.getChildren(),$=F.count(),w=0,P=x[R],z=!E.is(x.$inline)||E.is("br");for(z&&A.push(" ");w<$;w++)O(D=F.getItem(w))&&!D.is(P)?A=A.concat(y(D,R)):A.push(D);return z&&A.push(" "),A}function C(E){return O(E.startContainer)&&E.startContainer.getChild(E.startOffset-1)}function N(E){return E&&O(E)&&(E.is(x.$removeEmpty)||E.is("a")&&!E.isBlockBoundary())}function k(E,R,A,F){var D,w,$=E.clone();$.setEndAt(R,CKEDITOR.POSITION_BEFORE_END),(D=new CKEDITOR.dom.walker($).next())&&O(D)&&S[D.getName()]&&(w=D.getPrevious())&&O(w)&&!w.getParent().equals(E.startContainer)&&A.contains(w)&&F.contains(D)&&D.isIdentical(w)&&(D.moveChildren(w),D.remove(),k(E,R,A,F))}var x=CKEDITOR.dtd,S={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},H={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},L=CKEDITOR.tools.extend({},x.$inline);return delete L.br,function(E,R,A,F){var $=E.editor,D=!1;if("unfiltered_html"==R&&(R="html",D=!0),!F.checkReadOnly()){D=(R={type:R,dontFilter:D,editable:E,editor:$,range:F,blockLimit:w=new CKEDITOR.dom.elementPath(F.startContainer,F.root).blockLimit||F.root,mergeCandidates:[],zombies:[]}).range;var z,W,G,J,Z,ee,ie,w=R.mergeCandidates,P="html"===R.type;if("text"==R.type&&D.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(W=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",D.document),D.insertNode(W),D.setStartAfter(W)),G=new CKEDITOR.dom.elementPath(D.startContainer),R.endPath=J=new CKEDITOR.dom.elementPath(D.endContainer),!D.collapsed){z=J.block||J.blockLimit;var M=D.getCommonAncestor();z&&!z.equals(M)&&!z.contains(M)&&D.checkEndOfBlock()&&R.zombies.push(z),D.deleteContents()}for(;(Z=C(D))&&O(Z)&&Z.isBlockBoundary()&&G.contains(Z);)D.moveToPosition(Z,CKEDITOR.POSITION_BEFORE_END);for(k(D,R.blockLimit,G,J),W&&(D.setEndBefore(W),D.collapse(),W.remove()),(z=(W=D.startPath()).contains(N,!1,1))&&(ee=D.splitElement(z),R.inlineStylesRoot=z,R.inlineStylesPeak=W.lastElement),W=D.createBookmark(),P&&(i(z),i(ee)),(z=W.startNode.getPrevious(o))&&O(z)&&N(z)&&w.push(z),(z=W.startNode.getNext(o))&&O(z)&&N(z)&&w.push(z),z=W.startNode;(z=z.getParent())&&N(z);)w.push(z);if(D.moveToBookmark(W),""===$.getData()&&$.enterMode===CKEDITOR.ENTER_DIV&&(($=E.getFirst())&&$.remove(),F.setStartAt(E,CKEDITOR.POSITION_AFTER_START),F.collapse(!0)),E=A){if(E=R.range,"text"==R.type&&R.inlineStylesRoot){for($=(F=R.inlineStylesPeak).getDocument().createText("{cke-peak}"),ee=R.inlineStylesRoot.getParent();!F.equals(ee);)$=$.appendTo(F.clone()),F=F.getParent();A=$.getOuterHtml().split("{cke-peak}").join(A)}if(F=R.blockLimit.getName(),/^\s+|\s+$/.test(A)&&"span"in CKEDITOR.dtd[F]&&(A=(B='<span data-cke-marker="1">&nbsp;</span>')+A+B),A=R.editor.dataProcessor.toHtml(A,{context:null,fixForBody:!1,protectedWhitespaces:!!B,dontFilter:R.dontFilter,filter:R.editor.activeFilter,enterMode:R.editor.activeEnterMode}),(F=E.document.createElement("body")).setHtml(A),B&&(F.getFirst().remove(),F.getLast().remove()),(B=E.startPath().block)&&(1!=B.getChildCount()||!B.getBogus()))e:{var U;if(1==F.getChildCount()&&O(U=F.getFirst())&&U.is(H)&&!U.hasAttribute("contenteditable")){for(E=0,ee=(B=U.getElementsByTag("*")).count();E<ee;E++)if(!($=B.getItem(E)).is(L))break e;U.moveChildren(U.getParent(1)),U.remove()}}R.dataWrapper=F,E=A}if(E){E=(U=R.range).document,F=R.blockLimit,ee=0;var q,j,Y,V,X,B=[];for(A=W=0,D=(Z=R.endPath.elements[0]).getPosition($=U.startContainer),w=!(!Z.getCommonAncestor($)||D==CKEDITOR.POSITION_IDENTICAL||D&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function b(E,R){function A(D,w){if(w.isBlock&&w.isElement&&!w.node.is("br")&&O(D)&&D.is("br"))return D.remove(),1}var F=R.endContainer.getChild(R.endOffset),$=R.endContainer.getChild(R.endOffset-1);F&&A(F,E[E.length-1]),$&&A($,E[0])&&(R.setEnd(R.endContainer,R.endOffset-1),R.collapse())}($=p(R.dataWrapper,R),U);ee<$.length;ee++)if((P=(D=$[ee]).isLineBreak)&&(P=U,z=F,J=G=void 0,D.hasBlockSibling?P=1:(G=P.startContainer.getAscendant(x.$block,1))&&G.is({div:1,p:1})?(J=G.getPosition(z))==CKEDITOR.POSITION_IDENTICAL||J==CKEDITOR.POSITION_CONTAINS?P=0:(z=P.splitElement(G),P.moveToPosition(z,CKEDITOR.POSITION_AFTER_START),P=1):P=0),P)A=0<ee;else{if(P=U.startPath(),!D.isBlock&&f(R.editor,P.block,P.blockLimit)&&(Y=d(R.editor))&&((Y=E.createElement(Y)).appendBogus(),U.insertNode(Y),CKEDITOR.env.needsBrFiller&&(q=Y.getBogus())&&q.remove(),U.moveToPosition(Y,CKEDITOR.POSITION_BEFORE_END)),(P=U.startPath().block)&&!P.equals(j)&&((q=P.getBogus())&&(q.remove(),B.push(P)),j=P),D.firstNotAllowed&&(W=1),W&&D.isElement){for(P=U.startContainer,z=null;P&&!x[P.getName()][D.name];){if(P.equals(F)){P=null;break}z=P,P=P.getParent()}if(P)z&&(V=U.splitElement(z),R.zombies.push(V),R.zombies.push(z));else{z=F.getName(),X=!ee,P=ee==$.length-1,G=[],J=(z=y(D.node,z)).length,M=0;for(var Q=void 0,te=0,ne=-1;M<J;M++)" "==(Q=z[M])?(te||X&&!M||(G.push(new CKEDITOR.dom.text(" ")),ne=G.length),te=1):(G.push(Q),te=0);P&&ne==G.length&&G.pop(),X=G}}if(X){for(;P=X.pop();)U.insertNode(P);X=0}else U.insertNode(D.node);D.lastNotAllowed&&ee<$.length-1&&((V=w?Z:V)&&U.setEndAt(V,CKEDITOR.POSITION_AFTER_START),W=0),U.collapse()}(q=1==$.length&&(q=$[0]).isElement&&"false"==q.node.getAttribute("contenteditable"))&&(A=!0,U.setStartAt(P=$[0].node,CKEDITOR.POSITION_BEFORE_START),U.setEndAt(P,CKEDITOR.POSITION_AFTER_END)),R.dontMoveCaret=A,R.bogusNeededBlocks=B}for(V=R.bogusNeededBlocks,X=(q=R.range).createBookmark();j=R.zombies.pop();)j.getParent()&&((Y=q.clone()).moveToElementEditStart(j),Y.removeEmptyBlocksAtEnd());if(V)for(;j=V.pop();)CKEDITOR.env.needsBrFiller?j.appendBogus():j.append(q.document.createText("\xa0"));for(;j=R.mergeCandidates.pop();)j.mergeSiblings();if(q.moveToBookmark(X),!R.dontMoveCaret){for(j=C(q);j&&O(j)&&!j.is(x.$empty);){if(j.isBlockBoundary())q.moveToPosition(j,CKEDITOR.POSITION_BEFORE_END);else{if(N(j)&&j.getHtml().match(/(\s|&nbsp;)$/g)){ie=null;break}(ie=q.clone()).moveToPosition(j,CKEDITOR.POSITION_BEFORE_END)}j=j.getLast(o)}ie&&q.moveToRange(ie)}}}}(),g=function(){function O(C){return(C=new CKEDITOR.dom.walker(C)).guard=function(N,k){return!k&&(N.type==CKEDITOR.NODE_ELEMENT?N.is(CKEDITOR.dtd.$tableContent):void 0)},C.evaluator=function(N){return N.type==CKEDITOR.NODE_ELEMENT},C}function p(C,N,k){return N=C.getDocument().createElement(N),C.append(N,k),N}function y(C){for(var k,N=C.count();0<N--;)k=C.getItem(N),CKEDITOR.tools.trim(k.getHtml())||(k.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&k.getChildCount()&&k.getFirst().remove())}return function(C){var N=C.startContainer,k=N.getAscendant("table",1),b=!1;y(k.getElementsByTag("td")),y(k.getElementsByTag("th")),(k=C.clone()).setStart(N,0),(k=O(k).lastBackward())||((k=C.clone()).setEndAt(N,CKEDITOR.POSITION_BEFORE_END),k=O(k).lastForward(),b=!0),k||(k=N),k.is("table")?(C.setStartAt(k,CKEDITOR.POSITION_BEFORE_START),C.collapse(!0),k.remove()):(k.is({tbody:1,thead:1,tfoot:1})&&(k=p(k,"tr",b)),k.is("tr")&&(k=p(k,k.getParent().is("thead")?"th":"td",b)),(N=k.getBogus())&&N.remove(),C.moveToPosition(k,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),I=function(){function O(p){return(p=new CKEDITOR.dom.walker(p)).guard=function(y,C){return!C&&(y.type==CKEDITOR.NODE_ELEMENT?y.is(CKEDITOR.dtd.$list)||y.is(CKEDITOR.dtd.$listItem):void 0)},p.evaluator=function(y){return y.type==CKEDITOR.NODE_ELEMENT&&y.is(CKEDITOR.dtd.$listItem)},p}return function(p){var N,y=p.startContainer,C=!1;(N=p.clone()).setStart(y,0),(N=O(N).lastBackward())||((N=p.clone()).setEndAt(y,CKEDITOR.POSITION_BEFORE_END),N=O(N).lastForward(),C=!0),N||(N=y),N.is(CKEDITOR.dtd.$list)?(p.setStartAt(N,CKEDITOR.POSITION_BEFORE_START),p.collapse(!0),N.remove()):((y=N.getBogus())&&y.remove(),p.moveToPosition(N,C?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),p.select())}}(),_={eol:{detect:function(p,y){var C=p.range,N=C.clone(),k=C.clone(),b=new CKEDITOR.dom.elementPath(C.startContainer,y),x=new CKEDITOR.dom.elementPath(C.endContainer,y);N.collapse(1),k.collapse(),b.block&&N.checkBoundaryOfElement(b.block,CKEDITOR.END)&&(C.setStartAfter(b.block),p.prependEolBr=1),x.block&&k.checkBoundaryOfElement(x.block,CKEDITOR.START)&&(C.setEndBefore(x.block),p.appendEolBr=1)},fix:function(p,y){var N,C=y.getDocument();p.appendEolBr&&(N=this.createEolBr(C),p.fragment.append(N)),!p.prependEolBr||N&&!N.getPrevious()||p.fragment.append(this.createEolBr(C),1)},createEolBr:function(p){return p.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(p){var C,y=(C=p.range.getBoundaryNodes()).startNode;!(C=C.endNode)||!h(C)||y&&y.equals(C)||p.range.setEndBefore(C)}},tree:{rebuild:function(p,y){var x,C=(b=p.range).getCommonAncestor(),N=new CKEDITOR.dom.elementPath(C,y),k=new CKEDITOR.dom.elementPath(b.startContainer,y),b=new CKEDITOR.dom.elementPath(b.endContainer,y);if(C.type==CKEDITOR.NODE_TEXT&&(C=C.getParent()),N.blockLimit.is({tr:1,table:1})){var S=N.contains("table").getParent();x=function(E){return!E.equals(S)}}else if(N.block&&N.block.is(CKEDITOR.dtd.$listItem)&&(k=k.contains(CKEDITOR.dtd.$list),b=b.contains(CKEDITOR.dtd.$list),!k.equals(b))){var H=N.contains(CKEDITOR.dtd.$list).getParent();x=function(E){return!E.equals(H)}}x||(x=function(E){return!E.equals(N.block)&&!E.equals(N.blockLimit)}),this.rebuildFragment(p,y,C,x)},rebuildFragment:function(p,y,C,N){for(var k;C&&!C.equals(y)&&N(C);)k=C.clone(0,1),p.fragment.appendTo(k),p.fragment=k,C=C.getParent()}},cell:{shrink:function(p){var y=(p=p.range).startContainer,N=p.startOffset,k=p.endOffset;y.type==CKEDITOR.NODE_ELEMENT&&y.equals(p.endContainer)&&y.is("tr")&&++N==k&&p.shrink(CKEDITOR.SHRINK_TEXT)}}},K=function(){function O(C,N){var k=C.getParent();k.is(CKEDITOR.dtd.$inline)&&C[N?"insertBefore":"insertAfter"](k)}function p(C,N,k){O(N),O(k,1);for(var b;b=k.getNext();)b.insertAfter(N),N=b;u(C)&&C.remove()}function y(C,N){var k=new CKEDITOR.dom.range(C);return k.setStartAfter(N.startNode),k.setEndBefore(N.endNode),k}return{list:{detectMerge:function(N,k){var b=y(k,N.bookmark),x=b.startPath(),S=b.endPath(),H=x.contains(CKEDITOR.dtd.$list),L=S.contains(CKEDITOR.dtd.$list);N.mergeList=H&&L&&H.getParent().equals(L.getParent())&&!H.equals(L),N.mergeListItems=x.block&&S.block&&x.block.is(CKEDITOR.dtd.$listItem)&&S.block.is(CKEDITOR.dtd.$listItem),(N.mergeList||N.mergeListItems)&&((b=b.clone()).setStartBefore(N.bookmark.startNode),b.setEndAfter(N.bookmark.endNode),N.mergeListBookmark=b.createBookmark())},merge:function(N,k){if(N.mergeListBookmark){var b=N.mergeListBookmark.startNode,x=N.mergeListBookmark.endNode,S=new CKEDITOR.dom.elementPath(b,k),H=new CKEDITOR.dom.elementPath(x,k);if(N.mergeList){var L=S.contains(CKEDITOR.dtd.$list),E=H.contains(CKEDITOR.dtd.$list);L.equals(E)||(E.moveChildren(L),E.remove())}N.mergeListItems&&(S=S.contains(CKEDITOR.dtd.$listItem),H=H.contains(CKEDITOR.dtd.$listItem),S.equals(H)||p(H,b,x)),b.remove(),x.remove()}}},block:{detectMerge:function(N,k){if(!N.tableContentsRanges&&!N.mergeListBookmark){var b=new CKEDITOR.dom.range(k);b.setStartBefore(N.bookmark.startNode),b.setEndAfter(N.bookmark.endNode),N.mergeBlockBookmark=b.createBookmark()}},merge:function(N,k){if(N.mergeBlockBookmark&&!N.purgeTableBookmark){var b=N.mergeBlockBookmark.startNode,x=N.mergeBlockBookmark.endNode,S=new CKEDITOR.dom.elementPath(b,k),H=(H=new CKEDITOR.dom.elementPath(x,k)).block;(S=S.block)&&H&&!S.equals(H)&&p(H,b,x),b.remove(),x.remove()}}},table:function(){function C(b){var S,x=[],H=new CKEDITOR.dom.walker(b),L=b.startPath().contains(k),E=b.endPath().contains(k),R={};return H.guard=function(A,F){if(A.type==CKEDITOR.NODE_ELEMENT){if(A.getCustomData($="visited_"+(F?"out":"in")))return;CKEDITOR.dom.element.setMarker(R,A,$,1)}if(F&&L&&A.equals(L))(S=b.clone()).setEndAt(L,CKEDITOR.POSITION_BEFORE_END),x.push(S);else if(!F&&E&&A.equals(E))(S=b.clone()).setStartAt(E,CKEDITOR.POSITION_AFTER_START),x.push(S);else{if(($=!F)&&($=A.type==CKEDITOR.NODE_ELEMENT&&A.is(k)&&(!L||N(A,L))&&(!E||N(A,E))),!$&&($=F))if(A.is(k)){var $=L&&L.getAscendant("table",!0),D=E&&E.getAscendant("table",!0),w=A.getAscendant("table",!0);$=$&&$.contains(w)||D&&D.contains(w)}else $=void 0;$&&((S=b.clone()).selectNodeContents(A),x.push(S))}},H.lastForward(),CKEDITOR.dom.element.clearAllMarkers(R),x}function N(b,x){var S=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,H=b.getPosition(x);return H!==CKEDITOR.POSITION_IDENTICAL&&0==(H&S)}var k={td:1,th:1,caption:1};return{detectPurge:function(x){var S=x.range;(H=S.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var H=new CKEDITOR.dom.walker(H),L=0;if(H.evaluator=function(R){R.type==CKEDITOR.NODE_ELEMENT&&R.is(k)&&++L},H.checkForward(),1<L){H=S.startPath().contains("table");var E=S.endPath().contains("table");H&&E&&S.checkBoundaryOfElement(H,CKEDITOR.START)&&S.checkBoundaryOfElement(E,CKEDITOR.END)&&((S=x.range.clone()).setStartBefore(H),S.setEndAfter(E),x.purgeTableBookmark=S.createBookmark())}},detectRanges:function(x,S){var E,R,H=y(S,x.bookmark),L=H.clone(),A=H.getCommonAncestor();A.is(CKEDITOR.dtd.$tableContent)&&!A.is(k)&&(A=A.getAscendant("table",!0)),R=A,A=new CKEDITOR.dom.elementPath(H.startContainer,R),R=new CKEDITOR.dom.elementPath(H.endContainer,R),A=A.contains("table"),R=R.contains("table"),(A||R)&&(A&&R&&N(A,R)?(x.tableSurroundingRange=L,L.setStartAt(A,CKEDITOR.POSITION_AFTER_END),L.setEndAt(R,CKEDITOR.POSITION_BEFORE_START),(L=H.clone()).setEndAt(A,CKEDITOR.POSITION_AFTER_END),(E=H.clone()).setStartAt(R,CKEDITOR.POSITION_BEFORE_START),E=C(L).concat(C(E))):A?R||(x.tableSurroundingRange=L,L.setStartAt(A,CKEDITOR.POSITION_AFTER_END),H.setEndAt(A,CKEDITOR.POSITION_AFTER_END)):(x.tableSurroundingRange=L,L.setEndAt(R,CKEDITOR.POSITION_BEFORE_START),H.setStartAt(R,CKEDITOR.POSITION_AFTER_START)),x.tableContentsRanges=E||C(H))},deleteRanges:function(x){for(var S;S=x.tableContentsRanges.pop();)S.extractContents(),u(S.startContainer)&&S.startContainer.appendBogus();x.tableSurroundingRange&&x.tableSurroundingRange.extractContents()},purge:function(x){if(x.purgeTableBookmark){var H=x.doc,S=x.range.clone();(H=H.createElement("p")).insertBefore(x.purgeTableBookmark.startNode),S.moveToBookmark(x.purgeTableBookmark),S.deleteContents(),x.range.moveToPosition(H,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(N){return!(N.range.startPath().contains(CKEDITOR.dtd.$listItem)&&N.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(N){N.startContainer.getDtd()["#"]||N.moveToClosestEditablePosition(null,!0)},autoParagraph:function(N,k){var x,b=k.startPath();f(N,b.block,b.blockLimit)&&(x=d(N))&&((x=k.document.createElement(x)).appendBogus(),k.insertNode(x),k.moveToPosition(x,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function v(k){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(k)}function t(k,b){if(0===k.length||v(k[0].getEnclosedNode()))return!1;var x,S;if((x=!b&&1===k.length)&&!(x=k[0].collapsed)){var H=k[0];x=H.startContainer.getAscendant({td:1,th:1},!0);var L=H.endContainer.getAscendant({td:1,th:1},!0);S=CKEDITOR.tools.trim,x=!(!x||!x.equals(L)||x.findOne("td, th, tr, tbody, table")||(H=H.cloneContents()).getFirst()&&S(H.getFirst().getText())===S(x.getText()))}if(x)return!1;for(S=0;S<k.length;S++)if(!(x=k[S]._getTableElement()))return!1;return!0}function s(k){var b=this.root.editor,x=b.getSelection(1);this.reset(),K=!0,x.root.once("selectionchange",function(S){S.cancel()},null,null,0),x.selectRanges([k[0]]),(x=this._.cache).ranges=new CKEDITOR.dom.rangeList(k),x.type=CKEDITOR.SELECTION_TEXT,x.selectedElement=k[0]._getTableElement(),x.selectedText=function o(k){k=function c(k){function b(L){L=L.find("td, th");var R,E=[];for(R=0;R<L.count();R++)E.push(L.getItem(R));return E}var S,H,x=[];for(H=0;H<k.length;H++)(S=k[H]._getTableElement()).is&&S.is({td:1,th:1})?x.push(S):x=x.concat(b(S));return x}(k);var S,H,b="",x=[];for(H=0;H<k.length;H++)S&&!S.equals(k[H].getAscendant("tr"))?(b+=x.join("\t")+"\n",S=k[H].getAscendant("tr"),x=[]):0===H&&(S=k[H].getAscendant("tr")),x.push(k[H].getText());return b+x.join("\t")}(k),x.nativeSel=null,this.isFake=1,this.rev=g++,b._.fakeSelection=this,K=!1,this.root.fire("selectionchange")}function a(){var b,k=this._.fakeSelection;if(k){var x;if(!(x=!(b=this.getSelection(1)))&&(x=!b.isHidden())){x=k;var S=b.getRanges(),H=x.getRanges(),L=S.length&&S[0]._getTableElement()&&S[0]._getTableElement().getAscendant("table",!0),E=H.length&&H[0]._getTableElement()&&H[0]._getTableElement().getAscendant("table",!0),R=1===S.length&&S[0]._getTableElement()&&S[0]._getTableElement().is("table"),A=1===H.length&&H[0]._getTableElement()&&H[0]._getTableElement().is("table");if(v(x.getSelectedElement()))x=!1;else{var F=1===S.length&&S[0].collapsed;H=t(S,!!CKEDITOR.env.webkit)&&t(H),(L=!(!L||!E)&&(L.equals(E)||E.contains(L)))&&(F||H)?(R&&!A&&x.selectRanges(S),x=!0):x=!1}x=!x}x&&(k.reset(),k=0)}!k&&(!(k=b||this.getSelection(1))||k.getType()==CKEDITOR.SELECTION_NONE)||(this.fire("selectionCheck",k),(b=this.elementPath()).compare(this._.selectionPreviousPath)||(x=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(b.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||x||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:k,path:b})))}function f(){p=!0,O||(d.call(this),O=CKEDITOR.tools.setTimeout(d,200,this))}function d(){O=null,p&&(CKEDITOR.tools.setTimeout(a,0,this),p=!1)}function i(k){return!(!y(k)&&(k.type!=CKEDITOR.NODE_ELEMENT||k.is(CKEDITOR.dtd.$empty)))}function l(k){function b(L,E){return!(!L||L.type==CKEDITOR.NODE_TEXT)&&k.clone()["moveToElementEdit"+(E?"End":"Start")](L)}if(!(k.root instanceof CKEDITOR.editable))return!1;var x=k.startContainer,S=k.getPreviousNode(i,null,x),H=k.getNextNode(i,null,x);return!(!b(S)&&!b(H,1)&&(S||H||x.type==CKEDITOR.NODE_ELEMENT&&x.isBlockBoundary()&&x.getBogus()))}function r(k){e(k,!1);var b=k.getDocument().createText(I);return k.setCustomData("cke-fillingChar",b),b}function e(k,b){var x=k&&k.removeCustomData("cke-fillingChar");if(x){if(!1!==b){var S=k.getDocument().getSelection().getNative(),H=S&&"None"!=S.type&&S.getRangeAt(0),L=I.length;if(x.getLength()>L&&H&&H.intersectsNode(x.$)){var E=[{node:S.anchorNode,offset:S.anchorOffset},{node:S.focusNode,offset:S.focusOffset}];S.anchorNode==x.$&&S.anchorOffset>L&&(E[0].offset-=L),S.focusNode==x.$&&S.focusOffset>L&&(E[1].offset-=L)}}x.setText(n(x.getText(),1)),E&&(S=(x=k.getDocument().$).getSelection(),(x=x.createRange()).setStart(E[0].node,E[0].offset),x.collapse(!0),S.removeAllRanges(),S.addRange(x),S.extend(E[1].node,E[1].offset))}}function n(k,b){return b?k.replace(_,function(x,S){return S?"\xa0":""}):k.replace(I,"")}var K,O,p,m="function"!=typeof window.getSelection,g=1,I=CKEDITOR.tools.repeat("\u200b",7),_=new RegExp(I+"( )?","g"),y=CKEDITOR.dom.walker.invisible(1),C=function(){function k(H){return function(L){var E=L.editor.createRange();return E.moveToClosestEditablePosition(L.selected,H)&&L.editor.getSelection().selectRanges([E]),!1}}function b(H){return function(L){var A,E=L.editor,R=E.createRange();if(!E.readOnly)return(A=R.moveToClosestEditablePosition(L.selected,H))||(A=R.moveToClosestEditablePosition(L.selected,!H)),A&&E.getSelection().selectRanges([R]),E.fire("saveSnapshot"),L.selected.remove(),A||(R.moveToElementEditablePosition(E.editable()),E.getSelection().selectRanges([R])),E.fire("saveSnapshot"),!1}}var x=k(),S=k(1);return{37:x,38:x,39:S,40:S,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(k){function b(){var S=x.getSelection();S&&S.removeAllRanges()}var x=k.editor;x.on("contentDom",function(){function S(){(P=new CKEDITOR.dom.selection(x.getSelection())).lock()}function H(){R.removeListener("mouseup",H),$.removeListener("mouseup",H);var Z=CKEDITOR.document.$.selection,ee=Z.createRange();"None"!=Z.type&&ee.parentElement()&&ee.parentElement().ownerDocument==E.$&&ee.select()}var w,P,z,J,W,G,E=x.document,R=CKEDITOR.document,A=x.editable(),F=E.getBody(),$=E.getDocumentElement(),D=A.isInline();CKEDITOR.env.gecko&&A.attachListener(A,"focus",function(Z){Z.removeListener(),0!==w&&(Z=x.getSelection().getNative())&&Z.isCollapsed&&Z.anchorNode==A.$&&((Z=x.createRange()).moveToElementEditStart(A),Z.select())},null,null,-2),A.attachListener(A,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){w&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(w=x._.previousActive&&x._.previousActive.equals(E.getActive()),CKEDITOR.env.webkit&&w&&null!=x._.previousScrollTop&&x._.previousScrollTop!=A.$.scrollTop&&(A.$.scrollTop=x._.previousScrollTop)),x.unlockSelection(w),w=0},null,null,-1),A.attachListener(A,"mousedown",function(){w=0}),(CKEDITOR.env.ie||D)&&(m?A.attachListener(A,"beforedeactivate",S,null,null,-1):A.attachListener(x,"selectionCheck",S,null,null,-1),A.attachListener(A,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){x.lockSelection(P),w=1},null,null,-1),A.attachListener(A,"mousedown",function(){w=0})),CKEDITOR.env.ie&&!D&&(A.attachListener(A,"mousedown",function(Z){2==Z.data.$.button&&((Z=x.document.getSelection())&&Z.getType()!=CKEDITOR.SELECTION_NONE||(z=x.window.getScrollPosition()))}),A.attachListener(A,"mouseup",function(Z){2==Z.data.$.button&&z&&(x.document.$.documentElement.scrollLeft=z.x,x.document.$.documentElement.scrollTop=z.y),z=null}),"BackCompat"!=E.$.compatMode)&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&$.on("mousedown",function(Z){function ee(B){if(B=B.data.$,W){var U=F.$.createTextRange();try{U.moveToPoint(B.clientX,B.clientY)}catch(q){}W.setEndPoint(0>G.compareEndPoints("StartToStart",U)?"EndToEnd":"StartToStart",U),W.select()}}function M(){$.removeListener("mousemove",ee),R.removeListener("mouseup",M),$.removeListener("mouseup",M),W.select()}if((Z=Z.data).getTarget().is("html")&&Z.$.y<$.$.clientHeight&&Z.$.x<$.$.clientWidth){W=F.$.createTextRange();try{W.moveToPoint(Z.$.clientX,Z.$.clientY)}catch(B){}G=W.duplicate(),$.on("mousemove",ee),R.on("mouseup",M),$.on("mouseup",M)}}),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&$.on("mousedown",function(Z){Z.data.getTarget().is("html")&&(R.on("mouseup",H),$.on("mouseup",H))})),A.attachListener(A,"selectionchange",a,x),A.attachListener(A,"keyup",f,x),A.attachListener(A,"touchstart",f,x),A.attachListener(A,"touchend",f,x),CKEDITOR.env.ie&&A.attachListener(A,"keydown",function(Z){var ee=this.getSelection(1),M=function L(Z){return(Z=Z.getRanges()[0])&&(Z=Z.startContainer.getAscendant(function(ee){return ee.type==CKEDITOR.NODE_ELEMENT&&ee.hasAttribute("contenteditable")},!0))&&"false"===Z.getAttribute("contenteditable")?Z:null}(ee);M&&!M.equals(A)&&(ee.selectElement(M),Z.data.preventDefault())},x),A.attachListener(A,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){x.forceNextSelectionCheck(),x.selectionChange(1)}),D&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(A.attachListener(A,"mousedown",function(){J=1}),A.attachListener(E.getDocumentElement(),"mouseup",function(){J&&f.call(x),J=0})):A.attachListener(CKEDITOR.env.ie?A:E.getDocumentElement(),"mouseup",f,x),CKEDITOR.env.webkit&&A.attachListener(E,"keydown",function(Z){switch(Z.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:A.hasFocus&&e(A)}},null,null,-1),A.attachListener(A,"keydown",function h(k){var b={37:1,39:1,8:1,46:1};return function(x){var S=x.data.getKeystroke();if(b[S]){var H=k.getSelection().getRanges(),L=H[0];1==H.length&&L.collapsed&&(S=L[38>S?"getPreviousEditableNode":"getNextEditableNode"]())&&S.type==CKEDITOR.NODE_ELEMENT&&"false"==S.getAttribute("contenteditable")&&(k.getSelection().fake(S),x.data.preventDefault(),x.cancel())}}}(x),null,null,-1)}),x.on("setData",function(){x.unlockSelection(),CKEDITOR.env.webkit&&b()}),x.on("contentDomUnload",function(){x.unlockSelection()}),CKEDITOR.env.ie9Compat&&x.on("beforeDestroy",b,null,null,9),x.on("dataReady",function(){delete x._.fakeSelection,delete x._.hiddenSelectionContainer,x.selectionChange(1)}),x.on("loadSnapshot",function(){var S=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),H=x.editable().getLast(S);H&&H.hasAttribute("data-cke-hidden-sel")&&(H.remove(),CKEDITOR.env.gecko&&(S=x.editable().getFirst(S))&&S.is("br")&&S.getAttribute("_moz_editor_bogus_node")&&S.remove())},null,null,100),x.on("key",function(S){if("wysiwyg"==x.mode){var H=x.getSelection();if(H.isFake){var L=C[S.data.keyCode];if(L)return L({editor:x,selected:H.getSelectedElement(),selection:H,keyEvent:S})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(k){var b=k.editor;b.on("selectionChange",function(){var x=b.editable(),S=x.getCustomData("cke-fillingChar");S&&(S.getCustomData("ready")?(e(x),x.editor.fire("selectionCheck")):S.setCustomData("ready",1))},null,null,-1),b.on("beforeSetMode",function(){e(b.editable())},null,null,-1),b.on("getSnapshot",function(x){x.data&&(x.data=n(x.data))},b,null,20),b.on("toDataFormat",function(x){x.data.dataValue=n(x.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(k){(k?a:f).call(this)},CKEDITOR.editor.prototype.getSelection=function(k){return!this._.savedSelection&&!this._.fakeSelection||k?(k=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(k):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(k){return(k=k||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!k.isLocked&&k.lock(),this._.savedSelection=k,!0)},CKEDITOR.editor.prototype.unlockSelection=function(k){var b=this._.savedSelection;return!!b&&(b.unlock(k),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var k=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return k.selectRanges([this]),k},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(k){if(k instanceof CKEDITOR.dom.selection){var b=k;k=k.root}var S,H,x=k instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:g++,this.document=k instanceof CKEDITOR.dom.document?k:k.getDocument(),this.root=x?k:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;if(k=this.getNative())if(k.getRangeAt)S=(H=k.rangeCount&&k.getRangeAt(0))&&new CKEDITOR.dom.node(H.commonAncestorContainer);else{try{H=k.createRange()}catch(L){}S=H&&CKEDITOR.dom.element.get(H.item&&H.item(0)||H.parentElement())}return(!S||S.type!=CKEDITOR.NODE_ELEMENT&&S.type!=CKEDITOR.NODE_TEXT||!this.root.equals(S)&&!this.root.contains(S))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var k,N={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:n,_createFillingCharSequenceNode:r,FILLING_CHAR_SEQUENCE:I}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=m?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:m?function(){var k=this._.cache;if(k.type)return k.type;var b=CKEDITOR.SELECTION_NONE;try{var x=this.getNative(),S=x.type;"Text"==S&&(b=CKEDITOR.SELECTION_TEXT),"Control"==S&&(b=CKEDITOR.SELECTION_ELEMENT),x.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(H){}return k.type=b}:function(){var k=this._.cache;if(k.type)return k.type;var b=CKEDITOR.SELECTION_TEXT;if((x=this.getNative())&&x.rangeCount){if(1==x.rangeCount){var x,S=(x=x.getRangeAt(0)).startContainer;S==x.endContainer&&1==S.nodeType&&x.endOffset-x.startOffset==1&&N[S.childNodes[x.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return k.type=b},getRanges:(k=m?function(){function b(S){return new CKEDITOR.dom.node(S).getIndex()}var x=function(H,L){(H=H.duplicate()).collapse(L);var E=H.parentElement();if(!E.hasChildNodes())return{container:E,offset:0};for(var A,F,z,W,R=E.children,$=H.duplicate(),D=0,w=R.length-1,P=-1;D<=w;)if(P=Math.floor((D+w)/2),$.moveToElementText(A=R[P]),0<(z=$.compareEndPoints("StartToStart",H)))w=P-1;else{if(!(0>z))return{container:E,offset:b(A)};D=P+1}if(-1==P||P==R.length-1&&0>z){if($.moveToElementText(E),$.setEndPoint("StartToStart",H),$=$.text.replace(/(\r\n|\r)/g,"\n").length,R=E.childNodes,!$)return(A=R[R.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:E,offset:R.length}:{container:A,offset:A.nodeValue.length};for(E=R.length;0<$&&0<E;)(F=R[--E]).nodeType==CKEDITOR.NODE_TEXT&&(W=F,$-=F.nodeValue.length);return{container:W,offset:-$}}if($.collapse(0<z),$.setEndPoint(0<z?"StartToStart":"EndToStart",H),!($=$.text.replace(/(\r\n|\r)/g,"\n").length))return{container:E,offset:b(A)+(0<z?0:1)};for(;0<$;)try{(F=A[0<z?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&($-=F.nodeValue.length,W=F),A=F}catch(G){return{container:E,offset:b(A)}}return{container:W,offset:0<z?-$:W.nodeValue.length+$}};return function(){var H=(S=this.getNative())&&S.createRange(),L=this.getType();if(!S)return[];if(L==CKEDITOR.SELECTION_TEXT)return S=new CKEDITOR.dom.range(this.root),L=x(H,!0),S.setStart(new CKEDITOR.dom.node(L.container),L.offset),L=x(H),S.setEnd(new CKEDITOR.dom.node(L.container),L.offset),S.endContainer.getPosition(S.startContainer)&CKEDITOR.POSITION_PRECEDING&&S.endOffset<=S.startContainer.getIndex()&&S.collapse(),[S];if(L==CKEDITOR.SELECTION_ELEMENT){L=[];for(var E=0;E<H.length;E++){for(var R=H.item(E),A=R.parentNode,F=0,S=new CKEDITOR.dom.range(this.root);F<A.childNodes.length&&A.childNodes[F]!=R;F++);S.setStart(new CKEDITOR.dom.node(A),F),S.setEnd(new CKEDITOR.dom.node(A),F+1),L.push(S)}return L}return[]}}():function(){var x,b=[],S=this.getNative();if(!S)return b;for(var H=0;H<S.rangeCount;H++){var L=S.getRangeAt(H);(x=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(L.startContainer),L.startOffset),x.setEnd(new CKEDITOR.dom.node(L.endContainer),L.endOffset),b.push(x)}return b},function(b){var x=this._.cache,S=x.ranges;return S||(x.ranges=S=new CKEDITOR.dom.rangeList(k.call(this))),b?function T(k){for(var b=0;b<k.length;b++){var x=k[b];if(x.getCommonAncestor().isReadOnly()&&k.splice(b,1),!x.collapsed){if(x.startContainer.isReadOnly())for(var H,S=x.startContainer;S&&!((H=S.type==CKEDITOR.NODE_ELEMENT)&&S.is("body")||!S.isReadOnly());)H&&"false"==S.getAttribute("contentEditable")&&x.setStartAfter(S),S=S.getParent();S=x.startContainer,H=x.endContainer;var L=x.startOffset,E=x.endOffset,R=x.clone();S&&S.type==CKEDITOR.NODE_TEXT&&(L>=S.getLength()?R.setStartAfter(S):R.setStartBefore(S)),H&&H.type==CKEDITOR.NODE_TEXT&&(E?R.setEndAfter(H):R.setEndBefore(H)),(S=new CKEDITOR.dom.walker(R)).evaluator=function(A){if(A.type==CKEDITOR.NODE_ELEMENT&&A.isReadOnly()){var F=x.clone();return x.setEndBefore(A),x.collapsed&&k.splice(b--,1),A.getPosition(R.endContainer)&CKEDITOR.POSITION_CONTAINS||(F.setStartAfter(A),F.collapsed||k.splice(b+1,0,F)),!0}return!1},S.next()}}return k}(new CKEDITOR.dom.rangeList(S.slice())):S}),getStartElement:function(){var x,b=this._.cache;if(void 0!==b.startElement)return b.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var S=this.getRanges()[0];if(S){if(S.collapsed)(x=S.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(x=x.getParent());else{for(S.optimize();S.startOffset==((x=S.startContainer).getChildCount?x.getChildCount():x.getLength())&&!x.isBlockBoundary();)S.setStartAfter(x);if((x=S.startContainer).type!=CKEDITOR.NODE_ELEMENT)return x.getParent();if((x=x.getChild(S.startOffset))&&x.type==CKEDITOR.NODE_ELEMENT)for(S=x.getFirst();S&&S.type==CKEDITOR.NODE_ELEMENT;)x=S,S=S.getFirst();else x=S.startContainer}x=x.$}}return b.startElement=x?new CKEDITOR.dom.element(x):null},getSelectedElement:function(){var b=this._.cache;if(void 0!==b.selectedElement)return b.selectedElement;var x=this,S=CKEDITOR.tools.tryThese(function(){return x.getNative().createRange().item(0)},function(){for(var L,E,H=x.getRanges()[0].clone(),R=2;R&&!((L=H.getEnclosedNode())&&L.type==CKEDITOR.NODE_ELEMENT&&N[L.getName()]&&(E=L));R--)H.shrink(CKEDITOR.SHRINK_ELEMENT);return E&&E.$});return b.selectedElement=S?new CKEDITOR.dom.element(S):null},getSelectedText:function(){var b=this._.cache;if(void 0!==b.selectedText)return b.selectedText;var x=this.getNative();return x=m?"Control"==x.type?"":x.createRange().text:x.toString(),b.selectedText=x},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(b){if(this.isLocked){if(b)var x=this.getSelectedElement(),S=this.getRanges(),H=this.isFake;this.isLocked=0,this.reset(),b&&(b=x||S[0]&&S[0].getCommonAncestor())&&b.getAscendant("body",1)&&(t(S)?s.call(this,S):H?this.fake(x):x?this.selectElement(x):this.selectRanges(S))}},reset:function(){this._.cache={},this.isFake=0;var b=this.root.editor;if(b&&b._.fakeSelection)if(this.rev==b._.fakeSelection.rev){delete b._.fakeSelection;var x=b._.hiddenSelectionContainer;if(x){var S=b.checkDirty();b.fire("lockSnapshot"),x.remove(),b.fire("unlockSnapshot"),!S&&b.resetDirty()}delete b._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=g++},selectElement:function(b){var x=new CKEDITOR.dom.range(this.root);x.setStartBefore(b),x.setEndAfter(b),this.selectRanges([x])},selectRanges:function(b){var x=this.root.editor,S=x&&x._.hiddenSelectionContainer;if(this.reset(),S){S=this.root;for(var H,L=0;L<b.length;++L)(H=b[L]).endContainer.equals(S)&&(H.endOffset=Math.min(H.endOffset,S.getChildCount()))}if(b.length)if(this.isLocked){var E=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(b),this.lock(),E&&!E.equals(this.root)&&E.focus()}else{var R,A,F;if(1==b.length&&!(F=b[0]).collapsed&&(R=F.getEnclosedNode())&&R.type==CKEDITOR.NODE_ELEMENT&&((F=F.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(A=F.getEnclosedNode())&&A.type==CKEDITOR.NODE_ELEMENT&&(R=A),"false"==R.getAttribute("contenteditable"))||(R=void 0),R)this.fake(R);else if(x&&x.plugins.tableselection&&x.plugins.tableselection.isSupportedEnvironment()&&t(b)&&!K&&!b[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))s.call(this,b);else{if(m){var $,D,w;if(A=CKEDITOR.dom.walker.whitespaces(!0),R=/\ufeff|\u00a0/,F={table:1,tbody:1,tr:1},1<b.length&&b[0].setEnd((x=b[b.length-1]).endContainer,x.endOffset),b=(x=b[0]).collapsed,(S=x.getEnclosedNode())&&S.type==CKEDITOR.NODE_ELEMENT&&S.getName()in N&&(!S.is("a")||!S.getText()))try{return(w=S.$.createControlRange()).addElement(S.$),void w.select()}catch(P){}(x.startContainer.type==CKEDITOR.NODE_ELEMENT&&x.startContainer.getName()in F||x.endContainer.type==CKEDITOR.NODE_ELEMENT&&x.endContainer.getName()in F)&&(x.shrink(CKEDITOR.NODE_ELEMENT,!0),b=x.collapsed),F=(w=x.createBookmark()).startNode,b||(E=w.endNode),(w=x.document.$.body.createTextRange()).moveToElementText(F.$),w.moveStart("character",1),E?((R=x.document.$.body.createTextRange()).moveToElementText(E.$),w.setEndPoint("EndToEnd",R),w.moveEnd("character",-1)):($=F.getNext(A),D=F.hasAscendant("pre"),$=!($&&$.getText&&$.getText().match(R))&&(D||!F.hasPrevious()||F.getPrevious().is&&F.getPrevious().is("br")),(D=x.document.createElement("span")).setHtml("&#65279;"),D.insertBefore(F),$&&x.document.createText("\ufeff").insertBefore(F)),x.setStartBefore(F),F.remove(),b?($?(w.moveStart("character",-1),w.select(),x.document.$.selection.clear()):w.select(),x.moveToPosition(D,CKEDITOR.POSITION_BEFORE_START),D.remove()):(x.setEndBefore(E),E.remove(),w.select())}else{if(!(E=this.getNative()))return;for(this.removeAllRanges(),w=0;w<b.length;w++)if(w<b.length-1&&(D=b[w+1],(R=($=b[w]).clone()).setStart($.endContainer,$.endOffset),R.setEnd(D.startContainer,D.startOffset),!R.collapsed&&(R.shrink(CKEDITOR.NODE_ELEMENT,!0),x=R.getCommonAncestor(),R=R.getEnclosedNode(),x.isReadOnly()||R&&R.isReadOnly())))D.setStart($.startContainer,$.startOffset),b.splice(w--,1);else{x=b[w],D=this.document.$.createRange(),x.collapsed&&CKEDITOR.env.webkit&&l(x)&&(R=r(this.root),x.insertNode(R),($=R.getNext())&&!R.getPrevious()&&$.type==CKEDITOR.NODE_ELEMENT&&"br"==$.getName()?(e(this.root),x.moveToPosition($,CKEDITOR.POSITION_BEFORE_START)):x.moveToPosition(R,CKEDITOR.POSITION_AFTER_END)),D.setStart(x.startContainer.$,x.startOffset);try{D.setEnd(x.endContainer.$,x.endOffset)}catch(P){if(!(0<=P.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw P;x.collapse(1),D.setEnd(x.endContainer.$,x.endOffset)}E.addRange(D)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(b,x){var S=this.root.editor;void 0===x&&b.hasAttribute("aria-label")&&(x=b.getAttribute("aria-label")),this.reset(),function u(k,b){var x=b&&CKEDITOR.tools.htmlEncode(b)||"&nbsp;";x=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+x+"</div>",k.document),k.fire("lockSnapshot"),k.editable().append(x);var S=k.getSelection(1),H=k.createRange(),L=S.root.on("selectionchange",function(E){E.cancel()},null,null,0);H.setStartAt(x,CKEDITOR.POSITION_AFTER_START),H.setEndAt(x,CKEDITOR.POSITION_BEFORE_END),S.selectRanges([H]),L.removeListener(),k.fire("unlockSnapshot"),k._.hiddenSelectionContainer=x}(S,x);var H=this._.cache,L=new CKEDITOR.dom.range(this.root);L.setStartBefore(b),L.setEndAfter(b),H.ranges=new CKEDITOR.dom.rangeList(L),H.selectedElement=H.startElement=b,H.type=CKEDITOR.SELECTION_ELEMENT,H.selectedText=H.nativeSel=null,this.isFake=1,this.rev=g++,S._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var b=this.getCommonAncestor();return b&&b.type==CKEDITOR.NODE_TEXT&&(b=b.getParent()),!(!b||!b.data("cke-hidden-sel"))},isInTable:function(b){return t(this.getRanges(),b)},isCollapsed:function(){var b=this.getRanges();return 1===b.length&&b[0].collapsed},createBookmarks:function(b){return b=this.getRanges().createBookmarks(b),this.isFake&&(b.isFake=1),b},createBookmarks2:function(b){return b=this.getRanges().createBookmarks2(b),this.isFake&&(b.isFake=1),b},selectBookmarks:function(b){for(var S,x=[],H=0;H<b.length;H++){var L=new CKEDITOR.dom.range(this.root);L.moveToBookmark(b[H]),x.push(L)}return b.isFake&&((S=t(x)?x[0]._getTableElement():x[0].getEnclosedNode())&&S.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),b.isFake=0)),b.isFake&&!t(x)?this.fake(S):this.selectRanges(x),this},getCommonAncestor:function(){var b=this.getRanges();return b.length?b[0].startContainer.getCommonAncestor(b[b.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var b=this.getNative();try{b&&b[m?"empty":"removeAllRanges"]()}catch(x){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function v(E,R){for(var A,F;(E=E.getParent())&&!E.equals(R);)if(E.getAttribute("data-nostyle"))A=E;else if(!F){var $=E.getAttribute("contentEditable");"false"==$?A=E:"true"==$&&(F=1)}return A}function t(E,R,A,F){return(E.getPosition(R)|F)==F&&(!A.childRule||A.childRule(E))}function c(E){var R=E.document;if(E.collapsed)R=g(this,R),E.insertNode(R),E.moveToPosition(R,CKEDITOR.POSITION_BEFORE_END);else{var $,A=this.element,F=this._.definition,w=(D=F.ignoreReadonly)||F.includeReadonly;null==w&&(w=E.root.getCustomData("cke_includeReadonly"));var P=CKEDITOR.dtd[A];P||($=!0,P=CKEDITOR.dtd.span),E.enlarge(CKEDITOR.ENLARGE_INLINE,1),E.trim();var Z,z=E.createBookmark(),W=z.startNode,G=z.endNode,J=W;if(!D){var D=v(W,ee=E.getCommonAncestor()),ee=v(G,ee);D&&(J=D.getNextSourceNode(!0)),ee&&(G=ee)}for(J.getPosition(G)==CKEDITOR.POSITION_FOLLOWING&&(J=0);J;){if(D=!1,J.equals(G))J=null,D=!0;else{ee=(M=J.type==CKEDITOR.NODE_ELEMENT?J.getName():null)&&"false"==J.getAttribute("contentEditable");var B=M&&J.getAttribute("data-nostyle");if(M&&J.data("cke-bookmark")||J.type===CKEDITOR.NODE_COMMENT){J=J.getNextSourceNode(!0);continue}if(ee&&w&&CKEDITOR.dtd.$block[M])for(var q=void 0,Y=0,V=(j=(U=s(V=J)).length)&&new CKEDITOR.dom.range(V.getDocument());Y<j;++Y){q=U[Y];var X=CKEDITOR.filter.instances[q.data("cke-filter")];(!X||X.check(this))&&(V.selectNodeContents(q),c.call(this,V))}if(U=M?!P[M]||B||ee&&!w?0:t(J,G,F,H):1){if(U=F,j=A,Y=$,!(q=J.getParent())||!(q.getDtd()||CKEDITOR.dtd.span)[j]&&!Y||U.parentRule&&!U.parentRule(q))D=!0;else if(Z||M&&CKEDITOR.dtd.$removeEmpty[M]&&(J.getPosition(G)|H)!=H||(Z=E.clone()).setStartBefore(J),(M=J.type)==CKEDITOR.NODE_TEXT||ee||M==CKEDITOR.NODE_ELEMENT&&!J.getChildCount()){for(var Q,M=J;(D=!M.getNext(x))&&P[(Q=M.getParent()).getName()]&&t(Q,W,F,L);)M=Q;Z.setEndAfter(M)}}else D=!0;J=J.getNextSourceNode(B||ee)}if(D&&Z&&!Z.collapsed){ee=(D=g(this,R)).hasAttributes(),B=Z.getCommonAncestor(),M={};for(var te,ne,ie,U={},j=(q={},{});D&&B;){if(B.getName()==A){for(te in F.attributes)!j[te]&&(ie=B.getAttribute(ne))&&(D.getAttribute(te)==ie?U[te]=1:j[te]=1);for(ne in F.styles)!q[ne]&&(ie=B.getStyle(ne))&&(D.getStyle(ne)==ie?M[ne]=1:q[ne]=1)}B=B.getParent()}for(te in U)D.removeAttribute(te);for(ne in M)D.removeStyle(ne);ee&&!D.hasAttributes()&&(D=null),D?(Z.extractContents().appendTo(D),Z.insertNode(D),h.call(this,D),D.mergeSiblings(),CKEDITOR.env.ie||D.$.normalize()):(D=new CKEDITOR.dom.element("span"),Z.extractContents().appendTo(D),Z.insertNode(D),h.call(this,D),D.remove(!0)),Z=null}}E.moveToBookmark(z),E.shrink(CKEDITOR.SHRINK_TEXT),E.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function o(E){function R(){for(var Z=new CKEDITOR.dom.elementPath(F.getParent()),ee=new CKEDITOR.dom.elementPath(G.getParent()),M=null,B=null,U=0;U<Z.elements.length;U++){var q=Z.elements[U];if(q==Z.block||q==Z.blockLimit)break;J.checkElementRemovable(q,!0)&&(M=q)}for(U=0;U<ee.elements.length&&(q=ee.elements[U])!=ee.block&&q!=ee.blockLimit;U++)J.checkElementRemovable(q,!0)&&(B=q);B&&G.breakParent(B),M&&F.breakParent(M)}E.enlarge(CKEDITOR.ENLARGE_INLINE,1);var A=E.createBookmark(),F=A.startNode,$=this._.definition.alwaysRemoveElement;if(E.collapsed){for(var w,z,D=new CKEDITOR.dom.elementPath(F.getParent(),E.root),P=0;P<D.elements.length&&(z=D.elements[P])&&z!=D.block&&z!=D.blockLimit;P++)if(this.checkElementRemovable(z)){var W;!$&&E.collapsed&&(E.checkBoundaryOfElement(z,CKEDITOR.END)||(W=E.checkBoundaryOfElement(z,CKEDITOR.START)))?(w=z).match=W?"start":"end":(z.mergeSiblings(),z.is(this.element)?u.call(this,z):T(z,K(this)[z.getName()]))}if(w){for($=F,P=0;!(z=D.elements[P]).equals(w);P++)z.match||((z=z.clone()).append($),$=z);$["start"==w.match?"insertBefore":"insertAfter"](w)}}else{var G=A.endNode,J=this;for(R(),D=F;!D.equals(G);)w=D.getNextSourceNode(),D.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(D)&&(D.getName()==this.element?u.call(this,D):T(D,K(this)[D.getName()]),w.type==CKEDITOR.NODE_ELEMENT&&w.contains(F)&&(R(),w=F.getNext())),D=w}E.moveToBookmark(A),E.shrink(CKEDITOR.NODE_ELEMENT,!0)}function s(E){var R=[];return E.forEach(function(A){if("true"==A.getAttribute("contenteditable"))return R.push(A),!1},CKEDITOR.NODE_ELEMENT,!0),R}function a(E){var R=E.getEnclosedNode()||E.getCommonAncestor(!1,!0);(E=new CKEDITOR.dom.elementPath(R,E.root).contains(this.element,1))&&!E.isReadOnly()&&I(E,this)}function f(E){var R=E.getCommonAncestor(!0,!0);if(E=new CKEDITOR.dom.elementPath(R,E.root).contains(this.element,1)){var A=(R=this._.definition).attributes;if(A)for(var F in A)E.removeAttribute(F,A[F]);if(R.styles)for(var $ in R.styles)R.styles.hasOwnProperty($)&&E.removeStyle($)}}function d(E){var R=E.createBookmark(!0),A=E.createIterator();A.enforceRealBlocks=!0,this._.enterMode&&(A.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var F,$=E.document;F=A.getNextParagraph();)!F.isReadOnly()&&(!A.activeFilter||A.activeFilter.check(this))&&l(F,g(this,$,F));E.moveToBookmark(R)}function i(E){var F,$,R=E.createBookmark(1),A=E.createIterator();for(A.enforceRealBlocks=!0,A.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;F=A.getNextParagraph();)this.checkElementRemovable(F)&&(F.is("pre")?(($=this._.enterMode==CKEDITOR.ENTER_BR?null:E.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&F.copyAttributes($),l(F,$)):u.call(this,F));E.moveToBookmark(R)}function l(E,R){(A=!R)&&(R=E.getDocument().createElement("div"),E.copyAttributes(R));var A,P,F=R&&R.is("pre"),$=E.is("pre"),D=!F&&$;if(F&&!$){if($=R,(D=E.getBogus())&&D.remove(),D=(D=(D=(D=e(D=E.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var w=E.getDocument().createElement("div");w.append($),$.$.outerHTML="<pre>"+D+"</pre>",$.copyAttributes(w.getFirst()),$=w.getFirst().remove()}else $.setHtml(D);R=$}else D?R=function n(E,R){var A;1<E.length&&(A=new CKEDITOR.dom.documentFragment(R.getDocument()));for(var F=0;F<E.length;F++){var $=e($=($=E[F]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");if($=e($,/\n$/,""),$=e($,/^[ \t]+|[ \t]+$/g,function(w,P){return 1==w.length?"&nbsp;":P?" "+CKEDITOR.tools.repeat("&nbsp;",w.length-1):CKEDITOR.tools.repeat("&nbsp;",w.length-1)+" "}),$=($=$.replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,function(w){return CKEDITOR.tools.repeat("&nbsp;",w.length-1)+" "}),A){var D=R.clone();D.setHtml($),A.append(D)}else R.setHtml($)}return A||R}(A?[E.getHtml()]:function r(E){var R=[];return e(E.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(A,F,$){return F+"</pre>"+$+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(A,F){R.push(F)}),R}(E),R):E.moveChildren(R);R.replace(E),F?(P=(A=R).getPrevious(S))&&P.type==CKEDITOR.NODE_ELEMENT&&P.is("pre")&&(F=e(P.getHtml(),/\n$/,"")+"\n\n"+e(A.getHtml(),/^\n/,""),CKEDITOR.env.ie?A.$.outerHTML="<pre>"+F+"</pre>":A.setHtml(F),P.remove()):A&&m(R)}function e(E,R,A){var F="",$="";return E=E.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(D,w,P){return w&&(F=w),P&&($=P),""}),F+E.replace(R,A)+$}function u(E,R){var w,A=(F=this._.definition).attributes,F=F.styles,$=K(this)[E.getName()],D=CKEDITOR.tools.isEmpty(A)&&CKEDITOR.tools.isEmpty(F);for(w in A)("class"!=w&&!this._.definition.fullMatch||E.getAttribute(w)==O(w,A[w]))&&(R&&"data-"==w.slice(0,5)||(D=E.hasAttribute(w),E.removeAttribute(w)));for(var P in F)this._.definition.fullMatch&&E.getStyle(P)!=O(P,F[P],!0)||(D=D||!!E.getStyle(P),E.removeStyle(P));T(E,$,C[E.getName()]),D&&(this._.definition.alwaysRemoveElement?m(E,1):!CKEDITOR.dtd.$block[E.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!E.hasAttributes()?m(E):E.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function h(E){for(var F,R=K(this),A=E.getElementsByTag(this.element),$=A.count();0<=--$;)(F=A.getItem($)).isReadOnly()||u.call(this,F,!0);for(var D in R)if(D!=this.element)for($=(A=E.getElementsByTag(D)).count()-1;0<=$;$--)(F=A.getItem($)).isReadOnly()||T(F,R[D])}function T(E,R,A){if(R=R&&R.attributes)for(var F=0;F<R.length;F++){var D,$=R[F][0];if(D=E.getAttribute($)){var w=R[F][1];(null===w||w.test&&w.test(D)||"string"==typeof w&&D==w)&&E.removeAttribute($)}}A||m(E)}function m(E,R){if(!E.hasAttributes()||R)if(CKEDITOR.dtd.$block[E.getName()]){var A=E.getPrevious(S),F=E.getNext(S);!A||A.type!=CKEDITOR.NODE_TEXT&&A.isBlockBoundary({br:1})||E.append("br",1),!F||F.type!=CKEDITOR.NODE_TEXT&&F.isBlockBoundary({br:1})||E.append("br"),E.remove(!0)}else A=E.getFirst(),F=E.getLast(),E.remove(!0),A&&(A.type==CKEDITOR.NODE_ELEMENT&&A.mergeSiblings(),F&&!A.equals(F)&&F.type==CKEDITOR.NODE_ELEMENT&&F.mergeSiblings())}function g(E,R,A){var F;return"*"==(F=E.element)&&(F="span"),F=new CKEDITOR.dom.element(F,R),A&&A.copyAttributes(F),F=I(F,E),R.getCustomData("doc_processing_style")&&F.hasAttribute("id")?F.removeAttribute("id"):R.setCustomData("doc_processing_style",1),F}function I(E,R){var A=(F=R._.definition).attributes,F=CKEDITOR.style.getStyleText(F);if(A)for(var $ in A)E.setAttribute($,A[$]);return F&&E.setAttribute("style",F),E.getDocument().removeCustomData("doc_processing_style"),E}function _(E,R){for(var A in E)E[A]=E[A].replace(b,function(F,$){return R[$]})}function K(E){if(E._.overrides)return E._.overrides;var R=E._.overrides={},A=E._.definition.overrides;if(A){CKEDITOR.tools.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var D,w;if("string"==typeof($=A[F])?D=$.toLowerCase():(D=$.element?$.element.toLowerCase():E.element,w=$.attributes),$=R[D]||(R[D]={}),w){var P,$=$.attributes=$.attributes||[];for(P in w)$.push([P.toLowerCase(),w[P]])}}}return R}function O(E,R,A){var F=new CKEDITOR.dom.element("span");return F[A?"setStyle":"setAttribute"](E,R),F[A?"getStyle":"getAttribute"](E)}function p(E,R){function A($,D){return"font-family"==D.toLowerCase()?$.replace(/["']/g,""):$}for(var F in"string"==typeof E&&(E=CKEDITOR.tools.parseCssText(E)),"string"==typeof R&&(R=CKEDITOR.tools.parseCssText(R,!0)),E)if(!(F in R)||A(R[F],F)!=A(E[F],F)&&"inherit"!=E[F]&&"inherit"!=R[F])return!1;return!0}function y(E,R,A){var $,D,F=E.getRanges();if(R=R?this.removeFromRange:this.applyToRange,E.isFake&&E.isInTable())for($=[],D=0;D<F.length;D++)$.push(F[D].clone());for(var w=F.createIterator();D=w.getNextRange();)R.call(this,D,A);E.selectRanges($||F)}var C={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},N={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},k=/\s*(?:;\s*|$)/,b=/#\((.+?)\)/g,x=CKEDITOR.dom.walker.bookmark(0,1),S=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(E,R){if("string"==typeof E.type)return new CKEDITOR.style.customHandlers[E.type](E);var A=E.attributes;A&&A.style&&(E.styles=CKEDITOR.tools.extend({},E.styles,CKEDITOR.tools.parseCssText(A.style)),delete A.style),R&&(_((E=CKEDITOR.tools.clone(E)).attributes,R),_(E.styles,R)),A=this.element=E.element?"string"==typeof E.element?E.element.toLowerCase():E.element:"*",this.type=E.type||(C[A]?CKEDITOR.STYLE_BLOCK:N[A]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:E}},CKEDITOR.style.prototype={apply:function(R){if(R instanceof CKEDITOR.dom.document)return y.call(this,R.getSelection());if(this.checkApplicable(R.elementPath(),R)){var A=this._.enterMode;A||(this._.enterMode=R.activeEnterMode),y.call(this,R.getSelection(),0,R),this._.enterMode=A}},remove:function(R){if(R instanceof CKEDITOR.dom.document)return y.call(this,R.getSelection(),1);if(this.checkApplicable(R.elementPath(),R)){var A=this._.enterMode;A||(this._.enterMode=R.activeEnterMode),y.call(this,R.getSelection(),1,R),this._.enterMode=A}},applyToRange:function(R){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?d:this.type==CKEDITOR.STYLE_OBJECT?a:null,this.applyToRange(R)},removeFromRange:function(R){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?o:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?f:null,this.removeFromRange(R)},applyToObject:function(R){I(R,this)},checkActive:function(R,A){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(R.block||R.blockLimit,!0,A);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var D,F=R.elements,$=0;$<F.length;$++)if(D=F[$],this.type!=CKEDITOR.STYLE_INLINE||D!=R.block&&D!=R.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var w=D.getName();if(!("string"==typeof this.element?w==this.element:w in this.element))continue}if(this.checkElementRemovable(D,!0,A))return!0}}return!1},checkApplicable:function(R,A,F){if(A&&A instanceof CKEDITOR.filter&&(F=A),F&&!F.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!R.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!R.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(R,A){var F=this._.definition;if(!R||!F.ignoreReadonly&&R.isReadOnly())return!1;var $=R.getName();if("string"==typeof this.element?$==this.element:$ in this.element){if(!A&&!R.hasAttributes())return!0;if($=F._AC)F=$;else{$={};var D=0,w=F.attributes;if(w)for(var P in w)D++,$[P]=w[P];(P=CKEDITOR.style.getStyleText(F))&&($.style||D++,$.style=P),$._length=D,F=F._AC=$}if(!F._length)return!0;for(var z in F)if("_length"!=z)if($=R.getAttribute(z)||"","style"==z?p(F[z],$):F[z]==$){if(!A)return!0}else if(A)return!1;if(A)return!0}return!1},checkElementRemovable:function(R,A,F){if(this.checkElementMatch(R,A,F))return!0;if(A=K(this)[R.getName()]){var $;if(!(A=A.attributes))return!0;for(F=0;F<A.length;F++)if($=R.getAttribute($=A[F][0])){var D=A[F][1];if(null===D)return!0;if("string"==typeof D){if($==D)return!0}else if(D.test($))return!0}}return!1},buildPreview:function(R){var A=this._.definition,$=[],F=A.element;"bdo"==F&&(F="span"),$=["<",F];var D=A.attributes;if(D)for(var w in D)$.push(" ",w,'="',D[w],'"');return(D=CKEDITOR.style.getStyleText(A))&&$.push(' style="',D,'"'),$.push(">",R||A.name,"</",F,">"),$.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(E){if(R=E._ST)return R;var R=E.styles,A=E.attributes&&E.attributes.style||"",F="";for(var $ in A.length&&(A=A.replace(k,";")),R){var D=R[$],w=($+":"+D).replace(k,";");"inherit"==D?F+=w:A+=w}return A.length&&(A=CKEDITOR.tools.normalizeCssText(A,!0)),E._ST=A+F},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(E){var R=function(F){this._={definition:F},this.setup&&this.setup(F)};return R.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},E,!0),this.customHandlers[E.type]=R};var H=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,L=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(v,t){this.requiredContent=this.allowedContent=this.style=v,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(v){v.focus(),this.state==CKEDITOR.TRISTATE_OFF?v.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&v.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(v,t,c){CKEDITOR.stylesSet.addExternal(v,t,""),CKEDITOR.stylesSet.load(v,c)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(t,c){var o=this._.styleStateChangeCallbacks;o||(o=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(s){for(var a=0;a<o.length;a++){var f=o[a],d=f.style.checkActive(s.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;f.fn.call(this,d)}})),o.push({style:t,fn:c})},applyStyle:function(t){t.apply(this)},removeStyle:function(t){t.remove(this)},getStylesSet:function(t){if(this._.stylesDefinitions)t(this._.stylesDefinitions);else{var c=this;if(!1===(o=c.config.stylesCombo_stylesSet||c.config.stylesSet))t(null);else if(o instanceof Array)c._.stylesDefinitions=o,t(o);else{o||(o="default");var o,s=(o=o.split(":"))[0];CKEDITOR.stylesSet.addExternal(s,o[1]?o.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(s,function(f){c._.stylesDefinitions=f[s],t(c._.stylesDefinitions)})}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var v=CKEDITOR.getUrl("vendor/promise.js");CKEDITOR.scriptLoader.load(v,function(t){t?CKEDITOR.tools.promise=ES6Promise:CKEDITOR.error("no-vendor-lib",{path:v})})}}(),CKEDITOR.dom.comment=function(v,t){"string"==typeof v&&(v=(t?t.$:document).createComment(v)),CKEDITOR.dom.domObject.call(this,v)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var c,v={},t={};for(c in CKEDITOR.dtd.$blockLimit)c in CKEDITOR.dtd.$list||(v[c]=1);for(c in CKEDITOR.dtd.$block)c in CKEDITOR.dtd.$blockLimit||c in CKEDITOR.dtd.$empty||(t[c]=1);CKEDITOR.dom.elementPath=function(o,s){var l,a=null,f=null,d=[],i=o;s=s||o.getDocument().getBody(),i||(i=s);do{if(i.type==CKEDITOR.NODE_ELEMENT){if(d.push(i),!this.lastElement&&(this.lastElement=i,i.is(CKEDITOR.dtd.$object)||"false"==i.getAttribute("contenteditable")))continue;if(i.equals(s))break;if(!f&&(l=i.getName(),"true"==i.getAttribute("contenteditable")?f=i:!a&&t[l]&&(a=i),v[l])){if(l=!a&&"div"==l){e:{for(var r=0,e=(l=i.getChildren()).count();r<e;r++){var n=l.getItem(r);if(n.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[n.getName()]){l=!0;break e}}l=!1}l=!l}l?a=i:f=i}}}while(i=i.getParent());f||(f=s),this.block=a,this.blockLimit=f,this.root=s,this.elements=d}}(),CKEDITOR.dom.elementPath.prototype={compare:function(t){var c=this.elements;if(!(t=t&&t.elements)||c.length!=t.length)return!1;for(var o=0;o<c.length;o++)if(!c[o].equals(t[o]))return!1;return!0},contains:function(t,c,o){var a,s=0;"string"==typeof t&&(a=function(l){return l.getName()==t}),t instanceof CKEDITOR.dom.element?a=function(l){return l.equals(t)}:CKEDITOR.tools.isArray(t)?a=function(l){return-1<CKEDITOR.tools.indexOf(t,l.getName())}:"function"==typeof t?a=t:"object"==typeof t&&(a=function(l){return l.getName()in t});var f=this.elements,d=f.length;for(c&&(o?s+=1:--d),o&&(f=Array.prototype.slice.call(f,0)).reverse();s<d;s++)if(a(f[s]))return f[s];return null},isContextFor:function(t){return!(t in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[t]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(v,t){"string"==typeof v&&(v=(t?t.$:document).createTextNode(v)),this.$=v},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(t){this.$.nodeValue=t},split:function(t){var c=this.$.parentNode,o=c.childNodes.length,s=this.getLength(),a=this.getDocument(),f=new CKEDITOR.dom.text(this.$.splitText(t),a);return c.childNodes.length==o&&(t>=s?(f=a.createText("")).insertAfter(this):((t=a.createText("")).insertAfter(f),t.remove())),f},substring:function(t,c){return"number"!=typeof c?this.$.nodeValue.substr(t):this.$.nodeValue.substring(t,c)}}),function(){function v(c,o,s){var a=c.serializable,f=o[s?"endContainer":"startContainer"],d=s?"endOffset":"startOffset",i=a?o.document.getById(c.startNode):c.startNode;return c=a?o.document.getById(c.endNode):c.endNode,f.equals(i.getPrevious())?(o.startOffset=o.startOffset-f.getLength()-c.getPrevious().getLength(),f=c.getNext()):f.equals(c.getPrevious())&&(o.startOffset-=f.getLength(),f=c.getNext()),f.equals(i.getParent())&&o[d]++,f.equals(c.getParent())&&o[d]++,o[s?"endContainer":"startContainer"]=f,o}CKEDITOR.dom.rangeList=function(c){return c instanceof CKEDITOR.dom.rangeList?c:(c?c instanceof CKEDITOR.dom.range&&(c=[c]):c=[],CKEDITOR.tools.extend(c,t))};var t={createIterator:function(){var f,o=this,s=CKEDITOR.dom.walker.bookmark(),a=[];return{getNextRange:function(i){var l=o[f=void 0===f?0:f+1];if(l&&1<o.length){if(!f)for(var r=o.length-1;0<=r;r--)a.unshift(o[r].createBookmark(!0));if(i)for(var e=0;o[f+e+1];){var n=l.document;for(i=0,r=n.getById(a[e].endNode),n=n.getById(a[e+1].startNode);;){if(r=r.getNextSourceNode(!1),n.equals(r))i=1;else if(s(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary())continue;break}if(!i)break;e++}for(l.moveToBookmark(a.shift());e--;)(r=o[++f]).moveToBookmark(a.shift()),l.setEnd(r.endContainer,r.endOffset)}return l}}},createBookmarks:function(o){for(var a,s=[],f=0;f<this.length;f++){s.push(a=this[f].createBookmark(o,!0));for(var d=f+1;d<this.length;d++)this[d]=v(a,this[d]),this[d]=v(a,this[d],!0)}return s},createBookmarks2:function(o){for(var s=[],a=0;a<this.length;a++)s.push(this[a].createBookmark2(o));return s},moveToBookmarks:function(o){for(var s=0;s<this.length;s++)this[s].moveToBookmark(o[s])}}}(),function(){function v(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(l){var r=CKEDITOR.skin["ua_"+l],e=CKEDITOR.env;if(r){r=r.split(",").sort(function(T,m){return T>m?-1:1});for(var u,n=0;n<r.length;n++)if(u=r[n],e.ie&&(u.replace(/^ie/,"")==e.version||e.quirks&&"iequirks"==u)&&(u="ie"),e[u]){l+="_"+r[n];break}}return CKEDITOR.getUrl(v()+l+".css")}function c(l,r){a[l]||(CKEDITOR.document.appendStyleSheet(t(l)),a[l]=1),r&&r()}function o(l){var r=l.getById(f);return r||((r=l.getHead().append("style")).setAttribute("id",f),r.setAttribute("type","text/css")),r}function s(l,r,e){var n,u,h;if(CKEDITOR.env.webkit)for(r=r.split("}").slice(0,-1),u=0;u<r.length;u++)r[u]=r[u].split("{");for(var T=0;T<l.length;T++)if(CKEDITOR.env.webkit)for(u=0;u<r.length;u++){for(h=r[u][1],n=0;n<e.length;n++)h=h.replace(e[n][0],e[n][1]);l[T].$.sheet.addRule(r[u][0],h)}else{for(h=r,n=0;n<e.length;n++)h=h.replace(e[n][0],e[n][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?l[T].$.styleSheet.cssText+=h:l[T].$.innerHTML+=h}}var a={};CKEDITOR.skin={path:v,loadPart:function(r,e){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(v()+"skin.js"),function(){c(r,e)}):c(r,e)},getPath:function(r){return CKEDITOR.getUrl(t(r))},icons:{},addIcon:function(r,e,n,u){r=r.toLowerCase(),this.icons[r]||(this.icons[r]={path:e,offset:n||0,bgsize:u||"16px"})},getIconStyle:function(r,e,n,u,h){var T;return r&&(r=r.toLowerCase(),e&&(T=this.icons[r+"-rtl"]),T||(T=this.icons[r])),u=u||T&&T.offset,h=h||T&&T.bgsize||"16px",(r=n||T&&T.path||"")&&(r=r.replace(/'/g,"\\'")),r&&"background-image:url('"+CKEDITOR.getUrl(r)+"');background-position:0 "+u+"px;background-size:"+h+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(r){var e=o(CKEDITOR.document);return(this.setUiColor=function(n){this.uiColor=n;var u=CKEDITOR.skin.chameleon,h="",T="";"function"==typeof u&&(h=u(this,"editor"),T=u(this,"panel")),s([e],h,n=[[i,n]]),s(d,T,n)}).call(this,r)}});var f="cke_ui_color",d=[],i=/\$color/g;CKEDITOR.on("instanceLoaded",function(l){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var r=l.editor;l=function(n){if(!(n=(n.data[0]||n.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){var u=o(n);d.push(u),r.on("destroy",function(){d=CKEDITOR.tools.array.filter(d,function(h){return u!==h})}),(n=r.getUiColor())&&s([u],CKEDITOR.skin.chameleon(r,"panel"),[[i,n]])}},r.on("panelShow",l),r.on("menuShow",l),r.config.uiColor&&r.setUiColor(r.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var v=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);v.appendTo(CKEDITOR.document.getHead());try{var t=v.getComputedStyle("border-top-color"),c=v.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=c)}catch(o){CKEDITOR.env.hc=!1}v.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),v=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<v.length;t++)CKEDITOR.editor.prototype.constructor.apply(v[t][0],v[t][1]),CKEDITOR.add(v[t][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var v=function(c,o){for(var s=c.match(/[^#]./g),a=0;3>a;a++){var d,f=a;d=parseInt(s[a],16),d=("0"+(0>o?0|d*(1+o):0|d+(255-d)*o).toString(16)).slice(-2),s[f]=d}return"#"+s.join("")},t={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(c,o){var s=v(c.uiColor,.4);return s={id:"."+c.id,defaultBorder:v(s,-.2),toolbarElementsBorder:v(s,-.25),defaultBackground:s,lightBackground:v(s,.8),darkBackground:v(s,-.15),ckeButtonOn:v(s,.4),ckeResizer:v(s,-.4),ckeColorauto:v(s,.8),dialogBody:v(s,.7),dialogTab:v(s,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:v(s,-.6),menubuttonHover:v(s,.1),menubuttonIcon:v(s,.5),menubuttonIconHover:v(s,.3)},t[o].output(s).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var l,r,e,t=function(r){this._||(this._={}),this._.default=this._.initValue=r.default||"",this._.required=r.required||!1;for(var e=[this._],n=1;n<arguments.length;n++)e.push(arguments[n]);return e.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,e),this._},c={build:function(r,e,n){return new CKEDITOR.ui.dialog.textInput(r,e,n)}},o={build:function(r,e,n){return new CKEDITOR.ui.dialog[e.type](r,e,n)}},s={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(r){this.setValue(this.getInitValue(),r)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},a=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(r,e){this._.domOnChangeRegistered||(r.on("load",function(){this.getInputElement().on("change",function(){r.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",e)}},!0),f=/^on([A-Z]\w+)/,d=function(r){for(var e in r)(f.test(e)||"title"==e||"type"==e)&&delete r[e];return r},i=function(r){(r=r.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):r==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(r,e,n,u){if(!(4>arguments.length)){var h=t.call(this,e);h.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var T={role:e.role||"presentation"};e.includeLabel&&(T["aria-labelledby"]=h.labelId),CKEDITOR.ui.dialog.uiElement.call(this,r,e,n,"div",null,T,function(){var m=[],g=e.required?" cke_required":"";return"horizontal"!=e.labelLayout?m.push('<label class="cke_dialog_ui_labeled_label'+g+'" ',' id="'+h.labelId+'"',h.inputId?' for="'+h.inputId+'"':"",(e.labelStyle?' style="'+e.labelStyle+'"':"")+">",e.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',e.controlStyle?' style="'+e.controlStyle+'"':"",' role="presentation">',u.call(this,r,e),"</div>"):(g={type:"hbox",widths:e.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+g+'" id="'+h.labelId+'" for="'+h.inputId+'"'+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(e.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(e.controlStyle?' style="'+e.controlStyle+'"':"")+">"+u.call(this,r,e)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(r,g,m)),m.join("")})}},textInput:function(r,e,n){if(!(3>arguments.length)){t.call(this,e);var u=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",h={class:"cke_dialog_ui_input_"+e.type,id:u,type:e.type};e.validate&&(this.validate=e.validate),e.maxLength&&(h.maxlength=e.maxLength),e.size&&(h.size=e.size),e.inputStyle&&(h.style=e.inputStyle);var T=this,m=!1;r.on("load",function(){T.getInputElement().on("keydown",function(g){13==g.data.getKeystroke()&&(m=!0)}),T.getInputElement().on("keyup",function(g){13==g.data.getKeystroke()&&m&&(r.getButton("ok")&&setTimeout(function(){r.getButton("ok").click()},0),m=!1),T.bidi&&i.call(T,g)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,r,e,n,function(){var g=['<div class="cke_dialog_ui_input_',e.type,'" role="presentation"'];for(var I in e.width&&g.push('style="width:'+e.width+'" '),g.push("><input "),h["aria-labelledby"]=this._.labelId,this._.required&&(h["aria-required"]=this._.required),h)g.push(I+'="'+h[I]+'" ');return g.push(" /></div>"),g.join("")})}},textarea:function(r,e,n){if(!(3>arguments.length)){t.call(this,e);var u=this,h=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",T={};e.validate&&(this.validate=e.validate),T.rows=e.rows||5,T.cols=e.cols||20,T.class="cke_dialog_ui_input_textarea "+(e.class||""),void 0!==e.inputStyle&&(T.style=e.inputStyle),e.dir&&(T.dir=e.dir),u.bidi&&r.on("load",function(){u.getInputElement().on("keyup",i)},u),CKEDITOR.ui.dialog.labeledElement.call(this,r,e,n,function(){T["aria-labelledby"]=this._.labelId,this._.required&&(T["aria-required"]=this._.required);var g,m=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',h,'" '];for(g in T)m.push(g+'="'+CKEDITOR.tools.htmlEncode(T[g])+'" ');return m.push(">",CKEDITOR.tools.htmlEncode(u._.default),"</textarea></div>"),m.join("")})}},checkbox:function(r,e,n){if(!(3>arguments.length)){var u=t.call(this,e,{default:!!e.default});e.validate&&(this.validate=e.validate),CKEDITOR.ui.dialog.uiElement.call(this,r,e,n,"span",null,null,function(){var h=CKEDITOR.tools.extend({},e,{id:e.id?e.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),T=[],m=CKEDITOR.tools.getNextId()+"_label",g={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":m};return d(h),e.default&&(g.checked="checked"),void 0!==h.inputStyle&&(h.style=h.inputStyle),u.checkbox=new CKEDITOR.ui.dialog.uiElement(r,h,T,"input",null,g),T.push(' <label id="',m,'" for="',g.id,'"'+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(e.label),"</label>"),T.join("")})}},radio:function(r,e,n){if(!(3>arguments.length)){t.call(this,e),this._.default||(this._.default=this._.initValue=e.items[0][1]),e.validate&&(this.validate=e.validate);var u=[],h=this;e.role="radiogroup",e.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,r,e,n,function(){for(var T=[],m=[],g=(e.id?e.id:CKEDITOR.tools.getNextId())+"_radio",I=0;I<e.items.length;I++){var _=e.items[I],y=void 0!==_[2]?_[2]:_[0],K=void 0!==_[1]?_[1]:_[0],O=(p=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",p=CKEDITOR.tools.extend({},e,{id:p,title:null,type:null},!0),C=(y=CKEDITOR.tools.extend({},p,{title:y},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:g,value:K,"aria-labelledby":O}),N=[];h._.default==K&&(C.checked="checked"),d(p),d(y),void 0!==p.inputStyle&&(p.style=p.inputStyle),p.keyboardFocusable=!0,u.push(new CKEDITOR.ui.dialog.uiElement(r,p,N,"input",null,C)),N.push(" "),new CKEDITOR.ui.dialog.uiElement(r,y,N,"label",null,{id:O,for:C.id},_[0]),T.push(N.join(""))}return new CKEDITOR.ui.dialog.hbox(r,u,T,m),m.join("")}),this._.children=u}},button:function(r,e,n){if(arguments.length){"function"==typeof e&&(e=e(r.getParentEditor())),t.call(this,e,{disabled:e.disabled||!1}),CKEDITOR.event.implementOn(this);var u=this;r.on("load",function(){var m=this.getElement();m.on("click",function(g){u.click(),g.data.preventDefault()}),m.on("keydown",function(g){g.data.getKeystroke()in{32:1}&&(u.click(),g.data.preventDefault())}),m.unselectable()},this);var h=CKEDITOR.tools.extend({},e);delete h.style;var T=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,r,h,n,"a",null,{style:e.style,href:"javascript:void(0)",title:e.label,hidefocus:"true",class:e.class,role:"button","aria-labelledby":T},'<span id="'+T+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(e.label)+"</span>")}},select:function(r,e,n){if(!(3>arguments.length)){var u=t.call(this,e);e.validate&&(this.validate=e.validate),u.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,r,e,n,function(){var h=CKEDITOR.tools.extend({},e,{id:e.id?e.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),T=[],m=[],g={id:u.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};T.push('<div class="cke_dialog_ui_input_',e.type,'" role="presentation"'),e.width&&T.push('style="width:'+e.width+'" '),T.push(">"),void 0!==e.size&&(g.size=e.size),void 0!==e.multiple&&(g.multiple=e.multiple),d(h);for(var _,I=0;I<e.items.length&&(_=e.items[I]);I++)m.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==_[1]?_[1]:_[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(_[0]));return void 0!==h.inputStyle&&(h.style=h.inputStyle),u.select=new CKEDITOR.ui.dialog.uiElement(r,h,T,"select",null,g,m.join("")),T.push("</div>"),T.join("")})}},file:function(r,e,n){if(!(3>arguments.length)){void 0===e.default&&(e.default="");var u=CKEDITOR.tools.extend(t.call(this,e),{definition:e,buttons:[]});e.validate&&(this.validate=e.validate),r.on("load",function(){CKEDITOR.document.getById(u.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,r,e,n,function(){u.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var h=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',u.frameId,'" title="',e.label,'" src="javascript:void('];return h.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),h.push(')"></iframe>'),h.join("")})}},fileButton:function(r,e,n){var u=this;if(!(3>arguments.length)){t.call(this,e),e.validate&&(this.validate=e.validate);var h=CKEDITOR.tools.extend({},e),T=h.onClick;h.className=(h.className?h.className+" ":"")+"cke_dialog_ui_button",h.onClick=function(m){var g=e.for;!1!==(m=!!T&&T.call(this,m))&&("xhr"!==m&&r.getContentElement(g[0],g[1]).submit(),this.disable())},r.on("load",function(){r.getContentElement(e.for[0],e.for[1])._.buttons.push(u)}),CKEDITOR.ui.dialog.button.call(this,r,h,n)}},html:(l=/^\s*<[\w:]+\s+([^>]*)?>/,r=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,e=/\/$/,function(n,u,h){if(!(3>arguments.length)){var T=[],m=u.html;"<"!=m.charAt(0)&&(m="<span>"+m+"</span>");var g=u.focus;if(g){var I=this.focus;this.focus=function(){("function"==typeof g?g:I).call(this),this.fire("focus")},u.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,n,u,T,"span",null,null,""),T=T.join("").match(l),m=m.match(r)||["","",""],e.test(m[1])&&(m[1]=m[1].slice(0,-1),m[2]="/"+m[2]),h.push([m[1]," ",T[1]||"",m[2]].join(""))}}),fieldset:function(r,e,n,u,h){var T=h.label;this._={children:e},CKEDITOR.ui.dialog.uiElement.call(this,r,h,u,"fieldset",null,null,function(){var m=[];T&&m.push("<legend"+(h.labelStyle?' style="'+h.labelStyle+'"':"")+">"+T+"</legend>");for(var g=0;g<n.length;g++)m.push(n[g]);return m.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(r){var e=CKEDITOR.document.getById(this._.labelId);return 1>e.getChildCount()?new CKEDITOR.dom.text(r,CKEDITOR.document).appendTo(e):e.getChild(0).$.nodeValue=r,this},getLabel:function(){var r=CKEDITOR.document.getById(this._.labelId);return!r||1>r.getChildCount()?"":r.getChild(0).getText()},eventProcessors:a},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var r=this.getElement();r&&r.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(r,e){this.on("click",function(){e.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var r=this.selectParentTab();setTimeout(function(){var e=r.getInputElement();e&&e.$.focus()},0)},select:function(){var r=this.selectParentTab();setTimeout(function(){var e=r.getInputElement();e&&(e.$.focus(),e.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(r){if(this.bidi){var e=r&&r.charAt(0);(e="\u202a"==e?"ltr":"\u202b"==e?"rtl":null)&&(r=r.slice(1)),this.setDirectionMarker(e)}return r||(r=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var r=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&r){var e=this.getDirectionMarker();e&&(r=("ltr"==e?"\u202a":"\u202b")+r)}return r},setDirectionMarker:function(r){var e=this.getInputElement();r?e.setAttributes({dir:r,"data-cke-dir-marker":r}):this.getDirectionMarker()&&e.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},s,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(r,e,n){var u=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),h=this.getInputElement().$;return u.$.text=r,u.$.value=null==e?r:e,null==n?CKEDITOR.env.ie?h.add(u.$):h.add(u.$,null):h.add(u.$,n),this},remove:function(r){return this.getInputElement().$.remove(r),this},clear:function(){for(var r=this.getInputElement().$;0<r.length;)r.remove(0);return this},keyboardFocusable:!0},s,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(r,e){this.getInputElement().$.checked=r,!e&&this.fire("change",{value:r})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(r,e){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?a.onChange.apply(this,arguments):(r.on("load",function(){var n=this._.checkbox.getElement();n.on("propertychange",function(u){"checked"==(u=u.data.$).propertyName&&this.fire("change",{value:n.$.checked})},this)},this),this.on("change",e),null)}},keyboardFocusable:!0},s,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(r,e){for(var u,n=this._.children,h=0;h<n.length&&(u=n[h]);h++)u.getElement().$.checked=u.getValue()==r;!e&&this.fire("change",{value:r})},getValue:function(){for(var r=this._.children,e=0;e<r.length;e++)if(r[e].getElement().$.checked)return r[e].getValue();return null},accessKeyUp:function(){var e,r=this._.children;for(e=0;e<r.length;e++)if(r[e].getElement().$.checked)return void r[e].getElement().focus();r[0].getElement().focus()},eventProcessors:{onChange:function(r,e){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?a.onChange.apply(this,arguments):(r.on("load",function(){for(var n=this._.children,u=this,h=0;h<n.length;h++)n[h].getElement().on("propertychange",function(T){"checked"==(T=T.data.$).propertyName&&this.$.checked&&u.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",e),null)}}},s,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,s,{getInputElement:function(){var r=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<r.$.forms.length?new CKEDITOR.dom.element(r.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(r){var n,h,e=/^on([A-Z]\w+)/,u=function(m,g,I,_){m.on("formLoaded",function(){m.getInputElement().on(I,_,m)})};for(h in r)(n=h.match(e))&&(this.eventProcessors[h]?this.eventProcessors[h].call(this,this._.dialog,r[h]):u(this,0,n[1].toLowerCase(),r[h]));return this},reset:function(){function r(){n.$.open();var _="";u.size&&(_=u.size-(CKEDITOR.env.ie?7:0));var K=e.frameId+"_input";for(n.$.write(['<html dir="'+g+'" lang="'+I+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+g+'" lang="'+I+'" action="',CKEDITOR.tools.htmlEncode(u.action),'"><label id="',e.labelId,'" for="',K,'" style="display:none">',CKEDITOR.tools.htmlEncode(u.label),'</label><input style="width:100%" id="',K,'" aria-labelledby="',e.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(u.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<_?_:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+T+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+m+")}","<\/script>"].join("")),n.$.close(),_=0;_<h.length;_++)h[_].enable()}var e=this._,n=CKEDITOR.document.getById(e.frameId).getFrameDocument(),u=e.definition,h=e.buttons,T=this.formLoadedNumber,m=this.formUnloadNumber,g=e.dialog._.editor.lang.dir,I=e.dialog._.editor.langCode;T||(T=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),m=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(T),CKEDITOR.tools.removeFunction(m)})),CKEDITOR.env.gecko?setTimeout(r,500):r()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(r,e){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",e)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",c),CKEDITOR.dialog.addUIElement("password",c),CKEDITOR.dialog.addUIElement("tel",c),CKEDITOR.dialog.addUIElement("textarea",o),CKEDITOR.dialog.addUIElement("checkbox",o),CKEDITOR.dialog.addUIElement("radio",o),CKEDITOR.dialog.addUIElement("button",o),CKEDITOR.dialog.addUIElement("select",o),CKEDITOR.dialog.addUIElement("file",o),CKEDITOR.dialog.addUIElement("fileButton",o),CKEDITOR.dialog.addUIElement("html",o),CKEDITOR.dialog.addUIElement("fieldset",{build:function(r,e,n){for(var h,u=e.children,T=[],m=[],g=0;g<u.length&&(h=u[g]);g++){var I=[];T.push(I),m.push(CKEDITOR.dialog._.uiElementBuilders[h.type].build(r,h,I))}return new CKEDITOR.ui.dialog[e.type](r,m,T,n,e)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function v(){for(var L=this._.tabIdList.length,E=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+L,R=E-1;R>E-L;R--)if(this._.tabs[this._.tabIdList[R%L]][0].$.offsetHeight)return this._.tabIdList[R%L];return null}function t(){for(var L=this._.tabIdList.length,E=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),R=E+1;R<E+L;R++)if(this._.tabs[this._.tabIdList[R%L]][0].$.offsetHeight)return this._.tabIdList[R%L];return null}function c(L,E){for(var R=L.$.getElementsByTagName("input"),A=0,F=R.length;A<F;A++){var $=new CKEDITOR.dom.element(R[A]);"text"==$.getAttribute("type").toLowerCase()&&(E?($.setAttribute("value",$.getCustomData("fake_value")||""),$.removeCustomData("fake_value")):($.setCustomData("fake_value",$.getAttribute("value")),$.setAttribute("value","")))}}function o(L,E){var R=this.getInputElement();R&&(L?R.removeAttribute("aria-invalid"):R.setAttribute("aria-invalid",!0)),L||(this.select?this.select():this.focus()),E&&alert(E),this.fire("validated",{valid:L,msg:E})}function s(){var L=this.getInputElement();L&&L.removeAttribute("aria-invalid")}function f(L,E,R){this.element=E,this.focusIndex=R,this.tabIndex=0,this.isFocusable=function(){return!E.getAttribute("disabled")&&E.isVisible()},this.focus=function(){L._.currentFocusIndex=this.focusIndex,this.element.focus()},E.on("keydown",function(A){A.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),E.on("focus",function(){this.fire("mouseover")}),E.on("blur",function(){this.fire("mouseout")})}function i(L,E){this._={dialog:L},CKEDITOR.tools.extend(this,E)}function e(L){L.data.preventDefault(1)}function n(L){var E=CKEDITOR.document.getWindow(),$=L.config,A=CKEDITOR.skinName||L.config.skin,R=$.dialog_backgroundCoverColor||("moono-lisa"==A?"black":"white"),F=(A=$.dialog_backgroundCoverOpacity,$.baseFloatZIndex),D=($=CKEDITOR.tools.genKey(R,A,F),p[$]);D?D.show():(F=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",F,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+R,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(R="<html><body style=\\'background-color:"+R+";\\'></body></html>",F.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),F.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+R+"' );document.close();")+"})())"),F.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),F.push("</div>"),(D=CKEDITOR.dom.element.createFromHtml(F.join(""))).setOpacity(void 0!==A?A:.5),D.on("keydown",e),D.on("keypress",e),D.on("keyup",e),D.appendTo(CKEDITOR.document.getBody()),p[$]=D),L.focusManager.add(D),y=D;var w=function(){var W=E.getScrollPosition(),G=CKEDITOR.dialog._.currentTop;if(D.setStyles({left:W.x+"px",top:W.y+"px"}),G)do{W=G.getPosition(),G.move(W.x,W.y)}while(G=G._.parentDialog)};if(O=L=function(){var W=E.getViewPaneSize();D.setStyles({width:W.width+"px",height:W.height+"px"})},E.on("resize",L),L(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||D.focus(),CKEDITOR.env.ie6Compat){var P=function z(){w(),z.prevScrollHandler.apply(this,arguments)};E.$.setTimeout(function(){P.prevScrollHandler=window.onscroll||function(){},window.onscroll=P},0),w()}}function u(L){y&&(L.focusManager.remove(y),L=CKEDITOR.document.getWindow(),y.hide(),y=null,L.removeListener("resize",O),CKEDITOR.env.ie6Compat&&L.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),O=null)}var L,h=CKEDITOR.tools.cssLength,T='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(L,E){function A(U){var q=ee._.focusList;if(U=U||0,!(1>q.length)){var j=ee._.currentFocusIndex;ee._.tabBarMode&&0>U&&(j=0);try{q[j].getInputElement().$.blur()}catch(X){}var Y=j,V=1<ee._.pageCount;do{if(Y+=U,V&&!ee._.tabBarMode&&(Y==q.length||-1==Y))return ee._.tabBarMode=!0,ee._.tabs[ee._.currentTabId][0].focus(),void(ee._.currentFocusIndex=-1);if((Y=(Y+q.length)%q.length)==j)break}while(U&&!q[Y].isFocusable());q[Y].focus(),"text"==q[Y].type&&q[Y].select()}}function F(U){if(ee==CKEDITOR.dialog._.currentTop){var q=U.data.getKeystroke(),j="rtl"==L.lang.dir;if(G=J=0,9==q||q==CKEDITOR.SHIFT+9)A(q==CKEDITOR.SHIFT+9?-1:1),G=1;else if(q==CKEDITOR.ALT+121&&!ee._.tabBarMode&&1<ee.getPageCount())ee._.tabBarMode=!0,ee._.tabs[ee._.currentTabId][0].focus(),ee._.currentFocusIndex=-1,G=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],q)&&ee._.tabBarMode)q=-1!=CKEDITOR.tools.indexOf([j?39:37,38],q)?v.call(ee):t.call(ee),ee.selectPage(q),ee._.tabs[q][0].focus(),G=1;else if(13!=q&&32!=q||!ee._.tabBarMode)if(13==q)(q=U.data.getTarget()).is("a","button","select","textarea")||q.is("input")&&"button"==q.$.type||((q=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(q.click,0,q),G=1),J=1;else{if(27!=q)return;(q=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(q.click,0,q):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),J=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,A(1),G=1;$(U)}}function $(U){G?U.data.preventDefault(1):J&&U.data.stopPropagation()}var G,J,D=CKEDITOR.dialog._.dialogDefinitions[E],w=CKEDITOR.tools.clone(m),P=L.config.dialog_buttonsOrder||"OS",z=L.lang.dir,W={};if(("OS"==P&&CKEDITOR.env.mac||"rtl"==P&&"ltr"==z||"ltr"==P&&"rtl"==z)&&w.buttons.reverse(),D=CKEDITOR.tools.extend(D(L),w),D=CKEDITOR.tools.clone(D),D=new K(this,D),w=function a(L){var E=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",T).output({id:CKEDITOR.tools.getNextNumber(),editorId:L.id,langDir:L.lang.dir,langCode:L.langCode,editorDialogClass:"cke_editor_"+L.name.replace(/\./g,"\\.")+"_dialog",closeTitle:L.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),R=E.getChild([0,0,0,0,0]),A=R.getChild(0),F=R.getChild(1);return L.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(R),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(L="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+L+'" tabIndex="-1"></iframe>').appendTo(R.getParent())),A.unselectable(),F.unselectable(),{element:E,parts:{dialog:E.getChild(0),title:A,close:F,tabs:R.getChild(2),contents:R.getChild([3,0,0,0]),footer:R.getChild([3,0,1,0])}}}(L),this._={editor:L,element:w.element,name:E,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=w.parts,CKEDITOR.tools.setTimeout(function(){L.fire("ariaWidget",this.parts.contents)},0,this),(w={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==z?"right":"left"]=0,this.parts.dialog.setStyles(w),CKEDITOR.event.call(this),this.definition=D=CKEDITOR.fire("dialogDefinition",{name:E,definition:D},L).definition,!("removeDialogTabs"in L._)&&L.config.removeDialogTabs){for(w=L.config.removeDialogTabs.split(";"),z=0;z<w.length;z++)if(2==(P=w[z].split(":")).length){var Z=P[0];W[Z]||(W[Z]=[]),W[Z].push(P[1])}L._.removeDialogTabs=W}if(L._.removeDialogTabs&&(W=L._.removeDialogTabs[E]))for(z=0;z<W.length;z++)D.removeContents(W[z]);D.onLoad&&this.on("load",D.onLoad),D.onShow&&this.on("show",D.onShow),D.onHide&&this.on("hide",D.onHide),D.onOk&&this.on("ok",function(U){L.fire("saveSnapshot"),setTimeout(function(){L.fire("saveSnapshot")},0),!1===D.onOk.call(this,U)&&(U.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,D.onCancel&&this.on("cancel",function(U){!1===D.onCancel.call(this,U)&&(U.data.hide=!1)});var ee=this,M=function(q){var V,j=ee._.contents;for(V in j)for(var X in j[V])if(q.call(this,j[V][X]))return};this.on("ok",function(U){M(function(q){if(q.validate){var j=q.validate(this),Y="string"==typeof j||!1===j;return Y&&(U.data.hide=!1,U.stop()),o.call(q,!Y,"string"==typeof j?j:void 0),Y}})},this,null,0),this.on("cancel",function(U){M(function(q){if(q.isChanged())return L.config.dialog_noConfirmCancel||confirm(L.lang.common.confirmCancel)||(U.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(U){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),U.data.preventDefault()},this),this.changeFocus=A;var B=this._.element;for(L.focusManager.add(B,1),this.on("show",function(){B.on("keydown",F,this),CKEDITOR.env.gecko&&B.on("keypress",$,this)}),this.on("hide",function(){B.removeListener("keydown",F),CKEDITOR.env.gecko&&B.removeListener("keypress",$),M(function(U){s.apply(U)})}),this.on("iframeAdded",function(U){new CKEDITOR.dom.document(U.data.iframe.$.contentWindow.document).on("keydown",F,this,null,0)}),this.on("show",function(){!function R(){var U=ee._.focusList;U.sort(function(Y,V){return Y.tabIndex!=V.tabIndex?V.tabIndex-Y.tabIndex:Y.focusIndex-V.focusIndex});for(var q=U.length,j=0;j<q;j++)U[j].focusIndex=j}();var U=1<ee._.pageCount;L.config.dialog_startupFocusTab&&U?(ee._.tabBarMode=!0,ee._.tabs[ee._.currentTabId][0].focus(),ee._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=U?-1:this._.focusList.length-1,D.onFocus?(U=D.onFocus.call(this))&&U.focus():A(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var U=this.getElement(),q=U.getFirst();q.remove(),q.appendTo(U)},this),function l(L){function E(P){var z=L.getSize(),W=CKEDITOR.document.getWindow().getViewPaneSize(),G=P.data.$.screenX,J=P.data.$.screenY,Z=G-A.x,ee=J-A.y;A={x:G,y:J},F.x+=Z,F.y+=ee,L.move(F.x+w[3]<D?-w[3]:F.x-w[1]>W.width-z.width-D?W.width-z.width+("rtl"==$.lang.dir?0:w[1]):F.x,F.y+w[0]<D?-w[0]:F.y-w[2]>W.height-z.height-D?W.height-z.height+w[2]:F.y,1),P.data.preventDefault()}function R(){if(CKEDITOR.document.removeListener("mousemove",E),CKEDITOR.document.removeListener("mouseup",R),CKEDITOR.env.ie6Compat){var P=y.getChild(0).getFrameDocument();P.removeListener("mousemove",E),P.removeListener("mouseup",R)}}var A=null,F=null,$=L.getParentEditor(),D=$.config.dialog_magnetDistance,w=CKEDITOR.skin.margins||[0,0,0,0];void 0===D&&(D=20),L.parts.title.on("mousedown",function(P){if(A={x:P.data.$.screenX,y:P.data.$.screenY},CKEDITOR.document.on("mousemove",E),CKEDITOR.document.on("mouseup",R),F=L.getPosition(),CKEDITOR.env.ie6Compat){var z=y.getChild(0).getFrameDocument();z.on("mousemove",E),z.on("mouseup",R)}P.data.preventDefault()},L)}(this),function r(L){function E(Z){var ee="rtl"==$.lang.dir,M=W.width,B=W.height,U=M+(Z.data.$.screenX-z.x)*(ee?-1:1)*(L._.moved?1:2),q=B+(Z.data.$.screenY-z.y)*(L._.moved?1:2),j=L._.element.getFirst(),Y=(j=ee&&j.getComputedStyle("right"),L.getPosition());Y.y+q>P.height&&(q=P.height-Y.y),(ee?j:Y.x)+U>P.width&&(U=P.width-(ee?j:Y.x)),(F==CKEDITOR.DIALOG_RESIZE_WIDTH||F==CKEDITOR.DIALOG_RESIZE_BOTH)&&(M=Math.max(A.minWidth||0,U-D)),(F==CKEDITOR.DIALOG_RESIZE_HEIGHT||F==CKEDITOR.DIALOG_RESIZE_BOTH)&&(B=Math.max(A.minHeight||0,q-w)),L.resize(M,B),L._.moved||L.layout(),Z.data.preventDefault()}function R(){if(CKEDITOR.document.removeListener("mouseup",R),CKEDITOR.document.removeListener("mousemove",E),G&&(G.remove(),G=null),CKEDITOR.env.ie6Compat){var Z=y.getChild(0).getFrameDocument();Z.removeListener("mouseup",R),Z.removeListener("mousemove",E)}}var A=L.definition,F=A.resizable;if(F!=CKEDITOR.DIALOG_RESIZE_NONE){var D,w,P,z,W,G,$=L.getParentEditor(),J=CKEDITOR.tools.addFunction(function(Z){W=L.getSize();var ee=L.parts.contents;ee.$.getElementsByTagName("iframe").length&&(G=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),ee.append(G)),w=W.height-L.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),D=W.width-L.parts.contents.getSize("width",1),z={x:Z.screenX,y:Z.screenY},P=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",E),CKEDITOR.document.on("mouseup",R),CKEDITOR.env.ie6Compat&&((ee=y.getChild(0).getFrameDocument()).on("mousemove",E),ee.on("mouseup",R)),Z.preventDefault&&Z.preventDefault()});L.on("load",function(){var Z="";F==CKEDITOR.DIALOG_RESIZE_WIDTH?Z=" cke_resizer_horizontal":F==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(Z=" cke_resizer_vertical"),Z=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+Z+" cke_resizer_"+$.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode($.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+J+', event )">'+("ltr"==$.lang.dir?"\u25e2":"\u25e3")+"</div>"),L.parts.footer.append(Z,1)}),$.on("destroy",function(){CKEDITOR.tools.removeFunction(J)})}}(this),new CKEDITOR.dom.text(D.title,CKEDITOR.document).appendTo(this.parts.title),z=0;z<D.contents.length;z++)(W=D.contents[z])&&this.addPage(W);for(this.parts.tabs.on("click",function(U){var q=U.data.getTarget();q.hasClass("cke_dialog_tab")&&(this.selectPage((q=q.$.id).substring(4,q.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,A(1)),U.data.preventDefault())},this),z=[],W=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:D.buttons},z).getChild(),this.parts.footer.setHtml(z.join("")),z=0;z<W.length;z++)this._.buttons[W[z].id]=W[z]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(L,E){this._.contentSize&&this._.contentSize.width==L&&this._.contentSize.height==E||(CKEDITOR.dialog.fire("resize",{dialog:this,width:L,height:E},this._.editor),this.fire("resize",{width:L,height:E},this._.editor),this.parts.contents.setStyles({width:L+"px",height:E+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:L,height:E})},getSize:function(){var E=this._.element.getFirst();return{width:E.$.offsetWidth||0,height:E.$.offsetHeight||0}},move:function(E,R,A){var F=this._.element.getFirst(),$="rtl"==this._.editor.lang.dir,D="fixed"==F.getComputedStyle("position");CKEDITOR.env.ie&&F.setStyle("zoom","100%"),D&&this._.position&&this._.position.x==E&&this._.position.y==R||(this._.position={x:E,y:R},D||(E+=(D=CKEDITOR.document.getWindow().getScrollPosition()).x,R+=D.y),$&&(D=this.getSize(),E=CKEDITOR.document.getWindow().getViewPaneSize().width-D.width-E),(R={top:(0<R?R:0)+"px"})[$?"right":"left"]=(0<E?E:0)+"px",F.setStyles(R),A&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var E=this._.element,R=this.definition;for(var A in E.getParent()&&E.getParent().equals(CKEDITOR.document.getBody())?E.setStyle("display","block"):E.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||R.width||R.minWidth,this._.contentSize&&this._.contentSize.height||R.height||R.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,n(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),E.on("keydown",N),E.on("keyup",k),this._.hasFocus=!1,R.contents)if(R.contents[A]){var F=this._.tabs[(E=R.contents[A]).id],$=E.requiredContent,D=0;if(F){for(var w in this._.contents[E.id]){var P=this._.contents[E.id][w];"hbox"!=P.type&&"vbox"!=P.type&&P.getInputElement()&&(P.requiredContent&&!this._.editor.activeFilter.check(P.requiredContent)?P.disable():(P.enable(),D++))}!D||$&&!this._.editor.activeFilter.check($)?F[0].addClass("cke_dialog_tab_disabled"):F[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),function d(L){function E(){L.layout()}var R=CKEDITOR.document.getWindow();R.on("resize",E),L.on("hide",function(){R.removeListener("resize",E)})}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(z){z.setInitValue&&z.setInitValue()})},100,this)},layout:function(){var E=this.parts.dialog,R=this.getSize(),A=CKEDITOR.document.getWindow().getViewPaneSize(),F=(A.width-R.width)/2,$=(A.height-R.height)/2;CKEDITOR.env.ie6Compat||E.setStyle("position",R.height+(0<$?$:0)>A.height||R.width+(0<F?F:0)>A.width?"absolute":"fixed"),this.move(this._.moved?this._.position.x:F,this._.moved?this._.position.y:$)},foreach:function(E){for(var R in this._.contents)for(var A in this._.contents[R])E.call(this,this._.contents[R][A]);return this},reset:(L=function(R){R.reset&&R.reset(1)},function(){return this.foreach(L),this}),setupContent:function(){var E=arguments;this.foreach(function(R){R.setup&&R.setup.apply(R,E)})},commitContent:function(){var E=arguments;this.foreach(function(R){CKEDITOR.env.ie&&this._.currentFocusIndex==R.focusIndex&&R.getInputElement().$.blur(),R.commit&&R.commit.apply(R,E)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var E=this._.element;for(E.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),x(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var R=this._.parentDialog.getElement().getFirst();R.setStyle("z-index",parseInt(R.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else u(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,E.removeListener("keydown",N),E.removeListener("keyup",k);var A=this._.editor;A.focus(),setTimeout(function(){A.focusManager.unlock(),CKEDITOR.env.iOS&&A.window.focus()},0)}delete this._.parentDialog,this.foreach(function(F){F.resetInitValue&&F.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(E){if(!E.requiredContent||this._.editor.filter.check(E.requiredContent)){for(var R=[],A=E.label?' title="'+CKEDITOR.tools.htmlEncode(E.label)+'"':"",F=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:E.elements,expand:!!E.expand,padding:E.padding,style:E.style||"width: 100%;"},R),$=this._.contents[E.id]={},D=F.getChild(),w=0;F=D.shift();)F.notAllowed||"hbox"==F.type||"vbox"==F.type||w++,$[F.id]=F,"function"==typeof F.getChild&&D.push.apply(D,F.getChild());w||(E.hidden=!0),(R=CKEDITOR.dom.element.createFromHtml(R.join(""))).setAttribute("role","tabpanel"),F=CKEDITOR.env,$="cke_"+E.id+"_"+CKEDITOR.tools.getNextNumber(),A=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",A,E.hidden?' style="display:none"':"",' id="',$,'"',F.gecko&&!F.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',E.label,"</a>"].join("")),R.setAttribute("aria-labelledby",$),this._.tabs[E.id]=[A,R],this._.tabIdList.push(E.id),!E.hidden&&this._.pageCount++,this._.lastTab=A,this.updateStyle(),R.setAttribute("name",E.id),R.appendTo(this.parts.contents),A.unselectable(),this.parts.tabs.append(A),E.accessKey&&(b(this,this,"CTRL+"+E.accessKey,H,S),this._.accessKeyMap["CTRL+"+E.accessKey]=E.id)}},selectPage:function(E){if(this._.currentTabId!=E&&!this._.tabs[E][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:E,currentPage:this._.currentTabId})){for(var R in this._.tabs){var F=this._.tabs[R][1];R!=E&&(this._.tabs[R][0].removeClass("cke_dialog_tab_selected"),F.hide()),F.setAttribute("aria-hidden",R!=E)}var $=this._.tabs[E];$[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(c($[1]),$[1].show(),setTimeout(function(){c($[1],1)},0)):$[1].show(),this._.currentTabId=E,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,E)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(E){var R=this._.tabs[E]&&this._.tabs[E][0];R&&1!=this._.pageCount&&R.isVisible()&&(E==this._.currentTabId&&this.selectPage(v.call(this)),R.hide(),this._.pageCount--,this.updateStyle())},showPage:function(E){(E=this._.tabs[E]&&this._.tabs[E][0])&&(E.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(E,R){var A=this._.contents[E];return A&&A[R]},getValueOf:function(E,R){return this.getContentElement(E,R).getValue()},setValueOf:function(E,R,A){return this.getContentElement(E,R).setValue(A)},getButton:function(E){return this._.buttons[E]},click:function(E){return this._.buttons[E].click()},disableButton:function(E){return this._.buttons[E].disable()},enableButton:function(E){return this._.buttons[E].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(E,R){if(void 0===R)this._.focusList.push(new f(this,E,R=this._.focusList.length));else{this._.focusList.splice(R,0,new f(this,E,R));for(var A=R+1;A<this._.focusList.length;A++)this._.focusList[A].focusIndex++}},setState:function(E){if(this.state!=E){if(this.state=E,E==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var R=this.getParentEditor().lang.dir,A={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==R?"right":"left"}};A.styles["margin-"+("rtl"==R?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",A),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else E==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",E)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(E,R){this._.dialogDefinitions[E]&&"function"!=typeof R||(this._.dialogDefinitions[E]=R)},exists:function(E){return!!this._.dialogDefinitions[E]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(E,R,A){return!((E=E.config.removeDialogTabs)&&E.match(new RegExp("(?:^|;)"+R+":"+A+"(?:$|;)","i")))},okButton:function(){var L=function(R,A){return A=A||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:R.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function($){!1!==($=$.data.dialog).fire("ok",{hide:!0}).hide&&$.hide()}},A,!0)};return L.type="button",L.override=function(E){return CKEDITOR.tools.extend(function(R){return L(R,E)},{type:"button"},!0)},L}(),cancelButton:function(){var L=function(R,A){return A=A||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:R.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function($){!1!==($=$.data.dialog).fire("cancel",{hide:!0}).hide&&$.hide()}},A,!0)};return L.type="button",L.override=function(E){return CKEDITOR.tools.extend(function(R){return L(R,E)},{type:"button"},!0)},L}(),addUIElement:function(E,R){this._.uiElementBuilders[E]=R}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var m={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},g=function L(E,R,A){for(var $,F=0;$=E[F];F++)if($.id==R||A&&$[A]&&($=L($[A],R,A)))return $;return null},I=function L(E,R,A,F,$){if(A){for(var w,D=0;w=E[D];D++){if(w.id==A)return E.splice(D,0,R),R;if(F&&w[F]&&(w=L(w[F],R,A,F,!0)))return w}if($)return null}return E.push(R),R},_=function L(E,R,A){for(var $,F=0;$=E[F];F++){if($.id==R)return E.splice(F,1);if(A&&$[A]&&($=L($[A],R,A)))return $}return null},K=function(E,R){this.dialog=E;for(var $,A=R.contents,F=0;$=A[F];F++)A[F]=$&&new i(E,$);CKEDITOR.tools.extend(this,R)};K.prototype={getContents:function(E){return g(this.contents,E)},getButton:function(E){return g(this.buttons,E)},addContents:function(E,R){return I(this.contents,E,R)},addButton:function(E,R){return I(this.buttons,E,R)},removeContents:function(E){_(this.contents,E)},removeButton:function(E){_(this.buttons,E)}},i.prototype={get:function(E){return g(this.elements,E,"children")},add:function(E,R){return I(this.elements,E,R,"children")},remove:function(E){_(this.elements,E,"children")}};var O,y,p={},C={},N=function(E){var R=E.data.$.ctrlKey||E.data.$.metaKey,A=E.data.$.altKey,F=E.data.$.shiftKey,$=String.fromCharCode(E.data.$.keyCode);(R=C[(R?"CTRL+":"")+(A?"ALT+":"")+(F?"SHIFT+":"")+$])&&R.length&&((R=R[R.length-1]).keydown&&R.keydown.call(R.uiElement,R.dialog,R.key),E.data.preventDefault())},k=function(E){var R=E.data.$.ctrlKey||E.data.$.metaKey,A=E.data.$.altKey,F=E.data.$.shiftKey,$=String.fromCharCode(E.data.$.keyCode);(R=C[(R?"CTRL+":"")+(A?"ALT+":"")+(F?"SHIFT+":"")+$])&&R.length&&(R=R[R.length-1]).keyup&&(R.keyup.call(R.uiElement,R.dialog,R.key),E.data.preventDefault())},b=function(E,R,A,F,$){(C[A]||(C[A]=[])).push({uiElement:E,dialog:R,key:A,keyup:$||E.accessKeyUp,keydown:F||E.accessKeyDown})},x=function(E){for(var R in C){for(var A=C[R],F=A.length-1;0<=F;F--)A[F].dialog!=E&&A[F].uiElement!=E||A.splice(F,1);0===A.length&&delete C[R]}},S=function(E,R){E._.accessKeyMap[R]&&E.selectPage(E._.accessKeyMap[R])},H=function(){};CKEDITOR.ui.dialog={uiElement:function(E,R,A,F,$,D,w){if(!(4>arguments.length)){var P=(F.call?F(R):F)||"div",z=["<",P," "],W=($&&$.call?$(R):$)||{},G=(D&&D.call?D(R):D)||{},J=(w&&w.call?w.call(this,E,R):w)||"",Z=this.domId=G.id||CKEDITOR.tools.getNextId()+"_uiElement";R.requiredContent&&!E.getParentEditor().filter.check(R.requiredContent)&&(W.display="none",this.notAllowed=!0),G.id=Z;var ee={};R.type&&(ee["cke_dialog_ui_"+R.type]=1),R.className&&(ee[R.className]=1),R.disabled&&(ee.cke_disabled=1);var M=G.class&&G.class.split?G.class.split(" "):[];for(Z=0;Z<M.length;Z++)M[Z]&&(ee[M[Z]]=1);for(Z in M=[],ee)M.push(Z);for(Z in G.class=M.join(" "),R.title&&(G.title=R.title),ee=(R.style||"").split(";"),R.align&&(W["margin-left"]="left"==(M=R.align)?0:"auto",W["margin-right"]="right"==M?0:"auto"),W)ee.push(Z+":"+W[Z]);for(R.hidden&&ee.push("display:none"),Z=ee.length-1;0<=Z;Z--)""===ee[Z]&&ee.splice(Z,1);for(Z in 0<ee.length&&(G.style=(G.style?G.style+"; ":"")+ee.join("; ")),G)z.push(Z+'="'+CKEDITOR.tools.htmlEncode(G[Z])+'" ');z.push(">",J,"</",P,">"),A.push(z.join("")),(this._||(this._={})).dialog=E,"boolean"==typeof R.isChanged&&(this.isChanged=function(){return R.isChanged}),"function"==typeof R.isChanged&&(this.isChanged=R.isChanged),"function"==typeof R.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(U){return function(q){U.call(this,R.setValue.call(this,q))}})),"function"==typeof R.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(U){return function(){return R.getValue.call(this,U.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(R),this.accessKeyUp&&this.accessKeyDown&&R.accessKey&&b(this,E,"CTRL+"+R.accessKey);var B=this;E.on("load",function(){var U=B.getInputElement();if(U){var q=B.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";U.on("focus",function(){E._.tabBarMode=!1,E._.hasFocus=!0,B.fire("focus"),q&&this.addClass(q)}),U.on("blur",function(){B.fire("blur"),q&&this.removeClass(q)})}}),CKEDITOR.tools.extend(this,R),this.keyboardFocusable&&(this.tabIndex=R.tabIndex||0,this.focusIndex=E._.focusList.push(this)-1,this.on("focus",function(){E._.currentFocusIndex=B.focusIndex}))}},hbox:function(E,R,A,F,$){if(!(4>arguments.length)){this._||(this._={});var z,D=this._.children=R,w=$&&$.widths||null,P=$&&$.height||null,W={role:"presentation"};$&&$.align&&(W.align=$.align),CKEDITOR.ui.dialog.uiElement.call(this,E,$||{type:"hbox"},F,"table",{},W,function(){var G=['<tbody><tr class="cke_dialog_ui_hbox">'];for(z=0;z<A.length;z++){var J="cke_dialog_ui_hbox_child",Z=[];0===z&&(J="cke_dialog_ui_hbox_first"),z==A.length-1&&(J="cke_dialog_ui_hbox_last"),G.push('<td class="',J,'" role="presentation" '),w?w[z]&&Z.push("width:"+h(w[z])):Z.push("width:"+Math.floor(100/A.length)+"%"),P&&Z.push("height:"+h(P)),$&&void 0!==$.padding&&Z.push("padding:"+h($.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&D[z].align&&Z.push("text-align:"+D[z].align),0<Z.length&&G.push('style="'+Z.join("; ")+'" '),G.push(">",A[z],"</td>")}return G.push("</tr></tbody>"),G.join("")})}},vbox:function(E,R,A,F,$){if(!(3>arguments.length)){this._||(this._={});var D=this._.children=R,w=$&&$.width||null,P=$&&$.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,E,$||{type:"vbox"},F,"div",null,{role:"presentation"},function(){var z=['<table role="presentation" cellspacing="0" border="0" '];z.push('style="'),$&&$.expand&&z.push("height:100%;"),z.push("width:"+h(w||"100%"),";"),CKEDITOR.env.webkit&&z.push("float:none;"),z.push('"'),z.push('align="',CKEDITOR.tools.htmlEncode($&&$.align||("ltr"==E.getParentEditor().lang.dir?"left":"right")),'" '),z.push("><tbody>");for(var W=0;W<A.length;W++){var G=[];z.push('<tr><td role="presentation" '),w&&G.push("width:"+h(w||"100%")),P?G.push("height:"+h(P[W])):$&&$.expand&&G.push("height:"+Math.floor(100/A.length)+"%"),$&&void 0!==$.padding&&G.push("padding:"+h($.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&D[W].align&&G.push("text-align:"+D[W].align),0<G.length&&z.push('style="',G.join("; "),'" '),z.push(' class="cke_dialog_ui_vbox_child">',A[W],"</td></tr>")}return z.push("</tbody></table>"),z.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(E,R){return this.getInputElement().setValue(E),!R&&this.fire("change",{value:E}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var E=this.getInputElement();(E=E.getParent())&&-1==E.$.className.search("cke_dialog_page_contents"););return E?(E=E.getAttribute("name"),this._.dialog._.currentTabId!=E&&this._.dialog.selectPage(E),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(E){var A,$,R=/^on([A-Z]\w+)/,F=function(w,P,z,W){P.on("load",function(){w.getInputElement().on(z,W,w)})};for($ in E)(A=$.match(R))&&(this.eventProcessors[$]?this.eventProcessors[$].call(this,this._.dialog,E[$]):F(this,this._.dialog,A[1].toLowerCase(),E[$]));return this},eventProcessors:{onLoad:function(E,R){E.on("load",R,this)},onShow:function(E,R){E.on("show",R,this)},onHide:function(E,R){E.on("hide",R,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var E=this.getElement();this.getInputElement().setAttribute("disabled","true"),E.addClass("cke_disabled")},enable:function(){var E=this.getElement();this.getInputElement().removeAttribute("disabled"),E.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(E){return 1>arguments.length?this._.children.concat():(E.splice||(E=[E]),2>E.length?this._.children[E[0]]:this._.children[E[0]]&&this._.children[E[0]].getChild?this._.children[E[0]].getChild(E.slice(1,E.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var L={build:function(R,A,F){for(var D,$=A.children,w=[],P=[],z=0;z<$.length&&(D=$[z]);z++){var W=[];w.push(W),P.push(CKEDITOR.dialog._.uiElementBuilders[D.type].build(R,D,W))}return new CKEDITOR.ui.dialog[A.type](R,P,w,F,A)}};CKEDITOR.dialog.addUIElement("hbox",L),CKEDITOR.dialog.addUIElement("vbox",L)}(),CKEDITOR.dialogCommand=function(L,E){this.dialogName=L,CKEDITOR.tools.extend(this,E,!0)},CKEDITOR.dialogCommand.prototype={exec:function(E){var R=this.tabId;E.openDialog(this.dialogName,function(A){R&&A.selectPage(R)})},canUndo:!1,editorFocus:1},function(){var L=/^([a]|[^a])+$/,E=/^\d*$/,R=/^\d*(?:\.\d+)?$/,A=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,F=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,$=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var w=arguments;return function(){var z,J,P=this&&this.getValue?this.getValue():w[0],W=CKEDITOR.VALIDATE_AND,G=[];for(J=0;J<w.length&&"function"==typeof w[J];J++)G.push(w[J]);J<w.length&&"string"==typeof w[J]&&(z=w[J],J++),J<w.length&&"number"==typeof w[J]&&(W=w[J]);var Z=W==CKEDITOR.VALIDATE_AND;for(J=0;J<G.length;J++)Z=W==CKEDITOR.VALIDATE_AND?Z&&G[J](P):Z||G[J](P);return!!Z||z}},regex:function(w,P){return function(z){return z=this&&this.getValue?this.getValue():z,!!w.test(z)||P}},notEmpty:function(w){return this.regex(L,w)},integer:function(w){return this.regex(E,w)},number:function(w){return this.regex(R,w)},cssLength:function(w){return this.functions(function(P){return F.test(CKEDITOR.tools.trim(P))},w)},htmlLength:function(w){return this.functions(function(P){return A.test(CKEDITOR.tools.trim(P))},w)},inlineStyle:function(w){return this.functions(function(P){return $.test(CKEDITOR.tools.trim(P))},w)},equals:function(w,P){return this.functions(function(z){return z==w},P)},notEqual:function(w,P){return this.functions(function(z){return z!=w},P)}},CKEDITOR.on("instanceDestroyed",function(D){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var w;w=CKEDITOR.dialog._.currentTop;)w.hide();for(var P in p)p[P].remove();p={}}for(var z in D=D.editor._.storedDialogs)D[z].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(E,R){var A=null,F=CKEDITOR.dialog._.dialogDefinitions[E];if(null===CKEDITOR.dialog._.currentTop&&n(this),"function"==typeof F)A=(A=this._.storedDialogs||(this._.storedDialogs={}))[E]||(A[E]=new CKEDITOR.dialog(this,E)),R&&R.call(A,A),A.show();else{if("failed"==F)throw u(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+E+'" failed when loading definition.');"string"==typeof F&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(F),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[E]&&(CKEDITOR.dialog._.dialogDefinitions[E]="failed"),this.openDialog(E,R)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),A}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(t){t.on("doubleclick",function(c){c.data.dialog&&t.openDialog(c.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(t){var c=this;t.addCommand("a11yHelp",{exec:function(){var s=c.availableLangs[s=t.langCode]?s:c.availableLangs[s.replace(/-.*/,"")]?s.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+s+".js"),function(){t.lang.a11yhelp=c.langEntries[s],t.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),t.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),t.on("ariaEditorHelpLabel",function(o){o.data.label=t.lang.common.editorHelp})}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(t){var c=t.addCommand("about",new CKEDITOR.dialogCommand("about"));c.modes={wysiwyg:1,source:1},c.canUndo=!1,c.readOnly=1,t.ui.addButton&&t.ui.addButton("About",{label:t.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(t){var c=0,o=function(i,l,r,e){if(e){e=new CKEDITOR.style(e);var n=s[r];n.unshift(e),t.attachStyleStateChange(e,function(u){!t.readOnly&&t.getCommand(r).setState(u)}),t.addCommand(r,new CKEDITOR.styleCommand(e,{contentForms:n})),t.ui.addButton&&t.ui.addButton(i,{label:l,command:r,toolbar:"basicstyles,"+(c+=10)})}},s={bold:["strong","b",["span",function(d){return"bold"==(d=d.styles["font-weight"])||700<=+d}]],italic:["em","i",["span",function(d){return"italic"==d.styles["font-style"]}]],underline:["u",["span",function(d){return"underline"==d.styles["text-decoration"]}]],strike:["s","strike",["span",function(d){return"line-through"==d.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},a=t.config,f=t.lang.basicstyles;o("Bold",f.bold,"bold",a.coreStyles_bold),o("Italic",f.italic,"italic",a.coreStyles_italic),o("Underline",f.underline,"underline",a.coreStyles_underline),o("Strike",f.strike,"strike",a.coreStyles_strike),o("Subscript",f.subscript,"subscript",a.coreStyles_subscript),o("Superscript",f.superscript,"superscript",a.coreStyles_superscript),t.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var v={exec:function(c){var o=c.getCommand("blockquote").state,s=c.getSelection(),a=s&&s.getRanges()[0];if(a){var f=s.createBookmarks();if(CKEDITOR.env.ie){var l,d=f[0].startNode,i=f[0].endNode;if(d&&"blockquote"==d.getParent().getName())for(l=d;l=l.getNext();)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){d.move(l,!0);break}if(i&&"blockquote"==i.getParent().getName())for(l=i;l=l.getPrevious();)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){i.move(l);break}}if((r=a.createIterator()).enlargeBr=c.config.enterMode!=CKEDITOR.ENTER_BR,o==CKEDITOR.TRISTATE_OFF){for(d=[];o=r.getNextParagraph();)d.push(o);for(1>d.length&&(o=c.document.createElement(c.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),i=f.shift(),a.insertNode(o),o.append(new CKEDITOR.dom.text("\ufeff",c.document)),a.moveToBookmark(i),a.selectNodeContents(o),a.collapse(!0),i=a.createBookmark(),d.push(o),f.unshift(i)),l=d[0].getParent(),a=[],i=0;i<d.length;i++)l=l.getCommonAncestor((o=d[i]).getParent());for(o={table:1,tbody:1,tr:1,ol:1,ul:1};o[l.getName()];)l=l.getParent();for(i=null;0<d.length;){for(o=d.shift();!o.getParent().equals(l);)o=o.getParent();o.equals(i)||a.push(o),i=o}for(;0<a.length;)if("blockquote"==(o=a.shift()).getName()){for(i=new CKEDITOR.dom.documentFragment(c.document);o.getFirst();)i.append(o.getFirst().remove()),d.push(i.getLast());i.replace(o)}else d.push(o);for((a=c.document.createElement("blockquote")).insertBefore(d[0]);0<d.length;)o=d.shift(),a.append(o)}else if(o==CKEDITOR.TRISTATE_ON){for(i=[],l={};o=r.getNextParagraph();){for(d=a=null;o.getParent();){if("blockquote"==o.getParent().getName()){a=o.getParent(),d=o;break}o=o.getParent()}a&&d&&!d.getCustomData("blockquote_moveout")&&(i.push(d),CKEDITOR.dom.element.setMarker(l,d,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(l),o=[],d=[],l={};0<i.length;)a=(r=i.shift()).getParent(),r.getPrevious()?r.getNext()?(r.breakParent(r.getParent()),d.push(r.getNext())):r.remove().insertAfter(a):r.remove().insertBefore(a),a.getCustomData("blockquote_processed")||(d.push(a),CKEDITOR.dom.element.setMarker(l,a,"blockquote_processed",!0)),o.push(r);for(CKEDITOR.dom.element.clearAllMarkers(l),i=d.length-1;0<=i;i--){e:{for(var r=0,e=(l=a=d[i]).getChildCount(),n=void 0;r<e&&(n=l.getChild(r));r++)if(n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()){l=!1;break e}l=!0}l&&a.remove()}if(c.config.enterMode==CKEDITOR.ENTER_BR)for(a=!0;o.length;)if("div"==(r=o.shift()).getName()){for(i=new CKEDITOR.dom.documentFragment(c.document),!a||!r.getPrevious()||r.getPrevious().type==CKEDITOR.NODE_ELEMENT&&r.getPrevious().isBlockBoundary()||i.append(c.document.createElement("br")),a=r.getNext()&&!(r.getNext().type==CKEDITOR.NODE_ELEMENT&&r.getNext().isBlockBoundary());r.getFirst();)r.getFirst().remove().appendTo(i);a&&i.append(c.document.createElement("br")),i.replace(r),a=!1}}s.selectBookmarks(f),c.focus()}},refresh:function(c,o){this.setState(c.elementPath(o.block||o.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(c){c.blockless||(c.addCommand("blockquote",v),c.ui.addButton&&c.ui.addButton("Blockquote",{label:c.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function v(c,o){CKEDITOR.tools.extend(this,o,{editor:c,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:c._.notificationArea}),o.type||(this.type="info"),this.element=this._createElement(),c.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function t(c){var o=this;this.editor=c,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),c.on("destroy",function(){o._removeListeners(),o.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(o){o._.notificationArea=new t(o),o.showNotification=function(a,f,d){var i,l;return"progress"==f?i=d:l=d,(a=new CKEDITOR.plugins.notification(o,{message:a,type:f,progress:i,duration:l})).show(),a},o.on("key",function(a){if(27==a.data.keyCode){var f=o._.notificationArea.notifications;f.length&&(function s(a){var f=new CKEDITOR.dom.element("div");f.setStyles({position:"fixed","margin-left":"-9999px"}),f.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),f.setText(a),CKEDITOR.document.getBody().append(f),setTimeout(function(){f.remove()},100)}(o.lang.notification.closed),f[f.length-1].hide(),a.cancel())}})}}),v.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(o){var s=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:o})&&(s=!1);var a=this.element,f=a.findOne(".cke_notification_message"),d=a.findOne(".cke_notification_progress"),i=o.type;a.removeAttribute("role"),o.progress&&"progress"!=this.type&&(i="progress"),i&&(a.removeClass(this._getClass()),a.removeAttribute("aria-label"),this.type=i,a.addClass(this._getClass()),a.setAttribute("aria-label",this.type),"progress"!=this.type||d?"progress"!=this.type&&d&&d.remove():(d=this._createProgressElement()).insertBefore(f)),void 0!==o.message&&(this.message=o.message,f.setHtml(this.message)),void 0!==o.progress&&(this.progress=o.progress,d&&d.setStyle("width",this._getPercentageProgress())),s&&o.important&&(a.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=o.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var s,a,o=this,f=this.editor.lang.common.close;return(s=new CKEDITOR.dom.element("div")).addClass("cke_notification"),s.addClass(this._getClass()),s.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&s.append(this._createProgressElement()),(a=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),a.setHtml(this.message),s.append(a),a=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+f+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),s.append(a),a.on("click",function(){o.editor.focus(),o.hide()}),s},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var o=new CKEDITOR.dom.element("span");return o.addClass("cke_notification_progress"),o.setStyle("width",this._getPercentageProgress()),o},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var s,o=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?s=this.duration:("info"==this.type||"success"==this.type)&&(s="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),s&&(o._hideTimeoutId=setTimeout(function(){o.hide()},s))}},t.prototype={add:function(o){this.notifications.push(o),this.element.append(o.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(o){var s=CKEDITOR.tools.indexOf(this.notifications,o);0>s||(this.notifications.splice(s,1),o.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var o=this.editor,s=o.config,a=new CKEDITOR.dom.element("div");return a.addClass("cke_notifications_area"),a.setAttribute("id","cke_notifications_area_"+o.name),a.setStyle("z-index",s.baseFloatZIndex-2),a},_attachListeners:function(){var o=CKEDITOR.document.getWindow(),s=this.editor;o.on("scroll",this._uiBuffer.input),o.on("resize",this._uiBuffer.input),s.on("change",this._changeBuffer.input),s.on("floatingSpaceLayout",this._layout,this,null,20),s.on("blur",this._layout,this,null,20)},_removeListeners:function(){var o=CKEDITOR.document.getWindow(),s=this.editor;o.removeListener("scroll",this._uiBuffer.input),o.removeListener("resize",this._uiBuffer.input),s.removeListener("change",this._changeBuffer.input),s.removeListener("floatingSpaceLayout",this._layout),s.removeListener("blur",this._layout)},_layout:function(){function o(){s.setStyle("left",I(_+f.width-n-u))}var i,l,e,s=this.element,a=this.editor,f=a.ui.contentsElement.getClientRect(),d=a.ui.contentsElement.getDocumentPosition(),r=s.getClientRect(),n=this._notificationWidth,u=this._notificationMargin,h=(e=CKEDITOR.document.getWindow()).getScrollPosition(),T=e.getViewPaneSize(),m=CKEDITOR.document.getBody(),g=m.getDocumentPosition(),I=CKEDITOR.tools.cssLength;n&&u||(e=this.element.getChild(0),n=this._notificationWidth=e.getClientRect().width,u=this._notificationMargin=parseInt(e.getComputedStyle("margin-left"),10)+parseInt(e.getComputedStyle("margin-right"),10)),a.toolbar&&(l=(i=a.ui.space("top")).getClientRect()),i&&i.isVisible()&&l.bottom>f.top&&l.bottom<f.bottom-r.height?s.setStyles({position:"fixed",top:I(l.bottom)}):s.setStyles(0<f.top?{position:"absolute",top:I(d.y)}:d.y+f.height-r.height>h.y?{position:"fixed",top:0}:{position:"absolute",top:I(d.y+f.height-r.height)});var _="fixed"==s.getStyle("position")?f.left:"static"!=m.getComputedStyle("position")?d.x-g.x:d.x;f.width<n+u?d.x+n+u>h.x+T.width?o():s.setStyle("left",I(_)):d.x+n+u>h.x+T.width?s.setStyle("left",I(_)):d.x+f.width/2+n/2+u>h.x+T.width?s.setStyle("left",I(_-d.x+h.x+T.width-n-u)):0>f.left+f.width-n-u?o():s.setStyle("left",I(0>f.left+f.width/2-n/2?_-d.x+h.x:_+f.width/2-n/2-u/2))}},CKEDITOR.plugins.notification=v}(),function(){var t='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var v="";CKEDITOR.env.ie&&(v='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),t=t+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+v+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var c=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),o=CKEDITOR.addTemplate("button",t);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(s){CKEDITOR.tools.extend(this,s,{title:s.label,click:s.click||function(a){a.execCommand(s.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,f){function d(){var y=a.mode;y&&(y=this.modes[y]?void 0!==i[y]?i[y]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,y=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:y,this.setState(y),this.refresh&&this.refresh())}var u,h,T,i=null,l=CKEDITOR.env,r=this._.id=CKEDITOR.tools.getNextId(),e="",n=this.command;this._.editor=a;var K,m={id:r,button:this,editor:a,focus:function(){CKEDITOR.document.getById(r).focus()},execute:function(){this.button.click(a)},attach:function(C){this.button.attach(C)}},g=CKEDITOR.tools.addFunction(function(y){if(m.onkey)return y=new CKEDITOR.dom.event(y),!1!==m.onkey(m,y.getKeystroke())}),I=CKEDITOR.tools.addFunction(function(y){var C;return m.onfocus&&(C=!1!==m.onfocus(m,new CKEDITOR.dom.event(y))),C}),_=0;m.clickFn=u=CKEDITOR.tools.addFunction(function(){_&&(a.unlockSelection(1),_=0),m.execute(),l.iOS&&a.focus()}),this.modes?(i={},a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(i[a.mode]=this._.state)},this),a.on("activeFilterChange",d,this),a.on("mode",d,this),!this.readOnly&&a.on("readOnly",d,this)):n&&(n=a.getCommand(n))&&(n.on("state",function(){this.setState(n.state)},this),e+=n.state==CKEDITOR.TRISTATE_ON?"on":n.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&a.on("contentDirChanged",function(y){var C=CKEDITOR.document.getById(this._.id),N=C.getFirst();(y=y.data)!=a.lang.dir?C.addClass("cke_"+y):C.removeClass("cke_ltr").removeClass("cke_rtl"),N.setAttribute("style",CKEDITOR.skin.getIconStyle(K,"rtl"==y,this.icon,this.iconOffset))},this),n?(h=a.getCommandKeystroke(n))&&(T=CKEDITOR.tools.keystrokeToString(a.lang.common.keyboard,h)):e+="off";var O=null,p=this.icon;return K=h=this.name||this.command,this.icon&&!/\./.test(this.icon)?(K=this.icon,p=null):(this.icon&&(O=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(O=this.iconHiDpi)),O?(CKEDITOR.skin.addIcon(O,O),p=null):O=K,e={id:r,name:h,iconName:K,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:e,ariaDisabled:"disabled"==e?"true":"false",title:this.title+(T?" ("+T.display+")":""),ariaShortcut:T?a.lang.common.keyboardShortcut+" "+T.aria:"",titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:g,focusFn:I,clickFn:u,style:CKEDITOR.skin.getIconStyle(O,"rtl"==a.lang.dir,p,this.iconOffset),arrowHtml:this.hasArrow?c.output():""},o.output(e,f),this.onRender&&this.onRender(),m},setState:function(a){if(this._.state==a)return!1;this._.state=a;var f=CKEDITOR.document.getById(this._.id);return!!f&&(f.setState(a,"cke_button"),f.setAttribute("aria-disabled",a==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?f.setAttribute("aria-expanded",a==CKEDITOR.TRISTATE_ON):a===CKEDITOR.TRISTATE_ON?f.setAttribute("aria-pressed",!0):f.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var f=this;return this.allowedContent||this.requiredContent||!this.command||(f=a.getCommand(this.command)||f),this._.feature=f}},CKEDITOR.ui.prototype.addButton=function(s,a){this.add(s,CKEDITOR.UI_BUTTON,a)}}(),function(){function t(s){return s._.toolbarGroups||(s._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var c=function(){this.toolbars=[],this.focusCommandExecuted=!1};c.prototype.focus=function(){for(var a,s=0;a=this.toolbars[s++];)for(var d,f=0;d=a.items[f++];)if(d.focus)return void d.focus()};var o={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var f,d=function i(l,r){var e,n=(u="rtl"==a.lang.dir)?37:39,u=u?39:37,h=void 0===(h=a.config.toolbarGroupCycling)||h;switch(r){case 9:case CKEDITOR.SHIFT+9:for(;!e||!e.items.length;)if((e=9==r?(e?e.next:l.toolbar.next)||a.toolbox.toolbars[0]:(e?e.previous:l.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1]).items.length)for(l=e.items[f?e.items.length-1:0];l&&!l.focus;)(l=f?l.previous:l.next)||(e=0);return l&&l.focus(),!1;case n:e=l;do{!(e=e.next)&&h&&(e=l.toolbar.items[0])}while(e&&!e.focus);return e?e.focus():i(l,9),!1;case 40:return l.button&&l.button.hasArrow?l.execute():i(l,40==r?n:u),!1;case u:case 38:e=l;do{!(e=e.previous)&&h&&(e=l.toolbar.items[l.toolbar.items.length-1])}while(e&&!e.focus);return e?e.focus():(f=1,i(l,CKEDITOR.SHIFT+9),f=0),!1;case 27:return a.focus(),!1;case 13:case 32:return l.execute(),!1}return!0};a.on("uiSpace",function(i){if(i.data.space==a.config.toolbarLocation){i.removeListener(),a.toolbox=new c;var e,n,l=['<span id="',r=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',a.lang.toolbar.toolbars,"</span>",'<span id="'+a.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',r,'" onmousedown="return false;">'],r=!1!==a.config.toolbarStartupExpanded;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(r?">":' style="display:none">'));for(var u=a.toolbox.toolbars,h=function v(s){function d(e,n){if(n.length){e.items?e.items.push(s.ui.create("-")):e.items=[];for(var u;u=n.shift();)u="string"==typeof u?u:u.name,l&&-1!=CKEDITOR.tools.indexOf(l,u)||(u=s.ui.create(u))&&s.addFeature(u)&&e.items.push(u)}}var l=(l=s.config.removeButtons)&&l.split(","),r=s.config.toolbar;return"string"==typeof r&&(r=s.config["toolbar_"+r]),s.toolbar=r?function i(e){var u,h,T,n=[];for(u=0;u<e.length;++u)T={},"/"==(h=e[u])?n.push(h):CKEDITOR.tools.isArray(h)?(d(T,CKEDITOR.tools.clone(h)),n.push(T)):h.items&&(d(T,CKEDITOR.tools.clone(h.items)),T.name=h.name,n.push(T));return n}(r):function a(){for(var e=function f(){var n,u,h,e={};for(n in s.ui.items)h=(h=(u=s.ui.items[n]).toolbar||"others").split(","),u=h[0],h=parseInt(h[1]||-1,10),e[u]||(e[u]=[]),e[u].push({name:n,order:h});for(u in e)e[u]=e[u].sort(function(T,m){return T.order==m.order?0:0>m.order?-1:0>T.order?1:T.order<m.order?-1:1});return e}(),n=CKEDITOR.tools.clone(s.config.toolbarGroups)||t(s),u=0;u<n.length;u++){var h=n[u];if("/"!=h){"string"==typeof h&&(h=n[u]={name:h});var T,m=h.groups;if(m)for(var g=0;g<m.length;g++)(T=e[T=m[g]])&&d(h,T);(T=e[h.name])&&d(h,T)}}return n}()}(a),T=h.length,m=0;m<T;m++){var g,_,p,I=0,K=h[m],O="/"!==K&&("/"===h[m+1]||m==T-1);if(K)if(e&&(l.push("</span>"),n=e=0),"/"===K)l.push('<span class="cke_toolbar_break"></span>');else{p=K.items||K;for(var y=0;y<p.length;y++){var N,C=p[y];if(C){var k=function(H){H=H.render(a,l),0<(b=I.items.push(H)-1)&&(H.previous=I.items[b-1],H.previous.next=H),H.toolbar=I,H.onkey=d,H.onfocus=function(){a.toolbox.focusCommandExecuted||a.focus()}};if(C.type==CKEDITOR.UI_SEPARATOR)n=e&&C;else{if(N=!1!==C.canGroup,!I){g=CKEDITOR.tools.getNextId(),I={id:g,items:[]},l.push('<span id="',g,'" class="cke_toolbar'+(O?' cke_toolbar_last"':'"'),(_=K.name&&(a.lang.toolbar.toolbarGroups[K.name]||K.name))?' aria-labelledby="'+g+'_label"':"",' role="toolbar">'),_&&l.push('<span id="',g,'_label" class="cke_voice_label">',_,"</span>"),l.push('<span class="cke_toolbar_start"></span>');var b=u.push(I)-1;0<b&&(I.previous=u[b-1],I.previous.next=I)}N?e||(l.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(l.push("</span>"),e=0),n&&(k(n),n=0),k(C)}}}e&&(l.push("</span>"),n=e=0),I&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(a.config.toolbarCanCollapse&&l.push("</span>"),a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var x=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(x)}),a.addCommand("toolbarCollapse",{readOnly:1,exec:function(H){var L=H.ui.space("toolbar_collapser"),E=L.getPrevious(),R=H.ui.space("contents"),A=E.getParent(),F=parseInt(R.$.style.height,10),$=A.$.offsetHeight,D=L.hasClass("cke_toolbox_collapser_min");D?(E.show(),L.removeClass("cke_toolbox_collapser_min"),L.setAttribute("title",H.lang.toolbar.toolbarCollapse)):(E.hide(),L.addClass("cke_toolbox_collapser_min"),L.setAttribute("title",H.lang.toolbar.toolbarExpand)),L.getFirst().setText(D?"\u25b2":"\u25c0"),R.setStyle("height",F-(A.$.offsetHeight-$)+"px"),H.fire("resize",{outerHeight:H.container.$.offsetHeight,contentsHeight:R.$.offsetHeight,outerWidth:H.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(r?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id="'+a.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),r||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+x+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}l.push("</span>"),i.data.html+=l.join("")}}),a.on("destroy",function(){if(this.toolbox){var i,r,e,n,l=0;for(i=this.toolbox.toolbars;l<i.length;l++)for(e=i[l].items,r=0;r<e.length;r++)(n=e[r]).clickFn&&CKEDITOR.tools.removeFunction(n.clickFn),n.keyDownFn&&CKEDITOR.tools.removeFunction(n.keyDownFn)}}),a.on("uiReady",function(){var i=a.ui.space("toolbox");i&&a.focusManager.add(i,1)}),a.addCommand("toolbarFocus",o),a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),a.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(r,e){return e.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(s,a,f){var d=t(this.editor),i=0===a,l={name:s};if(f){if(f=CKEDITOR.tools.search(d,function(r){return r.name==f}))return!f.groups&&(f.groups=[]),a&&0<=(a=CKEDITOR.tools.indexOf(f.groups,a))?void f.groups.splice(a+1,0,s):void(i?f.groups.splice(0,0,s):f.groups.push(s));a=null}a&&(a=CKEDITOR.tools.indexOf(d,function(r){return r.name==a})),i?d.splice(0,0,s):"number"==typeof a?d.splice(a+1,0,l):d.push(s)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function v(r,e,n){return e.type||(e.type="auto"),!(n&&!1===r.fire("beforePaste",e)||!e.dataValue&&e.dataTransfer.isEmpty())&&(e.dataValue||(e.dataValue=""),CKEDITOR.env.gecko&&"drop"==e.method&&r.toolbox&&r.once("afterPaste",function(){r.toolbox.focus()}),r.fire("paste",e))}function a(r,e,n){e=CKEDITOR.htmlParser.fragment.fromHtml(e);var u=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(e,!0,!1,r.activeEnterMode),e.writeHtml(u),u.getHtml()}function d(r){r.data.preventDefault(),r.data.$.dataTransfer.dropEffect="none"}var l;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(e){var n,u=function s(r){function e(){var h,u={};for(h in CKEDITOR.dtd)"$"!=h.charAt(0)&&"div"!=h&&"span"!=h&&(u[h]=1);return u}var n={};return{get:function(h){return"plain-text"==h?n.plainText||(n.plainText=new CKEDITOR.filter(r,"br")):"semantic-content"==h?((h=n.semanticContent)||((h=new CKEDITOR.filter(r,{})).allow({$1:{elements:e(),attributes:!0,styles:!1,classes:!1}}),h=n.semanticContent=h),h):h?new CKEDITOR.filter(r,h):null}}}(e);if(e.config.forcePasteAsPlainText?n="plain-text":e.config.pasteFilter?n=e.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in e.config||(n="semantic-content"),e.pasteFilter=u.get(n),function t(r){function e(){var S,b=r.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var x=function(L){r.getSelection().isCollapsed()||(r.readOnly&&"cut"==L.name||C.initPasteDataTransfer(L,r),L.data.preventDefault())};b.on("copy",x),b.on("cut",x),b.on("cut",function(){r.readOnly||r.extractSelectedHtml()},null,null,999)}b.on(C.mainPasteEvent,function(H){"beforepaste"==C.mainPasteEvent&&N||O(H)}),"beforepaste"==C.mainPasteEvent&&(b.on("paste",function(H){k||(h(),H.data.preventDefault(),O(H),m("paste"))}),b.on("contextmenu",T,null,null,0),b.on("beforepaste",function(H){!H.data||H.data.$.ctrlKey||H.data.$.shiftKey||T()},null,null,0)),b.on("beforecut",function(){!N&&g()}),b.attachListener(CKEDITOR.env.ie?b:r.document.getDocumentElement(),"mouseup",function(){S=setTimeout(p,0)}),r.on("destroy",function(){clearTimeout(S)}),b.on("keyup",p)}function n(b){return{type:b,canUndo:"cut"==b,startDisabled:!0,fakeKeystroke:"cut"==b?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&g();var S,H=this.type;if(CKEDITOR.env.ie)S=m(H);else try{S=r.document.$.execCommand(H,!1,null)}catch(L){S=!1}return S||r.showNotification(r.lang.clipboard[this.type+"Error"]),S}}}function h(){k=1,setTimeout(function(){k=0},100)}function T(){N=1,setTimeout(function(){N=0},10)}function m(b){var x=r.document,S=x.getBody(),H=!1,L=function(){H=!0};return S.on(b,L),7<CKEDITOR.env.version?x.$.execCommand(b):x.$.selection.createRange().execCommand(b),S.removeListener(b,L),H}function g(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var x,S,H,b=r.getSelection();b.getType()==CKEDITOR.SELECTION_ELEMENT&&(x=b.getSelectedElement())&&(S=b.getRanges()[0],(H=r.document.createText("")).insertBefore(x),S.setStartBefore(H),S.setEndAfter(x),b.selectRanges([S]),setTimeout(function(){x.getParent()&&(H.remove(),b.selectElement(x))},0))}}function K(b){if("wysiwyg"==r.mode)switch(b.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:b=r.editable(),h(),"paste"==C.mainPasteEvent&&b.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:r.fire("saveSnapshot"),setTimeout(function(){r.fire("saveSnapshot")},50)}}function O(b){var x={type:"auto",method:"paste",dataTransfer:C.initPasteDataTransfer(b)};x.dataTransfer.cacheData();var S=!1!==r.fire("beforePaste",x);S&&C.canClipboardApiBeTrusted(x.dataTransfer,r)?(b.data.preventDefault(),setTimeout(function(){v(r,x)},0)):function I(b,x){var E,S=r.document,H=r.editable(),L=function(z){z.cancel()};if(!S.getById("cke_pastebin")){var R=r.getSelection(),A=R.createBookmarks();CKEDITOR.env.ie&&R.root.fire("selectionchange");var F=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!H.is("body")||CKEDITOR.env.ie?"div":"body",S);F.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var $=0;S=S.getWindow(),CKEDITOR.env.webkit?(H.append(F),F.addClass("cke_editable"),H.is("body")||($=($="static"!=H.getComputedStyle("position")?H:CKEDITOR.dom.element.get(H.$.offsetParent)).getDocumentPosition().y)):H.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(F),F.setStyles({position:"absolute",top:S.getScrollPosition().y-$+10+"px",width:"1px",height:Math.max(1,S.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&F.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),($=F.getParent().isReadOnly())?(F.setOpacity(0),F.setAttribute("contenteditable",!0)):F.setStyle("ltr"==r.config.contentsLangDirection?"left":"right","-10000px"),r.on("selectionChange",L,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(E=H.once("blur",L,null,null,-100)),$&&F.focus(),($=new CKEDITOR.dom.range(F)).selectNodeContents(F);var D=$.select();CKEDITOR.env.ie&&(E=H.once("blur",function(){r.lockSelection(D)}));var w=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var z;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=w),E&&E.removeListener(),CKEDITOR.env.ie&&H.focus(),R.selectBookmarks(A),F.remove(),CKEDITOR.env.webkit&&(z=F.getFirst())&&z.is&&z.hasClass("Apple-style-span")&&(F=z),r.removeListener("selectionChange",L),x(F.getHtml())},0)}}(0,function(H){x.dataValue=H.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),S&&v(r,x)})}function p(){if("wysiwyg"==r.mode){var b=y("paste");r.getCommand("cut").setState(y("cut")),r.getCommand("copy").setState(y("copy")),r.getCommand("paste").setState(b),r.fire("pasteState",b)}}function y(b){var x=(x=r.getSelection())&&x.getRanges()[0];return(r.readOnly||x&&x.checkReadOnly())&&b in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==b?CKEDITOR.TRISTATE_OFF:(x=(b=r.getSelection()).getRanges(),b.getType()==CKEDITOR.SELECTION_NONE||1==x.length&&x[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var C=CKEDITOR.plugins.clipboard,N=0,k=0;(function(){if(r.on("key",K),r.on("contentDom",e),r.on("selectionChange",p),r.contextMenu){r.contextMenu.addListener(function(){return{cut:y("cut"),copy:y("copy"),paste:y("paste")}});var b=null;r.on("menuShow",function(){b&&(b.removeListener(),b=null);var x=r.contextMenu.findItemByCommandName("paste");x&&x.element&&(b=x.element.on("touchend",function(){r._.forcePasteDialog=!0}))})}r.ui.addButton&&r.once("instanceReady",function(){r._.pasteButtons&&CKEDITOR.tools.array.forEach(r._.pasteButtons,function(x){(x=r.ui.get(x))&&(x=CKEDITOR.document.getById(x._.id))&&x.on("touchend",function(){r._.forcePasteDialog=!0})})})})(),function(){function b(x,S,H,L,E){var R=r.lang.clipboard[S];r.addCommand(S,H),r.ui.addButton&&r.ui.addButton(x,{label:R,command:S,toolbar:"clipboard,"+L}),r.addMenuItems&&r.addMenuItem(S,{label:R,command:S,group:"clipboard",order:E})}b("Cut","cut",n("cut"),10,1),b("Copy","copy",n("copy"),20,4),b("Paste","paste",function u(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(x,S){function H($,D){D=void 0===D||D,$?($.method="paste",$.dataTransfer||($.dataTransfer=C.initPasteDataTransfer()),v(x,$,D)):E&&!x._.forcePasteDialog&&x.showNotification(A,"info",x.config.clipboard_notificationDuration),x._.forcePasteDialog=!1,x.fire("afterCommandExec",{name:"paste",command:L,returnValue:!!$})}var L=this,E=void 0===(S=null!=S?S:{}).notification||S.notification,R=S.type,F=CKEDITOR.tools.keystrokeToString(x.lang.common.keyboard,x.getCommandKeystroke(this)),A="string"==typeof E?E:x.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+F.aria+'">'+F.display+"</kbd>");F="string"==typeof S?S:S.dataValue,R&&!0!==x.config.forcePasteAsPlainText&&"allow-word"!==x.config.forcePasteAsPlainText?x._.nextPasteType=R:delete x._.nextPasteType,"string"==typeof F?H({dataValue:F}):x.getClipboardData(H)}}}(),30,8),r._.pasteButtons||(r._.pasteButtons=[]),r._.pasteButtons.push("Paste")}(),r.getClipboardData=function(b,x){function S(R){R.removeListener(),R.cancel(),x(R.data)}function H(R){R.removeListener(),R.cancel(),x({type:E,dataValue:R.data.dataValue,dataTransfer:R.data.dataTransfer,method:"paste"})}var L=!1,E="auto";x||(x=b,b=null),r.on("beforePaste",function(R){R.removeListener(),L=!0,E=R.data.type},null,null,1e3),r.on("paste",S,null,null,0),!1===function _(){if("paste"==C.mainPasteEvent)return r.fire("beforePaste",{type:"auto",method:"paste"}),!1;r.focus(),h();var b=r.focusManager;return b.lock(),r.editable().fire(C.mainPasteEvent)&&!m("paste")?(b.unlock(),!1):(b.unlock(),!0)}()&&(r.removeListener("paste",S),r._.forcePasteDialog&&L&&r.fire("pasteDialog")?(r.on("pasteDialogCommit",H),r.on("dialogHide",function(R){R.removeListener(),R.data.removeListener("pasteDialogCommit",H),R.data._.committed||x(null)})):x(null))}}(e),function i(r){var e=CKEDITOR.plugins.clipboard;r.on("contentDom",function(){function h(K,O,p){var y={$:K.data.$,target:K.data.getTarget()};O&&(y.dragRange=O),p&&(y.dropRange=p),!1===r.fire(K.name,y)&&K.data.preventDefault()}function T(K){return K.type!=CKEDITOR.NODE_ELEMENT&&(K=K.getParent()),K.getChildCount()}var m=r.editable(),g=CKEDITOR.plugins.clipboard.getDropTarget(r),I=r.ui.space("top"),_=r.ui.space("bottom");e.preventDefaultDropOnElement(I),e.preventDefaultDropOnElement(_),m.attachListener(g,"dragstart",h),m.attachListener(r,"dragstart",e.resetDragDataTransfer,e,null,1),m.attachListener(r,"dragstart",function(K){e.initDragDataTransfer(K,r)},null,null,2),m.attachListener(r,"dragstart",function(){var K=e.dragRange=r.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(e.dragStartContainerChildCount=K?T(K.startContainer):null,e.dragEndContainerChildCount=K?T(K.endContainer):null)},null,null,100),m.attachListener(g,"dragend",h),m.attachListener(r,"dragend",e.initDragDataTransfer,e,null,1),m.attachListener(r,"dragend",e.resetDragDataTransfer,e,null,100),m.attachListener(g,"dragover",function(K){if(CKEDITOR.env.edge)K.data.preventDefault();else{var O=K.data.getTarget();(O&&O.is&&O.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&K.data.$.dataTransfer.types.contains("Files"))&&K.data.preventDefault()}}),m.attachListener(g,"drop",function(K){var O;K.data.$.defaultPrevented||(K.data.preventDefault(),(!(O=K.data.getTarget()).isReadOnly()||O.type==CKEDITOR.NODE_ELEMENT&&O.is("html"))&&(O=e.getRangeAtDropPosition(K,r))&&h(K,e.dragRange,O))},null,null,9999),m.attachListener(r,"drop",e.initDragDataTransfer,e,null,1),m.attachListener(r,"drop",function(K){if(K=K.data){var O=K.dropRange,p=K.dragRange,y=K.dataTransfer;y.getTransferType(r)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){e.internalDrop(p,O,y,r)},0):y.getTransferType(r)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?function n(K,O,p){O.select(),v(r,{dataTransfer:p,method:"drop"},1),p.sourceEditor.fire("saveSnapshot"),p.sourceEditor.editable().extractHtmlFromRange(K),p.sourceEditor.getSelection().selectRanges([K]),p.sourceEditor.fire("saveSnapshot")}(p,O,y):function u(K,O){K.select(),v(r,{dataTransfer:O,method:"drop"},1),e.resetDragDataTransfer()}(O,y)}},null,null,9999)})}(e),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var T,h=["image/png","image/jpeg","image/gif"];e.on("paste",function(m){var g=m.data,I=g.dataTransfer;if(!g.dataValue&&"paste"==g.method&&I&&1==I.getFilesCount()&&T!=I.id&&(I=I.getFile(0),-1!=CKEDITOR.tools.indexOf(h,I.type))){var _=new FileReader;_.addEventListener("load",function(){m.data.dataValue='<img src="'+_.result+'" />',e.fire("paste",m.data)},!1),_.addEventListener("abort",function(){e.fire("paste",m.data)},!1),_.addEventListener("error",function(){e.fire("paste",m.data)},!1),_.readAsDataURL(I),T=g.dataTransfer.id,m.stop()}},null,null,1)}e.on("paste",function(m){if(m.data.dataTransfer||(m.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!m.data.dataValue){var g=m.data.dataTransfer,I=g.getData("text/html");I?(m.data.dataValue=I,m.data.type="html"):(I=g.getData("text/plain"))&&(m.data.dataValue=e.editable().transformPlainTextToHtml(I),m.data.type="text")}},null,null,1),e.on("paste",function(m){var g=m.data.dataValue,I=CKEDITOR.dtd.$block;if(-1<g.indexOf("Apple-")&&(g=g.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=m.data.type&&(g=g.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(p,y){return y.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<g.indexOf('<br class="Apple-interchange-newline">')&&(m.data.startsWithEOL=1,m.data.preSniffing="html",g=g.replace(/<br class="Apple-interchange-newline">/,"")),g=g.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),g.match(/^<[^<]+cke_(editable|contents)/i)){var _,K,O=new CKEDITOR.dom.element("div");for(O.setHtml(g);1==O.getChildCount()&&(_=O.getFirst())&&_.type==CKEDITOR.NODE_ELEMENT&&(_.hasClass("cke_editable")||_.hasClass("cke_contents"));)O=K=_;K&&(g=K.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?g=g.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(p,y){return y.toLowerCase()in I?(m.data.preSniffing="html","<"+y):p}):CKEDITOR.env.webkit?g=g.replace(/<\/(\w+)><div><br><\/div>$/,function(p,y){return y in I?(m.data.endsWithEOL=1,"</"+y+">"):p}):CKEDITOR.env.gecko&&(g=g.replace(/(\s)<br>$/,"$1")),m.data.dataValue=g},null,null,3),e.on("paste",function(m){m=m.data;var _,g=e._.nextPasteType||m.type,I=m.dataValue,K=e.config.clipboard_defaultContentType||"html",O=m.dataTransfer.getTransferType(e)==CKEDITOR.DATA_TRANSFER_EXTERNAL,p=!0===e.config.forcePasteAsPlainText;_="html"==g||"html"==m.preSniffing?"html":function c(r){if(CKEDITOR.env.webkit){if(!r.match(/^[^<]*$/g)&&!r.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!r.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!r.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!r.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(I),delete e._.nextPasteType,"htmlifiedtext"==_&&(I=function o(r,e){function n(u){return CKEDITOR.tools.repeat("</p><p>",~~(u/2))+(u%2==1?"<br>":"")}return(e=(e=e.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(u){return u.toLowerCase()})).match(/^[^<]$/)?e:(CKEDITOR.env.webkit&&-1<e.indexOf("<div>")&&((e=e.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(e="<p>"+e.replace(/(<div>(<br>|)<\/div>)+/g,function(u){return n(u.split("</div><div>").length+1)})+"</p>"),e=(e=e.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&r.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(e=e.replace(/^<br><br>$/,"<br>")),-1<e.indexOf("<br><br>")&&(e="<p>"+e.replace(/(<br>){2,}/g,function(u){return n(u.length/4)})+"</p>")),function f(r,e){return r.enterMode==CKEDITOR.ENTER_BR?e=e.replace(/(<\/p><p>)+/g,function(n){return CKEDITOR.tools.repeat("<br>",n.length/7*2)}).replace(/<\/?p>/g,""):r.enterMode==CKEDITOR.ENTER_DIV&&(e=e.replace(/<(\/)?p>/g,"<$1div>")),e}(r,e))}(e.config,I)),"text"==g&&"html"==_?I=a(e,I,u.get("plain-text")):(O&&e.pasteFilter&&!m.dontFilter||p)&&(I=a(e,I,e.pasteFilter)),m.startsWithEOL&&(I='<br data-cke-eol="1">'+I),m.endsWithEOL&&(I+='<br data-cke-eol="1">'),"auto"==g&&(g="html"==_||"html"==K?"html":"text"),m.type=g,m.dataValue=I,delete m.preSniffing,delete m.startsWithEOL,delete m.endsWithEOL},null,null,6),e.on("paste",function(m){(m=m.data).dataValue&&(e.insertHtml(m.dataValue,m.type,m.range),setTimeout(function(){e.fire("afterPaste")},0))},null,null,1e3),e.on("pasteDialog",function(m){setTimeout(function(){e.openDialog("paste",m.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,n,u){e.ui.addButton&&(e.ui.addButton(n,u),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(n))},canClipboardApiBeTrusted:function(e,n){return!!(e.getTransferType(n)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var n=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||n.isInline()?n:e.document},fixSplitNodesAfterDrop:function(e,n,u,h){function T(g,I,_){var K=g;if(K.type==CKEDITOR.NODE_TEXT&&(K=g.getParent()),K.equals(I)&&_!=I.getChildCount())return g=n.startContainer.getChild(n.startOffset-1),I=n.startContainer.getChild(n.startOffset),g&&g.type==CKEDITOR.NODE_TEXT&&I&&I.type==CKEDITOR.NODE_TEXT&&(_=g.getLength(),g.setText(g.getText()+I.getText()),I.remove(),n.setStart(g,_),n.collapse(!0)),!0}var m=n.startContainer;"number"==typeof h&&"number"==typeof u&&m.type==CKEDITOR.NODE_ELEMENT&&(T(e.startContainer,m,u)||T(e.endContainer,m,h))},isDropRangeAffectedByDragRange:function(e,n){var u=n.startContainer,h=n.endOffset;return!!(e.endContainer.equals(u)&&e.endOffset<=h||e.startContainer.getParent().equals(u)&&e.startContainer.getIndex()<h||e.endContainer.getParent().equals(u)&&e.endContainer.getIndex()<h)},internalDrop:function(e,n,u,h){var g,I,T=CKEDITOR.plugins.clipboard,m=h.editable();h.fire("saveSnapshot"),h.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(e,n,T.dragStartContainerChildCount,T.dragEndContainerChildCount),(I=this.isDropRangeAffectedByDragRange(e,n))||(g=e.createBookmark(!1)),T=n.clone().createBookmark(!1),I&&(g=e.createBookmark(!1)),e=g.startNode,I=T.startNode,(n=g.endNode)&&e.getPosition(I)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(I)&CKEDITOR.POSITION_FOLLOWING&&I.insertBefore(e),(e=h.createRange()).moveToBookmark(g),m.extractHtmlFromRange(e,1),n=h.createRange(),T.startNode.getCommonAncestor(m)||(T=h.getSelection().createBookmarks()[0]),n.moveToBookmark(T),v(h,{dataTransfer:u,method:"drop",range:n},1),h.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,n){var u=e.data.$,h=u.clientX,T=u.clientY,m=n.getSelection(!0).getRanges()[0],g=n.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&n.document.$.caretRangeFromPoint(h,T))u=n.document.$.caretRangeFromPoint(h,T),g.setStart(CKEDITOR.dom.node(u.startContainer),u.startOffset),g.collapse(!0);else if(u.rangeParent)g.setStart(CKEDITOR.dom.node(u.rangeParent),u.rangeOffset),g.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&m&&n.editable().hasFocus)return m;if(!document.body.createTextRange)return null;n.focus(),u=n.document.getBody().$.createTextRange();try{for(var I=!1,_=0;20>_&&!I;_++){if(!I)try{u.moveToPoint(h,T-_),I=!0}catch(N){}if(!I)try{u.moveToPoint(h,T+_),I=!0}catch(N){}}if(I){var K="cke-temp-"+(new Date).getTime();u.pasteHTML('<span id="'+K+'">\u200b</span>');var O=n.document.getById(K);g.moveToPosition(O,CKEDITOR.POSITION_BEFORE_START),O.remove()}else{var C,p=n.document.$.elementFromPoint(h,T),y=new CKEDITOR.dom.element(p);if(y.equals(n.editable())||"html"==y.getName())return m&&m.startContainer&&!m.startContainer.equals(n.editable())?m:null;C=y.getClientRect(),g.setStartAt(y,h<C.left?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),g.collapse(!0)}}catch(N){return null}}return g},initDragDataTransfer:function(e,n){var u=e.data.$?e.data.$.dataTransfer:null,h=new this.dataTransfer(u,n);"dragstart"===e.name&&h.storeId(),u?this.dragData&&h.id==this.dragData.id?h=this.dragData:this.dragData=h:this.dragData?h=this.dragData:this.dragData=h,e.data.dataTransfer=h},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,n){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var u=e.data.$.clipboardData,h=new this.dataTransfer(u,n);return"copy"!==e.name&&"cut"!==e.name||h.storeId(),this.copyCutData&&h.id==this.copyCutData.id?(h=this.copyCutData).$=u:this.copyCutData=h,h}return new this.dataTransfer(null,n)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,n)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",d)}},l=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(r,e){r&&(this.$=r),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(u){return"text"==(u=u.toLowerCase())||"text/plain"==u?"Text":"url"==u?"URL":u}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(l),this.id||(this.id="Text"==l?"":"cke-"+CKEDITOR.tools.getUniqueId()),e&&(this.sourceEditor=e,this.setData("text/html",e.getSelectedHtml(1)),"Text"==l||this.getData("text/plain")||this.setData("text/plain",e.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,n){if(null==(h="text/html"==(e=this._.normalizeType(e))&&n?this._.nativeHtmlCache:this._.data[e])||""===h){if(this._.fallbackDataTransfer.isRequired())h=this._.fallbackDataTransfer.getData(e,n);else try{h=this.$.getData(e)||""}catch(T){h=""}"text/html"!=e||n||(h=this._stripHtml(h))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==h.substring(0,7)&&(h=""),"string"==typeof h)var u=h.indexOf("</html>"),h=-1!==u?h.substring(0,u+7):h;return h},setData:function(e,n){if("text/html"==(e=this._.normalizeType(e))?(this._.data[e]=this._stripHtml(n),this._.nativeHtmlCache=n):this._.data[e]=n,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==l&&"Text"==e&&(this.id=n),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,n);else try{this.$.setData(e,n)}catch(u){}},storeId:function(){"Text"!==l&&this.setData(l,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(T){T=n._.normalizeType(T);var m=n.getData(T);"text/html"==T&&(n._.nativeHtmlCache=n.getData(T,!0),m=n._stripHtml(m)),m&&(n._.data[T]=m)}if(this.$){var u,h,n=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(u=0;u<this.$.types.length;u++)e(this.$.types[u])}else e("Text"),e("URL");if(h=this._getImageFromClipboard(),this.$&&this.$.files||h){if(this._.files=[],this.$.files&&this.$.files.length)for(u=0;u<this.$.files.length;u++)this._.files.push(this.$.files[u]);0===this._.files.length&&h&&this._.files.push(h)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var n,e={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),function(h){e[h]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var u=0;u<this.$.types.length;u++)e[this.$.types[u]]=1}else e.Text=1,e.URL=1;for(n in"Text"!=l&&(e[l]=0),e)if(e[n]&&""!==this.getData(n))return!1;return!0},_getImageFromClipboard:function(){var e;try{if(this.$&&this.$.items&&this.$.items[0]&&(e=this.$.items[0].getAsFile())&&e.type)return e}catch(n){}},_stripHtml:function(e){if(e&&e.length){e=e.replace(this._.metaRegExp,"");var n=this._.bodyRegExp.exec(e);n&&n.length&&(e=(e=n[1]).replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(r){this._dataTransfer=r,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,n=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!n)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{n.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===n.getData("cke/mimetypetest"),n.clearData("cke/mimetypetest")}catch(u){}}return!e._isCustomMimeTypeSupported},getData:function(e,n){var u=this._getData(this._customDataFallbackType,!0);if(n)return u;u=this._extractDataComment(u);var h;return null!==(h=e===this._customDataFallbackType?u.content:u.data&&u.data[e]?u.data[e]:this._getData(e,!0))?h:""},setData:function(e,n){(u=e===this._customDataFallbackType)&&(n=this._applyDataComment(n,this._getFallbackTypeData()));var h=n,T=this._dataTransfer.$;try{T.setData(e,h),u&&(this._dataTransfer._.nativeHtmlCache=h)}catch(g){if(this._isUnsupportedMimeTypeError(g)){u=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(u._customTypes,e)&&u._customTypes.push(e);var u=this._getFallbackTypeContent(),m=this._getFallbackTypeData();m[e]=h;try{h=this._applyDataComment(u,m),T.setData(this._customDataFallbackType,h),this._dataTransfer._.nativeHtmlCache=h}catch(_){h=""}}}return h},_getData:function(e,n){var u=this._dataTransfer._.data;if(!n&&u[e])return u[e];try{return this._dataTransfer.$.getData(e)}catch(h){return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,n=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},u=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,function(h){void 0!==u[h]?n[h]=u[h]:void 0!==n[h]&&(n[h]=n[h])},this),n},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var u,n={data:null,content:e||""};return e&&16<e.length&&(u=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&u[1]&&(n.data=JSON.parse(decodeURIComponent(u[1])),n.content=e.replace(u[0],"")),n},_applyDataComment:function(e,n){var u="";return n&&CKEDITOR.tools.object.keys(n).length&&(u="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(n))+"--\x3e"),u+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(s){s.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(o,s){s&&CKEDITOR.tools.extend(this,s),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=o,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(s){return new CKEDITOR.ui.panel(s)}};var v=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),c=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(s,a){var f={editorId:s.id,id:this.id,langCode:s.langCode,dir:s.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":s.config.baseFloatZIndex+1};if(this.getHolderElement=function(){if(!(i=this._.holder)){if(this.isFramed){var l=(i=this.document.getById(this.id+"_frame")).getParent(),i=i.getFrameDocument();CKEDITOR.env.iOS&&l.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),l=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),i.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+l+");"},f))),i.getWindow().$.CKEDITOR=CKEDITOR,i.on("keydown",function(e){var n=e.data.getKeystroke(),u=this.document.getById(this.id).getAttribute("dir");("input"!==e.data.getTarget().getName()||37!==n&&39!==n)&&(this._.onKeyDown&&!1===this._.onKeyDown(n)?"input"===e.data.getTarget().getName()&&32===n||e.data.preventDefault():(27==n||n==("rtl"==u?39:37))&&this.onEscape&&!1===this.onEscape(n)&&e.data.preventDefault())},this),(i=i.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(l)}else i=this.document.getById(this.id);this._.holder=i}return i},this.isFramed){var d=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";f.frame=t.output({id:this.id+"_frame",src:d})}return d=v.output(f),a&&a.push(d),d},addBlock:function(s,a){return a=this._.blocks[s]=a instanceof CKEDITOR.ui.panel.block?a:new CKEDITOR.ui.panel.block(this.getHolderElement(),a),this._.currentBlock||this.showBlock(s),a},getBlock:function(s){return this._.blocks[s]},showBlock:function(s){s=this._.blocks[s];var a=this._.currentBlock,f=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return a&&a.hide(),this._.currentBlock=s,CKEDITOR.fire("ariaWidget",f),s._.focusIndex=-1,this._.onKeyDown=s.onKeyDown&&CKEDITOR.tools.bind(s.onKeyDown,s),s.show(),s},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(s,a){this.element=s.append(s.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),a&&CKEDITOR.tools.extend(this,a),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(s){-1!=s&&(s=this._.getItems().getItem(this._.focusIndex=s),CKEDITOR.env.webkit&&s.getDocument().getWindow().focus(),s.focus(),this.onMark&&this.onMark(s))},markFirstDisplayed:function(s){for(var d,i,a=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"none"==e.getStyle("display")},f=this._.getItems(),l=f.count()-1;0<=l;l--)if((d=f.getItem(l)).getAscendant(a)||(i=d,this._.focusIndex=l),"true"==d.getAttribute("aria-selected")){i=d,this._.focusIndex=l;break}i&&(s&&s(),CKEDITOR.env.webkit&&i.getDocument().getWindow().focus(),i.focus(),this.onMark&&this.onMark(i))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(s,a){switch(f=this.keys[s]){case"next":for(var i,d=this._.focusIndex,f=this._.getItems();i=f.getItem(++d);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=d,i.focus(!0);break}return!i&&!a&&(this._.focusIndex=-1,this.onKeyDown(s,1));case"prev":for(d=this._.focusIndex,f=this._.getItems();0<d&&(i=f.getItem(--d));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=d,i.focus(!0);break}i=null}return!i&&!a&&(this._.focusIndex=f.count(),this.onKeyDown(s,1));case"click":case"mouseup":return(i=0<=(d=this._.focusIndex)&&this._.getItems().getItem(d))&&(i.$[f]?i.$[f]():i.$["on"+f]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(o,s,a,f){function d(){e.hide()}a.forceIFrame=1,a.toolbarRelated&&o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(s=CKEDITOR.document.getById("cke_"+o.name));var i=s.getDocument();f=function v(c,o,s,a,f){f=CKEDITOR.tools.genKey(o.getUniqueId(),s.getUniqueId(),c.lang.dir,c.uiColor||"",a.css||"",f||"");var d=t[f];return d||((d=t[f]=new CKEDITOR.ui.panel(o,a)).element=s.append(CKEDITOR.dom.element.createFromHtml(d.render(c),o)),d.element.setStyles({display:"none",position:"absolute"})),d}(o,i,s,a,f||0);var l=f.element,r=l.getFirst(),e=this;l.disableContextMenu(),this.element=l,this._={editor:o,panel:f,parentElement:s,definition:a,document:i,iframe:r,children:[],dir:o.lang.dir,showBlockParams:null,markFirst:void 0===a.markFirst||a.markFirst},o.on("mode",d),o.on("resize",d),i.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(o,s){return this._.panel.addBlock(o,s)},addListBlock:function(o,s){return this._.panel.addListBlock(o,s)},getBlock:function(o){return this._.panel.getBlock(o)},showBlock:function(o,s,a,f,d,i){var l=this._.panel,r=l.showBlock(o);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var n=this._.editor.editable();this._.returnFocus=n.hasFocus?n:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var e=this.element,T=(n=this._.iframe,n=CKEDITOR.env.ie&&!CKEDITOR.env.edge?n:new CKEDITOR.dom.window(n.$.contentWindow),e.getDocument()),u=this._.parentElement.getPositionedAncestor(),h=s.getDocumentPosition(T),m=(T=u?u.getDocumentPosition(T):{x:0,y:0},"rtl"==this._.dir),g=h.x+(f||0)-T.x,I=h.y+(d||0)-T.y;!m||1!=a&&4!=a?m||2!=a&&3!=a||(g+=s.$.offsetWidth-1):g+=s.$.offsetWidth,(3==a||4==a)&&(I+=s.$.offsetHeight-1),this._.panel._.offsetParentId=s.getId(),e.setStyles({top:I+"px",left:0,display:""}),e.setOpacity(0),e.getFirst().removeStyle("width"),this._.editor.focusManager.add(n),this._.blurSet||(CKEDITOR.event.useCapture=!0,n.on("blur",function(_){function K(){delete this._.returnFocus,this.hide()}this.allowBlur()&&_.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(K,0,this)):K.call(this))},this),n.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(n.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),n.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),l.onEscape=CKEDITOR.tools.bind(function(_){if(this.onEscape&&!1===this.onEscape(_))return!1},this),CKEDITOR.tools.setTimeout(function(){var _=CKEDITOR.tools.bind(function(){if((N=e).removeStyle("width"),r.autoSize){var K=r.element.getDocument();K=(CKEDITOR.env.webkit||CKEDITOR.env.edge?r.element:K.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<K&&(K+=(N.$.offsetWidth||0)-(N.$.clientWidth||0)+3),N.setStyle("width",K+10+"px"),K=r.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<K&&(K+=(N.$.offsetHeight||0)-(N.$.clientHeight||0)+3),N.setStyle("height",K+"px"),l._.currentBlock.element.setStyle("display","none").removeStyle("display")}else N.removeStyle("height");m&&(g-=e.$.offsetWidth),e.setStyle("left",g+"px"),K=l.element.getWindow();var k,N=e.$.getBoundingClientRect(),O=(K=K.getViewPaneSize(),N.width||N.right-N.left),p=N.height||N.bottom-N.top,y=m?N.right:K.width-N.left,C=m?K.width-N.right:N.left;m?y<O&&(g=C>O?g+O:K.width>O?g-N.left:g-N.right+K.width):y<O&&(g=C>O?g-O:K.width>O?g-N.right+K.width:g-N.left),O=N.top,K.height-N.top<p&&(I=O>p?I-p:K.height>p?I-N.bottom+K.height:I-N.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&("html"==(K=N=new CKEDITOR.dom.element(e.$.offsetParent)).getName()&&(K=K.getDocument().getBody()),"rtl"==K.getComputedStyle("direction")&&(g=CKEDITOR.env.ie8Compat?g-2*e.getDocument().getDocumentElement().$.scrollLeft:g-(N.$.scrollWidth-N.$.clientWidth))),(k=(N=e.getFirst()).getCustomData("activePanel"))&&k.onHide&&k.onHide.call(this,1),N.setCustomData("activePanel",this),e.setStyles({top:I+"px",left:g+"px"}),e.setOpacity(1),i&&i()},this);l.isLoaded?_():l.onLoad=_,CKEDITOR.tools.setTimeout(function(){var K=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),r.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=K),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){r.markFirstDisplayed?r.markFirstDisplayed():r._.markFirstDisplayed()},0):r.markFirstDisplayed?r.markFirstDisplayed():r._.markFirstDisplayed()),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var o=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,o))},focus:function(){if(CKEDITOR.env.webkit){var o=CKEDITOR.document.getActive();o&&!o.equals(this._.iframe)&&o.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var o=this._.iframe.getFrameDocument().getActive();o&&o.is("a")&&(this._.lastFocused=o)},hide:function(o){this.visible&&(!this.onHide||!0!==this.onHide.call(this))&&(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(o=o&&this._.returnFocus)&&(CKEDITOR.env.webkit&&o.type&&o.getWindow().$.focus(),o.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(o){var s=this._.panel;return void 0!==o&&(s.allowBlur=o),s.allowBlur},showAsChild:function(o,s,a,f,d,i){(this._.activeChild!=o||o._.panel._.offsetParentId!=a.getId())&&(this.hideChild(),o.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=o,this._.focused=!1,o.showBlock(s,a,f,d,i),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){o.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(o){var s=this._.activeChild;s&&(delete s.onHide,delete this._.activeChild,s.hide(),o&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var o,c=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(o in t){var s=t[o];c?s.destroy():s.element.hide()}c&&(t={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(t){for(var c=t.config.menu_groups.split(","),o=t._.menuGroups={},s=t._.menuItems={},a=0;a<c.length;a++)o[c[a]]=a+1;t.addMenuGroup=function(f,d){o[f]=d||100},t.addMenuItem=function(f,d){o[d.group]&&(s[f]=new CKEDITOR.menuItem(this,f,d))},t.addMenuItems=function(f){for(var d in f)this.addMenuItem(d,f[d])},t.getMenuItem=function(f){return s[f]},t.removeMenuItem=function(f){delete s[f]}}}),function(){var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),t=t+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var c=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),o=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),s=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(f,d){d=this._.definition=d||{},this.id=CKEDITOR.tools.getNextId(),this.editor=f,this.items=[],this._.listeners=[],this._.level=d.level||1;var i=CKEDITOR.tools.extend({},d.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),l=i.block.attributes=i.attributes||{};!l.role&&(l.role="menu"),this._.panelDefinition=i},_:{onShow:function(){var f=this.editor.getSelection(),d=f&&f.getStartElement(),i=this.editor.elementPath(),l=this._.listeners;this.removeAll();for(var r=0;r<l.length;r++){var e=l[r](d,f,i);if(e)for(var n in e){var u=this.editor.getMenuItem(n);!u||u.command&&!this.editor.getCommand(u.command).state||(u.state=e[n],this.add(u))}}},onClick:function(f){this.hide(),f.onClick?f.onClick():f.command&&this.editor.execCommand(f.command)},onEscape:function(f){var d=this.parent;return d?d._.panel.hideChild(1):27==f&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(f){var d=this._.subMenu,i=this.items[f];if(i=i.getItems&&i.getItems()){for(var l in d?d.removeAll():((d=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,d._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),i){var r=this.editor.getMenuItem(l);r&&(r.state=i[l],d.add(r))}var e=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(f));setTimeout(function(){d.show(e,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(f){f.order||(f.order=this.items.length),this.items.push(f)},removeAll:function(){this.items=[]},show:function(f,d,i,l){if(this.parent||(this._.onShow(),this.items.length)){d=d||("rtl"==this.editor.lang.dir?2:1);var r=this.items,e=this.editor,n=this._.panel,u=this._.element;n||((n=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(_){if(!1===this._.onEscape(_))return!1},this),n.onShow=function(){n._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},n.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(u=n.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(h=u.keys)[40]="next",h[9]="next",h[38]="prev",h[CKEDITOR.SHIFT+9]="prev",h["rtl"==e.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",h[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(h[13]="mouseup"),(h=(u=this._.element=u.element).getDocument()).getBody().setStyle("overflow","hidden"),h.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(_){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,e.config.menu_subMenuDelay||400,this,[_])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(_){var K=this.items[_];K.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):K.getItems?this._.showSubMenu(_):this._.onClick(K)},this)),function v(a){a.sort(function(f,d){return f.group<d.group?-1:f.group>d.group?1:f.order<d.order?-1:f.order>d.order?1:0})}(r);for(var h=['<div class="cke_menu'+((h=e.elementPath())&&h.direction()!=e.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],T=r.length,m=T&&r[0].group,g=0;g<T;g++){var I=r[g];m!=I.group&&(h.push('<div class="cke_menuseparator" role="separator"></div>'),m=I.group),I.render(this,g,h)}h.push("</div>"),u.setHtml(h.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(n,this.id,f,d,i,l):n.showBlock(this.id,f,d,i,l),e.fire("menuShow",[n])}},addListener:function(f){this._.listeners.push(f)},hide:function(f){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(f)},findItemByCommandName:function(f){var d=CKEDITOR.tools.array.filter(this.items,function(i){return f===i.command});return d.length?{item:d=d[0],element:this._.element.findOne("."+d.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(f,d,i){CKEDITOR.tools.extend(this,i,{order:0,className:"cke_menubutton__"+d}),this.group=f._.menuGroups[this.group],this.editor=f,this.name=d},proto:{render:function(f,d,i){var u,h,l=f.id+String(d),r=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,e="",n=this.editor,T=r==CKEDITOR.TRISTATE_ON?"on":r==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(e=' aria-checked="'+(r==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var m=this.getItems,g="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",I=this.name;this.icon&&!/\./.test(this.icon)&&(I=this.icon),this.command&&(u=n.getCommand(this.command),(u=n.getCommandKeystroke(u))&&(h=CKEDITOR.tools.keystrokeToString(n.lang.common.keyboard,u))),f={id:l,name:this.name,iconName:I,label:this.label,cls:this.className||"",state:T,hasPopup:m?"true":"false",disabled:r==CKEDITOR.TRISTATE_DISABLED,title:this.label+(h?" ("+h.display+")":""),ariaShortcut:h?n.lang.common.keyboardShortcut+" "+h.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:f._.itemOverFn,moveOutFn:f._.itemOutFn,clickFn:f._.itemClickFn,index:d,iconStyle:CKEDITOR.skin.getIconStyle(I,"rtl"==this.editor.lang.dir,I==this.icon?null:this.icon,this.iconOffset),shortcutHtml:h?s.output({shortcut:h.display}):"",arrowHtml:m?o.output({label:g}):"",role:this.role?this.role:"menuitem",ariaChecked:e},c.output(f,i)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(c){this.base.call(this,c,{panel:{css:c.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":c.lang.contextmenu.options}}})},proto:{addTarget:function(c,o){function s(){f=!1}var a,f;if(c.on("contextmenu",function(i){i=i.data;var l=CKEDITOR.env.webkit?a:CKEDITOR.env.mac?i.$.metaKey:i.$.ctrlKey;if(!(o&&l||(i.preventDefault(),f))){CKEDITOR.env.mac&&CKEDITOR.env.webkit&&(l=this.editor,(e=new CKEDITOR.dom.elementPath(i.getTarget(),l.editable()).contains(function(g){return g.hasAttribute("contenteditable")},!0))&&"false"==e.getAttribute("contenteditable")&&l.getSelection().fake(e));var e=i.getTarget().getDocument(),r=i.getTarget().getDocument().getDocumentElement(),n=(l=!e.equals(CKEDITOR.document),e=e.getWindow().getScrollPosition(),l?i.$.clientX:i.$.pageX||e.x+i.$.clientX),u=l?i.$.clientY:i.$.pageY||e.y+i.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(r,null,n,u)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var d=function(){a=0};c.on("keydown",function(i){a=CKEDITOR.env.mac?i.data.$.metaKey:i.data.$.ctrlKey}),c.on("keyup",d),c.on("contextmenu",d)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(c.on("keydown",function(i){i.data.$.shiftKey&&121===i.data.$.keyCode&&(f=!0)},null,null,0),c.on("keyup",s),c.on("contextmenu",s))},open:function(c,o,s,a){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),c=c||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(c,o,s,a))}}})},beforeInit:function(t){var c=t.contextMenu=new CKEDITOR.plugins.contextMenu(t);t.on("contentDom",function(){c.addTarget(t.editable(),!1!==t.config.browserContextMenuOnCtrl)}),t.addCommand("contextMenu",{exec:function(s){var d,a=0,f=0;(d=(d=(d=s.getSelection().getRanges())[d.length-1].getClientRects(s.editable().isInline()))[d.length-1])&&(a=d["rtl"===s.lang.dir?"left":"right"],f=d.bottom),s.contextMenu.open(s.document.getBody().getParent(),null,a,f)}}),t.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),t.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){var t={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},c="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var o=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+c+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},a.on("uiSpace",function(f){"bottom"==f.data.space&&function v(s,a){function f(h){var T;(h=r.list[h]).equals(s.editable())||"true"==h.getAttribute("contenteditable")?((T=s.createRange()).selectNodeContents(h),T=T.select()):(T=s.getSelection()).selectElement(h),CKEDITOR.env.ie&&s.fire("selectionChange",{selection:T,path:new CKEDITOR.dom.elementPath(h)}),s.focus()}function d(){l&&l.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete r.list}var l,i=s.ui.spaceId("path"),r=s._.elementsPath,e=r.idBase;a.html+='<span id="'+i+'_label" class="cke_voice_label">'+s.lang.elementspath.eleLabel+'</span><span id="'+i+'" class="cke_path" role="group" aria-labelledby="'+i+'_label"><span class="cke_path_empty">&nbsp;</span></span>',s.on("uiReady",function(){var h=s.ui.space("path");h&&s.focusManager.add(h,1)}),r.onClick=f;var n=CKEDITOR.tools.addFunction(f),u=CKEDITOR.tools.addFunction(function(h,T){var g,m=r.idBase;switch(T=new CKEDITOR.dom.event(T),g="rtl"==s.lang.dir,T.getKeystroke()){case g?39:37:case 9:return(g=CKEDITOR.document.getById(m+(h+1)))||(g=CKEDITOR.document.getById(m+"0")),g.focus(),!1;case g?37:39:case CKEDITOR.SHIFT+9:return(g=CKEDITOR.document.getById(m+(h-1)))||(g=CKEDITOR.document.getById(m+(r.list.length-1))),g.focus(),!1;case 27:return s.focus(),!1;case 13:case 32:return f(h),!1}return!0});s.on("selectionChange",function(h){for(var T=[],m=r.list=[],g=[],I=r.filters,_=!0,K=h.data.path.elements,O=K.length;O--;){var p=K[O],y=0;h=p.data("cke-display-name")?p.data("cke-display-name"):p.data("cke-real-element-type")?p.data("cke-real-element-type"):p.getName(),(_=p.hasAttribute("contenteditable")?"true"==p.getAttribute("contenteditable"):_)||p.hasAttribute("contenteditable")||(y=1);for(var C=0;C<I.length;C++){var N=I[C](p,h);if(!1===N){y=1;break}h=N||h}y||(m.unshift(p),g.unshift(h))}for(m=m.length,I=0;I<m;I++)_=s.lang.elementspath.eleTitle.replace(/%1/,h=g[I]),h=o.output({id:e+I,label:_,text:h,jsTitle:"javascript:void('"+h+"')",index:I,keyDownFn:u,clickFn:n}),T.unshift(h);l||(l=CKEDITOR.document.getById(i)),(g=l).setHtml(T.join("")+'<span class="cke_path_empty">&nbsp;</span>'),s.fire("elementsPathUpdate",{space:g})}),s.on("readOnly",d),s.on("contentDomUnload",d),s.addCommand("elementsPathFocus",t.toolbarFocus),s.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}(a,f.data)})}})}(),function(){function v(o,s){var a,f;s.on("refresh",function(d){var l,i=[t];for(l in d.data.states)i.push(d.data.states[l]);this.setState(CKEDITOR.tools.search(i,c)?c:t)},s,null,100),s.on("exec",function(d){a=o.getSelection(),f=a.createBookmarks(1),d.data||(d.data={}),d.data.done=!1},s,null,0),s.on("exec",function(){o.forceNextSelectionCheck(),a.selectBookmarks(f)},s,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(s){var a=CKEDITOR.plugins.indent.genericDefinition;v(s,s.addCommand("indent",new a(!0))),v(s,s.addCommand("outdent",new a)),s.ui.addButton&&(s.ui.addButton("Indent",{label:s.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),s.ui.addButton("Outdent",{label:s.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),s.on("dirChanged",function(f){var d=s.createRange(),i=f.data.node;d.setStartBefore(i),d.setEndAfter(i);for(var r,l=new CKEDITOR.dom.walker(d);r=l.next();)if(r.type==CKEDITOR.NODE_ELEMENT)if(!r.equals(i)&&r.getDirection())d.setStartAfter(r),l=new CKEDITOR.dom.walker(d);else{var e=s.config.indentClasses;if(e)for(var n="ltr"==f.data.dir?["_rtl",""]:["","_rtl"],u=0;u<e.length;u++)r.hasClass(e[u]+n[0])&&(r.removeClass(e[u]+n[0]),r.addClass(e[u]+n[1]));e=r.getStyle("margin-right"),n=r.getStyle("margin-left"),e?r.setStyle("margin-left",e):r.removeStyle("margin-left"),n?r.setStyle("margin-right",n):r.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(s){this.isIndent=!!s,this.startDisabled=!this.isIndent},specificDefinition:function(s,a,f){this.name=a,this.editor=s,this.jobs={},this.enterBr=s.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!f,this.relatedGlobal=f?"indent":"outdent",this.indentKey=f?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(s,a){s.on("pluginsLoaded",function(){for(var f in a)!function(d,i){var r,l=d.getCommand(i.relatedGlobal);for(r in i.jobs)l.on("exec",function(e){e.data.done||(d.fire("lockSnapshot"),i.execJob(d,r)&&(e.data.done=!0),d.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(i.database))},this,null,r),l.on("refresh",function(e){e.data.states||(e.data.states={}),e.data.states[i.name+"@"+r]=i.refreshJob(d,r,e.data.path)},this,null,r);d.addFeature(i)}(this,a[f])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(s,a){var f=this.jobs[a];if(f.state!=t)return f.exec.call(this,s)},refreshJob:function(s,a,f){return(a=this.jobs[a]).state=s.activeFilter.checkFeature(this)?a.refresh.call(this,s,f):t,a.state},getContext:function(s){return s.contains(this.context)}}}(),function(){function v(d){function i(m){for(var g=n.startContainer,I=n.endContainer;g&&!g.getParent().equals(m);)g=g.getParent();for(;I&&!I.getParent().equals(m);)I=I.getParent();if(!g||!I)return!1;for(var _=[],K=!1;!K;)g.equals(I)&&(K=!0),_.push(g),g=g.getNext();if(1>_.length)return!1;for(g=m.getParents(!0),I=0;I<g.length;I++)if(g[I].getName&&e[g[I].getName()]){m=g[I];break}g=l.isIndent?1:-1,I=_[0],_=_[_.length-1];var C,O=(K=CKEDITOR.plugins.list.listToArray(m,r))[_.getCustomData("listarray_index")].indent;for(I=I.getCustomData("listarray_index");I<=_.getCustomData("listarray_index");I++)if(K[I].indent+=g,0<g){for(var p=K[I].parent,y=I-1;0<=y;y--)if(K[y].indent===g){p=K[y].parent;break}K[I].parent=new CKEDITOR.dom.element(p.getName(),p.getDocument())}for(I=_.getCustomData("listarray_index")+1;I<K.length&&K[I].indent>O;I++)K[I].indent+=g;if(g=CKEDITOR.plugins.list.arrayToList(K,r,null,d.config.enterMode,m.getDirection()),!l.isIndent&&(C=m.getParent())&&C.is("li")){var k,N=[];for(I=(_=g.listNode.getChildren()).count()-1;0<=I;I--)(k=_.getItem(I))&&k.is&&k.is("li")&&N.push(k)}if(g&&g.listNode.replace(m),N&&N.length)for(I=0;I<N.length;I++){for(k=m=N[I];(k=k.getNext())&&k.is&&k.getName()in e;)CKEDITOR.env.needsNbspFiller&&!m.getFirst(c)&&m.append(n.document.createText("\xa0")),m.append(k);m.insertAfter(C)}return g&&d.fire("contentDomInvalidated"),!0}for(var n,l=this,r=this.database,e=this.context,u=((u=d.getSelection())&&u.getRanges()).createIterator();n=u.getNextRange();){for(var h=n.getCommonAncestor();h&&(h.type!=CKEDITOR.NODE_ELEMENT||!e[h.getName()]);){if(d.editable().equals(h)){h=!1;break}h=h.getParent()}if(h||(h=n.startPath().contains(e))&&n.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),!h){var T=n.getEnclosedNode();T&&T.type==CKEDITOR.NODE_ELEMENT&&T.getName()in e&&(n.setStartAt(T,CKEDITOR.POSITION_AFTER_START),n.setEndAt(T,CKEDITOR.POSITION_BEFORE_END),h=T)}if(h&&n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in e&&((T=new CKEDITOR.dom.walker(n)).evaluator=t,n.startContainer=T.next()),h&&n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in e&&((T=new CKEDITOR.dom.walker(n)).evaluator=t,n.endContainer=T.previous()),h)return i(h)}return 0}function t(d){return d.type==CKEDITOR.NODE_ELEMENT&&d.is("li")}function c(d){return o(d)&&s(d)}var o=CKEDITOR.dom.walker.whitespaces(!0),s=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.TRISTATE_DISABLED,f=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(i){function l(e){r.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],e.on("key",function(n){var u=e.elementPath();if("wysiwyg"==e.mode&&n.data.keyCode==this.indentKey&&u){var h=this.getContext(u);!h||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,u,h)||(e.execCommand(this.relatedGlobal),n.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(n,u){var h=this.getContext(u),T=CKEDITOR.plugins.indentList.firstItemInPath(this.context,u,h);return h&&this.isIndent&&!T?f:a}:function(n,u){return!this.getContext(u)||this.isIndent?a:f},exec:CKEDITOR.tools.bind(v,this)}}var r=CKEDITOR.plugins.indent;r.registerCommands(i,{indentlist:new l(i,"indentlist",!0),outdentlist:new l(i,"outdentlist")}),CKEDITOR.tools.extend(l.prototype,r.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(d,i,l){var r=i.contains(t);return l||(l=i.contains(d)),l&&r&&r.equals(l.getFirst(t))}}(),function(){function v(m,g,I,_){for(var K=CKEDITOR.plugins.list.listToArray(g.root,I),O=[],p=0;p<g.contents.length;p++)(y=(y=g.contents[p]).getAscendant("li",!0))&&!y.getCustomData("list_item_processed")&&(O.push(y),CKEDITOR.dom.element.setMarker(I,y,"list_item_processed",!0));var C,N,b,y=g.root.getDocument();for(p=0;p<O.length;p++){var k=O[p].getCustomData("listarray_index");(C=K[k].parent).is(this.type)||(N=y.createElement(this.type),C.copyAttributes(N,{start:1,type:1}),N.removeStyle("list-style-type"),K[k].parent=N)}for(K=(I=CKEDITOR.plugins.list.arrayToList(K,I,null,m.config.enterMode)).listNode.getChildCount(),p=0;p<K&&(b=I.listNode.getChild(p));p++)b.getName()==this.type&&_.push(b);I.listNode.replace(g.root),m.fire("contentDomInvalidated")}function t(m,g,I){var y,C,_=g.contents,K=g.root.getDocument(),O=[];if(1==_.length&&_[0].equals(g.root)){var p=K.createElement("div");_[0].moveChildren&&_[0].moveChildren(p),_[0].append(p),_[0]=p}for(g=g.contents[0].getParent(),p=0;p<_.length;p++)g=g.getCommonAncestor(_[p].getParent());for(m=void 0===(m=m.config.useComputedState)||m,p=0;p<_.length;p++)for(var k,N=_[p];k=N.getParent();){if(k.equals(g)){O.push(N),!C&&N.getDirection()&&(C=1),N=N.getDirection(m),null!==y&&(y=y&&y!=N?null:N);break}N=k}if(!(1>O.length)){for(_=O[O.length-1].getNext(),p=K.createElement(this.type),I.push(p);O.length;)I=O.shift(),m=K.createElement("li"),(N=I).is("pre")||h.test(N.getName())||"false"==N.getAttribute("contenteditable")?I.appendTo(m):(I.copyAttributes(m),y&&I.getDirection()&&(m.removeStyle("direction"),m.removeAttribute("dir")),I.moveChildren(m),I.remove()),m.appendTo(p);y&&C&&p.setAttribute("dir",y),_?p.insertBefore(_):p.appendTo(g)}}function c(m,g,I){function _(b){!(N=C[b?"getFirst":"getLast"]())||N.is&&N.isBlockBoundary()||!(k=g.root[b?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||k.is&&k.isBlockBoundary({br:1})||m.document.createElement("br")[b?"insertBefore":"insertAfter"](N)}for(var K=CKEDITOR.plugins.list.listToArray(g.root,I),O=[],p=0;p<g.contents.length;p++){var y=g.contents[p];(y=y.getAscendant("li",!0))&&!y.getCustomData("list_item_processed")&&(O.push(y),CKEDITOR.dom.element.setMarker(I,y,"list_item_processed",!0))}for(y=null,p=0;p<O.length;p++)K[y=O[p].getCustomData("listarray_index")].indent=-1;for(p=y+1;p<K.length;p++)if(K[p].indent>K[p-1].indent+1){for(O=K[p-1].indent+1-K[p].indent,y=K[p].indent;K[p]&&K[p].indent>=y;)K[p].indent+=O,p++;p--}var N,k,C=CKEDITOR.plugins.list.arrayToList(K,I,null,m.config.enterMode,g.root.getAttribute("dir")).listNode;_(!0),_(),C.replace(g.root),m.fire("contentDomInvalidated")}function o(m,g){this.name=m,this.context=this.type=g,this.allowedContent=g+" li",this.requiredContent=g}function s(m,g,I,_){for(var K,O;K=m[_?"getLast":"getFirst"](T);)(O=K.getDirection(1))!==g.getDirection(1)&&K.setAttribute("dir",O),K.remove(),I?K[_?"insertBefore":"insertAfter"](I):g.append(K,_),I=K}function a(m){function g(I){var _=m[I?"getPrevious":"getNext"](n);_&&_.type==CKEDITOR.NODE_ELEMENT&&_.is(m.getName())&&(s(m,_,null,!I),m.remove(),m=_)}g(),g(1)}function f(m){return m.type==CKEDITOR.NODE_ELEMENT&&(m.getName()in CKEDITOR.dtd.$block||m.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[m.getName()]["#"]}function d(m,g,I){m.fire("saveSnapshot"),I.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var _=I.extractContents();g.trim(!1,!0);var K=g.createBookmark(),O=(p=new CKEDITOR.dom.elementPath(g.startContainer)).block,p=p.lastElement.getAscendant("li",1)||O,y=(C=new CKEDITOR.dom.elementPath(I.startContainer)).contains(CKEDITOR.dtd.$listItem),C=C.contains(CKEDITOR.dtd.$list);for(O?(O=O.getBogus())&&O.remove():C&&(O=C.getPrevious(n))&&u(O)&&O.remove(),(O=_.getLast())&&O.type==CKEDITOR.NODE_ELEMENT&&O.is("br")&&O.remove(),(O=g.startContainer.getChild(g.startOffset))?_.insertBefore(O):g.startContainer.append(_),y&&(_=i(y))&&(p.contains(y)?(s(_,y.getParent(),y),_.remove()):p.append(_));I.checkStartOfBlock()&&I.checkEndOfBlock()&&(_=(C=I.startPath()).block);)_.is("li")&&(p=_.getParent(),_.equals(p.getLast(n))&&_.equals(p.getFirst(n))&&(_=p)),I.moveToPosition(_,CKEDITOR.POSITION_BEFORE_START),_.remove();I=I.clone(),_=m.editable(),I.setEndAt(_,CKEDITOR.POSITION_BEFORE_END),(I=new CKEDITOR.dom.walker(I)).evaluator=function(N){return n(N)&&!u(N)},(I=I.next())&&I.type==CKEDITOR.NODE_ELEMENT&&I.getName()in CKEDITOR.dtd.$list&&a(I),g.moveToBookmark(K),g.select(),m.fire("saveSnapshot")}function i(m){return(m=m.getLast(n))&&m.type==CKEDITOR.NODE_ELEMENT&&m.getName()in l?m:null}var l={ol:1,ul:1},r=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.dom.walker.bookmark(),n=function(g){return!(r(g)||e(g))},u=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(g,I,_,K,O){if(!l[g.getName()])return[];K||(K=0),_||(_=[]);for(var p=0,y=g.getChildCount();p<y;p++){var C=g.getChild(p);if(C.type==CKEDITOR.NODE_ELEMENT&&C.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(C,I,_,K+1),"li"==C.$.nodeName.toLowerCase()){var N={parent:g,indent:K,element:C,contents:[]};O?N.grandparent=O:(N.grandparent=g.getParent(),N.grandparent&&"li"==N.grandparent.$.nodeName.toLowerCase()&&(N.grandparent=N.grandparent.getParent())),I&&CKEDITOR.dom.element.setMarker(I,C,"listarray_index",_.length),_.push(N);for(var x,k=0,b=C.getChildCount();k<b;k++)(x=C.getChild(k)).type==CKEDITOR.NODE_ELEMENT&&l[x.getName()]?CKEDITOR.plugins.list.listToArray(x,I,_,K+1,N.grandparent):N.contents.push(x)}}return _},arrayToList:function(g,I,_,K,O){if(_||(_=0),!g||g.length<_+1)return null;for(var p,S,H,y=g[_].parent.getDocument(),C=new CKEDITOR.dom.documentFragment(y),N=null,k=_,b=Math.max(g[_].indent,0),x=null,L=K==CKEDITOR.ENTER_P?"p":"div";;){var E=g[k];if(p=E.grandparent,S=E.element.getDirection(1),E.indent==b){for(N&&g[k].parent.getName()==N.getName()||(N=g[k].parent.clone(!1,1),O&&N.setAttribute("dir",O),C.append(N)),x=N.append(E.element.clone(0,1)),S!=N.getDirection(1)&&x.setAttribute("dir",S),p=0;p<E.contents.length;p++)x.append(E.contents[p].clone(1,1));k++}else if(E.indent==Math.max(b,0)+1)E=g[k-1].element.getDirection(1),k=CKEDITOR.plugins.list.arrayToList(g,null,k,K,E!=S?S:null),!x.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=y.$.documentMode&&x.append(y.createText("\xa0")),x.append(k.listNode),k=k.nextIndex;else{if(-1!=E.indent||_||!p)return null;l[p.getName()]?(x=E.element.clone(!1,!0),S!=p.getDirection(1)&&x.setAttribute("dir",S)):x=new CKEDITOR.dom.documentFragment(y),N=p.getDirection(1)!=S;var D,P,R=E.element,A=R.getAttribute("class"),F=R.getAttribute("style"),$=x.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(K!=CKEDITOR.ENTER_BR||N||F||A),w=E.contents.length;for(p=0;p<w;p++)if(e(D=E.contents[p])&&1<w)$?P=D.clone(1,1):x.append(D.clone(1,1));else if(D.type==CKEDITOR.NODE_ELEMENT&&D.isBlockBoundary()){N&&!D.getDirection()&&D.setAttribute("dir",S),H=D;var z=R.getAttribute("style");z&&H.setAttribute("style",z.replace(/([^;])$/,"$1;")+(H.getAttribute("style")||"")),A&&D.addClass(A),H=null,P&&(x.append(P),P=null),x.append(D.clone(1,1))}else $?(H||(H=y.createElement(L),x.append(H),N&&H.setAttribute("dir",S)),F&&H.setAttribute("style",F),A&&H.setAttribute("class",A),P&&(H.append(P),P=null),H.append(D.clone(1,1))):x.append(D.clone(1,1));P&&((H||x).append(P),P=null),x.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&k!=g.length-1&&(CKEDITOR.env.needsBrFiller&&(S=x.getLast())&&S.type==CKEDITOR.NODE_ELEMENT&&S.is("br")&&S.remove(),(S=x.getLast(n))&&S.type==CKEDITOR.NODE_ELEMENT&&S.is(CKEDITOR.dtd.$block)||x.append(y.createElement("br"))),"div"!=(S=x.$.nodeName.toLowerCase())&&"p"!=S||x.appendBogus(),C.append(x),N=null,k++}if(H=null,g.length<=k||Math.max(g[k].indent,0)<b)break}if(I)for(g=C.getFirst();g;){if(g.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(I,g),g.getName()in CKEDITOR.dtd.$listItem&&(y=O=K=void 0,K=(_=g).getDirection()))){for(O=_.getParent();O&&!(y=O.getDirection());)O=O.getParent();K==y&&_.removeAttribute("dir")}g=g.getNextSourceNode()}return{listNode:C,nextIndex:k}}};var h=/^h[1-6]$/,T=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);o.prototype={exec:function(g){function I(A){return l[A.root.getName()]&&!function _(A,F){return CKEDITOR.tools.array.filter(A.getChildren().toArray(),function($){return-1===CKEDITOR.tools.array.indexOf(F,$.type)}).length}(A.root,[CKEDITOR.NODE_COMMENT])}function K(A){var F=!0;return 0!==A.getChildCount()&&(A.forEach(function($){if($.type!==CKEDITOR.NODE_COMMENT)return F=!1},null,!0),F)}this.refresh(g,g.elementPath());var O=g.config,p=g.getSelection(),y=p&&p.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((C=g.editable()).getFirst(n)){var N=1==y.length&&y[0];(O=N&&N.getEnclosedNode())&&O.is&&this.type==O.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else O.enterMode==CKEDITOR.ENTER_BR?C.appendBogus():y[0].fixBlock(1,O.enterMode==CKEDITOR.ENTER_P?"p":"div"),p.selectRanges(y);O=p.createBookmarks(!0);for(var C=[],k={},b=(y=y.createIterator(),0);(N=y.getNextRange())&&++b;){var x=N.getBoundaryNodes(),H=x.endNode;for((S=x.startNode).type==CKEDITOR.NODE_ELEMENT&&"td"==S.getName()&&N.setStartAt(x.startNode,CKEDITOR.POSITION_AFTER_START),H.type==CKEDITOR.NODE_ELEMENT&&"td"==H.getName()&&N.setEndAt(x.endNode,CKEDITOR.POSITION_BEFORE_END),(N=N.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;x=N.getNextParagraph();)if(!x.getCustomData("list_block")&&!K(x)){CKEDITOR.dom.element.setMarker(k,x,"list_block",1);for(var E,S=(L=g.elementPath(x)).elements,L=(H=0,L.blockLimit),R=S.length-1;0<=R&&(E=S[R]);R--)if(l[E.getName()]&&L.contains(E)){L.removeCustomData("list_group_object_"+b),(S=E.getCustomData("list_group_object"))?S.contents.push(x):(C.push(S={root:E,contents:[x]}),CKEDITOR.dom.element.setMarker(k,E,"list_group_object",S)),H=1;break}H||((H=L).getCustomData("list_group_object_"+b)?H.getCustomData("list_group_object_"+b).contents.push(x):(S={root:H,contents:[x]},CKEDITOR.dom.element.setMarker(k,H,"list_group_object_"+b,S),C.push(S)))}}for(E=[];0<C.length;)S=C.shift(),this.state==CKEDITOR.TRISTATE_OFF?I(S)||(l[S.root.getName()]?v.call(this,g,S,k,E):t.call(this,g,S,E)):this.state==CKEDITOR.TRISTATE_ON&&l[S.root.getName()]&&!I(S)&&c.call(this,g,S,k);for(R=0;R<E.length;R++)a(E[R]);CKEDITOR.dom.element.clearAllMarkers(k),p.selectBookmarks(O),g.focus()},refresh:function(g,I){var _=I.contains(l,1);_&&(I.blockLimit||I.root).contains(_)?this.setState(_.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(g){g.blockless||(g.addCommand("numberedlist",new o("numberedlist","ol")),g.addCommand("bulletedlist",new o("bulletedlist","ul")),g.ui.addButton&&(g.ui.addButton("NumberedList",{label:g.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),g.ui.addButton("BulletedList",{label:g.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),g.on("key",function(I){var K,_=I.data.domEvent.getKey();if("wysiwyg"==g.mode&&_ in{8:1,46:1}){var O=g.getSelection().getRanges()[0],p=O&&O.startPath();if(O&&O.collapsed){var k,y=8==_,C=g.editable(),N=new CKEDITOR.dom.walker(O.clone());if(N.evaluator=function(x){return n(x)&&!u(x)},N.guard=function(x,S){return!(S&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("table"))},_=O.clone(),y)if((k=p.contains(l))&&O.checkBoundaryOfElement(k,CKEDITOR.START)&&(k=k.getParent())&&k.is("li")&&(k=i(k))?(K=k,k=k.getPrevious(n),_.moveToPosition(k&&u(k)?k:K,CKEDITOR.POSITION_BEFORE_START)):(N.range.setStartAt(C,CKEDITOR.POSITION_AFTER_START),N.range.setEnd(O.startContainer,O.startOffset),(k=N.previous())&&k.type==CKEDITOR.NODE_ELEMENT&&(k.getName()in l||k.is("li"))&&(k.is("li")||(N.range.selectNodeContents(k),N.reset(),N.evaluator=f,k=N.previous()),_.moveToElementEditEnd(K=k),_.moveToPosition(_.endPath().block,CKEDITOR.POSITION_BEFORE_END))),K)d(g,_,O),I.cancel();else{var b=p.contains(l);b&&O.checkBoundaryOfElement(b,CKEDITOR.START)&&(K=b.getFirst(n),O.checkBoundaryOfElement(K,CKEDITOR.START)&&(k=b.getPrevious(n),i(K)?k&&(O.moveToElementEditEnd(k),O.select()):g.execCommand("outdent"),I.cancel()))}else if(K=p.contains("li")){if(N.range.setEndAt(C,CKEDITOR.POSITION_BEFORE_END),y=(C=K.getLast(n))&&f(C)?C:K,p=0,(k=N.next())&&k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in l&&k.equals(C)?(p=1,k=N.next()):O.checkBoundaryOfElement(y,CKEDITOR.END)&&(p=2),p&&k){if((O=O.clone()).moveToElementEditStart(k),1==p&&(_.optimize(),!_.startContainer.equals(K))){for(K=_.startContainer;K.is(CKEDITOR.dtd.$inline);)b=K,K=K.getParent();b&&_.moveToPosition(b,CKEDITOR.POSITION_AFTER_END)}2==p&&(_.moveToPosition(_.endPath().block,CKEDITOR.POSITION_BEFORE_END),O.endPath().block&&O.moveToPosition(O.endPath().block,CKEDITOR.POSITION_AFTER_START)),d(g,_,O),I.cancel()}}else N.range.setEndAt(C,CKEDITOR.POSITION_BEFORE_END),(k=N.next())&&k.type==CKEDITOR.NODE_ELEMENT&&k.is(l)&&(k=k.getFirst(n),p.block&&O.checkStartOfBlock()&&O.checkEndOfBlock()?(p.block.remove(),O.moveToElementEditStart(k),O.select()):i(k)?(O.moveToElementEditStart(k),O.select()):((O=O.clone()).moveToElementEditStart(k),d(g,_,O)),I.cancel());setTimeout(function(){g.selectionChange(1)})}}}))}})}(),function(){function v(l,r,e){if(e=l.config.forceEnterMode||e,"wysiwyg"==l.mode){r||(r=l.activeEnterMode);var n=l.elementPath();n&&!n.isContextFor("p")&&(r=CKEDITOR.ENTER_BR,e=1),l.fire("saveSnapshot"),r==CKEDITOR.ENTER_BR?f(l,r,null,e):d(l,r,null,e),l.fire("saveSnapshot")}}function t(l){for(var r=(l=l.getSelection().getRanges(!0)).length-1;0<r;r--)l[r].deleteContents();return l[0]}CKEDITOR.plugins.add("enterkey",{init:function(r){r.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(n){v(n)}}),r.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(n){v(n,n.activeShiftEnterMode,1)}}),r.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var a,f,d,i,o=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(r,e,n,u){if(n=n||t(r)){n=function c(l){var r=l.startContainer.getAscendant(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")},!0);return l.root.equals(r)?l:((r=new CKEDITOR.dom.range(r)).moveToRange(l),r)}(n);var O,T=n.document,m=n.checkStartOfBlock(),g=n.checkEndOfBlock(),I=r.elementPath(n.startContainer),_=I.block,K=e==CKEDITOR.ENTER_DIV?"div":"p";if(_&&m&&g){if((m=_.getParent()).is("li")&&1<m.getChildCount())return T=new CKEDITOR.dom.element("li"),O=r.createRange(),T.insertAfter(m),_.remove(),O.setStart(T,0),void r.getSelection().selectRanges([O]);if(_.is("li")||_.getParent().is("li")){_.is("li")||(m=(_=_.getParent()).getParent()),O=m.getParent(),n=!_.hasPrevious();var p=!_.hasNext(),y=(K=(u=r.getSelection()).createBookmarks(),_.getDirection(1)),C=(g=_.getAttribute("class"),_.getAttribute("style")),N=O.getDirection(1)!=y;if(r=r.enterMode!=CKEDITOR.ENTER_BR||N||C||g,O.is("li"))n||p?(n&&p&&m.remove(),_[p?"insertAfter":"insertBefore"](O)):_.breakParent(O);else{if(r)I.block.is("li")?(O=T.createElement(e==CKEDITOR.ENTER_P?"p":"div"),N&&O.setAttribute("dir",y),C&&O.setAttribute("style",C),g&&O.setAttribute("class",g),_.moveChildren(O)):O=I.block,n||p?O[n?"insertBefore":"insertAfter"](m):(_.breakParent(m),O.insertAfter(m));else if(_.appendBogus(!0),n||p)for(;T=_[n?"getFirst":"getLast"]();)T[n?"insertBefore":"insertAfter"](m);else for(_.breakParent(m);T=_.getLast();)T.insertAfter(m);_.remove()}return void u.selectBookmarks(K)}if(_&&_.getParent().is("blockquote"))return _.breakParent(_.getParent()),_.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||_.getPrevious().remove(),_.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||_.getNext().remove(),n.moveToElementEditStart(_),void n.select()}else if(_&&_.is("pre")&&!g)return void f(r,e,n,u);if(C=n.splitBlock(K)){if(r=C.previousBlock,m=C.wasStartOfBlock,g=C.wasEndOfBlock,(_=C.nextBlock)?(p=_.getParent()).is("li")&&(_.breakParent(p),_.move(_.getNext(),1)):r&&(p=r.getParent())&&p.is("li")&&(r.breakParent(p),p=r.getNext(),n.moveToElementEditStart(p),r.move(r.getPrevious())),m||g)if(function h(k){var b;return k!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],I.lastElement.getName())&&1===I.lastElement.getChildCount()&&((b=(k=I.lastElement.getChild(0).clone(!0)).getBogus())&&b.remove(),!k.getText().length)}(e))n.moveToElementEditStart(n.getTouchedStartNode());else{if(r?(r.is("li")||!i.test(r.getName())&&!r.is("pre"))&&(O=r.clone()):_&&(O=_.clone()),O?u&&!O.is("li")&&O.renameNode(K):p&&p.is("li")?O=p:(O=T.createElement(K),r&&(y=r.getDirection())&&O.setAttribute("dir",y)),T=C.elementPath)for(e=0,u=T.elements.length;e<u&&!(K=T.elements[e]).equals(T.block)&&!K.equals(T.blockLimit);e++)CKEDITOR.dtd.$removeEmpty[K.getName()]&&(K=K.clone(),O.moveChildren(K),O.append(K));O.appendBogus(),O.getParent()||n.insertNode(O),O.is("li")&&O.removeAttribute("value"),!CKEDITOR.env.ie||!m||g&&r.getChildCount()||(n.moveToElementEditStart(g?r:O),n.select()),n.moveToElementEditStart(m&&!g?_:O)}else _.is("li")&&((O=n.clone()).selectNodeContents(_),(O=new CKEDITOR.dom.walker(O)).evaluator=function(k){return!(s(k)||o(k)||k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in CKEDITOR.dtd.$inline&&!(k.getName()in CKEDITOR.dtd.$empty))},(p=O.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?T.createElement("br"):T.createText("\xa0")).insertBefore(p)),_&&n.moveToElementEditStart(_);n.select(),n.scrollIntoView()}}},enterBr:function(r,e,n,u){if(n=n||t(r)){var h=n.document,T=n.checkEndOfBlock(),m=new CKEDITOR.dom.elementPath(r.getSelection().getStartElement()),g=m.block,I=g&&m.block.getName();u||"li"!=I?(!u&&T&&i.test(I)?(T=g.getDirection())?((h=h.createElement("div")).setAttribute("dir",T),h.insertAfter(g),n.setStart(h,0)):(h.createElement("br").insertAfter(g),CKEDITOR.env.gecko&&h.createText("").insertAfter(g),n.setStartAt(g.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(r="pre"==I&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?h.createText("\r"):h.createElement("br"),n.deleteContents(),n.insertNode(r),CKEDITOR.env.needsBrFiller?(h.createText("\ufeff").insertAfter(r),T&&(g||m.blockLimit).appendBogus(),r.getNext().$.nodeValue="",n.setStartAt(r.getNext(),CKEDITOR.POSITION_AFTER_START)):n.setStartAt(r,CKEDITOR.POSITION_AFTER_END)),n.collapse(!0),n.select(),n.scrollIntoView()):d(r,e,n,u)}}},a=CKEDITOR.plugins.enterkey,f=a.enterBr,d=a.enterBlock,i=/^h[1-6]$/}(),function(){function v(t,c){var o={},s=[],a={nbsp:"\xa0",shy:"\xad",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(t=(t=t.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(l,r){var e=c?"&"+r+";":a[r];return o[e]=c?a[r]:"&"+r+";",s.push(e),""})).replace(/,$/,""),!c&&t){t=t.split(",");var d,f=document.createElement("div");for(f.innerHTML="&"+t.join(";&")+";",d=f.innerHTML,f=null,f=0;f<d.length;f++){var i=d.charAt(f);o[i]="&"+t[f]+";",s.push(i)}}return o.regex=s.join(c?"|":""),o}CKEDITOR.plugins.add("entities",{afterInit:function(c){function o(e){return l[e]}function s(e){return"force"!=a.entities_processNumerical&&d[e]?d[e]:"&#"+e.charCodeAt(0)+";"}var a=c.config;if(c=(c=c.dataProcessor)&&c.htmlFilter){var f=[];!1!==a.basicEntities&&f.push("nbsp,gt,lt,amp"),a.entities&&(f.length&&f.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),a.entities_latin&&f.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),a.entities_greek&&f.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),a.entities_additional&&f.push(a.entities_additional));var d=v(f.join(",")),i=d.regex?"["+d.regex+"]":"a^";delete d.regex,a.entities&&a.entities_processNumerical&&(i="[^ -~]|"+i),i=new RegExp(i,"g");var l=v("nbsp,gt,lt,amp,shy",!0),r=new RegExp(l.regex,"g");c.addRules({text:function(n){return n.replace(r,o).replace(i,s)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(t,c,o,s){o=o||"70%","string"==typeof(c=c||"80%")&&1<c.length&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.width*parseInt(c,10)/100,10)),"string"==typeof o&&1<o.length&&"%"==o.substr(o.length-1,1)&&(o=parseInt(window.screen.height*parseInt(o,10)/100,10)),640>c&&(c=640),420>o&&(o=420);var a=parseInt((window.screen.height-o)/2,10),f=parseInt((window.screen.width-c)/2,10);s=(s||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+c+",height="+o+",top="+a+",left="+f;var d=window.open("",null,s,!0);if(!d)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(d.moveTo(f,a),d.resizeTo(c,o)),d.focus(),d.location.href=t}catch(i){window.open(t,null,s,!0)}return!0}}),function(){function v(s){this.editor=s,this.loaders=[]}function t(s,a,f){var d=s.config.fileTools_defaultFileName;this.editor=s,this.lang=s.lang,"string"==typeof a?(this.data=a,this.file=function c(s){var a=s.match(o)[1];s=s.replace(o,""),s=atob(s);var d,i,l,r,f=[];for(d=0;d<s.length;d+=512){for(i=s.slice(d,d+512),l=Array(i.length),r=0;r<i.length;r++)l[r]=i.charCodeAt(r);i=new Uint8Array(l),f.push(i)}return new Blob(f,{type:a})}(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=a,this.total=this.file.size,this.loaded=0),f?this.fileName=f:this.file.name?this.fileName=this.file.name:(s=this.file.type.split("/"),d&&(s[0]=d),this.fileName=s.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}CKEDITOR.plugins.add("filetools",{beforeInit:function(a){a.uploadRepository=new v(a),a.on("fileUploadRequest",function(f){var d=f.data.fileLoader;d.xhr.open("POST",d.uploadUrl,!0),f.data.requestData.upload={file:d.file,name:d.fileName}},null,null,5),a.on("fileUploadRequest",function(f){var d=f.data.fileLoader,i=new FormData;f=f.data.requestData;var r,e,l=a.config.fileTools_requestHeaders;for(e in f){var n=f[e];"object"==typeof n&&n.file?i.append(e,n.file,n.name):i.append(e,n)}if(i.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),l)for(r in l)d.xhr.setRequestHeader(r,l[r]);d.xhr.send(i)},null,null,999),a.on("fileUploadResponse",function(f){var d=f.data.fileLoader,i=d.xhr,l=f.data;try{var r=JSON.parse(i.responseText);if(r.error&&r.error.message&&(l.message=r.error.message),r.uploaded)for(var e in r)l[e]=r[e];else f.cancel()}catch(n){l.message=d.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:i.responseText}),f.cancel()}},null,null,999)}}),v.prototype={create:function(a,f,d){var i=this.loaders.length;return(a=new(d=d||t)(this.editor,a,f)).id=i,this.loaders[i]=a,this.fire("instanceCreated",a),a},isFinished:function(){for(var a=0;a<this.loaders.length;++a)if(!this.loaders[a].isFinished())return!1;return!0}},t.prototype={loadAndUpload:function(a,f){var d=this;this.once("loaded",function(i){i.cancel(),d.once("update",function(l){l.cancel()},null,null,0),d.upload(a,f)},null,null,0),this.load()},load:function(){var a=this,f=this.reader=new FileReader;a.changeStatus("loading"),this.abort=function(){a.reader.abort()},f.onabort=function(){a.changeStatus("abort")},f.onerror=function(){a.message=a.lang.filetools.loadError,a.changeStatus("error")},f.onprogress=function(d){a.loaded=d.loaded,a.update()},f.onload=function(){a.loaded=a.total,a.data=f.result,a.changeStatus("loaded")},f.readAsDataURL(this.file)},upload:function(a,f){var d=f||{};a?(this.uploadUrl=a,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:d})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function a(){"error"!=d.status&&(d.message=d.lang.filetools.networkError,d.changeStatus("error"))}function f(){"abort"!=d.status&&d.changeStatus("abort")}var d=this,i=this.xhr;d.abort=function(){i.abort(),f()},i.onerror=a,i.onabort=f,i.upload?(i.upload.onprogress=function(l){l.lengthComputable&&(d.uploadTotal||(d.uploadTotal=l.total),d.uploaded=l.loaded,d.update())},i.upload.onerror=a,i.upload.onabort=f):(d.uploadTotal=d.total,d.update()),i.onload=function(){if(d.update(),"abort"!=d.status)if(d.uploaded=d.uploadTotal,200>i.status||299<i.status)d.message=d.lang.filetools["httpError"+i.status],d.message||(d.message=d.lang.filetools.httpError.replace("%1",i.status)),d.changeStatus("error");else{for(var l={fileLoader:d},r=["message","fileName","url"],e=d.editor.fire("fileUploadResponse",l),n=0;n<r.length;n++){var u=r[n];"string"==typeof l[u]&&(d[u]=l[u])}d.responseData=l,delete d.responseData.fileLoader,d.changeStatus(!1===e?"error":"uploaded")}}},changeStatus:function(a){this.status=a,("error"==a||"abort"==a||"loaded"==a||"uploaded"==a)&&(this.abort=function(){}),this.fire(a),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(v.prototype),CKEDITOR.event.implementOn(t.prototype);var o=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:v,fileLoader:t,getUploadUrl:function(a,f){var d=CKEDITOR.tools.capitalize;return f&&a[f+"UploadUrl"]?a[f+"UploadUrl"]:a.uploadUrl?a.uploadUrl:f&&a["filebrowser"+d(f,1)+"UploadUrl"]?a["filebrowser"+d(f,1)+"UploadUrl"]+"&responseType=json":a.filebrowserUploadUrl?a.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(a,f){return!!a.type.match(f)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function v(e,n){var u=[];if(!n)return e;for(var h in n)u.push(h+"="+encodeURIComponent(n[h]));return e+(-1!=e.indexOf("?")?"&":"?")+u.join("&")}function t(e){return!e.match(/command=QuickUpload/)||e.match(/(\?|&)responseType=json/)?e:v(e,{responseType:"json"})}function c(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function o(){var e=(u=this.getDialog()).getParentEditor();e._.filebrowserSe=this;var n=e.config["filebrowser"+c(u.getName())+"WindowWidth"]||e.config.filebrowserWindowWidth||"80%",u=e.config["filebrowser"+c(u.getName())+"WindowHeight"]||e.config.filebrowserWindowHeight||"70%",h=this.filebrowser.params||{};h.CKEditor=e.name,h.CKEditorFuncNum=e._.filebrowserFn,h.langCode||(h.langCode=e.langCode),h=v(this.filebrowser.url,h),e.popup(h,n,u,e.config.filebrowserWindowFeatures||e.config.fileBrowserWindowFeatures)}function s(e){var n=new CKEDITOR.dom.element(e.$.form);n&&((e=n.$.elements.ckCsrfToken)?e=new CKEDITOR.dom.element(e):((e=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),n.append(e)),e.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function a(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!(!e.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!e.getContentElement(this.for[0],this.for[1]).getAction())}function f(e,n,u){var h=u.params||{};h.CKEditor=e.name,h.CKEditorFuncNum=e._.filebrowserFn,h.langCode||(h.langCode=e.langCode),n.action=v(u.url,h),n.filebrowser=u}function d(e,n,u,h){if(h&&h.length)for(var T,m=h.length;m--;)if("hbox"!=(T=h[m]).type&&"vbox"!=T.type&&"fieldset"!=T.type||d(e,n,u,T.children),T.filebrowser)if("string"==typeof T.filebrowser&&(T.filebrowser={action:"fileButton"==T.type?"QuickUpload":"Browse",target:T.filebrowser}),"Browse"==T.filebrowser.action){var g=T.filebrowser.url;void 0===g&&void 0===(g=e.config["filebrowser"+c(n)+"BrowseUrl"])&&(g=e.config.filebrowserBrowseUrl),g&&(T.onClick=o,T.filebrowser.url=g,T.hidden=!1)}else if("QuickUpload"==T.filebrowser.action&&T.for&&(void 0===(g=T.filebrowser.url)&&void 0===(g=e.config["filebrowser"+c(n)+"UploadUrl"])&&(g=e.config.filebrowserUploadUrl),g)){var I=T.onClick;T.onClick=function(_){var K=_.sender,O=K.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),p=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!I||!1!==I.call(K,_))&&!!a.call(K,_)&&("form"!==e.config.filebrowserUploadMethod&&p?((_=e.uploadRepository.create(O.$.files[0])).on("uploaded",function(y){var C=y.sender.responseData;r.call(y.sender.editor,C.url,C.message)}),_.on("error",i.bind(this)),_.on("abort",i.bind(this)),_.loadAndUpload(t(g)),"xhr"):(s(O),!0))},T.filebrowser.url=g,T.hidden=!1,f(e,u.getContents(T.for[0]).get(T.for[1]),T.filebrowser)}}function i(e){var n={};try{n=JSON.parse(e.sender.xhr.response)||{}}catch(u){}this.enable(),alert(n.error?n.error.message:e.sender.message)}function l(e,n,u){if(-1!==u.indexOf(";")){u=u.split(";");for(var h=0;h<u.length;h++)if(l(e,n,u[h]))return!0;return!1}return(e=e.getContents(n).get(u).filebrowser)&&e.url}function r(e,n){var u=this._.filebrowserSe.getDialog(),h=this._.filebrowserSe.for,T=this._.filebrowserSe.filebrowser.onSelect;h&&u.getContentElement(h[0],h[1]).reset(),("function"!=typeof n||!1!==n.call(this._.filebrowserSe))&&(!T||!1!==T.call(this._.filebrowserSe,e,n))&&("string"==typeof n&&n&&alert(n),e&&(u=(h=this._.filebrowserSe).getDialog(),h=h.filebrowser.target||null)&&(h=h.split(":"),(T=u.getContentElement(h[0],h[1]))&&(T.setValue(e),u.selectPage(h[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(n){n._.filebrowserFn=CKEDITOR.tools.addFunction(r,n),n.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(e){if(e.editor.plugins.filebrowser)for(var u,n=e.data.definition,h=0;h<n.contents.length;++h)(u=n.contents[h])&&(d(e.editor,e.data.name,n,u.elements),u.hidden&&u.filebrowser&&(u.hidden=!l(n,u.id,u.filebrowser)))})}(),function(){var t=CKEDITOR.document.getWindow(),c=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(s){s.on("loaded",function(){!function v(o){var s=o.config,a=o.fire("uiSpace",{space:"top",html:""}).html,f=function(){function e(C,N,k){i.setStyle(N,c(k)),i.setStyle("position",C)}function n(C){var N=h.getDocumentPosition();switch(C){case"top":e("absolute","top",N.y-I-O);break;case"pin":e("fixed","top",y);break;case"bottom":e("absolute","top",N.y+(m.height||m.bottom-m.top)+O)}u=C}var u,h,T,m,g,I,_,K=s.floatSpaceDockedOffsetX||0,O=s.floatSpaceDockedOffsetY||0,p=s.floatSpacePinnedOffsetX||0,y=s.floatSpacePinnedOffsetY||0;return function(C){if(h=o.editable()){var N=C&&"focus"==C.name;N&&i.show(),o.fire("floatingSpaceLayout",{show:N}),i.removeStyle("left"),i.removeStyle("right"),T=i.getClientRect(),m=h.getClientRect(),g=t.getViewPaneSize(),I=T.height,_="pageXOffset"in t.$?t.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,u?(n(I+O<=m.top?"top":I+O>g.height-m.bottom?"pin":"bottom"),C=g.width/2,C=s.floatSpacePreferRight?"right":0<m.left&&m.right<g.width&&m.width>T.width?"rtl"==s.contentsLangDirection?"right":"left":C-m.left>m.right-C?"left":"right",T.width>g.width?(C="left",N=0):(N="left"==C?0<m.left?m.left:0:m.right<g.width?g.width-m.right:0)+T.width>g.width&&(C="left"==C?"right":"left",N=0),i.setStyle(C,c(("pin"==u?p:K)+N+("pin"==u?0:"left"==C?_:-_)))):(u="pin",n("pin"),f(C))}}}();if(a){var d=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(o.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(o.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),i=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(d.output({content:a,id:o.id,langDir:o.lang.dir,langCode:o.langCode,name:o.name,style:"display:none;z-index:"+(s.baseFloatZIndex-1),topId:o.ui.spaceId("top"),voiceLabel:o.title}))),l=CKEDITOR.tools.eventsBuffer(500,f),r=CKEDITOR.tools.eventsBuffer(100,f);i.unselectable(),i.on("mousedown",function(e){(e=e.data).getTarget().hasAscendant("a",1)||e.preventDefault()}),o.on("focus",function(e){f(e),o.on("change",l.input),t.on("scroll",r.input),t.on("resize",r.input)}),o.on("blur",function(){i.hide(),o.removeListener("change",l.input),t.removeListener("scroll",r.input),t.removeListener("resize",r.input)}),o.on("destroy",function(){t.removeListener("scroll",r.input),t.removeListener("resize",r.input),i.clearCustomData(),i.remove()}),o.focusManager.hasFocus&&i.show(),o.focusManager.add(i,1)}}(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var t=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),c=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),o=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),s=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,f){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),f))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(f,d){var i=(d=d||{}).attributes||(d.attributes={});(this.multiSelect=!!d.multiSelect)&&(i["aria-multiselectable"]=!0),!i.role&&(i.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",i.role),(i=this.keys)[40]="next",i[9]="next",i[38]="prev",i[CKEDITOR.SHIFT+9]="prev",i[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(i[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var f=t.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(f),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(f){var d=this.toggle(f);this.onClick&&this.onClick(f,d)},this)),this._.click}},proto:{add:function(f,d,i){var l=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[f]=l,f={id:l,val:CKEDITOR.tools.htmlEncodeAttr(f).replace(s,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(i||f),text:d||f},this._.pendingList.push(c.output(f))},startGroup:function(f){this._.close();var d=CKEDITOR.tools.getNextId();this._.groups[f]=d,this._.pendingHtml.push(o.output({id:d,label:f}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(f){var d=this.isMarked(f);return d?this.unmark(f):this.mark(f),!d},hideGroup:function(f){var d=(f=this.element.getDocument().getById(this._.groups[f]))&&f.getNext();f&&(f.setStyle("display","none"),d&&"ul"==d.getName()&&d.setStyle("display","none"))},hideItem:function(f){this.element.getDocument().getById(this._.items[f]).setStyle("display","none")},showAll:function(){var l,f=this._.items,d=this._.groups,i=this.element.getDocument();for(l in f)i.getById(f[l]).setStyle("display","");for(var r in d)l=(f=i.getById(d[r])).getNext(),f.setStyle("display",""),l&&"ul"==l.getName()&&l.setStyle("display","")},mark:function(f){this.multiSelect||this.unmarkAll(),f=this._.items[f];var d=this.element.getDocument().getById(f);d.addClass("cke_selected"),this.element.getDocument().getById(f+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(d)},markFirstDisplayed:function(){var f=this;this._.markFirstDisplayed(function(){f.multiSelect||f.unmarkAll()})},unmark:function(f){var d=this.element.getDocument(),i=d.getById(f=this._.items[f]);i.removeClass("cke_selected"),d.getById(f+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(i)},unmarkAll:function(){var i,f=this._.items,d=this.element.getDocument();for(i in f){var l=f[i];d.getById(l).removeClass("cke_selected"),d.getById(l+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(f){return this.element.getDocument().getById(this._.items[f]).hasClass("cke_selected")},focus:function(f){this._.focusIndex=-1;var i,d=this.element.getElementsByTag("a"),l=-1;if(f){for(i=this.element.getDocument().getById(this._.items[f]).getFirst();f=d.getItem(++l);)if(f.equals(i)){this._.focusIndex=l;break}}else this.element.focus();i&&setTimeout(function(){i.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var v='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(v+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(v+=' onblur="this.style.cssText = this.style.cssText;"'),v=v+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var t=CKEDITOR.addTemplate("combo",v);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(o){CKEDITOR.tools.extend(this,o,{canGroup:!1,title:o.label,modes:{wysiwyg:1},editorFocus:1}),o=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=o.parent&&o.parent.getDocument()||CKEDITOR.document,o.className="cke_combopanel",o.block={multiSelect:o.multiSelect,attributes:o.attributes},o.toolbarRelated=!0,this._={panelDefinition:o,items:{},listeners:[]}},proto:{renderHtml:function(o){var s=[];return this.render(o,s),s.join("")},render:function(o,s){function a(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var h=this.modes[o.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;o.readOnly&&!this.readOnly&&(h=CKEDITOR.TRISTATE_DISABLED),this.setState(h),this.setValue(""),h!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var f=CKEDITOR.env,d="cke_"+this.id,i=CKEDITOR.tools.addFunction(function(h){u&&(o.unlockSelection(1),u=0),r.execute(h)},this),l=this,r={id:d,combo:this,focus:function(){CKEDITOR.document.getById(d).getChild(1).focus()},execute:function(T){var m=l._;if(m.state!=CKEDITOR.TRISTATE_DISABLED)if(l.createPanel(o),m.on)m.panel.hide();else{l.commit();var g=l.getValue();g?m.list.mark(g):m.list.unmarkAll(),m.panel.showBlock(l.id,new CKEDITOR.dom.element(T),4)}},clickFn:i};this._.listeners.push(o.on("activeFilterChange",a,this)),this._.listeners.push(o.on("mode",a,this)),this._.listeners.push(o.on("selectionChange",a,this)),!this.readOnly&&this._.listeners.push(o.on("readOnly",a,this));var e=CKEDITOR.tools.addFunction(function(h,T){var m=(h=new CKEDITOR.dom.event(h)).getKeystroke();switch(m){case 13:case 32:case 40:CKEDITOR.tools.callFunction(i,T);break;default:r.onkey(r,m)}h.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){r.onfocus&&r.onfocus()}),u=0;return r.keyDownFn=e,f={id:d,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:f.gecko&&!f.hc?"":(this.title||"").replace("'",""),keydownFn:e,focusFn:n,clickFn:i},t.output(f,s),this.onRender&&this.onRender(),r},createPanel:function(o){if(!this._.panel){var s=this._.panelDefinition.block,a=(i=this._.panelDefinition).parent||CKEDITOR.document.getBody(),f="cke_combopanel__"+this.name,d=new CKEDITOR.ui.floatPanel(o,a,i),i=d.addListBlock(this.id,s),l=this;d.onShow=function(){this.element.addClass(f),l.setState(CKEDITOR.TRISTATE_ON),l._.on=1,l.editorFocus&&!o.focusManager.hasFocus&&o.focus(),l.onOpen&&l.onOpen()},d.onHide=function(r){this.element.removeClass(f),l.setState(l.modes&&l.modes[o.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),l._.on=0,!r&&l.onClose&&l.onClose()},d.onEscape=function(){d.hide(1)},i.onClick=function(r,e){l.onClick&&l.onClick.call(l,r,e),d.hide()},this._.panel=d,this._.list=i,d.getBlock(this.id).onHide=function(){l._.on=0,l.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(o,s){this._.value=o;var a=this.document.getById("cke_"+this.id+"_text");a&&(o||s?a.removeClass("cke_combo_inlinelabel"):(s=this.label,a.addClass("cke_combo_inlinelabel")),a.setText(void 0!==s?s:o))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(o){this._.list.mark(o)},hideItem:function(o){this._.list.hideItem(o)},hideGroup:function(o){this._.list.hideGroup(o)},showAll:function(){this._.list.showAll()},add:function(o,s,a){this._.items[o]=a||o,this._.list.add(o,s,a)},startGroup:function(o){this._.list.startGroup(o)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(o){if(this._.state!=o){var s=this.document.getById("cke_"+this.id);s.setState(o,"cke_combo"),o==CKEDITOR.TRISTATE_DISABLED?s.setAttribute("aria-disabled",!0):s.removeAttribute("aria-disabled"),this._.state=o}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,function(o){o.removeListener()}),this._.listeners=[]}},statics:{handler:{create:function(o){return new CKEDITOR.ui.richCombo(o)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(c,o){this.add(c,CKEDITOR.UI_RICHCOMBO,o)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(t){if(!t.blockless){for(var c=t.config,o=t.lang.format,s=c.format_tags.split(";"),a={},f=0,d=[],i=0;i<s.length;i++){var l=s[i],r=new CKEDITOR.style(c["format_"+l]);(!t.filter.customConfig||t.filter.check(r))&&(f++,a[l]=r,a[l]._.enterMode=t.config.enterMode,d.push(r))}0!==f&&t.ui.addRichCombo("Format",{label:o.label,title:o.panelTitle,toolbar:"styles,20",allowedContent:d,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":o.panelTitle}},init:function(){for(var n in this.startGroup(o.panelTitle),a){var u=o["tag_"+n];this.add(n,a[n].buildPreview(u),u)}},onClick:function(n){t.focus(),t.fire("saveSnapshot"),n=a[n];var u=t.elementPath();n.checkActive(u,t)||t.applyStyle(n),setTimeout(function(){t.fire("saveSnapshot")},0)},onRender:function(){t.on("selectionChange",function(n){var u=this.getValue();for(var h in n=n.data.path,this.refresh(),a)if(a[h].checkActive(n,t))return void(h!=u&&this.setValue(h,t.lang.format["tag_"+h]));this.setValue("")},this)},onOpen:function(){for(var n in this.showAll(),a)t.activeFilter.check(a[n])||this.hideItem(n)},refresh:function(){var n=t.elementPath();if(n){if(n.isContextFor("p"))for(var u in a)if(t.activeFilter.check(a[u]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var v={canUndo:!1,exec:function(c){var o=c.document.createElement("hr");c.insertElement(o)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(c){c.blockless||(c.addCommand("horizontalrule",v),c.ui.addButton&&c.ui.addButton("HorizontalRule",{label:c.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(t){var c=new CKEDITOR.htmlWriter;c.forceSimpleAmpersand=t.config.forceSimpleAmpersand,c.indentationChars=t.config.dataIndentationChars||"\t",t.dataProcessor.writer=c}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var c,t=CKEDITOR.dtd;for(c in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(c,{indent:!t[c]["#"],breakBeforeOpen:1,breakBeforeClose:!t[c]["#"],breakAfterClose:1,needsSpace:c in t.$block&&!(c in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(t){var c=this._.rules[t];this._.afterCloser&&c&&c.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():c&&c.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",t),this._.afterCloser=0},openTagClose:function(t,c){var o=this._.rules[t];c?(this._.output.push(this.selfClosingEnd),o&&o.breakAfterClose&&(this._.needsSpace=o.needsSpace)):(this._.output.push(">"),o&&o.indent&&(this._.indentation+=this.indentationChars)),o&&o.breakAfterOpen&&this.lineBreak(),"pre"==t&&(this._.inPre=1)},attribute:function(t,c){"string"==typeof c&&(c=CKEDITOR.tools.htmlEncodeAttr(c),this.forceSimpleAmpersand&&(c=c.replace(/&amp;/g,"&"))),this._.output.push(" ",t,'="',c,'"')},closeTag:function(t){var c=this._.rules[t];c&&c.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():c&&c.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",t,">"),"pre"==t&&(this._.inPre=0),c&&c.breakAfterClose&&(this.lineBreak(),this._.needsSpace=c.needsSpace),this._.afterCloser=1},text:function(t){this._.indent&&(this.indentation(),!this._.inPre&&(t=CKEDITOR.tools.ltrim(t))),this._.output.push(t)},comment:function(t){this._.indent&&this.indentation(),this._.output.push("\x3c!--",t,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(t,c){var o=this._.rules[t];o?CKEDITOR.tools.extend(o,c,!0):this._.rules[t]=c}}}),function(){function v(c,o){if(o||(o=c.getSelection().getSelectedElement()),o&&o.is("img")&&!o.data("cke-realelement")&&!o.isReadOnly())return o}function t(c){var o=c.getStyle("float");return("inherit"==o||"none"==o)&&(o=0),o||(o=c.getAttribute("align")),o}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(o){if(!o.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var s="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(o,"image","advanced")&&(s="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),o.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:s,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),o.ui.addButton&&o.ui.addButton("Image",{label:o.lang.common.image,command:"image",toolbar:"insert,10"}),o.on("doubleclick",function(a){var f=a.data.element;!f.is("img")||f.data("cke-realelement")||f.isReadOnly()||(a.data.dialog="image")}),o.addMenuItems&&o.addMenuItems({image:{label:o.lang.image.menu,command:"image",group:"image"}}),o.contextMenu&&o.contextMenu.addListener(function(a){if(v(o,a))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(o){function s(a){var f=o.getCommand("justify"+a);f&&(("left"==a||"right"==a)&&f.on("exec",function(d){var i=v(o);i&&(t(i)==a?(i.removeStyle("float"),a==t(i)&&i.removeAttribute("align")):i.setStyle("float",a),d.cancel())}),f.on("refresh",function(d){var i=v(o);i&&(i=t(i),this.setState(i==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel())}))}o.plugins.image2||(s("left"),s("right"),s("center"),s("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function v(a,f){var d=o.exec(a),i=o.exec(f);if(d){if(!d[2]&&"px"==i[2])return i[1];if("px"==d[2]&&!i[2])return i[1]+"px"}return f}var t=CKEDITOR.htmlParser.cssStyle,c=CKEDITOR.tools.cssLength,o=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,s={elements:{$:function(f){var d=f.attributes;if((d=(d=(d=d&&d["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(d)))&&d.children[0])&&f.attributes["data-cke-resizable"]){var l=new t(f).rules;f=d.attributes;var i=l.width;l=l.height,i&&(f.width=v(f.width,i)),l&&(f.height=v(f.height,l))}return d}}};CKEDITOR.plugins.add("fakeobjects",{init:function(f){f.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(f){(f=(f=f.dataProcessor)&&f.htmlFilter)&&f.addRules(s,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(a,f,d,i){var l=(l=this.lang.fakeobjects)[d]||l.unknown;return f={class:f,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:l,title:l,align:a.getAttribute("align")||""},CKEDITOR.env.hc||(f.src=CKEDITOR.tools.transparentImageData),d&&(f["data-cke-real-element-type"]=d),i&&(f["data-cke-resizable"]=i,d=new t,i=a.getAttribute("width"),a=a.getAttribute("height"),i&&(d.rules.width=c(i)),a&&(d.rules.height=c(a)),d.populate(f)),this.document.createElement("img",{attributes:f})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,f,d,i){var r,l=(l=this.lang.fakeobjects)[d]||l.unknown;return r=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(r),r=r.getHtml(),f={class:f,"data-cke-realelement":encodeURIComponent(r),"data-cke-real-node-type":a.type,alt:l,title:l,align:a.attributes.align||""},CKEDITOR.env.hc||(f.src=CKEDITOR.tools.transparentImageData),d&&(f["data-cke-real-element-type"]=d),i&&(f["data-cke-resizable"]=i,i=a.attributes,a=new t,d=i.width,i=i.height,void 0!==d&&(a.rules.width=c(d)),void 0!==i&&(a.rules.height=c(i)),a.populate(f)),new CKEDITOR.htmlParser.element("img",f)},CKEDITOR.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var f=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var d=a.getStyle("width");a=a.getStyle("height"),d&&f.setAttribute("width",v(f.getAttribute("width"),d)),a&&f.setAttribute("height",v(f.getAttribute("height"),a))}return f}}(),function(){function v(g){return g.replace(/'/g,"\\$&")}function t(g){for(var I,_=g.length,K=[],O=0;O<_;O++)I=g.charCodeAt(O),K.push(I);return"String.fromCharCode("+K.join(",")+")"}function c(g,I){var O,p,_=g.plugins.link,K=_.compiledProtectionFunction.params;p=[_.compiledProtectionFunction.name,"("];for(var y=0;y<K.length;y++)O=I[_=K[y].toLowerCase()],0<y&&p.push(","),p.push("'",O?v(encodeURIComponent(I[_])):"","'");return p.push(")"),p.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function I(O){return K.replace(/%1/g,"rtl"==O?"right":"left").replace(/%2/g,"cke_contents_"+O)}var _="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",K=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+_+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+_+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(I("ltr")+I("rtl"))},init:function(I){var _="a[!href]";CKEDITOR.dialog.isTabEnabled(I,"link","advanced")&&(_=_.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(I,"link","target")&&(_=_.replace("]",",target,onclick]")),I.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:_,requiredContent:"a[href]"})),I.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),I.addCommand("unlink",new CKEDITOR.unlinkCommand),I.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),I.setKeystroke(CKEDITOR.CTRL+76,"link"),I.setKeystroke(CKEDITOR.CTRL+75,"link"),I.ui.addButton&&(I.ui.addButton("Link",{label:I.lang.link.toolbar,command:"link",toolbar:"links,10"}),I.ui.addButton("Unlink",{label:I.lang.link.unlink,command:"unlink",toolbar:"links,20"}),I.ui.addButton("Anchor",{label:I.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),I.on("doubleclick",function(K){var O=K.data.element.getAscendant({a:1,img:1},!0);O&&!O.isReadOnly()&&(O.is("a")?(K.data.dialog=!O.getAttribute("name")||O.getAttribute("href")&&O.getChildCount()?"link":"anchor",K.data.link=O):CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,O)&&(K.data.dialog="anchor"))},null,null,0),I.on("doubleclick",function(K){K.data.dialog in{link:1,anchor:1}&&K.data.link&&I.getSelection().selectElement(K.data.link)},null,null,20),I.addMenuItems&&I.addMenuItems({anchor:{label:I.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:I.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:I.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:I.lang.link.unlink,command:"unlink",group:"link",order:5}}),I.contextMenu&&I.contextMenu.addListener(function(K){if(!K||K.isReadOnly()||!(K=CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,K))&&!(K=CKEDITOR.plugins.link.getSelectedLink(I)))return null;var O={};return K.getAttribute("href")&&K.getChildCount()&&(O={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),K&&K.hasAttribute("name")&&(O.anchor=O.removeAnchor=CKEDITOR.TRISTATE_OFF),O}),this.compiledProtectionFunction=function o(g){var I;return(g=g.config.emailProtection||"")&&"encode"!=g&&(I={},g.replace(/^([^(]+)\(([^)]+)\)$/,function(_,K,O){I.name=K,I.params=[],O.replace(/[^,\s]+/g,function(p){I.params.push(p)})})),I}(I)},afterInit:function(I){I.dataProcessor.dataFilter.addRules({elements:{a:function(O){return O.attributes.name?O.children.length?null:I.createFakeParserElement(O,"cke_anchor","anchor"):null}}});var _=I._.elementsPath&&I._.elementsPath.filters;_&&_.push(function(K,O){if("a"==O&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,K)||K.getAttribute("name")&&(!K.getAttribute("href")||!K.getChildCount())))return"anchor"})}});var s=/^javascript:/,a=/^mailto:([^?]+)(?:\?(.+))?$/,f=/subject=([^;?:@&=$,\/]*)/i,d=/body=([^;?:@&=$,\/]*)/i,i=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,r=/^(_(?:self|top|parent|blank))$/,e=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,n=/^javascript:([^(]+)\(([^)]+)\)$/,u=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,h=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,T=/^tel:(.*)$/,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(I,_){var C,K=I.getSelection(),O=K.getSelectedElement(),p=K.getRanges(),y=[];if(!_&&O&&O.is("a"))return O;for(O=0;O<p.length;O++)if((C=K.getRanges()[O]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(C=I.elementPath(C.getCommonAncestor()).contains("a",1))&&_)y.push(C);else if(C)return C;return _?y:null},getEditorAnchors:function(I){for(var y,_=(K=(_=I.editable()).isInline()&&!I.plugins.divarea?I.document:_).getElementsByTag("a"),K=K.getElementsByTag("img"),O=[],p=0;y=_.getItem(p++);)(y.data("cke-saved-name")||y.hasAttribute("name"))&&O.push({name:y.data("cke-saved-name")||y.getAttribute("name"),id:y.getAttribute("id")});for(p=0;y=K.getItem(p++);)(y=this.tryRestoreFakeAnchor(I,y))&&O.push({name:y.getAttribute("name"),id:y.getAttribute("id")});return O},fakeAnchor:!0,tryRestoreFakeAnchor:function(I,_){if(_&&_.data("cke-real-element-type")&&"anchor"==_.data("cke-real-element-type")){var K=I.restoreRealElement(_);if(K.data("cke-saved-name"))return K}},parseLinkAttributes:function(I,_){var y,K=_&&(_.data("cke-saved-href")||_.getAttribute("href"))||"",O=I.plugins.link.compiledProtectionFunction,p=I.config.emailProtection,C={};if(K.match(s)&&("encode"==p?K=K.replace(e,function(b,x,S){return S=S||"","mailto:"+String.fromCharCode.apply(String,x.split(","))+S.replace(/\\'/g,"'")}):p&&K.replace(n,function(b,x,S){if(x==O.name){C.type="email",b=C.email={},x=/(^')|('$)/g;for(var E,H=(S=S.match(/[^,\s]+/g)).length,R=0;R<H;R++)E=decodeURIComponent(E=S[R].replace(x,"").replace(/\\'/g,"'")),b[O.params[R].toLowerCase()]=E;b.address=[b.name,b.domain].join("@")}})),!C.type)if(p=K.match(i))C.type="anchor",C.anchor={},C.anchor.name=C.anchor.id=p[1];else if(p=K.match(T))C.type="tel",C.tel=p[1];else if(p=K.match(a)){y=K.match(f),K=K.match(d),C.type="email";var N=C.email={};N.address=p[1],y&&(N.subject=decodeURIComponent(y[1])),K&&(N.body=decodeURIComponent(K[1]))}else K&&(y=K.match(l))&&(C.type="url",C.url={},C.url.protocol=y[1],C.url.url=y[2]);if(_){if(K=_.getAttribute("target"))C.target={type:K.match(r)?K:"frame",name:K};else if(K=(K=_.data("cke-pa-onclick")||_.getAttribute("onclick"))&&K.match(u))for(C.target={type:"popup",name:K[1]};p=h.exec(K[2]);)"yes"!=p[2]&&"1"!=p[2]||p[1]in{height:1,width:1,top:1,left:1}?isFinite(p[2])&&(C.target[p[1]]=p[2]):C.target[p[1]]=!0;var k;for(k in null!==_.getAttribute("download")&&(C.download=!0),K={},m)(p=_.getAttribute(k))&&(K[m[k]]=p);(k=_.data("cke-saved-name")||K.advName)&&(K.advName=k),CKEDITOR.tools.isEmpty(K)||(C.advanced=K)}return C},getLinkAttributes:function(I,_){var K=I.config.emailProtection||"",O={};switch(_.type){case"url":K=_.url&&void 0!==_.url.protocol?_.url.protocol:"http://";var y=_.url&&CKEDITOR.tools.trim(_.url.url)||"";O["data-cke-saved-href"]=0===y.indexOf("/")?y:K+y;break;case"anchor":K=_.anchor&&_.anchor.id,O["data-cke-saved-href"]="#"+(_.anchor&&_.anchor.name||K||"");break;case"email":switch(y=(p=_.email).address,K){case"":case"encode":var C=encodeURIComponent(p.subject||""),N=encodeURIComponent(p.body||""),p=[];C&&p.push("subject="+C),N&&p.push("body="+N),p=p.length?"?"+p.join("&"):"","encode"==K?(K=["javascript:void(location.href='mailto:'+",t(y)],p&&K.push("+'",v(p),"'"),K.push(")")):K=["mailto:",y,p];break;default:K=y.split("@",2),p.name=K[0],p.domain=K[1],K=["javascript:",c(I,p)]}O["data-cke-saved-href"]=K.join("");break;case"tel":O["data-cke-saved-href"]="tel:"+_.tel}if(_.target)if("popup"==_.target.type){K=["window.open(this.href, '",_.target.name||"","', '"];var k="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(y=k.length,C=function(A){_.target[A]&&k.push(A+"="+_.target[A])},p=0;p<y;p++)k[p]+=_.target[k[p]]?"=yes":"=no";C("width"),C("left"),C("height"),C("top"),K.push(k.join(","),"'); return false;"),O["data-cke-pa-onclick"]=K.join("")}else"notSet"!=_.target.type&&_.target.name&&(O.target=_.target.name);if(_.download&&(O.download=""),_.advanced){for(var b in m)(K=_.advanced[m[b]])&&(O[b]=K);O.name&&(O["data-cke-saved-name"]=O.name)}for(var x in O["data-cke-saved-href"]&&(O.href=O["data-cke-saved-href"]),b={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},_.advanced&&CKEDITOR.tools.extend(b,m),O)delete b[x];return{set:O,removed:CKEDITOR.tools.object.keys(b)}},showDisplayTextForElement:function(I,_){var O=_.getSelection();return!(_.widgets&&_.widgets.focused||O&&1<O.getRanges().length||I&&I.getName&&I.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(I){if(CKEDITOR.env.ie){var O,_=I.getSelection().getRanges()[0],K=_.getPreviousEditableNode()&&_.getPreviousEditableNode().getAscendant("a",!0)||_.getNextEditableNode()&&_.getNextEditableNode().getAscendant("a",!0);_.collapsed&&K&&(O=_.createBookmark(),_.selectNodeContents(K),_.select())}K=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),I.removeStyle(K),O&&(_.moveToBookmark(O),_.select())},refresh:function(I,_){var K=_.lastElement&&_.lastElement.getAscendant("a",!0);K&&"a"==K.getName()&&K.getAttribute("href")&&K.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(I){var O,_=I.getSelection(),K=_.createBookmarks();_&&(O=_.getSelectedElement())&&(O.getChildCount()?O.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,O))?O.remove(1):(O=CKEDITOR.plugins.link.getSelectedLink(I))&&(O.hasAttribute("href")?(O.removeAttributes({name:1,"data-cke-saved-name":1}),O.removeClass("cke_anchor")):O.remove(1)),_.selectBookmarks(K)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function v(V,X,Q){return e(X)&&e(Q)&&Q.equals(X.getNext(function(te){return!(U(te)||q(te)||n(te))}))}function t(V){this.upper=V[0],this.lower=V[1],this.set.apply(this,V.slice(2))}function c(V){var X=V.element;if(X&&e(X)&&(X=X.getAscendant(V.triggers,!0))&&V.editable.contains(X)){var Q=f(X);if("true"==Q.getAttribute("contenteditable"))return X;if(Q.is(V.triggers))return Q}return null}function o(V,X,Q){return K(V,X),K(V,Q),Q=Q.size.top,(V=X.size.bottom)&&Q?0|(V+Q)/2:V||Q}function s(V,X,Q){return X[Q?"getPrevious":"getNext"](function(te){return te&&te.type==CKEDITOR.NODE_TEXT&&!U(te)||e(te)&&!n(te)&&!r(V,te)})}function a(V,X,Q){return V>X&&V<Q}function f(V,X){if(V.data("cke-editable"))return null;for(X||(V=V.getParent());V&&!V.data("cke-editable");){if(V.hasAttribute("contenteditable"))return V;V=V.getParent()}return null}function d(V){var X=V.doc,Q=k('<span contenteditable="false" data-cke-magic-line="1" style="'+Z+"position:absolute;border-top:1px dashed "+V.boxColor+'"></span>',X),te=CKEDITOR.getUrl(this.path+"images/"+(b.hidpi?"hidpi/":"")+"icon"+(V.rtl?"-rtl":"")+".png");for(C(Q,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(V.editable,!0),this},lineChildren:[C(k('<span title="'+V.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',X),{base:Z+"height:17px;width:17px;"+(V.rtl?"left":"right")+":17px;background:url("+te+") center no-repeat "+V.boxColor+";cursor:pointer;"+(b.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(b.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),C(k(M,X),{base:ee+"left:0px;border-left-color:"+V.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),C(k(M,X),{base:ee+"right:0px;border-right-color:"+V.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){K(V,this);var ie=V.holdDistance,re=this.size;return!!(re&&a(V.mouse.y,re.top-ie,re.bottom+ie)&&a(V.mouse.x,re.left-ie,re.right+ie))},place:function(){var ie=V.view,re=V.editable,se=V.trigger,oe=se.upper,ae=se.lower,de=oe||ae,ce=de.getParent(),le={};for(var ue in this.trigger=se,oe&&K(V,oe,!0),ae&&K(V,ae,!0),K(V,ce,!0),V.inInlineMode&&O(V,!0),ce.equals(re)?(le.left=ie.scroll.x,le.right=-ie.scroll.x,le.width=""):(le.left=de.size.left-de.size.margin.left+ie.scroll.x-(V.inInlineMode?ie.editable.left+ie.editable.border.left:0),le.width=de.size.outerWidth+de.size.margin.left+de.size.margin.right+ie.scroll.x,le.right=""),oe&&ae?le.top=oe.size.margin.bottom===ae.size.margin.top?0|oe.size.bottom+oe.size.margin.bottom/2:oe.size.margin.bottom<ae.size.margin.top?oe.size.bottom+oe.size.margin.bottom:oe.size.bottom+oe.size.margin.bottom-ae.size.margin.top:oe?ae||(le.top=oe.size.bottom+oe.size.margin.bottom):le.top=ae.size.top-ae.size.margin.top,se.is(F)||a(le.top,ie.scroll.y-15,ie.scroll.y+5)?(le.top=V.inInlineMode?0:ie.scroll.y,this.look(F)):se.is($)||a(le.top,ie.pane.bottom-5,ie.pane.bottom+15)?(le.top=V.inInlineMode?ie.editable.height+ie.editable.padding.top+ie.editable.padding.bottom:ie.pane.bottom-1,this.look($)):(V.inInlineMode&&(le.top-=ie.editable.top+ie.editable.border.top),this.look(D)),V.inInlineMode&&(le.top--,le.top+=ie.editable.scroll.top,le.left+=ie.editable.scroll.left),le)le[ue]=CKEDITOR.tools.cssLength(le[ue]);this.setStyles(le)},look:function(ie){if(this.oldLook!=ie){for(var se,re=this.lineChildren.length;re--;)(se=this.lineChildren[re]).setAttribute("style",se.base+se.looks[0|ie/2]);this.oldLook=ie}},wrap:new N("span",V.doc)}),X=Q.lineChildren.length;X--;)Q.lineChildren[X].appendTo(Q);Q.look(D),Q.appendTo(Q.wrap),Q.unselectable(),Q.lineChildren[0].on("mouseup",function(ne){Q.detach(),i(V,function(ie){var re=V.line.trigger;ie[re.is(L)?"insertBefore":"insertAfter"](re.is(L)?re.lower:re.upper)},!0),V.editor.focus(),b.ie||V.enterMode==CKEDITOR.ENTER_BR||V.hotNode.scrollIntoView(),ne.data.preventDefault(!0)}),Q.on("mousedown",function(ne){ne.data.preventDefault(!0)}),V.line=Q}function i(V,X,Q){var ie,te=new CKEDITOR.dom.range(V.doc),ne=V.editor;b.ie&&V.enterMode==CKEDITOR.ENTER_BR?ie=V.doc.createText(w):(ie=(ie=f(V.element,!0))&&ie.data("cke-enter-mode")||V.enterMode,(ie=new N(H[ie],V.doc)).is("br")||V.doc.createText(w).appendTo(ie)),Q&&ne.fire("saveSnapshot"),X(ie),te.moveToPosition(ie,CKEDITOR.POSITION_AFTER_START),ne.getSelection().selectRanges([te]),V.hotNode=ie,Q&&ne.fire("saveSnapshot")}function l(V,X){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function Q(te){var ne=b.ie&&9>b.version?" ":w,ie=V.hotNode&&V.hotNode.getText()==ne&&V.element.equals(V.hotNode)&&V.lastCmdDirection===!!X;i(V,function(re){ie&&V.hotNode&&V.hotNode.remove(),re[X?"insertAfter":"insertBefore"](te),re.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!X}),V.lastCmdDirection=!!X}),b.ie||V.enterMode==CKEDITOR.ENTER_BR||V.hotNode.scrollIntoView(),V.line.detach()}return function(te){var ne,ie;te=(te=te.getSelection().getStartElement()).getAscendant(G,1),T(V,te)||!te||te.equals(V.editable)||te.contains(V.editable)||((ne=f(te))&&"false"==ne.getAttribute("contenteditable")&&(te=ne),V.element=te,e(ne=s(V,te,!X))&&ne.is(V.triggers)&&ne.is(W)&&(!s(V,ne,!X)||(ie=s(V,ne,!X))&&e(ie)&&ie.is(V.triggers))?Q(ne):e(ie=c(V))&&(s(V,ie,!X)?(te=s(V,ie,!X))&&e(te)&&te.is(V.triggers)&&Q(ie):Q(ie)))}}()}}function r(V,X){if(!X||X.type!=CKEDITOR.NODE_ELEMENT||!X.$)return!1;var Q=V.line;return Q.wrap.equals(X)||Q.wrap.contains(X)}function e(V){return V&&V.type==CKEDITOR.NODE_ELEMENT&&V.$}function n(V){return!!e(V)&&((X=u(V))||(X=!(!e(V)||!(X={left:1,right:1,center:1})[V.getComputedStyle("float")]&&!X[V.getAttribute("align")])),X);var X}function u(V){return!!{absolute:1,fixed:1}[V.getComputedStyle("position")]}function h(V,X){return e(X)?X.is(V.triggers):null}function T(V,X){if(!X)return!1;for(var Q=X.getParents(1),te=Q.length;te--;)for(var ne=V.tabuList.length;ne--;)if(Q[te].hasAttribute(V.tabuList[ne]))return!0;return!1}function g(V){var ie=V.editable,X=V.mouse,Q=V.view,te=V.triggerOffset;O(V);var ne=X.y>(V.inInlineMode?Q.editable.top+Q.editable.height/2:Math.min(Q.editable.height,Q.pane.height)/2);return(ie=ie[ne?"getLast":"getFirst"](function(re){return!(U(re)||q(re))}))&&(r(V,ie)&&(ie=V.line.wrap[ne?"getPrevious":"getNext"](function(re){return!(U(re)||q(re))})),e(ie)&&!n(ie)&&h(V,ie))?(K(V,ie),!ne&&0<=ie.size.top&&a(X.y,0,ie.size.top+te)?new t([null,ie,L,A,V=V.inInlineMode||0===Q.scroll.y?F:D]):ne&&ie.size.bottom<=Q.pane.height&&a(X.y,ie.size.bottom-te,Q.pane.height)?(V=V.inInlineMode||a(ie.size.bottom,Q.pane.height-te,Q.pane.height)?$:D,new t([ie,null,E,A,V])):null):null}function I(V){var X=V.mouse,Q=V.view,ne=V.triggerOffset,te=c(V);if(!te)return null;K(V,te),ne=Math.min(ne,0|te.size.outerHeight/2);var re,se,ie=[];if(a(X.y,te.size.top-1,te.size.top+ne))se=!1;else{if(!a(X.y,te.size.bottom-ne,te.size.bottom+1))return null;se=!0}if(n(te)||function m(V,X,Q){return!!(X=X[Q?"getLast":"getFirst"](function(te){return V.isRelevant(te)&&!te.is(z)}))&&(K(V,X),Q?X.size.top>V.mouse.y:X.size.bottom<V.mouse.y)}(V,te,se)||te.getParent().is(P))return null;var oe=s(V,te,!se);if(oe){if(oe&&oe.type==CKEDITOR.NODE_TEXT)return null;if(e(oe)){if(n(oe)||!h(V,oe)||oe.getParent().is(P))return null;ie=[oe,te][se?"reverse":"concat"]().concat([R,A])}}else te.equals(V.editable[se?"getLast":"getFirst"](V.isRelevant))?(O(V),se&&a(X.y,te.size.bottom-ne,Q.pane.height)&&a(te.size.bottom,Q.pane.height-ne,Q.pane.height)?re=$:a(X.y,0,te.size.top+ne)&&(re=F)):re=D,ie=[null,te][se?"reverse":"concat"]().concat([se?E:L,A,re,te.equals(V.editable[se?"getLast":"getFirst"](V.isRelevant))?se?$:F:D]);return 0 in ie?new t(ie):null}function _(V,X,Q,te){for(var ne=X.getDocumentPosition(),ie={},re={},se={},oe={},ae=Y.length;ae--;)ie[Y[ae]]=parseInt(X.getComputedStyle.call(X,"border-"+Y[ae]+"-width"),10)||0,se[Y[ae]]=parseInt(X.getComputedStyle.call(X,"padding-"+Y[ae]),10)||0,re[Y[ae]]=parseInt(X.getComputedStyle.call(X,"margin-"+Y[ae]),10)||0;return Q&&!te||p(V,te),oe.top=ne.y-(Q?0:V.view.scroll.y),oe.left=ne.x-(Q?0:V.view.scroll.x),oe.outerWidth=X.$.offsetWidth,oe.outerHeight=X.$.offsetHeight,oe.height=oe.outerHeight-(se.top+se.bottom+ie.top+ie.bottom),oe.width=oe.outerWidth-(se.left+se.right+ie.left+ie.right),oe.bottom=oe.top+oe.outerHeight,oe.right=oe.left+oe.outerWidth,V.inInlineMode&&(oe.scroll={top:X.$.scrollTop,left:X.$.scrollLeft}),C({border:ie,padding:se,margin:re,ignoreScroll:Q},oe,!0)}function K(V,X,Q){if(!e(X))return X.size=null;if(X.size){if(X.size.ignoreScroll==Q&&X.size.date>new Date-J)return null}else X.size={};return C(X.size,_(V,X,Q),{date:+new Date},!0)}function O(V,X){V.view.editable=_(V,V.editable,X,!0)}function p(V,X){V.view||(V.view={});var Q=V.view;if(!(!X&&Q&&Q.date>new Date-J)){Q=(te=V.win).getScrollPosition();var te=te.getViewPaneSize();C(V.view,{scroll:{x:Q.x,y:Q.y,width:V.doc.$.documentElement.scrollWidth-te.width,height:V.doc.$.documentElement.scrollHeight-te.height},pane:{width:te.width,height:te.height,bottom:te.height+Q.y},date:+new Date},!0)}}CKEDITOR.plugins.add("magicline",{init:function(X){var ie,re,se,Q=X.config,te=Q.magicline_triggerOffset||30,ne={editor:X,enterMode:Q.enterMode,triggerOffset:te,holdDistance:0|te*(Q.magicline_holdDistance||.5),boxColor:Q.magicline_color||"#ff0000",rtl:"rtl"==Q.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(Q.magicline_tabuList||[]),triggers:Q.magicline_everywhere?G:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(oe){return e(oe)&&!r(ne,oe)&&!n(oe)}};X.on("contentDom",function(){var oe=X.editable(),ae=X.document,de=X.window;C(ne,{editable:oe,inInlineMode:oe.isInline(),doc:ae,win:de,hotNode:null},!0),ne.boundary=ne.inInlineMode?ne.editable:ne.doc.getDocumentElement(),oe.is(S.$inline)||(ne.inInlineMode&&!u(oe)&&oe.setStyles({position:"relative",top:null,left:null}),d.call(this,ne),p(ne),oe.attachListener(X,"beforeUndoImage",function(){ne.line.detach()}),oe.attachListener(X,"beforeGetData",function(){ne.line.wrap.getParent()&&(ne.line.detach(),X.once("getData",function(){ne.line.attach()},null,null,1e3))},null,null,0),oe.attachListener(ne.inInlineMode?ae:ae.getWindow().getFrame(),"mouseout",function(ce){if("wysiwyg"==X.mode)if(ne.inInlineMode){var le=ce.data.$.clientX;ce=ce.data.$.clientY,p(ne),O(ne,!0);var ue=ne.view.editable,he=ne.view.scroll;le>ue.left-he.x&&le<ue.right-he.x&&ce>ue.top-he.y&&ce<ue.bottom-he.y||(clearTimeout(se),se=null,ne.line.detach())}else clearTimeout(se),se=null,ne.line.detach()}),oe.attachListener(oe,"keyup",function(){ne.hiddenMode=0}),oe.attachListener(oe,"keydown",function(ce){if("wysiwyg"==X.mode)switch(ce.data.getKeystroke()){case 2228240:case 16:ne.hiddenMode=1,ne.line.detach()}}),oe.attachListener(ne.inInlineMode?oe:ae,"mousemove",function(ce){if(re=!0,"wysiwyg"==X.mode&&!X.readOnly&&!se){var le={x:ce.data.$.clientX,y:ce.data.$.clientY};se=setTimeout(function(){ne.mouse=le,se=ne.trigger=null,p(ne),re&&!ne.hiddenMode&&X.focusManager.hasFocus&&!ne.line.mouseNear()&&(ne.element=B(ne,!0))&&((ne.trigger=g(ne)||I(ne)||j(ne))&&!T(ne,ne.trigger.upper||ne.trigger.lower)?ne.line.attach().place():(ne.trigger=null,ne.line.detach()),re=!1)},30)}}),oe.attachListener(de,"scroll",function(){"wysiwyg"==X.mode&&(ne.line.detach(),b.webkit&&(ne.hiddenMode=1,clearTimeout(ie),ie=setTimeout(function(){ne.mouseDown||(ne.hiddenMode=0)},50)))}),oe.attachListener(x?ae:de,"mousedown",function(){"wysiwyg"==X.mode&&(ne.line.detach(),ne.hiddenMode=1,ne.mouseDown=1)}),oe.attachListener(x?ae:de,"mouseup",function(){ne.hiddenMode=0,ne.mouseDown=0}),X.addCommand("accessPreviousSpace",l(ne)),X.addCommand("accessNextSpace",l(ne,!0)),X.setKeystroke([[Q.magicline_keystrokePrevious,"accessPreviousSpace"],[Q.magicline_keystrokeNext,"accessNextSpace"]]),X.on("loadSnapshot",function(){var ce,le,ue,he;for(he in{p:1,br:1,div:1})for(ue=(ce=X.document.getElementsByTag(he)).count();ue--;)if((le=ce.getItem(ue)).data("cke-magicline-hot"))return ne.hotNode=le,void(ne.lastCmdDirection="true"===le.data("cke-magicline-dir"))}),X._.magiclineBackdoor={accessFocusSpace:i,boxTrigger:t,isLine:r,getAscendantTrigger:c,getNonEmptyNeighbour:s,getSize:_,that:ne,triggerEdge:I,triggerEditable:g,triggerExpand:j})},this)}});var C=CKEDITOR.tools.extend,N=CKEDITOR.dom.element,k=N.createFromHtml,b=CKEDITOR.env,x=CKEDITOR.env.ie&&9>CKEDITOR.env.version,S=CKEDITOR.dtd,H={},L=128,E=64,R=32,A=16,F=4,$=2,D=1,w="\xa0",P=S.$listItem,z=S.$tableContent,W=C({},S.$nonEditable,S.$empty),G=S.$block,J=100,Z="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",ee=Z+"border-color:transparent;display:block;border-style:solid;",M="<span>"+w+"</span>";H[CKEDITOR.ENTER_BR]="br",H[CKEDITOR.ENTER_P]="p",H[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(X,Q,te){return this.properties=X+Q+(te||D),this},is:function(X){return(this.properties&X)==X}};var B=function(){function V(X,Q){var te=X.$.elementFromPoint(Q.x,Q.y);return te&&te.nodeType?new CKEDITOR.dom.element(te):null}return function(X,Q,te){if(!X.mouse)return null;var ne=X.doc,ie=X.line.wrap,re=V(ne,te=te||X.mouse);return Q&&r(X,re)&&(ie.hide(),re=V(ne,te),ie.show()),!re||re.type!=CKEDITOR.NODE_ELEMENT||!re.$||b.ie&&9>b.version&&!X.boundary.equals(re)&&!X.boundary.contains(re)?null:re}}(),U=CKEDITOR.dom.walker.whitespaces(),q=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),j=function(){function X(Q,te){return!(te&&te.type==CKEDITOR.NODE_TEXT||q(te)||n(te)||r(Q,te)||te.type==CKEDITOR.NODE_ELEMENT&&te.$&&te.is("br"))}return function(Q){var ne,te=function V(Q){var ne,ie,re;if(!e(te=Q.element)||te.contains(Q.editable)||te.isReadOnly())return null;if(re=function y(V,X,Q,te){for(var ne=te,ie=te,re=0,se=!1,oe=!1,ae=V.view.pane.height,de=V.mouse;de.y+re<ae&&0<de.y-re&&(se||(se=X(ne,te)),oe||(oe=X(ie,te)),!se&&0<de.y-re&&(ne=Q(V,{x:de.x,y:de.y-re})),!oe&&de.y+re<ae&&(ie=Q(V,{x:de.x,y:de.y+re})),!se||!oe);)re+=2;return new t([ne,ie,null,null])}(Q,function(ce,le){return!le.equals(ce)},function(ce,le){return B(ce,!0,le)},te),v(0,ne=re.upper,ie=re.lower))return re.set(R,8);if(ne&&te.contains(ne))for(;!ne.getParent().equals(te);)ne=ne.getParent();else ne=te.getFirst(function(ce){return X(Q,ce)});if(ie&&te.contains(ie))for(;!ie.getParent().equals(te);)ie=ie.getParent();else ie=te.getLast(function(ce){return X(Q,ce)});if(!ne||!ie||(K(Q,ne),K(Q,ie),!a(Q.mouse.y,ne.size.top,ie.size.bottom)))return null;for(var se,oe,ae,de,te=Number.MAX_VALUE;ie&&!ie.equals(ne)&&(oe=ne.getNext(Q.isRelevant));)(se=Math.abs(o(Q,ne,oe)-Q.mouse.y))<te&&(te=se,ae=ne,de=oe),K(Q,ne=oe);return ae&&de&&a(Q.mouse.y,ae.size.top,de.size.bottom)?(re.upper=ae,re.lower=de,re.set(R,8)):null}(Q);if(ne=te){var ie=te.lower;ne=!(!(ne=te.upper)||!ie||n(ie)||n(ne)||ie.equals(ne)||ne.equals(ie)||ie.contains(ne)||ne.contains(ie)||!(h(Q,ne)&&h(Q,ie)&&v(0,ne,ie)))}return ne?te:null}}(),Y=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function v(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var f=[],d=["style","className"],i=0;i<d.length;i++){var l=a.$.elements.namedItem(d[i]);l&&(l=new CKEDITOR.dom.element(l),f.push([l,l.nextSibling]),l.remove())}return f}function t(a,f){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<f.length)for(var d=f.length-1;0<=d;d--){var i=f[d][0],l=f[d][1];l?i.insertBefore(l):i.appendTo(a)}}function c(a,f){var d=v(a),i={},l=a.$;return f||(i.class=l.className||"",l.className=""),i.inline=l.style.cssText||"",f||(l.style.cssText="position: static; overflow: visible"),t(d),i}function o(a,f){var d=v(a),i=a.$;"class"in f&&(i.className=f.class),"inline"in f&&(i.style.cssText=f.inline),t(d)}function s(a){if(!a.editable().isInline()){var d,f=CKEDITOR.instances;for(d in f){var i=f[d];"wysiwyg"!=i.mode||i.readOnly||((i=i.document.getBody()).setAttribute("contentEditable",!1),i.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(f){function d(){var T=r.getViewPaneSize();f.resize(T.width,T.height,null,!0)}if(f.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var e,n,u,i=f.lang,l=CKEDITOR.document,r=l.getWindow(),h=CKEDITOR.TRISTATE_OFF;f.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var m=f.container.getFirst(function(O){return O.type==CKEDITOR.NODE_ELEMENT&&O.hasClass("cke_inner")}),g=f.ui.space("contents");if("wysiwyg"==f.mode){var I=f.getSelection();e=I&&I.getRanges(),n=r.getScrollPosition()}else{var _=f.editable().$;e=!CKEDITOR.env.ie&&[_.selectionStart,_.selectionEnd],n=[_.scrollLeft,_.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(r.on("resize",d),u=r.getScrollPosition(),I=f.container;I=I.getParent();)I.setCustomData("maximize_saved_styles",c(I)),I.setStyle("z-index",f.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",c(g,!0)),m.setCustomData("maximize_saved_styles",c(m,!0)),g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},l.getDocumentElement().setStyles(g),!CKEDITOR.env.gecko&&l.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||l.getBody().setStyles(g),CKEDITOR.env.ie?setTimeout(function(){r.$.scrollTo(0,0)},0):r.$.scrollTo(0,0),m.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),m.setStyles({"z-index":f.config.baseFloatZIndex-5,left:"0px",top:"0px"}),m.addClass("cke_maximized"),d(),g=m.getDocumentPosition(),m.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"}),CKEDITOR.env.gecko&&s(f)}else if(this.state==CKEDITOR.TRISTATE_ON){r.removeListener("resize",d),I=[g,m];for(var K=0;K<I.length;K++)o(I[K],I[K].getCustomData("maximize_saved_styles")),I[K].removeCustomData("maximize_saved_styles");for(I=f.container;I=I.getParent();)o(I,I.getCustomData("maximize_saved_styles")),I.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){r.$.scrollTo(u.x,u.y)},0):r.$.scrollTo(u.x,u.y),m.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(m.setStyle("display","inline"),setTimeout(function(){m.setStyle("display","block")},0)),f.fire("resize",{outerHeight:f.container.$.offsetHeight,contentsHeight:g.$.offsetHeight,outerWidth:f.container.$.offsetWidth})}this.toggleState(),(I=this.uiItems[0])&&(g=this.state==CKEDITOR.TRISTATE_OFF?i.maximize.maximize:i.maximize.minimize,(I=CKEDITOR.document.getById(I._.id)).getChild(1).setHtml(g),I.setAttribute("title",g),I.setAttribute("href",'javascript:void("'+g+'");')),"wysiwyg"==f.mode?e?(CKEDITOR.env.gecko&&s(f),f.getSelection().selectRanges(e),(_=f.getSelection().getStartElement())&&_.scrollIntoView(!0)):r.$.scrollTo(n.x,n.y):(e&&(_.selectionStart=e[0],_.selectionEnd=e[1]),_.scrollLeft=n[0],_.scrollTop=n[1]),e=n=null,h=this.state,f.fire("maximize",this.state)},canUndo:!1}),f.ui.addButton&&f.ui.addButton("Maximize",{label:i.maximize.maximize,command:"maximize",toolbar:"tools,10"}),f.on("mode",function(){var T=f.getCommand("maximize");T.setState(T.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:h)},null,null,100)}}})}(),CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(c){var s=0,a=this.path,f=void 0===c.config.pasteFromWord_inlineImages||c.config.pasteFromWord_inlineImages;c.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(i,l){s=1,i.execCommand("paste",{type:"html",notification:!l||void 0===l.notification||l.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(c,"PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),c.on("paste",function(d){var i=d.data,l=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?i.dataTransfer.getData("text/html",!0):null,e=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?i.dataTransfer.getData("text/rtf"):null,r={dataValue:l=l||i.dataValue,dataTransfer:{"text/rtf":e}};if(e=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,e=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(l)||e.test(l),l&&(s||e)&&(!1!==c.fire("pasteFromWord",r)||s)){i.dontFilter=!0;var n=function v(t,c,o){var s=CKEDITOR.cleanWord;return s?o():(t=CKEDITOR.getUrl(t.config.pasteFromWordCleanupFile||c+"filter/default.js"),CKEDITOR.scriptLoader.load(t,o,null,!0)),!s}(c,a,function(){n?c.fire("paste",i):(!c.config.pasteFromWordPromptCleanup||s||confirm(c.lang.pastefromword.confirmCleanup))&&(r.dataValue=CKEDITOR.cleanWord(r.dataValue,c),c.fire("afterPasteFromWord",r),i.dataValue=r.dataValue,!0===c.config.forcePasteAsPlainText?i.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==c.config.forcePasteAsPlainText||(i.type="html")),s=0});n&&d.cancel()}},null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&f&&c.on("afterPasteFromWord",function o(d){var l,i=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,r=[];if(i&&d.editor.filter.check("img[src]")&&0!==(l=i.extractTagsFromHtml(d.data.dataValue)).length&&0!==(i=i.extractFromRtf(d.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(i,function(e){r.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)},this),l.length===r.length))for(i=0;i<l.length;i++)0===l[i].indexOf("file://")&&r[i]&&(d.data.dataValue=d.data.dataValue.replace(l[i],r[i]))})}}),function(){var v={canUndo:!1,async:!0,exec:function(c,o){var f=c.lang,s=CKEDITOR.tools.keystrokeToString(f.common.keyboard,c.getCommandKeystroke(CKEDITOR.env.ie?c.commands.paste:this)),a=o&&void 0!==o.notification?o.notification:!o||!o.from||"keystrokeHandler"===o.from&&CKEDITOR.env.ie;f=a&&"string"==typeof a?a:f.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+s.aria+'">'+s.display+"</kbd>"),c.execCommand("paste",{type:"text",notification:!!a&&f})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(c){var o=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;c.addCommand("pastetext",v),c.setKeystroke(o,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(c,"PasteText",{label:c.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),c.config.forcePasteAsPlainText&&c.on("beforePaste",function(s){"html"!=s.data.type&&(s.data.type="text")}),c.on("pasteState",function(s){c.getCommand("pastetext").setState(s.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(t){t.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),t.ui.addButton&&t.ui.addButton("RemoveFormat",{label:t.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(t){for(var i,c=t._.removeFormatRegex||(t._.removeFormatRegex=new RegExp("^(?:"+t.config.removeFormatTags.replace(/,/g,"|")+")$","i")),o=t._.removeAttributes||(t._.removeAttributes=t.config.removeFormatAttributes.split(",")),s=CKEDITOR.plugins.removeformat.filter,a=t.getSelection().getRanges().createIterator(),f=function(T){return T.type==CKEDITOR.NODE_ELEMENT},d=[];i=a.getNextRange();){var l=i.createBookmark();(i=t.createRange()).setStartBefore(l.startNode),l.endNode&&i.setEndAfter(l.endNode),i.collapsed||i.enlarge(CKEDITOR.ENLARGE_ELEMENT);var r=i.createBookmark(),e=r.startNode,n=r.endNode,u=function(T){for(var _,m=t.elementPath(T),g=m.elements,I=1;(_=g[I])&&!_.equals(m.block)&&!_.equals(m.blockLimit);I++)c.test(_.getName())&&s(t,_)&&T.breakParent(_)};if(u(e),n)for(u(n),e=e.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);e&&!e.equals(n);)if(e.isReadOnly()){if(e.getPosition(n)&CKEDITOR.POSITION_CONTAINS)break;e=e.getNext(f)}else u=e.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==e.getName()&&e.data("cke-realelement")||e.hasAttribute("data-cke-bookmark")||!s(t,e)||(c.test(e.getName())?e.remove(1):(e.removeAttributes(o),t.fire("removeFormatCleanup",e))),e=u;r.startNode.remove(),r.endNode&&r.endNode.remove(),i.moveToBookmark(l),d.push(i)}t.forceNextSelectionCheck(),t.getSelection().selectRanges(d)}}},filter:function(t,c){for(var o=t._.removeFormatFilters||[],s=0;s<o.length;s++)if(!1===o[s](c))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(v){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(v)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(t){function c(u){var h=l.width,T=l.height,m=h+(u.data.$.screenX-i.x)*("rtl"==f?-1:1);u=T+(u.data.$.screenY-i.y),r&&(h=Math.max(s.resize_minWidth,Math.min(m,s.resize_maxWidth))),e&&(T=Math.max(s.resize_minHeight,Math.min(u,s.resize_maxHeight))),t.resize(r?h:null,T)}function o(){CKEDITOR.document.removeListener("mousemove",c),CKEDITOR.document.removeListener("mouseup",o),t.document&&(t.document.removeListener("mousemove",c),t.document.removeListener("mouseup",o))}var s=t.config,a=t.ui.spaceId("resizer"),f=t.element?t.element.getDirection(1):"ltr";if(!s.resize_dir&&(s.resize_dir="vertical"),void 0===s.resize_maxWidth&&(s.resize_maxWidth=3e3),void 0===s.resize_maxHeight&&(s.resize_maxHeight=3e3),void 0===s.resize_minWidth&&(s.resize_minWidth=750),void 0===s.resize_minHeight&&(s.resize_minHeight=250),!1!==s.resize_enabled){var i,l,d=null,r=("both"==s.resize_dir||"horizontal"==s.resize_dir)&&s.resize_minWidth!=s.resize_maxWidth,e=("both"==s.resize_dir||"vertical"==s.resize_dir)&&s.resize_minHeight!=s.resize_maxHeight,n=CKEDITOR.tools.addFunction(function(u){d||(d=t.getResizable()),i={x:u.screenX,y:u.screenY},s.resize_minWidth>(l={width:d.$.offsetWidth||0,height:d.$.offsetHeight||0}).width&&(s.resize_minWidth=l.width),s.resize_minHeight>l.height&&(s.resize_minHeight=l.height),CKEDITOR.document.on("mousemove",c),CKEDITOR.document.on("mouseup",o),t.document&&(t.document.on("mousemove",c),t.document.on("mouseup",o)),u.preventDefault&&u.preventDefault()});t.on("destroy",function(){CKEDITOR.tools.removeFunction(n)}),t.on("uiSpace",function(u){if("bottom"==u.data.space){var h="";r&&!e&&(h=" cke_resizer_horizontal"),!r&&e&&(h=" cke_resizer_vertical");var T='<span id="'+a+'" class="cke_resizer'+h+" cke_resizer_"+f+'" title="'+CKEDITOR.tools.htmlEncode(t.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event)">'+("ltr"==f?"\u25e2":"\u25e3")+"</span>";"ltr"==f&&"ltr"==h?u.data.html+=T:u.data.html=T+u.data.html}},t,null,100),t.on("maximize",function(u){t.ui.space("resizer")[u.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var t=function(o){var s=this._,a=s.menu;s.state!==CKEDITOR.TRISTATE_DISABLED&&(s.on&&a?a.hide():(s.previousState=s.state,a||((a=s.menu=new CKEDITOR.menu(o,{panel:{className:"cke_menu_panel",attributes:{"aria-label":o.lang.common.options}}})).onHide=CKEDITOR.tools.bind(function(){var f=this.command?o.getCommand(this.command).modes:this.modes;this.setState(!f||f[o.mode]?s.previousState:CKEDITOR.TRISTATE_DISABLED),s.on=0},this),this.onMenu&&a.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),s.on=1,setTimeout(function(){a.show(CKEDITOR.document.getById(s.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(o){delete o.panel,this.base(o),this.hasArrow="menu",this.click=t},statics:{handler:{create:function(o){return new CKEDITOR.ui.menuButton(o)}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(t){"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")),CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"dialogs/dialog.css"))},init:function(t){var c=this,o=CKEDITOR.plugins.scayt;this.bindEvents(t),this.parseConfig(t),this.addRule(t),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(t);var s=t.lang.scayt,a=CKEDITOR.env;t.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:s.text_title,title:t.plugins.wsc?t.lang.wsc.title:s.text_title,modes:{wysiwyg:!(a.ie&&(8>a.version||a.quirks))},toolbar:"spellchecker,20",refresh:function(){var d=t.ui.instances.Scayt.getState();t.scayt&&(d=o.state.scayt[t.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),t.fire("scaytButtonState",d)},onRender:function(){var d=this;t.on("scaytButtonState",function(i){void 0!==typeof i.data&&d.setState(i.data)})},onMenu:function(){var d=t.scayt;t.getMenuItem("scaytToggle").label=t.lang.scayt[d&&o.state.scayt[t.name]?"btn_disable":"btn_enable"];var i={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:t.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return t.config.scayt_uiTabs[0]||delete i.scaytOptions,t.config.scayt_uiTabs[1]||delete i.scaytLangs,t.config.scayt_uiTabs[2]||delete i.scaytDict,d&&!CKEDITOR.plugins.scayt.isNewUdSupported(d)&&(delete i.scaytDict,t.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),i}}),t.contextMenu&&t.addMenuItems&&(t.contextMenu.addListener(function(f,d){var l,r,i=t.scayt;return i&&(r=i.getSelectionNode())&&(l=c.menuGenerator(t,r),i.showBanner("."+t.contextMenu._.definition.panel.className.split(" ").join(" ."))),l}),t.contextMenu._.onHide=CKEDITOR.tools.override(t.contextMenu._.onHide,function(f){return function(){var d=t.scayt;return d&&d.hideBanner(),f.apply(this)}}))},addMenuItems:function(t){var c=this,o=CKEDITOR.plugins.scayt;t.addMenuGroup("scaytButton");for(var s=t.config.scayt_contextMenuItemsOrder.split("|"),a=0;a<s.length;a++)s[a]="scayt_"+s[a];if((s=["grayt_description","grayt_suggest","grayt_control"].concat(s))&&s.length)for(a=0;a<s.length;a++)t.addMenuGroup(s[a],a-10);t.addCommand("scaytToggle",{exec:function(d){var i=d.scayt;o.state.scayt[d.name]=!o.state.scayt[d.name],!0===o.state.scayt[d.name]?i||o.createScayt(d):i&&o.destroy(d)}}),t.addCommand("scaytAbout",{exec:function(d){d.scayt.tabToOpen="about",o.openDialog(c.dialogName,d)}}),t.addCommand("scaytOptions",{exec:function(d){d.scayt.tabToOpen="options",o.openDialog(c.dialogName,d)}}),t.addCommand("scaytLangs",{exec:function(d){d.scayt.tabToOpen="langs",o.openDialog(c.dialogName,d)}}),t.addCommand("scaytDict",{exec:function(d){d.scayt.tabToOpen="dictionaries",o.openDialog(c.dialogName,d)}}),s={scaytToggle:{label:t.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:t.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:t.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:t.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:t.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},t.plugins.wsc&&(s.WSC={label:t.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var d=CKEDITOR.plugins.scayt,i=t.scayt,l=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.getText():t.document.getBody().getText();(l=l.replace(/\s/g,""))?(i&&d.state.scayt[t.name]&&i.setMarkupPaused&&i.setMarkupPaused(!0),t.lockSelection(),t.execCommand("checkspell")):alert("Nothing to check!")}}),t.addMenuItems(s)},bindEvents:function(t){var c=CKEDITOR.plugins.scayt,o=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,s=function(){c.destroy(t)},a=function(){!c.state.scayt[t.name]||t.readOnly||t.scayt||c.createScayt(t)},d=function(){o?t.config.scayt_inlineModeImmediateMarkup?a():(t.on("blur",function(){setTimeout(s,0)}),t.on("focus",a),t.focusManager.hasFocus&&a()):a(),function(){var l=t.editable();l.attachListener(l,"focus",function(r){var e,n;if(CKEDITOR.plugins.scayt&&!t.scayt&&setTimeout(a,0),r=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.name]&&t.scayt,(o||r)&&t._.savedSelection){r=!(r=t._.savedSelection.getSelectedElement())&&t._.savedSelection.getRanges();for(var u=0;u<r.length;u++)"string"==typeof(n=r[u]).startContainer.$.nodeValue&&((e=n.startContainer.getText().length)<n.startOffset||e<n.endOffset)&&t.unlockSelection(!1)}},this,null,-10)}();var l=t.editable();l.attachListener(l,"mousedown",function(r){r=r.data.getTarget();var e=t.widgets&&t.widgets.getByElement(r);e&&(e.wrapper=r.getAscendant(function(n){return n.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};t.on("contentDom",d),t.on("beforeCommandExec",function(i){var l=t.scayt,r=!1,e=!1,n=!0;i.data.name in c.options.disablingCommandExec&&"wysiwyg"==t.mode?l&&(c.destroy(t),t.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==i.data.name&&"italic"!==i.data.name&&"underline"!==i.data.name&&"strike"!==i.data.name&&"subscript"!==i.data.name&&"superscript"!==i.data.name&&"enter"!==i.data.name&&"cut"!==i.data.name&&"language"!==i.data.name||!l||("cut"===i.data.name&&(n=!1,e=!0),"language"===i.data.name&&(e=r=!0),t.fire("reloadMarkupScayt",{removeOptions:{removeInside:n,forceBookmark:e,language:r},timeout:0}))}),t.on("beforeSetMode",function(i){"source"==i.data&&((i=t.scayt)&&(c.destroy(t),t.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),t.document&&t.document.getBody().removeAttribute("_jquid"))}),t.on("afterCommandExec",function(i){"wysiwyg"!=t.mode||"undo"!=i.data.name&&"redo"!=i.data.name||setTimeout(function(){c.reloadMarkup(t.scayt)},250)}),t.on("readOnly",function(i){var l;i&&(l=t.scayt,!0===i.editor.readOnly?l&&l.fire("removeMarkupInDocument",{}):l?c.reloadMarkup(l):"wysiwyg"==i.editor.mode&&!0===c.state.scayt[i.editor.name]&&(c.createScayt(t),i.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),t.on("beforeDestroy",s),t.on("setData",function(){s(),(t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||t.plugins.divarea)&&d()},this,null,50),t.on("reloadMarkupScayt",function(i){var l=i.data&&i.data.removeOptions,e=i.data&&i.data.language,n=t.scayt;n&&setTimeout(function(){e&&(l.selectionNode=t.plugins.language.getCurrentLangElement(t),l.selectionNode=l.selectionNode&&l.selectionNode.$||null),n.removeMarkupInSelectionNode(l),c.reloadMarkup(n)},i.data&&i.data.timeout||0)}),t.on("insertElement",function(){t.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50),t.on("insertHtml",function(){t.scayt&&t.scayt.setFocused&&t.scayt.setFocused(!0),t.fire("reloadMarkupScayt")},this,null,50),t.on("insertText",function(){t.scayt&&t.scayt.setFocused&&t.scayt.setFocused(!0),t.fire("reloadMarkupScayt")},this,null,50),t.on("scaytDialogShown",function(i){i.data.selectPage(t.scayt.tabToOpen)})},parseConfig:function(t){if((c=CKEDITOR.plugins.scayt).replaceOldOptionsNames(t.config),"boolean"!=typeof t.config.scayt_autoStartup&&(t.config.scayt_autoStartup=!1),c.state.scayt[t.name]=t.config.scayt_autoStartup,"boolean"!=typeof t.config.grayt_autoStartup&&(t.config.grayt_autoStartup=!1),"boolean"!=typeof t.config.scayt_inlineModeImmediateMarkup&&(t.config.scayt_inlineModeImmediateMarkup=!1),c.state.grayt[t.name]=t.config.grayt_autoStartup,t.config.scayt_contextCommands||(t.config.scayt_contextCommands="ignoreall|add"),t.config.scayt_contextMenuItemsOrder||(t.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),t.config.scayt_sLang||(t.config.scayt_sLang="en_US"),(void 0===t.config.scayt_maxSuggestions||"number"!=typeof t.config.scayt_maxSuggestions||0>t.config.scayt_maxSuggestions)&&(t.config.scayt_maxSuggestions=3),(void 0===t.config.scayt_minWordLength||"number"!=typeof t.config.scayt_minWordLength||1>t.config.scayt_minWordLength)&&(t.config.scayt_minWordLength=3),(void 0===t.config.scayt_customDictionaryIds||"string"!=typeof t.config.scayt_customDictionaryIds)&&(t.config.scayt_customDictionaryIds=""),(void 0===t.config.scayt_userDictionaryName||"string"!=typeof t.config.scayt_userDictionaryName)&&(t.config.scayt_userDictionaryName=null),"string"==typeof t.config.scayt_uiTabs&&3===t.config.scayt_uiTabs.split(",").length){var o=[],s=[];t.config.scayt_uiTabs=t.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(t.config.scayt_uiTabs,function(l){1===Number(l)||0===Number(l)?(s.push(!0),o.push(Number(l))):s.push(!1)}),t.config.scayt_uiTabs=null===CKEDITOR.tools.search(s,!1)?o:[1,1,1]}else t.config.scayt_uiTabs=[1,1,1];if("string"!=typeof t.config.scayt_serviceProtocol&&(t.config.scayt_serviceProtocol=null),"string"!=typeof t.config.scayt_serviceHost&&(t.config.scayt_serviceHost=null),"string"!=typeof t.config.scayt_servicePort&&(t.config.scayt_servicePort=null),"string"!=typeof t.config.scayt_servicePath&&(t.config.scayt_servicePath=null),t.config.scayt_moreSuggestions||(t.config.scayt_moreSuggestions="on"),"string"!=typeof t.config.scayt_customerId&&(t.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof t.config.scayt_customPunctuation&&(t.config.scayt_customPunctuation="-"),"string"!=typeof t.config.scayt_srcUrl&&(c=-1!=(c=document.location.protocol).search(/https?:/)?c:"http:",t.config.scayt_srcUrl=c+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof t.config.scayt_multiLanguageMode&&(t.config.scayt_multiLanguageMode=!1),"object"!=typeof t.config.scayt_multiLanguageStyles&&(t.config.scayt_multiLanguageStyles={}),t.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof t.config.scayt_ignoreAllCapsWords&&(t.config.scayt_ignoreAllCapsWords=!1),t.config.scayt_ignoreDomainNames&&"boolean"!=typeof t.config.scayt_ignoreDomainNames&&(t.config.scayt_ignoreDomainNames=!1),t.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof t.config.scayt_ignoreWordsWithMixedCases&&(t.config.scayt_ignoreWordsWithMixedCases=!1),t.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof t.config.scayt_ignoreWordsWithNumbers&&(t.config.scayt_ignoreWordsWithNumbers=!1),t.config.scayt_disableOptionsStorage){var c=CKEDITOR.tools.isArray(t.config.scayt_disableOptionsStorage)?t.config.scayt_disableOptionsStorage:"string"==typeof t.config.scayt_disableOptionsStorage?[t.config.scayt_disableOptionsStorage]:void 0,a="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),f=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],d=CKEDITOR.tools.search,i=CKEDITOR.tools.indexOf;t.config.scayt_disableOptionsStorage=function(r){for(var n=0;n<r.length;n++){var u=r[n],h=!!d(r,"options");if(!d(a,u)||h&&d(f,function(T){if("lang"===T)return!1}))return;if(d(f,u)&&f.splice(i(f,u),1),"all"===u||h&&d(r,"lang"))return[];"options"===u&&(f=["lang"])}return[].concat(f)}(c)}t.config.scayt_disableCache&&"boolean"!=typeof t.config.scayt_disableCache&&(t.config.scayt_disableCache=!1),(void 0===t.config.scayt_cacheSize||"number"!=typeof t.config.scayt_cacheSize||1>t.config.scayt_cacheSize)&&(t.config.scayt_cacheSize=4e3)},addRule:function(t){var c=CKEDITOR.plugins.scayt,o=(a=t.dataProcessor)&&a.htmlFilter,s=t._.elementsPath&&t._.elementsPath.filters,a=a&&a.dataFilter,f=t.addRemoveFormatFilter;s&&s.push(function(r){if(t.scayt&&(r.hasAttribute(c.options.data_attribute_name)||r.hasAttribute(c.options.problem_grammar_data_attribute)))return!1}),a&&a.addRules({elements:{span:function(r){var e=r.hasClass(c.options.misspelled_word_class)&&r.attributes[c.options.data_attribute_name],n=r.hasClass(c.options.problem_grammar_class)&&r.attributes[c.options.problem_grammar_data_attribute];return c&&(e||n)&&delete r.name,r}}}),o&&o.addRules({elements:{span:function(r){var e=r.hasClass(c.options.misspelled_word_class)&&r.attributes[c.options.data_attribute_name],n=r.hasClass(c.options.problem_grammar_class)&&r.attributes[c.options.problem_grammar_data_attribute];return c&&(e||n)&&delete r.name,r}}}),f&&f.call(t,function(r){var e=!0;return t.scayt&&(r.hasAttribute(c.options.data_attribute_name)||r.hasAttribute(c.options.problem_grammar_data_attribute))&&(e=!1),e})},scaytMenuDefinition:function(t){var c=this,o=CKEDITOR.plugins.scayt;return{scayt:{scayt_ignore:{label:(t=t.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:t.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:t.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var f=a.scayt;setTimeout(function(){f.addWordToUserDictionary()},10)}},scayt_option:{label:t.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(a){a.scayt.tabToOpen="options",o.openDialog(c.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[0]}},scayt_language:{label:t.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs",o.openDialog(c.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[1]}},scayt_dictionary:{label:t.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen="dictionaries",o.openDialog(c.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[2]}},scayt_about:{label:t.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about",o.openDialog(c.dialogName,a)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:t.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(a){a.scayt.ignorePhrase()}},grayt_ignoreall:{label:t.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(a){a.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(t,c,o){var s={},a={},f=o?"word":"phrase",d=o?"startGrammarCheck":"startSpellCheck",i=t.scayt;if(0<c.length&&"no_any_suggestions"!==c[0])if(o)for(o=0;o<c.length;o++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[o].replace(" ","_");t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[o],f,d)),o<t.config.scayt_maxSuggestions?(t.addMenuItem(l,{label:c[o],command:l,group:"scayt_suggest",order:o+1}),s[l]=CKEDITOR.TRISTATE_OFF):(t.addMenuItem(l,{label:c[o],command:l,group:"scayt_moresuggest",order:o+1}),a[l]=CKEDITOR.TRISTATE_OFF,"on"===t.config.scayt_moreSuggestions&&(t.addMenuItem("scayt_moresuggest",{label:i.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return a}}),s.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(o=0;o<c.length;o++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[o].replace(" ","_"),t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[o],f,d)),t.addMenuItem(l,{label:c[o],command:l,group:"grayt_suggest",order:o+1}),s[l]=CKEDITOR.TRISTATE_OFF;else s.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,t.addCommand("no_scayt_suggest",{exec:function(){}}),t.addMenuItem("no_scayt_suggest",{label:i.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return s},menuGenerator:function(t,c){var i,l,r,e,o=t.scayt,s=this.scaytMenuDefinition(t),a={},f=t.config.scayt_contextCommands.split("|"),d=c.getAttribute(o.getLangAttribute())||o.getLang();if(l=o.isScaytNode(c),r=o.isGraytNode(c),l?(s=s.scayt,i=c.getAttribute(o.getScaytNodeAttributeName()),o.fire("getSuggestionsList",{lang:d,word:i}),a=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,l)):r&&(s=s.grayt,a=c.getAttribute(o.getGraytNodeAttributeName()),o.getGraytNodeRuleAttributeName?(i=c.getAttribute(o.getGraytNodeRuleAttributeName()),o.getProblemDescriptionText(a,i,d)):o.getProblemDescriptionText(a,d),e=o.getProblemDescriptionText(a,i,d),s.grayt_problemdescription&&e&&(e=e.replace(/([.!?])\s/g,"$1<br>"),s.grayt_problemdescription.label=e),o.fire("getGrammarSuggestionsList",{lang:d,phrase:a,rule:i}),a=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,l)),l&&"off"==t.config.scayt_contextCommands)return a;for(var n in s)l&&-1==CKEDITOR.tools.indexOf(f,n.replace("scayt_",""))&&"all"!=t.config.scayt_contextCommands||r&&"grayt_problemdescription"!==n&&-1==CKEDITOR.tools.indexOf(f,n.replace("grayt_",""))&&"all"!=t.config.scayt_contextCommands||(a[n]=void 0!==s[n].state?s[n].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof s[n].verification||s[n].verification(t)||delete a[n],t.addCommand(n,{exec:s[n].exec}),t.addMenuItem(n,{label:t.lang.scayt[s[n].label]||s[n].label,command:n,group:s[n].group,order:s[n].order}));return a},createCommand:function(t,c,o){return{exec:function(a){a=a.scayt;var f={};f[c]=t,a.replaceSelectionNode(f),"startGrammarCheck"===o&&a.removeMarkupInSelectionNode({grammarOnly:!0}),a.fire(o)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var t;if(v=(v=CKEDITOR.version.match(/^\d(\.\d*)*/))&&v[0]){t="4.5.7";var c,v=v.replace(/\./g,"");t=t.replace(/\./g,""),c=0<=(c=v.length-t.length)?c:0,t=parseInt(v)>=parseInt(t)*Math.pow(10,c)}return t?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(t,c){var o=c.scayt;o.isAllModulesReady&&!1===o.isAllModulesReady()||(c.lockSelection(),c.openDialog(t))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(t){return!!t.getUserDictionary},reloadMarkup:function(t){var c;t&&(c=t.getScaytLangList(),t.reloadMarkup?t.reloadMarkup():(this.alarmCompatibilityMessage(),c&&c.ltr&&c.rtl&&t.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(t){for(var c in t)c in this.backCompatibilityMap&&(t[this.backCompatibilityMap[c]]=t[c],delete t[c])},createScayt:function(t){var c=this,o=CKEDITOR.plugins.scayt;this.loadScaytLibrary(t,function(s){function a(i){return new SCAYT.CKSCAYT(i,function(){},function(){})}var f;if(s.window&&(f="BODY"==s.editable().$.nodeName?s.window.getFrame():s.editable()),f){var d;f={lang:s.config.scayt_sLang,container:f.$,customDictionary:s.config.scayt_customDictionaryIds,userDictionaryName:s.config.scayt_userDictionaryName,localization:s.langCode,customer_id:s.config.scayt_customerId,customPunctuation:s.config.scayt_customPunctuation,debug:s.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,problem_grammar_data_attribute:c.options.problem_grammar_data_attribute,problem_grammar_class:c.options.problem_grammar_class,"options-to-restore":s.config.scayt_disableOptionsStorage,focused:s.editable().hasFocus,ignoreElementsRegex:s.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:s.config.grayt_elementsToIgnore,minWordLength:s.config.scayt_minWordLength,multiLanguageMode:s.config.scayt_multiLanguageMode,multiLanguageStyles:s.config.scayt_multiLanguageStyles,graytAutoStartup:s.config.grayt_autoStartup,disableCache:s.config.scayt_disableCache,cacheSize:s.config.scayt_cacheSize,charsToObserve:o.charsToObserve},s.config.scayt_serviceProtocol&&(f.service_protocol=s.config.scayt_serviceProtocol),s.config.scayt_serviceHost&&(f.service_host=s.config.scayt_serviceHost),s.config.scayt_servicePort&&(f.service_port=s.config.scayt_servicePort),s.config.scayt_servicePath&&(f.service_path=s.config.scayt_servicePath),"boolean"==typeof s.config.scayt_ignoreAllCapsWords&&(f["ignore-all-caps-words"]=s.config.scayt_ignoreAllCapsWords),"boolean"==typeof s.config.scayt_ignoreDomainNames&&(f["ignore-domain-names"]=s.config.scayt_ignoreDomainNames),"boolean"==typeof s.config.scayt_ignoreWordsWithMixedCases&&(f["ignore-words-with-mixed-cases"]=s.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof s.config.scayt_ignoreWordsWithNumbers&&(f["ignore-words-with-numbers"]=s.config.scayt_ignoreWordsWithNumbers);try{d=a(f)}catch(i){c.alarmCompatibilityMessage(),delete f.charsToObserve,d=a(f)}d.subscribe("suggestionListSend",function(i){for(var l={},r=[],e=0;e<i.suggestionList.length;e++)l["word_"+i.suggestionList[e]]||(l["word_"+i.suggestionList[e]]=i.suggestionList[e],r.push(i.suggestionList[e]));CKEDITOR.plugins.scayt.suggestions=r}),d.subscribe("selectionIsChanged",function(i){s.getSelection().isLocked&&"restoreSelection"!==i.action&&s.lockSelection(),"restoreSelection"===i.action&&s.selectionChange(!0)}),d.subscribe("graytStateChanged",function(i){o.state.grayt[s.name]=i.state}),d.addMarkupHandler&&d.addMarkupHandler(function(i){var l=s.editable(),r=l.getCustomData(i.charName);r&&(r.$=i.node,l.setCustomData(i.charName,r))}),s.scayt=d,s.fire("scaytButtonState",s.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else o.state.scayt[s.name]=!1})},destroy:function(t){t.scayt&&t.scayt.destroy(),delete t.scayt,t.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(t,c){var s=function(){CKEDITOR.fireOnce("scaytReady"),t.scayt||"function"==typeof c&&c(t)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?CKEDITOR.scriptLoader.load(t.config.scayt_srcUrl,function(a){a&&s()}):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&s()}},CKEDITOR.on("dialogDefinition",function(v){var t=v.data.name;v=v.data.definition.dialog,"scaytDialog"!==t&&"checkspell"!==t&&(v.on("show",function(c){c=c.sender&&c.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=c.scayt;s&&o.state.scayt[c.name]&&s.setMarkupPaused&&s.setMarkupPaused(!0)}),v.on("hide",function(c){c=c.sender&&c.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=c.scayt;s&&o.state.scayt[c.name]&&s.setMarkupPaused&&s.setMarkupPaused(!1)})),"scaytDialog"===t&&v.on("cancel",function(c){return!1},this,null,-1),"checkspell"===t&&v.on("cancel",function(c){c=c.sender&&c.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=c.scayt;s&&o.state.scayt[c.name]&&s.setMarkupPaused&&s.setMarkupPaused(!1),c.unlockSelection()},this,null,-2),"link"===t&&v.on("ok",function(c){var o=c.sender&&c.sender.getParentEditor();o&&setTimeout(function(){o.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)}),"replace"===t&&v.on("hide",function(c){c=c.sender&&c.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=c.scayt;c&&setTimeout(function(){s&&(s.fire("removeMarkupInDocument",{}),o.reloadMarkup(s))},0)})}),CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((v=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(v.checkDirty,function(c){return function(){var o=null,s=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(o="ready"==this.status){var a=s.removeMarkupFromString(this.getSnapshot());s=s.removeMarkupFromString(this._.previousValue),o=o&&s!==a}}else o=c.call(this);return o}}),v.resetDirty=CKEDITOR.tools.override(v.resetDirty,function(c){return function(){CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=this.scayt.removeMarkupFromString(this.getSnapshot()):c.call(this)}})),!0===CKEDITOR.config.scayt_handleUndoRedo){var v,t="function"==typeof(v=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";v[t]=CKEDITOR.tools.override(v[t],function(o){return function(s){var a=s.editor.scayt,f=this.contents,d=s.contents,i=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[s.editor.name]&&s.editor.scayt&&(this.contents=a.removeMarkupFromString(f)||"",s.contents=a.removeMarkupFromString(d)||""),i=o.apply(this,arguments),this.contents=f,s.contents=d,i}})}}),function(){var v={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(c){this.toggleState(),this.refresh(c)},refresh:function(c){if(c.document){var o=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";c.editable()[o]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var c;c=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(c)},init:function(c){var o=c.addCommand("showborders",v);o.canUndo=!1,!1!==c.config.startupShowBorders&&o.setState(CKEDITOR.TRISTATE_ON),c.on("mode",function(){o.state!=CKEDITOR.TRISTATE_DISABLED&&o.refresh(c)},null,null,100),c.on("contentDom",function(){o.state!=CKEDITOR.TRISTATE_DISABLED&&o.refresh(c)}),c.on("removeFormatCleanup",function(s){s=s.data,c.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&s.is("table")&&(!s.hasAttribute("border")||0>=parseInt(s.getAttribute("border"),10))&&s.addClass("cke_show_border")})},afterInit:function(c){var o=c.dataProcessor;c=o&&o.dataFilter,o=o&&o.htmlFilter,c&&c.addRules({elements:{table:function(a){var f=(a=a.attributes).class,d=parseInt(a.border,10);d&&!(0>=d)||f&&-1!=f.indexOf("cke_show_border")||(a.class=(f||"")+" cke_show_border")}}}),o&&o.addRules({elements:{table:function(a){var f=(a=a.attributes).class;f&&(a.class=f.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(t){var c=t.data.name;("table"==c||"tableProperties"==c)&&((c=(t=t.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(c.commit,function(o){return function(s,a){o.apply(this,arguments);var f=parseInt(this.getValue(),10);a[!f||0>=f?"addClass":"removeClass"]("cke_show_border")}}),(t=(t=t.getContents("advanced"))&&t.get("advCSSClasses"))&&(t.setup=CKEDITOR.tools.override(t.setup,function(o){return function(){o.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),t.commit=CKEDITOR.tools.override(t.commit,function(o){return function(s,a){o.apply(this,arguments),parseInt(a.getAttribute("border"),10)||a.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(c){function o(){var f=a&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),f&&this.focus()}if(c.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s=CKEDITOR.plugins.sourcearea;c.addMode("source",function(f){var d=c.ui.space("contents").getDocument().createElement("textarea");d.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",c.config.sourceAreaTabSize||4))),d.setAttribute("dir","ltr"),d.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),c.ui.space("contents").append(d),(d=c.editable(new v(c,d))).setData(c.getData(1)),CKEDITOR.env.ie&&(d.attachListener(c,"resize",o,d),d.attachListener(CKEDITOR.document.getWindow(),"resize",o,d),CKEDITOR.tools.setTimeout(o,0,d)),c.fire("ariaWidget",this),f()}),c.addCommand("source",s.commands.source),c.ui.addButton&&c.ui.addButton("Source",{label:c.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),c.on("mode",function(){c.getCommand("source").setState("source"==c.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var a=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var v=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(c){this.setValue(c),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(c){this[(c?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){v.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(t){"wysiwyg"==t.mode&&t.fire("saveSnapshot"),t.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),t.setMode("source"==t.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(t){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),t.addCommand("specialchar",{exec:function(){var s=c.availableLangs[s=t.langCode]?s:c.availableLangs[s.replace(/-.*/,"")]?s.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+s+".js"),function(){CKEDITOR.tools.extend(t.lang.specialchar,c.langEntries[s]),t.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),t.ui.addButton&&t.ui.addButton("SpecialChar",{label:t.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(t){var c=t.config,o=t.lang.stylescombo,s={},a=[],f=[];t.on("stylesSet",function(d){if(d=d.data.styles){for(var i,l,r,e=0,n=d.length;e<n;e++)i=d[e],t.blockless&&i.element in CKEDITOR.dtd.$block||"string"==typeof i.type&&!CKEDITOR.style.customHandlers[i.type]||(l=i.name,i=new CKEDITOR.style(i),t.filter.customConfig&&!t.filter.check(i))||(i._name=l,i._.enterMode=c.enterMode,i._.type=r=i.assignedTo||i.type,i._.weight=e+1e3*(r==CKEDITOR.STYLE_OBJECT?1:r==CKEDITOR.STYLE_BLOCK?2:3),s[l]=i,a.push(i),f.push(i));a.sort(function(u,h){return u._.weight-h._.weight})}}),t.ui.addRichCombo("Styles",{label:o.label,title:o.panelTitle,toolbar:"styles,10",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!0,attributes:{"aria-label":o.panelTitle}},init:function(){var i,l,r,e,n,u;for(n=0,u=a.length;n<u;n++)l=(i=a[n])._name,(e=i._.type)!=r&&(this.startGroup(o["panelTitle"+String(e)]),r=e),this.add(l,i.type==CKEDITOR.STYLE_OBJECT?l:i.buildPreview(),l);this.commit()},onClick:function(i){t.focus(),t.fire("saveSnapshot"),i=s[i];var l=t.elementPath();i.group&&i.removeStylesFromSameGroup(t)?t.applyStyle(i):t[i.checkActive(l,t)?"removeStyle":"applyStyle"](i),t.fire("saveSnapshot")},onRender:function(){t.on("selectionChange",function(i){for(var n,l=this.getValue(),r=0,e=(i=i.data.path.elements).length;r<e;r++)for(var u in n=i[r],s)if(s[u].checkElementRemovable(n,!0,t))return void(u!=l&&this.setValue(u));this.setValue("")},this)},onOpen:function(){var i=(i=t.getSelection()).getSelectedElement()||i.getStartElement()||t.editable(),l=(i=t.elementPath(i),[0,0,0,0]);for(var r in this.showAll(),this.unmarkAll(),s){var e=s[r],n=e._.type;e.checkApplicable(i,t,t.activeFilter)?l[n]++:this.hideItem(r),e.checkActive(i,t)&&this.mark(r)}l[CKEDITOR.STYLE_BLOCK]||this.hideGroup(o["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),l[CKEDITOR.STYLE_INLINE]||this.hideGroup(o["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),l[CKEDITOR.STYLE_OBJECT]||this.hideGroup(o["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var i=t.elementPath();if(i){for(var l in s)if(s[l].checkApplicable(i,t,t.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){s={},a=[]}})}}),function(){function v(s){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(f){if(f.editable().hasFocus){var i,d=f.getSelection();if(i=new CKEDITOR.dom.elementPath(d.getCommonAncestor(),d.root).contains({td:1,th:1},1)){if(d=f.createRange(),(l=CKEDITOR.tools.tryThese(function(){return i.getParent().$.cells[i.$.cellIndex+(s?-1:1)]},function(){var h;return(h=(h=i.getParent()).getAscendant("table").$.rows[h.$.rowIndex+(s?-1:1)]).cells[s?h.cells.length-1:0]}))||s){if(!l)return!0;l=new CKEDITOR.dom.element(l),d.moveToElementEditStart(l),d.checkStartOfBlock()&&d.checkEndOfBlock()||d.selectNodeContents(l)}else{for(var r=i.getAscendant("table").$,l=i.getParent().$.cells,e=(r=new CKEDITOR.dom.element(r.insertRow(-1),f.document),0),n=l.length;e<n;e++)r.append(new CKEDITOR.dom.element(l[e],f.document).clone(!1,!1)).appendBogus();d.moveToElementEditStart(r)}return d.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},c={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},o={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(a){for(var f=!1!==a.config.enableTabKeyTools,d=a.config.tabSpaces||0,i="";d--;)i+="\xa0";i&&a.on("key",function(l){9==l.data.keyCode&&(a.insertText(i),l.cancel())}),f&&a.on("key",function(l){(9==l.data.keyCode&&a.execCommand("selectNextCell")||l.data.keyCode==CKEDITOR.SHIFT+9&&a.execCommand("selectPreviousCell"))&&l.cancel()}),a.addCommand("blur",CKEDITOR.tools.extend(c,t)),a.addCommand("blurBack",CKEDITOR.tools.extend(o,t)),a.addCommand("selectNextCell",v()),a.addCommand("selectPreviousCell",v(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(v,t){var o,s,a,f,d,i,c=void 0===t?this.getTabIndex():t;if(0>=c)for(d=this.getNextSourceNode(v,CKEDITOR.NODE_ELEMENT);d;){if(d.isVisible()&&0===d.getTabIndex()){a=d;break}d=d.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(d=this.getDocument().getBody().getFirst();d=d.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!o)if(!s&&d.equals(this)){if(s=!0,v){if(!(d=d.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;o=1}}else s&&!this.contains(d)&&(o=1);if(d.isVisible()&&!(0>(i=d.getTabIndex()))){if(o&&i==c){a=d;break}i>c&&(!a||!f||i<f)?(a=d,f=i):a||0!==i||(a=d,f=i)}}a&&a.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(v,t){for(var o,s,a,d,c=void 0===t?this.getTabIndex():t,f=0,i=this.getDocument().getBody().getLast();i=i.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!o)if(!s&&i.equals(this)){if(s=!0,v){if(!(i=i.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;o=1}}else s&&!this.contains(i)&&(o=1);if(i.isVisible()&&!(0>(d=i.getTabIndex())))if(0>=c){if(o&&0===d){a=i;break}d>f&&(a=i,f=d)}else{if(o&&d==c){a=i;break}d<c&&(!a||d>f)&&(a=i,f=d)}}a&&a.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(t){function c(s){return CKEDITOR.tools.extend(s||{},{contextSensitive:1,refresh:function(f,d){this.setState(d.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!t.blockless){var o=t.lang.table;t.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(t.plugins.dialogadvtab?"table"+t.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(a){if(a.styles){var f;if(a.styles.border)f=CKEDITOR.tools.style.parse.border(a.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var d=a.styles;d["border-left"]&&d["border-left"]===d["border-right"]&&d["border-right"]===d["border-top"]&&d["border-top"]===d["border-bottom"]&&(f=CKEDITOR.tools.style.parse.border(d["border-top"]))}f&&f.style&&"solid"===f.style&&f.width&&0!==parseFloat(f.width)&&(a.attributes.border=1),"collapse"==a.styles["border-collapse"]&&(a.attributes.cellspacing=0)}}}]]})),t.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",c())),t.addCommand("tableDelete",c({exec:function(a){var f=a.elementPath().contains("table",1);if(f){var d=f.getParent(),i=a.editable();1!=d.getChildCount()||d.is("td","th")||d.equals(i)||(f=d),(a=a.createRange()).moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f.remove(),a.select()}}})),t.ui.addButton&&t.ui.addButton("Table",{label:o.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),t.addMenuItems&&t.addMenuItems({table:{label:o.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:o.deleteTable,command:"tableDelete",group:"table",order:1}}),t.on("doubleclick",function(s){s.data.element.is("table")&&(s.data.dialog="tableProperties")}),t.contextMenu&&t.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function v(m,g){function I(k){return!g||g.contains(k)&&k.getAscendant("table",!0).equals(g)}function _(k){0<K.length||k.type!=CKEDITOR.NODE_ELEMENT||!h.test(k.getName())||k.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(O,k,"selected_cell",!0),K.push(k))}var K=[],O={};if(!m)return K;for(var p=m.getRanges(),y=0;y<p.length;y++){var C,N;if((C=p[y]).collapsed)(C=C.getCommonAncestor().getAscendant({td:1,th:1},!0))&&I(C)&&K.push(C);else for((C=new CKEDITOR.dom.walker(C)).guard=_;N=C.next();)N.type==CKEDITOR.NODE_ELEMENT&&N.is(CKEDITOR.dtd.table)||(N=N.getAscendant({td:1,th:1},!0))&&!N.getCustomData("selected_cell")&&I(N)&&(CKEDITOR.dom.element.setMarker(O,N,"selected_cell",!0),K.push(N))}return CKEDITOR.dom.element.clearAllMarkers(O),K}function t(m,g){var _=(p=(O=T(m)?m:v(m))[0]).getAscendant("table"),p=p.getDocument(),K=(I=O[0].getParent()).$.rowIndex,y=(O=O[O.length-1]).getParent().$.rowIndex+O.$.rowSpan-1,O=new CKEDITOR.dom.element(_.$.rows[y]),I=(K=g?K:y,g?I:O);for(_=(O=CKEDITOR.tools.buildTableMap(_))[K],K=g?O[K-1]:O[K+1],O=O[0].length,p=p.createElement("tr"),y=0;_[y]&&y<O;y++){var C;1<_[y].rowSpan&&K&&_[y]==K[y]?(C=_[y]).rowSpan+=1:((C=new CKEDITOR.dom.element(_[y]).clone()).removeAttribute("rowSpan"),C.appendBogus(),p.append(C),C=C.$),y+=C.colSpan-1}return g?p.insertBefore(I):p.insertAfter(I),p}function c(m){if(m instanceof CKEDITOR.dom.selection){var g=m.getRanges(),I=(p=v(m))[0].getAscendant("table"),_=CKEDITOR.tools.buildTableMap(I),K=p[0].getParent().$.rowIndex,O=(p=p[p.length-1]).getParent().$.rowIndex+p.$.rowSpan-1,p=[];for(m.reset(),m=K;m<=O;m++){for(var y=_[m],C=new CKEDITOR.dom.element(I.$.rows[m]),N=0;N<y.length;N++){var k=new CKEDITOR.dom.element(y[N]),b=k.getParent().$.rowIndex;1==k.$.rowSpan?k.remove():(--k.$.rowSpan,b==m&&((b=_[m+1])[N-1]?k.insertAfter(new CKEDITOR.dom.element(b[N-1])):new CKEDITOR.dom.element(I.$.rows[m+1]).append(k,1))),N+=k.$.colSpan-1}p.push(C)}for(_=I.$.rows,g[0].moveToPosition(I,CKEDITOR.POSITION_BEFORE_START),K=new CKEDITOR.dom.element(_[O+1]||(0<K?_[K-1]:null)||I.$.parentNode),m=p.length;0<=m;m--)c(p[m]);return I.$.parentNode?K:(g[0].select(),null)}return m instanceof CKEDITOR.dom.element&&(1==(I=m.getAscendant("table")).$.rows.length?I.remove():m.remove()),null}function o(m){for(var g=m.getParent().$.cells,I=0,_=0;_<g.length;_++){var K=g[_];if(I+=K.colSpan,K==m.$)break}return I-1}function s(m,g){for(var I=g?1/0:0,_=0;_<m.length;_++){var K=o(m[_]);(g?K<I:K>I)&&(I=K)}return I}function a(m,g){for(var K=(p=T(m)?m:v(m))[0].getAscendant("table"),O=s(p,1),p=s(p),I=g?O:p,_=CKEDITOR.tools.buildTableMap(K),y=(K=[],O=[],p=[],_.length),C=0;C<y;C++)K.push(_[C][I]),O.push(g?_[C][I-1]:_[C][I+1]);for(C=0;C<y;C++)K[C]&&(1<K[C].colSpan&&O[C]==K[C]?(_=K[C]).colSpan+=1:((_=(I=new CKEDITOR.dom.element(K[C])).clone()).removeAttribute("colSpan"),_.appendBogus(),_[g?"insertBefore":"insertAfter"].call(_,I),p.push(_),_=_.$),C+=_.rowSpan-1);return p}function d(m,g){var I=m.getStartElement().getAscendant({td:1,th:1},!0);if(I){var _=I.clone();_.appendBogus(),g?_.insertBefore(I):_.insertAfter(I)}}function i(m){if(m instanceof CKEDITOR.dom.selection){var K,g=m.getRanges(),I=v(m),_=I[0]&&I[0].getAscendant("table");e:{var O=0;K=I.length-1;for(var y,C,p={};y=I[O++];)CKEDITOR.dom.element.setMarker(p,y,"delete_cell",!0);for(O=0;y=I[O++];)if((C=y.getPrevious())&&!C.getCustomData("delete_cell")||(C=y.getNext())&&!C.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(p),K=C;break e}CKEDITOR.dom.element.clearAllMarkers(p),K=(O=(O=I[0].getParent()).getPrevious())?O.getLast():(O=(O=I[K].getParent()).getNext())?O.getChild(0):null}for(m.reset(),m=I.length-1;0<=m;m--)i(I[m]);K?l(K,!0):_&&(g[0].moveToPosition(_,CKEDITOR.POSITION_BEFORE_START),g[0].select(),_.remove())}else m instanceof CKEDITOR.dom.element&&(1==(g=m.getParent()).getChildCount()?g.remove():m.remove())}function l(m,g){var I=m.getDocument(),_=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(_.focus(),I.focus()),(I=new CKEDITOR.dom.range(I))["moveToElementEdit"+(g?"End":"Start")](m)||(I.selectNodeContents(m),I.collapse(!g)),I.select(!0)}function r(m,g,I){if(m=m[g],void 0===I)return m;for(g=0;m&&g<m.length;g++){if(I.is&&m[g]==I.$)return g;if(g==I)return new CKEDITOR.dom.element(m[g])}return I.is?-1:null}function e(m,g,I){var K,O,_=v(m);if((g?1!=_.length:2>_.length)||(K=m.getCommonAncestor())&&K.type==CKEDITOR.NODE_ELEMENT&&K.is("table"))return!1;K=(m=_[0]).getAscendant("table");var p=CKEDITOR.tools.buildTableMap(K),y=p.length,C=p[0].length,N=m.getParent().$.rowIndex,k=r(p,N,m);if(g){var b;try{var S=parseInt(m.getAttribute("rowspan"),10)||1;O=parseInt(m.getAttribute("colspan"),10)||1,b=p["up"==g?N-S:"down"==g?N+S:N]["left"==g?k-O:"right"==g?k+O:k]}catch(D){return!1}if(!b||m.$==b)return!1;_["up"==g||"left"==g?"unshift":"push"](new CKEDITOR.dom.element(b))}g=m.getDocument();var x=N,H=(S=b=0,!I&&new CKEDITOR.dom.documentFragment(g)),L=0;for(g=0;g<_.length;g++){var F=(O=_[g]).getParent(),E=O.getFirst(),R=O.$.colSpan,A=O.$.rowSpan,$=r(p,F=F.$.rowIndex,O);L+=R*A,S=Math.max(S,$-k+R),b=Math.max(b,F-N+A),I||((A=(R=O).getBogus())&&A.remove(),R.trim(),O.getChildren().count()&&(F==x||!E||E.isBlockBoundary&&E.isBlockBoundary({br:1})||!(x=H.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||x.is&&x.is("br")||H.append("br"),O.moveChildren(H)),g?O.remove():O.setHtml("")),x=F}if(I)return b*S==L;for(H.moveChildren(m),m.appendBogus(),S>=C?m.removeAttribute("rowSpan"):m.$.rowSpan=b,b>=y?m.removeAttribute("colSpan"):m.$.colSpan=S,g=(_=(I=new CKEDITOR.dom.nodeList(K.$.rows)).count())-1;0<=g;g--)(K=I.getItem(g)).$.cells.length||(K.remove(),_++);return m}function n(m,g){if(1<(I=v(m)).length)return!1;if(g)return!0;var I,N,K=(_=(I=I[0]).getParent()).getAscendant("table"),y=r(O=CKEDITOR.tools.buildTableMap(K),p=_.$.rowIndex,I);if(1<(C=I.$.rowSpan)){N=Math.ceil(C/2);for(var k,C=Math.floor(C/2),_=p+N,O=(K=new CKEDITOR.dom.element(K.$.rows[_]),r(O,_)),p=(_=I.clone(),0);p<O.length;p++){if((k=O[p]).parentNode==K.$&&p>y){_.insertBefore(new CKEDITOR.dom.element(k));break}k=null}k||K.append(_)}else for(C=N=1,(K=_.clone()).insertAfter(_),K.append(_=I.clone()),k=r(O,p),y=0;y<k.length;y++)k[y].rowSpan++;return _.appendBogus(),I.$.rowSpan=N,_.$.rowSpan=C,1==N&&I.removeAttribute("rowSpan"),1==C&&_.removeAttribute("rowSpan"),_}function u(m,g){if(1<(I=v(m)).length)return!1;if(g)return!0;var I,_=(I=I[0]).getParent(),K=_.getAscendant("table"),O=r(K=CKEDITOR.tools.buildTableMap(K),_.$.rowIndex,I);if(1<(p=I.$.colSpan))_=Math.ceil(p/2),p=Math.floor(p/2);else{for(var p=_=1,y=[],C=0;C<K.length;C++){var N=K[C];y.push(N[O]),1<N[O].rowSpan&&(C+=N[O].rowSpan-1)}for(K=0;K<y.length;K++)y[K].colSpan++}return(K=I.clone()).insertAfter(I),K.appendBogus(),I.$.colSpan=_,K.$.colSpan=p,1==_&&I.removeAttribute("colSpan"),1==p&&K.removeAttribute("colSpan"),K}var h=/^(?:td|th)$/,T=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(g){function I(y){return CKEDITOR.tools.extend(y||{},{contextSensitive:1,refresh:function(N,k){this.setState(k.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function _(y,C){var N=g.addCommand(y,C);g.addFeature(N)}var K=g.lang.table,O=CKEDITOR.tools.style.parse,p="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");_("cellProperties",new CKEDITOR.dialogCommand("cellProperties",I({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:p,contentTransformations:[[{element:"td",left:function(C){return C.styles.background&&O.background(C.styles.background).color},right:function(C){C.styles["background-color"]=O.background(C.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(C){return C.attributes&&C.attributes.valign},right:function(C){C.styles["vertical-align"]=C.attributes.valign,delete C.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(C){return C.styles&&C.styles.height},right:function(C){CKEDITOR.tools.array.forEach(C.children,function(N){N.name in{td:1,th:1}&&(N.attributes["cke-row-height"]=C.styles.height)}),delete C.styles.height}}],[{element:"td",check:"td{height}",left:function(C){return(C=C.attributes)&&C["cke-row-height"]},right:function(C){C.styles.height=C.attributes["cke-row-height"],delete C.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),_("rowDelete",I({requiredContent:"table",exec:function(C){(C=c(C=C.getSelection()))&&l(C)}})),_("rowInsertBefore",I({requiredContent:"table",exec:function(C){t(C=v(C=C.getSelection()),!0)}})),_("rowInsertAfter",I({requiredContent:"table",exec:function(C){t(C=v(C=C.getSelection()))}})),_("columnDelete",I({requiredContent:"table",exec:function(C){(C=function f(m){CKEDITOR.env.webkit&&!m.isFake&&(m=function g(S){var H,L,E;if(1!==(H=S.getRanges()).length||(H=H[0]).collapsed||0!==H.endOffset||"td"!==(E=(L=H.endContainer).getName().toLowerCase())&&"th"!==E)return S;for((E=L.getPrevious())||(E=L.getParent().getPrevious().getLast());E.type!==CKEDITOR.NODE_TEXT&&"br"!==E.getName().toLowerCase();)if(!(E=E.getLast()))return S;return H.setEndAt(E,CKEDITOR.POSITION_BEFORE_END),H.select()}(m));var y,C,I=m.getRanges(),_=(O=v(m))[0],K=O[O.length-1],O=_.getAscendant("table"),p=CKEDITOR.tools.buildTableMap(O),N=[];m.reset();var k=0;for(m=p.length;k<m;k++)for(var b=0,x=p[k].length;b<x;b++)void 0===y&&p[k][b]==_.$&&(y=b),p[k][b]==K.$&&(C=b);for(k=y;k<=C;k++)for(b=0;b<p.length;b++)K=p[b],_=new CKEDITOR.dom.element(O.$.rows[b]),(K=new CKEDITOR.dom.element(K[k])).$&&(1==K.$.colSpan?K.remove():--K.$.colSpan,b+=K.$.rowSpan-1,_.$.cells.length||N.push(_));return y=p[0].length-1>C?new CKEDITOR.dom.element(p[0][C+1]):y&&-1!==p[0][y-1].cellIndex?new CKEDITOR.dom.element(p[0][y-1]):new CKEDITOR.dom.element(O.$.parentNode),N.length==m&&(I[0].moveToPosition(O,CKEDITOR.POSITION_AFTER_END),I[0].select(),O.remove()),y}(C=C.getSelection()))&&l(C,!0)}})),_("columnInsertBefore",I({requiredContent:"table",exec:function(C){a(C=v(C=C.getSelection()),!0)}})),_("columnInsertAfter",I({requiredContent:"table",exec:function(C){a(C=v(C=C.getSelection()))}})),_("cellDelete",I({requiredContent:"table",exec:function(C){i(C=C.getSelection())}})),_("cellMerge",I({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(C,N){N.cell=e(C.getSelection()),l(N.cell,!0)}})),_("cellMergeRight",I({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(C,N){N.cell=e(C.getSelection(),"right"),l(N.cell,!0)}})),_("cellMergeDown",I({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(C,N){N.cell=e(C.getSelection(),"down"),l(N.cell,!0)}})),_("cellVerticalSplit",I({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(C){l(u(C.getSelection()))}})),_("cellHorizontalSplit",I({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(C){l(n(C.getSelection()))}})),_("cellInsertBefore",I({requiredContent:"table",exec:function(C){d(C=C.getSelection(),!0)}})),_("cellInsertAfter",I({requiredContent:"table",exec:function(C){d(C=C.getSelection())}})),g.addMenuItems&&g.addMenuItems({tablecell:{label:K.cell.menu,group:"tablecell",order:1,getItems:function(){var C=v(N=g.getSelection()),N={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:e(N,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:e(N,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:e(N,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:u(N,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:n(N,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return g.filter.check(p)&&(N.tablecell_properties=0<C.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),N}},tablecell_insertBefore:{label:K.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:K.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:K.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:K.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:K.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:K.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:K.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:K.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:K.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:K.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:K.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:K.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:K.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:K.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:K.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:K.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:K.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),g.contextMenu&&g.contextMenu.addListener(function(y,C,N){return(y=N.contains({td:1,th:1},1))&&!y.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:o,insertRow:t,insertColumn:a,getSelectedCells:v},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(v,t,c,o,s){v=v.$.rows,c=c||0,o="number"==typeof o?o:v.length-1,s="number"==typeof s?s:-1;var a=-1,f=[];for(t=t||0;t<=o;t++){!f[++a]&&(f[a]=[]);for(var d=-1,i=c;i<=(-1===s?v[t].cells.length-1:s)&&(l=v[t].cells[i]);i++){for(d++;f[a][d];)d++;for(var r=isNaN(l.colSpan)?1:l.colSpan,l=isNaN(l.rowSpan)?1:l.rowSpan,e=0;e<l&&!(t+e>o);e++){f[a+e]||(f[a+e]=[]);for(var n=0;n<r;n++)f[a+e][d+n]=v[t].cells[i]}if(d+=r-1,-1!==s&&d>=s)break}}return f},function(){function v(y){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(y)}function t(y,C){var E,R,N=y.getAscendant("table"),k=C.getAscendant("table"),b=CKEDITOR.tools.buildTableMap(N),x=l(y),S=l(C),H=[],L={};for(N.contains(k)&&(S=l(C=C.getAscendant({td:1,th:1}))),x>S&&(N=x,x=S,S=N,N=y,y=C,C=N),N=0;N<b[x].length;N++)if(y.$===b[x][N]){E=N;break}for(N=0;N<b[S].length;N++)if(C.$===b[S][N]){R=N;break}for(E>R&&(N=E,E=R,R=N),N=x;N<=S;N++)for(x=E;x<=R;x++)(k=new CKEDITOR.dom.element(b[N][x])).$&&!k.getCustomData("selected_cell")&&(H.push(k),CKEDITOR.dom.element.setMarker(L,k,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(L),H}function s(y,C){var b,N=y.editable().find(".cke_table-faked-selection"),k=y.editable().findOne("[data-cke-table-faked-selection-table]");for(y.fire("lockSnapshot"),y.editable().removeClass("cke_table-faked-selection-editor"),b=0;b<N.count();b++)N.getItem(b).removeClass("cke_table-faked-selection");k&&k.data("cke-table-faked-selection-table",!1),y.fire("unlockSnapshot"),C&&(m={active:!1},y.getSelection().isInTable()&&y.getSelection().reset())}function a(y,C){var k,b,N=[];for(b=0;b<C.length;b++)(k=y.createRange()).setStartBefore(C[b]),k.setEndAfter(C[b]),N.push(k);y.getSelection().selectRanges(N)}function i(y){var b,C=(y=y.editor||y.sender.editor)&&y.getSelection(),N=C&&C.getRanges()||[],k=(k=N&&N[0].getEnclosedNode())&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("img");if(C&&(s(y),C.isInTable()&&C.isFake))if(k)y.getSelection().reset();else if(!N[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){for(1===N.length&&N[0]._getTableElement()&&N[0]._getTableElement().is("table")&&(b=N[0]._getTableElement()),b=I(C,b),y.fire("lockSnapshot"),C=0;C<b.length;C++)b[C].addClass("cke_table-faked-selection");0<b.length&&(y.editable().addClass("cke_table-faked-selection-editor"),b[0].getAscendant("table").data("cke-table-faked-selection-table","")),y.fire("unlockSnapshot")}}function l(y){return y.getAscendant("tr",!0).$.rowIndex}function r(y){function N(R){return!R.getAscendant("table",!0)&&R.getDocument().equals(b.document)}if(y.data.getTarget().getName&&("mouseup"===y.name||!v(y.data.getTarget()))){var b=y.editor||y.listenerData.editor,x=b.getSelection(1),S=function o(y){return(y=y.editable().findOne(".cke_table-faked-selection"))&&y.getAscendant("table")}(b),H=(L=y.data.getTarget())&&L.getAscendant({td:1,th:1},!0),L=L&&L.getAscendant("table",!0),E={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};L&&L.hasAttribute("data-cke-tableselection-ignored")||(function k(R,A,F,$){return!("mousedown"!==R.name||CKEDITOR.tools.getMouseButton(R)!==CKEDITOR.MOUSE_BUTTON_LEFT&&$)||((A=R.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!N(R.data.getTarget()))&&(A=!((R=R.data.getTarget().getAscendant({td:1,th:1},!0))&&R.hasClass("cke_table-faked-selection"))),A)}(y,x,0,L)&&s(b,!0),!m.active&&"mousedown"===y.name&&CKEDITOR.tools.getMouseButton(y)===CKEDITOR.MOUSE_BUTTON_LEFT&&L&&(m={active:!0},CKEDITOR.document.on("mouseup",r,null,{editor:b})),(H||L)&&function d(y,C,N){var b,k=I(y.getSelection(!0));if(C=C.is("table")?null:C,(b=m.active&&!m.first)&&!(b=C)&&(b=y.getSelection().getRanges(),b=!!(1<k.length||b[0]&&!b[0].collapsed)),b)m.first=C||k[0],m.dirty=!C&&1!==k.length;else if(m.active&&C&&m.first.getAscendant("table").equals(C.getAscendant("table"))){if(k=t(m.first,C),!m.dirty&&1===k.length&&!v(N.data.getTarget()))return s(y,"mouseup"===N.name);m.dirty=!0,m.last=C,a(y,k)}}(b,H||L,y),"mouseup"===y.name&&(CKEDITOR.tools.getMouseButton(y)===CKEDITOR.MOUSE_BUTTON_LEFT&&(N(y.data.getTarget())||function C(R,A){return!(!R||!A)&&(R.equals(A)||R.contains(A)||A.contains(R)||R.getCommonAncestor(A).is(E))}(S,L))&&function f(y){var C=y.editable().find(".cke_table-faked-selection");1>C.count()||a(y,C=t(C.getItem(0),C.getItem(C.count()-1)))}(b),m={active:!1},CKEDITOR.document.removeListener("mouseup",r)))}}function e(y){var C=y.data.getTarget().getAscendant("table",!0);C&&C.hasAttribute("data-cke-tableselection-ignored")||(C=y.data.getTarget().getAscendant({td:1,th:1},!0))&&!C.hasClass("cke_table-faked-selection")&&(y.cancel(),y.data.preventDefault())}function u(y){var C=y.editor||y.sender.editor,N=C.getSelection();N.isInTable()&&(N.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||function n(y,C){var R,A,F,$,k=y.getSelection(),b=k.createBookmarks(),x=y.document,S=y.createRange(),H=x.getDocumentElement().$,L=CKEDITOR.env.ie&&9>CKEDITOR.env.version,E=y.blockless||CKEDITOR.env.ie?"span":"div";x.getById("cke_table_copybin")||(R=x.createElement(E),(A=x.createElement(E)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),R.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),R.setStyle("ltr"==y.config.contentsLangDirection?"left":"right","-5000px"),R.setHtml(y.getSelectedHtml(!0)),y.fire("lockSnapshot"),A.append(R),y.editable().append(A),$=y.on("selectionChange",function N(D){D.cancel()},null,null,0),L&&(F=H.scrollTop),S.selectNodeContents(R),S.select(),L&&(H.scrollTop=F),setTimeout(function(){A.remove(),k.selectBookmarks(b),$.removeListener(),y.fire("unlockSnapshot"),C&&(y.extractSelectedHtml(),y.fire("saveSnapshot"))},100))}(C,"cut"===y.name))}function h(y){this._reset(),y&&this.setSelectedCells(y)}function T(y,C,N){y.on("beforeCommandExec",function(k){-1!==CKEDITOR.tools.array.indexOf(C,k.data.name)&&(k.data.selectedCells=I(y.getSelection()))}),y.on("afterCommandExec",function(k){-1!==CKEDITOR.tools.array.indexOf(C,k.data.name)&&N(y,k.data)})}var g,I,_,K,O,m={active:!1};(h.prototype={})._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},h.prototype.setSelectedCells=function(y){this._reset(),y=y.slice(0),this._arraySortByDOMOrder(y),this.cells.all=y,this.cells.first=y[0],this.cells.last=y[y.length-1],this.rows.first=y[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},h.prototype.getTableMap=function(){var C,y=_(this.cells.first);e:{var b,k=(C=this.cells.last).getAscendant("table"),N=l(C);for(k=CKEDITOR.tools.buildTableMap(k),b=0;b<k[N].length;b++)if(new CKEDITOR.dom.element(k[N][b]).equals(C)){C=b;break e}C=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),l(this.rows.first),y,l(this.rows.last),C)},h.prototype._getTable=function(){return this.rows.first.getAscendant("table")},h.prototype.insertRow=function(y,C,N){if(void 0===y)y=1;else if(0>=y)return;for(var S,k=this.cells.first.$.cellIndex,b=this.cells.last.$.cellIndex,x=N?[]:this.cells.all,H=0;H<y;H++)S=K(N?this.cells.all:x,C),S=CKEDITOR.tools.array.filter(S.find("td, th").toArray(),function(L){return!!N||L.$.cellIndex>=k&&L.$.cellIndex<=b}),x=C?S.concat(x):x.concat(S);this.setSelectedCells(x)},h.prototype.insertColumn=function(y){function C(S){return(S=l(S))>=k&&S<=b}if(void 0===y)y=1;else if(0>=y)return;for(var N=(x=this.cells).all,k=l(x.first),b=l(x.last),x=0;x<y;x++)N=N.concat(CKEDITOR.tools.array.filter(O(N),C));this.setSelectedCells(N)},h.prototype.emptyCells=function(y){y=y||this.cells.all;for(var C=0;C<y.length;C++)y[C].setHtml("")},h.prototype._arraySortByDOMOrder=function(y){y.sort(function(C,N){return C.getPosition(N)&CKEDITOR.POSITION_PRECEDING?-1:1})};var p={onPaste:function(C){function N(A){return Math.max.apply(null,CKEDITOR.tools.array.map(A,function(F){return F.length},0))}var b=C.editor,x=b.getSelection();if(!(S=(S=x.getRanges()).length&&S[0]._getTableElement({table:1}))||!S.hasAttribute("data-cke-tableselection-ignored")){var E,R,H=I(x),S=this.findTableInPastedContent(b,C.data.dataValue),L=x.isInTable(!0)&&this.isBoundarySelection(x);!H.length||1===H.length&&!function c(y){if(y)return(y=y.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),(y=y.getEnclosedNode())&&y.is&&y.is(CKEDITOR.dtd.$tableContent)}(x.getRanges()[0])&&!L||L&&!S||(H=H[0].getAscendant("table"),E=new h(I(x,H)),b.once("afterPaste",function(){var F;if(R){F=new CKEDITOR.dom.element(R[0][0]);var $=R[R.length-1];F=t(F,new CKEDITOR.dom.element($[$.length-1]))}else F=E.cells.all;a(b,F)}),S?(C.stop(),L?(E.insertRow(1,1===L,!0),x.selectElement(E.rows.first)):(E.emptyCells(),a(b,E.cells.all)),C=E.getTableMap(),R=CKEDITOR.tools.buildTableMap(S),E.insertRow(R.length-C.length),E.insertColumn(N(R)-N(C)),C=E.getTableMap(),this.pasteTable(E,C,R),b.fire("saveSnapshot"),setTimeout(function(){b.fire("afterPaste")},0)):(function k(A){var F=b.createRange();F.selectNodeContents(A),F.select()}(E.cells.first),b.once("afterPaste",function(){b.fire("lockSnapshot"),E.emptyCells(E.cells.all.slice(1)),a(b,E.cells.all),b.fire("unlockSnapshot")})))}},isBoundarySelection:function(C){var N=(C=C.getRanges()[0]).endContainer.getAscendant("tr",!0);if(N&&C.collapsed){if(C.checkBoundaryOfElement(N,CKEDITOR.START))return 1;if(C.checkBoundaryOfElement(N,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(C,N){var k=C.dataProcessor,b=new CKEDITOR.dom.element("body");return k||(k=new CKEDITOR.htmlDataProcessor(C)),b.setHtml(k.toHtml(N),{fixForBody:!1}),1<b.getChildCount()?null:b.findOne("table")},pasteTable:function(C,N,k){var b,L,E,R,A,x=_(C.cells.first),S=C._getTable(),H={};for(R=0;R<k.length;R++)for(L=new CKEDITOR.dom.element(S.$.rows[C.rows.first.$.rowIndex+R]),A=0;A<k[R].length;A++)E=new CKEDITOR.dom.element(k[R][A]),b=N[R]&&N[R][A]?new CKEDITOR.dom.element(N[R][A]):null,E&&!E.getCustomData("processed")?(b&&b.getParent()?E.replace(b):(0===A||k[R][A-1])&&((b=0!==A?new CKEDITOR.dom.element(k[R][A-1]):null)&&L.equals(b.getParent())?E.insertAfter(b):0<x?L.$.cells[x]?E.insertAfter(new CKEDITOR.dom.element(L.$.cells[x])):L.append(E):L.append(E,!0)),CKEDITOR.dom.element.setMarker(H,E,"processed",!0)):E.getCustomData("processed")&&b&&b.remove();CKEDITOR.dom.element.clearAllMarkers(H)}};CKEDITOR.plugins.tableselection={getCellsBetween:t,keyboardIntegration:function(C){function N(b){var x=b.getEnclosedNode();x&&"function"==typeof x.is&&x.is({td:1,th:1})?x.setText(""):b.deleteContents(),CKEDITOR.tools.array.forEach(b._find("td"),function(S){S.appendBogus()})}var b,S,H,k=C.editable();k.attachListener(k,"keydown",(b=C,S={37:1,38:1,39:1,40:1,8:1,46:1,13:1},delete(H=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent)).td,delete H.th,function(L){var A,$,D,w,E=L.data.getKey(),R=L.data.getKeystroke(),F=37===E||38==E;if(S[E]&&!b.readOnly&&(A=b.getSelection())&&A.isInTable()&&A.isFake)if(D=($=A.getRanges())[0]._getTableElement(),w=$[$.length-1]._getTableElement(),(13!==E||b.plugins.enterkey)&&(L.data.preventDefault(),L.cancel()),36<E&&41>E)$[0].moveToElementEditablePosition(F?D:w,!F),A.selectRanges([$[0]]);else if(13!==E||13===R||R===CKEDITOR.SHIFT+13){for(L=0;L<$.length;L++)N($[L]);(L=function x(L,E){if(!E.length)return null;var R=b.createRange(),A=CKEDITOR.dom.range.mergeRanges(E);CKEDITOR.tools.array.forEach(A,function(W){W.enlarge(CKEDITOR.ENLARGE_ELEMENT)});var G,F=($=A[0].getBoundaryNodes()).startNode,$=$.endNode;if(F&&F.is&&F.is(H)){for(var D=F.getAscendant("table",!0),w=F.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,D),P=!1;w&&(F.contains(G=w)||!G.is||!G.is("td","th"));)w=w.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,D);return!w&&$&&$.is&&!$.is("table")&&$.getNext()&&(w=$.getNext().findOne("td, th"),P=!0),w?R["moveToElementEdit"+(P?"Start":"End")](w):(R.setStartBefore(F.getAscendant("table",!0)),R.collapse(!0)),A[0].deleteContents(),[R]}return F?(R.moveToElementEditablePosition(F),[R]):void 0}(0,$))?$=L:$[0].moveToElementEditablePosition(D),A.selectRanges($),13===E&&b.plugins.enterkey?(b.fire("lockSnapshot"),b.execCommand(13===R?"enter":"shiftEnter"),b.fire("unlockSnapshot"),b.fire("saveSnapshot")):13!==E&&b.fire("saveSnapshot")}}),null,null,-1),k.attachListener(k,"keypress",function(b){var H,x=C.getSelection(),S=b.data.$.charCode||13===b.data.getKey();if(!C.readOnly&&x&&x.isInTable()&&x.isFake&&S&&!(b.data.getKeystroke()&CKEDITOR.CTRL)){for(S=(b=x.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),H=0;H<b.length;H++)N(b[H]);S&&(b[0].moveToElementEditablePosition(S),x.selectRanges([b[0]]))}},null,null,-1)}},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){g=CKEDITOR.plugins.tabletools,I=g.getSelectedCells,_=g.getCellColIndex,K=g.insertRow,O=g.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(C){this.isSupportedEnvironment()&&(C.addContentsCss&&C.addContentsCss(this.path+"styles/tableselection.css"),C.on("contentDom",function(){var N=C.editable(),k=N.isInline()?N:C.document,b={editor:C};N.attachListener(k,"mousedown",r,null,b),N.attachListener(k,"mousemove",r,null,b),N.attachListener(k,"mouseup",r,null,b),N.attachListener(N,"dragstart",e),N.attachListener(C,"selectionCheck",i),CKEDITOR.plugins.tableselection.keyboardIntegration(C),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(N.attachListener(N,"cut",u),N.attachListener(N,"copy",u))}),C.on("paste",p.onPaste,p),T(C,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),function(N,k){a(N,k.selectedCells)}),T(C,["cellMerge","cellMergeRight","cellMergeDown"],function(N,k){a(N,[k.commandData.cell])}),T(C,["cellDelete"],function(N){s(N,!0)}))}})}(),function(){var v=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(i){function l(T){e.enabled&&!1!==T.data.command.canUndo&&e.save()}function r(){e.enabled=!i.readOnly&&"wysiwyg"==i.mode,e.onChange()}var e=i.undoManager=new c(i),n=e.editingHandler=new a(e),u=i.addCommand("undo",{exec:function(){e.undo()&&(i.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),h=i.addCommand("redo",{exec:function(){e.redo()&&(i.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});i.setKeystroke([[v[0],"undo"],[v[1],"redo"],[v[2],"redo"]]),e.onChange=function(){u.setState(e.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),h.setState(e.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},i.on("beforeCommandExec",l),i.on("afterCommandExec",l),i.on("saveSnapshot",function(T){e.save(T.data&&T.data.contentOnly)}),i.on("contentDom",n.attachListeners,n),i.on("instanceReady",function(){i.fire("saveSnapshot")}),i.on("beforeModeUnload",function(){"wysiwyg"==i.mode&&e.save(!0)}),i.on("mode",r),i.on("readOnly",r),i.ui.addButton&&(i.ui.addButton("Undo",{label:i.lang.undo.undo,command:"undo",toolbar:"undo,10"}),i.ui.addButton("Redo",{label:i.lang.undo.redo,command:"redo",toolbar:"undo,20"})),i.resetUndo=function(){e.reset(),i.fire("saveSnapshot")},i.on("updateSnapshot",function(){e.currentImage&&e.update()}),i.on("lockSnapshot",function(T){e.lock((T=T.data)&&T.dontUpdate,T&&T.forceUpdate)}),i.on("unlockSnapshot",e.unlock,e)}}),CKEDITOR.plugins.undo={};var c=CKEDITOR.plugins.undo.UndoManager=function(d){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=d.config.undoStackSize||20,this.strokesLimit=25,this.editor=d,this.reset()};c.prototype={type:function(i,l){var r=c.getKeyGroup(i),e=this.strokesRecorded[r]+1;l=l||e>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),l?(e=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[r]=e,this.previousKeyGroup=r},keyGroupChanged:function(i){return c.getKeyGroup(i)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(i,l,r){var e=this.editor;if(this.locked||"ready"!=e.status||"wysiwyg"!=e.mode)return!1;var n=e.editable();if(!n||"ready"!=n.status||(n=this.snapshots,l||(l=new o(e)),!1===l.contents))return!1;if(this.currentImage)if(l.equalsContent(this.currentImage)){if(i||l.equalsSelection(this.currentImage))return!1}else!1!==r&&e.fire("change");return n.splice(this.index+1,n.length-this.index-1),n.length==this.limit&&n.shift(),this.index=n.push(l)-1,this.currentImage=l,!1!==r&&this.refreshState(),!0},restoreImage:function(i){var r,l=this.editor;i.bookmarks&&(l.focus(),r=l.getSelection()),this.locked={level:999},this.editor.loadSnapshot(i.contents),i.bookmarks?r.selectBookmarks(i.bookmarks):CKEDITOR.env.ie&&((r=this.editor.document.getBody().$.createTextRange()).collapse(!0),r.select()),this.locked=null,this.index=i.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),l.fire("change")},getNextImage:function(i){var e,l=this.snapshots,r=this.currentImage;if(r)if(i){for(e=this.index-1;0<=e;e--)if(!r.equalsContent(i=l[e]))return i.index=e,i}else for(e=this.index+1;e<l.length;e++)if(!r.equalsContent(i=l[e]))return i.index=e,i;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var i=this.getNextImage(!0);if(i)return this.restoreImage(i),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var i=this.getNextImage(!1);if(i)return this.restoreImage(i),!0}return!1},update:function(i){if(!this.locked){i||(i=new o(this.editor));for(var l=this.index,r=this.snapshots;0<l&&this.currentImage.equalsContent(r[l-1]);)--l;r.splice(l,this.index-l+1,i),this.index=l,this.currentImage=i}},updateSelection:function(i){if(!this.snapshots.length)return!1;var l=this.snapshots,r=l[l.length-1];return!(!r.equalsContent(i)||r.equalsSelection(i)||(this.currentImage=l[l.length-1]=i,0))},lock:function(i,l){if(this.locked)this.locked.level++;else if(i)this.locked={level:1};else{var r=null;if(l)r=!0;else{var e=new o(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(e)&&(r=e)}this.locked={update:r,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var i=this.locked.update;if(this.locked=null,!0===i)this.update();else if(i){var l=new o(this.editor,!0);i.equalsContent(l)||this.update()}}}},c.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},c.keyGroups={PRINTABLE:0,FUNCTIONAL:1},c.isNavigationKey=function(d){return!!c.navigationKeyCodes[d]},c.getKeyGroup=function(d){var i=c.keyGroups;return t[d]?i.FUNCTIONAL:i.PRINTABLE},c.getOppositeKeyGroup=function(d){var i=c.keyGroups;return d==i.FUNCTIONAL?i.PRINTABLE:i.FUNCTIONAL},c.ieFunctionalKeysBug=function(d){return CKEDITOR.env.ie&&c.getKeyGroup(d)==c.keyGroups.FUNCTIONAL};var o=CKEDITOR.plugins.undo.Image=function(d,i){this.editor=d,d.fire("beforeUndoImage");var l=d.getSnapshot();CKEDITOR.env.ie&&l&&(l=l.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=l,i||(this.bookmarks=(l=l&&d.getSelection())&&l.createBookmarks2(!0)),d.fire("afterUndoImage")},s=/\b(?:href|src|name)="[^"]*?"/gi;o.prototype={equalsContent:function(i){var l=this.contents;return i=i.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(l=l.replace(s,""),i=i.replace(s,"")),l==i},equalsSelection:function(i){var l=this.bookmarks;if(i=i.bookmarks,l||i){if(!l||!i||l.length!=i.length)return!1;for(var r=0;r<l.length;r++){var e=l[r],n=i[r];if(e.startOffset!=n.startOffset||e.endOffset!=n.endOffset||!CKEDITOR.tools.arrayCompare(e.start,n.start)||!CKEDITOR.tools.arrayCompare(e.end,n.end))return!1}}return!0}};var a=CKEDITOR.plugins.undo.NativeEditingHandler=function(d){this.undoManager=d,this.ignoreInputEvent=!1,this.keyEventsStack=new f,this.lastKeydownImage=null};a.prototype={onKeydown:function(i){var l=i.data.getKey();229!==l&&(-1<CKEDITOR.tools.indexOf(v,i.data.getKeystroke())?i.data.preventDefault():(this.keyEventsStack.cleanUp(i),i=this.undoManager,this.keyEventsStack.getLast(l)||this.keyEventsStack.push(l),this.lastKeydownImage=new o(i.editor),(c.isNavigationKey(l)||this.undoManager.keyGroupChanged(l))&&(i.strokesRecorded[0]||i.strokesRecorded[1])&&(i.save(!1,this.lastKeydownImage,!1),i.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var i=this.keyEventsStack.getLast();i||(i=this.keyEventsStack.push(0)),this.keyEventsStack.increment(i.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(i.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(i){var l=this.undoManager;i=i.data.getKey();var r=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(i),c.ieFunctionalKeysBug(i)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new o(l.editor,!0))||(0<r?l.type(i):c.isNavigationKey(i)&&this.onNavigationKey(!0))},onNavigationKey:function(i){var l=this.undoManager;!i&&l.save(!0,null,!1)||l.updateSelection(new o(l.editor)),l.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var i=this.undoManager.editor,l=i.editable(),r=this;l.attachListener(l,"keydown",function(e){r.onKeydown(e),c.ieFunctionalKeysBug(e.data.getKey())&&r.onInput()},null,null,999),l.attachListener(l,CKEDITOR.env.ie?"keypress":"input",r.onInput,r,null,999),l.attachListener(l,"keyup",r.onKeyup,r,null,999),l.attachListener(l,"paste",r.ignoreInputEventListener,r,null,999),l.attachListener(l,"drop",r.ignoreInputEventListener,r,null,999),i.on("afterPaste",r.activateInputEventListener,r,null,999),l.attachListener(l.isInline()?l:i.document.getDocumentElement(),"click",function(){r.onNavigationKey()},null,null,999),l.attachListener(this.undoManager.editor,"blur",function(){r.keyEventsStack.remove(9)},null,null,999)}};var f=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};f.prototype={push:function(i){return i=this.stack.push({keyCode:i,inputs:0}),this.stack[i-1]},getLastIndex:function(i){if("number"!=typeof i)return this.stack.length-1;for(var l=this.stack.length;l--;)if(this.stack[l].keyCode==i)return l;return-1},getLast:function(i){return-1!=(i=this.getLastIndex(i))?this.stack[i]:null},increment:function(i){this.getLast(i).inputs++},remove:function(i){-1!=(i=this.getLastIndex(i))&&this.stack.splice(i,1)},resetInputs:function(i){if("number"==typeof i)this.getLast(i).inputs=0;else for(i=this.stack.length;i--;)this.stack[i].inputs=0},getTotalInputs:function(){for(var i=this.stack.length,l=0;i--;)l+=this.stack[i].inputs;return l},cleanUp:function(i){(i=i.data.$).ctrlKey||i.metaKey||this.remove(17),i.shiftKey||this.remove(16),i.altKey||this.remove(18)}}}(),function(){function v(i,l){CKEDITOR.tools.extend(this,{editor:i,editable:i.editable(),doc:i.document,win:i.window},l,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(i,l){CKEDITOR.tools.extend(this,l,{editor:i},!0)}function c(i,l){var r=i.editable();CKEDITOR.tools.extend(this,{editor:i,editable:r,inline:r.isInline(),doc:i.document,win:i.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},l,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var e=CKEDITOR.tools.bind(this.queryViewport,this),n=CKEDITOR.tools.bind(this.hideVisible,this),u=CKEDITOR.tools.bind(this.removeAll,this);r.attachListener(this.winTop,"resize",e),r.attachListener(this.winTop,"scroll",e),r.attachListener(this.winTop,"resize",n),r.attachListener(this.win,"scroll",n),r.attachListener(this.inline?r:this.frame,"mouseout",function(h){var T=h.data.$.clientX;h=h.data.$.clientY,this.queryViewport(),(T<=this.rect.left||T>=this.rect.right||h<=this.rect.top||h>=this.rect.bottom)&&this.hideVisible(),(0>=T||T>=this.winTopPane.width||0>=h||h>=this.winTopPane.height)&&this.hideVisible()},this),r.attachListener(i,"resize",e),r.attachListener(i,"mode",u),i.on("destroy",u),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},a,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},s,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},s,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function o(i){var l;return(l=i&&i.type==CKEDITOR.NODE_ELEMENT)&&(l=!(f[i.getComputedStyle("float")]||f[i.getAttribute("align")])),l&&!d[i.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,v.prototype={start:function(l){var u,h,T,m,r=this,e=this.editor,n=this.doc,g=CKEDITOR.tools.eventsBuffer(50,function(){e.readOnly||"wysiwyg"!=e.mode||(r.relations={},(h=n.$.elementFromPoint(T,m))&&h.nodeType&&(u=new CKEDITOR.dom.element(h),r.traverseSearch(u),isNaN(T+m)||r.pixelSearch(u,T,m),l&&l(r.relations,T,m)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(I){T=I.data.$.clientX,m=I.data.$.clientY,g.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){g.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var i={};return i[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,i[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,i[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(l){var r=this.editor.createRange();return r.moveToPosition(this.relations[l.uid].element,i[l.type]),r}}(),store:function(){function i(l,r,e){var n=l.getUniqueId();n in e?e[n].type|=r:e[n]={element:l,type:r}}return function(l,r){var e;r&CKEDITOR.LINEUTILS_AFTER&&o(e=l.getNext())&&e.isVisible()&&(i(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),r^=CKEDITOR.LINEUTILS_AFTER),r&CKEDITOR.LINEUTILS_INSIDE&&o(e=l.getFirst())&&e.isVisible()&&(i(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),r^=CKEDITOR.LINEUTILS_INSIDE),i(l,r,this.relations)}}(),traverseSearch:function(l){var r,e,n;do{if(!(n=l.$["data-cke-expando"])||!(n in this.relations)){if(l.equals(this.editable))break;if(o(l))for(r in this.lookups)(e=this.lookups[r](l))&&this.store(l,e)}}while((!l||l.type!=CKEDITOR.NODE_ELEMENT||"true"!=l.getAttribute("contenteditable"))&&(l=l.getParent()))},pixelSearch:function(){function i(r,e,n,u,h){for(var m,T=0;h(n)&&(n+=u,25!=++T);)if(m=this.doc.$.elementFromPoint(e,n))if(m==r)T=0;else if(l(r,m)&&(T=0,o(m=new CKEDITOR.dom.element(m))))return m}var l=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(r,e){return r.contains(e)}:function(r,e){return!!(16&r.compareDocumentPosition(e))};return function(r,e,n){var u=this.win.getViewPaneSize().height,h=i.call(this,r.$,e,n,-1,function(T){return 0<T});if(e=i.call(this,r.$,e,n,1,function(T){return T<u}),h)for(this.traverseSearch(h);!h.getParent().equals(r);)h=h.getParent();if(e)for(this.traverseSearch(e);!e.getParent().equals(r);)e=e.getParent();for(;(h||e)&&(h&&(h=h.getNext(o)),h&&!h.equals(e)&&(this.traverseSearch(h),e&&(e=e.getPrevious(o)),e&&!e.equals(h)));)this.traverseSearch(e)}}(),greedySearch:function(){this.relations={};for(var e,n,u,l=this.editable.getElementsByTag("*"),r=0;e=l.getItem(r++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&o(e)&&e.isVisible())for(u in this.lookups)(n=this.lookups[u](e))&&this.store(e,n);return this.relations}},t.prototype={locate:function(){function i(l,r){var e=l.element[r===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return e&&o(e)?(l.siblingRect=e.getClientRect(),r==CKEDITOR.LINEUTILS_BEFORE?(l.siblingRect.bottom+l.elementRect.top)/2:(l.elementRect.bottom+l.siblingRect.top)/2):r==CKEDITOR.LINEUTILS_BEFORE?l.elementRect.top:l.elementRect.bottom}return function(l){var r;for(var e in this.locations={},l)(r=l[e]).elementRect=r.element.getClientRect(),r.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(e,CKEDITOR.LINEUTILS_BEFORE,i(r,CKEDITOR.LINEUTILS_BEFORE)),r.type&CKEDITOR.LINEUTILS_AFTER&&this.store(e,CKEDITOR.LINEUTILS_AFTER,i(r,CKEDITOR.LINEUTILS_AFTER)),r.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(e,CKEDITOR.LINEUTILS_INSIDE,(r.elementRect.top+r.elementRect.bottom)/2);return this.locations}}(),sort:function(){var i,l,r,e;return function(n,u){for(var h in l=[],i=this.locations)for(var T in i[h])if(r=Math.abs(n-i[h][T]),l.length){for(e=0;e<l.length;e++)if(r<l[e].dist){l.splice(e,0,{uid:+h,type:T,dist:r});break}e==l.length&&l.push({uid:+h,type:T,dist:r})}else l.push({uid:+h,type:T,dist:r});return void 0!==u?l.slice(0,u):l}}(),store:function(l,r,e){this.locations[l]||(this.locations[l]={}),this.locations[l][r]=e}};var s={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},a={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};c.prototype={removeAll:function(){for(var l in this.hidden)this.hidden[l].remove(),delete this.hidden[l];for(l in this.visible)this.visible[l].remove(),delete this.visible[l]},hideLine:function(l){var r=l.getUniqueId();l.hide(),this.hidden[r]=l,delete this.visible[r]},showLine:function(l){var r=l.getUniqueId();l.show(),this.visible[r]=l,delete this.hidden[r]},hideVisible:function(){for(var l in this.visible)this.hideLine(this.visible[l])},placeLine:function(l,r){var e,n,u;if(e=this.getStyle(l.uid,l.type)){for(u in this.visible)if(this.visible[u].getCustomData("hash")!==this.hash){n=this.visible[u];break}if(!n)for(u in this.hidden)if(this.hidden[u].getCustomData("hash")!==this.hash){this.showLine(n=this.hidden[u]);break}n||this.showLine(n=this.addLine()),n.setCustomData("hash",this.hash),this.visible[n.getUniqueId()]=n,n.setStyles(e),r&&r(n)}},getStyle:function(l,r){var e=this.relations[l],n=this.locations[l][r],u={};if(u.width=e.siblingRect?Math.max(e.siblingRect.width,e.elementRect.width):e.elementRect.width,u.top=this.inline?n+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+n,u.top-this.winTopScroll.y<this.rect.top||u.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var h in this.inline?u.left=e.elementRect.left-this.rect.relativeX:(0<e.elementRect.left?u.left=this.rect.left+e.elementRect.left:(u.width+=e.elementRect.left,u.left=this.rect.left),0<(e=u.left+u.width-(this.rect.left+this.winPane.width))&&(u.width-=e)),u.left+=this.winTopScroll.x,u)u[h]=CKEDITOR.tools.cssLength(u[h]);return u},addLine:function(){var l=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return l.appendTo(this.container),l},prepare:function(l,r){this.relations=l,this.locations=r,this.hash=Math.random()},cleanup:function(){var l,r;for(r in this.visible)(l=this.visible[r]).getCustomData("hash")!==this.hash&&this.hideLine(l)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(l){l=l.getClientRect();var r=this.container.getDocumentPosition(),e=this.container.getComputedStyle("position");return l.relativeX=l.relativeY=0,"static"!=e&&(l.relativeY=r.y,l.relativeX=r.x,l.top-=l.relativeY,l.bottom-=l.relativeY,l.left-=l.relativeX,l.right-=l.relativeX),l}};var f={left:1,right:1,center:1},d={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:v,locator:t,liner:c}}(),function(){function v(t){return t.getName&&!t.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(c){if(CKEDITOR.env.webkit){var o=CKEDITOR.plugins.widgetselection;c.on("contentDom",function(s){var a=(s=s.editor).editable();a.attachListener(a,"keydown",function(f){f.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout(function(){o.addFillers(a)||o.removeFillers(a)},0)},null,null,-1),s.on("selectionCheck",function(f){o.removeFillers(f.editor.editable())}),s.on("paste",function(f){f.data.dataValue=o.cleanPasteData(f.data.dataValue)}),"selectall"in s.plugins&&o.addSelectAllIntegration(s)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(c){var o=c.editor;if(!this.isWholeContentSelected(c)&&0<c.getChildCount()){var s=c.getFirst(v),a=c.getLast(v);if(s&&s.type==CKEDITOR.NODE_ELEMENT&&!s.isEditable()&&(this.startFiller=this.createFiller(),c.append(this.startFiller,1)),a&&a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable()&&(this.endFiller=this.createFiller(!0),c.append(this.endFiller,0)),this.hasFiller(c))return(o=o.createRange()).selectNodeContents(c),o.select(),!0}return!1},removeFillers:function(c){if(this.hasFiller(c)&&!this.isWholeContentSelected(c)){var o=c.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),s=c.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&o&&this.startFiller.equals(o)?this.removeFiller(this.startFiller,c):this.startFiller=o,this.endFiller&&s&&this.endFiller.equals(s)?this.removeFiller(this.endFiller,c):this.endFiller=s}},cleanPasteData:function(c){return c&&c.length&&(c=c.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),c},isWholeContentSelected:function(c){var o=c.editor.getSelection().getRanges()[0];return!(!o||o&&o.collapsed||((o=o.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(o&&c&&o.startContainer&&o.endContainer&&0===o.startOffset&&o.endOffset===c.getChildCount()&&o.startContainer.equals(c)&&o.endContainer.equals(c))))},hasFiller:function(c){return 0<c.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(c){var o=new CKEDITOR.dom.element(this.fillerTagName);return o.setHtml(this.fillerContent),o.setAttribute(this.fillerAttribute,c?"end":"start"),o.setAttribute("data-cke-temp",1),o.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),o},removeFiller:function(c,o){if(c){var d,i,s=o.editor,a=o.editor.getSelection().getRanges()[0].startPath(),f=s.createRange();a.contains(c)&&(d=c.getHtml(),i=!0),a="start"==c.getAttribute(this.fillerAttribute),c.remove(),d&&0<d.length&&d!=this.fillerContent?(o.insertHtmlIntoRange(d,s.getSelection().getRanges()[0]),f.setStartAt(o.getChild(o.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),s.getSelection().selectRanges([f])):i&&(a?f.setStartAt(o.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):f.setEndAt(o.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),o.editor.getSelection().selectRanges([f]))}},createFillerRegex:function(c){var o=this.createFiller(c).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((c?"":"^")+o+(c?"$":""))},addSelectAllIntegration:function(c){var o=this;c.editable().attachListener(c,"beforeCommandExec",function(s){var a=c.editable();"selectAll"==s.data.name&&a&&o.addFillers(a)},null,null,9999)}}}(),function(){function v(M){this.editor=M,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function N(M){var U,q,B=M.editor;B.on("toHtml",function(j){var V,Y=function e(M){var B=[],U=M._.upcasts,q=M._.upcastCallbacks;return{toBeWrapped:B,iterator:function(Y){var V,X,Q,te,ne;if("data-cke-widget-wrapper"in Y.attributes)return(Y=Y.getFirst(t.isParserWidgetElement))&&B.push([Y]),!1;if("data-widget"in Y.attributes)return B.push([Y]),!1;if(ne=U.length){if(Y.attributes["data-cke-widget-upcasted"])return!1;for(te=0,V=q.length;te<V;++te)if(!1===q[te](Y))return;for(te=0;te<ne;++te)if(X=(V=U[te])[0](Y,Q={}))return X instanceof CKEDITOR.htmlParser.element&&(Y=X),Y.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(Q)),Y.attributes["data-cke-widget-upcasted"]=1,B.push([Y,V[1]]),!1}}}}(M);for(j.data.dataValue.forEach(Y.iterator,CKEDITOR.NODE_ELEMENT,!0);V=Y.toBeWrapped.pop();){var X=V[0],Q=X.parent;Q.type==CKEDITOR.NODE_ELEMENT&&Q.attributes["data-cke-widget-wrapper"]&&Q.replaceWith(X),M.wrapElement(V[0],V[1])}U=j.data.protectedWhitespaces?3==j.data.dataValue.children.length&&t.isParserWidgetWrapper(j.data.dataValue.children[1]):1==j.data.dataValue.children.length&&t.isParserWidgetWrapper(j.data.dataValue.children[0])},null,null,8),B.on("dataReady",function(){if(q)for(var Y,V,j=B.editable().find(".cke_widget_wrapper"),X=0,Q=j.count();X<Q;++X)(V=(Y=j.getItem(X)).getFirst(t.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&V.data("widget")?(V.replace(Y),M.wrapElement(V)):Y.remove();q=0,M.destroyAll(!0),M.initOnAll()}),B.on("loadSnapshot",function(j){/data-cke-widget/.test(j.data)&&(q=1),M.destroyAll(!0)},null,null,9),B.on("paste",function(j){(j=j.data).dataValue=j.dataValue.replace(Z,I),j.range&&(j=t.getNestedEditable(B.editable(),j.range.startContainer))&&(j=CKEDITOR.filter.instances[j.data("cke-filter")])&&B.setActiveFilter(j)}),B.on("afterInsertHtml",function(j){j.data.intoRange?M.checkWidgets({initOnlyNew:!0}):(B.fire("lockSnapshot"),M.checkWidgets({initOnlyNew:!0,focusInited:U}),B.fire("unlockSnapshot"))})}(this),function C(M){var B=M.editor,U={};B.on("toDataFormat",function(q){var j=CKEDITOR.tools.getNextNumber(),Y=[];q.data.downcastingSessionId=j,U[j]=Y,q.data.dataValue.forEach(function(V){var Q,X=V.attributes;if("data-cke-widget-white-space"in X){Q=i(V);var te=l(V);Q.parent.attributes["data-cke-white-space-first"]&&(Q.value=Q.value.replace(/^&nbsp;/g," ")),te.parent.attributes["data-cke-white-space-last"]&&(te.value=te.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in X)(X=M.instances[X["data-cke-widget-id"]])&&(Q=V.getFirst(t.isParserWidgetElement),Y.push({wrapper:V,element:Q,widget:X,editables:{}}),"1"!=Q.attributes["data-cke-widget-keep-attr"]&&delete Q.attributes["data-widget"]);else if("data-cke-widget-editable"in X)return 0<Y.length&&(Y[Y.length-1].editables[X["data-cke-widget-editable"]]=V),!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),B.on("toDataFormat",function(q){if(q.data.downcastingSessionId){q=U[q.data.downcastingSessionId];for(var j,Y,V,X,Q,te;j=q.shift();){for(te in V=j.element,X=(Y=j.widget)._.downcastFn&&Y._.downcastFn.call(Y,V),j.editables)delete(Q=j.editables[te]).attributes.contenteditable,Q.setHtml(Y.editables[te].getData());X||(X=V),j.wrapper.replaceWith(X)}}},null,null,13),B.on("contentDomUnload",function(){M.destroyAll(!0)})}(this),this.on("checkWidgets",f),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function y(M){var B=M.editor;B.on("selectionCheck",function(){M.fire("checkSelection")}),M.on("checkSelection",M.checkSelection,M),B.on("selectionChange",function(U){var q=(U=t.getNestedEditable(B.editable(),U.data.selection.getStartElement()))&&M.getByElement(U),j=M.widgetHoldingFocusedEditable;j?j===q&&j.focusedEditable.equals(U)||(m(M,j,null),q&&U&&m(M,q,U)):q&&U&&m(M,q,U)}),B.on("dataReady",function(){k(M).commit()}),B.on("blur",function(){var U;(U=M.focused)&&a(M,U),(U=M.widgetHoldingFocusedEditable)&&m(M,U,null)})}(this),function K(M){var B=M.editor;B.on("contentDom",function(){var j,Y,U=B.editable(),q=U.isInline()?U:B.document;U.attachListener(q,"mousedown",function(V){var X=V.data.getTarget();j=X instanceof CKEDITOR.dom.element?M.getByElement(X):null,Y=0,j&&(j.inline&&X.type==CKEDITOR.NODE_ELEMENT&&X.hasAttribute("data-cke-widget-drag-handler")?(Y=1,M.focused!=j&&B.getSelection().removeAllRanges()):t.getNestedEditable(j.wrapper,X)?j=null:(V.data.preventDefault(),CKEDITOR.env.ie||j.focus()))}),U.attachListener(q,"mouseup",function(){Y&&j&&j.wrapper&&(Y=0,j.focus())}),CKEDITOR.env.ie&&U.attachListener(q,"mouseup",function(){setTimeout(function(){j&&j.wrapper&&U.contains(j.wrapper)&&(j.focus(),j=null)})})}),B.on("doubleclick",function(U){var q=M.getByElement(U.data.element);if(q&&!t.getNestedEditable(q.wrapper,U.data.element))return q.fire("doubleclick",{element:U.data.element})},null,null,1)}(this),function O(M){M.editor.on("key",function(B){var j,U=M.focused,q=M.widgetHoldingFocusedEditable;return U?j=U.fire("key",{keyCode:B.data.keyCode}):q&&(U=B.data.keyCode,B=q.focusedEditable,U==CKEDITOR.CTRL+65?(U=B.getBogus(),(q=q.editor.createRange()).selectNodeContents(B),U&&q.setEndAt(U,CKEDITOR.POSITION_BEFORE_START),q.select(),j=!1):8==U||46==U?(j=q.editor.getSelection().getRanges(),q=j[0],j=!(1==j.length&&q.collapsed&&q.checkBoundaryOfElement(B,CKEDITOR[8==U?"START":"END"]))):j=void 0),j},null,null,1)}(this),function _(M){var B=M.editor,U=CKEDITOR.plugins.lineutils;B.on("dragstart",function(q){var j=q.data.target;t.isDomDragHandler(j)&&(j=M.getByElement(j),q.data.dataTransfer.setData("cke/widget-id",j.id),B.focus(),j.focus())}),B.on("drop",function(q){var j=(V=q.data.dataTransfer).getData("cke/widget-id"),Y=V.getTransferType(B),V=B.createRange();""!==j&&Y===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?q.cancel():""!==j&&Y==CKEDITOR.DATA_TRANSFER_INTERNAL&&(j=M.instances[j])&&(V.setStartBefore(j.wrapper),V.setEndAfter(j.wrapper),q.data.dragRange=V,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,q.data.dataTransfer.setData("text/html",B.editable().getHtmlFromRange(V).getHtml()),B.widgets.destroy(j,!0))}),B.on("contentDom",function(){var q=B.editable();CKEDITOR.tools.extend(M,{finder:new U.finder(B,{lookups:{default:function(Y){if(!Y.is(CKEDITOR.dtd.$listItem)&&Y.is(CKEDITOR.dtd.$block)&&!t.isDomNestedEditable(Y)&&!M._.draggedWidget.wrapper.contains(Y)){var V=t.getNestedEditable(q,Y);return V&&(Y=M._.draggedWidget,M.getByElement(V)==Y||(V=CKEDITOR.filter.instances[V.data("cke-filter")],Y=Y.requiredContent,V&&Y&&!V.check(Y)))?void 0:CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new U.locator(B),liner:new U.liner(B,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}(this),function p(M){function B(q){M.focused&&S(M.focused,"cut"==q.name)}var U=M.editor;U.on("contentDom",function(){var q=U.editable();q.attachListener(q,"copy",B),q.attachListener(q,"cut",B)})}(this)}function t(M,B,U,q,j){var Y=M.editor;CKEDITOR.tools.extend(this,q,{editor:Y,id:B,inline:"span"==U.getParent().getName(),element:U,data:CKEDITOR.tools.extend({},"function"==typeof q.defaults?q.defaults():q.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,definition:q,repository:M,draggable:!1!==q.draggable,_:{downcastFn:q.downcast&&"string"==typeof q.downcast?q.downcasts[q.downcast]:q.downcast}},!0),M.fire("instanceCreated",this),function z(M,B){(function W(M){(M.wrapper=M.element.getParent()).setAttribute("data-cke-widget-id",M.id)})(M),function P(M){if(M.parts){var U,q,B={};for(q in M.parts)U=M.wrapper.findOne(M.parts[q]),B[q]=U;M.parts=B}}(M),function D(M){var B,U,q=M.editables;if(M.editables={},M.editables)for(B in q)M.initEditable(B,"string"==typeof(U=q[B])?{selector:U}:U)}(M),function w(M){if(M.mask){var B=M.wrapper.findOne(".cke_widget_mask");B||((B=new CKEDITOR.dom.element("img",M.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),M.wrapper.append(B)),M.mask=B}}(M),function F(M){if(M.draggable){var q,B=M.editor,U=M.wrapper.getLast(t.isDomDragHandlerContainer);U?q=U.findOne("img"):((U=new CKEDITOR.dom.element("span",B.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+B.plugins.widget.path+"images/handle.png)"}),(q=new CKEDITOR.dom.element("img",B.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:B.lang.widget.move,height:15,role:"presentation"}),M.inline&&q.setAttribute("draggable","true"),U.append(q),M.wrapper.append(U)),M.wrapper.on("dragover",function(j){j.data.preventDefault()}),M.wrapper.on("mouseenter",M.updateDragHandlerPosition,M),setTimeout(function(){M.on("data",M.updateDragHandlerPosition,M)},50),!M.inline&&(q.on("mousedown",$,M),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&q.on("dragstart",function(j){j.data.preventDefault(!0)}),M.dragHandlerContainer=U}}(M),function R(M){var B=null;M.on("data",function(){var q,U=this.data.classes;if(B!=U){for(q in B)U&&U[q]||this.removeClass(q);for(q in U)this.addClass(q);B=U}})}(M),function A(M){M.on("data",function(){if(M.wrapper){var B=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());M.wrapper.setAttribute("role","region"),M.wrapper.setAttribute("aria-label",B)}},null,null,9999)}(M),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&M.wrapper.on("dragstart",function(U){var q=U.data.getTarget();t.getNestedEditable(M,q)||M.inline&&t.isDomDragHandler(q)||U.data.preventDefault()}),M.wrapper.removeClass("cke_widget_new"),M.element.addClass("cke_widget_element"),M.on("key",function(U){if(13==(U=U.data.keyCode))M.edit();else{if(U==CKEDITOR.CTRL+67||U==CKEDITOR.CTRL+88)return void S(M,U==CKEDITOR.CTRL+88);if(U in ee||CKEDITOR.CTRL&U||CKEDITOR.ALT&U)return}return!1},null,null,999),M.on("doubleclick",function(U){M.edit()&&U.cancel()}),B.data&&M.on("data",B.data),B.edit&&M.on("edit",B.edit)}(this,q),this.init&&this.init(),this.inited=!0,(M=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(M))),j&&this.setData(j),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,G(this),this.fire("data",this.data),this.isInited()&&Y.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function c(M,B,U){CKEDITOR.dom.element.call(this,B.$),this.editor=M,this._={},B=this.filter=U.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=B?B.getAllowedEnterMode(M.enterMode):M.enterMode,this.shiftEnterMode=B?B.getAllowedEnterMode(M.shiftEnterMode,!0):M.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function a(M,B){if(M.focused=null,B.isInited()){var U=B.editor.checkDirty();M.fire("widgetBlurred",{widget:B}),B.setFocused(!1),!U&&B.editor.resetDirty()}}function f(M){if(M=M.data,"wysiwyg"==this.editor.mode){var q,j,Y,V,B=this.editor.editable(),U=this.instances;if(B){for(q in U)U[q].isReady()&&!B.contains(U[q].wrapper)&&this.destroy(U[q],!0);if(M&&M.initOnlyNew)U=this.initOnAll();else{var X=B.find(".cke_widget_wrapper");for(U=[],q=0,j=X.count();q<j;q++){if(Y=X.getItem(q),V=!this.getByElement(Y,!0)){e:{V=T;for(var Q=Y;Q=Q.getParent();)if(V(Q)){V=!0;break e}V=!1}V=!V}V&&B.contains(Y)&&(Y.addClass("cke_widget_new"),U.push(this.initOn(Y.getFirst(t.isDomWidgetElement))))}}M&&M.focusInited&&1==U.length&&U[0].focus()}}}function d(M){if(void 0!==M.attributes&&M.attributes["data-widget"]){var B=i(M),U=l(M),q=!1;B&&B.value&&B.value.match(/^\s/g)&&(B.parent.attributes["data-cke-white-space-first"]=1,B.value=B.value.replace(/^\s/g,"&nbsp;"),q=!0),U&&U.value&&U.value.match(/\s$/g)&&(U.parent.attributes["data-cke-white-space-last"]=1,U.value=U.value.replace(/\s$/g,"&nbsp;"),q=!0),q&&(M.attributes["data-cke-widget-white-space"]=1)}}function i(M){return M.find(function(B){return 3===B.type},!0).shift()}function l(M){return M.find(function(B){return 3===B.type},!0).pop()}function r(M,B,U){if(!U.allowedContent&&!U.disallowedContent)return null;var q=this._.filters[M];return q||(this._.filters[M]=q={}),(M=q[B])||(M=U.allowedContent?new CKEDITOR.filter(U.allowedContent):this.editor.filter.clone(),q[B]=M,U.disallowedContent&&M.disallow(U.disallowedContent)),M}function n(M,B){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(M?"inline":"block")+(B?" cke_widget_"+B:"")}}function u(M,B,U){if(M.type==CKEDITOR.NODE_ELEMENT&&(q=CKEDITOR.dtd[M.name])&&!q[U.name]){var q=M.split(B),j=M.parent;return B=q.getIndex(),M.children.length||(--B,M.remove()),q.children.length||q.remove(),u(j,B,U)}M.add(U,B)}function h(M,B){return"boolean"==typeof M.inline?M.inline:!!CKEDITOR.dtd.$inline[B]}function T(M){return M.hasAttribute("data-cke-temp")}function m(M,B,U,q){var j=M.editor;j.fire("lockSnapshot"),U?(q=U.data("cke-widget-editable"),q=B.editables[q],M.widgetHoldingFocusedEditable=B,B.focusedEditable=q,U.addClass("cke_widget_editable_focused"),q.filter&&j.setActiveFilter(q.filter),j.setActiveEnterMode(q.enterMode,q.shiftEnterMode)):(q||B.focusedEditable.removeClass("cke_widget_editable_focused"),B.focusedEditable=null,M.widgetHoldingFocusedEditable=null,j.setActiveFilter(null),j.setActiveEnterMode(null,null)),j.fire("unlockSnapshot")}function I(M,B){return CKEDITOR.tools.trim(B)}function k(M){var B=M.selected,U=[],q=B.slice(0),j=null;return{select:function(V){return 0>CKEDITOR.tools.indexOf(B,V)&&U.push(V),0<=(V=CKEDITOR.tools.indexOf(q,V))&&q.splice(V,1),this},focus:function(V){return j=V,this},commit:function(){var X,Q,V=M.focused!==j;for(M.editor.fire("lockSnapshot"),V&&(X=M.focused)&&a(M,X);X=q.pop();)B.splice(CKEDITOR.tools.indexOf(B,X),1),X.isInited()&&(Q=X.editor.checkDirty(),X.setSelected(!1),!Q&&X.editor.resetDirty());for(V&&j&&(Q=M.editor.checkDirty(),M.focused=j,M.fire("widgetFocused",{widget:j}),j.setFocused(!0),!Q&&M.editor.resetDirty());X=U.pop();)B.push(X),X.setSelected(!0);M.editor.fire("unlockSnapshot")}}}function b(M,B,U){var q=0;B=H(B);var Y,j=M.data.classes||{};if(B){for(j=CKEDITOR.tools.clone(j);Y=B.pop();)U?j[Y]||(q=j[Y]=1):j[Y]&&(delete j[Y],q=1);q&&M.setData("classes",j)}}function x(M){M.cancel()}function S(M,B){var U=M.editor,q=U.document,j=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!q.getById("cke_copybin")){var V=!U.blockless&&!CKEDITOR.env.ie||j?"div":"span",Y=(j=q.createElement(V),q.createElement(V));V=CKEDITOR.env.ie&&9>CKEDITOR.env.version,Y.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),j.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),j.setStyle("ltr"==U.config.contentsLangDirection?"left":"right","-5000px");var X=U.createRange();X.setStartBefore(M.wrapper),X.setEndAfter(M.wrapper),j.setHtml('<span data-cke-copybin-start="1">\u200b</span>'+U.editable().getHtmlFromRange(X).getHtml()+'<span data-cke-copybin-end="1">\u200b</span>'),U.fire("saveSnapshot"),U.fire("lockSnapshot"),Y.append(j),U.editable().append(Y);var Q=U.on("selectionChange",x,null,null,0),te=M.repository.on("checkSelection",x,null,null,0);if(V)var ne=q.getDocumentElement().$,ie=ne.scrollTop;(X=U.createRange()).selectNodeContents(j),X.select(),V&&(ne.scrollTop=ie),setTimeout(function(){B||M.focus(),Y.remove(),Q.removeListener(),te.removeListener(),U.fire("unlockSnapshot"),B&&!U.readOnly&&(M.repository.del(M),U.fire("saveSnapshot"))},100)}}function H(M){return(M=(M=M.getDefinition().attributes)&&M.class)?M.split(/\s+/):null}function L(){var M=CKEDITOR.document.getActive(),B=this.editor,U=B.editable();(U.isInline()?U:B.document.getWindow().getFrame()).equals(M)&&B.focusManager.focus(U)}function E(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function $(M){function B(){var se;for(re.reset();se=X.pop();)se.removeListener();var oe=Q;se=M.sender;var ae=this.repository.finder,de=this.repository.liner,ce=this.editor,le=this.editor.editable();CKEDITOR.tools.isEmpty(de.visible)||(oe=ae.getRange(oe[0]),this.focus(),ce.fire("drop",{dropRange:oe,target:oe.startContainer})),le.removeClass("cke_widget_dragging"),de.hideVisible(),ce.fire("dragend",{target:se})}if(CKEDITOR.tools.getMouseButton(M)===CKEDITOR.MOUSE_BUTTON_LEFT){var te,ne,U=this.repository.finder,q=this.repository.locator,j=this.repository.liner,Y=this.editor,V=Y.editable(),X=[],Q=[];this.repository._.draggedWidget=this;var ie=U.greedySearch(),re=CKEDITOR.tools.eventsBuffer(50,function(){te=q.locate(ie),(Q=q.sort(ne,1)).length&&(j.prepare(ie,te),j.placeLine(Q[0]),j.cleanup())});V.addClass("cke_widget_dragging"),X.push(V.on("mousemove",function(se){ne=se.data.$.clientY,re.input()})),Y.fire("dragstart",{target:M.sender}),X.push(Y.document.once("mouseup",B,this)),V.isInline()||X.push(CKEDITOR.document.once("mouseup",B,this))}}function G(M){M.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(M.data)))}function J(){function M(){}function B(j,Y,V){return!(!V||!this.checkElement(j))&&(j=V.widgets.getByElement(j,!0))&&j.checkStyleActive(this)}function U(j){function Y(ie,re,se){for(var oe=ie.length,ae=0;ae<oe;){if(re.call(se,ie[ae],ae,ie))return ie[ae];ae++}}function V(ie){function re(se,oe){var ae=CKEDITOR.tools.object.keys(se),de=CKEDITOR.tools.object.keys(oe);if(ae.length!==de.length)return!1;for(var ce in se)if(("object"!=typeof se[ce]||"object"!=typeof oe[ce]||!re(se[ce],oe[ce]))&&se[ce]!==oe[ce])return!1;return!0}return function(se){return re(ie.getDefinition(),se.getDefinition())}}var Q,X=j.widget;q[X]||(q[X]={});for(var te=0,ne=j.group.length;te<ne;te++)q[X][Q=j.group[te]]||(q[X][Q]=[]),Y(Q=q[X][Q],V(j))||Q.push(j)}var q={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(Y){this.widget=Y.widget,(this.group="string"==typeof Y.group?[Y.group]:Y.group)&&U(this)},apply:function(Y){var V;Y instanceof CKEDITOR.editor&&this.checkApplicable(Y.elementPath(),Y)&&(V=Y.widgets.focused,this.group&&this.removeStylesFromSameGroup(Y),V.applyStyle(this))},remove:function(Y){Y instanceof CKEDITOR.editor&&this.checkApplicable(Y.elementPath(),Y)&&Y.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(Y){var V,X,Q=!1;if(!(Y instanceof CKEDITOR.editor))return!1;if(X=Y.elementPath(),this.checkApplicable(X,Y))for(var te=0,ne=this.group.length;te<ne;te++){V=q[this.widget][this.group[te]];for(var ie=0;ie<V.length;ie++)V[ie]!==this&&V[ie].checkActive(X,Y)&&(Y.widgets.focused.removeStyle(V[ie]),Q=!0)}return Q},checkActive:function(Y,V){return this.checkElementMatch(Y.lastElement,0,V)},checkApplicable:function(Y,V){return V instanceof CKEDITOR.editor&&this.checkElement(Y.lastElement)},checkElementMatch:B,checkElementRemovable:B,checkElement:function(Y){return!!t.isDomWidgetWrapper(Y)&&(Y=Y.getFirst(t.isDomWidgetElement))&&Y.data("widget")==this.widget},buildPreview:function(Y){return Y||this._.definition.name},toAllowedContentRules:function(Y){if(!Y)return null;var V,X={};return(Y=Y.widgets.registered[this.widget])?Y.styleableElements?(V=this.getClassesArray())?(X[Y.styleableElements]={classes:V,propertiesOnly:!0},X):null:Y.styleToAllowedContentRules?Y.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var Y=this._.definition.attributes&&this._.definition.attributes.class;return Y?CKEDITOR.tools.trim(Y).split(/\s+/):null},applyToRange:M,removeFromRange:M,applyToObject:M})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),J())},beforeInit:function(B){void 0!==CKEDITOR.document.$.querySelectorAll&&(B.widgets=new v(B))},afterInit:function(B){if(void 0!==CKEDITOR.document.$.querySelectorAll){var q,j,Y,U=B.widgets.registered;for(j in U)(Y=(q=U[j]).button)&&B.ui.addButton&&B.ui.addButton(CKEDITOR.tools.capitalize(q.name,!0),{label:Y,command:q.name,toolbar:"insert,10"});!function g(M){M.contextMenu&&M.contextMenu.addListener(function(B){if(B=M.widgets.getByElement(B,!0))return B.fire("contextMenu",{})})}(B)}}}),v.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(B,U){return(U=CKEDITOR.tools.prototypedCopy(U)).name=B,U._=U._||{},this.editor.fire("widgetDefinition",U),U.template&&(U.template=new CKEDITOR.template(U.template)),function o(M,B){M.addCommand(B.name,{exec:function(q,j){function Y(){q.widgets.finalizeCreation(te)}if((V=q.widgets.focused)&&V.name==B.name)V.edit();else if(B.insert)B.insert({editor:q,commandData:j});else if(B.template){var X,V="function"==typeof B.defaults?B.defaults():B.defaults,Q=(V=CKEDITOR.dom.element.createFromHtml(B.template.output(V)),q.widgets.wrapElement(V,B.name)),te=new CKEDITOR.dom.documentFragment(Q.getDocument());te.append(Q),(X=q.widgets.initOn(V,B,j&&j.startupData))?(V=X.once("edit",function(ie){ie.data.dialog?X.once("dialog",function(re){var se,oe;se=(re=re.data).once("ok",Y,null,null,20),oe=re.once("cancel",function(ae){ae.data&&!1===ae.data.hide||q.widgets.destroy(X,!0)}),re.once("hide",function(){se.removeListener(),oe.removeListener()})}):Y()},null,null,999),X.edit(),V.removeListener()):Y()}},allowedContent:B.allowedContent,requiredContent:B.requiredContent,contentForms:B.contentForms,contentTransformations:B.contentTransformations})}(this.editor,U),function s(M,B){var j=B.upcast;j&&function q(V,X,Q){var te=CKEDITOR.tools.getIndex(M._.upcasts,function(ne){return ne[2]>Q});0>te&&(te=M._.upcasts.length),M._.upcasts.splice(te,0,[CKEDITOR.tools.bind(V,X),X.name,Q])}("string"==typeof j?function U(V,X){var te,ne,Q=B.upcast.split(",");for(ne=0;ne<Q.length;ne++)if((te=Q[ne])===V.name)return B.upcasts[te].call(this,V,X);return!1}:j,B,B.upcastPriority||10)}(this,U),this.registered[B]=U},addUpcastCallback:function(B){this._.upcastCallbacks.push(B)},checkSelection:function(){var j,B=this.editor.getSelection(),U=B.getSelectedElement(),q=k(this);if(U&&(j=this.getByElement(U,!0)))return q.focus(j).select(j).commit();if(!(B=B.getRanges()[0])||B.collapsed)return q.commit();for((B=new CKEDITOR.dom.walker(B)).evaluator=t.isDomWidgetWrapper;U=B.next();)q.select(this.getByElement(U));q.commit()},checkWidgets:function(B){this.fire("checkWidgets",CKEDITOR.tools.copy(B||{}))},del:function(B){if(this.focused===B){var j,U=B.editor,q=U.createRange();(j=q.moveToClosestEditablePosition(B.wrapper,!0))||(j=q.moveToClosestEditablePosition(B.wrapper,!1)),j&&U.getSelection().selectRanges([q])}B.wrapper.remove(),this.destroy(B,!0)},destroy:function(B,U){this.widgetHoldingFocusedEditable===B&&m(this,B,null,U),B.destroy(U),delete this.instances[B.id],this.fire("instanceDestroyed",B)},destroyAll:function(B,U){var q,j,Y=this.instances;if(U&&!B){Y=(j=U.find(".cke_widget_wrapper")).count();for(var V=0;V<Y;++V)(q=this.getByElement(j.getItem(V),!0))&&this.destroy(q)}else for(j in Y)this.destroy(q=Y[j],B)},finalizeCreation:function(B){(B=B.getFirst())&&t.isDomWidgetWrapper(B)&&(this.editor.insertElement(B),(B=this.getByElement(B)).ready=!0,B.fire("ready"),B.focus())},getByElement:function(){function M(U){return U.is(B)&&U.data("cke-widget-id")}var B={div:1,span:1};return function(U,q){if(!U)return null;var j=M(U);if(!q&&!j){var Y=this.editor.editable();do{U=U.getParent()}while(U&&!U.equals(Y)&&!(j=M(U)))}return this.instances[j]||null}}(),initOn:function(B,U,q){if(U?"string"==typeof U&&(U=this.registered[U]):U=this.registered[B.data("widget")],!U)return null;var j=this.wrapElement(B,U.name);return j?j.hasClass("cke_widget_new")?(B=new t(this,this._.nextId++,B,U,q)).isInited()?this.instances[B.id]=B:null:this.getByElement(B):null},initOnAll:function(B){for(var q,U=[],j=(B=(B||this.editor.editable()).find(".cke_widget_new")).count();j--;)(q=this.initOn(B.getItem(j).getFirst(t.isDomWidgetElement)))&&U.push(q);return U},onWidget:function(B){var U=Array.prototype.slice.call(arguments);for(var q in U.shift(),this.instances){var j=this.instances[q];j.name==B&&j.on.apply(j,U)}this.on("instanceCreated",function(Y){(Y=Y.data).name==B&&Y.on.apply(Y,U)})},parseElementClasses:function(B){if(!B)return null;B=CKEDITOR.tools.trim(B).split(/\s+/);for(var U,q={},j=0;U=B.pop();)-1==U.indexOf("cke_")&&(q[U]=j=1);return j?q:null},wrapElement:function(B,U){var j,Y,q=null;if(B instanceof CKEDITOR.dom.element){if(U=U||B.data("widget"),!(j=this.registered[U]))return null;if((q=B.getParent())&&q.type==CKEDITOR.NODE_ELEMENT&&q.data("cke-widget-wrapper"))return q;B.hasAttribute("data-cke-widget-keep-attr")||B.data("cke-widget-keep-attr",B.data("widget")?1:0),B.data("widget",U),(Y=h(j,B.getName()))&&d(B),(q=new CKEDITOR.dom.element(Y?"span":"div")).setAttributes(n(Y,U)),q.data("cke-display-name",j.pathName?j.pathName:B.getName()),B.getParent(!0)&&q.replace(B),B.appendTo(q)}else if(B instanceof CKEDITOR.htmlParser.element){if(!(j=this.registered[U=U||B.attributes["data-widget"]]))return null;if((q=B.parent)&&q.type==CKEDITOR.NODE_ELEMENT&&q.attributes["data-cke-widget-wrapper"])return q;var V;"data-cke-widget-keep-attr"in B.attributes||(B.attributes["data-cke-widget-keep-attr"]=B.attributes["data-widget"]?1:0),U&&(B.attributes["data-widget"]=U),(Y=h(j,B.name))&&d(B),(q=new CKEDITOR.htmlParser.element(Y?"span":"div",n(Y,U))).attributes["data-cke-display-name"]=j.pathName?j.pathName:B.name,(j=B.parent)&&(V=B.getIndex(),B.remove()),q.add(B),j&&u(j,V,q)}return q},_tests_createEditableFilter:r},CKEDITOR.event.implementOn(v.prototype),t.prototype={addClass:function(B){this.element.addClass(B),this.wrapper.addClass(t.WRAPPER_CLASS_PREFIX+B)},applyStyle:function(B){b(this,B,1)},checkStyleActive:function(B){var U;if(!(B=H(B)))return!1;for(;U=B.pop();)if(!this.hasClass(U))return!1;return!0},destroy:function(B){if(this.fire("destroy"),this.editables)for(var U in this.editables)this.destroyEditable(U,B);B||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(B,U){var q=this.editables[B],j=!0;if(q.removeListener("focus",E),q.removeListener("blur",L),this.editor.focusManager.remove(q),q.filter){for(var Y in this.repository.instances){var V=this.repository.instances[Y];V.editables&&(V=V.editables[B])&&V!==q&&q.filter===V.filter&&(j=!1)}j&&(q.filter.destroy(),(j=this.repository._.filters[this.name])&&delete j[B])}U||(this.repository.destroyAll(!1,q),q.removeClass("cke_widget_editable"),q.removeClass("cke_widget_editable_focused"),q.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[B]},edit:function(){var B={dialog:this.dialog},U=this;return!(!1===this.fire("edit",B)||!B.dialog||(this.editor.openDialog(B.dialog,function(q){var j,Y;!1!==U.fire("dialog",q)&&(j=q.on("show",function(){q.setupContent(U)}),Y=q.on("ok",function(){var V,X=U.on("data",function(Q){V=1,Q.cancel()},null,null,0);U.editor.fire("saveSnapshot"),q.commitContent(U),X.removeListener(),V&&(U.fire("data",U.data),U.editor.fire("saveSnapshot"))}),q.once("hide",function(){j.removeListener(),Y.removeListener()}))}),0))},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(B){return this.element.hasClass(B)},initEditable:function(B,U){var q=this._findOneNotNested(U.selector);return!(!q||!q.is(CKEDITOR.dtd.$editable)||(q=new c(this.editor,q,{filter:r.call(this.repository,this.name,B,U)}),this.editables[B]=q,q.setAttributes({contenteditable:"true","data-cke-widget-editable":B,"data-cke-enter-mode":q.enterMode}),q.filter&&q.data("cke-filter",q.filter.id),q.addClass("cke_widget_editable"),q.removeClass("cke_widget_editable_focused"),U.pathName&&q.data("cke-display-name",U.pathName),this.editor.focusManager.add(q),q.on("focus",E,this),CKEDITOR.env.ie&&q.on("blur",L,this),q._.initialSetData=!0,q.setData(q.getHtml()),0))},_findOneNotNested:function(B){B=this.wrapper.find(B);for(var U,q,j=0;j<B.count();j++)if(q=(U=B.getItem(j)).getAscendant(t.isDomWidgetWrapper),this.wrapper.equals(q))return U;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var B=this.editor.getSelection();if(B){var U=this.editor.checkDirty();B.fake(this.wrapper),!U&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(B){this.element.removeClass(B),this.wrapper.removeClass(t.WRAPPER_CLASS_PREFIX+B)},removeStyle:function(B){b(this,B,0)},setData:function(B,U){var q=this.data,j=0;if("string"==typeof B)q[B]!==U&&(q[B]=U,j=1);else{var Y=B;for(B in Y)q[B]!==Y[B]&&(j=1,q[B]=Y[B])}return j&&this.dataReady&&(G(this),this.fire("data",q)),this},setFocused:function(B){return this.wrapper[B?"addClass":"removeClass"]("cke_widget_focused"),this.fire(B?"focus":"blur"),this},setSelected:function(B){return this.wrapper[B?"addClass":"removeClass"]("cke_widget_selected"),this.fire(B?"select":"deselect"),this},updateDragHandlerPosition:function(){var B=this.editor,U=this._.dragHandlerOffset,q={x:(q=this.element.$).offsetLeft,y:q.offsetTop-15};U&&q.x==U.x&&q.y==U.y||(U=B.checkDirty(),B.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:q.y+"px",left:q.x+"px",display:"block"}),B.fire("unlockSnapshot"),!U&&B.resetDirty(),this._.dragHandlerOffset=q)}},CKEDITOR.event.implementOn(t.prototype),t.getNestedEditable=function(M,B){return!B||B.equals(M)?null:t.isDomNestedEditable(B)?B:t.getNestedEditable(M,B.getParent())},t.isDomDragHandler=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&M.hasAttribute("data-cke-widget-drag-handler")},t.isDomDragHandlerContainer=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&M.hasClass("cke_widget_drag_handler_container")},t.isDomNestedEditable=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&M.hasAttribute("data-cke-widget-editable")},t.isDomWidgetElement=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&M.hasAttribute("data-widget")},t.isDomWidgetWrapper=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&M.hasAttribute("data-cke-widget-wrapper")},t.isDomWidget=function(M){return!!M&&(this.isDomWidgetWrapper(M)||this.isDomWidgetElement(M))},t.isParserWidgetElement=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&!!M.attributes["data-widget"]},t.isParserWidgetWrapper=function(M){return M.type==CKEDITOR.NODE_ELEMENT&&!!M.attributes["data-cke-widget-wrapper"]},t.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",c.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(B){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,B=this.editor.dataProcessor.toHtml(B,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(B),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var Z=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,ee={37:1,38:1,39:1,40:1,8:1,46:1};ee[CKEDITOR.SHIFT+121]=1,CKEDITOR.plugins.widget=t,t.repository=v,t.nestedEditable=c}(),function(){function v(c,o,s){this.editor=c,this.notification=null,this._message=new CKEDITOR.template(o),this._singularMessage=s?new CKEDITOR.template(s):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function t(c){this._weight=c||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),v.prototype={createTask:function(o){o=o||{};var a,s=!this.notification;return s&&(this.notification=this._createNotification()),(a=this._addTask(o)).on("updated",this._onTaskUpdate,this),a.on("done",this._onTaskDone,this),a.on("canceled",function(){this._removeTask(a)},this),this.update(),s&&this.notification.show(),a},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var o=this.getTaskCount(),s={current:this.getDoneTaskCount(),max:o,percentage:Math.round(100*this.getPercentage())};return(1==o&&this._singularMessage?this._singularMessage:this._message).output(s)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(o){return o=new t(o.weight),this._tasks.push(o),this._totalWeights+=o._weight,o},_removeTask:function(o){var s=CKEDITOR.tools.indexOf(this._tasks,o);-1!==s&&(o._doneWeight&&(this._doneWeights-=o._doneWeight),this._totalWeights-=o._weight,this._tasks.splice(s,1),this.update())},_onTaskUpdate:function(o){this._doneWeights+=o.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(v.prototype),t.prototype={done:function(){this.update(this._weight)},update:function(o){if(!this.isDone()&&!this.isCanceled()){var s=(o=Math.min(this._weight,o))-this._doneWeight;this._doneWeight=o,this.fire("updated",s),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(t.prototype),CKEDITOR.plugins.notificationAggregator=v,CKEDITOR.plugins.notificationAggregator.task=t}(),CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(t){t.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(t,c,o){var s=CKEDITOR.fileTools,a=t.uploadRepository;o.fileToElement&&t.on("paste",function(d){var n,u,i=t.widgets.registered[c],l=(d=d.data).dataTransfer,r=l.getFilesCount(),e=i.loadMethod||"loadAndUpload";if(!d.dataValue&&r)for(u=0;u<r;u++)if(n=l.getFile(u),!i.supportedTypes||s.isTypeSupported(n,i.supportedTypes)){var h=i.fileToElement(n);n=a.create(n,void 0,i.loaderType),h&&(n[e](i.uploadUrl,i.additionalRequestParameters),CKEDITOR.fileTools.markElement(h,c,n.id),"loadAndUpload"!=e&&"upload"!=e||i.skipNotifications||CKEDITOR.fileTools.bindNotifications(t,n),d.dataValue+=h.getOuterHtml())}},null,null,o.supportedTypes?10:20),CKEDITOR.tools.extend(o,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var n,u,i=this,l=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),r=a.loaders[l],e=CKEDITOR.tools.capitalize;r.on("update",function(h){"abort"===r.status&&"function"==typeof i.onAbort&&i.onAbort(r),i.wrapper&&i.wrapper.getParent()?(t.fire("lockSnapshot"),h="on"+e(r.status),("abort"===r.status||"function"!=typeof i[h]||!1!==i[h](r))&&(u="cke_upload_"+r.status,i.wrapper&&u!=n&&(n&&i.wrapper.removeClass(n),i.wrapper.addClass(u),n=u),"error"!=r.status&&"abort"!=r.status||t.widgets.del(i)),t.fire("unlockSnapshot")):(CKEDITOR.instances[t.name]&&t.editable().find('[data-cke-upload-id="'+l+'"]').count()||r.abort(),h.removeListener())}),r.update()},replaceWith:function(i,l){if(""===i.trim())t.widgets.del(this);else{var u,h,r=this==t.widgets.focused,e=t.editable(),n=t.createRange();r||(h=t.getSelection().createBookmarks()),n.setStartBefore(this.wrapper),n.setEndAfter(this.wrapper),r&&(u=n.createBookmark()),e.insertHtmlIntoRange(i,n,l),t.widgets.checkWidgets({initOnlyNew:!0}),t.widgets.destroy(this,!0),r?(n.moveToBookmark(u),n.select()):t.getSelection().selectBookmarks(h)}},_getLoader:function(){var i=this.wrapper.findOne("[data-cke-upload-id]");return i?this.editor.uploadRepository.loaders[i.data("cke-upload-id")]:null}}),t.widgets.add(c,o)},markElement:function(t,c,o){t.setAttributes({"data-cke-upload-id":o,"data-widget":c})},bindNotifications:function(t,c){var s,a=null;c.on("update",function(){!a&&c.uploadTotal&&(function o(){(!(s=t._.uploadWidgetNotificaionAggregator)||s.isFinished())&&(s=t._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(t,t.lang.uploadwidget.uploadMany,t.lang.uploadwidget.uploadOne)).once("finished",function(){var f=s.getTaskCount();0===f?s.notification.hide():s.notification.update({message:1==f?t.lang.uploadwidget.doneOne:t.lang.uploadwidget.doneMany.replace("%1",f),type:"success",important:1})})}(),a=s.createTask({weight:c.uploadTotal})),a&&"uploading"==c.status&&a.update(c.uploaded)}),c.on("uploaded",function(){a&&a.done()}),c.on("error",function(){a&&a.cancel(),t.showNotification(c.message,"warning")}),c.on("abort",function(){a&&a.cancel(),CKEDITOR.instances[t.name]&&t.showNotification(t.lang.uploadwidget.abort,"info")})}}),function(){function v(o){return 9>=o&&(o="0"+o),String(o)}function t(o){var s=[(s=new Date).getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()];return c+=1,"image-"+CKEDITOR.tools.array.map(s,v).join("")+"-"+c+"."+o}var c=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(s){if(this.isSupportedEnvironment()){var a=CKEDITOR.fileTools,f=a.getUploadUrl(s.config,"image");f&&(a.addUploadWidget(s,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:f,fileToElement:function(){var i=new CKEDITOR.dom.element("img");return i.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),i},parts:{img:"img"},onUploading:function(i){this.parts.img.setAttribute("src",i.data)},onUploaded:function(i){var l=this.parts.img.$;this.replaceWith('<img src="'+i.url+'" width="'+(i.responseData.width||l.naturalWidth)+'" height="'+(i.responseData.height||l.naturalHeight)+'">')}}),s.on("paste",function(d){if(d.data.dataValue.match(/<img[\s\S]+data:/i)){d=d.data;var l,r,e,i=document.implementation.createHTMLDocument("");for((i=new CKEDITOR.dom.element(i.body)).data("cke-editable",1),i.appendHtml(d.dataValue),l=i.find("img"),e=0;e<l.count();e++){var n=(r=l.getItem(e)).getAttribute("src"),u=n&&"data:"==n.substring(0,5),h=null===r.data("cke-realelement");u&&h&&!r.data("cke-upload-id")&&!r.isReadOnly(1)&&(u=(u=n.match(/image\/([a-z]+?);/i))&&u[1]||"jpg",(n=s.uploadRepository.create(n,t(u))).upload(f),a.markElement(r,"uploadimage",n.id),a.bindNotifications(s,n))}d.dataValue=i.getHtml()}}))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(t){t.config.wsc_onFinish="function"==typeof t.config.wsc_onFinish?t.config.wsc_onFinish:function(){},t.config.wsc_onClose="function"==typeof t.config.wsc_onClose?t.config.wsc_onClose:function(){}},parseConfig:function(t){t.config.wsc_customerId=t.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",t.config.wsc_customDictionaryIds=t.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",t.config.wsc_userDictionaryName=t.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",t.config.wsc_customLoaderScript=t.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,t.config.wsc_interfaceLang=t.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=t.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(t){"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css"))},init:function(t){var c=CKEDITOR.env;this.parseConfig(t),this.parseApi(t),t.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||c.ie&&(8>c.version||c.quirks))},void 0===t.plugins.scayt&&t.ui.addButton&&t.ui.addButton("SpellChecker",{label:t.lang.wsc.toolbar,click:function(s){var a=s.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?s.container.getText():s.document.getBody().getText();(a=a.replace(/\s/g,""))?s.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function v(s){function a(e){var n=!1;r.attachListener(r,"keydown",function(){var u=d.getBody().getElementsByTag(e);if(!n){for(var h=0;h<u.count();h++)u.getItem(h).setCustomData("retain",!0);n=!0}},null,null,1),r.attachListener(r,"keyup",function(){var u=d.getElementsByTag(e);n&&(1==u.count()&&!u.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(u.getItem(0).getAttributes())&&u.getItem(0).remove(1),n=!1)})}var f=this.editor,d=s.document,i=d.body,l=d.getElementById("cke_actscrpt");l&&l.parentNode.removeChild(l),(l=d.getElementById("cke_shimscrpt"))&&l.parentNode.removeChild(l),(l=d.getElementById("cke_basetagscrpt"))&&l.parentNode.removeChild(l),i.contentEditable=!0,CKEDITOR.env.ie&&(i.hideFocus=!0,i.disabled=!0,i.removeAttribute("disabled")),delete this._.isLoadingData,this.$=i,d=new CKEDITOR.dom.document(d),this.setup(),this.fixInitialSelection();var r=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&d.getDocumentElement().addClass(d.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&f.enterMode!=CKEDITOR.ENTER_P?a("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&f.enterMode!=CKEDITOR.ENTER_DIV&&a("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&d.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){f.editable().focus()})}),function t(s){function f(i){i.returnValue=!1}if(CKEDITOR.env.gecko)try{var d=s.document.$;d.execCommand("enableObjectResizing",!1,!s.config.disableObjectResizing),d.execCommand("enableInlineTableEditing",!1,!s.config.disableNativeTableHandles)}catch(i){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&s.config.disableObjectResizing&&function a(){var i;s.editable().attachListener(s,"selectionChange",function(){var l=s.getSelection().getSelectedElement();l&&(i&&(i.detachEvent("onresizestart",f),i=null),l.$.attachEvent("onresizestart",f),i=l.$)})}()}(f);try{f.document.$.execCommand("2D-position",!1,!0)}catch(e){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==f.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var n=e.data.getKeystroke();if(33==n||34==n)if(CKEDITOR.env.ie)setTimeout(function(){f.getSelection().scrollIntoView()},0);else if(f.window.$.innerHeight>this.$.offsetHeight){var u=f.createRange();u[33==n?"moveToElementEditStart":"moveToElementEditEnd"](this),u.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(d,"blur",function(){try{d.$.selection.empty()}catch(e){}}),CKEDITOR.env.iOS&&this.attachListener(d,"touchend",function(){s.focus()}),(i=f.document.getElementsByTag("title").getItem(0)).data("cke-title",i.getText()),CKEDITOR.env.ie&&(f.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),f.fire("contentDom"),this._.isPendingFocus&&(f.focus(),this._.isPendingFocus=!1),setTimeout(function(){f.fire("dataReady")},0)},0,this)}var o;CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(f){function d(h){h&&h.removeListener(),a.editable(new o(a,l.$.contentWindow.document.body)),a.setData(a.getData(1),f)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",l=(i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>'));l.setStyles({width:"100%",height:"100%"}),l.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(i=a.ui.space("contents")).append(l);var r=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;r&&l.on("load",d);var e=a.title,n=a.fire("ariaEditorHelpLabel",{}).label;if(e&&(CKEDITOR.env.ie&&n&&(e+=", "+n),l.setAttribute("title",e)),n){e=CKEDITOR.tools.getNextId();var u=CKEDITOR.dom.element.createFromHtml('<span id="'+e+'" class="cke_voice_label">'+n+"</span>");i.append(u,1),l.setAttribute("aria-describedby",e)}a.on("beforeModeUnload",function(h){h.removeListener(),u&&u.remove()}),l.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!r&&d(),a.fire("ariaWidget",l)})}}),CKEDITOR.editor.prototype.addContentsCss=function(s){var a=this.config,f=a.contentsCss;CKEDITOR.tools.isArray(f)||(a.contentsCss=f?[f]:[]),a.contentsCss.push(s)},o=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(v,0,this,a)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,f){var d=this.editor;if(f)this.setHtml(a),this.fixInitialSelection(),d.fire("dataReady");else{this._.isLoadingData=!0,d._.dataStore={id:1};var i=d.config,l=i.fullPage,r=i.docType,e=CKEDITOR.tools.buildStyleHtml(function c(){var s=[];if(8<=CKEDITOR.document.$.documentMode){s.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var f,a=[];for(f in CKEDITOR.dtd.$removeEmpty)a.push("html.CSS1Compat "+f+"[contenteditable=false]");s.push(a.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(s.push("html{height:100% !important}"),s.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return s.push("html{cursor:text;*cursor:auto}"),s.push("img,input,textarea{cursor:default}"),s.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');l||(e+=CKEDITOR.tools.buildStyleHtml(d.config.contentsCss));var n=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";l&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(h){return d.docType=r=h,""}).replace(/<\?xml\s[^\?]*\?>/i,function(h){return d.xmlDeclaration=h,""})),a=d.dataProcessor.toHtml(a),l?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),n&&(a=a.replace(/<head[^>]*?>/,"$&"+n)),a=a.replace(/<\/head\s*>/,e+"$&"),a=r+a):a=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||d.langCode)+'"><head><title>'+this._.docTitle+"</title>"+n+e+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),n&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),d.fire("contentDomUnload");var u=this.getDocument();try{u.write(a)}catch(h){setTimeout(function(){u.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();var f=(a=this.editor).config,d=(r=f.fullPage)&&a.docType,i=r&&a.xmlDeclaration,l=this.getDocument(),r=r?l.getDocumentElement().getOuterHtml():l.getBody().getHtml();return CKEDITOR.env.gecko&&f.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),r=a.dataProcessor.toDataFormat(r),i&&(r=i+"\n"+r),d&&(r=d+"\n"+r),r},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:o.baseProto.focus.call(this)},detach:function(){var d,a=this.editor,f=a.document;try{d=a.window.getFrame()}catch(i){}o.baseProto.detach.call(this),this.clearCustomData(),f.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),d&&d.getParent()?(d.clearCustomData(),(a=d.removeCustomData("onResize"))&&a.removeListener(),d.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var v=function(c,o){var s=CKEDITOR.getUrl("plugins/"+o);c=c.split(",");for(var a=0;a<c.length;a++)CKEDITOR.skin.icons[c[a]]={path:s,offset:-c[++a],bgsize:c[++a]}};CKEDITOR.env.hidpi?v("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,find-rtl,792,,find,816,,replace,840,,flash,864,,button,888,,checkbox,912,,form,936,,hiddenfield,960,,imagebutton,984,,radio,1008,,select-rtl,1032,,select,1056,,textarea-rtl,1080,,textarea,1104,,textfield-rtl,1128,,textfield,1152,,horizontalrule,1176,,iframe,1200,,image,1224,,indent-rtl,1248,,indent,1272,,outdent-rtl,1296,,outdent,1320,,justifyblock,1344,,justifycenter,1368,,justifyleft,1392,,justifyright,1416,,language,1440,,anchor-rtl,1464,,anchor,1488,,link,1512,,unlink,1536,,bulletedlist-rtl,1560,,bulletedlist,1584,,numberedlist-rtl,1608,,numberedlist,1632,,mathjax,1656,,maximize,1680,,newpage-rtl,1704,,newpage,1728,,pagebreak-rtl,1752,,pagebreak,1776,,pastefromword-rtl,1800,,pastefromword,1824,,pastetext-rtl,1848,,pastetext,1872,,placeholder,1896,,preview-rtl,1920,,preview,1944,,print,1968,,removeformat,1992,,save,2016,,scayt,2040,,selectall,2064,,showblocks-rtl,2088,,showblocks,2112,,smiley,2136,,source-rtl,2160,,source,2184,,sourcedialog-rtl,2208,,sourcedialog,2232,,specialchar,2256,,table,2280,,templates-rtl,2304,,templates,2328,,uicolor,2352,,redo-rtl,2376,,redo,2400,,undo-rtl,2424,,undo,2448,,simplebox,4944,auto,spellchecker,2496,","icons_hidpi.png"):v("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,find-rtl,792,auto,find,816,auto,replace,840,auto,flash,864,auto,button,888,auto,checkbox,912,auto,form,936,auto,hiddenfield,960,auto,imagebutton,984,auto,radio,1008,auto,select-rtl,1032,auto,select,1056,auto,textarea-rtl,1080,auto,textarea,1104,auto,textfield-rtl,1128,auto,textfield,1152,auto,horizontalrule,1176,auto,iframe,1200,auto,image,1224,auto,indent-rtl,1248,auto,indent,1272,auto,outdent-rtl,1296,auto,outdent,1320,auto,justifyblock,1344,auto,justifycenter,1368,auto,justifyleft,1392,auto,justifyright,1416,auto,language,1440,auto,anchor-rtl,1464,auto,anchor,1488,auto,link,1512,auto,unlink,1536,auto,bulletedlist-rtl,1560,auto,bulletedlist,1584,auto,numberedlist-rtl,1608,auto,numberedlist,1632,auto,mathjax,1656,auto,maximize,1680,auto,newpage-rtl,1704,auto,newpage,1728,auto,pagebreak-rtl,1752,auto,pagebreak,1776,auto,pastefromword-rtl,1800,auto,pastefromword,1824,auto,pastetext-rtl,1848,auto,pastetext,1872,auto,placeholder,1896,auto,preview-rtl,1920,auto,preview,1944,auto,print,1968,auto,removeformat,1992,auto,save,2016,auto,scayt,2040,auto,selectall,2064,auto,showblocks-rtl,2088,auto,showblocks,2112,auto,smiley,2136,auto,source-rtl,2160,auto,source,2184,auto,sourcedialog-rtl,2208,auto,sourcedialog,2232,auto,specialchar,2256,auto,table,2280,auto,templates-rtl,2304,auto,templates,2328,auto,uicolor,2352,auto,redo-rtl,2376,auto,redo,2400,auto,undo-rtl,2424,auto,undo,2448,auto,simplebox,2472,auto,spellchecker,2496,auto","icons.png")}())}}]);