var G2=Object.defineProperty,U2=Object.defineProperties,q2=Object.getOwnPropertyDescriptors,lI=Object.getOwnPropertySymbols,Y2=Object.prototype.hasOwnProperty,X2=Object.prototype.propertyIsEnumerable,uI=(Rt,pi,bn)=>pi in Rt?G2(Rt,pi,{enumerable:!0,configurable:!0,writable:!0,value:bn}):Rt[pi]=bn,jC=(Rt,pi)=>{for(var bn in pi||(pi={}))Y2.call(pi,bn)&&uI(Rt,bn,pi[bn]);if(lI)for(var bn of lI(pi))X2.call(pi,bn)&&uI(Rt,bn,pi[bn]);return Rt},SD=(Rt,pi)=>U2(Rt,q2(pi));(function(){var Rt,pi,bn,Oe,se,Ve,on,Ue,Bi,Nn,Pi,Ci,Gi,zi,Si,fn,ei,Zt,En,Dn,Dr,po,Rr,zn,ki,Fn,Lr,St,kt,yn,Mn,gr,Rn,kn,Fe,Ui,bi,Ln,aa,Br,ao,br,pr,_i,Ke,mo,Vn,Zn,Qi=[].slice,Mr={}.hasOwnProperty,yi=function(pe,ee){function _e(){this.constructor=pe}for(var Qe in ee)Mr.call(ee,Qe)&&(pe[Qe]=ee[Qe]);return _e.prototype=ee.prototype,pe.prototype=new _e,pe.__super__=ee.prototype,pe},To=[].indexOf||function(pe){for(var ee=0,_e=this.length;_e>ee;ee++)if(ee in this&&this[ee]===pe)return ee;return-1};for(Dr={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},kt=function(){var pe;return null!=(pe="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?pe:+new Date},Mn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Dn=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==Mn&&(Mn=function(pe){return setTimeout(pe,50)},Dn=function(pe){return clearTimeout(pe)}),Rn=function(pe){var ee,_e;return ee=kt(),(_e=function(){var Qe;return(Qe=kt()-ee)>=33?(ee=kt(),pe(Qe,function(){return Mn(_e)})):setTimeout(_e,33-Qe)})()},gr=function(){var pe,ee,_e;return _e=arguments[0],ee=arguments[1],pe=3<=arguments.length?Qi.call(arguments,2):[],"function"==typeof _e[ee]?_e[ee].apply(_e,pe):_e[ee]},po=function(){var pe,ee,_e,Qe,cn,Xe,jt;for(ee=arguments[0],Xe=0,jt=(Qe=2<=arguments.length?Qi.call(arguments,1):[]).length;jt>Xe;Xe++)if(_e=Qe[Xe])for(pe in _e)Mr.call(_e,pe)&&(cn=_e[pe],null!=ee[pe]&&"object"==typeof ee[pe]&&null!=cn&&"object"==typeof cn?po(ee[pe],cn):ee[pe]=cn);return ee},ei=function(pe){var ee,_e,cn,Xe;for(_e=ee=0,cn=0,Xe=pe.length;Xe>cn;cn++)_e+=Math.abs(pe[cn]),ee++;return _e/ee},zn=function(pe,ee){var _e,cn;if(null==pe&&(pe="options"),null==ee&&(ee=!0),cn=document.querySelector("[data-pace-"+pe+"]")){if(_e=cn.getAttribute("data-pace-"+pe),!ee)return _e;try{return JSON.parse(_e)}catch(Xe){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",Xe):void 0}}},on=function(){function pe(){}return pe.prototype.on=function(ee,_e,Qe,cn){var Xe;return null==cn&&(cn=!1),null==this.bindings&&(this.bindings={}),null==(Xe=this.bindings)[ee]&&(Xe[ee]=[]),this.bindings[ee].push({handler:_e,ctx:Qe,once:cn})},pe.prototype.once=function(ee,_e,Qe){return this.on(ee,_e,Qe,!0)},pe.prototype.off=function(ee,_e){var Qe,cn,Xe;if(null!=(null!=(cn=this.bindings)?cn[ee]:void 0)){if(null==_e)return delete this.bindings[ee];for(Qe=0,Xe=[];Qe<this.bindings[ee].length;)Xe.push(this.bindings[ee][Qe].handler===_e?this.bindings[ee].splice(Qe,1):Qe++);return Xe}},pe.prototype.trigger=function(){var ee,_e,Qe,Xe,jt,je,nn,gn;if(Qe=arguments[0],ee=2<=arguments.length?Qi.call(arguments,1):[],null!=(je=this.bindings)?je[Qe]:void 0){for(Xe=0,gn=[];Xe<this.bindings[Qe].length;)jt=(nn=this.bindings[Qe][Xe]).once,nn.handler.apply(null!=(_e=nn.ctx)?_e:this,ee),gn.push(jt?this.bindings[Qe].splice(Xe,1):Xe++);return gn}},pe}(),Nn=window.Pace||{},window.Pace=Nn,po(Nn,on.prototype),yn=Nn.options=po({},Dr,window.paceOptions,zn()),pr=0,Ke=(Vn=["ajax","document","eventLag","elements"]).length;Ke>pr;pr++)!0===yn[bi=Vn[pr]]&&(yn[bi]=Dr[bi]);Bi=function(pe){function ee(){return ee.__super__.constructor.apply(this,arguments)}return yi(ee,pe),ee}(Error),pi=function(){function pe(){this.progress=0}return pe.prototype.getElement=function(){var ee;if(null==this.el){if(!(ee=document.querySelector(yn.target)))throw new Bi;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=ee.firstChild?ee.insertBefore(this.el,ee.firstChild):ee.appendChild(this.el)}return this.el},pe.prototype.finish=function(){var ee;return(ee=this.getElement()).className=ee.className.replace("pace-active",""),ee.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},pe.prototype.update=function(ee){return this.progress=ee,this.render()},pe.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(ee){Bi=ee}return this.el=void 0},pe.prototype.render=function(){var ee,Qe,cn,Xe,jt,je;if(null==document.querySelector(yn.target))return!1;for(ee=this.getElement(),cn="translate3d("+this.progress+"%, 0, 0)",Xe=0,jt=(je=["webkitTransform","msTransform","transform"]).length;jt>Xe;Xe++)ee.children[0].style[je[Xe]]=cn;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(ee.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?Qe="99":(Qe=this.progress<10?"0":"",Qe+=0|this.progress),ee.children[0].setAttribute("data-progress",""+Qe)),this.lastRenderedProgress=this.progress},pe.prototype.done=function(){return this.progress>=100},pe}(),Ue=function(){function pe(){this.bindings={}}return pe.prototype.trigger=function(ee,_e){var cn,Xe,jt,je;if(null!=this.bindings[ee]){for(je=[],cn=0,Xe=(jt=this.bindings[ee]).length;Xe>cn;cn++)je.push(jt[cn].call(this,_e));return je}},pe.prototype.on=function(ee,_e){var Qe;return null==(Qe=this.bindings)[ee]&&(Qe[ee]=[]),this.bindings[ee].push(_e)},pe}(),br=window.XMLHttpRequest,ao=window.XDomainRequest,Br=window.WebSocket,Rr=function(pe,ee){var Qe,cn;for(Qe in cn=[],ee.prototype)try{cn.push(null==pe[Qe]&&"function"!=typeof ee[Qe]?"function"==typeof Object.defineProperty?Object.defineProperty(pe,Qe,{get:function(){return ee.prototype[Qe]},configurable:!0,enumerable:!0}):pe[Qe]=ee.prototype[Qe]:void 0)}catch(Xe){}return cn},Lr=[],Nn.ignore=function(){var pe,ee,_e;return ee=arguments[0],pe=2<=arguments.length?Qi.call(arguments,1):[],Lr.unshift("ignore"),_e=ee.apply(null,pe),Lr.shift(),_e},Nn.track=function(){var pe,ee,_e;return ee=arguments[0],pe=2<=arguments.length?Qi.call(arguments,1):[],Lr.unshift("track"),_e=ee.apply(null,pe),Lr.shift(),_e},Ui=function(pe){var ee;return null==pe&&(pe="GET"),"track"===Lr[0]?"force":!(Lr.length||!yn.ajax||!("socket"===pe&&yn.ajax.trackWebSockets||(ee=pe.toUpperCase(),To.call(yn.ajax.trackMethods,ee)>=0)))},Pi=function(pe){function ee(){var _e,Qe=this;ee.__super__.constructor.apply(this,arguments),_e=function(cn){var Xe;return Xe=cn.open,cn.open=function(jt,je,nn){return Ui(jt)&&Qe.trigger("request",{type:jt,url:je,request:cn}),Xe.apply(cn,arguments)}},window.XMLHttpRequest=function(cn){var Xe;return Xe=new br(cn),_e(Xe),Xe};try{Rr(window.XMLHttpRequest,br)}catch(cn){}if(null!=ao){window.XDomainRequest=function(){var cn;return cn=new ao,_e(cn),cn};try{Rr(window.XDomainRequest,ao)}catch(cn){}}if(null!=Br&&yn.ajax.trackWebSockets){window.WebSocket=function(cn,Xe){var jt;return jt=null!=Xe?new Br(cn,Xe):new Br(cn),Ui("socket")&&Qe.trigger("request",{type:"socket",url:cn,protocols:Xe,request:jt}),jt};try{Rr(window.WebSocket,Br)}catch(cn){}}}return yi(ee,pe),ee}(Ue),_i=null,Fe=function(pe){var ee,_e,Qe,cn;for(_e=0,Qe=(cn=yn.ajax.ignoreURLs).length;Qe>_e;_e++)if("string"==typeof(ee=cn[_e])){if(-1!==pe.indexOf(ee))return!0}else if(ee.test(pe))return!0;return!1},(ki=function(){return null==_i&&(_i=new Pi),_i})().on("request",function(pe){var ee,_e,Qe,cn;return cn=pe.type,Qe=pe.request,Fe(pe.url)||Nn.running||!1===yn.restartOnRequestAfter&&"force"!==Ui(cn)?void 0:(_e=arguments,"boolean"==typeof(ee=yn.restartOnRequestAfter||0)&&(ee=0),setTimeout(function(){var je,nn,gn,ui,Jn;if("socket"===cn?Qe.readyState<2:0<(gn=Qe.readyState)&&4>gn){for(Nn.restart(),Jn=[],je=0,nn=(ui=Nn.sources).length;nn>je;je++){if((bi=ui[je])instanceof Rt){bi.watch.apply(bi,_e);break}Jn.push(void 0)}return Jn}},ee))}),Rt=function(){function pe(){var ee=this;this.elements=[],ki().on("request",function(){return ee.watch.apply(ee,arguments)})}return pe.prototype.watch=function(ee){var _e,Qe,cn;return cn=ee.type,_e=ee.request,Fe(ee.url)?void 0:(Qe="socket"===cn?new zi(_e):new Si(_e),this.elements.push(Qe))},pe}(),Si=function pe(ee){var cn,Xe,jt,je,nn=this;if(this.progress=0,null!=window.ProgressEvent)for(ee.addEventListener("progress",function(gn){return nn.progress=gn.lengthComputable?100*gn.loaded/gn.total:nn.progress+(100-nn.progress)/2},!1),cn=0,Xe=(je=["load","abort","timeout","error"]).length;Xe>cn;cn++)ee.addEventListener(je[cn],function(){return nn.progress=100},!1);else jt=ee.onreadystatechange,ee.onreadystatechange=function(){var gn;return 0===(gn=ee.readyState)||4===gn?nn.progress=100:3===ee.readyState&&(nn.progress=50),"function"==typeof jt?jt.apply(null,arguments):void 0}},zi=function pe(ee){var Qe,cn,Xe,jt=this;for(this.progress=0,Qe=0,cn=(Xe=["error","open"]).length;cn>Qe;Qe++)ee.addEventListener(Xe[Qe],function(){return jt.progress=100},!1)},Oe=function pe(ee){var Qe,cn,Xe;for(null==ee&&(ee={}),this.elements=[],null==ee.selectors&&(ee.selectors=[]),Qe=0,cn=(Xe=ee.selectors).length;cn>Qe;Qe++)this.elements.push(new se(Xe[Qe]))},se=function(){function pe(ee){this.selector=ee,this.progress=0,this.check()}return pe.prototype.check=function(){var ee=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return ee.check()},yn.elements.checkInterval)},pe.prototype.done=function(){return this.progress=100},pe}(),bn=function(){function pe(){var ee,_e,Qe=this;this.progress=null!=(_e=this.states[document.readyState])?_e:100,ee=document.onreadystatechange,document.onreadystatechange=function(){return null!=Qe.states[document.readyState]&&(Qe.progress=Qe.states[document.readyState]),"function"==typeof ee?ee.apply(null,arguments):void 0}}return pe.prototype.states={loading:0,interactive:50,complete:100},pe}(),Ve=function pe(){var ee,_e,Qe,cn,Xe,jt=this;this.progress=0,ee=0,Xe=[],cn=0,Qe=kt(),_e=setInterval(function(){var je;return je=kt()-Qe-50,Qe=kt(),Xe.push(je),Xe.length>yn.eventLag.sampleCount&&Xe.shift(),ee=ei(Xe),++cn>=yn.eventLag.minSamples&&ee<yn.eventLag.lagThreshold?(jt.progress=100,clearInterval(_e)):jt.progress=3/(ee+3)*100},50)},Gi=function(){function pe(ee){this.source=ee,this.last=this.sinceLastUpdate=0,this.rate=yn.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=gr(this.source,"progress"))}return pe.prototype.tick=function(ee,_e){var Qe;return null==_e&&(_e=gr(this.source,"progress")),_e>=100&&(this.done=!0),_e===this.last?this.sinceLastUpdate+=ee:(this.sinceLastUpdate&&(this.rate=(_e-this.last)/this.sinceLastUpdate),this.catchup=(_e-this.progress)/yn.catchupTime,this.sinceLastUpdate=0,this.last=_e),_e>this.progress&&(this.progress+=this.catchup*ee),Qe=1-Math.pow(this.progress/100,yn.easeFactor),this.progress+=Qe*this.rate*ee,this.progress=Math.min(this.lastProgress+yn.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},pe}(),Ln=null,kn=null,Zt=null,aa=null,fn=null,En=null,Nn.running=!1,Fn=function(){return yn.restartOnPushState?Nn.restart():void 0},null!=window.history.pushState&&(mo=window.history.pushState,window.history.pushState=function(){return Fn(),mo.apply(window.history,arguments)}),null!=window.history.replaceState&&(Zn=window.history.replaceState,window.history.replaceState=function(){return Fn(),Zn.apply(window.history,arguments)}),Ci={ajax:Rt,elements:Oe,document:bn,eventLag:Ve},(St=function(){var pe,ee,_e,Qe,cn,Xe,jt,je;for(Nn.sources=Ln=[],ee=0,Qe=(Xe=["ajax","elements","document","eventLag"]).length;Qe>ee;ee++)!1!==yn[pe=Xe[ee]]&&Ln.push(new Ci[pe](yn[pe]));for(_e=0,cn=(je=null!=(jt=yn.extraSources)?jt:[]).length;cn>_e;_e++)Ln.push(new(bi=je[_e])(yn));return Nn.bar=Zt=new pi,kn=[],aa=new Gi})(),Nn.stop=function(){return Nn.trigger("stop"),Nn.running=!1,Zt.destroy(),En=!0,null!=fn&&("function"==typeof Dn&&Dn(fn),fn=null),St()},Nn.restart=function(){return Nn.trigger("restart"),Nn.stop(),Nn.start()},Nn.go=function(){var pe;return Nn.running=!0,Zt.render(),pe=kt(),En=!1,fn=Rn(function(ee,_e){var cn,Xe,je,nn,gn,Jn,sn,Fi,tr,so,hr,mr,vr;for(cn=Fi=0,Xe=!0,nn=tr=0,hr=Ln.length;hr>tr;nn=++tr)for(bi=Ln[nn],sn=null!=kn[nn]?kn[nn]:kn[nn]=[],gn=so=0,mr=(je=null!=(vr=bi.elements)?vr:[bi]).length;mr>so;gn=++so)Xe&=(Jn=null!=sn[gn]?sn[gn]:sn[gn]=new Gi(je[gn])).done,Jn.done||(cn++,Fi+=Jn.tick(ee));return Zt.update(aa.tick(ee,Fi/cn)),Zt.done()||Xe||En?(Zt.update(100),Nn.trigger("done"),setTimeout(function(){return Zt.finish(),Nn.running=!1,Nn.trigger("hide")},Math.max(yn.ghostTime,Math.max(yn.minTime-(kt()-pe),0)))):_e()})},Nn.start=function(pe){po(yn,pe),Nn.running=!0;try{Zt.render()}catch(ee){Bi=ee}return document.querySelector(".pace")?(Nn.trigger("start"),Nn.go()):setTimeout(Nn.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return Nn}):"object"==typeof exports?module.exports=Nn:yn.startOnPageLoad&&Nn.start()}).call(this),function(Rt){"use strict";var pi=function(){},bn=function(r,l){return function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return r(l.apply(null,c))}},Oe=function(r){return function(){return r}},se=function(r){return r};function Ve(r){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];var M=l.concat(h);return r.apply(null,M)}}var on,Ue,Bi,Nn,Pi,Ci,Gi,zi,Si,fn,ei,Zt,En,Dn,Dr,po,Rr=function(r){return function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return!r.apply(null,l)}},zn=Oe(!1),ki=Oe(!0),Fn=function(){return Lr},Lr=(on=function(r){return r.isNone()},Nn={fold:function(r,l){return r()},is:zn,isSome:zn,isNone:ki,getOr:Bi=function(r){return r},getOrThunk:Ue=function(r){return r()},getOrDie:function(r){throw new Error(r||"error: getOrDie called on none.")},getOrNull:Oe(null),getOrUndefined:Oe(void 0),or:Bi,orThunk:Ue,map:Fn,each:pi,bind:Fn,exists:zn,forall:ki,filter:Fn,equals:on,equals_:on,toArray:function(){return[]},toString:Oe("none()")},Object.freeze&&Object.freeze(Nn),Nn),St=function(r){var l=Oe(r),c=function(){return m},h=function(M){return M(r)},m={fold:function(M,k){return k(r)},is:function(M){return r===M},isSome:ki,isNone:zn,getOr:l,getOrThunk:l,getOrDie:l,getOrNull:l,getOrUndefined:l,or:c,orThunk:c,map:function(M){return St(M(r))},each:function(M){M(r)},bind:h,exists:h,forall:h,filter:function(M){return M(r)?m:Lr},toArray:function(){return[r]},toString:function(){return"some("+r+")"},equals:function(M){return M.is(r)},equals_:function(M,k){return M.fold(zn,function(P){return k(r,P)})}};return m},kt={some:St,none:Fn,from:function(r){return null==r?Lr:St(r)}},yn=function(r){return function(l){return function(c){if(null===c)return"null";var h=typeof c;return"object"===h&&(Array.prototype.isPrototypeOf(c)||c.constructor&&"Array"===c.constructor.name)?"array":"object"===h&&(String.prototype.isPrototypeOf(c)||c.constructor&&"String"===c.constructor.name)?"string":h}(l)===r}},Mn=yn("string"),gr=yn("object"),Rn=yn("array"),kn=yn("null"),Fe=yn("boolean"),Ui=yn("function"),bi=yn("number"),Ln=Array.prototype.slice,aa=Array.prototype.indexOf,Br=Array.prototype.push,ao=function(r,l){return aa.call(r,l)},br=function(r,l){return-1<ao(r,l)},pr=function(r,l){for(var c=0,h=r.length;c<h;c++)if(l(r[c],c))return!0;return!1},_i=function(r,l){for(var c=r.length,h=new Array(c),m=0;m<c;m++)h[m]=l(r[m],m);return h},Ke=function(r,l){for(var c=0,h=r.length;c<h;c++)l(r[c],c)},mo=function(r,l){for(var c=[],h=[],m=0,M=r.length;m<M;m++){var k=r[m];(l(k,m)?c:h).push(k)}return{pass:c,fail:h}},Vn=function(r,l){for(var c=[],h=0,m=r.length;h<m;h++){var M=r[h];l(M,h)&&c.push(M)}return c},Ei=function(r,l,c){return Ke(r,function(h){c=l(c,h)}),c},Zn=function(r,l){for(var c=0,h=r.length;c<h;c++){var m=r[c];if(l(m,c))return kt.some(m)}return kt.none()},Qi=function(r,l){for(var c=0,h=r.length;c<h;c++)if(l(r[c],c))return kt.some(c);return kt.none()},Mr=function(r,l){return function(c){for(var h=[],m=0,M=c.length;m<M;++m){if(!Rn(c[m]))throw new Error("Arr.flatten item "+m+" was not an array, input: "+c);Br.apply(h,c[m])}return h}(_i(r,l))},yi=function(r,l){for(var c=0,h=r.length;c<h;++c)if(!0!==l(r[c],c))return!1;return!0},To=function(r,l){return Vn(r,function(c){return!br(l,c)})},pe=function(r){return 0===r.length?kt.none():kt.some(r[0])},ee=function(r){return 0===r.length?kt.none():kt.some(r[r.length-1])},_e=Ui(Array.from)?Array.from:function(r){return Ln.call(r)},Qe=void 0!==Rt.window?Rt.window:Function("return this;")(),Xe_getOrDie=function(r,l){var c=function(r,l){return function(c,h){for(var m=null!=h?h:Qe,M=0;M<c.length&&null!=m;++M)m=m[c[M]];return m}(r.split("."),l)}(r,l);if(null==c)throw new Error(r+" not available on this browser");return c},jt=function(){return Xe_getOrDie("URL")},je_createObjectURL=function(r){return jt().createObjectURL(r)},je_revokeObjectURL=function(r){jt().revokeObjectURL(r)},nn=Rt.navigator,gn=nn.userAgent,ui=function(r){return"matchMedia"in Rt.window&&Rt.matchMedia(r).matches};Zt=/Android/.test(gn),Ci=(Ci=!(Pi=/WebKit/.test(gn))&&/MSIE/gi.test(gn)&&/Explorer/gi.test(nn.appName))&&/MSIE (\w+)\./.exec(gn)[1],Gi=-1!==gn.indexOf("Trident/")&&(-1!==gn.indexOf("rv:")||-1!==nn.appName.indexOf("Netscape"))&&11,zi=-1!==gn.indexOf("Edge/")&&!Ci&&!Gi&&12,Ci=Ci||Gi||zi,Si=!Pi&&!Gi&&/Gecko/.test(gn),fn=-1!==gn.indexOf("Mac"),ei=/(iPad|iPhone)/.test(gn),En="FormData"in Rt.window&&"FileReader"in Rt.window&&"URL"in Rt.window&&!!je_createObjectURL,Dn=ui("only screen and (max-device-width: 480px)")&&(Zt||ei),Dr=ui("only screen and (min-width: 800px)")&&(Zt||ei),po=-1!==gn.indexOf("Windows Phone"),zi&&(Pi=!1);var Jn,sn={opera:!1,webkit:Pi,ie:Ci,gecko:Si,mac:fn,iOS:ei,android:Zt,contentEditable:!ei||En||534<=parseInt(gn.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==Ci,range:Rt.window.getSelection&&"Range"in Rt.window,documentMode:Ci&&!zi?Rt.document.documentMode||7:10,fileApi:En,ceFalse:!1===Ci||8<Ci,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===Ci||11<Ci,desktop:!Dn&&!Dr,windowsPhone:po},Fi=window.Promise?window.Promise:function(){function r(W,q){return function(){W.apply(q,arguments)}}var l=Array.isArray||function(W){return"[object Array]"===Object.prototype.toString.call(W)},c=function(W){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof W)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],F(W,r(M,this),r(k,this))},h=c.immediateFn||"function"==typeof setImmediate&&setImmediate||function(W){setTimeout(W,1)};function m(W){var q=this;null!==this._state?h(function(){var Z=q._state?W.onFulfilled:W.onRejected;if(null!==Z){var ht;try{ht=Z(q._value)}catch(at){return void W.reject(at)}W.resolve(ht)}else(q._state?W.resolve:W.reject)(q._value)}):this._deferreds.push(W)}function M(W){try{if(W===this)throw new TypeError("A promise cannot be resolved with itself.");if(W&&("object"==typeof W||"function"==typeof W)){var q=W.then;if("function"==typeof q)return void F(r(q,W),r(M,this),r(k,this))}this._state=!0,this._value=W,P.call(this)}catch(Z){k.call(this,Z)}}function k(W){this._state=!1,this._value=W,P.call(this)}function P(){for(var W=0,q=this._deferreds.length;W<q;W++)m.call(this,this._deferreds[W]);this._deferreds=null}function N(W,q,Z,ht){this.onFulfilled="function"==typeof W?W:null,this.onRejected="function"==typeof q?q:null,this.resolve=Z,this.reject=ht}function F(W,q,Z){var ht=!1;try{W(function(at){ht||(ht=!0,q(at))},function(at){ht||(ht=!0,Z(at))})}catch(at){if(ht)return;ht=!0,Z(at)}}return c.prototype.catch=function(W){return this.then(null,W)},c.prototype.then=function(W,q){var Z=this;return new c(function(ht,at){m.call(Z,new N(W,q,ht,at))})},c.all=function(){var W=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(q,Z){if(0===W.length)return q([]);var ht=W.length;function at(rt,dt){try{if(dt&&("object"==typeof dt||"function"==typeof dt)){var mt=dt.then;if("function"==typeof mt)return void mt.call(dt,function(Dt){at(rt,Dt)},Z)}W[rt]=dt,0==--ht&&q(W)}catch(Dt){Z(Dt)}}for(var gt=0;gt<W.length;gt++)at(gt,W[gt])})},c.resolve=function(W){return W&&"object"==typeof W&&W.constructor===c?W:new c(function(q){q(W)})},c.reject=function(W){return new c(function(q,Z){Z(W)})},c.race=function(W){return new c(function(q,Z){for(var ht=0,at=W.length;ht<at;ht++)W[ht].then(q,Z)})},c}(),tr=function(r,l){return"number"!=typeof l&&(l=0),setTimeout(r,l)},so=function(r,l){return"number"!=typeof l&&(l=1),setInterval(r,l)},hr=function(r,l){var c,h;return(h=function(){var m=arguments;clearTimeout(c),c=tr(function(){r.apply(this,m)},l)}).stop=function(){clearTimeout(c)},h},mr={requestAnimationFrame:function(r,l){Jn?Jn.then(r):Jn=new Fi(function(c){l||(l=Rt.document.body),function(h,m){var M,k=Rt.window.requestAnimationFrame,P=["ms","moz","webkit"];for(M=0;M<P.length&&!k;M++)k=Rt.window[P[M]+"RequestAnimationFrame"];k||(k=function(N){Rt.window.setTimeout(N,0)}),k(h,m)}(c,l)}).then(r)},setTimeout:tr,setInterval:so,setEditorTimeout:function(r,l,c){return tr(function(){r.removed||l()},c)},setEditorInterval:function(r,l,c){var h;return h=so(function(){r.removed?clearInterval(h):l()},c)},debounce:hr,throttle:hr,clearInterval:function(r){return clearInterval(r)},clearTimeout:function(r){return clearTimeout(r)}},vr=/^(?:mouse|contextmenu)|click/,lr={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Qn=function(){return!1},gi=function(){return!0},De=function(r,l,c,h){r.addEventListener?r.addEventListener(l,c,h||!1):r.attachEvent&&r.attachEvent("on"+l,c)},Wi=function(r,l,c,h){r.removeEventListener?r.removeEventListener(l,c,h||!1):r.detachEvent&&r.detachEvent("on"+l,c)},$i=function(r,l){var c,h,m=l||{};for(c in r)lr[c]||(m[c]=r[c]);if(m.target||(m.target=m.srcElement||Rt.document),sn.experimentalShadowDom&&(m.target=function(N,F){if(N.composedPath){var W=N.composedPath();if(W&&0<W.length)return W[0]}return F}(r,m.target)),r&&vr.test(r.type)&&void 0===r.pageX&&void 0!==r.clientX){var M=m.target.ownerDocument||Rt.document,k=M.documentElement,P=M.body;m.pageX=r.clientX+(k&&k.scrollLeft||P&&P.scrollLeft||0)-(k&&k.clientLeft||P&&P.clientLeft||0),m.pageY=r.clientY+(k&&k.scrollTop||P&&P.scrollTop||0)-(k&&k.clientTop||P&&P.clientTop||0)}return m.preventDefault=function(){m.isDefaultPrevented=gi,r&&(r.preventDefault?r.preventDefault():r.returnValue=!1)},m.stopPropagation=function(){m.isPropagationStopped=gi,r&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)},!(m.stopImmediatePropagation=function(){m.isImmediatePropagationStopped=gi,m.stopPropagation()})==((h=m).isDefaultPrevented===gi||h.isDefaultPrevented===Qn)&&(m.isDefaultPrevented=Qn,m.isPropagationStopped=Qn,m.isImmediatePropagationStopped=Qn),void 0===m.metaKey&&(m.metaKey=!1),m},_r=function(r,l,c){var h=r.document,m={type:"ready"};if(c.domLoaded)l(m);else{var M=function(){return"complete"===h.readyState||"interactive"===h.readyState&&h.body},k=function(){c.domLoaded||(c.domLoaded=!0,l(m))},P=function(){M()&&(Wi(h,"readystatechange",P),k())},N=function(){try{h.documentElement.doScroll("left")}catch(F){return void mr.setTimeout(N)}k()};!h.addEventListener||sn.ie&&sn.ie<11?(De(h,"readystatechange",P),h.documentElement.doScroll&&r.self===r.top&&N()):M()?k():De(r,"DOMContentLoaded",k),De(r,"load",k)}},qr=function(){var r,l,c,h,m,M=this,k={};l="mce-data-"+(+new Date).toString(32),h="onmouseenter"in Rt.document.documentElement,c="onfocusin"in Rt.document.documentElement,m={mouseenter:"mouseover",mouseleave:"mouseout"},r=1,M.domLoaded=!1,M.events=k;var P=function(N,F){var W,q,Z,ht,at=k[F];if(W=at&&at[N.type])for(q=0,Z=W.length;q<Z;q++)if((ht=W[q])&&!1===ht.func.call(ht.scope,N)&&N.preventDefault(),N.isImmediatePropagationStopped())return};M.bind=function(N,F,W,q){var Z,ht,at,gt,rt,dt,mt,Dt=Rt.window,Pt=function(wt){P($i(wt||Dt.event),Z)};if(N&&3!==N.nodeType&&8!==N.nodeType){for(N[l]?Z=N[l]:(Z=r++,N[l]=Z,k[Z]={}),q=q||N,at=(F=F.split(" ")).length;at--;)dt=Pt,rt=mt=!1,"DOMContentLoaded"===(gt=F[at])&&(gt="ready"),M.domLoaded&&"ready"===gt&&"complete"===N.readyState?W.call(q,$i({type:gt})):(h||(rt=m[gt])&&(dt=function(wt){var Ht,ce;if(Ht=wt.currentTarget,(ce=wt.relatedTarget)&&Ht.contains)ce=Ht.contains(ce);else for(;ce&&ce!==Ht;)ce=ce.parentNode;ce||((wt=$i(wt||Dt.event)).type="mouseout"===wt.type?"mouseleave":"mouseenter",wt.target=Ht,P(wt,Z))}),c||"focusin"!==gt&&"focusout"!==gt||(mt=!0,rt="focusin"===gt?"focus":"blur",dt=function(wt){(wt=$i(wt||Dt.event)).type="focus"===wt.type?"focusin":"focusout",P(wt,Z)}),(ht=k[Z][gt])?"ready"===gt&&M.domLoaded?W({type:gt}):ht.push({func:W,scope:q}):(k[Z][gt]=ht=[{func:W,scope:q}],ht.fakeName=rt,ht.capture=mt,ht.nativeHandler=dt,"ready"===gt?_r(N,dt,M):De(N,rt||gt,dt,mt)));return N=ht=0,W}},M.unbind=function(N,F,W){var q,Z,ht,at,gt,rt;if(!N||3===N.nodeType||8===N.nodeType)return M;if(q=N[l]){if(rt=k[q],F){for(ht=(F=F.split(" ")).length;ht--;)if(Z=rt[gt=F[ht]]){if(W)for(at=Z.length;at--;)if(Z[at].func===W){var dt=Z.nativeHandler,mt=Z.fakeName,Dt=Z.capture;(Z=Z.slice(0,at).concat(Z.slice(at+1))).nativeHandler=dt,Z.fakeName=mt,Z.capture=Dt,rt[gt]=Z}W&&0!==Z.length||(delete rt[gt],Wi(N,Z.fakeName||gt,Z.nativeHandler,Z.capture))}}else{for(gt in rt)Wi(N,(Z=rt[gt]).fakeName||gt,Z.nativeHandler,Z.capture);rt={}}for(gt in rt)return M;delete k[q];try{delete N[l]}catch(Pt){N[l]=null}}return M},M.fire=function(N,F,W){var q;if(!N||3===N.nodeType||8===N.nodeType)return M;for((W=$i(null,W)).type=F,W.target=N;(q=N[l])&&P(W,q),(N=N.parentNode||N.ownerDocument||N.defaultView||N.parentWindow)&&!W.isPropagationStopped(););return M},M.clean=function(N){var F,W,q=M.unbind;if(!N||3===N.nodeType||8===N.nodeType)return M;if(N[l]&&q(N),N.getElementsByTagName||(N=N.document),N&&N.getElementsByTagName)for(q(N),F=(W=N.getElementsByTagName("*")).length;F--;)(N=W[F])[l]&&q(N);return M},M.destroy=function(){k={}},M.cancel=function(N){return N&&(N.preventDefault(),N.stopImmediatePropagation()),!1}};(qr.Event=new qr).bind(Rt.window,"ready",function(){});var yr,Mi,wi,Ai,ir,pa,Ks,Js,Ar,lo,ma,Yr,kr,ql,uo,Ko,ka,za,ur="sizzle"+-new Date,zr=Rt.window.document,vo=0,Za=0,Ka=bo(),Qs=bo(),Ja=bo(),yo=function(r,l){return r===l&&(ma=!0),0},ks="undefined",co={}.hasOwnProperty,xo=[],cs=xo.pop,bu=xo.push,Ia=xo.push,Go=xo.slice,yt=xo.indexOf||function(r){for(var l=0,c=this.length;l<c;l++)if(this[l]===r)return l;return-1},Ft="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Kt="\\["+Ft+"*("+oe+")(?:"+Ft+"*([*^$|!~]?=)"+Ft+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+Ft+"*\\]",fe=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Kt+")*)|.*)\\)|)",he=new RegExp("^"+Ft+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ft+"+$","g"),In=new RegExp("^"+Ft+"*,"+Ft+"*"),Pe=new RegExp("^"+Ft+"*([>+~]|"+Ft+")"+Ft+"*"),hn=new RegExp("="+Ft+"*([^\\]'\"]*?)"+Ft+"*\\]","g"),vn=new RegExp(fe),pn=new RegExp("^"+oe+"$"),Le={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe+"|[*])"),ATTR:new RegExp("^"+Kt),PSEUDO:new RegExp("^"+fe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ft+"*(even|odd|(([+-]|)(\\d*)n|)"+Ft+"*(?:([+-]|)"+Ft+"*(\\d+)|))"+Ft+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Ft+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ft+"*((?:-\\d)?\\d*)"+Ft+"*\\)|)(?=[^-]|$)","i")},xn=/^(?:input|select|textarea|button)$/i,en=/^h\d$/i,He=/^[^{]+\{\s*\[native \w/,Un=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,li=/[+~]/,Ii=/'|\\/g,ri=new RegExp("\\\\([\\da-f]{1,6}"+Ft+"?|("+Ft+")|.)","ig"),er=function(r,l,c){var h="0x"+l-65536;return h!=h||c?l:h<0?String.fromCharCode(h+65536):String.fromCharCode(h>>10|55296,1023&h|56320)};try{Ia.apply(xo=Go.call(zr.childNodes),zr.childNodes)}catch(r){Ia={apply:xo.length?function(l,c){bu.apply(l,Go.call(c))}:function(l,c){for(var h=l.length,m=0;l[h++]=c[m++];);l.length=h-1}}}var Hi=function(r,l,c,h){var m,M,k,P,N,F,W,q,Z,ht;if((l?l.ownerDocument||l:zr)!==kr&&Yr(l),c=c||[],!r||"string"!=typeof r)return c;if(1!==(P=(l=l||kr).nodeType)&&9!==P)return[];if(uo&&!h){if(m=Un.exec(r))if(k=m[1]){if(9===P){if(!(M=l.getElementById(k))||!M.parentNode)return c;if(M.id===k)return c.push(M),c}else if(l.ownerDocument&&(M=l.ownerDocument.getElementById(k))&&za(l,M)&&M.id===k)return c.push(M),c}else{if(m[2])return Ia.apply(c,l.getElementsByTagName(r)),c;if((k=m[3])&&Mi.getElementsByClassName)return Ia.apply(c,l.getElementsByClassName(k)),c}if(Mi.qsa&&(!Ko||!Ko.test(r))){if(q=W=ur,Z=l,ht=9===P&&r,1===P&&"object"!==l.nodeName.toLowerCase()){for(F=pa(r),(W=l.getAttribute("id"))?q=W.replace(Ii,"\\$&"):l.setAttribute("id",q),q="[id='"+q+"'] ",N=F.length;N--;)F[N]=q+_u(F[N]);Z=li.test(r)&&Yl(l.parentNode)||l,ht=F.join(",")}if(ht)try{return Ia.apply(c,Z.querySelectorAll(ht)),c}catch(at){}finally{W||l.removeAttribute("id")}}}return Js(r.replace(he,"$1"),l,c,h)};function bo(){var r=[];return function l(c,h){return r.push(c+" ")>wi.cacheLength&&delete l[r.shift()],l[c+" "]=h}}function Qr(r){return r[ur]=!0,r}function Xr(r,l){var c=l&&r,h=c&&1===r.nodeType&&1===l.nodeType&&(~l.sourceIndex||1<<31)-(~r.sourceIndex||1<<31);if(h)return h;if(c)for(;c=c.nextSibling;)if(c===l)return-1;return r?1:-1}function Is(r){return function(l){return"input"===l.nodeName.toLowerCase()&&l.type===r}}function _o(r){return function(l){var c=l.nodeName.toLowerCase();return("input"===c||"button"===c)&&l.type===r}}function fr(r){return Qr(function(l){return l=+l,Qr(function(c,h){for(var m,M=r([],c.length,l),k=M.length;k--;)c[m=M[k]]&&(c[m]=!(h[m]=c[m]))})})}function Yl(r){return r&&typeof r.getElementsByTagName!==ks&&r}for(yr in Mi=Hi.support={},ir=Hi.isXML=function(r){var l=r&&(r.ownerDocument||r).documentElement;return!!l&&"HTML"!==l.nodeName},Yr=Hi.setDocument=function(r){var l,c=r?r.ownerDocument||r:zr,h=c.defaultView;return c!==kr&&9===c.nodeType&&c.documentElement?(ql=(kr=c).documentElement,uo=!ir(c),h&&h!==function(m){try{return m.top}catch(M){}return null}(h)&&(h.addEventListener?h.addEventListener("unload",function(){Yr()},!1):h.attachEvent&&h.attachEvent("onunload",function(){Yr()})),Mi.attributes=!0,Mi.getElementsByTagName=!0,Mi.getElementsByClassName=He.test(c.getElementsByClassName),Mi.getById=!0,wi.find.ID=function(m,M){if(typeof M.getElementById!==ks&&uo){var k=M.getElementById(m);return k&&k.parentNode?[k]:[]}},wi.filter.ID=function(m){var M=m.replace(ri,er);return function(k){return k.getAttribute("id")===M}},wi.find.TAG=Mi.getElementsByTagName?function(m,M){if(typeof M.getElementsByTagName!==ks)return M.getElementsByTagName(m)}:function(m,M){var k,P=[],N=0,F=M.getElementsByTagName(m);if("*"===m){for(;k=F[N++];)1===k.nodeType&&P.push(k);return P}return F},wi.find.CLASS=Mi.getElementsByClassName&&function(m,M){if(uo)return M.getElementsByClassName(m)},ka=[],Ko=[],Mi.disconnectedMatch=!0,Ko=Ko.length&&new RegExp(Ko.join("|")),ka=ka.length&&new RegExp(ka.join("|")),l=He.test(ql.compareDocumentPosition),za=l||He.test(ql.contains)?function(m,M){var k=9===m.nodeType?m.documentElement:m,P=M&&M.parentNode;return m===P||!(!P||1!==P.nodeType||!(k.contains?k.contains(P):m.compareDocumentPosition&&16&m.compareDocumentPosition(P)))}:function(m,M){if(M)for(;M=M.parentNode;)if(M===m)return!0;return!1},yo=l?function(m,M){if(m===M)return ma=!0,0;var k=!m.compareDocumentPosition-!M.compareDocumentPosition;return k||(1&(k=(m.ownerDocument||m)===(M.ownerDocument||M)?m.compareDocumentPosition(M):1)||!Mi.sortDetached&&M.compareDocumentPosition(m)===k?m===c||m.ownerDocument===zr&&za(zr,m)?-1:M===c||M.ownerDocument===zr&&za(zr,M)?1:lo?yt.call(lo,m)-yt.call(lo,M):0:4&k?-1:1)}:function(m,M){if(m===M)return ma=!0,0;var k,P=0,N=m.parentNode,F=M.parentNode,W=[m],q=[M];if(!N||!F)return m===c?-1:M===c?1:N?-1:F?1:lo?yt.call(lo,m)-yt.call(lo,M):0;if(N===F)return Xr(m,M);for(k=m;k=k.parentNode;)W.unshift(k);for(k=M;k=k.parentNode;)q.unshift(k);for(;W[P]===q[P];)P++;return P?Xr(W[P],q[P]):W[P]===zr?-1:q[P]===zr?1:0},c):kr},Hi.matches=function(r,l){return Hi(r,null,null,l)},Hi.matchesSelector=function(r,l){if((r.ownerDocument||r)!==kr&&Yr(r),l=l.replace(hn,"='$1']"),Mi.matchesSelector&&uo&&(!ka||!ka.test(l))&&(!Ko||!Ko.test(l)))try{var c=(void 0).call(r,l);if(c||Mi.disconnectedMatch||r.document&&11!==r.document.nodeType)return c}catch(h){}return 0<Hi(l,kr,null,[r]).length},Hi.contains=function(r,l){return(r.ownerDocument||r)!==kr&&Yr(r),za(r,l)},Hi.attr=function(r,l){(r.ownerDocument||r)!==kr&&Yr(r);var c=wi.attrHandle[l.toLowerCase()],h=c&&co.call(wi.attrHandle,l.toLowerCase())?c(r,l,!uo):void 0;return void 0!==h?h:Mi.attributes||!uo?r.getAttribute(l):(h=r.getAttributeNode(l))&&h.specified?h.value:null},Hi.error=function(r){throw new Error("Syntax error, unrecognized expression: "+r)},Hi.uniqueSort=function(r){var l,c=[],h=0,m=0;if(ma=!Mi.detectDuplicates,lo=!Mi.sortStable&&r.slice(0),r.sort(yo),ma){for(;l=r[m++];)l===r[m]&&(h=c.push(m));for(;h--;)r.splice(c[h],1)}return lo=null,r},Ai=Hi.getText=function(r){var l,c="",h=0,m=r.nodeType;if(m){if(1===m||9===m||11===m){if("string"==typeof r.textContent)return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)c+=Ai(r)}else if(3===m||4===m)return r.nodeValue}else for(;l=r[h++];)c+=Ai(l);return c},(wi=Hi.selectors={cacheLength:50,createPseudo:Qr,match:Le,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(r){return r[1]=r[1].replace(ri,er),r[3]=(r[3]||r[4]||r[5]||"").replace(ri,er),"~="===r[2]&&(r[3]=" "+r[3]+" "),r.slice(0,4)},CHILD:function(r){return r[1]=r[1].toLowerCase(),"nth"===r[1].slice(0,3)?(r[3]||Hi.error(r[0]),r[4]=+(r[4]?r[5]+(r[6]||1):2*("even"===r[3]||"odd"===r[3])),r[5]=+(r[7]+r[8]||"odd"===r[3])):r[3]&&Hi.error(r[0]),r},PSEUDO:function(r){var l,c=!r[6]&&r[2];return Le.CHILD.test(r[0])?null:(r[3]?r[2]=r[4]||r[5]||"":c&&vn.test(c)&&(l=pa(c,!0))&&(l=c.indexOf(")",c.length-l)-c.length)&&(r[0]=r[0].slice(0,l),r[2]=c.slice(0,l)),r.slice(0,3))}},filter:{TAG:function(r){var l=r.replace(ri,er).toLowerCase();return"*"===r?function(){return!0}:function(c){return c.nodeName&&c.nodeName.toLowerCase()===l}},CLASS:function(r){var l=Ka[r+" "];return l||(l=new RegExp("(^|"+Ft+")"+r+"("+Ft+"|$)"))&&Ka(r,function(c){return l.test("string"==typeof c.className&&c.className||typeof c.getAttribute!==ks&&c.getAttribute("class")||"")})},ATTR:function(r,l,c){return function(h){var m=Hi.attr(h,r);return null==m?"!="===l:!l||(m+="","="===l?m===c:"!="===l?m!==c:"^="===l?c&&0===m.indexOf(c):"*="===l?c&&-1<m.indexOf(c):"$="===l?c&&m.slice(-c.length)===c:"~="===l?-1<(" "+m+" ").indexOf(c):"|="===l&&(m===c||m.slice(0,c.length+1)===c+"-"))}},CHILD:function(r,l,c,h,m){var M="nth"!==r.slice(0,3),k="last"!==r.slice(-4),P="of-type"===l;return 1===h&&0===m?function(N){return!!N.parentNode}:function(N,F,W){var q,Z,ht,at,gt,rt,dt=M!==k?"nextSibling":"previousSibling",mt=N.parentNode,Dt=P&&N.nodeName.toLowerCase(),Pt=!W&&!P;if(mt){if(M){for(;dt;){for(ht=N;ht=ht[dt];)if(P?ht.nodeName.toLowerCase()===Dt:1===ht.nodeType)return!1;rt=dt="only"===r&&!rt&&"nextSibling"}return!0}if(rt=[k?mt.firstChild:mt.lastChild],k&&Pt){for(gt=(q=(Z=mt[ur]||(mt[ur]={}))[r]||[])[0]===vo&&q[1],at=q[0]===vo&&q[2],ht=gt&&mt.childNodes[gt];ht=++gt&&ht&&ht[dt]||(at=gt=0)||rt.pop();)if(1===ht.nodeType&&++at&&ht===N){Z[r]=[vo,gt,at];break}}else if(Pt&&(q=(N[ur]||(N[ur]={}))[r])&&q[0]===vo)at=q[1];else for(;(ht=++gt&&ht&&ht[dt]||(at=gt=0)||rt.pop())&&((P?ht.nodeName.toLowerCase()!==Dt:1!==ht.nodeType)||!++at||(Pt&&((ht[ur]||(ht[ur]={}))[r]=[vo,at]),ht!==N)););return(at-=m)===h||at%h==0&&0<=at/h}}},PSEUDO:function(r,l){var c,h=wi.pseudos[r]||wi.setFilters[r.toLowerCase()]||Hi.error("unsupported pseudo: "+r);return h[ur]?h(l):1<h.length?(c=[r,r,"",l],wi.setFilters.hasOwnProperty(r.toLowerCase())?Qr(function(m,M){for(var k,P=h(m,l),N=P.length;N--;)m[k=yt.call(m,P[N])]=!(M[k]=P[N])}):function(m){return h(m,0,c)}):h}},pseudos:{not:Qr(function(r){var l=[],c=[],h=Ks(r.replace(he,"$1"));return h[ur]?Qr(function(m,M,k,P){for(var N,F=h(m,null,P,[]),W=m.length;W--;)(N=F[W])&&(m[W]=!(M[W]=N))}):function(m,M,k){return l[0]=m,h(l,null,k,c),!c.pop()}}),has:Qr(function(r){return function(l){return 0<Hi(r,l).length}}),contains:Qr(function(r){return r=r.replace(ri,er),function(l){return-1<(l.textContent||l.innerText||Ai(l)).indexOf(r)}}),lang:Qr(function(r){return pn.test(r||"")||Hi.error("unsupported lang: "+r),r=r.replace(ri,er).toLowerCase(),function(l){var c;do{if(c=uo?l.lang:l.getAttribute("xml:lang")||l.getAttribute("lang"))return(c=c.toLowerCase())===r||0===c.indexOf(r+"-")}while((l=l.parentNode)&&1===l.nodeType);return!1}}),target:function(r){var l=Rt.window.location&&Rt.window.location.hash;return l&&l.slice(1)===r.id},root:function(r){return r===ql},focus:function(r){return r===kr.activeElement&&(!kr.hasFocus||kr.hasFocus())&&!!(r.type||r.href||~r.tabIndex)},enabled:function(r){return!1===r.disabled},disabled:function(r){return!0===r.disabled},checked:function(r){var l=r.nodeName.toLowerCase();return"input"===l&&!!r.checked||"option"===l&&!!r.selected},selected:function(r){return!0===r.selected},empty:function(r){for(r=r.firstChild;r;r=r.nextSibling)if(r.nodeType<6)return!1;return!0},parent:function(r){return!wi.pseudos.empty(r)},header:function(r){return en.test(r.nodeName)},input:function(r){return xn.test(r.nodeName)},button:function(r){var l=r.nodeName.toLowerCase();return"input"===l&&"button"===r.type||"button"===l},text:function(r){var l;return"input"===r.nodeName.toLowerCase()&&"text"===r.type&&(null==(l=r.getAttribute("type"))||"text"===l.toLowerCase())},first:fr(function(){return[0]}),last:fr(function(r,l){return[l-1]}),eq:fr(function(r,l,c){return[c<0?c+l:c]}),even:fr(function(r,l){for(var c=0;c<l;c+=2)r.push(c);return r}),odd:fr(function(r,l){for(var c=1;c<l;c+=2)r.push(c);return r}),lt:fr(function(r,l,c){for(var h=c<0?c+l:c;0<=--h;)r.push(h);return r}),gt:fr(function(r,l,c){for(var h=c<0?c+l:c;++h<l;)r.push(h);return r})}}).pseudos.nth=wi.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})wi.pseudos[yr]=Is(yr);for(yr in{submit:!0,reset:!0})wi.pseudos[yr]=_o(yr);function tl(){}function _u(r){for(var l=0,c=r.length,h="";l<c;l++)h+=r[l].value;return h}function ds(r,l,c){var h=l.dir,m=c&&"parentNode"===h,M=Za++;return l.first?function(k,P,N){for(;k=k[h];)if(1===k.nodeType||m)return r(k,P,N)}:function(k,P,N){var F,W,q=[vo,M];if(N){for(;k=k[h];)if((1===k.nodeType||m)&&r(k,P,N))return!0}else for(;k=k[h];)if(1===k.nodeType||m){if((F=(W=k[ur]||(k[ur]={}))[h])&&F[0]===vo&&F[1]===M)return q[2]=F[2];if((W[h]=q)[2]=r(k,P,N))return!0}}}function cr(r){return 1<r.length?function(l,c,h){for(var m=r.length;m--;)if(!r[m](l,c,h))return!1;return!0}:r[0]}function wu(r,l,c,h,m){for(var M,k=[],P=0,N=r.length,F=null!=l;P<N;P++)(M=r[P])&&(c&&!c(M,h,m)||(k.push(M),F&&l.push(P)));return k}function Tl(r,l,c,h,m,M){return h&&!h[ur]&&(h=Tl(h)),m&&!m[ur]&&(m=Tl(m,M)),Qr(function(k,P,N,F){var W,q,Z,ht=[],at=[],gt=P.length,rt=k||function(Dt,Pt,wt){for(var Ht=0,ce=Pt.length;Ht<ce;Ht++)Hi(Dt,Pt[Ht],wt);return wt}(l||"*",N.nodeType?[N]:N,[]),dt=!r||!k&&l?rt:wu(rt,ht,r,N,F),mt=c?m||(k?r:gt||h)?[]:P:dt;if(c&&c(dt,mt,N,F),h)for(W=wu(mt,at),h(W,[],N,F),q=W.length;q--;)(Z=W[q])&&(mt[at[q]]=!(dt[at[q]]=Z));if(k){if(m||r){if(m){for(W=[],q=mt.length;q--;)(Z=mt[q])&&W.push(dt[q]=Z);m(null,mt=[],W,F)}for(q=mt.length;q--;)(Z=mt[q])&&-1<(W=m?yt.call(k,Z):ht[q])&&(k[W]=!(P[W]=Z))}}else mt=wu(mt===P?mt.splice(gt,mt.length):mt),m?m(null,P,mt,F):Ia.apply(P,mt)})}function ic(r){for(var l,c,h,m=r.length,M=wi.relative[r[0].type],k=M||wi.relative[" "],P=M?1:0,N=ds(function(q){return q===l},k,!0),F=ds(function(q){return-1<yt.call(l,q)},k,!0),W=[function(q,Z,ht){return!M&&(ht||Z!==Ar)||((l=Z).nodeType?N(q,Z,ht):F(q,Z,ht))}];P<m;P++)if(c=wi.relative[r[P].type])W=[ds(cr(W),c)];else{if((c=wi.filter[r[P].type].apply(null,r[P].matches))[ur]){for(h=++P;h<m&&!wi.relative[r[h].type];h++);return Tl(1<P&&cr(W),1<P&&_u(r.slice(0,P-1).concat({value:" "===r[P-2].type?"*":""})).replace(he,"$1"),c,P<h&&ic(r.slice(P,h)),h<m&&ic(r=r.slice(h)),h<m&&_u(r))}W.push(c)}return cr(W)}tl.prototype=wi.filters=wi.pseudos,wi.setFilters=new tl,pa=Hi.tokenize=function(r,l){var c,h,m,M,k,P,N,F=Qs[r+" "];if(F)return l?0:F.slice(0);for(k=r,P=[],N=wi.preFilter;k;){for(M in c&&!(h=In.exec(k))||(h&&(k=k.slice(h[0].length)||k),P.push(m=[])),c=!1,(h=Pe.exec(k))&&(c=h.shift(),m.push({value:c,type:h[0].replace(he," ")}),k=k.slice(c.length)),wi.filter)!(h=Le[M].exec(k))||N[M]&&!(h=N[M](h))||(c=h.shift(),m.push({value:c,type:M,matches:h}),k=k.slice(c.length));if(!c)break}return l?k.length:k?Hi.error(r):Qs(r,P).slice(0)},Ks=Hi.compile=function(r,l){var c,h,m,M,k,P,N=[],F=[],W=Ja[r+" "];if(!W){for(l||(l=pa(r)),c=l.length;c--;)(W=ic(l[c]))[ur]?N.push(W):F.push(W);(W=Ja(r,(h=F,M=0<(m=N).length,k=0<h.length,P=function(q,Z,ht,at,gt){var rt,dt,mt,Dt=0,Pt="0",wt=q&&[],Ht=[],ce=Ar,Xt=q||k&&wi.find.TAG("*",gt),xe=vo+=null==ce?1:Math.random()||.1,te=Xt.length;for(gt&&(Ar=Z!==kr&&Z);Pt!==te&&null!=(rt=Xt[Pt]);Pt++){if(k&&rt){for(dt=0;mt=h[dt++];)if(mt(rt,Z,ht)){at.push(rt);break}gt&&(vo=xe)}M&&((rt=!mt&&rt)&&Dt--,q&&wt.push(rt))}if(Dt+=Pt,M&&Pt!==Dt){for(dt=0;mt=m[dt++];)mt(wt,Ht,Z,ht);if(q){if(0<Dt)for(;Pt--;)wt[Pt]||Ht[Pt]||(Ht[Pt]=cs.call(at));Ht=wu(Ht)}Ia.apply(at,Ht),gt&&!q&&0<Ht.length&&1<Dt+m.length&&Hi.uniqueSort(at)}return gt&&(vo=xe,Ar=ce),wt},M?Qr(P):P))).selector=r}return W},Js=Hi.select=function(r,l,c,h){var m,M,k,P,N,F="function"==typeof r&&r,W=!h&&pa(r=F.selector||r);if(c=c||[],1===W.length){if(2<(M=W[0]=W[0].slice(0)).length&&"ID"===(k=M[0]).type&&Mi.getById&&9===l.nodeType&&uo&&wi.relative[M[1].type]){if(!(l=(wi.find.ID(k.matches[0].replace(ri,er),l)||[])[0]))return c;F&&(l=l.parentNode),r=r.slice(M.shift().value.length)}for(m=Le.needsContext.test(r)?0:M.length;m--&&!wi.relative[P=(k=M[m]).type];)if((N=wi.find[P])&&(h=N(k.matches[0].replace(ri,er),li.test(M[0].type)&&Yl(l.parentNode)||l))){if(M.splice(m,1),!(r=h.length&&_u(M)))return Ia.apply(c,h),c;break}}return(F||Ks(r,W))(h,l,!uo,c,li.test(r)&&Yl(l.parentNode)||l),c},Mi.sortStable=ur.split("").sort(yo).join("")===ur,Mi.detectDuplicates=!!ma,Yr(),Mi.sortDetached=!0;var el=Array.isArray,sa=function(r,l,c){var h,m;if(!r)return 0;if(c=c||r,void 0!==r.length){for(h=0,m=r.length;h<m;h++)if(!1===l.call(c,r[h],h,r))return 0}else for(h in r)if(r.hasOwnProperty(h)&&!1===l.call(c,r[h],h,r))return 0;return 1},nl=function(r,l,c){var h,m;for(h=0,m=r.length;h<m;h++)if(l.call(c,r[h],h,r))return h;return-1},wr={isArray:el,toArray:function(r){var l,c,h=r;if(!el(r))for(h=[],l=0,c=r.length;l<c;l++)h[l]=r[l];return h},each:sa,map:function(r,l){var c=[];return sa(r,function(h,m){c.push(l(h,m,r))}),c},filter:function(r,l){var c=[];return sa(r,function(h,m){l&&!l(h,m,r)||c.push(h)}),c},indexOf:function(r,l){var c,h;if(r)for(c=0,h=r.length;c<h;c++)if(r[c]===l)return c;return-1},reduce:function(r,l,c,h){var m=0;for(arguments.length<3&&(c=r[0]);m<r.length;m++)c=l.call(h,c,r[m],m);return c},findIndex:nl,find:function(r,l,c){var h=nl(r,l,c);return-1!==h?r[h]:void 0},last:function(r){return r[r.length-1]}},Fr=/^\s*|\s*$/g,Su=function(r){return null==r?"":(""+r).replace(Fr,"")},Cu=function(r,l){return l?!("array"!==l||!wr.isArray(r))||typeof r===l:void 0!==r},il=function(r,l,c,h){h=h||this,r&&(c&&(r=r[c]),wr.each(r,function(m,M){if(!1===l.call(h,m,M,c))return!1;il(m,l,c,h)}))},ge={trim:Su,isArray:wr.isArray,is:Cu,toArray:wr.toArray,makeMap:function(r,l,c){var h;for(l=l||",","string"==typeof(r=r||[])&&(r=r.split(l)),c=c||{},h=r.length;h--;)c[r[h]]={};return c},each:wr.each,map:wr.map,grep:wr.filter,inArray:wr.indexOf,hasOwn:function(r,l){return Object.prototype.hasOwnProperty.call(r,l)},extend:function(r,l){for(var c,h,m,M=[],k=2;k<arguments.length;k++)M[k-2]=arguments[k];var P,N=arguments;for(c=1,h=N.length;c<h;c++)for(m in l=N[c])l.hasOwnProperty(m)&&void 0!==(P=l[m])&&(r[m]=P);return r},create:function(r,l,c){var h,m,M,k,P,N=this,F=0;if(r=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(r),M=r[3].match(/(^|\.)(\w+)$/i)[2],!(m=N.createNS(r[3].replace(/\.\w+$/,""),c))[M]){if("static"===r[2])return m[M]=l,void(this.onCreate&&this.onCreate(r[2],r[3],m[M]));l[M]||(l[M]=function(){},F=1),m[M]=l[M],N.extend(m[M].prototype,l),r[5]&&(h=N.resolve(r[5]).prototype,k=r[5].match(/\.(\w+)$/i)[1],P=m[M],m[M]=F?function(){return h[k].apply(this,arguments)}:function(){return this.parent=h[k],P.apply(this,arguments)},m[M].prototype[M]=m[M],N.each(h,function(W,q){m[M].prototype[q]=h[q]}),N.each(l,function(W,q){h[q]?m[M].prototype[q]=function(){return this.parent=h[q],W.apply(this,arguments)}:q!==M&&(m[M].prototype[q]=W)})),N.each(l.static,function(W,q){m[M][q]=W})}},walk:il,createNS:function(r,l){var c,h;for(l=l||Rt.window,r=r.split("."),c=0;c<r.length;c++)l[h=r[c]]||(l[h]={}),l=l[h];return l},resolve:function(r,l){var c,h;for(l=l||Rt.window,c=0,h=(r=r.split(".")).length;c<h&&(l=l[r[c]]);c++);return l},explode:function(r,l){return!r||Cu(r,"array")?r:wr.map(r.split(l||","),Su)},_addCacheSuffix:function(r){var l=sn.cacheSuffix;return l&&(r+=(-1===r.indexOf("?")?"?":"&")+l),r}},Ps=Rt.document,Fa=Array.prototype.push,Es=Array.prototype.slice,Xl=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Ir=qr.Event,Dl=ge.makeMap("children,contents,next,prev"),rl=function(r){return void 0!==r},Mu=function(r){return"string"==typeof r},id=function(r,l){var c,h,m;for(m=(l=l||Ps).createElement("div"),c=l.createDocumentFragment(),m.innerHTML=r;h=m.firstChild;)c.appendChild(h);return c},hs=function(r,l,c,h){var m;if(Mu(l))l=id(l,rc(r[0]));else if(l.length&&!l.nodeType){if(l=Bn.makeArray(l),h)for(m=l.length-1;0<=m;m--)hs(r,l[m],c,h);else for(m=0;m<l.length;m++)hs(r,l[m],c,h);return r}if(l.nodeType)for(m=r.length;m--;)c.call(r[m],l);return r},bh=function(r,l){return r&&l&&-1!==(" "+r.className+" ").indexOf(" "+l+" ")},Od=function(r,l,c){var h,m;return l=Bn(l)[0],r.each(function(){var M=this;c&&h===M.parentNode||(h=M.parentNode,m=l.cloneNode(!1),M.parentNode.insertBefore(m,M)),m.appendChild(M)}),r},wo=ge.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),fs=ge.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Bd={for:"htmlFor",class:"className",readonly:"readOnly"},gs={float:"cssFloat"},Do={},ji={},Bn=function(r,l){return new Bn.fn.init(r,l)},Tu=/^\s*|\s*$/g,Ns=function(r){return null==r?"":(""+r).replace(Tu,"")},Ao=function(r,l){var c,h,m,M;if(r)if(void 0===(c=r.length)){for(h in r)if(r.hasOwnProperty(h)&&!1===l.call(M=r[h],h,M))break}else for(m=0;m<c&&!1!==l.call(M=r[m],m,M);m++);return r},Rs=function(r,l){var c=[];return Ao(r,function(h,m){l(m,h)&&c.push(m)}),c},rc=function(r){return r?9===r.nodeType?r:r.ownerDocument:Ps};Bn.fn=Bn.prototype={constructor:Bn,selector:"",context:null,length:0,init:function(r,l){var c,h,m=this;if(!r)return m;if(r.nodeType)return m.context=m[0]=r,m.length=1,m;if(l&&l.nodeType)m.context=l;else{if(l)return Bn(r).attr(l);m.context=l=Rt.document}if(Mu(r)){if(!(c="<"===(m.selector=r).charAt(0)&&">"===r.charAt(r.length-1)&&3<=r.length?[null,r,null]:Xl.exec(r)))return Bn(l).find(r);if(c[1])for(h=id(r,rc(l)).firstChild;h;)Fa.call(m,h),h=h.nextSibling;else{if(!(h=rc(l).getElementById(c[2])))return m;if(h.id!==c[2])return m.find(r);m.length=1,m[0]=h}}else this.add(r,!1);return m},toArray:function(){return ge.toArray(this)},add:function(r,l){var c,h,m=this;if(Mu(r))return m.add(Bn(r));if(!1!==l)for(c=Bn.unique(m.toArray().concat(Bn.makeArray(r))),m.length=c.length,h=0;h<c.length;h++)m[h]=c[h];else Fa.apply(m,Bn.makeArray(r));return m},attr:function(r,l){var c,h=this;if("object"==typeof r)Ao(r,function(m,M){h.attr(m,M)});else{if(!rl(l)){if(h[0]&&1===h[0].nodeType){if((c=Do[r])&&c.get)return c.get(h[0],r);if(fs[r])return h.prop(r)?r:void 0;null===(l=h[0].getAttribute(r,2))&&(l=void 0)}return l}this.each(function(){var m;if(1===this.nodeType){if((m=Do[r])&&m.set)return void m.set(this,l);null===l?this.removeAttribute(r,2):this.setAttribute(r,l,2)}})}return h},removeAttr:function(r){return this.attr(r,null)},prop:function(r,l){var c=this;if("object"==typeof(r=Bd[r]||r))Ao(r,function(h,m){c.prop(h,m)});else{if(!rl(l))return c[0]&&c[0].nodeType&&r in c[0]?c[0][r]:l;this.each(function(){1===this.nodeType&&(this[r]=l)})}return c},css:function(r,l){var c,h,m=this,M=function(P){return P.replace(/-(\D)/g,function(N,F){return F.toUpperCase()})},k=function(P){return P.replace(/[A-Z]/g,function(N){return"-"+N})};if("object"==typeof r)Ao(r,function(P,N){m.css(P,N)});else if(rl(l))r=M(r),"number"!=typeof l||wo[r]||(l=l.toString()+"px"),m.each(function(){var P=this.style;if((h=ji[r])&&h.set)h.set(this,l);else{try{this.style[gs[r]||r]=l}catch(N){}null!==l&&""!==l||(P.removeProperty?P.removeProperty(k(r)):P.removeAttribute(r))}});else{if(c=m[0],(h=ji[r])&&h.get)return h.get(c);if(!c.ownerDocument.defaultView)return c.currentStyle?c.currentStyle[M(r)]:"";try{return c.ownerDocument.defaultView.getComputedStyle(c,null).getPropertyValue(k(r))}catch(P){return}}return m},remove:function(){for(var r,l=this.length;l--;)Ir.clean(r=this[l]),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var r,l=this.length;l--;)for(r=this[l];r.firstChild;)r.removeChild(r.firstChild);return this},html:function(r){var l,c=this;if(rl(r)){l=c.length;try{for(;l--;)c[l].innerHTML=r}catch(h){Bn(c[l]).empty().append(r)}return c}return c[0]?c[0].innerHTML:""},text:function(r){var l,c=this;if(rl(r)){for(l=c.length;l--;)"innerText"in c[l]?c[l].innerText=r:c[0].textContent=r;return c}return c[0]?c[0].innerText||c[0].textContent:""},append:function(){return hs(this,arguments,function(r){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(r)})},prepend:function(){return hs(this,arguments,function(r){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(r,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?hs(this,arguments,function(r){this.parentNode.insertBefore(r,this)}):this},after:function(){return this[0]&&this[0].parentNode?hs(this,arguments,function(r){this.parentNode.insertBefore(r,this.nextSibling)},!0):this},appendTo:function(r){return Bn(r).append(this),this},prependTo:function(r){return Bn(r).prepend(this),this},replaceWith:function(r){return this.before(r).remove()},wrap:function(r){return Od(this,r)},wrapAll:function(r){return Od(this,r,!0)},wrapInner:function(r){return this.each(function(){Bn(this).contents().wrapAll(r)}),this},unwrap:function(){return this.parent().each(function(){Bn(this).replaceWith(this.childNodes)})},clone:function(){var r=[];return this.each(function(){r.push(this.cloneNode(!0))}),Bn(r)},addClass:function(r){return this.toggleClass(r,!0)},removeClass:function(r){return this.toggleClass(r,!1)},toggleClass:function(r,l){var c=this;return"string"!=typeof r||(-1!==r.indexOf(" ")?Ao(r.split(" "),function(){c.toggleClass(this,l)}):c.each(function(h,m){var M,k;(k=bh(m,r))!==l&&(M=m.className,k?m.className=Ns((" "+M+" ").replace(" "+r+" "," ")):m.className+=M?" "+r:r)})),c},hasClass:function(r){return bh(this[0],r)},each:function(r){return Ao(this,r)},on:function(r,l){return this.each(function(){Ir.bind(this,r,l)})},off:function(r,l){return this.each(function(){Ir.unbind(this,r,l)})},trigger:function(r){return this.each(function(){"object"==typeof r?Ir.fire(this,r.type,r):Ir.fire(this,r)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new Bn(Es.apply(this,arguments))},eq:function(r){return-1===r?this.slice(r):this.slice(r,+r+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(r){var l,c,h=[];for(l=0,c=this.length;l<c;l++)Bn.find(r,this[l],h);return Bn(h)},filter:function(r){return Bn("function"==typeof r?Rs(this.toArray(),function(l,c){return r(c,l)}):Bn.filter(r,this.toArray()))},closest:function(r){var l=[];return r instanceof Bn&&(r=r[0]),this.each(function(c,h){for(;h;){if("string"==typeof r&&Bn(h).is(r)){l.push(h);break}if(h===r){l.push(h);break}h=h.parentNode}}),Bn(l)},offset:function(r){var l,c,h,m,M=0,k=0;return r?this.css(r):((l=this[0])&&(h=(c=l.ownerDocument).documentElement,l.getBoundingClientRect&&(M=(m=l.getBoundingClientRect()).left+(h.scrollLeft||c.body.scrollLeft)-h.clientLeft,k=m.top+(h.scrollTop||c.body.scrollTop)-h.clientTop)),{left:M,top:k})},push:Fa,sort:[].sort,splice:[].splice},ge.extend(Bn,{extend:ge.extend,makeArray:function(r){return(l=r)&&l===l.window||r.nodeType?[r]:ge.toArray(r);var l},inArray:function(r,l){var c;if(l.indexOf)return l.indexOf(r);for(c=l.length;c--;)if(l[c]===r)return c;return-1},isArray:ge.isArray,each:Ao,trim:Ns,grep:Rs,find:Hi,expr:Hi.selectors,unique:Hi.uniqueSort,text:Hi.getText,contains:Hi.contains,filter:function(r,l,c){var h=l.length;for(c&&(r=":not("+r+")");h--;)1!==l[h].nodeType&&l.splice(h,1);return 1===l.length?Bn.find.matchesSelector(l[0],r)?[l[0]]:[]:Bn.find.matches(r,l)}});var ps=function(r,l,c){var h=[],m=r[l];for("string"!=typeof c&&c instanceof Bn&&(c=c[0]);m&&9!==m.nodeType&&(void 0===c||!(m===c||"string"==typeof c&&Bn(m).is(c)));)1===m.nodeType&&h.push(m),m=m[l];return h},Ha=function(r,l,c,h){var m=[];for(h instanceof Bn&&(h=h[0]);r;r=r[l])if(!c||r.nodeType===c){if(void 0!==h&&(r===h||"string"==typeof h&&Bn(r).is(h)))break;m.push(r)}return m},Qa=function(r,l,c){for(r=r[l];r;r=r[l])if(r.nodeType===c)return r;return null};Ao({parent:function(r){var l=r.parentNode;return l&&11!==l.nodeType?l:null},parents:function(r){return ps(r,"parentNode")},next:function(r){return Qa(r,"nextSibling",1)},prev:function(r){return Qa(r,"previousSibling",1)},children:function(r){return Ha(r.firstChild,"nextSibling",1)},contents:function(r){return ge.toArray(("iframe"===r.nodeName?r.contentDocument||r.contentWindow.document:r).childNodes)}},function(r,l){Bn.fn[r]=function(c){var h=[];return this.each(function(){var m=l.call(h,this,c,h);m&&(Bn.isArray(m)?h.push.apply(h,m):h.push(m))}),1<this.length&&(Dl[r]||(h=Bn.unique(h)),0===r.indexOf("parents")&&(h=h.reverse())),h=Bn(h),c?h.filter(c):h}}),Ao({parentsUntil:function(r,l){return ps(r,"parentNode",l)},nextUntil:function(r,l){return Ha(r,"nextSibling",1,l).slice(1)},prevUntil:function(r,l){return Ha(r,"previousSibling",1,l).slice(1)}},function(r,l){Bn.fn[r]=function(c,h){var m=[];return this.each(function(){var M=l.call(m,this,c,m);M&&(Bn.isArray(M)?m.push.apply(m,M):m.push(M))}),1<this.length&&(m=Bn.unique(m),0!==r.indexOf("parents")&&"prevUntil"!==r||(m=m.reverse())),m=Bn(m),h?m.filter(h):m}}),Bn.fn.is=function(r){return!!r&&0<this.filter(r).length},Bn.fn.init.prototype=Bn.fn,Bn.overrideDefaults=function(r){var l,c=function(h,m){return l=l||r(),0===arguments.length&&(h=l.element),m||(m=l.context),new c.fn.init(h,m)};return Bn.extend(c,this),c};var Oo=function(r,l,c){Ao(c,function(h,m){r[h]=r[h]||{},r[h][l]=m})};sn.ie&&sn.ie<8&&(Oo(Do,"get",{maxlength:function(r){var l=r.maxLength;return 2147483647===l?void 0:l},size:function(r){var l=r.size;return 20===l?void 0:l},class:function(r){return r.className},style:function(r){var l=r.style.cssText;return 0===l.length?void 0:l}}),Oo(Do,"set",{class:function(r,l){r.className=l},style:function(r,l){r.style.cssText=l}})),sn.ie&&sn.ie<9&&(gs.float="styleFloat",Oo(ji,"set",{opacity:function(r,l){var c=r.style;null===l||""===l?c.removeAttribute("filter"):(c.zoom=1,c.filter="alpha(opacity="+100*l+")")}})),Bn.attrHooks=Do,Bn.cssHooks=ji;var ts,Ls,$l,Kl,Yi,oc=function(){return Du(0,0)},Du=function(r,l){return{major:r,minor:l}},ac_detect=function(r,l){var c=String(l).toLowerCase();return 0===r.length?oc():function(r,l){var c=function(m,M){for(var k=0;k<m.length;k++){var P=m[k];if(P.test(M))return P}}(r,l);if(!c)return{major:0,minor:0};var h=function(m){return Number(l.replace(c,"$"+m))};return Du(h(1),h(2))}(r,c)},ac_unknown=oc,Nc="Firefox",ko=function(r,l){return function(){return l===r}},Au=function(r){var l=r.current;return{current:l,version:r.version,isEdge:ko("Edge",l),isChrome:ko("Chrome",l),isIE:ko("IE",l),isOpera:ko("Opera",l),isFirefox:ko(Nc,l),isSafari:ko("Safari",l)}},ms_unknown=function(){return Au({current:void 0,version:ac_unknown()})},ms_nu=Au,ku=(Oe("Edge"),Oe("Chrome"),Oe("IE"),Oe("Opera"),Oe(Nc),Oe("Safari"),"Windows"),zd="Android",Fd="Solaris",od="FreeBSD",Pa=function(r,l){return function(){return l===r}},ad=function(r){var l=r.current;return{current:l,version:r.version,isWindows:Pa(ku,l),isiOS:Pa("iOS",l),isAndroid:Pa(zd,l),isOSX:Pa("OSX",l),isLinux:Pa("Linux",l),isSolaris:Pa(Fd,l),isFreeBSD:Pa(od,l)}},Os_unknown=function(){return ad({current:void 0,version:ac_unknown()})},Os_nu=ad,vs=(Oe(ku),Oe("iOS"),Oe(zd),Oe("Linux"),Oe("OSX"),Oe(Fd),Oe(od),function(r,l){var c=String(l).toLowerCase();return Zn(r,function(h){return h.search(c)})}),Jo=function(r,l){return-1!==r.indexOf(l)},Hd=function(r){return r.replace(/^\s+|\s+$/g,"")},sc=function(r){return r.replace(/\s+$/g,"")},Iu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Al=function(r){return function(l){return Jo(l,r)}},_h=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(r){return Jo(r,"edge/")&&Jo(r,"chrome")&&Jo(r,"safari")&&Jo(r,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Iu],search:function(r){return Jo(r,"chrome")&&!Jo(r,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(r){return Jo(r,"msie")||Jo(r,"trident")}},{name:"Opera",versionRegexes:[Iu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Al("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Al("firefox")},{name:"Safari",versionRegexes:[Iu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(r){return(Jo(r,"safari")||Jo(r,"mobile/"))&&Jo(r,"applewebkit")}}],Jl=[{name:"Windows",search:Al("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(r){return Jo(r,"iphone")||Jo(r,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Al("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Al("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Al("linux"),versionRegexes:[]},{name:"Solaris",search:Al("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Al("freebsd"),versionRegexes:[]}],sd={browsers:Oe(_h),oses:Oe(Jl)},ys={detect:(ts=function(){return r=Rt.navigator.userAgent,Z=sd.browsers(),ht=sd.oses(),at=function(r,l){return vs(r,l).map(function(c){var h=ac_detect(c.versionRegexes,l);return{current:c.name,version:h}})}(Z,r).fold(ms_unknown,ms_nu),gt=function(r,l){return vs(r,l).map(function(c){var h=ac_detect(c.versionRegexes,l);return{current:c.name,version:h}})}(ht,r).fold(Os_unknown,Os_nu),{browser:at,os:gt,deviceType:(c=at,h=r,m=(l=gt).isiOS()&&!0===/ipad/i.test(h),M=l.isiOS()&&!m,k=l.isAndroid()&&3===l.version.major,P=l.isAndroid()&&4===l.version.major,N=m||k||P&&!0===/mobile/i.test(h),F=l.isiOS()||l.isAndroid(),W=F&&!N,q=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(h),{isiPad:Oe(m),isiPhone:Oe(M),isTablet:Oe(N),isPhone:Oe(W),isTouch:Oe(F),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Oe(q)})};var r,l,c,h,m,M,k,P,N,F,W,q,Z,ht,at,gt},$l=!1,function(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];return $l||($l=!0,Ls=ts.apply(null,r)),Ls})},Bs=function(r){if(null==r)throw new Error("Node cannot be null or undefined");return{dom:Oe(r)}},Ce_fromHtml=function(r,l){var c=(l||Rt.document).createElement("div");if(c.innerHTML=r,!c.hasChildNodes()||1<c.childNodes.length)throw Rt.console.error("HTML does not have a single root node",r),new Error("HTML must have a single root node");return Bs(c.childNodes[0])},Ce_fromTag=function(r,l){var c=(l||Rt.document).createElement(r);return Bs(c)},Ce_fromText=function(r,l){var c=(l||Rt.document).createTextNode(r);return Bs(c)},Ce_fromDom=Bs,lc=Rt.Node.DOCUMENT_NODE,ol=Rt.Node.ELEMENT_NODE,kl=Rt.Node.TEXT_NODE,la=function(r){return r.dom().nodeName.toLowerCase()},uc=function(r){return function(l){return l.dom().nodeType===r}},es=uc(ol),Il=uc(kl),Qo=Object.keys,al=Object.hasOwnProperty,Pu=function(r,l){for(var c=Qo(r),h=0,m=c.length;h<m;h++){var M=c[h];l(r[M],M)}},ud=function(r,l){var c={},h={};return Pu(r,function(m,M){(l(m,M)?c:h)[M]=m}),{t:c,f:h}},Rc=function(r,l){return al.call(r,l)},zs=function(r){return void 0!==r.style&&Ui(r.style.getPropertyValue)},sl=function(r,l,c){if(!(Mn(c)||Fe(c)||bi(c)))throw Rt.console.error("Invalid call to Attr.set. Key ",l,":: Value ",c,":: Element ",r),new Error("Attribute value was not simple");r.setAttribute(l,c+"")},Va=function(r,l,c){sl(r.dom(),l,c)},ns=function(r,l){var c=r.dom();Pu(l,function(h,m){sl(c,m,h)})},Pl=function(r,l){var c=r.dom().getAttribute(l);return null===c?void 0:c},Ql=function(r,l){r.dom().removeAttribute(l)},cc=function(r,l){var c,h,m=r.dom(),M=Rt.window.getComputedStyle(m).getPropertyValue(l),k=""!==M||void 0!==(h=Il(c=r)?c.dom().parentNode:c.dom())&&null!==h&&h.ownerDocument.body.contains(h)?M:cd(m,l);return null===k?void 0:k},cd=function(r,l){return zs(r)?r.style.getPropertyValue(l):""},Io=function(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];return function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];if(r.length!==c.length)throw new Error('Wrong number of arguments to struct. Expected "['+r.length+']", got '+c.length+" arguments");var m={};return Ke(r,function(M,k){m[M]=Oe(c[k])}),m}},ua=function(r,l){for(var c=[],h=function(M){return c.push(M),l(M)},m=l(r);(m=m.bind(h)).isSome(););return c},eu=ol,Nu=lc,Ru=function(r,l){var c=r.dom();if(c.nodeType!==eu)return!1;var h=c;if(void 0!==h.matches)return h.matches(l);if(void 0!==h.msMatchesSelector)return h.msMatchesSelector(l);if(void 0!==h.webkitMatchesSelector)return h.webkitMatchesSelector(l);if(void 0!==h.mozMatchesSelector)return h.mozMatchesSelector(l);throw new Error("Browser lacks native selectors")},nu=function(r){return r.nodeType!==eu&&r.nodeType!==Nu||0===r.childElementCount},jr=function(r,l){return r.dom()===l.dom()},xs=ys.detect().browser.isIE()?function(r,l){return function(r,l){return function(r,l,c){return 0!=(r.compareDocumentPosition(l)&c)}(r,l,Xe_getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY)}(r.dom(),l.dom())}:function(r,l){var c=r.dom(),h=l.dom();return c!==h&&c.contains(h)},Fs=function(r){return Ce_fromDom(r.dom().ownerDocument)},ll=function(r){return Ce_fromDom(r.dom().ownerDocument.defaultView)},ul=function(r){return kt.from(r.dom().parentNode).map(Ce_fromDom)},va=function(r){return kt.from(r.dom().previousSibling).map(Ce_fromDom)},qo=function(r){return kt.from(r.dom().nextSibling).map(Ce_fromDom)},dd=function(r){return l=ua(r,va),(c=Ln.call(l,0)).reverse(),c;var l,c},Lc=function(r){return ua(r,qo)},bs=function(r){return _i(r.dom().childNodes,Ce_fromDom)},hc=function(r,l){var c=r.dom().childNodes;return kt.from(c[l]).map(Ce_fromDom)},iu=function(r){return hc(r,0)},fc=function(r){return hc(r,r.dom().childNodes.length-1)},Bo=(Io("element","offset"),ys.detect().browser),ya=function(r){return Zn(r,es)},Yo={},ru={exports:Yo};Kl=Yo,Yi=ru,function(r){"object"==typeof Kl&&void 0!==Yi?Yi.exports=r():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=r()}(function(){return function r(l,c,h){function m(P,N){if(!c[P]){if(!l[P]){if(M)return M(P,!0);var W=new Error("Cannot find module '"+P+"'");throw W.code="MODULE_NOT_FOUND",W}var q=c[P]={exports:{}};l[P][0].call(q.exports,function(Z){return m(l[P][1][Z]||Z)},q,q.exports,r,l,c,h)}return c[P].exports}for(var M=!1,k=0;k<h.length;k++)m(h[k]);return m}({1:[function(r,l,c){var h,m,M=l.exports={};function k(){throw new Error("setTimeout has not been defined")}function P(){throw new Error("clearTimeout has not been defined")}function N(dt){if(h===setTimeout)return setTimeout(dt,0);if((h===k||!h)&&setTimeout)return h=setTimeout,setTimeout(dt,0);try{return h(dt,0)}catch(mt){try{return h.call(null,dt,0)}catch(Dt){return h.call(this,dt,0)}}}!function(){try{h="function"==typeof setTimeout?setTimeout:k}catch(dt){h=k}try{m="function"==typeof clearTimeout?clearTimeout:P}catch(dt){m=P}}();var F,W=[],q=!1,Z=-1;function ht(){q&&F&&(q=!1,F.length?W=F.concat(W):Z=-1,W.length&&at())}function at(){if(!q){var dt=N(ht);q=!0;for(var mt=W.length;mt;){for(F=W,W=[];++Z<mt;)F&&F[Z].run();Z=-1,mt=W.length}F=null,q=!1,function(Dt){if(m===clearTimeout)return clearTimeout(Dt);if((m===P||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(Dt);try{m(Dt)}catch(Pt){try{return m.call(null,Dt)}catch(wt){return m.call(this,Dt)}}}(dt)}}function gt(dt,mt){this.fun=dt,this.array=mt}function rt(){}M.nextTick=function(dt){var mt=new Array(arguments.length-1);if(1<arguments.length)for(var Dt=1;Dt<arguments.length;Dt++)mt[Dt-1]=arguments[Dt];W.push(new gt(dt,mt)),1!==W.length||q||N(at)},gt.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=rt,M.addListener=rt,M.once=rt,M.off=rt,M.removeListener=rt,M.removeAllListeners=rt,M.emit=rt,M.prependListener=rt,M.prependOnceListener=rt,M.listeners=function(dt){return[]},M.binding=function(dt){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(dt){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},{}],2:[function(r,l,c){(function(h){!function(m){var M=setTimeout;function k(){}function P(at){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof at)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ht(at,this)}function N(at,gt){for(;3===at._state;)at=at._value;0!==at._state?(at._handled=!0,P._immediateFn(function(){var rt=1===at._state?gt.onFulfilled:gt.onRejected;if(null!==rt){var dt;try{dt=rt(at._value)}catch(mt){return void W(gt.promise,mt)}F(gt.promise,dt)}else(1===at._state?F:W)(gt.promise,at._value)})):at._deferreds.push(gt)}function F(at,gt){try{if(gt===at)throw new TypeError("A promise cannot be resolved with itself.");if(gt&&("object"==typeof gt||"function"==typeof gt)){var rt=gt.then;if(gt instanceof P)return at._state=3,at._value=gt,void q(at);if("function"==typeof rt)return void ht((dt=rt,mt=gt,function(){dt.apply(mt,arguments)}),at)}at._state=1,at._value=gt,q(at)}catch(Dt){W(at,Dt)}var dt,mt}function W(at,gt){at._state=2,at._value=gt,q(at)}function q(at){2===at._state&&0===at._deferreds.length&&P._immediateFn(function(){at._handled||P._unhandledRejectionFn(at._value)});for(var gt=0,rt=at._deferreds.length;gt<rt;gt++)N(at,at._deferreds[gt]);at._deferreds=null}function Z(at,gt,rt){this.onFulfilled="function"==typeof at?at:null,this.onRejected="function"==typeof gt?gt:null,this.promise=rt}function ht(at,gt){var rt=!1;try{at(function(dt){rt||(rt=!0,F(gt,dt))},function(dt){rt||(rt=!0,W(gt,dt))})}catch(dt){if(rt)return;rt=!0,W(gt,dt)}}P.prototype.catch=function(at){return this.then(null,at)},P.prototype.then=function(at,gt){var rt=new this.constructor(k);return N(this,new Z(at,gt,rt)),rt},P.all=function(at){var gt=Array.prototype.slice.call(at);return new P(function(rt,dt){if(0===gt.length)return rt([]);var mt=gt.length;function Dt(wt,Ht){try{if(Ht&&("object"==typeof Ht||"function"==typeof Ht)){var ce=Ht.then;if("function"==typeof ce)return void ce.call(Ht,function(Xt){Dt(wt,Xt)},dt)}gt[wt]=Ht,0==--mt&&rt(gt)}catch(Xt){dt(Xt)}}for(var Pt=0;Pt<gt.length;Pt++)Dt(Pt,gt[Pt])})},P.resolve=function(at){return at&&"object"==typeof at&&at.constructor===P?at:new P(function(gt){gt(at)})},P.reject=function(at){return new P(function(gt,rt){rt(at)})},P.race=function(at){return new P(function(gt,rt){for(var dt=0,mt=at.length;dt<mt;dt++)at[dt].then(gt,rt)})},P._immediateFn="function"==typeof h?function(at){h(at)}:function(at){M(at,0)},P._unhandledRejectionFn=function(at){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",at)},P._setImmediateFn=function(at){P._immediateFn=at},P._setUnhandledRejectionFn=function(at){P._unhandledRejectionFn=at},void 0!==l&&l.exports?l.exports=P:m.Promise||(m.Promise=P)}(this)}).call(this,r("timers").setImmediate)},{timers:3}],3:[function(r,l,c){(function(h,m){var M=r("process/browser.js").nextTick,k=Function.prototype.apply,P=Array.prototype.slice,N={},F=0;function W(q,Z){this._id=q,this._clearFn=Z}c.setTimeout=function(){return new W(k.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new W(k.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(q){q.close()},W.prototype.unref=W.prototype.ref=function(){},W.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(q,Z){clearTimeout(q._idleTimeoutId),q._idleTimeout=Z},c.unenroll=function(q){clearTimeout(q._idleTimeoutId),q._idleTimeout=-1},c._unrefActive=c.active=function(q){clearTimeout(q._idleTimeoutId);var Z=q._idleTimeout;0<=Z&&(q._idleTimeoutId=setTimeout(function(){q._onTimeout&&q._onTimeout()},Z))},c.setImmediate="function"==typeof h?h:function(q){var Z=F++,ht=!(arguments.length<2)&&P.call(arguments,1);return N[Z]=!0,M(function(){N[Z]&&(ht?q.apply(null,ht):q.call(null),c.clearImmediate(Z))}),Z},c.clearImmediate="function"==typeof m?m:function(q){delete N[q]}}).call(this,r("timers").setImmediate,r("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(r,l,c){var h=r("promise-polyfill"),m="undefined"!=typeof window?window:Function("return this;")();l.exports={boltExport:m.Promise||h}},{"promise-polyfill":2}]},{},[4])(4)});var cl=ru.exports.boltExport,Oc=function(r){var l=kt.none(),c=[],h=function(P){m()?k(P):c.push(P)},m=function(){return l.isSome()},k=function(P){l.each(function(N){Rt.setTimeout(function(){P(N)},0)})};return r(function(P){l=kt.some(P),function(P){Ke(P,k)}(c),c=[]}),{get:h,map:function(P){return Oc(function(N){h(function(F){N(P(F))})})},isReady:m}},Vd={nu:Oc,pure:function(r){return Oc(function(l){l(r)})}},Bc=function(r){Rt.setTimeout(function(){throw r},0)},ou=function(r){var l=function(c){r().then(c,Bc)};return{map:function(c){return ou(function(){return r().then(c)})},bind:function(c){return ou(function(){return r().then(function(h){return c(h).toPromise()})})},anonBind:function(c){return ou(function(){return r().then(function(){return c.toPromise()})})},toLazy:function(){return Vd.nu(l)},toCached:function(){var c=null;return ou(function(){return null===c&&(c=r()),c})},toPromise:r,get:l}},hd_nu=function(r){return ou(function(){return new cl(r)})},_s=function(r){return{is:function(l){return r===l},isValue:ki,isError:zn,getOr:Oe(r),getOrThunk:Oe(r),getOrDie:Oe(r),or:function(l){return _s(r)},orThunk:function(l){return _s(r)},fold:function(l,c){return c(r)},map:function(l){return _s(l(r))},mapError:function(l){return _s(r)},each:function(l){l(r)},bind:function(l){return l(r)},exists:function(l){return l(r)},forall:function(l){return l(r)},toOption:function(){return kt.some(r)}}},El=function(r){return{is:zn,isValue:zn,isError:ki,getOr:se,getOrThunk:function(l){return l()},getOrDie:function(){return l=String(r),function(){throw new Error(l)}();var l},or:function(l){return l},orThunk:function(l){return l()},fold:function(l,c){return l(r)},map:function(l){return El(r)},mapError:function(l){return El(l(r))},each:pi,bind:function(l){return El(r)},exists:zn,forall:ki,toOption:kt.none}},pd={value:_s,error:El,fromOption:function(r,l){return r.fold(function(){return El(l)},_s)}};function Zi(r,l){var c=r,h=function(m,M,k,P){var N,F;if(m){if(!P&&m[M])return m[M];if(m!==l){if(N=m[k])return N;for(F=m.parentNode;F&&F!==l;F=F.parentNode)if(N=F[k])return N}}};this.current=function(){return c},this.next=function(m){return c=h(c,"firstChild","nextSibling",m)},this.prev=function(m){return c=h(c,"lastChild","previousSibling",m)},this.prev2=function(m){return c=function(M,k,P,N){var F,W,q;if(M){if(F=M.previousSibling,l&&F===l)return;if(F){if(!N)for(q=F[k];q;q=q[k])if(!q[k])return q;return F}if((W=M.parentNode)&&W!==l)return W}}(c,"lastChild",0,m)}}var au,xa,dl,Eo=function(r){var l;return function(c){return(l=l||function(h,m){for(var M={},k=0,P=h.length;k<P;k++){var N=h[k];M[String(N)]=m(N,k)}return M}(r,Oe(!0))).hasOwnProperty(la(c))}},hl=Eo(["h1","h2","h3","h4","h5","h6"]),Hs=Eo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Lu=function(r){return es(r)&&!Hs(r)},v=function(r){return es(r)&&"br"===la(r)},T=Eo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),B=Eo(["ul","ol","dl"]),U=Eo(["li","dd","dt"]),et=Eo(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),ot=Eo(["thead","tbody","tfoot"]),xt=Eo(["td","th"]),Tt=Eo(["pre","script","textarea","style"]),Et=function(r){return function(l){return!!l&&l.nodeType===r}},Ut=Et(1),le=function(r){var l=r.toLowerCase().split(" ");return function(c){var h,m;if(c&&c.nodeType)for(m=c.nodeName.toLowerCase(),h=0;h<l.length;h++)if(m===l[h])return!0;return!1}},qt=function(r){return function(l){return!(!Ut(l)||l.contentEditable!==r&&l.getAttribute("data-mce-contenteditable")!==r)}},re=Et(3),we=Et(8),Me=Et(9),ci=Et(11),ii=le("br"),di=qt("true"),Vi=qt("false"),Lt={isText:re,isElement:Ut,isComment:we,isDocument:Me,isDocumentFragment:ci,isBr:ii,isContentEditableTrue:di,isContentEditableFalse:Vi,isRestrictedNode:function(r){return!!r&&!Object.getPrototypeOf(r)},matchNodeNames:le,hasPropValue:function(r,l){return function(c){return Ut(c)&&c[r]===l}},hasAttribute:function(r,l){return function(c){return Ut(c)&&c.hasAttribute(r)}},hasAttributeValue:function(r,l){return function(c){return Ut(c)&&c.getAttribute(r)===l}},matchStyleValues:function(r,l){var c=l.toLowerCase().split(" ");return function(h){var m;if(Ut(h))for(m=0;m<c.length;m++){var M=h.ownerDocument.defaultView.getComputedStyle(h,null);if((M?M.getPropertyValue(r):null)===c[m])return!0}return!1}},isBogus:function(r){return Ut(r)&&r.hasAttribute("data-mce-bogus")},isBogusAll:function(r){return Ut(r)&&"all"===r.getAttribute("data-mce-bogus")},isTable:function(r){return Ut(r)&&"TABLE"===r.tagName}},An=function(r){return r&&"SPAN"===r.tagName&&"bookmark"===r.getAttribute("data-mce-type")},Ti=function(r,l){var c,h=l.childNodes;if(!Lt.isElement(l)||!An(l)){for(c=h.length-1;0<=c;c--)Ti(r,h[c]);if(!1===Lt.isDocument(l)){if(Lt.isText(l)&&0<l.nodeValue.length){var m=ge.trim(l.nodeValue).length;if(r.isBlock(l.parentNode)||0<m||0===m&&(M=l).previousSibling&&"SPAN"===M.previousSibling.nodeName&&M.nextSibling&&"SPAN"===M.nextSibling.nodeName)return}else if(Lt.isElement(l)&&(1===(h=l.childNodes).length&&An(h[0])&&l.parentNode.insertBefore(h[0],l),h.length||et(Ce_fromDom(l))))return;r.remove(l)}var M;return l}},Ki={trimNode:Ti},xr=ge.makeMap,So=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/[<>&\"\']/g,Wa=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ta={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};xa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},dl={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Or=function(r,l){var c,h,m,M={};if(r){for(r=r.split(","),l=l||10,c=0;c<r.length;c+=2)h=String.fromCharCode(parseInt(r[c],l)),xa[h]||(M[h]=m="&"+r[c+1]+";",M[m]=h);return M}};au=Or("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var ba=function(r,l){return r.replace(l?So:Xo,function(c){return xa[c]||c})},ws=function(r,l){return r.replace(l?So:Xo,function(c){return 1<c.length?"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";":xa[c]||"&#"+c.charCodeAt(0)+";"})},ja=function(r,l,c){return c=c||au,r.replace(l?So:Xo,function(h){return xa[h]||c[h]||h})},to={encodeRaw:ba,encodeAllRaw:function(r){return(""+r).replace(or,function(l){return xa[l]||l})},encodeNumeric:ws,encodeNamed:ja,getEncodeFunc:function(r,l){var c=Or(l)||au,h=xr(r.replace(/\+/g,","));return h.named&&h.numeric?function(m,M){return m.replace(M?So:Xo,function(k){return void 0!==xa[k]?xa[k]:void 0!==c[k]?c[k]:1<k.length?"&#"+(1024*(k.charCodeAt(0)-55296)+(k.charCodeAt(1)-56320)+65536)+";":"&#"+k.charCodeAt(0)+";"})}:h.named?l?function(m,M){return ja(m,M,c)}:ja:h.numeric?ws:ba},decode:function(r){return r.replace(Wa,function(l,c){return c?65535<(c="x"===c.charAt(0).toLowerCase()?parseInt(c.substr(1),16):parseInt(c,10))?(c-=65536,String.fromCharCode(55296+(c>>10),56320+(1023&c))):ta[c]||String.fromCharCode(c):dl[l]||au[l]||(h=l,(m=Ce_fromTag("div").dom()).innerHTML=h,m.textContent||m.innerText||h);var h,m})}},si={},ca={},Vs=ge.makeMap,zo=ge.each,is=ge.extend,zc=ge.explode,Wd=ge.inArray,Hr=function(r,l){return(r=ge.trim(r))?r.split(l||" "):[]},Ws=function(r,l){var c;return r&&(c={},"string"==typeof r&&(r={"*":r}),zo(r,function(h,m){c[m]=c[m.toUpperCase()]="map"===l?Vs(h,/[, ]/):zc(h,/[, ]/)})),c};function su(r){var l,c,h,m,M,k,P,N,F,W,q,Z,ht,at={},gt={},rt=[],dt={},mt={},Dt=function(te,Ee,be){var Ne=r[te];return Ne?Ne=Vs(Ne,/[, ]/,Vs(Ne.toUpperCase(),/[, ]/)):(Ne=si[te])||(Ne=Vs(Ee," ",Vs(Ee.toUpperCase()," ")),Ne=is(Ne,be),si[te]=Ne),Ne};h=function(r){var l,c,h,m,M,k,P={},N=function(W,q,Z){var ht,at,gt,rt=function(dt,mt){var Dt,Pt,wt={};for(Dt=0,Pt=dt.length;Dt<Pt;Dt++)wt[dt[Dt]]=mt||{};return wt};for(q=q||"","string"==typeof(Z=Z||[])&&(Z=Hr(Z)),ht=(W=Hr(W)).length;ht--;)gt={attributes:rt(at=Hr([l,q].join(" "))),attributesOrder:at,children:rt(Z,ca)},P[W[ht]]=gt},F=function(W,q){var Z,ht,at,gt;for(Z=(W=Hr(W)).length,q=Hr(q);Z--;)for(ht=P[W[Z]],at=0,gt=q.length;at<gt;at++)ht.attributes[q[at]]={},ht.attributesOrder.push(q[at])};return si[r]?si[r]:(l="id accesskey class dir lang style tabindex title role",c="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",h="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==r&&(l+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",c+=" article aside details dialog figure main header footer hgroup section nav",h+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==r&&(l+=" xml:lang",h=[h,k="acronym applet basefont big font strike tt"].join(" "),zo(Hr(k),function(W){N(W,"",h)}),c=[c,M="center dir isindex noframes"].join(" "),m=[c,h].join(" "),zo(Hr(M),function(W){N(W,"",m)})),m=m||[c,h].join(" "),N("html","manifest","head body"),N("head","","base command link meta noscript script style title"),N("title hr noscript br"),N("base","href target"),N("link","href rel media hreflang type sizes hreflang"),N("meta","name http-equiv content charset"),N("style","media type scoped"),N("script","src async defer type charset"),N("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",m),N("address dt dd div caption","",m),N("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",h),N("blockquote","cite",m),N("ol","reversed start type","li"),N("ul","","li"),N("li","value",m),N("dl","","dt dd"),N("a","href target rel media hreflang type",h),N("q","cite",h),N("ins del","cite datetime",m),N("img","src sizes srcset alt usemap ismap width height"),N("iframe","src name width height",m),N("embed","src type width height"),N("object","data type typemustmatch name usemap form width height",[m,"param"].join(" ")),N("param","name value"),N("map","name",[m,"area"].join(" ")),N("area","alt coords shape href target rel media hreflang type"),N("table","border","caption colgroup thead tfoot tbody tr"+("html4"===r?" col":"")),N("colgroup","span","col"),N("col","span"),N("tbody thead tfoot","","tr"),N("tr","","td th"),N("td","colspan rowspan headers",m),N("th","colspan rowspan headers scope abbr",m),N("form","accept-charset action autocomplete enctype method name novalidate target",m),N("fieldset","disabled form name",[m,"legend"].join(" ")),N("label","form for",h),N("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),N("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===r?m:h),N("select","disabled form multiple name required size","option optgroup"),N("optgroup","disabled label","option"),N("option","disabled label selected value"),N("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),N("menu","type label",[m,"li"].join(" ")),N("noscript","",m),"html4"!==r&&(N("wbr"),N("ruby","",[h,"rt rp"].join(" ")),N("figcaption","",m),N("mark rt rp summary bdi","",h),N("canvas","width height",m),N("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[m,"track source"].join(" ")),N("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[m,"track source"].join(" ")),N("picture","","img source"),N("source","src srcset type media sizes"),N("track","kind src srclang label default"),N("datalist","",[h,"option"].join(" ")),N("article section nav aside main header footer","",m),N("hgroup","","h1 h2 h3 h4 h5 h6"),N("figure","",[m,"figcaption"].join(" ")),N("time","datetime",h),N("dialog","open",m),N("command","type label icon disabled checked radiogroup command"),N("output","for form name",h),N("progress","value max",h),N("meter","value min max low high optimum",h),N("details","open",[m,"summary"].join(" ")),N("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==r&&(F("script","language xml:space"),F("style","xml:space"),F("object","declare classid code codebase codetype archive standby align border hspace vspace"),F("embed","align name hspace vspace"),F("param","valuetype type"),F("a","charset name rev shape coords"),F("br","clear"),F("applet","codebase archive code object alt name width height align hspace vspace"),F("img","name longdesc align border hspace vspace"),F("iframe","longdesc frameborder marginwidth marginheight scrolling align"),F("font basefont","size color face"),F("input","usemap align"),F("select","onchange"),F("textarea"),F("h1 h2 h3 h4 h5 h6 div p legend caption","align"),F("ul","type compact"),F("li","type"),F("ol dl menu dir","compact"),F("pre","width xml:space"),F("hr","align noshade size width"),F("isindex","prompt"),F("table","summary width frame rules cellspacing cellpadding align bgcolor"),F("col","width align char charoff valign"),F("colgroup","width align char charoff valign"),F("thead","align char charoff valign"),F("tr","align char charoff valign bgcolor"),F("th","axis align char charoff valign nowrap bgcolor width height"),F("form","accept"),F("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),F("tfoot","align char charoff valign"),F("tbody","align char charoff valign"),F("area","nohref"),F("body","background bgcolor text link vlink alink")),"html4"!==r&&(F("input button select textarea","autofocus"),F("input textarea","placeholder"),F("a","download"),F("link script img","crossorigin"),F("iframe","sandbox seamless allowfullscreen")),zo(Hr("a form meter progress dfn"),function(W){P[W]&&delete P[W].children[W]}),delete P.caption.children.table,delete P.script,si[r]=P)}((r=r||{}).schema),!1===r.verify_html&&(r.valid_elements="*[*]"),l=Ws(r.valid_styles),c=Ws(r.invalid_styles,"map"),N=Ws(r.valid_classes,"map"),m=Dt("whitespace_elements","pre script noscript style textarea video audio iframe object code"),M=Dt("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),k=Dt("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),P=Dt("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),W=Dt("non_empty_elements","td th iframe video audio object script pre code",k),q=Dt("move_caret_before_on_enter_elements","table",W),Z=Dt("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),F=Dt("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",Z),ht=Dt("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),zo((r.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(te){mt[te]=new RegExp("</"+te+"[^>]*>","gi")});var Pt=function(te){return new RegExp("^"+te.replace(/([?+*])/g,".$1")+"$")},wt=function(te){var Ee,be,Ne,Cn,Ae,Be,Pn,an,ke,Ze,Hn,Yn,Wn,dn,Xn,zt,ie,Te,Ge,Gn=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,Li=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,qi=/[*?+]/;if(te)for(te=Hr(te,","),at["@"]&&(zt=at["@"].attributes,ie=at["@"].attributesOrder),Ee=0,be=te.length;Ee<be;Ee++)if(Ae=Gn.exec(te[Ee])){if(ke=Ae[2],Xn=Ae[3],an=Ae[5],Be={attributes:Yn={},attributesOrder:Wn=[]},"#"===(dn=Ae[1])&&(Be.paddEmpty=!0),"-"===dn&&(Be.removeEmpty=!0),"!"===Ae[4]&&(Be.removeEmptyAttrs=!0),zt){for(Te in zt)Yn[Te]=zt[Te];Wn.push.apply(Wn,ie)}if(an)for(Ne=0,Cn=(an=Hr(an,"|")).length;Ne<Cn;Ne++)if(Ae=Li.exec(an[Ne])){if(Pn={},Hn=Ae[1],Ze=Ae[2].replace(/[\\:]:/g,":"),dn=Ae[3],Ge=Ae[4],"!"===Hn&&(Be.attributesRequired=Be.attributesRequired||[],Be.attributesRequired.push(Ze),Pn.required=!0),"-"===Hn){delete Yn[Ze],Wn.splice(Wd(Wn,Ze),1);continue}dn&&("="===dn&&(Be.attributesDefault=Be.attributesDefault||[],Be.attributesDefault.push({name:Ze,value:Ge}),Pn.defaultValue=Ge),":"===dn&&(Be.attributesForced=Be.attributesForced||[],Be.attributesForced.push({name:Ze,value:Ge}),Pn.forcedValue=Ge),"<"===dn&&(Pn.validValues=Vs(Ge,"?"))),qi.test(Ze)?(Be.attributePatterns=Be.attributePatterns||[],Pn.pattern=Pt(Ze),Be.attributePatterns.push(Pn)):(Yn[Ze]||Wn.push(Ze),Yn[Ze]=Pn)}zt||"@"!==ke||(zt=Yn,ie=Wn),Xn&&(Be.outputName=ke,at[Xn]=Be),qi.test(ke)?(Be.pattern=Pt(ke),rt.push(Be)):at[ke]=Be}},Ht=function(te){at={},rt=[],wt(te),zo(h,function(Ee,be){gt[be]=Ee.children})},ce=function(te){var Ee=/^(~)?(.+)$/;te&&(si.text_block_elements=si.block_elements=null,zo(Hr(te,","),function(be){var Ne=Ee.exec(be),Cn="~"===Ne[1],Ae=Cn?"span":"div",Be=Ne[2];if(gt[Be]=gt[Ae],dt[Be]=Ae,Cn||(F[Be.toUpperCase()]={},F[Be]={}),!at[Be]){var Pn=at[Ae];delete(Pn=is({},Pn)).removeEmptyAttrs,delete Pn.removeEmpty,at[Be]=Pn}zo(gt,function(an,ke){an[Ae]&&(gt[ke]=an=is({},gt[ke]),an[Be]=an[Ae])})}))},Xt=function(te){var Ee=/^([+\-]?)(\w+)\[([^\]]+)\]$/;si[r.schema]=null,te&&zo(Hr(te,","),function(be){var Ne,Cn,Ae=Ee.exec(be);Ae&&(Ne=(Cn=Ae[1])?gt[Ae[2]]:gt[Ae[2]]={"#comment":{}},Ne=gt[Ae[2]],zo(Hr(Ae[3],"|"),function(Be){"-"===Cn?delete Ne[Be]:Ne[Be]={}}))})},xe=function(te){var Ee,be=at[te];if(be)return be;for(Ee=rt.length;Ee--;)if((be=rt[Ee]).pattern.test(te))return be};return r.valid_elements?Ht(r.valid_elements):(zo(h,function(te,Ee){at[Ee]={attributes:te.attributes,attributesOrder:te.attributesOrder},gt[Ee]=te.children}),"html5"!==r.schema&&zo(Hr("strong/b em/i"),function(te){te=Hr(te,"/"),at[te[1]].outputName=te[0]}),zo(Hr("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(te){at[te]&&(at[te].removeEmpty=!0)}),zo(Hr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(te){at[te].paddEmpty=!0}),zo(Hr("span"),function(te){at[te].removeEmptyAttrs=!0})),ce(r.custom_elements),Xt(r.valid_children),wt(r.extended_valid_elements),Xt("+ol[ul|ol],+ul[ul|ol]"),zo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(te,Ee){at[Ee]&&(at[Ee].parentsRequired=Hr(te))}),r.invalid_elements&&zo(zc(r.invalid_elements),function(te){at[te]&&delete at[te]}),xe("span")||wt("span[!data-mce-type|*]"),{children:gt,elements:at,getValidStyles:function(){return l},getValidClasses:function(){return N},getBlockElements:function(){return F},getInvalidStyles:function(){return c},getShortEndedElements:function(){return k},getTextBlockElements:function(){return Z},getTextInlineElements:function(){return ht},getBoolAttrs:function(){return P},getElementRule:xe,getSelfClosingElements:function(){return M},getNonEmptyElements:function(){return W},getMoveCaretBeforeOnEnterElements:function(){return q},getWhiteSpaceElements:function(){return m},getSpecialElements:function(){return mt},isValidChild:function(te,Ee){var be=gt[te.toLowerCase()];return!(!be||!be[Ee.toLowerCase()])},isValid:function(te,Ee){var be,Ne,Cn=xe(te);if(Cn){if(!Ee||Cn.attributes[Ee])return!0;if(be=Cn.attributePatterns)for(Ne=be.length;Ne--;)if(be[Ne].pattern.test(te))return!0}return!1},getCustomElements:function(){return dt},addValidElements:wt,setValidElements:Ht,addCustomElements:ce,addValidChildren:Xt}}var gc=function(r,l,c,h){var m=function(M){return 1<(M=parseInt(M,10).toString(16)).length?M:"0"+M};return"#"+m(l)+m(c)+m(h)};function pc(r,l){var c,h,m,M,k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,P=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,N=/\s*([^:]+):\s*([^;]+);?/g,F=/\s+$/,W={};for(r=r||{},l&&(m=l.getValidStyles(),M=l.getInvalidStyles()),h="\\\" \\' \\; \\: ; : \ufeff".split(" "),c=0;c<h.length;c++)W[h[c]]="\ufeff"+c,W["\ufeff"+c]=h[c];return{toHex:function(Z){return Z.replace(k,gc)},parse:function(Z){var ht,at,gt,rt,mt,Dt,Pt,wt={},Ht=r.url_converter,ce=r.url_converter_scope||this,Xt=function(Ae,Be,Pn){var an,ke,Ze,Hn;if((an=wt[Ae+"-top"+Be])&&(ke=wt[Ae+"-right"+Be])&&(Ze=wt[Ae+"-bottom"+Be])&&(Hn=wt[Ae+"-left"+Be])){var Yn=[an,ke,Ze,Hn];for(c=Yn.length-1;c--&&Yn[c]===Yn[c+1];);-1<c&&Pn||(wt[Ae+Be]=-1===c?Yn[0]:Yn.join(" "),delete wt[Ae+"-top"+Be],delete wt[Ae+"-right"+Be],delete wt[Ae+"-bottom"+Be],delete wt[Ae+"-left"+Be])}},xe=function(Ae){var Be,Pn=wt[Ae];if(Pn){for(Be=(Pn=Pn.split(" ")).length;Be--;)if(Pn[Be]!==Pn[0])return!1;return wt[Ae]=Pn[0],!0}},te=function(Ae){return rt=!0,W[Ae]},Ee=function(Ae,Be){return rt&&(Ae=Ae.replace(/\uFEFF[0-9]/g,function(Pn){return W[Pn]})),Be||(Ae=Ae.replace(/\\([\'\";:])/g,"$1")),Ae},be=function(Ae){return String.fromCharCode(parseInt(Ae.slice(1),16))},Ne=function(Ae){return Ae.replace(/\\[0-9a-f]+/gi,be)},Cn=function(Ae,Be,Pn,an,ke,Ze){if(ke=ke||Ze)return"'"+(ke=Ee(ke)).replace(/\'/g,"\\'")+"'";if(Be=Ee(Be||Pn||an),!r.allow_script_urls){var Hn=Be.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Hn)||!r.allow_svg_data_urls&&/^data:image\/svg/i.test(Hn))return""}return Ht&&(Be=Ht.call(ce,Be,"style")),"url('"+Be.replace(/\'/g,"\\'")+"')"};if(Z){for(Z=(Z=Z.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,te).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(Ae){return Ae.replace(/[;:]/g,te)});ht=N.exec(Z);)if(N.lastIndex=ht.index+ht[0].length,at=ht[1].replace(F,"").toLowerCase(),gt=ht[2].replace(F,""),at&&gt){if(at=Ne(at),gt=Ne(gt),-1!==at.indexOf("\ufeff")||-1!==at.indexOf('"')||!r.allow_script_urls&&("behavior"===at||/expression\s*\(|\/\*|\*\//.test(gt)))continue;"font-weight"===at&&"700"===gt?gt="bold":"color"!==at&&"background-color"!==at||(gt=gt.toLowerCase()),gt=(gt=gt.replace(k,gc)).replace(P,Cn),wt[at]=rt?Ee(gt,!0):gt}Xt("border","",!0),Xt("border","-width"),Xt("border","-color"),Xt("border","-style"),Xt("padding",""),Xt("margin",""),Dt="border-style",Pt="border-color",xe(mt="border-width")&&xe(Dt)&&xe(Pt)&&(wt.border=wt[mt]+" "+wt[Dt]+" "+wt[Pt],delete wt[mt],delete wt[Dt],delete wt[Pt]),"medium none"===wt.border&&delete wt.border,"none"===wt["border-image"]&&delete wt["border-image"]}return wt},serialize:function(Z,ht){var at,gt,rt,mt,Dt="",Pt=function(wt){var Ht,ce,Xt,xe;if(Ht=m[wt])for(ce=0,Xt=Ht.length;ce<Xt;ce++)(xe=Z[wt=Ht[ce]])&&(Dt+=(0<Dt.length?" ":"")+wt+": "+xe+";")};if(ht&&m)Pt("*"),Pt(ht);else for(at in Z)!(gt=Z[at])||M&&(rt=at,mt=void 0,(mt=M["*"])&&mt[rt]||(mt=M[ht])&&mt[rt])||(Dt+=(0<Dt.length?" ":"")+at+": "+gt+";");return Dt}}}var Ou,js=ge.each,Sh=ge.grep,eg=sn.ie,ng=/^([a-z0-9],?)+$/i,Ch=/^[ \t\r\n]*$/,rs=function(r,l){var c=l.attr("style"),h=r.serialize(r.parse(c),l[0].nodeName);h||(h=null),l.attr("data-mce-style",h)},Nl=function(r,l){var c,h,m=0;if(r)for(c=r.nodeType,r=r.previousSibling;r;r=r.previousSibling)h=r.nodeType,(!l||3!==h||h!==c&&r.nodeValue.length)&&(m++,c=h);return m};function Gs(r,l){var c,h=this;void 0===l&&(l={});var m={},M=Rt.window,k={},P=0,N=function(zt,ie){void 0===ie&&(ie={});var Te,Ge=0,Gn={};Te=ie.maxLoadTime||5e3;var Li=function(Gr){zt.getElementsByTagName("head")[0].appendChild(Gr)},qi=function(Gr,Qc,Jf){var Da,td,Qg,us,tf=function(){for(var Pc=us.passed,Nd=Pc.length;Nd--;)Pc[Nd]();us.status=2,us.passed=[],us.failed=[]},Ed=function(){for(var Pc=us.failed,Nd=Pc.length;Nd--;)Pc[Nd]();us.status=3,us.passed=[],us.failed=[]},ed=function(Pc,Nd){Pc()||((new Date).getTime()-Qg<Te?mr.setTimeout(Nd):Ed())},Tx=function(){ed(function(){for(var Pc,Nd,h_=zt.styleSheets,u0=h_.length;u0--;)if((Nd=(Pc=h_[u0]).ownerNode?Pc.ownerNode:Pc.owningElement)&&Nd.id===Da.id)return tf(),!0},Tx)},c_=function(){ed(function(){try{var Pc=td.sheet.cssRules;return tf(),!!Pc}catch(Nd){}},c_)};if(Gr=ge._addCacheSuffix(Gr),Gn[Gr]?us=Gn[Gr]:Gn[Gr]=us={passed:[],failed:[]},Qc&&us.passed.push(Qc),Jf&&us.failed.push(Jf),1!==us.status)if(2!==us.status)if(3!==us.status){if(us.status=1,(Da=zt.createElement("link")).rel="stylesheet",Da.type="text/css",Da.id="u"+Ge++,Da.async=!1,Da.defer=!1,Qg=(new Date).getTime(),ie.contentCssCors&&(Da.crossOrigin="anonymous"),!("onload"in Da)||(d_=Rt.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(d_[1],10)<536){if(0<Rt.navigator.userAgent.indexOf("Firefox"))return(td=zt.createElement("style")).textContent='@import "'+Gr+'"',c_(),void Li(td);Tx()}else Da.onload=Tx,Da.onerror=Ed;var d_;Li(Da),Da.href=Gr}else Ed();else tf()},sr=function(Gr){return hd_nu(function(Qc){qi(Gr,bn(Qc,Oe(pd.value(Gr))),bn(Qc,Oe(pd.error(Gr))))})},Lo=function(Gr){return Gr.fold(se,se)};return{load:qi,loadAll:function(Gr,Qc,Jf){(function(r){return function(r,l){return l(function(c){var h=[],m=0;0===r.length?c([]):Ke(r,function(M,k){var P;M.get((P=k,function(N){h[P]=N,++m>=r.length&&c(h)}))})})}(r,hd_nu)})(_i(Gr,sr)).get(function(Da){var td=mo(Da,function(Qg){return Qg.isValue()});0<td.fail.length?Jf(td.fail.map(Lo)):Qc(td.pass.map(Lo))})}}}(r,{contentCssCors:l.contentCssCors}),F=[],W=l.schema?l.schema:su({}),q=pc({url_converter:l.url_converter,url_converter_scope:l.url_converter_scope},l.schema),Z=l.ownEvents?new qr(l.proxy):qr.Event,ht=W.getBlockElements(),at=Bn.overrideDefaults(function(){return{context:r,element:Xn.getRoot()}}),gt=function(zt){if(zt&&r&&"string"==typeof zt){var ie=r.getElementById(zt);return ie&&ie.id!==zt?r.getElementsByName(zt)[1]:ie}return zt},rt=function(zt){return"string"==typeof zt&&(zt=gt(zt)),at(zt)},dt=function(zt,ie,Te){var Ge,Gn,Li=rt(zt);return Li.length&&(Gn=(Ge=c[ie])&&Ge.get?Ge.get(Li,ie):Li.attr(ie)),void 0===Gn&&(Gn=Te||""),Gn},mt=function(zt){var ie=gt(zt);return ie?ie.attributes:[]},Dt=function(zt,ie,Te){var Ge,Gn;""===Te&&(Te=null);var Li=rt(zt);Ge=Li.attr(ie),Li.length&&((Gn=c[ie])&&Gn.set?Gn.set(Li,Te,ie):Li.attr(ie,Te),Ge!==Te&&l.onSetAttrib&&l.onSetAttrib({attrElm:Li,attrName:ie,attrValue:Te}))},Pt=function(){return l.root_element||r.body},wt=function(zt,ie){return function(r,l,c){var h,m,M,k=0,P=0,N=r.ownerDocument;if(c=c||r,l){if(c===r&&l.getBoundingClientRect&&"static"===cc(Ce_fromDom(r),"position"))return{x:k=(m=l.getBoundingClientRect()).left+(N.documentElement.scrollLeft||r.scrollLeft)-N.documentElement.clientLeft,y:P=m.top+(N.documentElement.scrollTop||r.scrollTop)-N.documentElement.clientTop};for(h=l;h&&h!==c&&h.nodeType;)k+=h.offsetLeft||0,P+=h.offsetTop||0,h=h.offsetParent;for(h=l.parentNode;h&&h!==c&&h.nodeType;)k-=h.scrollLeft||0,P-=h.scrollTop||0,h=h.parentNode;P+=(M=Ce_fromDom(l),Bo.isFirefox()&&"table"===la(M)?ya(bs(M)).filter(function(F){return"caption"===la(F)}).bind(function(F){return ya(Lc(F)).map(function(W){var q=W.dom().offsetTop,Z=F.dom().offsetTop,ht=F.dom().offsetHeight;return q<=Z?-ht:0})}).getOr(0):0)}return{x:k,y:P}}(r.body,gt(zt),ie)},Ht=function(zt,ie,Te){var Ge=rt(zt);return Te?Ge.css(ie):("float"===(ie=ie.replace(/-(\D)/g,function(Gn,Li){return Li.toUpperCase()}))&&(ie=sn.ie&&sn.ie<12?"styleFloat":"cssFloat"),Ge[0]&&Ge[0].style?Ge[0].style[ie]:void 0)},ce=function(zt){var ie,Te;return zt=gt(zt),ie=Ht(zt,"width"),Te=Ht(zt,"height"),-1===ie.indexOf("px")&&(ie=0),-1===Te.indexOf("px")&&(Te=0),{w:parseInt(ie,10)||zt.offsetWidth||zt.clientWidth,h:parseInt(Te,10)||zt.offsetHeight||zt.clientHeight}},Xt=function(zt,ie){var Te;if(!zt)return!1;if(!Array.isArray(zt)){if("*"===ie)return 1===zt.nodeType;if(ng.test(ie)){var Ge=ie.toLowerCase().split(/,/),Gn=zt.nodeName.toLowerCase();for(Te=Ge.length-1;0<=Te;Te--)if(Ge[Te]===Gn)return!0;return!1}if(zt.nodeType&&1!==zt.nodeType)return!1}var Li=Array.isArray(zt)?zt:[zt];return 0<Hi(ie,Li[0].ownerDocument||Li[0],null,Li).length},xe=function(zt,ie,Te,Ge){var Gn,Li=[],qi=gt(zt);for(Ge=void 0===Ge,Te=Te||("BODY"!==Pt().nodeName?Pt().parentNode:null),ge.is(ie,"string")&&(ie="*"===(Gn=ie)?function(sr){return 1===sr.nodeType}:function(sr){return Xt(sr,Gn)});qi&&qi!==Te&&qi.nodeType&&9!==qi.nodeType;){if(!ie||"function"==typeof ie&&ie(qi)){if(!Ge)return[qi];Li.push(qi)}qi=qi.parentNode}return Ge?Li:null},te=function(zt,ie,Te){var Ge=ie;if(zt)for("string"==typeof ie&&(Ge=function(Gn){return Xt(Gn,ie)}),zt=zt[Te];zt;zt=zt[Te])if("function"==typeof Ge&&Ge(zt))return zt;return null},Ee=function(zt,ie,Te){var Ge,Gn="string"==typeof zt?gt(zt):zt;return!!Gn&&(ge.isArray(Gn)&&(Gn.length||0===Gn.length)?(Ge=[],js(Gn,function(qi,sr){qi&&("string"==typeof qi&&(qi=gt(qi)),Ge.push(ie.call(Te,qi,sr)))}),Ge):ie.call(Te||h,Gn))},be=function(zt,ie){rt(zt).each(function(Te,Ge){js(ie,function(Gn,Li){Dt(Ge,Li,Gn)})})},Ne=function(zt,ie){var Te=rt(zt);eg?Te.each(function(Ge,Gn){if(!1!==Gn.canHaveHTML){for(;Gn.firstChild;)Gn.removeChild(Gn.firstChild);try{Gn.innerHTML="<br>"+ie,Gn.removeChild(Gn.firstChild)}catch(Li){Bn("<div></div>").html("<br>"+ie).contents().slice(1).appendTo(Gn)}return ie}}):Te.html(ie)},Cn=function(zt,ie,Te,Ge,Gn){return Ee(zt,function(Li){var qi="string"==typeof ie?r.createElement(ie):ie;return be(qi,Te),Ge&&("string"!=typeof Ge&&Ge.nodeType?qi.appendChild(Ge):"string"==typeof Ge&&Ne(qi,Ge)),Gn?qi:Li.appendChild(qi)})},Ae=function(zt,ie,Te){return Cn(r.createElement(zt),zt,ie,Te,!0)},Pn=to.encodeAllRaw,an=function(zt,ie){var Te=rt(zt);return ie?Te.each(function(){for(var Ge;Ge=this.firstChild;)3===Ge.nodeType&&0===Ge.data.length?this.removeChild(Ge):this.parentNode.insertBefore(Ge,this)}).remove():Te.remove(),1<Te.length?Te.toArray():Te[0]},ke=function(zt,ie,Te){rt(zt).toggleClass(ie,Te).each(function(){""===this.className&&Bn(this).attr("class",null)})},Ze=function(zt,ie,Te){return Ee(ie,function(Ge){return ge.is(Ge,"array")&&(zt=zt.cloneNode(!0)),Te&&js(Sh(Ge.childNodes),function(Gn){zt.appendChild(Gn)}),Ge.parentNode.replaceChild(zt,Ge)})},Hn=function(){return r.createRange()},Yn=function(zt,ie,Te,Ge){if(ge.isArray(zt)){for(var Gn=zt.length;Gn--;)zt[Gn]=Yn(zt[Gn],ie,Te,Ge);return zt}return!l.collect||zt!==r&&zt!==M||F.push([zt,ie,Te,Ge]),Z.bind(zt,ie,Te,Ge||Xn)},Wn=function(zt,ie,Te){var Ge;if(ge.isArray(zt)){for(Ge=zt.length;Ge--;)zt[Ge]=Wn(zt[Ge],ie,Te);return zt}if(F&&(zt===r||zt===M))for(Ge=F.length;Ge--;){var Gn=F[Ge];zt!==Gn[0]||ie&&ie!==Gn[1]||Te&&Te!==Gn[2]||Z.unbind(Gn[0],Gn[1],Gn[2])}return Z.unbind(zt,ie,Te)},dn=function(zt){if(zt&&Lt.isElement(zt)){var ie=zt.getAttribute("data-mce-contenteditable");return ie&&"inherit"!==ie?ie:"inherit"!==zt.contentEditable?zt.contentEditable:null}return null},Xn={doc:r,settings:l,win:M,files:k,stdMode:!0,boxModel:!0,styleSheetLoader:N,boundEvents:F,styles:q,schema:W,events:Z,isBlock:function(zt){if("string"==typeof zt)return!!ht[zt];if(zt){var ie=zt.nodeType;if(ie)return!(1!==ie||!ht[zt.nodeName])}return!1},$:at,$$:rt,root:null,clone:function(zt,ie){if(!eg||1!==zt.nodeType||ie)return zt.cloneNode(ie);if(!ie){var Te=r.createElement(zt.nodeName);return js(mt(zt),function(Ge){Dt(Te,Ge.nodeName,dt(zt,Ge.nodeName))}),Te}return null},getRoot:Pt,getViewPort:function(zt){var ie=zt||M,Te=ie.document.documentElement;return{x:ie.pageXOffset||Te.scrollLeft,y:ie.pageYOffset||Te.scrollTop,w:ie.innerWidth||Te.clientWidth,h:ie.innerHeight||Te.clientHeight}},getRect:function(zt){var ie,Te;return zt=gt(zt),ie=wt(zt),Te=ce(zt),{x:ie.x,y:ie.y,w:Te.w,h:Te.h}},getSize:ce,getParent:function(zt,ie,Te){var Ge=xe(zt,ie,Te,!1);return Ge&&0<Ge.length?Ge[0]:null},getParents:xe,get:gt,getNext:function(zt,ie){return te(zt,ie,"nextSibling")},getPrev:function(zt,ie){return te(zt,ie,"previousSibling")},select:function(zt,ie){return Hi(zt,gt(ie)||l.root_element||r,[])},is:Xt,add:Cn,create:Ae,createHTML:function(zt,ie,Te){var Ge,Gn="";for(Ge in Gn+="<"+zt,ie)ie.hasOwnProperty(Ge)&&null!=ie[Ge]&&(Gn+=" "+Ge+'="'+Pn(ie[Ge])+'"');return void 0!==Te?Gn+">"+Te+"</"+zt+">":Gn+" />"},createFragment:function(zt){var ie,Te=r.createElement("div"),Ge=r.createDocumentFragment();for(Ge.appendChild(Te),zt&&(Te.innerHTML=zt);ie=Te.firstChild;)Ge.appendChild(ie);return Ge.removeChild(Te),Ge},remove:an,setStyle:function(zt,ie,Te){var Ge=rt(zt).css(ie,Te);l.update_styles&&rs(q,Ge)},getStyle:Ht,setStyles:function(zt,ie){var Te=rt(zt).css(ie);l.update_styles&&rs(q,Te)},removeAllAttribs:function(zt){return Ee(zt,function(ie){var Te,Ge=ie.attributes;for(Te=Ge.length-1;0<=Te;Te--)ie.removeAttributeNode(Ge.item(Te))})},setAttrib:Dt,setAttribs:be,getAttrib:dt,getPos:wt,parseStyle:function(zt){return q.parse(zt)},serializeStyle:function(zt,ie){return q.serialize(zt,ie)},addStyle:function(zt){var ie,Te;if(Xn!==Gs.DOM&&r===Rt.document){if(m[zt])return;m[zt]=!0}(Te=r.getElementById("mceDefaultStyles"))||((Te=r.createElement("style")).id="mceDefaultStyles",Te.type="text/css",(ie=r.getElementsByTagName("head")[0]).firstChild?ie.insertBefore(Te,ie.firstChild):ie.appendChild(Te)),Te.styleSheet?Te.styleSheet.cssText+=zt:Te.appendChild(r.createTextNode(zt))},loadCSS:function(zt){var ie;Xn===Gs.DOM||r!==Rt.document?(zt||(zt=""),ie=r.getElementsByTagName("head")[0],js(zt.split(","),function(Te){var Ge;Te=ge._addCacheSuffix(Te),k[Te]||(k[Te]=!0,Ge=Ae("link",{rel:"stylesheet",href:Te}),ie.appendChild(Ge))})):Gs.DOM.loadCSS(zt)},addClass:function(zt,ie){rt(zt).addClass(ie)},removeClass:function(zt,ie){ke(zt,ie,!1)},hasClass:function(zt,ie){return rt(zt).hasClass(ie)},toggleClass:ke,show:function(zt){rt(zt).show()},hide:function(zt){rt(zt).hide()},isHidden:function(zt){return"none"===rt(zt).css("display")},uniqueId:function(zt){return(zt||"mce_")+P++},setHTML:Ne,getOuterHTML:function(zt){var ie="string"==typeof zt?gt(zt):zt;return Lt.isElement(ie)?ie.outerHTML:Bn("<div></div>").append(Bn(ie).clone()).html()},setOuterHTML:function(zt,ie){rt(zt).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=ie)}catch(Te){}an(Bn(this).html(ie),!0)})},decode:to.decode,encode:Pn,insertAfter:function(zt,ie){var Te=gt(ie);return Ee(zt,function(Ge){var Gn,Li;return Gn=Te.parentNode,(Li=Te.nextSibling)?Gn.insertBefore(Ge,Li):Gn.appendChild(Ge),Ge})},replace:Ze,rename:function(zt,ie){var Te;return zt.nodeName!==ie.toUpperCase()&&(Te=Ae(ie),js(mt(zt),function(Ge){Dt(Te,Ge.nodeName,dt(zt,Ge.nodeName))}),Ze(Te,zt,!0)),Te||zt},findCommonAncestor:function(zt,ie){for(var Te,Ge=zt;Ge;){for(Te=ie;Te&&Ge!==Te;)Te=Te.parentNode;if(Ge===Te)break;Ge=Ge.parentNode}return!Ge&&zt.ownerDocument?zt.ownerDocument.documentElement:Ge},toHex:function(zt){return q.toHex(ge.trim(zt))},run:Ee,getAttribs:mt,isEmpty:function(zt,ie){var Te,Ge,Gn,Li,qi,sr,Lo=0;if(zt=zt.firstChild){qi=new Zi(zt,zt.parentNode),ie=ie||(W?W.getNonEmptyElements():null),Li=W?W.getWhiteSpaceElements():{};do{if(Gn=zt.nodeType,Lt.isElement(zt)){var Gr=zt.getAttribute("data-mce-bogus");if(Gr){zt=qi.next("all"===Gr);continue}if(sr=zt.nodeName.toLowerCase(),ie&&ie[sr]){if("br"===sr){Lo++,zt=qi.next();continue}return!1}for(Te=(Ge=mt(zt)).length;Te--;)if("name"===(sr=Ge[Te].nodeName)||"data-mce-bookmark"===sr)return!1}if(8===Gn||3===Gn&&!Ch.test(zt.nodeValue)||3===Gn&&zt.parentNode&&Li[zt.parentNode.nodeName]&&Ch.test(zt.nodeValue))return!1;zt=qi.next()}while(zt)}return Lo<=1},createRng:Hn,nodeIndex:Nl,split:function(zt,ie,Te){var Ge,Gn,Li,qi=Hn();if(zt&&ie)return qi.setStart(zt.parentNode,Nl(zt)),qi.setEnd(ie.parentNode,Nl(ie)),Ge=qi.extractContents(),(qi=Hn()).setStart(ie.parentNode,Nl(ie)+1),qi.setEnd(zt.parentNode,Nl(zt)+1),Gn=qi.extractContents(),(Li=zt.parentNode).insertBefore(Ki.trimNode(Xn,Ge),zt),Li.insertBefore(Te||ie,zt),Li.insertBefore(Ki.trimNode(Xn,Gn),zt),an(zt),Te||ie},bind:Yn,unbind:Wn,fire:function(zt,ie,Te){return Z.fire(zt,ie,Te)},getContentEditable:dn,getContentEditableParent:function(zt){for(var ie=Pt(),Te=null;zt&&zt!==ie&&null===(Te=dn(zt));zt=zt.parentNode);return Te},destroy:function(){if(F)for(var zt=F.length;zt--;){var ie=F[zt];Z.unbind(ie[0],ie[1],ie[2])}Hi.setDocument&&Hi.setDocument()},isChildOf:function(zt,ie){for(;zt;){if(ie===zt)return!0;zt=zt.parentNode}return!1},dumpRng:function(zt){return"startContainer: "+zt.startContainer.nodeName+", startOffset: "+zt.startOffset+", endContainer: "+zt.endContainer.nodeName+", endOffset: "+zt.endOffset}};return c=function(r,l,c){var h={},m=l.keep_values;return h={style:{set:function(k,P){null===P||"object"!=typeof P?(m&&k.attr("data-mce-style",P),k.attr("style",P)):k.css(P)},get:function(k){var P=k.attr("data-mce-style")||k.attr("style");return r.serialize(r.parse(P),k[0].nodeName)}}},m&&(h.href=h.src={set:function(k,P,N){l.url_converter&&(P=l.url_converter.call(l.url_converter_scope||Xn,P,N,k[0])),k.attr("data-mce-"+N,P).attr(N,P)},get:function(k,P){return k.attr("data-mce-"+P)||k.attr(P)}}),h}(q,l),Xn}(Ou=Gs||(Gs={})).DOM=Ou(Rt.document),Ou.nodeIndex=Nl;var eo=Gs,Ss=eo.DOM,jd=ge.each,Gd=ge.grep,Fc=function(r){return"function"==typeof r},fo=function(){var r={},l=[],c={},h=[],m=0;this.isDone=function(M){return 2===r[M]},this.markDone=function(M){r[M]=2},this.add=this.load=function(M,k,P,N){void 0===r[M]&&(l.push(M),r[M]=0),k&&(c[M]||(c[M]=[]),c[M].push({success:k,failure:N,scope:P||this}))},this.remove=function(M){delete r[M],delete c[M]},this.loadQueue=function(M,k,P){this.loadScripts(l,M,k,P)},this.loadScripts=function(M,k,P,N){var F,W=[],q=function(Z,ht){jd(c[ht],function(at){Fc(at[Z])&&at[Z].call(at.scope)}),c[ht]=void 0};h.push({success:k,failure:N,scope:P||this}),(F=function(){var Z=Gd(M);if(M.length=0,jd(Z,function(at){var gt,rt,dt,mt,Dt,Pt;2!==r[at]?3!==r[at]?1!==r[at]&&(r[at]=1,m++,gt=at,rt=function(){r[at]=2,m--,q("success",at),F()},dt=function(){r[at]=3,m--,W.push(at),q("failure",at),F()},Dt=(Pt=Ss).uniqueId(),(mt=Rt.document.createElement("script")).id=Dt,mt.type="text/javascript",mt.src=ge._addCacheSuffix(gt),mt.onload=function(){Pt.remove(Dt),mt&&(mt.onreadystatechange=mt.onload=mt=null),rt()},mt.onerror=function(){Fc(dt)?dt():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+gt)},(Rt.document.getElementsByTagName("head")[0]||Rt.document.body).appendChild(mt)):q("failure",at):q("success",at)}),!m){var ht=h.slice(0);h.length=0,jd(ht,function(at){0===W.length?Fc(at.success)&&at.success.call(at.scope):Fc(at.failure)&&at.failure.call(at.scope,W)})}})()}};fo.ScriptLoader=new fo;var Ud,md=ge.each;function Ga(){var r=this,l=[],c={},h={},m=[],M=function(F){var W;return h[F]&&(W=h[F].dependencies),W||[]},k=function(F,W){return"object"==typeof W?W:"string"==typeof F?{prefix:"",resource:W,suffix:""}:{prefix:F.prefix,resource:W,suffix:F.suffix}},P=function(F,W,q,Z){var ht=M(F);md(ht,function(at){var gt=k(W,at);N(gt.resource,gt,void 0,void 0)}),q&&q.call(Z||fo)},N=function(F,W,q,Z,ht){if(!c[F]){var at="string"==typeof W?W:W.prefix+W.resource+W.suffix;0!==at.indexOf("/")&&-1===at.indexOf("://")&&(at=Ga.baseURL+"/"+at),c[F]=at.substring(0,at.lastIndexOf("/")),h[F]?P(F,W,q,Z):fo.ScriptLoader.add(at,function(){return P(F,W,q,Z)},Z,ht)}};return{items:l,urls:c,lookup:h,_listeners:m,get:function(F){return h[F]?h[F].instance:void 0},dependencies:M,requireLangPack:function(F,W){var q=Ga.language;if(q&&!1!==Ga.languageLoad){if(W)if(-1!==(W=","+W+",").indexOf(","+q.substr(0,2)+","))q=q.substr(0,2);else if(-1===W.indexOf(","+q+","))return;fo.ScriptLoader.add(c[F]+"/langs/"+q+".js")}},add:function(F,W,q){l.push(W),h[F]={instance:W,dependencies:q};var Z=mo(m,function(ht){return ht.name===F});return m=Z.fail,md(Z.pass,function(ht){ht.callback()}),W},remove:function(F){delete c[F],delete h[F]},createUrl:k,addComponents:function(F,W){var q=r.urls[F];md(W,function(Z){fo.ScriptLoader.add(q+"/"+Z)})},load:N,waitFor:function(F,W){h.hasOwnProperty(F)?W():m.push({name:F,callback:W})}}}(Ud=Ga||(Ga={})).PluginManager=Ud(),Ud.ThemeManager=Ud();var $r=function(r,l){ul(r).each(function(c){c.dom().insertBefore(l.dom(),r.dom())})},Zr=function(r,l){qo(r).fold(function(){ul(r).each(function(c){da(c,l)})},function(c){$r(c,l)})},gl=function(r,l){iu(r).fold(function(){da(r,l)},function(c){r.dom().insertBefore(l.dom(),c.dom())})},da=function(r,l){r.dom().appendChild(l.dom())},Rl=function(r,l){Ke(l,function(c){da(r,c)})},qd=function(r){r.dom().textContent="",Ke(bs(r),function(l){Fo(l)})},Fo=function(r){var l=r.dom();null!==l.parentNode&&l.parentNode.removeChild(l)},Yd=function(r){var l,c=bs(r);0<c.length&&(l=r,Ke(c,function(h){$r(l,h)})),Fo(r)},lu=function(r,l){var c=null;return{cancel:function(){null!==c&&(Rt.clearTimeout(c),c=null)},throttle:function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];null===c&&(c=Rt.setTimeout(function(){r.apply(null,h),c=null},l))}}},_a=function(r){var l=r,c=function(){return l};return{get:c,set:function(h){l=h},clone:function(){return _a(c())}}},Xd=function(r,l){var c=Pl(r,l);return void 0===c||""===c?[]:c.split(" ")},vd=function(r){return void 0!==r.dom().classList},Co=function(r,l){vd(r)?r.dom().classList.add(l):function(r,l){return m=l,M=Xd(c=r,"class").concat([m]),Va(c,"class",M.join(" ")),!0;var c,m,M}(r,l)},Ll=function(r,l){return vd(r)&&r.dom().classList.contains(l)},Cs=function(r,l){var c=[];return Ke(bs(r),function(h){l(h)&&(c=c.concat([h])),c=c.concat(Cs(h,l))}),c},Ho=function(r,l){return c=l,m=void 0===(h=r)?Rt.document:h.dom(),nu(m)?[]:_i(m.querySelectorAll(c),Ce_fromDom);var c,h,m};function af(r,l,c,h,m){return r(c,h)?kt.some(c):Ui(m)&&m(c)?kt.none():l(c,h,m)}var Ea,Ol=function(r,l,c){for(var h=r.dom(),m=Ui(c)?c:Oe(!1);h.parentNode;){var M=Ce_fromDom(h=h.parentNode);if(l(M))return kt.some(M);if(m(M))break}return kt.none()},mc=function(r,l,c){return af(function(h,m){return m(h)},Ol,r,l,c)},Hc=function(r,l,c){return Ol(r,function(h){return Ru(h,l)},c)},Bu=function(r,l){return c=l,m=void 0===(h=r)?Rt.document:h.dom(),nu(m)?kt.none():kt.from(m.querySelector(c)).map(Ce_fromDom);var c,h,m},Mh=function(r,l,c){return af(Ru,Hc,r,l,c)},os=Oe("mce-annotation"),Bl=Oe("data-mce-annotation"),Th=Oe("data-mce-annotation-uid"),uu=function(r,l){var c=r.selection.getRng(),h=Ce_fromDom(c.startContainer),m=Ce_fromDom(r.getBody()),M=l.fold(function(){return"."+os()},function(F){return"["+Bl()+'="'+F+'"]'}),k=hc(h,c.startOffset).getOr(h),P=Mh(k,M,function(F){return jr(F,m)}),N=function(F,W){return q=W,(Z=F.dom())&&Z.hasAttribute&&Z.hasAttribute(q)?kt.some(Pl(F,W)):kt.none();var q,Z};return P.bind(function(F){return N(F,""+Th()).bind(function(W){return N(F,""+Bl()).map(function(q){var Z=Dh(r,W);return{uid:W,name:q,elements:Z}})})})},Dh=function(r,l){var c=Ce_fromDom(r.getBody());return Ho(c,"["+Th()+'="'+l+'"]')},vc=function(){return(vc=Object.assign||function(r){for(var l,c=1,h=arguments.length;c<h;c++)for(var m in l=arguments[c])Object.prototype.hasOwnProperty.call(l,m)&&(r[m]=l[m]);return r}).apply(this,arguments)},zu=0,No=function(r,l){return Ce_fromDom(r.dom().cloneNode(l))},Ms=function(r){return No(r,!1)},yd=function(r){return No(r,!0)},wa=function(r,l){var c,h,m=Fs(r).dom(),M=Ce_fromDom(m.createDocumentFragment()),k=(c=l,(h=(m||Rt.document).createElement("div")).innerHTML=c,bs(Ce_fromDom(h)));Rl(M,k),qd(r),da(r,M)},ig=function(r){return"\ufeff"===r},_="\ufeff",f=function(r){return r.replace(new RegExp("\ufeff","g"),"")},y=Lt.isElement,w=Lt.isText,A=function(r){return w(r)&&(r=r.parentNode),y(r)&&r.hasAttribute("data-mce-caret")},E=function(r){return w(r)&&ig(r.data)},R=function(r){return A(r)||E(r)},j=function(r){return r.firstChild!==r.lastChild||!Lt.isBr(r.firstChild)},$=function(r){var l=r.container();return!(!r||!Lt.isText(l))&&(l.data.charAt(r.offset())===_||r.isAtStart()&&E(l.previousSibling))},K=function(r){var l=r.container();return!(!r||!Lt.isText(l))&&(l.data.charAt(r.offset()-1)===_||r.isAtEnd()&&E(l.nextSibling))},ut=function(r){return w(r)&&r.data[0]===_},ft=function(r){return w(r)&&r.data[r.data.length-1]===_},bt=function(r){return r&&r.hasAttribute("data-mce-caret")?(l=r.getElementsByTagName("br"),Lt.isBogus(c=l[l.length-1])&&c.parentNode.removeChild(c),r.removeAttribute("data-mce-caret"),r.removeAttribute("data-mce-bogus"),r.removeAttribute("style"),r.removeAttribute("_moz_abspos"),r):null;var l,c},Mt=Lt.isContentEditableTrue,It=Lt.isContentEditableFalse,Nt=Lt.isBr,Gt=Lt.isText,ne=Lt.matchNodeNames("script style textarea"),de=Lt.matchNodeNames("img input textarea hr iframe video audio object"),ye=Lt.matchNodeNames("table"),qe=R,$e=function(r){return!qe(r)&&(Gt(r)?!ne(r.parentNode):de(r)||Nt(r)||ye(r)||wn(r))},wn=function(r){return!1===(Lt.isElement(l=r)&&"true"===l.getAttribute("unselectable"))&&It(r);var l},rn=function(r,l){return $e(r)&&function(c,h){for(c=c.parentNode;c&&c!==h;c=c.parentNode){if(wn(c))return!1;if(Mt(c))return!0}return!0}(r,l)},$n=Math.round,un=function(r){return r?{left:$n(r.left),top:$n(r.top),bottom:$n(r.bottom),right:$n(r.right),width:$n(r.width),height:$n(r.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},ni=function(r,l){return r=un(r),l||(r.left=r.left+r.width),r.right=r.left,r.width=0,r},Kn=function(r,l,c){return 0<=r&&r<=Math.min(l.height,c.height)/2},oi=function(r,l){var c=Math.min(l.height/2,r.height/2);return r.bottom-c<l.top||!(r.top>l.bottom)&&Kn(l.top-r.bottom,r,l)},Tn=function(r,l){return r.top>l.bottom||!(r.bottom<l.top)&&Kn(l.bottom-r.top,r,l)},qn=function(r,l,c){return l>=r.left&&l<=r.right&&c>=r.top&&c<=r.bottom},nr=function(r){var l=r.startContainer,c=r.startOffset;return l.hasChildNodes()&&r.endOffset===c+1?l.childNodes[c]:null},rr=function(r,l){return 1===r.nodeType&&r.hasChildNodes()&&(l>=r.childNodes.length&&(l=r.childNodes.length-1),r=r.childNodes[l]),r},Kr=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),$o=function(r){return"string"==typeof r&&768<=r.charCodeAt(0)&&Kr.test(r)},Jr=function(r,l,c){return r.isSome()&&l.isSome()?kt.some(c(r.getOrDie(),l.getOrDie())):kt.none()},na=[].slice,pl=Lt.isElement,go=$e,Vo=Lt.matchStyleValues("display","block table"),_0=Lt.matchStyleValues("float","left right"),Tr=function(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];var c=na.call(arguments);return function(h){for(var m=0;m<c.length;m++)if(!c[m](h))return!1;return!0}}(pl,go,Rr(_0)),sf=Rr(Lt.matchStyleValues("white-space","pre pre-line pre-wrap")),Ah=Lt.isText,lf=Lt.isBr,$d=eo.nodeIndex,Zd=rr,ss=function(r){return"createRange"in r?r.createRange():eo.DOM.createRng()},rg=function(r){return r&&/[\r\n\t ]/.test(r)},ha=function(r){return!!r.setStart&&!!r.setEnd},kh=function(r){var l,c=r.startContainer,h=r.startOffset;return!!(rg(r.toString())&&sf(c.parentNode)&&Lt.isText(c)&&(l=c.data,rg(l[h-1])||rg(l[h+1])))},og=function(r){return 0===r.left&&0===r.right&&0===r.top&&0===r.bottom},cu=function(r){var l,c,h,m,M,k,P,N;return l=0<(c=r.getClientRects()).length?un(c[0]):un(r.getBoundingClientRect()),!ha(r)&&lf(r)&&og(l)?(M=(h=r).ownerDocument,k=ss(M),P=M.createTextNode("\xa0"),(N=h.parentNode).insertBefore(P,h),k.setStart(P,0),k.setEnd(P,1),m=un(k.getBoundingClientRect()),N.removeChild(P),m):og(l)&&ha(r)?function(F){var q=F.endContainer,Z=F.startOffset,ht=F.endOffset;if(F.startContainer===q&&Lt.isText(q)&&0===Z&&1===ht){var at=F.cloneRange();return at.setEndAfter(q),cu(at)}return null}(r):l},Kd=function(r,l){var c=ni(r,l);return c.width=1,c.right=c.left+1,c};function Mo(r,l,c){var h=function(){return c||(c=function(r){var l,c,h=[],m=function(k){var P,N;0!==k.height&&(0<h.length&&(P=k).left===(N=h[h.length-1]).left&&P.top===N.top&&P.bottom===N.bottom&&P.right===N.right||h.push(k))},M=function(k,P){var N=ss(k.ownerDocument);if(P<k.data.length){if($o(k.data[P]))return h;if($o(k.data[P-1])&&(N.setStart(k,P),N.setEnd(k,P+1),!kh(N)))return m(Kd(cu(N),!1)),h}0<P&&(N.setStart(k,P-1),N.setEnd(k,P),kh(N)||m(Kd(cu(N),!1))),P<k.data.length&&(N.setStart(k,P),N.setEnd(k,P+1),kh(N)||m(Kd(cu(N),!0)))};if(Ah(r.container()))return M(r.container(),r.offset()),h;if(pl(r.container()))if(r.isAtEnd())c=Zd(r.container(),r.offset()),Ah(c)&&M(c,c.data.length),Tr(c)&&!lf(c)&&m(Kd(cu(c),!1));else{if(c=Zd(r.container(),r.offset()),Ah(c)&&M(c,0),Tr(c)&&r.isAtEnd())return m(Kd(cu(c),!1)),h;l=Zd(r.container(),r.offset()-1),Tr(l)&&!lf(l)&&(Vo(l)||Vo(c)||!Tr(c))&&m(Kd(cu(l),!1)),Tr(c)&&m(Kd(cu(c),!0))}return h}(Mo(r,l))),c};return{container:Oe(r),offset:Oe(l),toRange:function(){var m;return(m=ss(r.ownerDocument)).setStart(r,l),m.setEnd(r,l),m},getClientRects:h,isVisible:function(){return 0<h().length},isAtStart:function(){return Ah(r),0===l},isAtEnd:function(){return Ah(r)?l>=r.data.length:l>=r.childNodes.length},isEqual:function(m){return m&&r===m.container()&&l===m.offset()},getNode:function(m){return Zd(r,m?l-1:l)}}}(Ea=Mo||(Mo={})).fromRangeStart=function(r){return Ea(r.startContainer,r.startOffset)},Ea.fromRangeEnd=function(r){return Ea(r.endContainer,r.endOffset)},Ea.after=function(r){return Ea(r.parentNode,$d(r)+1)},Ea.before=function(r){return Ea(r.parentNode,$d(r))},Ea.isAbove=function(r,l){return Jr(pe(l.getClientRects()),ee(r.getClientRects()),oi).getOr(!1)},Ea.isBelow=function(r,l){return Jr(ee(l.getClientRects()),pe(r.getClientRects()),Tn).getOr(!1)},Ea.isAtStart=function(r){return!!r&&r.isAtStart()},Ea.isAtEnd=function(r){return!!r&&r.isAtEnd()},Ea.isTextPosition=function(r){return!!r&&Lt.isText(r.container())},Ea.isElementPosition=function(r){return!1===Ea.isTextPosition(r)};var Ts,ag,Ye=Mo,ia=Lt.isText,Fu=Lt.isBogus,sg=eo.nodeIndex,uf=function(r){var l=r.parentNode;return Fu(l)?uf(l):l},lg=function(r){return r?wr.reduce(r.childNodes,function(l,c){return Fu(c)&&"BR"!==c.nodeName?l=l.concat(lg(c)):l.push(c),l},[]):[]},_m=function(r){return function(l){return r===l}},zl=function(r){var l,c,h,m;return(ia(r)?"text()":r.nodeName.toLowerCase())+"["+(c=lg(uf(l=r)),h=wr.findIndex(c,_m(l),l),c=c.slice(0,h+1),m=wr.reduce(c,function(M,k,P){return ia(k)&&ia(c[P-1])&&M++,M},0),c=wr.filter(c,Lt.matchNodeNames(l.nodeName)),(h=wr.findIndex(c,_m(l),l))-m+"]")},wm=function(r,l){var c,h,m,M,k,P=[];return c=l.container(),h=l.offset(),ia(c)?m=function(N,F){for(;(N=N.previousSibling)&&ia(N);)F+=N.data.length;return F}(c,h):(h>=(M=c.childNodes).length?(m="after",h=M.length-1):m="before",c=M[h]),P.push(zl(c)),k=function(N,F,W){var q=[];for(F=F.parentNode;F!==N;F=F.parentNode)q.push(F);return q}(r,c),k=wr.filter(k,Rr(Lt.isBogus)),(P=P.concat(wr.map(k,function(N){return zl(N)}))).reverse().join("/")+","+m},ml=function(r,l){var c,h,m;return l?(l=(c=l.split(","))[0].split("/"),m=1<c.length?c[1]:"before",(h=wr.reduce(l,function(M,k){return(k=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(k))?("text()"===k[1]&&(k[1]="#text"),P=M,N=k[1],F=parseInt(k[2],10),W=lg(P),W=wr.filter(W,function(q,Z){return!ia(q)||!ia(W[Z-1])}),(W=wr.filter(W,Lt.matchNodeNames(N)))[F]):null;var P,N,F,W},r))?ia(h)?function(M,k){for(var P,N=M,F=0;ia(N);){if(P=N.data.length,F<=k&&k<=F+P){M=N,k-=F;break}if(!ia(N.nextSibling)){M=N,k=P;break}F+=P,N=N.nextSibling}return ia(M)&&k>M.data.length&&(k=M.data.length),Ye(M,k)}(h,parseInt(m,10)):(m="after"===m?sg(h)+1:sg(h),Ye(h.parentNode,m)):null):null},Wc=function(r,l){Lt.isText(l)&&0===l.data.length&&r.remove(l)},sp=function(r,l,c){var h,m,M,k,P,N,F;Lt.isDocumentFragment(c)?(M=r,k=l,N=kt.from((P=c).firstChild),F=kt.from(P.lastChild),k.insertNode(P),N.each(function(W){return Wc(M,W.previousSibling)}),F.each(function(W){return Wc(M,W.nextSibling)})):(h=r,l.insertNode(m=c),Wc(h,m.previousSibling),Wc(h,m.nextSibling))},ug=Lt.isContentEditableFalse,lp=function(r,l,c,h,m){var M,k=h[m?"startContainer":"endContainer"],P=h[m?"startOffset":"endOffset"],N=[],F=0,W=r.getRoot();for(Lt.isText(k)?N.push(c?function(q,Z,ht){var at,gt;for(gt=q(Z.data.slice(0,ht)).length,at=Z.previousSibling;at&&Lt.isText(at);at=at.previousSibling)gt+=q(at.data).length;return gt}(l,k,P):P):(P>=(M=k.childNodes).length&&M.length&&(F=1,P=Math.max(0,M.length-1)),N.push(r.nodeIndex(M[P],c)+F));k&&k!==W;k=k.parentNode)N.push(r.nodeIndex(k,c));return N},up=function(r,l,c){var h=0;return ge.each(r.select(l),function(m){if("all"!==m.getAttribute("data-mce-bogus"))return m!==c&&void h++}),h},xd=function(r,l){var c,h,m,M=l?"start":"end";h=r[M+"Offset"],Lt.isElement(c=r[M+"Container"])&&"TR"===c.nodeName&&(c=(m=c.childNodes)[Math.min(l?h:h-1,m.length-1)])&&r["set"+(l?"Start":"End")](c,h=l?0:c.childNodes.length)},cf=function(r){return xd(r,!0),xd(r,!1),r},df=function(r,l){var c;return Lt.isElement(r)&&(r=rr(r,l),ug(r))?r:R(r)&&(Lt.isText(r)&&A(r)&&(r=r.parentNode),ug(c=r.previousSibling)||ug(c=r.nextSibling))?c:void 0},Sm=function(r,l,c){var h=c.getNode(),m=h?h.nodeName:null,M=c.getRng();if(ug(h)||"IMG"===m)return{name:m,index:up(c.dom,m,h)};var k,P,N,F,W,q,Z,ht=df((k=M).startContainer,k.startOffset)||df(k.endContainer,k.endOffset);return ht?{name:m=ht.tagName,index:up(c.dom,m,ht)}:(q=(N=c).dom,(Z={}).start=lp(q,P=r,F=l,W=M,!0),N.isCollapsed()||(Z.end=lp(q,P,F,W,!1)),Z)},w0=function(r,l,c){var h={"data-mce-type":"bookmark",id:l,style:"overflow:hidden;line-height:0px"};return c?r.create("span",h,"&#xFEFF;"):r.create("span",h)},S0=function(r,l){var c=r.dom,h=r.getRng(),m=c.uniqueId(),M=r.isCollapsed(),k=r.getNode(),P=k.nodeName;if("IMG"===P)return{name:P,index:up(c,P,k)};var N=cf(h.cloneRange());if(!M){N.collapse(!1);var F=w0(c,m+"_end",l);sp(c,N,F)}(h=cf(h)).collapse(!0);var W=w0(c,m+"_start",l);return sp(c,h,W),r.moveToBookmark({id:m,keep:1}),{id:m}},hf={getBookmark:function(r,l,c){return 2===l?Sm(f,c,r):3===l?(m=(h=r).getRng(),{start:wm(h.dom.getRoot(),Ye.fromRangeStart(m)),end:wm(h.dom.getRoot(),Ye.fromRangeEnd(m))}):l?{rng:r.getRng()}:S0(r,!1);var h,m},getUndoBookmark:Ve(Sm,se,!0),getPersistentBookmark:S0},Cm="_mce_caret",Er=function(r){return Lt.isElement(r)&&r.id===Cm},du=function(r,l){for(;l&&l!==r;){if(l.id===Cm)return l;l=l.parentNode}return null},cp=Lt.isElement,Mm=Lt.isText,Fl=function(r){var l=r.parentNode;l&&l.removeChild(r)},dp=function(r,l){0===l.length?Fl(r):r.nodeValue=l},Wo=function(r){var l=f(r);return{count:r.length-l.length,text:l}},Tm=function(r,l){return Ih(r),l},Ih=function(r){if(cp(r)&&R(r)&&(j(r)?r.removeAttribute("data-mce-caret"):Fl(r)),Mm(r)){var l=f(function(c){try{return c.nodeValue}catch(h){return""}}(r));dp(r,l)}},bd={removeAndReposition:function(r,l){return Ye.isTextPosition(l)?function(r,l){return Mm(r)&&l.container()===r?(m=Wo((c=r).data.substr(0,(h=l).offset())),M=Wo(c.data.substr(h.offset())),0<(k=m.text+M.text).length?(dp(c,k),Ye(c,h.offset()-m.count)):h):Tm(r,l);var c,h,m,M,k}(r,l):(c=r,(h=l).container()===c.parentNode?function(r,l){var c,h,m,M=l.container(),k=(c=_e(M.childNodes),h=r,m=ao(c,h),-1===m?kt.none():kt.some(m)).map(function(P){return P<l.offset()?Ye(M,l.offset()-1):l}).getOr(l);return Ih(r),k}(c,h):Tm(c,h));var c,h},remove:Ih},ff=ys.detect().browser,Jd=Lt.isContentEditableFalse,Xi=function(r,l,c){var h,m,M,k,P,N=ni(l.getBoundingClientRect(),c);return"BODY"===r.tagName?(h=r.ownerDocument.documentElement,m=r.scrollLeft||h.scrollLeft,M=r.scrollTop||h.scrollTop):(P=r.getBoundingClientRect(),m=r.scrollLeft-P.left,M=r.scrollTop-P.top),N.left+=m,N.right+=m,N.top+=M,N.bottom+=M,N.width=1,0<(k=l.offsetWidth-l.clientWidth)&&(c&&(k*=-1),N.left+=k,N.right+=k),N},Qd=function(){return ff.isIE()||ff.isEdge()||ff.isFirefox()},fa=function(r){return Jd(r)||Lt.isTable(r)&&Qd()},th=Lt.isContentEditableFalse,Na=Lt.matchStyleValues("display","block table table-cell table-caption list-item"),gf=R,vl=A,pf=Lt.isElement,Dm=$e,yc=function(r){return 0<r},yl=function(r){return r<0},mf=function(r,l){for(var c;c=r(l);)if(!vl(c))return c;return null},Ph=function(r,l,c,h,m){var M=new Zi(r,h);if(yl(l)){if((th(r)||vl(r))&&c(r=mf(M.prev,!0)))return r;for(;r=mf(M.prev,m);)if(c(r))return r}if(yc(l)){if((th(r)||vl(r))&&c(r=mf(M.next,!0)))return r;for(;r=mf(M.next,m);)if(c(r))return r}return null},jc=function(r,l){for(;r&&r!==l;){if(Na(r))return r;r=r.parentNode}return null},Hu=function(r,l,c){return jc(r.container(),c)===jc(l.container(),c)},Eh=function(r,l){var c,h;return l?(c=l.container(),h=l.offset(),pf(c)?c.childNodes[h+r]:null):null},Am=function(r,l){var c=l.ownerDocument.createRange();return r?(c.setStartBefore(l),c.setEndBefore(l)):(c.setStartAfter(l),c.setEndAfter(l)),c},dr=function(r,l,c){var h,m,M,k;for(m=r?"previousSibling":"nextSibling";c&&c!==l;){if(gf(h=c[m])&&(h=h[m]),th(h)){if(k=c,jc(h,M=l)===jc(k,M))return h;break}if(Dm(h))break;c=c.parentNode}return null},Nh=Ve(Am,!0),eh=Ve(Am,!1),fp=function(r,l,c){var h,m,M,k,P=Ve(dr,!0,l),N=Ve(dr,!1,l);if(M=c.startOffset,A(m=c.startContainer)){if(pf(m)||(m=m.parentNode),"before"===(k=m.getAttribute("data-mce-caret"))&&fa(h=m.nextSibling))return Nh(h);if("after"===k&&fa(h=m.previousSibling))return eh(h)}if(!c.collapsed)return c;if(Lt.isText(m)){if(gf(m)){if(1===r){if(h=N(m))return Nh(h);if(h=P(m))return eh(h)}if(-1===r){if(h=P(m))return eh(h);if(h=N(m))return Nh(h)}return c}if(ft(m)&&M>=m.data.length-1)return 1===r&&(h=N(m))?Nh(h):c;if(ut(m)&&M<=1)return-1===r&&(h=P(m))?eh(h):c;if(M===m.data.length)return(h=N(m))?Nh(h):c;if(0===M)return(h=P(m))?eh(h):c}return c},vf=function(r,l){return kt.from(Eh(r?0:-1,l)).filter(th)},gp=function(r,l,c){var h=fp(r,l,c);return-1===r?Mo.fromRangeStart(h):Mo.fromRangeEnd(h)},no=function(r){return kt.from(r.getNode()).map(Ce_fromDom)},ln=function(r,l){for(;l=r(l);)if(l.isVisible())return l;return l},ga=function(r,l){var c=Hu(r,l);return!(c||!Lt.isBr(r.getNode()))||c};(ag=Ts||(Ts={}))[ag.Backwards=-1]="Backwards",ag[ag.Forwards=1]="Forwards";var Vu,xf,cg=Lt.isContentEditableFalse,Wu=Lt.isText,pp=Lt.isElement,dg=Lt.isBr,Gc=$e,M0=function(r){return de(r)||!!wn(l=r)&&!0!==Ei(_e(l.getElementsByTagName("*")),function(c,h){return c||Mt(h)},!1);var l},nh=rn,km=function(r,l){return r.hasChildNodes()&&l<r.childNodes.length?r.childNodes[l]:null},mp=function(r,l){if(yc(r)){if(Gc(l.previousSibling)&&!Wu(l.previousSibling))return Ye.before(l);if(Wu(l))return Ye(l,0)}if(yl(r)){if(Gc(l.nextSibling)&&!Wu(l.nextSibling))return Ye.after(l);if(Wu(l))return Ye(l,l.data.length)}return yl(r)?dg(l)?Ye.before(l):Ye.after(l):Ye.before(l)},hg=function(r,l,c){var h,m,M,k,P;if(!pp(c)||!l)return null;if(l.isEqual(Ye.after(c))&&c.lastChild){if(P=Ye.after(c.lastChild),yl(r)&&Gc(c.lastChild)&&pp(c.lastChild))return dg(c.lastChild)?Ye.before(c.lastChild):P}else P=l;var N,F,W,q=P.container(),Z=P.offset();if(Wu(q)){if(yl(r)&&0<Z)return Ye(q,--Z);if(yc(r)&&Z<q.length)return Ye(q,++Z);h=q}else{if(yl(r)&&0<Z&&(m=km(q,Z-1),Gc(m)))return!M0(m)&&(M=Ph(m,r,nh,m))?Wu(M)?Ye(M,M.data.length):Ye.after(M):Wu(m)?Ye(m,m.data.length):Ye.before(m);if(yc(r)&&Z<q.childNodes.length&&(m=km(q,Z),Gc(m)))return dg(m)?(N=c,(W=(F=m).nextSibling)&&Gc(W)?Wu(W)?Ye(W,0):Ye.before(W):hg(Ts.Forwards,Ye.after(F),N)):!M0(m)&&(M=Ph(m,r,nh,m))?Wu(M)?Ye(M,0):Ye.before(M):Wu(m)?Ye(m,0):Ye.after(m);h=m||P.getNode()}return(yc(r)&&P.isAtEnd()||yl(r)&&P.isAtStart())&&(h=Ph(h,r,Oe(!0),c,!0),nh(h,c))?mp(r,h):(m=Ph(h,r,nh,c),!(k=wr.last(Vn(function(ht,at){for(var gt=[];ht&&ht!==at;)gt.push(ht),ht=ht.parentNode;return gt}(q,c),cg)))||m&&k.contains(m)?m?mp(r,m):null:P=yc(r)?Ye.after(k):Ye.before(k))},hu=function(r){return{next:function(l){return hg(Ts.Forwards,l,r)},prev:function(l){return hg(Ts.Backwards,l,r)}}},vp=function(r){return Ye.isTextPosition(r)?0===r.offset():$e(r.getNode())},T0=function(r){if(Ye.isTextPosition(r)){var l=r.container();return r.offset()===l.data.length}return $e(r.getNode(!0))},Uc=function(r,l){return!Ye.isTextPosition(r)&&!Ye.isTextPosition(l)&&r.getNode()===l.getNode(!0)},ju=function(r,l,c){var h=hu(l);return kt.from(r?h.next(c):h.prev(c))},Rh=function(r,l,c){return ju(r,l,c).bind(function(h){return Hu(c,h,l)&&function(r,l,c){return r?!Uc(l,c)&&!(!Ye.isTextPosition(h=l)&&Lt.isBr(h.getNode()))&&T0(l)&&vp(c):!Uc(c,l)&&vp(l)&&T0(c);var h}(r,c,h)?ju(r,l,h):kt.some(h)})},Im=function(r,l,c,h){return Rh(r,l,c).bind(function(m){return h(m)?Im(r,l,m,h):kt.some(m)})},Vr=function(r,l){var c,h,m,M,k,P=r?l.firstChild:l.lastChild;return Lt.isText(P)?kt.some(Ye(P,r?0:P.data.length)):P?$e(P)?kt.some(r?Ye.before(P):Lt.isBr(k=P)?Ye.before(k):Ye.after(k)):(h=l,m=P,M=(c=r)?Ye.before(m):Ye.after(m),ju(c,h,M)):kt.none()},yp=Ve(ju,!0),xp=Ve(ju,!1),mi={fromPosition:ju,nextPosition:yp,prevPosition:xp,navigate:Rh,navigateIgnore:Im,positionIn:Vr,firstPositionIn:Ve(Vr,!0),lastPositionIn:Ve(Vr,!1)},bp=function(r,l){return Lt.isElement(l)&&r.isBlock(l)&&!l.innerHTML&&!sn.ie&&(l.innerHTML='<br data-mce-bogus="1" />'),l},_d=function(r,l){return mi.lastPositionIn(r).fold(function(){return!1},function(c){return l.setStart(c.container(),c.offset()),l.setEnd(c.container(),c.offset()),!0})},xc=function(r,l,c){return!(!1!==l.hasChildNodes()||!du(r,l)||(m=c,M=(h=l).ownerDocument.createTextNode(_),h.appendChild(M),m.setStart(M,0),m.setEnd(M,0),0));var h,m,M},_p=function(r,l,c,h){var m,M,k,P,N=c[l?"start":"end"],F=r.getRoot();if(N){for(k=N[0],M=F,m=N.length-1;1<=m;m--){if(P=M.childNodes,xc(F,M,h))return!0;if(N[m]>P.length-1)return!!xc(F,M,h)||_d(M,h);M=P[N[m]]}3===M.nodeType&&(k=Math.min(N[0],M.nodeValue.length)),1===M.nodeType&&(k=Math.min(N[0],M.childNodes.length)),l?h.setStart(M,k):h.setEnd(M,k)}return!0},Lh=function(r){return Lt.isText(r)&&0<r.data.length},Pm=function(r,l,c){var h,m,M,k,P,N,F=r.get(c.id+"_"+l),W=c.keep;if(F){if(h=F.parentNode,"start"===l?W?F.hasChildNodes()?(h=F.firstChild,m=1):Lh(F.nextSibling)?(h=F.nextSibling,m=0):Lh(F.previousSibling)?(h=F.previousSibling,m=F.previousSibling.data.length):(h=F.parentNode,m=r.nodeIndex(F)+1):m=r.nodeIndex(F):W?F.hasChildNodes()?(h=F.firstChild,m=1):Lh(F.previousSibling)?(h=F.previousSibling,m=F.previousSibling.data.length):(h=F.parentNode,m=r.nodeIndex(F)):m=r.nodeIndex(F),P=h,N=m,!W){for(k=F.previousSibling,M=F.nextSibling,ge.each(ge.grep(F.childNodes),function(q){Lt.isText(q)&&(q.nodeValue=q.nodeValue.replace(/\uFEFF/g,""))});F=r.get(c.id+"_"+l);)r.remove(F,!0);k&&M&&k.nodeType===M.nodeType&&Lt.isText(k)&&!sn.opera&&(m=k.nodeValue.length,k.appendData(M.nodeValue),r.remove(M),P=k,N=m)}return kt.some(Ye(P,N))}return kt.none()},Em=function(r,l,c){return hf.getBookmark(r,l,c)},gg=function(r,l){(function(r,l){var c,h,m,M,k,P,N,F,W,q,Z,ht,at,gt,rt,mt=r.dom;if(l){if(ge.isArray(l.start))return gt=l,rt=(at=mt).createRng(),_p(at,!0,gt,rt)&&_p(at,!1,gt,rt)?kt.some(rt):kt.none();if("string"==typeof l.start)return kt.some((q=l,Z=(W=mt).createRng(),ht=ml(W.getRoot(),q.start),Z.setStart(ht.container(),ht.offset()),ht=ml(W.getRoot(),q.end),Z.setEnd(ht.container(),ht.offset()),Z));if(l.hasOwnProperty("id"))return N=Pm(m=mt,"start",M=l),F=Pm(m,"end",M),Jr(N,(P=N,(k=F).isSome()?k:P),function(Dt,Pt){var wt=m.createRng();return wt.setStart(bp(m,Dt.container()),Dt.offset()),wt.setEnd(bp(m,Pt.container()),Pt.offset()),wt});if(l.hasOwnProperty("name"))return kt.from((c=mt).select((h=l).name)[h.index]).map(function(Dt){var Pt=c.createRng();return Pt.selectNode(Dt),Pt});if(l.hasOwnProperty("rng"))return kt.some(l.rng)}return kt.none()})(r,l).each(function(c){r.setRng(c)})},Hl=function(r){return Lt.isElement(r)&&"SPAN"===r.tagName&&"bookmark"===r.getAttribute("data-mce-type")},ih=function(r){return r&&3===r.nodeType&&/^([\t \r\n]+|)$/.test(r.nodeValue)},Sd=function(r,l,c){return"color"!==c&&"backgroundColor"!==c||(l=r.toHex(l)),"fontWeight"===c&&700===l&&(l="bold"),"fontFamily"===c&&(l=l.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+l},xi_moveStart=function(r,l,c){var h,m,M,k=c.startOffset,P=c.startContainer;if((c.startContainer!==c.endContainer||!function(r){return r&&/^(IMG)$/.test(r.nodeName)}(c.startContainer.childNodes[c.startOffset]))&&1===P.nodeType)for(k<(M=P.childNodes).length?h=new Zi(P=M[k],r.getParent(P,r.isBlock)):(h=new Zi(P=M[M.length-1],r.getParent(P,r.isBlock))).next(!0),m=h.current();m;m=h.next())if(3===m.nodeType&&!ih(m))return c.setStart(m,0),void l.setRng(c)},xi_getNonWhiteSpaceSibling=function(r,l,c){if(r)for(l=l?"nextSibling":"previousSibling",r=c?r:r[l];r;r=r[l])if(1===r.nodeType||!ih(r))return r},xi_isTextBlock=function(r,l){return l.nodeType&&(l=l.nodeName),!!r.schema.getTextBlockElements()[l.toLowerCase()]},xi_isValid=function(r,l,c){return r.schema.isValidChild(l,c)},xi_isWhiteSpaceNode=ih,xi_replaceVars=function(r,l){return"string"!=typeof r?r=r(l):l&&(r=r.replace(/%(\w+)/g,function(c,h){return l[h]||c})),r},xi_isEq=function(r,l){return r=""+((r=r||"").nodeName||r),l=""+((l=l||"").nodeName||l),r.toLowerCase()===l.toLowerCase()},xi_normalizeStyleValue=Sd,xi_getStyle=function(r,l,c){return Sd(r,r.getStyle(l,c),c)},xi_getTextDecoration=function(r,l){var c;return r.getParent(l,function(h){return(c=r.getStyle(h,"text-decoration"))&&"none"!==c}),c},xi_getParents=function(r,l,c){return r.getParents(l,c,r.getRoot())},fu=Hl,Gu=xi_getParents,Oh=xi_isWhiteSpaceNode,Bh=xi_isTextBlock,wp=function(r,l){for(void 0===l&&(l=3===r.nodeType?r.length:r.childNodes.length);r&&r.hasChildNodes();)(r=r.childNodes[l])&&(l=3===r.nodeType?r.length:r.childNodes.length);return{node:r,offset:l}},pg=function(r,l){for(var c=l;c;){if(1===c.nodeType&&r.getContentEditable(c))return"false"===r.getContentEditable(c)?c:l;c=c.parentNode}return l},mg=function(r,l,c,h){var m,M,k=c.nodeValue;return void 0===h&&(h=r?k.length:0),r?(m=k.lastIndexOf(" ",h),-1!==(m=(M=k.lastIndexOf("\xa0",h))<m?m:M)&&!l&&(m<h||!r)&&m<=k.length&&m++):(m=k.indexOf(" ",h),M=k.indexOf("\xa0",h),m=-1!==m&&(-1===M||m<M)?m:M),m},Sp=function(r,l,c,h,m,M){var k,P,N,F;if(3===c.nodeType){if(-1!==(N=mg(m,M,c,h)))return{container:c,offset:N};F=c}for(k=new Zi(c,r.getParent(c,r.isBlock)||l);P=k[m?"prev":"next"]();)if(3!==P.nodeType||fu(P.parentNode)){if(r.isBlock(P)||xi_isEq(P,"BR"))break}else if(-1!==(N=mg(m,M,F=P)))return{container:P,offset:N};if(F)return{container:F,offset:h=m?0:F.length}},Sr=function(r,l,c,h,m){var M,k,P,N;for(3===h.nodeType&&0===h.nodeValue.length&&h[m]&&(h=h[m]),M=Gu(r,h),k=0;k<M.length;k++)for(P=0;P<l.length;P++)if((!("collapsed"in(N=l[P]))||N.collapsed===c.collapsed)&&r.is(M[k],N.selector))return M[k];return h},Nm=function(r,l,c,h){var m,M=r.dom,k=M.getRoot();if(l[0].wrapper||(m=M.getParent(c,l[0].block,k)),!m){var P=M.getParent(c,"LI,TD,TH");m=M.getParent(3===c.nodeType?c.parentNode:c,function(N){return N!==k&&Bh(r,N)},P)}if(m&&l[0].wrapper&&(m=Gu(M,m,"ul,ol").reverse()[0]||m),!m)for(m=c;m[h]&&!M.isBlock(m[h])&&!xi_isEq(m=m[h],"br"););return m||c},vg=function(r,l,c,h,m,M,k){var P,N,F,W,q,Z;if(P=N=k?c:m,W=k?"previousSibling":"nextSibling",q=r.getRoot(),3===P.nodeType&&!Oh(P)&&(k?0<h:M<P.nodeValue.length))return P;for(;;){if(!l[0].block_expand&&r.isBlock(N))return N;for(F=N[W];F;F=F[W])if(!fu(F)&&!Oh(F)&&("BR"!==(Z=F).nodeName||!Z.getAttribute("data-mce-bogus")||Z.nextSibling))return N;if(N===q||N.parentNode===q){P=N;break}N=N.parentNode}return P},bc=function(r,l,c,h){var m,M=l.startContainer,k=l.startOffset,P=l.endContainer,N=l.endOffset,F=r.dom;return 1===M.nodeType&&M.hasChildNodes()&&3===(M=rr(M,k)).nodeType&&(k=0),1===P.nodeType&&P.hasChildNodes()&&3===(P=rr(P,l.collapsed?N:N-1)).nodeType&&(N=P.nodeValue.length),M=pg(F,M),P=pg(F,P),(fu(M.parentNode)||fu(M))&&(M=fu(M)?M:M.parentNode,3===(M=l.collapsed?M.previousSibling||M:M.nextSibling||M).nodeType&&(k=l.collapsed?M.length:0)),(fu(P.parentNode)||fu(P))&&(P=fu(P)?P:P.parentNode,3===(P=l.collapsed?P.nextSibling||P:P.previousSibling||P).nodeType&&(N=l.collapsed?0:P.length)),l.collapsed&&((m=Sp(F,r.getBody(),M,k,!0,h))&&(M=m.container,k=m.offset),(m=Sp(F,r.getBody(),P,N,!1,h))&&(P=m.container,N=m.offset)),c[0].inline&&(P=h?P:function(W,q){var Z=wp(W,q);if(Z.node){for(;Z.node&&0===Z.offset&&Z.node.previousSibling;)Z=wp(Z.node.previousSibling);Z.node&&0<Z.offset&&3===Z.node.nodeType&&" "===Z.node.nodeValue.charAt(Z.offset-1)&&1<Z.offset&&(W=Z.node).splitText(Z.offset-1)}return W}(P,N)),(c[0].inline||c[0].block_expand)&&(c[0].inline&&3===M.nodeType&&0!==k||(M=vg(F,c,M,k,P,N,!0)),c[0].inline&&3===P.nodeType&&N!==P.nodeValue.length||(P=vg(F,c,M,k,P,N,!1))),c[0].selector&&!1!==c[0].expand&&!c[0].inline&&(M=Sr(F,c,l,M,"previousSibling"),P=Sr(F,c,l,P,"nextSibling")),(c[0].block||c[0].selector)&&(M=Nm(r,c,M,"previousSibling"),P=Nm(r,c,P,"nextSibling"),c[0].block&&(F.isBlock(M)||(M=vg(F,c,M,k,P,N,!0)),F.isBlock(P)||(P=vg(F,c,M,k,P,N,!1)))),1===M.nodeType&&(k=F.nodeIndex(M),M=M.parentNode),1===P.nodeType&&(N=F.nodeIndex(P)+1,P=P.parentNode),{startContainer:M,startOffset:k,endContainer:P,endOffset:N}},xl=ge.each,Cd=function(r,l,c){var h,m,M,k,P,N,F,W=l.startContainer,q=l.startOffset,Z=l.endContainer,ht=l.endOffset;if(0<(F=r.select("td[data-mce-selected],th[data-mce-selected]")).length)xl(F,function(wt){c([wt])});else{var at,gt,rt,dt=function(wt){var Ht;return 3===(Ht=wt[0]).nodeType&&Ht===W&&q>=Ht.nodeValue.length&&wt.splice(0,1),Ht=wt[wt.length-1],0===ht&&0<wt.length&&Ht===Z&&3===Ht.nodeType&&wt.splice(wt.length-1,1),wt},mt=function(wt,Ht,ce){for(var Xt=[];wt&&wt!==ce;wt=wt[Ht])Xt.push(wt);return Xt},Dt=function(wt,Ht){do{if(wt.parentNode===Ht)return wt;wt=wt.parentNode}while(wt)},Pt=function(wt,Ht,ce){var Xt=ce?"nextSibling":"previousSibling";for(P=(k=wt).parentNode;k&&k!==Ht;k=P)P=k.parentNode,(N=mt(k===wt?k:k[Xt],Xt)).length&&(ce||N.reverse(),c(dt(N)))};if(1===W.nodeType&&W.hasChildNodes()&&(W=W.childNodes[q]),1===Z.nodeType&&Z.hasChildNodes()&&(gt=ht,--gt>(rt=(at=Z).childNodes).length-1?gt=rt.length-1:gt<0&&(gt=0),Z=rt[gt]||at),W===Z)return c(dt([W]));for(h=r.findCommonAncestor(W,Z),k=W;k;k=k.parentNode){if(k===Z)return Pt(W,h,!0);if(k===h)break}for(k=Z;k;k=k.parentNode){if(k===W)return Pt(Z,h);if(k===h)break}m=Dt(W,h)||W,M=Dt(Z,h)||Z,Pt(W,m,!0),(N=mt(m===W?m:m.nextSibling,"nextSibling",M===Z?M.nextSibling:M)).length&&c(dt(N)),Pt(Z,M)}},rh=(Vu=Il,{get:function(r){if(!Vu(r))throw new Error("Can only get text value of a text node");return xf(r).getOr("")},getOption:xf=function(r){return Vu(r)?kt.from(r.dom().nodeValue):kt.none()},set:function(r,l){if(!Vu(r))throw new Error("Can only set raw text value of a text node");r.dom().nodeValue=l}}),zh=function(r){return rh.get(r)},bl=function(r,l,c,h){var M,k=l.uid,P=void 0===k?(M=(new Date).getTime(),"mce-annotation_"+Math.floor(1e9*Math.random())+ ++zu+String(M)):k,N=function(rt,dt){var mt={};for(var Dt in rt)Object.prototype.hasOwnProperty.call(rt,Dt)&&dt.indexOf(Dt)<0&&(mt[Dt]=rt[Dt]);if(null!=rt&&"function"==typeof Object.getOwnPropertySymbols){var Pt=0;for(Dt=Object.getOwnPropertySymbols(rt);Pt<Dt.length;Pt++)dt.indexOf(Dt[Pt])<0&&Object.prototype.propertyIsEnumerable.call(rt,Dt[Pt])&&(mt[Dt[Pt]]=rt[Dt[Pt]])}return mt}(l,["uid"]),F=Ce_fromTag("span",r);Co(F,os()),Va(F,""+Th(),P),Va(F,""+Bl(),c);var W,q=h(P,N),Z=q.attributes,at=q.classes,gt=void 0===at?[]:at;return ns(F,void 0===Z?{}:Z),W=F,Ke(gt,function(rt){Co(W,rt)}),F};function Lm(r){var l,c=(l={},{register:function(m,M){l[m]={name:m,settings:M}},lookup:function(m){return l.hasOwnProperty(m)?kt.from(l[m]).map(function(M){return M.settings}):kt.none()}});!function(r,l){r.on("init",function(){r.serializer.addNodeFilter("span",function(c){Ke(c,function(h){var m;(m=h,kt.from(m.attributes.map[Bl()]).bind(l.lookup)).each(function(M){!1===M.persistent&&h.unwrap()})})})})}(r,c);var h=function(r,l){var c,m,M=_a({}),k=function(F,W){P(F,function(q){return W(q),q})},P=function(F,W){var q=M.get(),Z=W(q.hasOwnProperty(F)?q[F]:{listeners:[],previous:_a(kt.none())});q[F]=Z,M.set(q)},N=(c=function(){var F,q,Z=M.get(),ht=(F=Qo(Z),(q=Ln.call(F,0)).sort(void 0),q);Ke(ht,function(at){P(at,function(gt){var rt=gt.previous.get();return uu(r,kt.some(at)).fold(function(){var dt;rt.isSome()&&(k(dt=at,function(mt){Ke(mt.listeners,function(Dt){return Dt(!1,dt)})}),gt.previous.set(kt.none()))},function(dt){var mt,Dt,Pt,wt=dt.uid,Ht=dt.name,ce=dt.elements;rt.is(wt)||(Dt=wt,Pt=ce,k(mt=Ht,function(Xt){Ke(Xt.listeners,function(xe){return xe(!0,mt,{uid:Dt,nodes:_i(Pt,function(te){return te.dom()})})})}),gt.previous.set(kt.some(wt)))}),{previous:gt.previous,listeners:gt.listeners}})})},m=null,{cancel:function(){null!==m&&(Rt.clearTimeout(m),m=null)},throttle:function(){for(var F=[],W=0;W<arguments.length;W++)F[W]=arguments[W];null!==m&&Rt.clearTimeout(m),m=Rt.setTimeout(function(){c.apply(null,F),m=null},30)}});return r.on("remove",function(){N.cancel()}),r.on("nodeChange",function(){N.throttle()}),{addListener:function(F,W){P(F,function(q){return{previous:q.previous,listeners:q.listeners.concat([W])}})}}}(r);return{register:function(m,M){c.register(m,M)},annotate:function(m,M){c.lookup(m).each(function(k){!function(r,l,c,h){r.undoManager.transact(function(){var m,M,k,P,N=r.selection.getRng();if(N.collapsed&&(P=bc(m=r,M=N,[{inline:!0}],3===(k=M).startContainer.nodeType&&k.startContainer.nodeValue.length>=k.startOffset&&"\xa0"===k.startContainer.nodeValue[k.startOffset]),M.setStart(P.startContainer,P.startOffset),M.setEnd(P.endContainer,P.endOffset),m.selection.setRng(M)),r.selection.getRng().collapsed){var F=bl(r.getDoc(),h,l,c.decorate);wa(F,"\xa0"),r.selection.getRng().insertNode(F.dom()),r.selection.select(F.dom())}else{var W=hf.getPersistentBookmark(r.selection,!1),q=r.selection.getRng();(function(r,l,c,h,m){var M=[],k=bl(r.getDoc(),m,c,h),P=_a(kt.none()),N=function(){P.set(kt.none())},F=function(q){Ke(q,W)},W=function(q){var Z,ht;switch(function(r,l,c,h){return ul(l).fold(function(){return"skipping"},function(m){return"br"===h||Il(k=l)&&"\ufeff"===zh(k)?"valid":es(M=l)&&Ll(M,os())?"existing":Er(l)?"caret":xi_isValid(r,c,h)&&xi_isValid(r,la(m),c)?"valid":"invalid-child";var M,k})}(r,q,"span",la(q))){case"invalid-child":N();var at=bs(q);F(at),N();break;case"valid":var gt=P.get().getOrThunk(function(){var rt=Ms(k);return M.push(rt),P.set(kt.some(rt)),rt});$r(Z=q,ht=gt),da(ht,Z)}};Cd(r.dom,l,function(q){var Z;N(),Z=_i(q,Ce_fromDom),F(Z)})})(r,q,l,c.decorate,h),r.selection.moveToBookmark(W)}})}(r,m,k,M)})},annotationChanged:function(m,M){h.addListener(m,M)},remove:function(m){uu(r,kt.some(m)).each(function(M){Ke(M.elements,Yd)})},getAll:function(m){var k,P,N,F,W,q=(k=m,P=Ce_fromDom(r.getBody()),N=Ho(P,"["+Bl()+'="'+k+'"]'),F={},Ke(N,function(Z){var ht=Pl(Z,Th()),at=F.hasOwnProperty(ht)?F[ht]:[];F[ht]=at.concat([Z])}),F);return W=function(Z){return _i(Z,function(ht){return ht.dom()})},function(r,l){var c={};return Pu(r,function(h,m){var M={k:m,v:W(h)};c[M.k]=M.v}),c}(q)}}}var qu=function(r,l){var c=r.getParent(l,r.isBlock);return c&&"LI"===c.nodeName?c:null},xg=function(r,l){var c=Ye.after(r),h=hu(l).prev(c);return h?h.toRange():null},A0=function(r,l,c,h){var m,k,P,N,F,q,Z,ht,at,gt,rt,dt,mt,Dt,Pt,wt,Ht,ce=(m=l,F=r.serialize(h),P=(k=m.createFragment(F)).firstChild,N=k.lastChild,P&&"META"===P.nodeName&&P.parentNode.removeChild(P),N&&"mce_marker"===N.id&&N.parentNode.removeChild(N),k),Xt=qu(l,c.startContainer),xe=function(r){return 0<r.length&&(!(l=r[r.length-1]).firstChild||function(r){return r&&r.firstChild&&r.firstChild===r.lastChild&&("\xa0"===(l=r.firstChild).data||Lt.isBr(l));var l}(l))?r.slice(0,-1):r;var l}(function(r){return ge.grep(r.childNodes,function(l){return"LI"===l.nodeName})}(ce.firstChild)),te=l.getRoot(),Ee=function(be){var Ne=Ye.fromRangeStart(c),Cn=hu(l.getRoot()),Ae=1===be?Cn.prev(Ne):Cn.next(Ne);return!Ae||qu(l,Ae.getNode())!==Xt};return Ee(1)?function(r,l,c){var m,M,k,P=r.parentNode;return ge.each(l,function(N){P.insertBefore(N,r)}),m=c,M=Ye.before(r),(k=hu(m).next(M))?k.toRange():null}(Xt,xe,te):Ee(2)?(q=Xt,ht=te,l.insertAfter((Z=xe).reverse(),q),xg(Z[0],ht)):(gt=xe,rt=te,dt=at=Xt,Dt=(mt=c).cloneRange(),Pt=mt.cloneRange(),Dt.setStartBefore(dt),Pt.setEndAfter(dt),wt=[Dt.cloneContents(),Pt.cloneContents()],(Ht=at.parentNode).insertBefore(wt[0],at),ge.each(gt,function(be){Ht.insertBefore(be,at)}),Ht.insertBefore(wt[1],at),Ht.removeChild(at),xg(gt[gt.length-1],rt))},Fm=ge.each,Hm=function(r){this.compare=function(l,c){if(l.nodeName!==c.nodeName)return!1;var h=function(M){var k={};return Fm(r.getAttribs(M),function(P){var N=P.nodeName.toLowerCase();0!==N.indexOf("_")&&"style"!==N&&0!==N.indexOf("data-")&&(k[N]=r.getAttrib(M,N))}),k},m=function(M,k){var P,N;for(N in M)if(M.hasOwnProperty(N)){if(void 0===(P=k[N])||M[N]!==P)return!1;delete k[N]}for(N in k)if(k.hasOwnProperty(N))return!1;return!0};return!(!m(h(l),h(c))||!m(r.parseStyle(r.getAttrib(l,"style")),r.parseStyle(r.getAttrib(c,"style")))||Hl(l)||Hl(c))}},oh=function(r){qd(r),da(r,Ce_fromHtml('<br data-mce-bogus="1">'))},Tp=function(r){fc(r).each(function(l){va(l).each(function(c){Hs(r)&&v(l)&&Hs(c)&&Fo(l)})})},Vm=ge.makeMap;function k0(r){var l,c,h,m,M,k=[];return l=(r=r||{}).indent,c=Vm(r.indent_before||""),h=Vm(r.indent_after||""),m=to.getEncodeFunc(r.entity_encoding||"raw",r.entities),M="html"===r.element_format,{start:function(P,N,F){var W,q,Z,ht;if(l&&c[P]&&0<k.length&&0<(ht=k[k.length-1]).length&&"\n"!==ht&&k.push("\n"),k.push("<",P),N)for(W=0,q=N.length;W<q;W++)k.push(" ",(Z=N[W]).name,'="',m(Z.value,!0),'"');k[k.length]=!F||M?">":" />",F&&l&&h[P]&&0<k.length&&0<(ht=k[k.length-1]).length&&"\n"!==ht&&k.push("\n")},end:function(P){var N;k.push("</",P,">"),l&&h[P]&&0<k.length&&0<(N=k[k.length-1]).length&&"\n"!==N&&k.push("\n")},text:function(P,N){0<P.length&&(k[k.length]=N?P:m(P))},cdata:function(P){k.push("<![CDATA[",P,"]]>")},comment:function(P){k.push("\x3c!--",P,"--\x3e")},pi:function(P,N){N?k.push("<?",P," ",m(N),"?>"):k.push("<?",P,"?>"),l&&k.push("\n")},doctype:function(P){k.push("<!DOCTYPE",P,">",l?"\n":"")},reset:function(){k.length=0},getContent:function(){return k.join("").replace(/\n$/,"")}}}function ah(r,l){void 0===l&&(l=su());var c=k0(r);return(r=r||{}).validate=!("validate"in r)||r.validate,{serialize:function(h){var m,M;M=r.validate,m={3:function(P){c.text(P.value,P.raw)},8:function(P){c.comment(P.value)},7:function(P){c.pi(P.name,P.value)},10:function(P){c.doctype(P.value)},4:function(P){c.cdata(P.value)},11:function(P){if(P=P.firstChild)for(;k(P),P=P.next;);}},c.reset();var k=function(P){var N,F,W,q,Z,ht,at,gt,rt,dt=m[P.type];if(dt)dt(P);else{if(N=P.name,F=P.shortEnded,W=P.attributes,M&&W&&1<W.length&&((ht=[]).map={},rt=l.getElementRule(P.name))){for(at=0,gt=rt.attributesOrder.length;at<gt;at++)(q=rt.attributesOrder[at])in W.map&&(ht.map[q]=Z=W.map[q],ht.push({name:q,value:Z}));for(at=0,gt=W.length;at<gt;at++)(q=W[at].name)in ht.map||(ht.map[q]=Z=W.map[q],ht.push({name:q,value:Z}));W=ht}if(c.start(P.name,W,F),!F){if(P=P.firstChild)for(;k(P),P=P.next;);c.end(N)}}};return 1!==h.type||r.inner?m[11](h):k(h),c.getContent()}}}var _f=function(r){return r.collapsed?r:function(r){var l=Ye.fromRangeStart(r),c=Ye.fromRangeEnd(r),h=r.commonAncestorContainer;return mi.fromPosition(!1,h,c).map(function(m){return!Hu(l,c,h)&&Hu(l,m,h)?(M=l.container(),k=l.offset(),P=m.container(),N=m.offset(),(F=Rt.document.createRange()).setStart(M,k),F.setEnd(P,N),F):r;var M,k,P,N,F}).getOr(r)}(r)},Hh=Lt.matchNodeNames("td th"),Ys=function(r,l){var c,h,m=r.selection.getRng(),M=m.startContainer,k=m.startOffset;m.collapsed&&(h=k,Lt.isText(c=M)&&"\xa0"===c.nodeValue[h-1])&&Lt.isText(M)&&(M.insertData(k-1," "),M.deleteData(k,1),m.setStart(M,k),m.setEnd(M,k),r.selection.setRng(m)),r.selection.setContent(l)},sh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Wm=function(r,l,c){var h=r.getParam(l,c);if(-1!==h.indexOf("=")){var m=r.getParam(l,"","hash");return m.hasOwnProperty(r.id)?m[r.id]:c}return h},wf=function(r){return r.getParam("content_security_policy","")},La=function(r){if(r.getParam("force_p_newlines",!1))return"p";var l=r.getParam("forced_root_block","p");return!1===l?"":l},wc=function(r){return r.getParam("forced_root_block_attrs",{})},pt=function(r){return r.getParam("automatic_uploads",!0,"boolean")},Ct=function(r){return r.getParam("images_reuse_filename",!1,"boolean")},Qt=function(r){return r.getParam("images_upload_url","","string")},ve=function(r){return r.getParam("images_upload_base_path","","string")},Se=function(r){return r.getParam("images_upload_credentials",!1,"boolean")},me=function(r){return r.getParam("images_upload_handler",null,"function")},ae=function(r){return r.getParam("content_css_cors",!1,"boolean")},Sn=function(r,l){if(!l)return l;var c=l.container(),h=l.offset();return r?E(c)?Lt.isText(c.nextSibling)?Ye(c.nextSibling,0):Ye.after(c):$(l)?Ye(c,h+1):l:E(c)?Lt.isText(c.previousSibling)?Ye(c.previousSibling,c.previousSibling.data.length):Ye.before(c):K(l)?Ye(c,h-1):l},jn={isInlineTarget:function(r,l){return Ru(Ce_fromDom(l),function(r){return r.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(r))},findRootInline:function(r,l,c){var h,m,k=(h=r,m=l,Vn(eo.DOM.getParents(c.container(),"*",m),h));return kt.from(k[k.length-1])},isRtl:function(r){return"rtl"===eo.DOM.getStyle(r,"direction",!0)||sh.test(r.textContent)},isAtZwsp:function(r){return $(r)||K(r)},normalizePosition:Sn,normalizeForwards:Ve(Sn,!0),normalizeBackwards:Ve(Sn,!1),hasSameParentBlock:function(r,l,c){var h=jc(l,r),m=jc(c,r);return h&&h===m}},vi=function(r,l){return xs(r,l)?mc(l,function(h){return T(h)||U(h)},(c=r,function(h){return jr(c,Ce_fromDom(h.dom().parentNode))})):kt.none();var c},ti=function(r){var l,c,h;r.dom.isEmpty(r.getBody())&&(r.setContent(""),h=(c=(l=r).getBody()).firstChild&&l.dom.isBlock(c.firstChild)?c.firstChild:c,l.selection.setCursorLocation(h,0))},Ni=function(r,l){return $e(l)&&(h=r,!1===(Lt.isText(m=l)&&/^[ \t\r\n]*$/.test(m.data)&&!1===function(r,l){var c,m,M=Ce_fromDom(r);return c=Ce_fromDom(l),m=Ve(jr,M),Hc(c,"pre,code",m).isSome()}(h,m)))||Lt.isElement(c=l)&&"A"===c.nodeName&&c.hasAttribute("name")||io(l);var c,h,m},io=Lt.hasAttribute("data-mce-bookmark"),Ro=Lt.hasAttribute("data-mce-bogus"),qc=Lt.hasAttributeValue("data-mce-bogus","all"),Zo=function(r){return function(l){var c,h,m=0;if(Ni(l,l))return!1;if(!(h=l.firstChild))return!0;c=new Zi(h,l);do{if(qc(h))h=c.next(!0);else if(Ro(h))h=c.next();else if(Lt.isBr(h))m++,h=c.next();else{if(Ni(l,h))return!1;h=c.next()}}while(h);return m<=1}(r.dom())},Ua=Io("block","position"),lh=Io("from","to"),Yu=function(r,l){var c=Ce_fromDom(r),h=Ce_fromDom(l.container());return vi(c,h).map(function(m){return Ua(m,l)})},L_=function(r,l){return function(r,l,c){return xs(l,r)?function(h,m){for(var M=Ui(m)?m:zn,k=h.dom(),P=[];null!=k.parentNode;){var N=k.parentNode,F=Ce_fromDom(N);if(P.push(F),!0===M(F))break;k=N}return P}(r,function(h){return c(h)||jr(h,l)}).slice(0,-1):[]}(r,l,Oe(!1))},O_=L_,Sc=function(r,l){return[r].concat(L_(r,l))},ra=function(r){var l,c=(l=bs(r),Qi(l,Hs).fold(function(){return l},function(h){return l.slice(0,h)}));return Ke(c,Fo),c},Ox=function(r,l){var c=Sc(l,r);return Zn(c.reverse(),Zo).each(Fo)},UC=function(r,l,c,h){if(Zo(c))return oh(c),mi.firstPositionIn(c.dom());0===Vn(dd(h),function(M){return!Zo(M)}).length&&Zo(l)&&$r(h,Ce_fromTag("br"));var m=mi.prevPosition(c.dom(),Ye.before(h.dom()));return Ke(ra(l),function(M){$r(h,M)}),Ox(r,l),m},qC=function(r,l,c){if(Zo(c))return Fo(c),Zo(l)&&oh(l),mi.firstPositionIn(l.dom());var h=mi.lastPositionIn(c.dom());return Ke(ra(l),function(m){da(c,m)}),Ox(r,l),h},Bx=function(r,l){mi.positionIn(r,l.dom()).map(function(c){return c.getNode()}).map(Ce_fromDom).filter(v).each(Fo)},B_=function(r,l,c){return Bx(!0,l),Bx(!1,c),function(r,l){return xs(l,r)?(c=Sc(r,l),kt.from(c[c.length-1])):kt.none();var c}(l,c).fold(Ve(qC,r,l,c),Ve(UC,r,l,c))},E0=function(r,l,c,h){return l?B_(r,h,c):B_(r,c,h)},Cc=function(r,l){var c,h=Ce_fromDom(r.getBody());return(c=function(r,l,c){return c.collapsed?function(r,l,c){var h=Yu(r,Ye.fromRangeStart(c)),m=h.bind(function(M){return mi.fromPosition(l,r,M.position()).bind(function(k){return Yu(r,k).map(function(P){return N=r,F=l,Lt.isBr((W=P).position().getNode())&&!1===Zo(W.block())?mi.positionIn(!1,W.block().dom()).bind(function(q){return q.isEqual(W.position())?mi.fromPosition(F,N,q).bind(function(Z){return Yu(N,Z)}):kt.some(W)}).getOr(W):W;var N,F,W})})});return Jr(h,m,lh).filter(function(M){return!1===jr((N=M).from().block(),N.to().block())&&ul((P=M).from().block()).bind(function(F){return ul(P.to().block()).filter(function(W){return jr(F,W)})}).isSome()&&!1===Lt.isContentEditableFalse((k=M).from().block().dom())&&!1===Lt.isContentEditableFalse(k.to().block().dom());var k,P,N})}(r,l,c):kt.none()}(h.dom(),l,r.selection.getRng()).bind(function(m){return E0(h,l,m.from().block(),m.to().block())})).each(function(m){r.selection.setRng(m.toRange())}),c.isSome()},N0=function(r,l){var c=Ce_fromDom(l),h=Ve(jr,r);return Ol(c,xt,h).isSome()},R0=function(r,l){return!r.selection.isCollapsed()&&function(r){var l,c,h,m,M=Ce_fromDom(r.getBody());return function(r,l){var c,h,m=mi.prevPosition(r.dom(),Ye.fromRangeStart(l)).isNone(),M=mi.nextPosition(r.dom(),Ye.fromRangeEnd(l)).isNone();return!(N0(c=r,(h=l).startContainer)||N0(c,h.endContainer))&&m&&M}(M,r.selection.getRng())?((m=r).setContent(""),m.selection.setCursorLocation(),!0):(l=M,h=(c=r.selection).getRng(),Jr(vi(l,Ce_fromDom(h.startContainer)),vi(l,Ce_fromDom(h.endContainer)),function(P,N){return!1===jr(P,N)&&(h.deleteContents(),E0(l,!0,P,N).each(function(F){c.setRng(F.toRange())}),!0)}).getOr(!1))}(r)},Ta=function(r){if(!Rn(r))throw new Error("cases must be an array");if(0===r.length)throw new Error("there must be at least one case");var l=[],c={};return Ke(r,function(h,m){var M=Qo(h);if(1!==M.length)throw new Error("one and only one name per case");var k=M[0],P=h[k];if(void 0!==c[k])throw new Error("duplicate key detected:"+k);if("cata"===k)throw new Error("cannot have a case named cata (sorry)");if(!Rn(P))throw new Error("case arguments must be an array");l.push(k),c[k]=function(){var N=arguments.length;if(N!==P.length)throw new Error("Wrong number of arguments to case "+k+". Expected "+P.length+" ("+P+"), got "+N);for(var F=new Array(N),W=0;W<F.length;W++)F[W]=arguments[W];return{fold:function(){if(arguments.length!==r.length)throw new Error("Wrong number of arguments to fold. Expected "+r.length+", got "+arguments.length);return arguments[m].apply(null,F)},match:function(q){var Z=Qo(q);if(l.length!==Z.length)throw new Error("Wrong number of arguments to match. Expected: "+l.join(",")+"\nActual: "+Z.join(","));if(!yi(l,function(ht){return br(Z,ht)}))throw new Error("Not all branches were specified when using match. Specified: "+Z.join(", ")+"\nRequired: "+l.join(", "));return q[k].apply(null,F)},log:function(q){Rt.console.log(q,{constructors:l,constructor:k,params:F})}}}}),c},zx=function(r){return no(r).exists(v)},kp=function(r,l,c){var h=Vn(Sc(Ce_fromDom(c.container()),l),Hs),m=pe(h).getOr(l);return mi.fromPosition(r,m.dom(),c).filter(zx)},L0=function(r,l){return no(l).exists(v)||kp(!0,r,l).isSome()},Fx=function(r,l){return(c=l,kt.from(c.getNode(!0)).map(Ce_fromDom)).exists(v)||kp(!1,r,l).isSome();var c},XC=Ve(kp,!1),$C=Ve(kp,!0),Ip=function(r){return"\xa0"===r},O0=function(r){return/^[\r\n\t ]$/.test(r)},Hx=function(r){return!O0(r)&&!Ip(r)},Gm=function(r,l,c){return kt.from(c.container()).filter(Lt.isText).exists(function(h){var m=r?0:-1;return l(h.data.charAt(c.offset()+m))})},_g=Ve(Gm,!0,O0),B0=Ve(Gm,!1,O0),ZC=function(r){var l=r.container();return Lt.isText(l)&&0===l.data.length},uh=function(r,l){var c=Eh(r,l);return Lt.isContentEditableFalse(c)&&!Lt.isBogusAll(c)},Sf=Ve(uh,0),Md=Ve(uh,-1),Um=function(r,l){return Lt.isTable(Eh(r,l))},Yc=Ve(Um,0),F_=Ve(Um,-1),gu=Ta([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),V_=function(r,l,c){return mi.fromPosition(l,r,c).bind(function(h){return F=h.getNode(),xt(Ce_fromDom(F))||U(Ce_fromDom(F))?kt.none():(m=r,P=h,N=function(W){return Lu(Ce_fromDom(W))&&!Hu(k,P,m)},vf(!(M=l),k=c).fold(function(){return vf(M,P).fold(Oe(!1),N)},N)?kt.none():l&&Lt.isContentEditableFalse(h.getNode())||!1===l&&Lt.isContentEditableFalse(h.getNode(!0))?function(r,l,c,h){var m=h.getNode(!1===l);return vi(Ce_fromDom(r),Ce_fromDom(c.getNode())).map(function(M){return Zo(M)?gu.remove(M.dom()):gu.moveToElement(m)}).orThunk(function(){return kt.some(gu.moveToElement(m))})}(r,l,c,h):l&&Md(c)||!1===l&&Sf(c)?kt.some(gu.moveToPosition(h)):kt.none());var m,M,k,P,N,F})},W_=function(r,l,c){if(0!==c){var h,m,M,k=r.data.slice(l,l+c);r.replaceData(l,c,(m=0===l,M=l+c>=r.data.length,Ei((h=k).split(""),function(F,W){return-1!==" \f\n\r\t\v".indexOf(W)||"\xa0"===W?F.previousCharIsSpace||""===F.str&&m||F.str.length===h.length-1&&M?{previousCharIsSpace:!1,str:F.str+"\xa0"}:{previousCharIsSpace:!0,str:F.str+" "}:{previousCharIsSpace:!1,str:F.str+W}},{previousCharIsSpace:!1,str:""}).str))}},j_=function(r,l){var c,h=r.data.slice(l),m=h.length-(c=h,c.replace(/^\s+/g,"")).length;return W_(r,l,m)},JC=function(r,l){return h=r,m=(c=l).container(),M=c.offset(),!1===Ye.isTextPosition(c)&&m===h.parentNode&&M>Ye.before(h).offset()?Ye(l.container(),l.offset()-1):l;var c,h,m,M},G_=function(r){return $e(r.previousSibling)?kt.some(Lt.isText(l=r.previousSibling)?Ye(l,l.data.length):Ye.after(l)):r.previousSibling?mi.lastPositionIn(r.previousSibling):kt.none();var l},Vx=function(r){return $e(r.nextSibling)?kt.some(Lt.isText(l=r.nextSibling)?Ye(l,0):Ye.before(l)):r.nextSibling?mi.firstPositionIn(r.nextSibling):kt.none();var l},Pp=function(r,l,c){c.fold(function(){r.focus()},function(h){r.selection.setRng(h.toRange(),l)})},U_=function(r,l){return l&&r.schema.getBlockElements().hasOwnProperty(la(l))},q_=function(r){if(Zo(r)){var l=Ce_fromHtml('<br data-mce-bogus="1">');return qd(r),da(r,l),kt.some(Ye.before(l.dom()))}return kt.none()},wg=function(r,l,c,h){void 0===h&&(h=!0);var m,M,k=function(r,l,c){return(h=r,m=l,M=c,h?function(r,l){return Vx(l).orThunk(function(){return G_(l)}).orThunk(function(){return mi.nextPosition(c=r,Ye.after(h=l)).fold(function(){return mi.prevPosition(c,Ye.before(h))},kt.some);var c,h})}(m,M):function(r,l){return G_(l).orThunk(function(){return Vx(l)}).orThunk(function(){return c=r,m=Ye.before((h=l).previousSibling?h.previousSibling:h.parentNode),mi.prevPosition(c,m).fold(function(){return mi.nextPosition(c,Ye.after(h))},kt.some);var c,h,m})}(m,M)).map(Ve(JC,c));var h,m,M}(l,r.getBody(),c.dom()),P=Ol(c,Ve(U_,r),(m=r.getBody(),function(F){return F.dom()===m})),N=function(r,l,c){var h,m,M,k,P=va(r).filter(Il),N=qo(r).filter(Il);return Fo(r),(h=P,m=N,M=l,k=function(F,W,q){var Z,ht,at,gt,rt=F.dom(),dt=W.dom(),mt=rt.data.length;return ht=dt,at=c,gt=sc((Z=rt).data).length,Z.appendData(ht.data),Fo(Ce_fromDom(ht)),at&&j_(Z,gt),q.container()===dt?Ye(rt,mt):q},h.isSome()&&m.isSome()&&M.isSome()?kt.some(k(h.getOrDie(),m.getOrDie(),M.getOrDie())):kt.none()).orThunk(function(){return c&&(P.each(function(F){return W=F.dom(),q=F.dom().length,ht=(Z=W.data.slice(0,q)).length-sc(Z).length,W_(W,q-ht,ht);var W,q,Z,ht}),N.each(function(F){return j_(F.dom(),0)})),l})}(c,k,(M=c,Rc(r.schema.getTextInlineElements(),la(M))));r.dom.isEmpty(r.getBody())?(r.setContent(""),r.selection.setCursorLocation()):P.bind(q_).fold(function(){h&&Pp(r,l,N)},function(F){h&&Pp(r,l,kt.some(F))})},Ep=function(r,l){return r.selection.isCollapsed()?function(r,l){var c,h,m,M,k,P;return(c=r.getBody(),h=l,m=r.selection.getRng(),M=fp(h?1:-1,c,m),k=Ye.fromRangeStart(M),P=Ce_fromDom(c),!1===h&&Md(k)?kt.some(gu.remove(k.getNode(!0))):h&&Sf(k)?kt.some(gu.remove(k.getNode())):!1===h&&Sf(k)&&Fx(P,k)?XC(P,k).map(function(N){return gu.remove(N.getNode())}):h&&Md(k)&&L0(P,k)?$C(P,k).map(function(N){return gu.remove(N.getNode())}):function(r,l,c){return k=c.getNode(!1===(M=l)),P=M?"after":"before",Lt.isElement(k)&&k.getAttribute("data-mce-caret")===P?(h=l,m=c.getNode(!1===l),h&&Lt.isContentEditableFalse(m.nextSibling)?kt.some(gu.moveToElement(m.nextSibling)):!1===h&&Lt.isContentEditableFalse(m.previousSibling)?kt.some(gu.moveToElement(m.previousSibling)):kt.none()).fold(function(){return V_(r,l,c)},kt.some):V_(r,l,c).bind(function(N){return F=r,W=c,N.fold(function(q){return kt.some(gu.remove(q))},function(q){return kt.some(gu.moveToElement(q))},function(q){return Hu(W,q,F)?kt.none():kt.some(gu.moveToPosition(q))});var F,W});var h,m,M,k,P}(c,h,k)).map(function(N){return N.fold((Z=r,ht=l,function(at){return Z._selectionOverrides.hideFakeCaret(),wg(Z,ht,Ce_fromDom(at)),!0}),(W=r,q=l,function(at){var gt=q?Ye.before(at):Ye.after(at);return W.selection.setRng(gt.toRange()),!0}),(F=r,function(at){return F.selection.setRng(at.toRange()),!0}));var F,W,q,Z,ht}).getOr(!1)}(r,l):function(r,l){var c,h=r.selection.getNode();return!!Lt.isContentEditableFalse(h)&&(c=Ce_fromDom(r.getBody()),Ke(Ho(c,".mce-offscreen-selection"),Fo),wg(r,l,Ce_fromDom(r.selection.getNode())),ti(r),!0)}(r,l)},Wx=function(r){var l,c=function(h,m){for(;m&&m!==h;){if(Lt.isContentEditableTrue(m)||Lt.isContentEditableFalse(m))return m;m=m.parentNode}return null}(r.getBody(),r.selection.getNode());return Lt.isContentEditableTrue(c)&&r.dom.isBlock(c)&&r.dom.isEmpty(c)&&(l=r.dom.create("br",{"data-mce-bogus":"1"}),r.dom.setHTML(c,""),c.appendChild(l),r.selection.setRng(Ye.before(l).toRange())),!0},Np=Lt.isText,Vh=function(r){return Np(r)&&r.data[0]===_},jx=function(r){return Np(r)&&r.data[r.data.length-1]===_},qm=function(r){return r.ownerDocument.createTextNode(_)},V0=function(r,l){return r?function(c){if(Np(c.previousSibling))return jx(c.previousSibling)||c.previousSibling.appendData(_),c.previousSibling;if(Np(c))return Vh(c)||c.insertData(0,_),c;var h=qm(c);return c.parentNode.insertBefore(h,c),h}(l):function(c){if(Np(c.nextSibling))return Vh(c.nextSibling)||c.nextSibling.insertData(0,_),c.nextSibling;if(Np(c))return jx(c)||c.appendData(_),c;var h=qm(c);return c.nextSibling?c.parentNode.insertBefore(h,c.nextSibling):c.parentNode.appendChild(h),h}(l)},eM=Ve(V0,!0),Xc=Ve(V0,!1),Gx=function(r,l){return Lt.isText(r.container())?V0(l,r.container()):V0(l,r.getNode())},Sg=function(r,l){var c=l.get();return c&&r.container()===c&&E(c)},Xu=function(r,l){return l.fold(function(c){bd.remove(r.get());var h=eM(c);return r.set(h),kt.some(Ye(h,h.length-1))},function(c){return mi.firstPositionIn(c).map(function(h){if(Sg(h,r))return Ye(r.get(),1);bd.remove(r.get());var m=Gx(h,!0);return r.set(m),Ye(m,1)})},function(c){return mi.lastPositionIn(c).map(function(h){if(Sg(h,r))return Ye(r.get(),r.get().length-1);bd.remove(r.get());var m=Gx(h,!1);return r.set(m),Ye(m,m.length-1)})},function(c){bd.remove(r.get());var h=Xc(c);return r.set(h),kt.some(Ye(h,1))})},Y_=function(r,l){for(var c=0;c<r.length;c++){var h=r[c].apply(null,l);if(h.isSome())return h}return kt.none()},$s=Ta([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),X_=function(r,l){return jc(l,r)||r},$_=function(r,l,c){var h=jn.normalizeForwards(c),m=X_(l,h.container());return jn.findRootInline(r,m,h).fold(function(){return mi.nextPosition(m,h).bind(Ve(jn.findRootInline,r,m)).map(function(M){return $s.before(M)})},kt.none)},Z_=function(r,l){return null===du(r,l)},Ux=function(r,l,c){return jn.findRootInline(r,l,c).filter(Ve(Z_,l))},W0=function(r,l,c){var h=jn.normalizeBackwards(c);return Ux(r,l,h).bind(function(m){return mi.prevPosition(m,h).isNone()?kt.some($s.start(m)):kt.none()})},nM=function(r,l,c){var h=jn.normalizeForwards(c);return Ux(r,l,h).bind(function(m){return mi.nextPosition(m,h).isNone()?kt.some($s.end(m)):kt.none()})},iM=function(r,l,c){var h=jn.normalizeBackwards(c),m=X_(l,h.container());return jn.findRootInline(r,m,h).fold(function(){return mi.prevPosition(m,h).bind(Ve(jn.findRootInline,r,m)).map(function(M){return $s.after(M)})},kt.none)},ls=function(r){return!1===jn.isRtl(Cg(r))},j0=function(r,l,c){return Y_([$_,W0,nM,iM],[r,l,c]).filter(ls)},Cg=function(r){return r.fold(se,se,se,se)},G0=function(r){return r.fold(Oe("before"),Oe("start"),Oe("end"),Oe("after"))},Td=function(r){return r.fold($s.before,$s.before,$s.after,$s.after)},ch=function(r,l,c,h,m,M){return Jr(jn.findRootInline(l,c,h),jn.findRootInline(l,c,m),function(k,P){return k!==P&&jn.hasSameParentBlock(c,k,P)?$s.after(r?k:P):M}).getOr(M)},Cf=function(r,l){return r.fold(Oe(!0),function(c){return m=l,!(G0(h=c)===G0(m)&&Cg(h)===Cg(m));var h,m})},K_=function(r,l){return r?l.fold(bn(kt.some,$s.start),kt.none,bn(kt.some,$s.after),kt.none):l.fold(kt.none,bn(kt.some,$s.before),kt.none,bn(kt.some,$s.end))},Mf=function(r,l,c,h){var m=jn.normalizePosition(r,h),M=j0(l,c,m);return j0(l,c,m).bind(Ve(K_,r)).orThunk(function(){return P=l,N=c,F=M,q=jn.normalizePosition(k=r,h),mi.fromPosition(k,N,q).map(Ve(jn.normalizePosition,k)).fold(function(){return F.map(Td)},function(Z){return j0(P,N,Z).map(Ve(ch,k,P,N,q,Z)).filter(Ve(Cf,F))}).filter(ls);var k,P,N,F,q})},dh=j0,Ym=Mf,Wr=(Ve(Mf,!1),Ve(Mf,!0),Td),U0=function(r){return r.fold($s.start,$s.start,$s.end,$s.end)},Rp=function(r,l,c){var h=r?1:-1;return l.setRng(Ye(c.container(),c.offset()+h).toRange()),l.getSel().modify("move",r?"forward":"backward","word"),!0},q0=function(r,l){var c=r.dom.createRng();c.setStart(l.container(),l.offset()),c.setEnd(l.container(),l.offset()),r.selection.setRng(c)},Y0=function(r){return!1!==r.settings.inline_boundaries},Xm=function(r,l){r?l.setAttribute("data-mce-selected","inline-boundary"):l.removeAttribute("data-mce-selected")},$m=function(r,l,c){return Xu(l,c).map(function(h){return q0(r,h),c})},qx=function(r,l,c){return function(){return!!Y0(l)&&function(r,l){var c=l.selection.getRng(),h=r?Ye.fromRangeEnd(c):Ye.fromRangeStart(c);return!!function(r){return Ui(r.selection.getSel().modify)}(l)&&(r&&$(h)?Rp(!0,l.selection,h):!(r||!K(h))&&Rp(!1,l.selection,h))}(r,l)}},Df={move:function(r,l,c){return function(){return!!Y0(r)&&(h=r,m=l,M=c,k=h.getBody(),P=Ye.fromRangeStart(h.selection.getRng()),N=Ve(jn.isInlineTarget,h),Ym(M,N,k,P).bind(function(F){return $m(h,m,F)})).isSome();var h,m,M,k,P,N}},moveNextWord:Ve(qx,!0),movePrevWord:Ve(qx,!1),setupSelectedState:function(r){var l=_a(null),c=Ve(jn.isInlineTarget,r);return r.on("NodeChange",function(h){var m,k,P,N;Y0(r)&&(m=c,k=h.parents,P=Vn(r.dom.select('*[data-mce-selected="inline-boundary"]'),m),N=Vn(k,m),Ke(To(P,N),Ve(Xm,!1)),Ke(To(N,P),Ve(Xm,!0)),function(F,W){if(F.selection.isCollapsed()&&!0!==F.composing&&W.get()){var q=Ye.fromRangeStart(F.selection.getRng());Ye.isTextPosition(q)&&!1===jn.isAtZwsp(q)&&(q0(F,bd.removeAndReposition(W.get(),q)),W.set(null))}}(r,l),function(F,W,q,Z){if(W.selection.isCollapsed()){var ht=Vn(Z,F);Ke(ht,function(at){var gt=Ye.fromRangeStart(W.selection.getRng());dh(F,W.getBody(),gt).bind(function(rt){return $m(W,q,rt)})})}}(c,r,l,h.parents))}),l},setCaretPosition:q0},Yx=function(r,l){return function(c){return Xu(l,c).map(function(h){return Df.setCaretPosition(r,h),!0}).getOr(!1)}},X0=function(r,l,c,h){var m=r.getBody(),M=Ve(jn.isInlineTarget,r);r.undoManager.ignore(function(){var k,P,N;r.selection.setRng((k=c,P=h,(N=Rt.document.createRange()).setStart(k.container(),k.offset()),N.setEnd(P.container(),P.offset()),N)),r.execCommand("Delete"),dh(M,m,Ye.fromRangeStart(r.selection.getRng())).map(U0).map(Yx(r,l))}),r.nodeChanged()},$0=function(r,l,c){if(r.selection.isCollapsed()&&!1!==r.settings.inline_boundaries){var h=Ye.fromRangeStart(r.selection.getRng());return function(r,l,c,h){var m,M,k=(m=r.getBody(),M=h.container(),jc(M,m)||m),P=Ve(jn.isInlineTarget,r),N=dh(P,k,h);return N.bind(function(F){return c?F.fold(Oe(kt.some(U0(F))),kt.none,Oe(kt.some(Wr(F))),kt.none):F.fold(kt.none,Oe(kt.some(Wr(F))),kt.none,Oe(kt.some(U0(F))))}).map(Yx(r,l)).getOrThunk(function(){var F=mi.navigate(c,k,h),W=F.bind(function(q){return dh(P,k,q)});return N.isSome()&&W.isSome()?jn.findRootInline(P,k,h).map(function(q){return!!Jr(mi.firstPositionIn(Z=q),mi.lastPositionIn(Z),function(ht,at){var gt=jn.normalizePosition(!0,ht),rt=jn.normalizePosition(!1,at);return mi.nextPosition(Z,gt).map(function(dt){return dt.isEqual(rt)}).getOr(!0)}).getOr(!0)&&(wg(r,c,Ce_fromDom(q)),!0);var Z}).getOr(!1):W.bind(function(q){return F.map(function(Z){return c?X0(r,l,h,Z):X0(r,l,Z,h),!0})}).getOr(!1)})}(r,l,c,h)}return!1},Lp=Io("start","end"),$x=Io("rng","table","cells"),Zm=Ta([{removeTable:["element"]},{emptyCells:["cells"]}]),Mg=function(r,l){return Mh(Ce_fromDom(r),"td,th",l)},Tg=function(r,l){return Hc(r,"table",l)},Q_=function(r){return!1===jr(r.start(),r.end())},Zx=function(r,l){return Tg(r.start(),l).bind(function(c){return Tg(r.end(),l).bind(function(h){return jr(c,h)?kt.some(c):kt.none()})})},Dg=function(r){return Ho(r,"td,th")},Z0=function(r,l){return Zx(l,r).isSome()},Km=function(r,l){return Qi(r,function(c){return jr(c,l)})},rM=function(r){return(l=r,Jr(Km(l.cells(),l.rng().start()),Km(l.cells(),l.rng().end()),function(c,h){return l.cells().slice(c,h+1)})).map(function(c){var h=r.cells();return c.length===h.length?Zm.removeTable(r.table()):Zm.emptyCells(c)});var l},K0=function(r){var l=[];if(r)for(var c=0;c<r.rangeCount;c++)l.push(r.getRangeAt(c));return l},Kx=K0,$u=function(r,l){var c=function(r){return Ho(r,"td[data-mce-selected],th[data-mce-selected]")}(l),h=function(r){return Vn(function(r){return Mr(r,function(l){var c=nr(l);return c?[Ce_fromDom(c)]:[]})}(r),xt)}(r);return 0<c.length?c:h},Cr=$u,J0=function(r){return $u(Kx(r.selection.getSel()),Ce_fromDom(r.getBody()))},oa=function(r,l){return Ke(l,oh),r.selection.setCursorLocation(l[0].dom(),0),!0},jo=function(r,l){return wg(r,!1,l),!0},tb=function(r,l,c,h){return pu(l,h).fold(function(){return m=r,function(r,l){return function(r,l){var c,h,m,M,k=Ve(jr,r);return(c=l,h=k,m=Mg(c.startContainer,h),M=Mg(c.endContainer,h),Jr(m,M,Lp).filter(Q_).filter(function(P){return Z0(h,P)}).orThunk(function(){return function(r,l){var c=Mg(l.startContainer,r),h=Mg(l.endContainer,r);return l.collapsed?kt.none():Jr(c,h,Lp).fold(function(){return c.fold(function(){return h.bind(function(m){return Tg(m,r).bind(function(M){return pe(Dg(M)).map(function(k){return Lp(k,m)})})})},function(m){return Tg(m,r).bind(function(M){return ee(Dg(M)).map(function(k){return Lp(m,k)})})})},function(m){return Z0(r,m)?kt.none():(k=r,Tg((M=m).start(),k).bind(function(P){return ee(Dg(P)).map(function(N){return Lp(M.start(),N)})}));var M,k})}(h,c)})).bind(function(P){return Zx(N=P,k).map(function(F){return $x(N,F,Dg(F))});var N})}(r,l).bind(rM)}(l,c).map(function(M){return M.fold(Ve(jo,m),Ve(oa,m))});var m},function(m){return Oa(r,m)}).getOr(!1)},eb=function(r,l){return Zn(Sc(l,r),xt)},pu=function(r,l){return Zn(Sc(l,r),function(c){return"caption"===la(c)})},Oa=function(r,l){return oh(l),r.selection.setCursorLocation(l.dom(),0),kt.some(!0)},$c=function(r,l){var c,h,m,M,k,P=Ce_fromDom(r.selection.getStart(!0)),N=J0(r);return r.selection.isCollapsed()&&0===N.length?function(r,l,c){var h=Ce_fromDom(r.getBody());return pu(h,c).fold(function(){return function(r,l,c,h){var m=Ye.fromRangeStart(r.selection.getRng());return eb(c,h).bind(function(M){return Zo(M)?Oa(r,M):(P=c,F=M,W=m,mi.navigate(l,r.getBody(),W).bind(function(q){return eb(P,Ce_fromDom(q.getNode())).map(function(Z){return!1===jr(Z,F)})}));var P,F,W})}(r,l,h,c)},function(m){return k=l,P=h,N=m,F=Ye.fromRangeStart((M=r).selection.getRng()),Zo(N)?Oa(M,N):function(r,l,c,h,m){return mi.navigate(c,r.getBody(),m).bind(function(M){return F=c,W=m,q=M,mi.firstPositionIn((N=h).dom()).bind(function(Z){return mi.lastPositionIn(N.dom()).map(function(ht){return F?W.isEqual(Z)&&q.isEqual(ht):W.isEqual(ht)&&q.isEqual(Z)})}).getOr(!0)?Oa(r,h):(k=h,pu(l,Ce_fromDom(M.getNode())).map(function(Z){return!1===jr(Z,k)}));var k,N,F,W,q}).or(kt.some(!0))}(M,P,k,N,F);var M,k,P,N,F}).getOr(!1)}(r,l,P):(h=P,m=Ce_fromDom((c=r).getBody()),M=c.selection.getRng(),0!==(k=J0(c)).length?oa(c,k):tb(c,m,M,h))},ty=xi_isEq,nb=function(r,l,c){var h=r.formatter.get(c);if(h)for(var m=0;m<h.length;m++)if(!1===h[m].inherit&&r.dom.is(l,h[m].selector))return!0;return!1},Jm=function(r,l,c,h){var m=r.dom.getRoot();return l!==m&&(l=r.dom.getParent(l,function(M){return!!nb(r,M,c)||M.parentNode===m||!!kg(r,M,c,h,!0)}),kg(r,l,c,h))},Qm=function(r,l,c){return!!ty(l,c.inline)||!!ty(l,c.block)||(c.selector?1===l.nodeType&&r.is(l,c.selector):void 0)},Op=function(r,l,c,h,m,M){var k,P,N,F=c[h];if(c.onmatch)return c.onmatch(l,c,h);if(F)if(void 0===F.length){for(k in F)if(F.hasOwnProperty(k)&&(P="attributes"===h?r.getAttrib(l,k):xi_getStyle(r,l,k),m&&!P&&!c.exact||(!m||c.exact)&&!ty(P,xi_normalizeStyleValue(r,xi_replaceVars(F[k],M),k))))return}else for(N=0;N<F.length;N++)if("attributes"===h?r.getAttrib(l,F[N]):xi_getStyle(r,l,F[N]))return c;return c},kg=function(r,l,c,h,m){var M,k,P,N,F=r.formatter.get(c),W=r.dom;if(F&&l)for(k=0;k<F.length;k++)if(Qm(r.dom,l,M=F[k])&&Op(W,l,M,"attributes",m,h)&&Op(W,l,M,"styles",m,h)){if(N=M.classes)for(P=0;P<N.length;P++)if(!r.dom.hasClass(l,N[P]))return;return M}},Sl={matchNode:kg,matchName:Qm,match:function(r,l,c,h){var m;return h?Jm(r,h,l,c):(h=r.selection.getNode(),!!Jm(r,h,l,c)||!((m=r.selection.getStart())===h||!Jm(r,m,l,c)))},matchAll:function(r,l,c){var h,m=[],M={};return h=r.selection.getStart(),r.dom.getParent(h,function(k){var P,N;for(P=0;P<l.length;P++)!M[N=l[P]]&&kg(r,k,N,c)&&(M[N]=!0,m.push(N))},r.dom.getRoot()),m},canApply:function(r,l){var c,h,m,M,k,P=r.formatter.get(l),N=r.dom;if(P)for(c=r.selection.getStart(),h=xi_getParents(N,c),M=P.length-1;0<=M;M--){if(!(k=P[M].selector)||P[M].defaultBlock)return!0;for(m=h.length-1;0<=m;m--)if(N.is(h[m],k))return!0}return!1},matchesUnInheritedFormatSelector:nb},ey=function(r,l){return r.splitText(l)},ny=function(r){var l=r.startContainer,c=r.startOffset,h=r.endContainer,m=r.endOffset;return l===h&&Lt.isText(l)?0<c&&c<l.nodeValue.length&&(l=(h=ey(l,c)).previousSibling,c<m?(l=h=ey(h,m-=c).previousSibling,m=h.nodeValue.length,c=0):m=0):(Lt.isText(l)&&0<c&&c<l.nodeValue.length&&(l=ey(l,c),c=0),Lt.isText(h)&&0<m&&m<h.nodeValue.length&&(m=(h=ey(h,m).previousSibling).nodeValue.length)),{startContainer:l,startOffset:c,endContainer:h,endOffset:m}},nw="_mce_caret",tv=function(r){return 0<function(l){for(var c=[];l;){if(3===l.nodeType&&"\ufeff"!==l.nodeValue||1<l.childNodes.length)return[];1===l.nodeType&&c.push(l),l=l.firstChild}return c}(r).length},iw=function(r){var l;if(r)for(r=(l=new Zi(r,r)).current();r;r=l.next())if(3===r.nodeType)return r;return null},ib=function(r){var l=Ce_fromTag("span");return ns(l,{id:nw,"data-mce-bogus":"1","data-mce-type":"format-caret"}),r&&da(l,Ce_fromText("\ufeff")),l},iy=function(r,l,c){void 0===c&&(c=!0);var h,m=r.dom,M=r.selection;if(tv(l))wg(r,!1,Ce_fromDom(l),c);else{var k=M.getRng(),P=m.getParent(l,m.isBlock),N=((h=iw(l))&&"\ufeff"===h.nodeValue.charAt(0)&&h.deleteData(0,1),h);k.startContainer===N&&0<k.startOffset&&k.setStart(N,k.startOffset-1),k.endContainer===N&&0<k.endOffset&&k.setEnd(N,k.endOffset-1),m.remove(l,!0),P&&m.isEmpty(P)&&oh(Ce_fromDom(P)),M.setRng(k)}},qa=function(r,l,c){void 0===c&&(c=!0);var h=r.dom,m=r.selection;if(l)iy(r,l,c);else if(!(l=du(r.getBody(),m.getStart())))for(;l=h.get(nw);)iy(r,l,!1)},rb=function(r,l){return r.appendChild(l),l},ob=function(r,l){var c,h,m=(c=function(M,k){return rb(M,k.cloneNode(!1))},h=l,function(M,k){for(var P=M.length-1;0<=P;P--)k(M[P])}(r,function(M){h=c(h,M)}),h);return rb(m,m.ownerDocument.createTextNode("\ufeff"))},ev=function(r,l){return r.schema.getTextInlineElements().hasOwnProperty(la(l))&&!Er(l.dom())&&!Lt.isBogus(l.dom())},nv=function(r){return 1===bs(r).length},iv=function(r,l){return!!r.selection.isCollapsed()&&function(r,l){var c,h=Ce_fromDom(r.getBody()),m=Ce_fromDom(r.selection.getStart()),M=Vn((c=Sc(m,h),Qi(c,Hs).fold(Oe(c),function(k){return c.slice(0,k)})),nv);return ee(M).map(function(k){var P,N=Ye.fromRangeStart(r.selection.getRng());return!(!function(r,l,c){return Jr(mi.firstPositionIn(c),mi.lastPositionIn(c),function(h,m){var M=jn.normalizePosition(!0,h),k=jn.normalizePosition(!1,m),P=jn.normalizePosition(!1,l);return r?mi.nextPosition(c,P).map(function(N){return N.isEqual(k)&&l.isEqual(M)}).getOr(!1):mi.prevPosition(c,P).map(function(N){return N.isEqual(M)&&l.isEqual(k)}).getOr(!1)}).getOr(!0)}(l,N,k.dom())||Er((P=k).dom())&&tv(P.dom())||(function(r,l,c,h){var m,M,k,P,N=Ve(ev,l),F=_i(Vn(h,N),function(q){return q.dom()});if(0===F.length)wg(l,r,c);else{var W=(m=c.dom(),M=F,k=ib(!1),P=ob(M,k.dom()),$r(Ce_fromDom(m),k),Fo(Ce_fromDom(m)),Ye(P,0));l.selection.setRng(W.toRange())}}(l,r,k,M),0))}).getOr(!1)}(r,l)},ow=function(r){for(var l=0,c=0,h=r;h&&h.nodeType;)l+=h.offsetLeft||0,c+=h.offsetTop||0,h=h.offsetParent;return{x:l,y:c}},aw=Lt.isContentEditableTrue,rv=Lt.isContentEditableFalse,Ku=function(r,l,c,h,m){return l._selectionOverrides.showCaret(r,c,h,m)},lb=function(r,l){var c,h;return r.fire("BeforeObjectSelected",{target:l}).isDefaultPrevented()?null:((h=(c=l).ownerDocument.createRange()).selectNode(c),h)},sw=function(r,l,c){var h=fp(1,r.getBody(),l),m=Ye.fromRangeStart(h),M=m.getNode();if(rv(M))return Ku(1,r,M,!m.isAtEnd(),!1);var k=m.getNode(!0);if(rv(k))return Ku(1,r,k,!1,!1);var P=r.dom.getParent(m.getNode(),function(N){return rv(N)||aw(N)});return rv(P)?Ku(1,r,P,!1,c):null},Wh=function(r,l,c){return l&&l.collapsed&&sw(r,l,c)||l},Af=function(r,l){r.selection.setRng(l),function(r,l){pe(Mo.fromRangeStart(l).getClientRects()).each(function(c){var h,m,M,k,P,N,F,W,q,ht_x=(P=h=function(at){if(at.inline)return at.getBody().getBoundingClientRect();var gt=at.getWin();return{left:0,right:gt.innerWidth,top:0,bottom:gt.innerHeight,width:gt.innerWidth,height:gt.innerHeight}}(r),(N=m=c).left>P.left&&N.right<P.right?0:N.left<P.left?N.left-P.left:N.right-P.right),ht_y=(k=m).top>(M=h).top&&k.bottom<M.bottom?0:k.top<M.top?k.top-M.top:k.bottom-M.bottom;W=0!==ht_x?0<ht_x?ht_x+4:ht_x-4:0,q=0!==ht_y?0<ht_y?ht_y+4:ht_y-4:0,(F=r).inline?(F.getBody().scrollLeft+=W,F.getBody().scrollTop+=q):F.getWin().scrollBy(W,q)})}(r,r.selection.getRng())},hh=function(r,l,c,h,m,M){var k,P,N=Ku(h,r,M.getNode(!m),m,!0);if(l.collapsed){var F=l.cloneRange();m?F.setEnd(N.startContainer,N.startOffset):F.setStart(N.endContainer,N.endOffset),F.deleteContents()}else l.deleteContents();return r.selection.setRng(N),k=r.dom,Lt.isText(P=c)&&0===P.data.length&&k.remove(P),!0},kf=function(r,l){return function(c,h){var m=c.selection.getRng();if(!Lt.isText(m.commonAncestorContainer))return!1;var M=h?Ts.Forwards:Ts.Backwards,k=hu(c.getBody()),P=Ve(ln,k.next),N=Ve(ln,k.prev),F=h?P:N,W=h?Sf:Md,q=gp(M,c.getBody(),m),Z=jn.normalizePosition(h,F(q));if(!Z)return!1;if(W(Z))return hh(c,m,q.getNode(),M,h,Z);var ht=F(Z);return!!(ht&&W(ht)&&ga(Z,ht))&&hh(c,m,q.getNode(),M,h,ht)}(r,l)},fh=function(r,l){r.getDoc().execCommand(l,!1,null)},ub=function(r){return function(l,c){return kt.from(c).map(Ce_fromDom).filter(es).bind(function(h){return function(r,l,c){var h=function(m){return M=r,k=m.dom(),P=cd(k,M),kt.from(P).filter(function(N){return 0<N.length});var M,k,P};return mc(Ce_fromDom(c),function(m){return h(m).isSome()},function(m){return jr(Ce_fromDom(l),m)}).bind(h)}(r,l,h.dom()).or((m=r,M=h.dom(),kt.from(eo.DOM.getStyle(M,m,!0))));var m,M}).getOr("")}},oy={getFontSize:ub("font-size"),getFontFamily:bn(function(r){return r.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},ub("font-family")),toPt:function(r,l){return/[0-9.]+px$/.test(r)?(c=72*parseInt(r,10)/96,m=Math.pow(10,l||0),Math.round(c*m)/m+"pt"):r;var c,m}},ay=function(r){return mi.firstPositionIn(r.getBody()).map(function(l){var c=l.container();return Lt.isText(c)?c.parentNode:c})},sy=function(r){return kt.from(r.selection.getRng()).bind(function(l){var c,m=r.getBody();return(c=l).startContainer===m&&0===c.startOffset?kt.none():kt.from(r.selection.getStart(!0))})},cb=function(r,l){if(/^[0-9\.]+$/.test(l)){var c=parseInt(l,10);if(1<=c&&c<=7){var h=function(r){return ge.explode(r.getParam("font_size_style_values",""))}(r),m=function(r){return ge.explode(r.getParam("font_size_classes",""))}(r);return m?m[c-1]||l:h[c-1]||l}return l}return l},ly=function(r,l){return r&&l&&r.startContainer===l.startContainer&&r.startOffset===l.startOffset&&r.endContainer===l.endContainer&&r.endOffset===l.endOffset},db=function(r,l,c){return null!==function(h,m,M){for(;h&&h!==m;){if(M(h))return h;h=h.parentNode}return null}(r,l,c)},uw=function(r,l,c){return db(r,l,function(h){return h.nodeName===c})},If=function(r){return r&&"TABLE"===r.nodeName},Dd=function(r,l,c){for(var h=new Zi(l,r.getParent(l.parentNode,r.isBlock)||r.getRoot());l=h[c?"prev":"next"]();)if(Lt.isBr(l))return!0},av=function(r,l,c,h,m){var M,k,P,N,F,W,q=r.getRoot(),Z=r.schema.getNonEmptyElements();if(P=r.getParent(m.parentNode,r.isBlock)||q,h&&Lt.isBr(m)&&l&&r.isEmpty(P))return kt.some(Mo(m.parentNode,r.nodeIndex(m)));for(M=new Zi(m,P);N=M[h?"prev":"next"]();){if("false"===r.getContentEditableParent(N)||(W=q,R(F=N)&&!1===db(F,W,Er)))return kt.none();if(Lt.isText(N)&&0<N.nodeValue.length)return!1===uw(N,q,"A")?kt.some(Mo(N,h?N.nodeValue.length:0)):kt.none();if(r.isBlock(N)||Z[N.nodeName.toLowerCase()])return kt.none();k=N}return c&&k?kt.some(Mo(k,0)):kt.none()},uy=function(r,l,c,h){var m,M,k,P,N,F,W,q,Z,at=r.getRoot(),gt=!1;if(M=h[(c?"start":"end")+"Offset"],W=Lt.isElement(m=h[(c?"start":"end")+"Container"])&&M===m.childNodes.length,N=r.schema.getNonEmptyElements(),F=c,R(m))return kt.none();if(Lt.isElement(m)&&M>m.childNodes.length-1&&(F=!1),Lt.isDocument(m)&&(m=at,M=0),m===at){if(F&&(P=m.childNodes[0<M?M-1:0])&&(R(P)||N[P.nodeName]||If(P)))return kt.none();if(m.hasChildNodes()){if(M=Math.min(!F&&0<M?M-1:M,m.childNodes.length-1),M=Lt.isText(m=m.childNodes[M])&&W?m.data.length:0,!l&&m===at.lastChild&&If(m)||function(rt,dt){for(;dt&&dt!==rt;){if(Lt.isContentEditableFalse(dt))return!0;dt=dt.parentNode}return!1}(at,m)||R(m))return kt.none();if(m.hasChildNodes()&&!1===If(m)){k=new Zi(P=m,at);do{if(Lt.isContentEditableFalse(P)||R(P)){gt=!1;break}if(Lt.isText(P)&&0<P.nodeValue.length){M=F?0:P.nodeValue.length,m=P,gt=!0;break}if(N[P.nodeName.toLowerCase()]&&(!(q=P)||!/^(TD|TH|CAPTION)$/.test(q.nodeName))){M=r.nodeIndex(P),m=P.parentNode,F||M++,gt=!0;break}}while(P=F?k.next():k.prev())}}}return l&&(Lt.isText(m)&&0===M&&av(r,W,l,!0,m).each(function(rt){m=rt.container(),M=rt.offset(),gt=!0}),Lt.isElement(m)&&((P=m.childNodes[M])||(P=m.childNodes[M-1]),!P||!Lt.isBr(P)||(Z=P).previousSibling&&"A"===Z.previousSibling.nodeName||Dd(r,P,!1)||Dd(r,P,!0)||av(r,W,l,!0,P).each(function(rt){m=rt.container(),M=rt.offset(),gt=!0}))),F&&!l&&Lt.isText(m)&&M===m.nodeValue.length&&av(r,W,l,!1,m).each(function(rt){m=rt.container(),M=rt.offset(),gt=!0}),gt?kt.some(Mo(m,M)):kt.none()},zp=function(r,l){var c=l.collapsed,h=l.cloneRange(),m=Mo.fromRangeStart(l);return uy(r,c,!0,h).each(function(M){c&&Mo.isAbove(m,M)||h.setStart(M.container(),M.offset())}),c||uy(r,c,!1,h).each(function(M){h.setEnd(M.container(),M.offset())}),c&&h.collapse(!0),ly(l,h)?kt.none():kt.some(h)},cy=function(r,l,c){var h=r.create("span",{},"&nbsp;");c.parentNode.insertBefore(h,c),l.scrollIntoView(h),r.remove(h)},hb=function(r,l,c,h){var m=r.createRng();h?(m.setStartBefore(c),m.setEndBefore(c)):(m.setStartAfter(c),m.setEndAfter(c)),l.setRng(m)},cw=function(r,l){var c=Ce_fromTag("br");$r(Ce_fromDom(l),c),r.undoManager.add()},dw=function(r,l){hw(r.getBody(),l)||Zr(Ce_fromDom(l),Ce_fromTag("br"));var c=Ce_fromTag("br");Zr(Ce_fromDom(l),c),cy(r.dom,r.selection,c.dom()),hb(r.dom,r.selection,c.dom(),!1),r.undoManager.add()},hw=function(r,l){return c=Ye.after(l),!!Lt.isBr(c.getNode())||mi.nextPosition(r,Ye.after(l)).map(function(h){return Lt.isBr(h.getNode())}).getOr(!1);var c},fw=function(r){return r&&"A"===r.nodeName&&"href"in r},gw=function(r){return r.fold(Oe(!1),fw,fw,Oe(!1))},pw=function(r,l){l.fold(pi,Ve(cw,r),Ve(dw,r),pi)},gb=function(r,l){var c,h,m,M=(h=Ve(jn.isInlineTarget,c=r),m=Ye.fromRangeStart(c.selection.getRng()),dh(h,c.getBody(),m).filter(gw));M.isSome()?M.each(Ve(pw,r)):function(r,l){var c,h,m=r.selection,M=r.dom,k=m.getRng();zp(M,k).each(function(at){k.setStart(at.startContainer,at.startOffset),k.setEnd(at.endContainer,at.endOffset)});var P=k.startOffset,N=k.startContainer;if(1===N.nodeType&&N.hasChildNodes()){var F=P>N.childNodes.length-1;N=N.childNodes[Math.min(P,N.childNodes.length-1)]||N,P=F&&3===N.nodeType?N.nodeValue.length:0}var W=M.getParent(N,M.isBlock),q=W?M.getParent(W.parentNode,M.isBlock):null;"LI"!==(q?q.nodeName.toUpperCase():"")||l&&l.ctrlKey||(W=q),N&&3===N.nodeType&&P>=N.nodeValue.length&&(function(at,gt,rt){for(var dt,mt=new Zi(gt,rt),Dt=at.getNonEmptyElements();dt=mt.next();)if(Dt[dt.nodeName.toLowerCase()]||0<dt.length)return!0}(r.schema,N,W)||(c=M.create("br"),k.insertNode(c),k.setStartAfter(c),k.setEndAfter(c),h=!0)),c=M.create("br"),sp(M,k,c),cy(M,m,c),hb(M,m,c,h),r.undoManager.add()}(r,l)},lM={create:Io("start","soffset","finish","foffset")},mw=(Ta([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(r){return r.fold(se,se,se)}),sv=Ta([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xa={domRange:sv.domRange,relative:sv.relative,exact:sv.exact,exactFromRange:function(r){return sv.exact(r.start(),r.soffset(),r.finish(),r.foffset())},getWin:function(r){var l=r.match({domRange:function(c){return Ce_fromDom(c.startContainer)},relative:function(c,h){return mw(c)},exact:function(c,h,m,M){return c}});return ll(l)},range:lM.create},pb=ys.detect().browser,hy=function(r,l){var c=Il(l)?zh(l).length:bs(l).length+1;return c<r?c:r<0?0:r},fy=function(r){return Xa.range(r.start(),hy(r.soffset(),r.start()),r.finish(),hy(r.foffset(),r.finish()))},Fp=function(r,l){return!Lt.isRestrictedNode(l.dom())&&(xs(r,l)||jr(r,l))},vw=function(r){return function(l){return Fp(r,l.start())&&Fp(r,l.finish())}},cM=function(r){return Xa.range(Ce_fromDom(r.startContainer),r.startOffset,Ce_fromDom(r.endContainer),r.endOffset)},gh=function(r,l){return kt.from(l).filter(vw(r)).map(fy)},py=function(r){var l=Rt.document.createRange();try{return l.setStart(r.start().dom(),r.soffset()),l.setEnd(r.finish().dom(),r.foffset()),kt.some(l)}catch(c){return kt.none()}},lv=function(r){return(r.bookmark?r.bookmark:kt.none()).bind(Ve(gh,Ce_fromDom(r.getBody()))).bind(py)},uv=function(r){var l=function(r){return!0===r.inline||pb.isIE()}(r)?function(r){return function(r){var l=r.getSelection();return(l&&0!==l.rangeCount?kt.from(l.getRangeAt(0)):kt.none()).map(cM)}(ll(r).dom()).filter(vw(r))}(Ce_fromDom(r.getBody())):kt.none();r.bookmark=l.isSome()?l:r.bookmark},Ig=lv,Hp=function(r){return B(r)||U(r)},cv=ge.each,Pg=ge.extend,hM=ge.map,fM=ge.inArray;function yw(r){var l,c,h,m,M={state:{},exec:{},value:{}},k=r.settings;r.on("PreInit",function(){l=r.dom,c=r.selection,k=r.settings,h=r.formatter});var P=function(rt){var dt;if(!r.quirks.isHidden()&&!r.removed){if(rt=rt.toLowerCase(),dt=M.state[rt])return dt(rt);try{return r.getDoc().queryCommandState(rt)}catch(mt){}return!1}},N=function(rt,dt){dt=dt||"exec",cv(rt,function(mt,Dt){cv(Dt.toLowerCase().split(","),function(Pt){M[dt][Pt]=mt})})},F=function(rt,dt,mt){rt=rt.toLowerCase(),M.value[rt]=function(){return dt.call(mt||r)}};Pg(this,{execCommand:function(rt,dt,mt,Dt){var Pt,wt,Ht=!1;if(!r.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(rt)||Dt&&Dt.skip_focus?function(r){lv(r).each(function(l){r.selection.setRng(l)})}(r):r.focus(),(Dt=r.fire("BeforeExecCommand",{command:rt,ui:dt,value:mt})).isDefaultPrevented())return!1;if(wt=rt.toLowerCase(),Pt=M.exec[wt])return Pt(wt,dt,mt),r.fire("ExecCommand",{command:rt,ui:dt,value:mt}),!0;if(cv(r.plugins,function(ce){if(ce.execCommand&&ce.execCommand(rt,dt,mt))return r.fire("ExecCommand",{command:rt,ui:dt,value:mt}),!(Ht=!0)}),Ht)return Ht;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(rt,dt,mt))return r.fire("ExecCommand",{command:rt,ui:dt,value:mt}),!0;try{Ht=r.getDoc().execCommand(rt,dt,mt)}catch(ce){}return!!Ht&&(r.fire("ExecCommand",{command:rt,ui:dt,value:mt}),!0)}},queryCommandState:P,queryCommandValue:function(rt){var dt;if(!r.quirks.isHidden()&&!r.removed){if(rt=rt.toLowerCase(),dt=M.value[rt])return dt(rt);try{return r.getDoc().queryCommandValue(rt)}catch(mt){}}},queryCommandSupported:function(rt){if(rt=rt.toLowerCase(),M.exec[rt])return!0;try{return r.getDoc().queryCommandSupported(rt)}catch(dt){}return!1},addCommands:N,addCommand:function(rt,dt,mt){rt=rt.toLowerCase(),M.exec[rt]=function(Dt,Pt,wt,Ht){return dt.call(mt||r,Pt,wt,Ht)}},addQueryStateHandler:function(rt,dt,mt){rt=rt.toLowerCase(),M.state[rt]=function(){return dt.call(mt||r)}},addQueryValueHandler:F,hasCustomCommand:function(rt){return rt=rt.toLowerCase(),!!M.exec[rt]}});var W=function(rt,dt,mt){return void 0===dt&&(dt=!1),void 0===mt&&(mt=null),r.getDoc().execCommand(rt,dt,mt)},q=function(rt){return h.match(rt)},Z=function(rt,dt){h.toggle(rt,dt?{value:dt}:void 0),r.nodeChanged()},ht=function(rt){m=c.getBookmark(rt)},at=function(){c.moveToBookmark(m)};N({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(rt){var dt,mt=r.getDoc();try{W(rt)}catch(Pt){dt=!0}if("paste"!==rt||mt.queryCommandEnabled(rt)||(dt=!0),dt||!mt.queryCommandSupported(rt)){var Dt=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");sn.mac&&(Dt=Dt.replace(/Ctrl\+/g,"\u2318+")),r.notificationManager.open({text:Dt,type:"error"})}},unlink:function(){if(c.isCollapsed()){var rt=r.dom.getParent(r.selection.getStart(),"a");rt&&r.dom.remove(rt,!0)}else h.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(rt){var dt=rt.substring(7);"full"===dt&&(dt="justify"),cv("left,center,right,justify".split(","),function(mt){dt!==mt&&h.remove("align"+mt)}),"none"!==dt&&Z("align"+dt)},"InsertUnorderedList,InsertOrderedList":function(rt){var dt,mt;W(rt),(dt=l.getParent(c.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((mt=dt.parentNode).nodeName)&&(ht(),l.split(mt,dt),at())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(rt){Z(rt)},"ForeColor,HiliteColor":function(rt,dt,mt){Z(rt,mt)},FontName:function(rt,dt,mt){var Dt;(Dt=r).formatter.toggle("fontname",{value:cb(Dt,mt)}),Dt.nodeChanged()},FontSize:function(rt,dt,mt){var Dt;(Dt=r).formatter.toggle("fontsize",{value:cb(Dt,mt)}),Dt.nodeChanged()},RemoveFormat:function(rt){h.remove(rt)},mceBlockQuote:function(){Z("blockquote")},FormatBlock:function(rt,dt,mt){return Z(mt||"p")},mceCleanup:function(){var rt=c.getBookmark();r.setContent(r.getContent()),c.moveToBookmark(rt)},mceRemoveNode:function(rt,dt,mt){var Dt=mt||c.getNode();Dt!==r.getBody()&&(ht(),r.dom.remove(Dt,!0),at())},mceSelectNodeDepth:function(rt,dt,mt){var Dt=0;l.getParent(c.getNode(),function(Pt){if(1===Pt.nodeType&&Dt++===mt)return c.select(Pt),!1},r.getBody())},mceSelectNode:function(rt,dt,mt){c.select(mt)},mceInsertContent:function(rt,dt,mt){!function(r,l){var c,h,m="string"!=typeof(c=l)?(h=ge.extend({paste:c.paste,data:{paste:c.paste}},c),{content:c.content,details:h}):{content:c,details:{}};!function(r,l,c){var h,m,M,k,P,N,F,W,q,Z,ht,at=r.selection,gt=r.dom;if(/^ | $/.test(l)&&(l=function(be,Ne){var Cn,Ae;Ae=be.startOffset;var Be=function(Pn){return Cn[Pn]&&3===Cn[Pn].nodeType};return 3===(Cn=be.startContainer).nodeType&&(0<Ae?Ne=Ne.replace(/^&nbsp;/," "):Be("previousSibling")||(Ne=Ne.replace(/^ /,"&nbsp;")),Ae<Cn.length?Ne=Ne.replace(/&nbsp;(<br>|)$/," "):Be("nextSibling")||(Ne=Ne.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),Ne}(at.getRng(),l)),h=r.parser,ht=c.merge,m=ah({validate:r.settings.validate},r.schema),Z='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',(N=r.fire("BeforeSetContent",N={content:l,format:"html",selection:!0,paste:c.paste})).isDefaultPrevented())r.fire("SetContent",{content:N.content,format:"html",selection:!0,paste:c.paste});else{-1===(l=N.content).indexOf("{$caret}")&&(l+="{$caret}"),l=l.replace(/\{\$caret\}/,Z);var dt,mt,Dt,Pt,wt,Ht=(W=at.getRng()).startContainer||(W.parentElement?W.parentElement():null),ce=r.getBody();Ht===ce&&at.isCollapsed()&&gt.isBlock(ce.firstChild)&&(dt=ce.firstChild)&&!r.schema.getShortEndedElements()[dt.nodeName]&&gt.isEmpty(ce.firstChild)&&((W=gt.createRng()).setStart(ce.firstChild,0),W.setEnd(ce.firstChild,0),at.setRng(W)),at.isCollapsed()||(r.selection.setRng(_f(r.selection.getRng())),r.getDoc().execCommand("Delete",!1,null),Dt=l,wt=(mt=r.selection.getRng()).startOffset,3===(Pt=mt.startContainer).nodeType&&mt.collapsed&&("\xa0"===Pt.data[wt]?(Pt.deleteData(wt,1),/[\u00a0| ]$/.test(Dt)||(Dt+=" ")):"\xa0"===Pt.data[wt-1]&&(Pt.deleteData(wt-1,1),/[\u00a0| ]$/.test(Dt)||(Dt=" "+Dt))),l=Dt);var Xt,xe,te,Ee={context:(M=at.getNode()).nodeName.toLowerCase(),data:c.data,insert:!0};if(P=h.parse(l,Ee),!0===c.paste&&function(r,l){var c,h,m,M,k,P,N=l.firstChild,F=l.lastChild;return N&&"meta"===N.name&&(N=N.next),F&&"mce_marker"===F.attr("id")&&(F=F.prev),h=F,P=(c=r).getNonEmptyElements(),h&&(h.isEmpty(P)||(m=h,c.getBlockElements()[m.name]&&(k=m).firstChild&&k.firstChild===k.lastChild&&("br"===(M=m.firstChild).name||"\xa0"===M.value)))&&(F=F.prev),!(!N||N!==F||"ul"!==N.name&&"ol"!==N.name)}(r.schema,P)&&function(r,l){return!!qu(r,l)}(gt,M))return W=A0(m,gt,r.selection.getRng(),P),r.selection.setRng(W),void r.fire("SetContent",N);if(function(be){for(var Ne=be;Ne=Ne.walk();)1===Ne.type&&Ne.attr("data-mce-fragment","1")}(P),"mce_marker"===(q=P.lastChild).attr("id"))for(q=(F=q).prev;q;q=q.walk(!0))if(3===q.type||!gt.isBlock(q.name)){r.schema.isValidChild(q.parent.name,"span")&&q.parent.insert(F,q,"br"===q.name);break}if(r._selectionOverrides.showBlockCaretContainer(M),Ee.invalid){for(Ys(r,Z),M=at.getNode(),k=r.getBody(),9===M.nodeType?M=q=k:q=M;q!==k;)q=(M=q).parentNode;l=M===k?k.innerHTML:gt.getOuterHTML(M),l=m.serialize(h.parse(l.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return m.serialize(P)}))),M===k?gt.setHTML(k,l):gt.setOuterHTML(M,l)}else!function(be,Ne,Cn){if("all"===Cn.getAttribute("data-mce-bogus"))Cn.parentNode.insertBefore(be.dom.createFragment(Ne),Cn);else{var Ae=Cn.firstChild;!Ae||Ae===Cn.lastChild&&"BR"===Ae.nodeName?be.dom.setHTML(Cn,Ne):Ys(be,Ne)}}(r,l=m.serialize(P),M);(function(be,Ne){var Cn=be.schema.getTextInlineElements(),Ae=be.dom;if(Ne){var Be=be.getBody(),Pn=new Hm(Ae);ge.each(Ae.select("*[data-mce-fragment]"),function(an){for(var ke=an.parentNode;ke&&ke!==Be;ke=ke.parentNode)Cn[an.nodeName.toLowerCase()]&&Pn.compare(ke,an)&&Ae.remove(an,!0)})}})(r,ht),function(be,Ne){var Cn,Ae,Be,Pn,an,ke=be.dom,Ze=be.selection;if(Ne){if(be.selection.scrollIntoView(Ne),Cn=function(Yn){for(var Wn=be.getBody();Yn&&Yn!==Wn;Yn=Yn.parentNode)if("false"===be.dom.getContentEditable(Yn))return Yn;return null}(Ne))return ke.remove(Ne),Ze.select(Cn);var Hn=ke.createRng();(Pn=Ne.previousSibling)&&3===Pn.nodeType?(Hn.setStart(Pn,Pn.nodeValue.length),sn.ie||(an=Ne.nextSibling)&&3===an.nodeType&&(Pn.appendData(an.data),an.parentNode.removeChild(an))):(Hn.setStartBefore(Ne),Hn.setEndBefore(Ne)),Ae=ke.getParent(Ne,ke.isBlock),ke.remove(Ne),Ae&&ke.isEmpty(Ae)&&(be.$(Ae).empty(),Hn.setStart(Ae,0),Hn.setEnd(Ae,0),Hh(Ae)||Ae.getAttribute("data-mce-fragment")||!(Be=function(Yn){var Wn=Ye.fromRangeStart(Yn);if(Wn=hu(be.getBody()).next(Wn))return Wn.toRange()}(Hn))?ke.add(Ae,ke.create("br",{"data-mce-bogus":"1"})):(Hn=Be,ke.remove(Ae))),Ze.setRng(Hn)}}(r,gt.get("mce_marker")),Xt=r.getBody(),ge.each(Xt.getElementsByTagName("*"),function(be){be.removeAttribute("data-mce-fragment")}),xe=r.dom,te=r.selection.getStart(),kt.from(xe.getParent(te,"td,th")).map(Ce_fromDom).each(Tp),r.fire("SetContent",N),r.addVisual()}}(r,m.content,m.details)}(r,mt)},mceInsertRawHTML:function(rt,dt,mt){c.setContent("tiny_mce_marker");var Dt=r.getContent();r.setContent(Dt.replace(/tiny_mce_marker/g,function(){return mt}))},mceToggleFormat:function(rt,dt,mt){Z(mt)},mceSetContent:function(rt,dt,mt){r.setContent(mt)},"Indent,Outdent":function(rt){!function(r,l){var c=r.settings,h=r.dom,m=r.selection,M=r.formatter,k=/[a-z%]+$/i.exec(c.indentation)[0],P=parseInt(c.indentation,10),N=r.getParam("indent_use_margin",!1);r.queryCommandState("InsertUnorderedList")||r.queryCommandState("InsertOrderedList")||c.forced_root_block||h.getParent(m.getNode(),h.isBlock)||M.apply("div"),Ke(function(r){return Vn(_i(r.selection.getSelectedBlocks(),Ce_fromDom),function(l){return!Hp(l)&&!ul(l).map(Hp).getOr(!1)})}(r),function(F){!function(W,q,Z,ht,at,gt){if("false"!==W.getContentEditable(gt)){var rt=Z?"margin":"padding";if(rt="TABLE"===gt.nodeName?"margin":rt,rt+="rtl"===W.getStyle(gt,"direction",!0)?"Right":"Left","outdent"===q){var dt=Math.max(0,parseInt(gt.style[rt]||0,10)-ht);W.setStyle(gt,rt,dt?dt+at:"")}else dt=parseInt(gt.style[rt]||0,10)+ht+at,W.setStyle(gt,rt,dt)}}(h,l,N,P,k,F.dom())})}(r,rt)},mceRepaint:function(){},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(rt,dt,mt){r.execCommand("mceInsertContent",!1,mt.replace(/\{\$selection\}/g,c.getContent({format:"text"})))},mceInsertLink:function(rt,dt,mt){var Dt;"string"==typeof mt&&(mt={href:mt}),Dt=l.getParent(c.getNode(),"a"),mt.href=mt.href.replace(" ","%20"),Dt&&mt.href||h.remove("link"),mt.href&&h.apply("link",mt,Dt)},selectAll:function(){var rt=l.getParent(c.getStart(),Lt.isContentEditableTrue);if(rt){var dt=l.createRng();dt.selectNodeContents(rt),c.setRng(dt)}},delete:function(){!function(r){Ep(r,!1)||kf(r,!1)||$0(r,!1)||Cc(r,!1)||$c(r)||R0(r)||iv(r,!1)||(fh(r,"Delete"),ti(r))}(r)},forwardDelete:function(){!function(r){Ep(r,!0)||kf(r,!0)||$0(r,!0)||Cc(r,!0)||$c(r)||R0(r)||iv(r,!0)||fh(r,"ForwardDelete")}(r)},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(rt,dt,mt){return gb(r,mt),!0}});var gt=function(rt){return function(){var dt=c.isCollapsed()?[l.getParent(c.getNode(),l.isBlock)]:c.getSelectedBlocks(),mt=hM(dt,function(Dt){return!!h.matchNode(Dt,rt)});return-1!==fM(mt,!0)}};N({JustifyLeft:gt("alignleft"),JustifyCenter:gt("aligncenter"),JustifyRight:gt("alignright"),JustifyFull:gt("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(rt){return q(rt)},mceBlockQuote:function(){return q("blockquote")},Outdent:function(){var rt;return!(!k.inline_styles||!((rt=l.getParent(c.getStart(),l.isBlock))&&0<parseInt(rt.style.paddingLeft,10)||(rt=l.getParent(c.getEnd(),l.isBlock))&&0<parseInt(rt.style.paddingLeft,10)))||P("InsertUnorderedList")||P("InsertOrderedList")||!k.inline_styles&&!!l.getParent(c.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(rt){var dt=l.getParent(c.getNode(),"ul,ol");return dt&&("insertunorderedlist"===rt&&"UL"===dt.tagName||"insertorderedlist"===rt&&"OL"===dt.tagName)}},"state"),N({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}}),F("FontName",function(){return sy(rt=r).fold(function(){return ay(rt).map(function(dt){return oy.getFontFamily(rt.getBody(),dt)}).getOr("")},function(dt){return oy.getFontFamily(rt.getBody(),dt)});var rt},this),F("FontSize",function(){return sy(rt=r).fold(function(){return ay(rt).map(function(dt){return oy.getFontSize(rt.getBody(),dt)}).getOr("")},function(dt){return oy.getFontSize(rt.getBody(),dt)});var rt},this)}var gM=ge.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),my=function(r){var l,c,h=this,m={},M=function(){return!1},k=function(){return!0};l=(r=r||{}).scope||h,c=r.toggleEvent||M;var P=function(F,W,q,Z){var ht,at,gt;if(!1===W&&(W=M),W)for(W={func:W},Z&&ge.extend(W,Z),gt=(at=F.toLowerCase().split(" ")).length;gt--;)(ht=m[F=at[gt]])||(ht=m[F]=[],c(F,!0)),q?ht.unshift(W):ht.push(W);return h},N=function(F,W){var q,Z,ht,at,gt;if(F)for(q=(at=F.toLowerCase().split(" ")).length;q--;){if(Z=m[F=at[q]],!F){for(ht in m)c(ht,!1),delete m[ht];return h}if(Z){if(W)for(gt=Z.length;gt--;)Z[gt].func===W&&(Z=Z.slice(0,gt).concat(Z.slice(gt+1)),m[F]=Z);else Z.length=0;Z.length||(c(F,!1),delete m[F])}}else{for(F in m)c(F,!1);m={}}return h};h.fire=function(F,W){var q,Z,ht,at;if(F=F.toLowerCase(),(W=W||{}).type=F,W.target||(W.target=l),W.preventDefault||(W.preventDefault=function(){W.isDefaultPrevented=k},W.stopPropagation=function(){W.isPropagationStopped=k},W.stopImmediatePropagation=function(){W.isImmediatePropagationStopped=k},W.isDefaultPrevented=M,W.isPropagationStopped=M,W.isImmediatePropagationStopped=M),r.beforeFire&&r.beforeFire(W),q=m[F])for(Z=0,ht=q.length;Z<ht;Z++){if((at=q[Z]).once&&N(F,at.func),W.isImmediatePropagationStopped())return W.stopPropagation(),W;if(!1===at.func.call(l,W))return W.preventDefault(),W}return W},h.on=P,h.off=N,h.once=function(F,W,q){return P(F,W,q,{once:!0})},h.has=function(F){return F=F.toLowerCase(),!(!m[F]||0===m[F].length)}};my.isNative=function(r){return!!gM[r.toLowerCase()]};var jh,dv=function(r){return r._eventDispatcher||(r._eventDispatcher=new my({scope:r,toggleEvent:function(l,c){my.isNative(l)&&r.toggleNativeEvent&&r.toggleNativeEvent(l,c)}})),r._eventDispatcher},vy={fire:function(r,l,c){if(this.removed&&"remove"!==r&&"detach"!==r)return l;if(l=dv(this).fire(r,l,c),!1!==c&&this.parent)for(var h=this.parent();h&&!l.isPropagationStopped();)h.fire(r,l,!1),h=h.parent();return l},on:function(r,l,c){return dv(this).on(r,l,c)},off:function(r,l){return dv(this).off(r,l)},once:function(r,l){return dv(this).once(r,l)},hasEventListeners:function(r){return dv(this).has(r)}},yy=function(r,l,c){try{r.getDoc().execCommand(l,!1,c)}catch(h){}},Vp=function(r,l){(function(r,l,c){var h,m;Ll(r,l)&&!1===c?(m=l,vd(h=r)?h.dom().classList.remove(m):function(r,l){return m=l,0<(M=Vn(Xd(c=r,h="class"),function(k){return k!==m})).length?Va(c,h,M.join(" ")):Ql(c,h),!1;var c,h,m,M}(h,m),function(r){0===(vd(r)?r.dom().classList:Xd(r,"class")).length&&Ql(r,"class")}(h)):c&&Co(r,l)})(Ce_fromDom(r.getBody()),"mce-content-readonly",l),l?(r.selection.controlSelection.hideResizeRect(),r.readonly=!0,r.getBody().contentEditable="false"):(r.readonly=!1,r.getBody().contentEditable="true",yy(r,"StyleWithCSS",!1),yy(r,"enableInlineTableEditing",!1),yy(r,"enableObjectResizing",!1),r.focus(),r.nodeChanged())},xy=eo.DOM,fv=function(r,l){return"selectionchange"===l?r.getDoc():!r.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(l)?r.getDoc().documentElement:r.settings.event_root?(r.eventRoot||(r.eventRoot=xy.select(r.settings.event_root)[0]),r.eventRoot):r.getBody()},xb=function(r,l,c){var h;(h=r).hidden||h.readonly?!0===r.readonly&&c.preventDefault():r.fire(l,c)},bb=function(r,l){var c,h;if(r.delegates||(r.delegates={}),!r.delegates[l]&&!r.removed)if(c=fv(r,l),r.settings.event_root){if(jh||(jh={},r.editorManager.on("removeEditor",function(){var m;if(!r.editorManager.activeEditor&&jh){for(m in jh)r.dom.unbind(fv(r,m));jh=null}})),jh[l])return;jh[l]=h=function(m){for(var M=m.target,k=r.editorManager.get(),P=k.length;P--;){var N=k[P].getBody();(N===M||xy.isChildOf(M,N))&&xb(k[P],l,m)}},xy.bind(c,l,h)}else xy.bind(c,l,h=function(m){xb(r,l,m)}),r.delegates[l]=h},_b={bindPendingEventDelegates:function(){var r=this;ge.each(r._pendingNativeEvents,function(l){bb(r,l)})},toggleNativeEvent:function(r,l){var c=this;"focus"!==r&&"blur"!==r&&(l?c.initialized?bb(c,r):c._pendingNativeEvents?c._pendingNativeEvents.push(r):c._pendingNativeEvents=[r]:c.initialized&&(c.dom.unbind(fv(c,r),r,c.delegates[r]),delete c.delegates[r]))},unbindAllNativeEvents:function(){var r,l=this,c=l.getBody(),h=l.dom;if(l.delegates){for(r in l.delegates)l.dom.unbind(fv(l,r),r,l.delegates[r]);delete l.delegates}!l.inline&&c&&h&&(c.onload=null,h.unbind(l.getWin()),h.unbind(l.getDoc())),h&&(h.unbind(c),h.unbind(l.getContainer()))}},wb=_b=ge.extend({},vy,_b),bw=Io("sections","settings"),_w=ys.detect().deviceType.isTouch(),$a=["lists","autolink","autosave"],ww={theme:"mobile"},by=function(r){var l=Rn(r)?r.join(" "):r,c=_i(Mn(l)?l.split(" "):[],Hd);return Vn(c,function(h){return 0<h.length})},Sb=function(r,l){return r.sections().hasOwnProperty(l)},Ju=function(r,l,c){return kt.from(l.settings[c]).filter(r)},Cb=ge.each,gv=ge.explode,xM={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Cw=ge.makeMap("alt,ctrl,shift,meta,access");function Mw(r){var l={},c=[],h=function(P){var N,F,W={};for(F in Cb(gv(P,"+"),function(q){q in Cw?W[q]=!0:/^[0-9]{2,}$/.test(q)?W.keyCode=parseInt(q,10):(W.charCode=q.charCodeAt(0),W.keyCode=xM[q]||q.toUpperCase().charCodeAt(0))}),N=[W.keyCode],Cw)W[F]?N.push(F):W[F]=!1;return W.id=N.join(","),W.access&&(W.alt=!0,sn.mac?W.ctrl=!0:W.shift=!0),W.meta&&(sn.mac?W.meta=!0:(W.ctrl=!0,W.meta=!1)),W},m=function(P,N,F,W){var q;return(q=ge.map(gv(P,">"),h))[q.length-1]=ge.extend(q[q.length-1],{func:F,scope:W||r}),ge.extend(q[0],{desc:r.translate(N),subpatterns:q.slice(1)})},M=function(P,N){return!!N&&N.ctrl===P.ctrlKey&&N.meta===P.metaKey&&N.alt===P.altKey&&N.shift===P.shiftKey&&!!(P.keyCode===N.keyCode||P.charCode&&P.charCode===N.charCode)&&(P.preventDefault(),!0)},k=function(P){return P.func?P.func.call(P.scope):null};r.on("keyup keypress keydown",function(P){var N,F;((F=P).altKey||F.ctrlKey||F.metaKey||"keydown"===(N=P).type&&112<=N.keyCode&&N.keyCode<=123)&&!P.isDefaultPrevented()&&(Cb(l,function(W){if(M(P,W))return c=W.subpatterns.slice(0),"keydown"===P.type&&k(W),!0}),M(P,c[0])&&(1===c.length&&"keydown"===P.type&&k(c[0]),c.shift()))}),this.add=function(P,N,F,W){var q;return"string"==typeof(q=F)?F=function(){r.execCommand(q,!1,null)}:ge.isArray(q)&&(F=function(){r.execCommand(q[0],q[1],q[2])}),Cb(gv(ge.trim(P.toLowerCase())),function(Z){var ht=m(Z,N,F,W);l[ht.id]=ht}),!0},this.remove=function(P){var N=m(P);return!!l[N.id]&&(delete l[N.id],!0)}}var Tw=function(r){var l=Fs(r).dom();return r.dom()===l.activeElement},Ng=function(r,l){(function(r,l){return(c=l,c.collapsed?kt.from(rr(c.startContainer,c.startOffset)).map(Ce_fromDom):kt.none()).bind(function(h){return ot(h)?kt.some(h):!1===xs(r,h)?kt.some(r):kt.none()});var c})(Ce_fromDom(r.getBody()),l).bind(function(c){return mi.firstPositionIn(c.dom())}).fold(function(){r.selection.normalize()},function(c){return r.selection.setRng(c.toRange())})},Ef=function(r){if(r.setActive)try{r.setActive()}catch(l){r.focus()}else r.focus()},Tb=function(r){return r.inline?function(r){var l,c=r.getBody();return c&&(l=Ce_fromDom(c),Tw(l)||function(r){return(l=Fs(r),c=void 0!==l?l.dom():Rt.document,kt.from(c.activeElement).map(Ce_fromDom)).filter(function(h){return r.dom().contains(h.dom())});var l,c}(l).isSome())}(r):(l=r).iframeElement&&Tw(Ce_fromDom(l.iframeElement));var l},wy=function(r){return r.editorManager.setActive(r)},Rg=Tb,Ab=function(r,l){return l.dom()[r]},kb=function(r,l){return parseInt(cc(l,r),10)},Dw=Ve(Ab,"clientWidth"),Sy=Ve(Ab,"clientHeight"),Ib=Ve(kb,"margin-top"),Zc=Ve(kb,"margin-left"),Tc=function(r,l,c){var m,M,k,P,N,F,W,q,Z,ht,at=Ce_fromDom(r.getBody()),gt=r.inline?at:Ce_fromDom(at.dom().ownerDocument.documentElement),rt=(m=r.inline,k=l,P=c,N=(M=gt).dom().getBoundingClientRect(),{x:k-(m?N.left+M.dom().clientLeft+Zc(M):0),y:P-(m?N.top+M.dom().clientTop+Ib(M):0)});return W=rt.x,q=rt.y,Z=Dw(F=gt),ht=Sy(F),0<=W&&0<=q&&W<=Z&&q<=ht};function Cy(r){var l,c=[],h=function(){var P,N=r.theme;return N&&N.getNotificationManagerImpl?N.getNotificationManagerImpl():{open:P=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:P,reposition:P,getArgs:P}},m=function(){0<c.length&&h().reposition(c)},M=function(P){Qi(c,function(N){return N===P}).each(function(N){c.splice(N,1)})},k=function(P){if(!r.removed&&function(r){var l;return(l=r.inline?r.getBody():r.getContentAreaContainer(),kt.from(l).map(Ce_fromDom)).map(function(h){return xs(Fs(h),h)}).getOr(!1)}(r))return Zn(c,function(N){return!((F=h().getArgs(N)).type!==(W=P).type||F.text!==W.text||F.progressBar||F.timeout||W.progressBar||W.timeout);var F,W}).getOrThunk(function(){r.editorManager.setActive(r);var F=h().open(P,function(){M(F),m()});return c.push(F),m(),F})};return(l=r).on("SkinLoaded",function(){var P=l.settings.service_message;P&&k({text:P,type:"warning",timeout:0,icon:""})}),l.on("ResizeEditor ResizeWindow",function(){mr.requestAnimationFrame(m)}),l.on("remove",function(){Ke(c.slice(),function(P){h().close(P)})}),{open:k,close:function(){kt.from(c[0]).each(function(P){h().close(P),M(P),m()})},getNotifications:function(){return c}}}function My(r){var l=[],c=function(){var P,N=r.theme;return N&&N.getWindowManagerImpl?N.getWindowManagerImpl():{open:P=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:P,confirm:P,close:P,getParams:P,setParams:P}},h=function(P,N){return function(){return N?N.apply(P,arguments):void 0}},m=function(P){l.push(P),r.fire("OpenWindow",{win:P})},M=function(P){Qi(l,function(N){return N===P}).each(function(N){l.splice(N,1),r.fire("CloseWindow",{win:P}),0===l.length&&r.focus()})},k=function(){return kt.from(l[l.length-1])};return r.on("remove",function(){Ke(l.slice(0),function(P){c().close(P)})}),{windows:l,open:function(P,N){r.editorManager.setActive(r),uv(r);var F=c().open(P,N,M);return m(F),F},alert:function(P,N,F){var W=c().alert(P,h(F||this,N),M);m(W)},confirm:function(P,N,F){var W=c().confirm(P,h(F||this,N),M);m(W)},close:function(){k().each(function(P){c().close(P),M(P)})},getParams:function(){return k().map(c().getParams).getOr(null)},setParams:function(P){k().each(function(N){c().setParams(N,P)})},getWindows:function(){return l}}}var Ty={},Dy="en",Uh={setCode:function(r){r&&(Dy=r,this.rtl=!!this.data[r]&&"rtl"===this.data[r]._dir)},getCode:function(){return Dy},rtl:!1,add:function(r,l){var c=Ty[r];for(var h in c||(Ty[r]=c={}),l)c[h]=l[h];this.setCode(r)},translate:function(r){var l=Ty[Dy]||{},c=function(k){return ge.is(k,"function")?Object.prototype.toString.call(k):h(k)?"":""+k},h=function(k){return""===k||null===k||ge.is(k,"undefined")},m=function(k){return k=c(k),ge.hasOwn(l,k)?c(l[k]):k};if(h(r))return"";if(ge.is(r,"object")&&ge.hasOwn(r,"raw"))return c(r.raw);if(ge.is(r,"array")){var M=r.slice(1);r=m(r[0]).replace(/\{([0-9]+)\}/g,function(k,P){return ge.hasOwn(M,P)?c(M[P]):k})}return m(r).replace(/{context:\w+}$/,"")},data:Ty},Pb=Ga.PluginManager,Eb=function(r,l){r.notificationManager.open({type:"error",text:l})},pv=function(r,l){r._skinLoaded?Eb(r,l):r.on("SkinLoaded",function(){Eb(r,l)})},Nb=function(r){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];var h=Rt.window.console;h&&(h.error?h.error.apply(h,arguments):h.log.apply(h,arguments))},Dc_displayError=pv,Dc_initError=Nb,qh=Ga.PluginManager,Nf=Ga.ThemeManager;function Yh(){return new(Xe_getOrDie("XMLHttpRequest"))}var Aw=function(r){var l,c,h=decodeURIComponent(r).split(",");return(c=/data:([^;]+)/.exec(h[0]))&&(l=c[1]),{type:l,data:h[1]}},vv=function(r){return 0===r.indexOf("blob:")?(l=r,new Fi(function(c,h){var m=function(){h("Cannot convert "+l+" to Blob. Resource might not exist or is inaccessible.")};try{var M=Yh();M.open("GET",l,!0),M.responseType="blob",M.onload=function(){200===this.status?c(this.response):m()},M.onerror=m,M.send()}catch(k){m()}})):0===r.indexOf("data:")?function(r){return new Fi(function(l){var c,h,m,M,k=Aw(r);try{c=function(r){return Xe_getOrDie("atob")(r)}(k.data)}catch(P){return void l(new Rt.Blob([]))}for(M=c.length,h=new(Xe_getOrDie("Uint8Array"))(M),m=0;m<h.length;m++)h[m]=c.charCodeAt(m);l(new Rt.Blob([h],{type:k.type}))})}(r):null;var l},xv=Aw,kw=0,Xh=function(r){return(r||"blobid")+kw++},jp=0,ky_uuid=function(r){return r+jp+++(l=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+l()+l()+l());var l};function Iw(r){var l,c,h,m,M,k,P,N,F,W=(l=[],c=function(Xt){var xe,te,Ee;if(!Xt.blob||!Xt.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return xe=Xt.id||ky_uuid("blobid"),te=Xt.name||xe,{id:Oe(xe),name:Oe(te),filename:Oe(te+"."+(Ee=Xt.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[Ee.toLowerCase()]||"dat")),blob:Oe(Xt.blob),base64:Oe(Xt.base64),blobUri:Oe(Xt.blobUri||je_createObjectURL(Xt.blob)),uri:Oe(Xt.uri)}},{create:function(Xt,xe,te,Ee){if(Mn(Xt))return c({id:Xt,name:Ee,blob:xe,base64:te});if(gr(Xt))return c(Xt);throw new Error("Unknown input type")},add:function(Xt){h(Xt.id())||l.push(Xt)},get:h=function(Xt){return m(function(xe){return xe.id()===Xt})},getByUri:function(Xt){return m(function(xe){return xe.blobUri()===Xt})},findFirst:m=function(Xt){return Vn(l,Xt)[0]},removeByUri:function(Xt){l=Vn(l,function(xe){return xe.blobUri()!==Xt||(je_revokeObjectURL(xe.blobUri()),!1)})},destroy:function(){Ke(l,function(Xt){je_revokeObjectURL(Xt.blobUri())}),l=[]}}),q=(P={},N=function(Xt,xe){return{status:Xt,resultUri:xe}},{hasBlobUri:F=function(Xt){return Xt in P},getResultUri:function(Xt){var xe=P[Xt];return xe?xe.resultUri:null},isPending:function(Xt){return!!F(Xt)&&1===P[Xt].status},isUploaded:function(Xt){return!!F(Xt)&&2===P[Xt].status},markPending:function(Xt){P[Xt]=N(1,null)},markUploaded:function(Xt,xe){P[Xt]=N(2,xe)},removeFailed:function(Xt){delete P[Xt]},destroy:function(){P={}}}),Z=[],ht=function(Xt){return function(xe){return r.selection?Xt(xe):[]}},at=function(Xt,xe,te){for(var Ee=0;-1!==(Ee=Xt.indexOf(xe,Ee))&&(Xt=Xt.substring(0,Ee)+te+Xt.substr(Ee+xe.length),Ee+=te.length-xe.length+1),-1!==Ee;);return Xt},gt=function(Xt,xe,te){return Xt=at(Xt,'src="'+xe+'"','src="'+te+'"'),at(Xt,'data-mce-src="'+xe+'"','data-mce-src="'+te+'"')},rt=function(Xt,xe){Ke(r.undoManager.data,function(te){"fragmented"===te.type?te.fragments=_i(te.fragments,function(Ee){return gt(Ee,Xt,xe)}):te.content=gt(te.content,Xt,xe)})},dt=function(){return r.notificationManager.open({text:r.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},Dt=function(Xt){return M||(M=function mv(r,l){var c={},h=function(N,F,W,q){var Z,ht;(Z=Yh()).open("POST",l.url),Z.withCredentials=l.credentials,Z.upload.onprogress=function(at){q(at.loaded/at.total*100)},Z.onerror=function(){W("Image upload failed due to a XHR Transport error. Code: "+Z.status)},Z.onload=function(){var at,gt,rt;Z.status<200||300<=Z.status?W("HTTP Error: "+Z.status):(at=JSON.parse(Z.responseText))&&"string"==typeof at.location?F((rt=at.location,(gt=l.basePath)?gt.replace(/\/$/,"")+"/"+rt.replace(/^\//,""):rt)):W("Invalid JSON: "+Z.responseText)},(ht=new Rt.FormData).append("file",N.blob(),N.filename()),Z.send(ht)},m=function(N,F){return{url:F,blobInfo:N,status:!0}},M=function(N,F){return{url:"",blobInfo:N,status:!1,error:F}},k=function(N,F){ge.each(c[N],function(W){W(F)}),delete c[N]};return!1===Ui(l.handler)&&(l.handler=h),{upload:function(N,F){return l.url||l.handler!==h?function(N,F){return N=ge.grep(N,function(W){return!r.isUploaded(W.blobUri())}),Fi.all(ge.map(N,function(W){return r.isPending(W.blobUri())?(at=W.blobUri(),new Fi(function(gt){c[at]=c[at]||[],c[at].push(gt)})):(Z=l.handler,ht=F,r.markPending((q=W).blobUri()),new Fi(function(gt){var rt;try{var dt=function(){rt&&rt.close()};Z(q,function(mt){dt(),r.markUploaded(q.blobUri(),mt),k(q.blobUri(),m(q,mt)),gt(m(q,mt))},function(mt){dt(),r.removeFailed(q.blobUri()),k(q.blobUri(),M(q,mt)),gt(M(q,mt))},function(mt){mt<0||100<mt||(rt||(rt=ht()),rt.progressBar.value(mt))})}catch(mt){gt(M(q,mt.message))}}));var q,Z,ht,at}))}(N,F):new Fi(function(W){W([])})}}}(q,{url:Qt(r),basePath:ve(r),credentials:Se(r),handler:me(r)})),Ht().then(ht(function(xe){var te;return te=_i(xe,function(Ee){return Ee.blobInfo}),M.upload(te,dt).then(ht(function(Ee){var be=_i(Ee,function(Ne,Cn){var Ae=xe[Cn].image;return Ne.status&&function(r){return r.getParam("images_replace_blob_uris",!0,"boolean")}(r)?function(Xt,xe){W.removeByUri(Xt.src),rt(Xt.src,xe),r.$(Xt).attr({src:Ct(r)?xe+"?"+(new Date).getTime():xe,"data-mce-src":r.convertURL(xe,"src")})}(Ae,Ne.url):Ne.error&&function(r,l){pv(r,Uh.translate(["Failed to upload image: {0}",l]))}(r,Ne.error),{element:Ae,status:Ne.status}});return Xt&&Xt(be),be}))}))},Pt=function(Xt){if(pt(r))return Dt(Xt)},wt=function(Xt){return!1!==yi(Z,function(xe){return xe(Xt)})&&(0!==Xt.getAttribute("src").indexOf("data:")||function(r){return r.getParam("images_dataimg_filter",Oe(!0),"function")}(r)(Xt))},Ht=function(){var Xt,xe,te;return k||(Xt=q,xe=W,te={},k={findAll:function(Ee,be){var Ne;be||(be=Oe(!0)),Ne=Vn(function(r){return r?_e(r.getElementsByTagName("img")):[]}(Ee),function(Ae){var Be=Ae.src;return!!sn.fileApi&&!Ae.hasAttribute("data-mce-bogus")&&!Ae.hasAttribute("data-mce-placeholder")&&!(!Be||Be===sn.transparentSrc)&&(0===Be.indexOf("blob:")?!Xt.isUploaded(Be)&&be(Ae):0===Be.indexOf("data:")&&be(Ae))});var Cn=_i(Ne,function(Ae){if(te[Ae.src])return new Fi(function(Pn){te[Ae.src].then(function(an){if("string"==typeof an)return an;Pn({image:Ae,blobInfo:an.blobInfo})})});var Be=new Fi(function(Pn,an){!function(r,l,c,h){var m,M;0!==l.src.indexOf("blob:")?(m=xv(l.src).data,(M=r.findFirst(function(k){return k.base64()===m}))?c({image:l,blobInfo:M}):vv(l.src).then(function(k){M=r.create(Xh(),k,m),r.add(M),c({image:l,blobInfo:M})},function(k){h(k)})):(M=r.getByUri(l.src))?c({image:l,blobInfo:M}):vv(l.src).then(function(k){(function(r){return new Fi(function(l){var c=new(Xe_getOrDie("FileReader"));c.onloadend=function(){l(c.result)},c.readAsDataURL(r)})})(k).then(function(P){m=xv(P).data,M=r.create(Xh(),k,m),r.add(M),c({image:l,blobInfo:M})})},function(k){h(k)})}(xe,Ae,Pn,an)}).then(function(Pn){return delete te[Pn.image.src],Pn}).catch(function(Pn){return delete te[Ae.src],Pn});return te[Ae.src]=Be});return Fi.all(Cn)}}),k.findAll(r.getBody(),wt).then(ht(function(Ee){return Ee=Vn(Ee,function(be){return"string"!=typeof be||(Dc_displayError(r,be),!1)}),Ke(Ee,function(be){rt(be.image.src,be.blobInfo.blobUri()),be.image.src=be.blobInfo.blobUri(),be.image.removeAttribute("data-mce-src")}),Ee}))},ce=function(Xt){return Xt.replace(/src="(blob:[^"]+)"/g,function(xe,te){var Ee=q.getResultUri(te);if(Ee)return'src="'+Ee+'"';var be=W.getByUri(te);return be||(be=Ei(r.editorManager.get(),function(Ne,Cn){return Ne||Cn.editorUpload&&Cn.editorUpload.blobCache.getByUri(te)},null)),be?'src="data:'+be.blob().type+";base64,"+be.base64()+'"':xe})};return r.on("setContent",function(){pt(r)?Pt():Ht()}),r.on("RawSaveContent",function(Xt){Xt.content=ce(Xt.content)}),r.on("getContent",function(Xt){Xt.source_view||"raw"===Xt.format||(Xt.content=ce(Xt.content))}),r.on("PostRender",function(){r.parser.addNodeFilter("img",function(Xt){Ke(Xt,function(xe){var te=xe.attr("src");if(!W.getByUri(te)){var Ee=q.getResultUri(te);Ee&&xe.attr("src",Ee)}})})}),{blobCache:W,addFilter:function(Xt){Z.push(Xt)},uploadImages:Dt,uploadImagesAuto:Pt,scanForImages:Ht,destroy:function(){W.destroy(),q.destroy(),k=M=null}}}var bv=function(r,l){return r.hasOwnProperty(l.nodeName)},Gp=function(r,l){return!(!Lt.isText(l)||0!==l.nodeValue.length&&(!/^\s+$/.test(l.nodeValue)||l.nextSibling&&!bv(r,l.nextSibling)))},Vl=function(r){var l,c,h,m,M,k,P,N,F,W,q,Z=r.settings,ht=r.dom,at=r.selection,gt=r.schema,rt=gt.getBlockElements(),dt=at.getStart(),mt=r.getBody();if(q=Z.forced_root_block,dt&&Lt.isElement(dt)&&q&&(W=mt.nodeName.toLowerCase(),gt.isValidChild(W,q.toLowerCase())&&(Dt=rt,Pt=mt,!pr(O_(Ce_fromDom(dt),Ce_fromDom(Pt)),function(Xt){return bv(Dt,Xt.dom())})))){var Dt,Pt,Ht,ce;for(c=(l=at.getRng()).startContainer,h=l.startOffset,m=l.endContainer,M=l.endOffset,F=Rg(r),dt=mt.firstChild;dt;)if(Ht=rt,Lt.isText(ce=dt)||Lt.isElement(ce)&&!bv(Ht,ce)&&!Hl(ce)){if(Gp(rt,dt)){dt=(P=dt).nextSibling,ht.remove(P);continue}k||(k=ht.create(q,r.settings.forced_root_block_attrs),dt.parentNode.insertBefore(k,dt),N=!0),dt=(P=dt).nextSibling,k.appendChild(P)}else k=null,dt=dt.nextSibling;N&&F&&(l.setStart(c,h),l.setEnd(m,M),at.setRng(l),r.nodeChanged())}},Rb=function(r){return iu(r).fold(Oe([r]),function(l){return[r].concat(Rb(l))})},Lb=function(r){return fc(r).fold(Oe([r]),function(l){return"br"===la(l)?va(l).map(function(c){return[r].concat(Lb(c))}).getOr([]):[r].concat(Lb(l))})},Iy=function(r,l,c,h){var m=c,M=new Zi(c,m),k=r.schema.getNonEmptyElements();do{if(3===c.nodeType&&0!==ge.trim(c.nodeValue).length)return void(h?l.setStart(c,0):l.setEnd(c,c.nodeValue.length));if(k[c.nodeName]&&!/^(TD|TH)$/.test(c.nodeName))return void(h?l.setStartBefore(c):"BR"===c.nodeName?l.setEndBefore(c):l.setEndAfter(c));if(sn.ie&&sn.ie<11&&r.isBlock(c)&&r.isEmpty(c))return void(h?l.setStart(c,0):l.setEnd(c,0))}while(c=h?M.next():M.prev());"BODY"===m.nodeName&&(h?l.setStart(m,0):l.setEnd(m,m.childNodes.length))},Wl=function(r){var l=r.selection.getSel();return l&&0<l.rangeCount};function Rf(r){var l,c=[];"onselectionchange"in r.getDoc()||r.on("NodeChange Click MouseUp KeyUp Focus",function(h){var m,M;M={startContainer:(m=r.selection.getRng()).startContainer,startOffset:m.startOffset,endContainer:m.endContainer,endOffset:m.endOffset},"nodechange"!==h.type&&ly(M,l)||r.fire("SelectionChange"),l=M}),r.on("contextmenu",function(){r.fire("SelectionChange")}),r.on("SelectionChange",function(){var h=r.selection.getStart(!0);!h||!sn.range&&r.selection.isCollapsed()||Wl(r)&&!function(m){var M,k;if((k=r.$(m).parentsUntil(r.getBody()).add(m)).length===c.length){for(M=k.length;0<=M&&k[M]===c[M];M--);if(-1===M)return c=k,!0}return c=k,!1}(h)&&r.dom.isChildOf(h,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("MouseUp",function(h){!h.isDefaultPrevented()&&Wl(r)&&("IMG"===r.selection.getNode().nodeName?mr.setEditorTimeout(r,function(){r.nodeChanged()}):r.nodeChanged())}),this.nodeChanged=function(h){var m,M,k,P=r.selection;r.initialized&&P&&!r.settings.disable_nodechange&&!r.readonly&&(k=r.getBody(),(m=P.getStart(!0)||k).ownerDocument===r.getDoc()&&r.dom.isChildOf(m,k)||(m=k),M=[],r.dom.getParent(m,function(N){if(N===k)return!0;M.push(N)}),(h=h||{}).element=m,h.parents=M,r.fire("NodeChange",h))}}var Lg,_v,ar={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(r){return r.shiftKey||r.ctrlKey||r.altKey||this.metaKeyPressed(r)},metaKeyPressed:function(r){return sn.mac?r.metaKey:r.ctrlKey&&!r.altKey}},Py=function(r){return Ei(r,function(l,c){return l.concat(function(h){var m=function(k){return _i(k,function(P){return(P=un(P)).node=h,P})};if(Lt.isElement(h))return m(h.getClientRects());if(Lt.isText(h)){var M=h.ownerDocument.createRange();return M.setStart(h,0),M.setEnd(h,h.data.length),m(M.getClientRects())}}(c))},[])};(_v=Lg||(Lg={}))[_v.Up=-1]="Up",_v[_v.Down=1]="Down";var Ac=function(r,l,c,h,m,M){var k,P,N=0,F=[],W=function(q){var Z,ht,at;for(at=Py([q]),-1===r&&(at=at.reverse()),Z=0;Z<at.length;Z++)if(!c(ht=at[Z],P)){if(0<F.length&&l(ht,wr.last(F))&&N++,ht.line=N,m(ht))return!0;F.push(ht)}};return(P=wr.last(M.getClientRects()))&&(W(k=M.getNode()),function(q,Z,ht,at){for(;at=Ph(at,q,rn,Z);)if(ht(at))return}(r,h,W,k)),F},Nw=Ve(Ac,Lg.Up,oi,Tn),Rw=Ve(Ac,Lg.Down,Tn,oi),Ob=function(r){return function(l){return l.line>r}},Lf=function(r){return function(l){return l.line===r}},Bb=Lt.isContentEditableFalse,MM=Ph,wv=function(r,l){return Math.abs(r.left-l)},Sv=function(r,l){return Math.abs(r.right-l)},Ey=function(r,l){return r>=l.left&&r<=l.right},Of=function(r,l){return wr.reduce(r,function(c,h){var m,M;return m=Math.min(wv(c,l),Sv(c,l)),M=Math.min(wv(h,l),Sv(h,l)),Ey(l,h)?h:Ey(l,c)?c:M===m&&Bb(h.node)||M<m?h:c})},Qu=function(r,l,c,h){for(;h=MM(h,r,rn,l);)if(c(h))return},zb=function(r,l,c){if(c.collapsed)return!1;if(sn.ie&&sn.ie<=11&&c.startOffset===c.endOffset-1&&c.startContainer===c.endContainer){var h=c.startContainer.childNodes[c.startOffset];if(Lt.isElement(h))return pr(h.getClientRects(),function(m){return qn(m,r,l)})}return pr(c.getClientRects(),function(m){return qn(m,r,l)})},Fb=function(r){var l,c,h,m;return m=r.getBoundingClientRect(),c=(l=r.ownerDocument).documentElement,{top:m.top+(h=l.defaultView).pageYOffset-c.clientTop,left:m.left+h.pageXOffset-c.clientLeft}},Hb=function(r,l){return c=(P=r).inline?Fb(P.getBody()):{left:0,top:0},k=(M=r).getBody(),h=M.inline?{left:k.scrollLeft,top:k.scrollTop}:{left:0,top:0},{pageX:(m=function(N,F){if(F.target.ownerDocument!==N.getDoc()){var W=Fb(N.getContentAreaContainer()),q=(ht=(Z=N).getBody(),at=Z.getDoc().documentElement,Z.inline?{left:ht.scrollLeft,top:ht.scrollTop}:{left:ht.scrollLeft||at.scrollLeft,top:ht.scrollTop||at.scrollTop});return{left:F.pageX-W.left+q.left,top:F.pageY-W.top+q.top}}var Z,ht,at;return{left:F.pageX,top:F.pageY}}(r,l)).left-c.left+h.left,pageY:m.top-c.top+h.top};var c,h,m,M,k,P},Up=Lt.isContentEditableFalse,Ow=Lt.isContentEditableTrue,Bw=function(r){r&&r.parentNode&&r.parentNode.removeChild(r)},Wb=function(r){r.dragging=!1,r.element=null,Bw(r.ghost)},zw=function(r){var l,c,h,m,M,k,P,N,F,W,q,Z={};l=eo.DOM,k=Rt.document,c=function(r,l){return function(c){if(0===c.button){var h=Zn(l.dom.getParents(c.target),function(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];var c=na.call(arguments);return function(h){for(var m=0;m<c.length;m++)if(c[m](h))return!0;return!1}}(Up,Ow)).getOr(null);if(P=l.getBody(),Up(N=h)&&N!==P){var m=l.dom.getPos(h),M=l.getBody(),k=l.getDoc().documentElement;r.element=h,r.screenX=c.screenX,r.screenY=c.screenY,r.maxX=(l.inline?M.scrollWidth:k.offsetWidth)-2,r.maxY=(l.inline?M.scrollHeight:k.offsetHeight)-2,r.relX=c.pageX-m.x,r.relY=c.pageY-m.y,r.width=h.offsetWidth,r.height=h.offsetHeight,r.ghost=function(F,W,q,Z){var ht=W.cloneNode(!0);F.dom.setStyles(ht,{width:q,height:Z}),F.dom.setAttrib(ht,"data-mce-selected",null);var at=F.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return F.dom.setStyles(at,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:q,height:Z}),F.dom.setStyles(ht,{margin:0,boxSizing:"border-box"}),at.appendChild(ht),at}(l,h,r.width,r.height)}}var P,N}}(Z,r),P=Z,N=r,F=mr.throttle(function(ht,at){N._selectionOverrides.hideFakeCaret(),N.selection.placeCaretAt(ht,at)},0),h=function(ht){var at,gt,rt,dt,mt,Dt,Pt,wt,Ht,ce,Xt,xe,te=Math.max(Math.abs(ht.screenX-P.screenX),Math.abs(ht.screenY-P.screenY));if(P.element&&!P.dragging&&10<te){if(N.fire("dragstart",{target:P.element}).isDefaultPrevented())return;P.dragging=!0,N.focus()}if(P.dragging){var Ee=(Xt=P,{pageX:(xe=Hb(N,ht)).pageX-Xt.relX,pageY:xe.pageY+5});Ht=P.ghost,ce=N.getBody(),Ht.parentNode!==ce&&ce.appendChild(Ht),rt=P.width,dt=P.height,mt=P.maxX,Dt=P.maxY,wt=Pt=0,(at=P.ghost).style.left=(gt=Ee).pageX+"px",at.style.top=gt.pageY+"px",gt.pageX+rt>mt&&(Pt=gt.pageX+rt-mt),gt.pageY+dt>Dt&&(wt=gt.pageY+dt-Dt),at.style.width=rt-Pt+"px",at.style.height=dt-wt+"px",F(ht.clientX,ht.clientY)}},m=function(r,l){return function(c){if(r.dragging&&(N=3===(q=(P=l).selection.getSel().getRangeAt(0).startContainer).nodeType?q.parentNode:q)!==(F=r.element)&&!P.dom.isChildOf(N,F)&&!Up(N)){var h=((k=r.element.cloneNode(!0)).removeAttribute("data-mce-selected"),k),m=l.fire("drop",{targetClone:h,clientX:c.clientX,clientY:c.clientY});m.isDefaultPrevented()||(h=m.targetClone,l.undoManager.transact(function(){Bw(r.element),l.insertContent(l.dom.getOuterHTML(h)),l._selectionOverrides.hideFakeCaret()}))}var k,P,N,F,q;Wb(r)}}(Z,r),W=Z,M=function(){W.dragging&&q.fire("dragend"),Wb(W)},(q=r).on("mousedown",c),r.on("mousemove",h),r.on("mouseup",m),l.bind(k,"mousemove",h),l.bind(k,"mouseup",M),r.on("remove",function(){l.unbind(k,"mousemove",h),l.unbind(k,"mouseup",M)})},jb=Lt.isContentEditableTrue,Bf=Lt.isContentEditableFalse,Ny=function(r,l){for(var c=r.getBody();l&&l!==c;){if(jb(l)||Bf(l))return l;l=l.parentNode}return null},Ry=function(r){var l,c,h,dt,mt,m=r.getBody(),M=function(r,l,c){var h,m,M=_a(kt.none()),k=function(){(function(N){var F,W,q,Z,ht;for(F=Bn("*[contentEditable=false]",N),Z=0;Z<F.length;Z++)q=(W=F[Z]).previousSibling,ft(q)&&(1===(ht=q.data).length?q.parentNode.removeChild(q):q.deleteData(ht.length-1,1)),ut(q=W.nextSibling)&&(1===(ht=q.data).length?q.parentNode.removeChild(q):q.deleteData(0,1))})(r),m&&(bd.remove(m),m=null),M.get().each(function(N){Bn(N.caret).remove(),M.set(kt.none())}),clearInterval(h)};return{show:function(N,F){var W,q,Z;if(k(),Lt.isElement(Z=F)&&/^(TD|TH)$/i.test(Z.tagName))return null;if(!l(F))return m=function(at,gt){var rt,dt,mt;if(dt=at.ownerDocument.createTextNode(_),mt=at.parentNode,gt){if(w(rt=at.previousSibling)){if(R(rt))return rt;if(ft(rt))return rt.splitText(rt.data.length-1)}mt.insertBefore(dt,at)}else{if(w(rt=at.nextSibling)){if(R(rt))return rt;if(ut(rt))return rt.splitText(1),rt}at.nextSibling?mt.insertBefore(dt,at.nextSibling):mt.appendChild(dt)}return dt}(F,N),q=F.ownerDocument.createRange(),Jd(m.nextSibling)?(q.setStart(m,0),q.setEnd(m,0)):(q.setStart(m,1),q.setEnd(m,1)),q;m=function(r,l,c){var h,m,M;return(h=l.ownerDocument.createElement("p")).setAttribute("data-mce-caret",c?"before":"after"),h.setAttribute("data-mce-bogus","all"),h.appendChild(((M=Rt.document.createElement("br")).setAttribute("data-mce-bogus","1"),M)),m=l.parentNode,c?m.insertBefore(h,l):l.nextSibling?m.insertBefore(h,l.nextSibling):m.appendChild(h),h}(0,F,N),W=Xi(r,F,N),Bn(m).css("top",W.top);var ht=Bn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(W).appendTo(r)[0];return M.set(kt.some({caret:ht,element:F,before:N})),M.get().each(function(at){N&&Bn(at.caret).addClass("mce-visual-caret-before")}),h=mr.setInterval(function(){c()?Bn("div.mce-visual-caret",r).toggleClass("mce-visual-caret-hidden"):Bn("div.mce-visual-caret",r).addClass("mce-visual-caret-hidden")},500),(q=F.ownerDocument.createRange()).setStart(m,0),q.setEnd(m,0),q},hide:k,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){M.get().each(function(N){var F=Xi(r,N.element,N.before);Bn(N.caret).css(F)})},destroy:function(){return mr.clearInterval(h)}}}(r.getBody(),function(dt){return r.dom.isBlock(dt)},function(){return Rg(r)}),k="sel-"+r.dom.uniqueId(),P=function(dt){dt&&r.selection.setRng(dt)},N=function(){return r.selection.getRng()},F=function(dt,mt,Dt,Pt){return void 0===Pt&&(Pt=!0),r.fire("ShowCaret",{target:mt,direction:dt,before:Dt}).isDefaultPrevented()?null:(Pt&&r.selection.scrollIntoView(mt,-1===dt),M.show(Dt,mt))},W=function(dt,mt){return mt=fp(dt,m,mt),-1===dt?Ye.fromRangeStart(mt):Ye.fromRangeEnd(mt)},q=function(dt){return R(dt)||ut(dt)||ft(dt)},Z=function(dt){return q(dt.startContainer)||q(dt.endContainer)},at=function(dt,mt){var Dt,Pt,wt,Ht,ce,Xt,xe,te,Ee,be,Ne=r.$,Cn=r.dom;if(!dt)return null;if(dt.collapsed){if(!Z(dt))if(!1===mt){if(te=W(-1,dt),fa(te.getNode(!0)))return F(-1,te.getNode(!0),!1,!1);if(fa(te.getNode()))return F(-1,te.getNode(),!te.isAtEnd(),!1)}else{if(te=W(1,dt),fa(te.getNode()))return F(1,te.getNode(),!te.isAtEnd(),!1);if(fa(te.getNode(!0)))return F(1,te.getNode(!0),!1,!1)}return null}return ce=dt.startOffset,Xt=dt.endOffset,3===(Ht=dt.startContainer).nodeType&&0===ce&&Bf(Ht.parentNode)&&(ce=Cn.nodeIndex(Ht=Ht.parentNode),Ht=Ht.parentNode),1!==Ht.nodeType?null:(Xt===ce+1&&Ht===dt.endContainer&&(Dt=Ht.childNodes[ce]),Bf(Dt)?(Ee=be=Dt.cloneNode(!0),(xe=r.fire("ObjectSelected",{target:Dt,targetClone:Ee})).isDefaultPrevented()?null:(Pt=Bu(Ce_fromDom(r.getBody()),"#"+k).fold(function(){return Ne([])},function(Ae){return Ne([Ae.dom()])}),Ee=xe.targetClone,0===Pt.length&&(Pt=Ne('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",k)).appendTo(r.getBody()),dt=r.dom.createRng(),Ee===be&&sn.ie?(Pt.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(Ee),dt.setStartAfter(Pt[0].firstChild.firstChild),dt.setEndAfter(Ee)):(Pt.empty().append("\xa0").append(Ee).append("\xa0"),dt.setStart(Pt[0].firstChild,1),dt.setEnd(Pt[0].lastChild,0)),Pt.css({top:Cn.getPos(Dt,r.getBody()).y}),Pt[0].focus(),(wt=r.selection.getSel()).removeAllRanges(),wt.addRange(dt),Ke(Ho(Ce_fromDom(r.getBody()),"*[data-mce-selected]"),function(Ae){Ql(Ae,"data-mce-selected")}),Dt.setAttribute("data-mce-selected","1"),l=Dt,rt(),dt)):null)},gt=function(){l&&(l.removeAttribute("data-mce-selected"),Bu(Ce_fromDom(r.getBody()),"#"+k).each(Fo),l=null),Bu(Ce_fromDom(r.getBody()),"#"+k).each(Fo),l=null},rt=function(){M.hide()};return sn.ceFalse&&(r.on("mouseup",function(Pt){var wt=N();wt.collapsed&&Tc(r,Pt.clientX,Pt.clientY)&&P(sw(r,wt,!1))}),r.on("click",function(Pt){var wt;(wt=Ny(r,Pt.target))&&(Bf(wt)&&(Pt.preventDefault(),r.focus()),jb(wt)&&r.dom.isChildOf(wt,r.selection.getNode())&&gt())}),r.on("blur NewBlock",function(){gt()}),r.on("ResizeWindow FullscreenStateChanged",function(){return M.reposition()}),mt=!1,(dt=r).on("touchstart",function(){mt=!1}),dt.on("touchmove",function(){mt=!0}),dt.on("touchend",function(Pt){var wt=Ny(dt,Pt.target);Bf(wt)&&(mt||(Pt.preventDefault(),at(lb(dt,wt))))}),r.on("mousedown",function(Pt){var wt,Ht=Pt.target;if((Ht===m||"HTML"===Ht.nodeName||r.dom.isChildOf(Ht,m))&&!1!==Tc(r,Pt.clientX,Pt.clientY))if(wt=Ny(r,Ht))Bf(wt)?(Pt.preventDefault(),at(lb(r,wt))):(gt(),jb(wt)&&Pt.shiftKey||zb(Pt.clientX,Pt.clientY,r.selection.getRng())||(rt(),r.selection.placeCaretAt(Pt.clientX,Pt.clientY)));else if(!1===fa(Ht)){gt(),rt();var ce=function(r,l,c){var h,m,M,k,P,N,F,W=Py(Vn(_e(r.getElementsByTagName("*")),fa)),q=Vn(W,function(Z){return c>=Z.top&&c<=Z.bottom});return(h=Of(q,l))&&(h=Of((k=r,F=function(Z,ht){var at;return at=Vn(Py([ht]),function(gt){return!Z(gt,P)}),N=N.concat(at),0===at.length},(N=[]).push(P=h),Qu(Lg.Up,k,Ve(F,oi),P.node),Qu(Lg.Down,k,Ve(F,Tn),P.node),N),l))&&fa(h.node)?{node:(m=h).node,before:wv(m,M=l)<Sv(m,M)}:null}(m,Pt.clientX,Pt.clientY);if(ce&&!function(Pt,wt){var ce,Xt=r.dom.getParent(Pt,r.dom.isBlock),xe=r.dom.getParent(wt,r.dom.isBlock);return!(!Xt||!r.dom.isChildOf(Xt,xe)||!1!==Bf(Ny(r,Xt)))||Xt&&(ce=xe,r.dom.getParent(Xt,r.dom.isBlock)!==r.dom.getParent(ce,r.dom.isBlock))&&function(te){var Ee=hu(te);if(!te.firstChild)return!1;var be=Ye.before(te.firstChild),Ne=Ee.next(be);return Ne&&!Sf(Ne)&&!Md(Ne)}(Xt)}(Pt.target,ce.node)){Pt.preventDefault();var Xt=F(1,ce.node,ce.before,!1);r.getBody().focus(),P(Xt)}}}),r.on("keypress",function(Pt){ar.modifierPressed(Pt)||Bf(r.selection.getNode())&&Pt.preventDefault()}),r.on("getSelectionRange",function(Pt){var wt=Pt.range;if(l){if(!l.parentNode)return void(l=null);(wt=wt.cloneRange()).selectNode(l),Pt.range=wt}}),r.on("setSelectionRange",function(Pt){Pt.range=function(dt){var mt=r.schema.getShortEndedElements(),Dt=r.dom.createRng(),Pt=dt.startContainer,wt=dt.startOffset,Ht=dt.endContainer,ce=dt.endOffset;return Rc(mt,Pt.nodeName.toLowerCase())?0===wt?Dt.setStartBefore(Pt):Dt.setStartAfter(Pt):Dt.setStart(Pt,wt),Rc(mt,Ht.nodeName.toLowerCase())?0===ce?Dt.setEndBefore(Ht):Dt.setEndAfter(Ht):Dt.setEnd(Ht,ce),Dt}(Pt.range);var wt=at(Pt.range,Pt.forward);wt&&(Pt.range=wt)}),r.on("AfterSetSelectionRange",function(Pt){var Ht=Pt.range;Z(Ht)||"mcepastebin"===Ht.startContainer.parentNode.id||rt(),r.dom.hasClass(Ht.startContainer.parentNode,"mce-offscreen-selection")||gt()}),r.on("copy",function(Pt){var wt,Ht=Pt.clipboardData;if(!Pt.isDefaultPrevented()&&Pt.clipboardData&&!sn.ie){var ce=(wt=r.dom.get(k))?wt.getElementsByTagName("*")[0]:wt;ce&&(Pt.preventDefault(),Ht.clearData(),Ht.setData("text/html",ce.outerHTML),Ht.setData("text/plain",ce.outerText))}}),function(r){var l;zw(r),(l=r).on("drop",function(c){var h=void 0!==c.clientX?l.getDoc().elementFromPoint(c.clientX,c.clientY):null;(Up(h)||Up(l.dom.getContentEditableParent(h)))&&c.preventDefault()})}(r),function(r){var l=lu(function(){if(!r.removed&&r.selection.getRng().collapsed){var c=Wh(r,r.selection.getRng(),!1);r.selection.setRng(c)}},0);r.on("focus",function(){l.throttle()}),r.on("blur",function(){l.cancel()})}(r),h=".mce-content-body",(c=r.contentStyles).push(M.getCss()),c.push(h+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+h+" *[contentEditable=false] {cursor: default;}"+h+" *[contentEditable=true] {cursor: text;}")),{showCaret:F,showBlockCaretContainer:function(dt){dt.hasAttribute("data-mce-caret")&&(bt(dt),P(N()),r.selection.scrollIntoView(dt[0]))},hideFakeCaret:rt,destroy:function(){M.destroy(),l=null}}},Gb=function(r){for(var l=r;/<!--|--!?>/g.test(l);)l=l.replace(/<!--|--!?>/g,"");return l},Cv=function(r,l,c){var h,m,M,k,P=1;for(k=r.getShortEndedElements(),(M=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=h=c;m=M.exec(l);){if(h=M.lastIndex,"/"===m[1])P--;else if(!m[1]){if(m[2]in k)continue;P++}if(0===P)break}return h},Hw=function(r,l){var c=r.exec(l);if(c){var h=c[1],m=c[2];return"string"==typeof h&&"data-mce-bogus"===h.toLowerCase()?m:null}return null};function Ly(r,l){void 0===l&&(l=su());var c=function(){};!1!==(r=r||{}).fix_self_closing&&(r.fix_self_closing=!0);var h=r.comment?r.comment:c,m=r.cdata?r.cdata:c,M=r.text?r.text:c,k=r.start?r.start:c,P=r.end?r.end:c,N=r.pi?r.pi:c,F=r.doctype?r.doctype:c;return{parse:function(W){var q,Z,ht,at,gt,rt,dt,mt,Dt,Pt,wt,Ht,ce,Xt,xe,te,Ee,be,Ne,Cn,Ae,Be,Pn,an,ke,Ze,Hn,Yn,Wn,dn=0,Xn=[],zt=0,ie=to.decode,Te=ge.makeMap("src,href,data,background,formaction,poster,xlink:href"),Ge=/((java|vb)script|mhtml):/i,Gn=function(sr){var Lo,Gr;for(Lo=Xn.length;Lo--&&Xn[Lo].name!==sr;);if(0<=Lo){for(Gr=Xn.length-1;Lo<=Gr;Gr--)(sr=Xn[Gr]).valid&&P(sr.name);Xn.length=Lo}},Li=function(sr,Lo,Gr,Qc,Jf){var Da,td,Qg,us,tf;if(Gr=(Lo=Lo.toLowerCase())in wt?Lo:ie(Gr||Qc||Jf||""),ce&&!mt&&0==(0===(Qg=Lo).indexOf("data-")||0===Qg.indexOf("aria-"))){if(!(Da=be[Lo])&&Ne){for(td=Ne.length;td--&&!(Da=Ne[td]).pattern.test(Lo););-1===td&&(Da=null)}if(!Da||Da.validValues&&!(Gr in Da.validValues))return}if(Te[Lo]&&!r.allow_script_urls){var Ed=Gr.replace(/[\s\u0000-\u001F]+/g,"");try{Ed=decodeURIComponent(Ed)}catch(ed){Ed=unescape(Ed)}if(Ge.test(Ed)||(tf=Ed,!(us=r).allow_html_data_urls&&(/^data:image\//i.test(tf)?!1===us.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(tf):/^data:/i.test(tf))))return}mt&&(Lo in Te||0===Lo.indexOf("on"))||(at.map[Lo]=Gr,at.push({name:Lo,value:Gr}))};for(ke=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),Ze=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Pt=l.getShortEndedElements(),an=r.self_closing_elements||l.getSelfClosingElements(),wt=l.getBoolAttrs(),ce=r.validate,Dt=r.remove_internals,Wn=r.fix_self_closing,Hn=l.getSpecialElements(),Pn=W+">";q=ke.exec(Pn);){if(dn<q.index&&M(ie(W.substr(dn,q.index-dn))),Z=q[6])":"===(Z=Z.toLowerCase()).charAt(0)&&(Z=Z.substr(1)),Gn(Z);else if(Z=q[7]){if(q.index+q[0].length>W.length){M(ie(W.substr(q.index))),dn=q.index+q[0].length;continue}":"===(Z=Z.toLowerCase()).charAt(0)&&(Z=Z.substr(1)),Ht=Z in Pt,Wn&&an[Z]&&0<Xn.length&&Xn[Xn.length-1].name===Z&&Gn(Z);var qi=Hw(Ze,q[8]);if(null!==qi){if("all"===qi){dn=Cv(l,W,ke.lastIndex),ke.lastIndex=dn;continue}xe=!1}if(!ce||(Xt=l.getElementRule(Z))){if(xe=!0,ce&&(be=Xt.attributes,Ne=Xt.attributePatterns),(Ee=q[8])?((mt=-1!==Ee.indexOf("data-mce-type"))&&Dt&&(xe=!1),(at=[]).map={},Ee.replace(Ze,Li)):(at=[]).map={},ce&&!mt){if(Cn=Xt.attributesRequired,Ae=Xt.attributesDefault,Xt.removeEmptyAttrs&&!at.length&&(xe=!1),Be=Xt.attributesForced)for(gt=Be.length;gt--;)dt=(te=Be[gt]).name,"{$uid}"===(Yn=te.value)&&(Yn="mce_"+zt++),at.map[dt]=Yn,at.push({name:dt,value:Yn});if(Ae)for(gt=Ae.length;gt--;)(dt=(te=Ae[gt]).name)in at.map||("{$uid}"===(Yn=te.value)&&(Yn="mce_"+zt++),at.map[dt]=Yn,at.push({name:dt,value:Yn}));if(Cn){for(gt=Cn.length;gt--&&!(Cn[gt]in at.map););-1===gt&&(xe=!1)}if(te=at.map["data-mce-bogus"]){if("all"===te){dn=Cv(l,W,ke.lastIndex),ke.lastIndex=dn;continue}xe=!1}}xe&&k(Z,at,Ht)}else xe=!1;if(ht=Hn[Z]){ht.lastIndex=dn=q.index+q[0].length,(q=ht.exec(W))?(xe&&(rt=W.substr(dn,q.index-dn)),dn=q.index+q[0].length):(rt=W.substr(dn),dn=W.length),xe&&(0<rt.length&&M(rt,!0),P(Z)),ke.lastIndex=dn;continue}Ht||(Ee&&Ee.indexOf("/")===Ee.length-1?xe&&P(Z):Xn.push({name:Z,valid:xe}))}else(Z=q[1])?(">"===Z.charAt(0)&&(Z=" "+Z),r.allow_conditional_comments||"[if"!==Z.substr(0,3).toLowerCase()||(Z=" "+Z),h(Z)):(Z=q[2])?m(Gb(Z)):(Z=q[3])?F(Z):(Z=q[4])&&N(Z,q[5]);dn=q.index+q[0].length}for(dn<W.length&&M(ie(W.substr(dn))),gt=Xn.length-1;0<=gt;gt--)(Z=Xn[gt]).valid&&P(Z.name)}}}(Ly||(Ly={})).findEndTag=Cv;var Oy=Ly,Ub=function(r,l){var c,h,m,M,k,P,N,F,W=l,q=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,Z=r.schema;for(P=r.getTempAttrs(),N=W,F=new RegExp(["\\s?("+P.join("|")+')="[^"]+"'].join("|"),"gi"),W=N.replace(F,""),k=Z.getShortEndedElements();M=q.exec(W);)h=q.lastIndex,m=M[0].length,c=k[M[1]]?h:Oy.findEndTag(Z,W,h),W=W.substring(0,h-m)+W.substring(c),q.lastIndex=h-m;return f(W)},Mv_trimExternal=Ub,Mv_trimInternal=Ub,Yb=function(r){return Lt.isElement(r)?r.outerHTML:Lt.isText(r)?to.encodeRaw(r.data,!1):Lt.isComment(r)?"\x3c!--"+r.data+"--\x3e":""},Yp=_a(kt.none()),zy=function(r){return"fragmented"===r.type?r.fragments.join(""):r.content},Fy=function(r){var l=Ce_fromTag("body",Yp.get().getOrThunk(function(){var c=Rt.document.implementation.createHTMLDocument("undo");return Yp.set(kt.some(c)),c}));return wa(l,zy(r)),Ke(Ho(l,"*[data-mce-bogus]"),Yd),l.dom().innerHTML},Hy=function(r){var l,c,h;return l=function(r){return Vn(_i(_e(r.childNodes),Yb),function(l){return 0<l.length})}(r.getBody()),-1!==(c=(h=Mr(l,function(m){var M=Mv_trimInternal(r.serializer,m);return 0<M.length?[M]:[]})).join("")).indexOf("</iframe>")?function(r){return{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}}(h):function(r){return{type:"complete",fragments:null,content:r,bookmark:null,beforeBookmark:null}}(c)},Vy=function(r,l,c){"fragmented"===l.type?function(r,l){var c,h,m;c=function(r,l){var c=r.length+l.length+2,h=new Array(c),m=new Array(c),M=function(F,W,q,Z,ht){var at=P(F,W,q,Z);if(null===at||at.start===W&&at.diag===W-Z||at.end===F&&at.diag===F-q)for(var gt=F,rt=q;gt<W||rt<Z;)gt<W&&rt<Z&&r[gt]===l[rt]?(ht.push([0,r[gt]]),++gt,++rt):Z-q<W-F?(ht.push([2,r[gt]]),++gt):(ht.push([1,l[rt]]),++rt);else{M(F,at.start,q,at.start-at.diag,ht);for(var dt=at.start;dt<at.end;++dt)ht.push([0,r[dt]]);M(at.end,W,at.end-at.diag,Z,ht)}},k=function(F,W,q,Z){for(var ht=F;ht-W<Z&&ht<q&&r[ht]===l[ht-W];)++ht;return{start:F,end:ht,diag:W}},P=function(F,W,q,Z){var ht=W-F,at=Z-q;if(0===ht||0===at)return null;var gt,rt,dt,mt,Dt,Pt=ht-at,wt=at+ht,Ht=(wt%2==0?wt:wt+1)/2;for(h[1+Ht]=F,m[1+Ht]=W+1,gt=0;gt<=Ht;++gt){for(rt=-gt;rt<=gt;rt+=2){for(h[dt=rt+Ht]=rt===-gt||rt!==gt&&h[dt-1]<h[dt+1]?h[dt+1]:h[dt-1]+1,Dt=(mt=h[dt])-F+q-rt;mt<W&&Dt<Z&&r[mt]===l[Dt];)h[dt]=++mt,++Dt;if(Pt%2!=0&&Pt-gt<=rt&&rt<=Pt+gt&&m[dt-Pt]<=h[dt])return k(m[dt-Pt],rt+F-q,W,Z)}for(rt=Pt-gt;rt<=Pt+gt;rt+=2){for(m[dt=rt+Ht-Pt]=rt===Pt-gt||rt!==Pt+gt&&m[dt+1]<=m[dt-1]?m[dt+1]-1:m[dt-1],Dt=(mt=m[dt]-1)-F+q-rt;F<=mt&&q<=Dt&&r[mt]===l[Dt];)m[dt]=mt--,Dt--;if(Pt%2==0&&-gt<=rt&&rt<=gt&&m[dt]<=h[dt+Pt])return k(m[dt],rt+F-q,W,Z)}}},N=[];return M(0,r.length,0,l.length,N),N}(_i(_e(l.childNodes),Yb),r),h=l,m=0,Ke(c,function(k){0===k[0]?m++:1===k[0]?(function(r,l,c){var h=function(M){var k,P,N;for(N=Rt.document.createElement("div"),k=Rt.document.createDocumentFragment(),M&&(N.innerHTML=M);P=N.firstChild;)k.appendChild(P);return k}(l);if(r.hasChildNodes()&&c<r.childNodes.length){var m=r.childNodes[c];m.parentNode.insertBefore(h,m)}else r.appendChild(h)}(h,k[1],m),m++):2===k[0]&&function(P,N){if(P.hasChildNodes()&&N<P.childNodes.length){var F=P.childNodes[N];F.parentNode.removeChild(F)}}(h,m)})}(l.fragments,r.getBody()):r.setContent(l.content,{format:"raw"}),r.selection.moveToBookmark(c?l.beforeBookmark:l.bookmark)},Xp=function(r,l){return!(!r||!l)&&(h=l,zy(r)===zy(h)||(c=l,Fy(r)===Fy(c)));var c,h};function Uw(r){var l,c,h=this,m=0,M=[],k=0,P=function(){return 0===k},N=function(Z){P()&&(h.typing=Z)},F=function(Z){r.setDirty(Z)},W=function(Z){N(!1),h.add({},Z)},q=function(){h.typing&&(N(!1),h.add())};return r.on("init",function(){h.add()}),r.on("BeforeExecCommand",function(Z){var ht=Z.command;"Undo"!==ht&&"Redo"!==ht&&"mceRepaint"!==ht&&(q(),h.beforeChange())}),r.on("ExecCommand",function(Z){var ht=Z.command;"Undo"!==ht&&"Redo"!==ht&&"mceRepaint"!==ht&&W(Z)}),r.on("ObjectResizeStart Cut",function(){h.beforeChange()}),r.on("SaveContent ObjectResized blur",W),r.on("DragEnd",W),r.on("KeyUp",function(Z){var ht=Z.keyCode;Z.isDefaultPrevented()||((33<=ht&&ht<=36||37<=ht&&ht<=40||45===ht||Z.ctrlKey)&&(W(),r.nodeChanged()),46!==ht&&8!==ht||r.nodeChanged(),c&&h.typing&&!1===Xp(Hy(r),M[0])&&(!1===r.isDirty()&&(F(!0),r.fire("change",{level:M[0],lastLevel:null})),r.fire("TypingUndo"),c=!1,r.nodeChanged()))}),r.on("KeyDown",function(Z){var ht=Z.keyCode;Z.isDefaultPrevented()||(33<=ht&&ht<=36||37<=ht&&ht<=40||45===ht?h.typing&&W(Z):!(ht<16||20<ht)||224===ht||91===ht||h.typing||Z.ctrlKey&&!Z.altKey||Z.metaKey||(h.beforeChange(),N(!0),h.add({},Z),c=!0))}),r.on("MouseDown",function(Z){h.typing&&W(Z)}),r.on("input",function(Z){var ht;Z.inputType&&("insertReplacementText"===Z.inputType||"insertText"===(ht=Z).inputType&&null===ht.data)&&W(Z)}),r.addShortcut("meta+z","","Undo"),r.addShortcut("meta+y,meta+shift+z","","Redo"),r.on("AddUndo Undo Redo ClearUndos",function(Z){Z.isDefaultPrevented()||r.nodeChanged()}),h={data:M,typing:!1,beforeChange:function(){P()&&(l=hf.getUndoBookmark(r.selection))},add:function(Z,ht){var at,gt,rt,dt=r.settings;if(rt=Hy(r),Z=ge.extend(Z=Z||{},rt),!1===P()||r.removed||r.fire("BeforeAddUndo",{level:Z,lastLevel:gt=M[m],originalEvent:ht}).isDefaultPrevented()||gt&&Xp(gt,Z))return null;if(M[m]&&(M[m].beforeBookmark=l),dt.custom_undo_redo_levels&&M.length>dt.custom_undo_redo_levels){for(at=0;at<M.length-1;at++)M[at]=M[at+1];M.length--,m=M.length}Z.bookmark=hf.getUndoBookmark(r.selection),m<M.length-1&&(M.length=m+1),M.push(Z),m=M.length-1;var mt={level:Z,lastLevel:gt,originalEvent:ht};return r.fire("AddUndo",mt),0<m&&(F(!0),r.fire("change",mt)),Z},undo:function(){var Z;return h.typing&&(h.add(),h.typing=!1,N(!1)),0<m&&(Z=M[--m],Vy(r,Z,!0),F(!0),r.fire("undo",{level:Z})),Z},redo:function(){var Z;return m<M.length-1&&(Z=M[++m],Vy(r,Z,!1),F(!0),r.fire("redo",{level:Z})),Z},clear:function(){M=[],m=0,h.typing=!1,h.data=M,r.fire("ClearUndos")},hasUndo:function(){return 0<m||h.typing&&M[0]&&!Xp(Hy(r),M[0])},hasRedo:function(){return m<M.length-1&&!h.typing},transact:function(Z){return q(),h.beforeChange(),h.ignore(Z),h.add()},ignore:function(Z){try{k++,Z()}finally{k--}},extra:function(Z,ht){var gt;h.transact(Z)&&(gt=M[m].bookmark,Vy(r,M[m-1],!0),h.transact(ht)&&(M[m-1].beforeBookmark=gt))}}}var $b,jy={},Tv=wr.filter,Zb=wr.each;$b=function(r){var l,c,h=r.selection.getRng();l=Lt.matchNodeNames("pre"),h.collapsed||(c=r.selection.getSelectedBlocks(),Zb(Tv(Tv(c,l),function(m){return l(m.previousSibling)&&-1!==wr.indexOf(c,m.previousSibling)}),function(m){var M,k;M=m.previousSibling,Bn(k=m).remove(),Bn(M).append("<br><br>").append(k.childNodes)}))},jy.pre||(jy.pre=[]),jy.pre.push($b);var Kb=/^(src|href|style)$/,zf=ge.each,kc=xi_isEq,Jb=function(r,l,c){return r.isChildOf(l,c)&&l!==c&&!r.isBlock(c)},kd=function(r,l,c){var h,m,M;return m=l[c?"startOffset":"endOffset"],Lt.isElement(h=l[c?"startContainer":"endContainer"])&&(!c&&m&&m--,h=h.childNodes[(M=h.childNodes.length-1)<m?M:m]),Lt.isText(h)&&c&&m>=h.nodeValue.length&&(h=new Zi(h,r.getBody()).next()||h),Lt.isText(h)&&!c&&0===m&&(h=new Zi(h,r.getBody()).prev()||h),h},Og=function(r,l,c,h){var m=r.create(c,h);return l.parentNode.insertBefore(m,l),m.appendChild(l),m},Av=function(r,l,c,h,m){var M=Ce_fromDom(l),k=Ce_fromDom(r.create(h,m)),P=c?Lc(M):dd(M);return Rl(k,P),c?($r(M,k),gl(k,M)):(Zr(M,k),da(k,M)),k.dom()},Gy=function(r,l,c,h){return!(l=xi_getNonWhiteSpaceSibling(l,c,h))||"BR"===l.nodeName||r.isBlock(l)},kv=function(r,l,c,h,m){var M,k,P,N,F,W,q,Z,ht,at,gt,rt,dt,mt,Dt=r.dom;if(F=Dt,!(kc(W=h,(q=l).inline)||kc(W,q.block)||(q.selector?Lt.isElement(W)&&F.is(W,q.selector):void 0)||(N=h,l.links&&"A"===N.tagName)))return!1;if("all"!==l.remove)for(zf(l.styles,function(wt,Ht){wt=xi_normalizeStyleValue(Dt,xi_replaceVars(wt,c),Ht),"number"==typeof Ht&&(Ht=wt,m=0),(l.remove_similar||!m||kc(xi_getStyle(Dt,m,Ht),wt))&&Dt.setStyle(h,Ht,""),P=1}),P&&""===Dt.getAttrib(h,"style")&&(h.removeAttribute("style"),h.removeAttribute("data-mce-style")),zf(l.attributes,function(wt,Ht){var ce;if(wt=xi_replaceVars(wt,c),"number"==typeof Ht&&(Ht=wt,m=0),!m||kc(Dt.getAttrib(m,Ht),wt)){if("class"===Ht&&(wt=Dt.getAttrib(h,Ht))&&(ce="",zf(wt.split(/\s+/),function(Xt){/mce\-\w+/.test(Xt)&&(ce+=(ce?" ":"")+Xt)}),ce))return void Dt.setAttrib(h,Ht,ce);"class"===Ht&&h.removeAttribute("className"),Kb.test(Ht)&&h.removeAttribute("data-mce-"+Ht),h.removeAttribute(Ht)}}),zf(l.classes,function(wt){wt=xi_replaceVars(wt,c),m&&!Dt.hasClass(m,wt)||Dt.removeClass(h,wt)}),k=Dt.getAttribs(h),M=0;M<k.length;M++){var Pt=k[M].nodeName;if(0!==Pt.indexOf("_")&&0!==Pt.indexOf("data-"))return!1}return"none"!==l.remove?(rt=(ht=h).parentNode,dt=(Z=r).dom,mt=Z.settings.forced_root_block,(at=l).block&&(mt?rt===dt.getRoot()&&(at.list_block&&kc(ht,at.list_block)||zf(ge.grep(ht.childNodes),function(wt){xi_isValid(Z,mt,wt.nodeName.toLowerCase())?gt?gt.appendChild(wt):(gt=Og(dt,wt,mt),dt.setAttribs(gt,Z.settings.forced_root_block_attrs)):gt=0})):dt.isBlock(ht)&&!dt.isBlock(rt)&&(Gy(dt,ht,!1)||Gy(dt,ht.firstChild,!0,1)||ht.insertBefore(dt.create("br"),ht.firstChild),Gy(dt,ht,!0)||Gy(dt,ht.lastChild,!1,1)||ht.appendChild(dt.create("br")))),at.selector&&at.inline&&!kc(at.inline,ht)||dt.remove(ht,1),!0):void 0},Uy=kv,Qb=function(r,l,c,h,m){var M,k,P=r.formatter.get(l),N=P[0],F=!0,W=r.dom,q=r.selection,Z=function(mt){var Dt,wt,Ht,ce,Xt,xe=(wt=l,Ht=c,ce=m,zf(xi_getParents((Dt=r).dom,mt.parentNode).reverse(),function(te){var Ee;Xt||"_start"===te.id||"_end"===te.id||(Ee=Sl.matchNode(Dt,te,wt,Ht,ce))&&!1!==Ee.split&&(Xt=te)}),Xt);return function(te,Ee,be,Ne,Cn,Ae,Be,Pn){var an,ke,Ze,Hn,Yn,Wn,dn=te.dom;if(be){for(Wn=be.parentNode,an=Ne.parentNode;an&&an!==Wn;an=an.parentNode){for(ke=dn.clone(an,!1),Yn=0;Yn<Ee.length;Yn++)if(kv(te,Ee[Yn],Pn,ke,ke)){ke=0;break}ke&&(Ze&&ke.appendChild(Ze),Hn||(Hn=ke),Ze=ke)}Be.mixed&&dn.isBlock(be)||(Ne=dn.split(be,Ne)),Ze&&(Cn.parentNode.insertBefore(Ze,Cn),Hn.appendChild(Cn))}return Ne}(r,P,xe,mt,mt,0,N,c)},ht=function(mt){var Dt,Pt,wt,Ht,ce;if(Lt.isElement(mt)&&W.getContentEditable(mt)&&(Ht=F,F="true"===W.getContentEditable(mt),ce=!0),Dt=ge.grep(mt.childNodes),F&&!ce)for(Pt=0,wt=P.length;Pt<wt&&!kv(r,P[Pt],c,mt,mt);Pt++);if(N.deep&&Dt.length){for(Pt=0,wt=Dt.length;Pt<wt;Pt++)ht(Dt[Pt]);ce&&(F=Ht)}},at=function(mt){var Dt,Pt=W.get(mt?"_start":"_end"),wt=Pt[mt?"firstChild":"lastChild"];return Hl(Dt=wt)&&Lt.isElement(Dt)&&("_start"===Dt.id||"_end"===Dt.id)&&(wt=wt[mt?"firstChild":"lastChild"]),Lt.isText(wt)&&0===wt.data.length&&(wt=mt?Pt.previousSibling||Pt.nextSibling:Pt.nextSibling||Pt.previousSibling),W.remove(Pt,!0),wt},gt=function(mt){var Dt,Pt,wt=mt.commonAncestorContainer;if(mt=bc(r,mt,P,!0),N.split){if(mt=ny(mt),(Dt=kd(r,mt,!0))!==(Pt=kd(r,mt))){if(/^(TR|TH|TD)$/.test(Dt.nodeName)&&Dt.firstChild&&(Dt="TR"===Dt.nodeName?Dt.firstChild.firstChild||Dt:Dt.firstChild||Dt),wt&&/^T(HEAD|BODY|FOOT|R)$/.test(wt.nodeName)&&/^(TH|TD)$/.test(Pt.nodeName)&&Pt.firstChild&&(Pt=Pt.firstChild||Pt),Jb(W,Dt,Pt)){var Ht=kt.from(Dt.firstChild).getOr(Dt);return Z(Av(W,Ht,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void at(!0)}if(Jb(W,Pt,Dt))return Ht=kt.from(Pt.lastChild).getOr(Pt),Z(Av(W,Ht,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void at(!1);Dt=Og(W,Dt,"span",{id:"_start","data-mce-type":"bookmark"}),Pt=Og(W,Pt,"span",{id:"_end","data-mce-type":"bookmark"}),Z(Dt),Z(Pt),Dt=at(!0),Pt=at()}else Dt=Pt=Z(Dt);mt.startContainer=Dt.parentNode?Dt.parentNode:Dt,mt.startOffset=W.nodeIndex(Dt),mt.endContainer=Pt.parentNode?Pt.parentNode:Pt,mt.endOffset=W.nodeIndex(Pt)+1}Cd(W,mt,function(ce){zf(ce,function(Xt){ht(Xt),Lt.isElement(Xt)&&"underline"===r.dom.getStyle(Xt,"text-decoration")&&Xt.parentNode&&"underline"===xi_getTextDecoration(W,Xt.parentNode)&&kv(r,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,Xt)})})};if(h)h.nodeType?((k=W.createRng()).setStartBefore(h),k.setEndAfter(h),gt(k)):gt(h);else if("false"!==W.getContentEditable(q.getNode()))q.isCollapsed()&&N.inline&&!W.select("td[data-mce-selected],th[data-mce-selected]").length?function(mt,Dt,Pt,wt){var Ht,Xt,xe,te,Ee,be,Ne=mt.dom,Cn=mt.selection,Ae=[],Be=Cn.getRng();for(3===(te=Ht=Be.startContainer).nodeType&&(Be.startOffset!==Ht.nodeValue.length&&(xe=!0),te=te.parentNode);te;){if(Sl.matchNode(mt,te,Dt,Pt,wt)){Ee=te;break}te.nextSibling&&(xe=!0),Ae.push(te),te=te.parentNode}if(Ee)if(xe){Xt=Cn.getBookmark(),Be.collapse(!0);var Pn=bc(mt,Be,mt.formatter.get(Dt),!0);Pn=ny(Pn),mt.formatter.remove(Dt,Pt,Pn),Cn.moveToBookmark(Xt)}else{be=du(mt.getBody(),Ee);var an=ib(!1).dom(),ke=ob(Ae,an);(function(r,l,c){var h=r.dom,m=h.getParent(c,Ve(xi_isTextBlock,r));m&&h.isEmpty(m)?c.parentNode.replaceChild(l,c):(function(r){var l=Ho(r,"br"),c=Vn(function(h){for(var m=[],M=h.dom();M;)m.push(Ce_fromDom(M)),M=M.lastChild;return m}(r).slice(-1),v);l.length===c.length&&Ke(c,Fo)}(Ce_fromDom(c)),h.isEmpty(c)?c.parentNode.replaceChild(l,c):h.insertAfter(l,c))})(mt,an,be||Ee),iy(mt,be,!1),Cn.setCursorLocation(ke,1),Ne.isEmpty(Ee)&&Ne.remove(Ee)}}(r,l,c,m):(M=hf.getPersistentBookmark(r.selection,!0),gt(q.getRng()),q.moveToBookmark(M),N.inline&&Sl.match(r,l,c,q.getStart())&&xi_moveStart(W,q,q.getRng()),r.nodeChanged());else{h=q.getNode();for(var rt=0,dt=P.length;rt<dt&&(!P[rt].ceFalseOverride||!kv(r,P[rt],c,h,h));rt++);}},Bg=ge.each,$h=function(r){return r&&1===r.nodeType&&!Hl(r)&&!Er(r)&&!Lt.isBogus(r)},Ff=function(r,l){var c;for(c=r;c;c=c[l]){if(3===c.nodeType&&0!==c.nodeValue.length)return r;if(1===c.nodeType&&!Hl(c))return c}return r},zg=function(r,l,c){var h,m,M=new Hm(r);if(l&&c&&(l=Ff(l,"previousSibling"),c=Ff(c,"nextSibling"),M.compare(l,c))){for(h=l.nextSibling;h&&h!==c;)h=(m=h).nextSibling,l.appendChild(m);return r.remove(c),ge.each(ge.grep(c.childNodes),function(k){l.appendChild(k)}),l}return c},t1=function(r,l,c){Bg(r.childNodes,function(h){$h(h)&&(l(h)&&c(h),h.hasChildNodes()&&t1(h,l,c))})},qw=function(r,l){return Ve(function(c,h){return!(!h||!xi_getStyle(r,h,c))},l)},Yw=function(r,l,c){return Ve(function(h,m,M){r.setStyle(M,h,m),""===M.getAttribute("style")&&M.removeAttribute("style"),Xw(r,M)},l,c)},Xw=function(r,l){"SPAN"===l.nodeName&&0===r.getAttribs(l).length&&r.remove(l,!0)},$w=function(r,l){var c;1===l.nodeType&&l.parentNode&&1===l.parentNode.nodeType&&(c=xi_getTextDecoration(r,l.parentNode),r.getStyle(l,"color")&&c?r.setStyle(l,"text-decoration",c):r.getStyle(l,"text-decoration")===c&&r.setStyle(l,"text-decoration",null))},Kc=ge.each,e1=function(r,l,c,h){var m,M,k=r.formatter.get(l),P=k[0],N=!h&&r.selection.isCollapsed(),F=r.dom,W=r.selection,q=function(dt,mt){if(mt=mt||P,dt){if(mt.onformat&&mt.onformat(dt,mt,c,h),Kc(mt.styles,function(Pt,wt){F.setStyle(dt,wt,xi_replaceVars(Pt,c))}),mt.styles){var Dt=F.getAttrib(dt,"style");Dt&&dt.setAttribute("data-mce-style",Dt)}Kc(mt.attributes,function(Pt,wt){F.setAttrib(dt,wt,xi_replaceVars(Pt,c))}),Kc(mt.classes,function(Pt){Pt=xi_replaceVars(Pt,c),F.hasClass(dt,Pt)||F.addClass(dt,Pt)})}},Z=function(dt,mt){var Dt=!1;return!!P.selector&&(Kc(dt,function(Pt){if(!("collapsed"in Pt)||Pt.collapsed===N)return F.is(mt,Pt.selector)&&!Er(mt)?(q(mt,Pt),!(Dt=!0)):void 0}),Dt)},ht=function(dt,mt,Dt,Pt){var wt,Ht,ce=[],Xt=!0;Ht=dt.create(wt=P.inline||P.block),q(Ht),Cd(dt,mt,function(xe){var te,Ee=function(be){var Ne,Cn,Ae,Be;if(Be=Xt,Ne=be.nodeName.toLowerCase(),Cn=be.parentNode.nodeName.toLowerCase(),1===be.nodeType&&dt.getContentEditable(be)&&(Be=Xt,Xt="true"===dt.getContentEditable(be),Ae=!0),xi_isEq(Ne,"br"))return te=0,void(P.block&&dt.remove(be));if(P.wrapper&&Sl.matchNode(r,be,l,c))te=0;else{if(Xt&&!Ae&&P.block&&!P.wrapper&&xi_isTextBlock(r,Ne)&&xi_isValid(r,Cn,wt))return be=dt.rename(be,wt),q(be),ce.push(be),void(te=0);if(P.selector){var Pn=Z(k,be);if(!P.inline||Pn)return void(te=0)}!Xt||Ae||!xi_isValid(r,wt,Ne)||!xi_isValid(r,Cn,wt)||!Pt&&3===be.nodeType&&1===be.nodeValue.length&&65279===be.nodeValue.charCodeAt(0)||Er(be)||P.inline&&dt.isBlock(be)?(te=0,Kc(ge.grep(be.childNodes),Ee),Ae&&(Xt=Be),te=0):(te||(te=dt.clone(Ht,!1),be.parentNode.insertBefore(te,be),ce.push(te)),te.appendChild(be))}};Kc(xe,Ee)}),!0===P.links&&Kc(ce,function(xe){var te=function(Ee){"A"===Ee.nodeName&&q(Ee,P),Kc(ge.grep(Ee.childNodes),te)};te(xe)}),Kc(ce,function(xe){var te,Ee,be,Ne,Cn,Be,Pn;Ee=0,Kc(xe.childNodes,function(Be){xi_isWhiteSpaceNode(Be)||Hl(Be)||Ee++}),te=Ee,!(1<ce.length)&&dt.isBlock(xe)||0!==te?(P.inline||P.wrapper)&&(P.exact||1!==te||(Be=be=xe,Pn=!1,Kc(Be.childNodes,function(an){if((ke=an)&&1===ke.nodeType&&!Hl(ke)&&!Er(ke)&&!Lt.isBogus(ke))return Pn=an,!1;var ke}),(Ne=Pn)&&!Hl(Ne)&&Sl.matchName(dt,Ne,P)&&(Cn=dt.clone(Ne,!1),q(Cn),dt.replace(Cn,be,!0),dt.remove(Ne,1)),xe=Cn||be),function(r,l,c,h){Bg(l,function(m){var M,k;Bg(r.dom.select(m.inline,h),function(M){$h(M)&&Uy(r,m,c,M,m.exact?M:null)}),M=r.dom,(k=m).clear_child_styles&&Bg(M.select(k.links?"*:not(a)":"*",h),function(F){$h(F)&&Bg(k.styles,function(W,q){M.setStyle(F,q,"")})})})}(r,k,c,xe),function(r,l,c,h,m){Sl.matchNode(r,m.parentNode,c,h)&&Uy(r,l,h,m)||l.merge_with_parents&&r.dom.getParent(m.parentNode,function(M){if(Sl.matchNode(r,M,c,h))return Uy(r,l,h,m),!0})}(r,P,l,c,xe),function(r,l,c,h){l.styles&&l.styles.backgroundColor&&t1(h,qw(r,"fontSize"),Yw(r,"backgroundColor",xi_replaceVars(l.styles.backgroundColor,c)))}(dt,P,c,xe),function(r,l,c,h){"sub"!==l.inline&&"sup"!==l.inline||(t1(h,qw(r,"fontSize"),Yw(r,"fontSize","")),r.remove(r.select("sup"===l.inline?"sub":"sup",h),!0))}(dt,P,0,xe),function(r,l,c,h){h&&!1!==l.merge_siblings&&(h=zg(r,xi_getNonWhiteSpaceSibling(h),h),h=zg(r,h,xi_getNonWhiteSpaceSibling(h,!0)))}(dt,P,0,xe)):dt.remove(xe,1)})};if("false"!==F.getContentEditable(W.getNode())){if(P){if(h)h.nodeType?Z(k,h)||((M=F.createRng()).setStartBefore(h),M.setEndAfter(h),ht(F,bc(r,M,k),0,!0)):ht(F,h,0,!0);else if(N&&P.inline&&!F.select("td[data-mce-selected],th[data-mce-selected]").length)!function(dt,mt,Dt){var Pt,wt,Ht,ce,Xt,xe,te=dt.selection;ce=(Pt=te.getRng(!0)).startOffset,xe=Pt.startContainer.nodeValue,(wt=du(dt.getBody(),te.getStart()))&&(Ht=iw(wt));var Ee,be,Ne=/[^\s\u00a0\u00ad\u200b\ufeff]/;xe&&0<ce&&ce<xe.length&&Ne.test(xe.charAt(ce))&&Ne.test(xe.charAt(ce-1))?(Xt=te.getBookmark(),Pt.collapse(!0),Pt=bc(dt,Pt,dt.formatter.get(mt)),Pt=ny(Pt),dt.formatter.apply(mt,Dt,Pt),te.moveToBookmark(Xt)):(wt&&"\ufeff"===Ht.nodeValue||(Ee=dt.getDoc(),be=ib(!0).dom(),Ht=(wt=Ee.importNode(be,!0)).firstChild,Pt.insertNode(wt),ce=1),dt.formatter.apply(mt,Dt,wt),te.setCursorLocation(Ht,ce))}(r,l,c);else{var at=r.selection.getNode();r.settings.forced_root_block||!k[0].defaultBlock||F.getParent(at,F.isBlock)||e1(r,k[0].defaultBlock),r.selection.setRng(_f(r.selection.getRng())),m=hf.getPersistentBookmark(r.selection,!0),ht(F,bc(r,W.getRng(),k)),P.styles&&function(r,l,c,h){(l.styles.color||l.styles.textDecoration)&&(ge.walk(h,Ve($w,r),"childNodes"),$w(r,h))}(F,P,0,at),W.moveToBookmark(m),xi_moveStart(F,W,W.getRng()),r.nodeChanged()}!function(r,l){Zb(jy[r],function(c){c(l)})}(l,r)}}else{h=W.getNode();for(var gt=0,rt=k.length;gt<rt;gt++)if(k[gt].ceFalseOverride&&F.is(h,k[gt].selector))return void q(h,k[gt])}},qy={applyFormat:e1},Id=ge.each,kM=function(r,l,c,h,m){var M,k,P,N,F,W,q,Z;null===l.get()&&(k=r,P={},(M=l).set({}),k.on("NodeChange",function(ht){var at=xi_getParents(k.dom,ht.element),gt={};at=ge.grep(at,function(rt){return 1===rt.nodeType&&!rt.getAttribute("data-mce-bogus")}),Id(M.get(),function(rt,dt){Id(at,function(mt){return k.formatter.matchNode(mt,dt,{},rt.similar)?(P[dt]||(Id(rt,function(Dt){Dt(!0,{node:mt,format:dt,parents:at})}),P[dt]=rt),gt[dt]=rt,!1):!Sl.matchesUnInheritedFormatSelector(k,mt,dt)&&void 0})}),Id(P,function(rt,dt){gt[dt]||(delete P[dt],Id(rt,function(mt){mt(!1,{node:ht.element,format:dt,parents:at})}))})})),F=c,W=h,q=m,Z=(N=l).get(),Id(F.split(","),function(ht){Z[ht]||(Z[ht]=[],Z[ht].similar=q),Z[ht].push(W)}),N.set(Z)},Yy=ge.each,Cl=eo.DOM,tS=function(r,l){var c,h,m,M=l&&l.schema||su({}),k=function(N){var F,W,q;return W=F=Cl.create((h="string"==typeof N?{name:N,classes:[],attrs:{}}:N).name),(q=h).classes.length&&Cl.addClass(W,q.classes.join(" ")),Cl.setAttribs(W,q.attrs),F},P=function(N,F,W){var q,Z,ht,at,gt,rt,dt,mt,Dt=0<F.length&&F[0],Pt=Dt&&Dt.name;if(gt=Pt,rt="string"!=typeof(at=N)?at.nodeName.toLowerCase():at,ht=!(!(mt=(dt=M.getElementRule(rt))&&dt.parentsRequired)||!mt.length)&&(gt&&-1!==ge.inArray(mt,gt)?gt:mt[0]))Pt===ht?(Z=F[0],F=F.slice(1)):Z=ht;else if(Dt)Z=F[0],F=F.slice(1);else if(!W)return N;return Z&&(q=k(Z)).appendChild(N),W&&(q||(q=Cl.create("div")).appendChild(N),ge.each(W,function(wt){var Ht=k(wt);q.insertBefore(Ht,N)})),P(q,F,Z&&Z.siblings)};return r&&r.length?(c=k(h=r[0]),(m=Cl.create("div")).appendChild(P(c,r.slice(1),h.siblings)),m):""},n1=function(r){var l,c={classes:[],attrs:{}};return"*"!==(r=c.selector=ge.trim(r))&&(l=r.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(h,m,M,k,P){switch(m){case"#":c.attrs.id=M;break;case".":c.classes.push(M);break;case":":-1!==ge.inArray("checked disabled enabled read-only required".split(" "),M)&&(c.attrs[M]=M)}if("["===k){var N=P.match(/([\w\-]+)(?:\=\"([^\"]+))?/);N&&(c.attrs[N[1]]=N[2])}return""})),c.name=l||"div",c},Xy=function(r,l){var c,h,m,M,k,P,N="";if(!1===(P=r.settings.preview_styles))return"";"string"!=typeof P&&(P="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var F=function(W){return W.replace(/%(\w+)/g,"")};if("string"==typeof l){if(!(l=r.formatter.get(l)))return;l=l[0]}return"preview"in l&&!1===(P=l.preview)?"":(c=l.block||l.inline||"span",(M=function(r){return r&&"string"==typeof r?(r=(r=r.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ge.map(r.split(/(?:>|\s+(?![^\[\]]+\]))/),function(l){var c=ge.map(l.split(/(?:~\+|~|\+)/),n1),h=c.pop();return c.length&&(h.siblings=c),h}).reverse()):[]}(l.selector)).length?(M[0].name||(M[0].name=c),c=l.selector,h=tS(M,r)):h=tS([c],r),m=Cl.select(c,h)[0]||h.firstChild,Yy(l.styles,function(W,q){(W=F(W))&&Cl.setStyle(m,q,W)}),Yy(l.attributes,function(W,q){(W=F(W))&&Cl.setAttrib(m,q,W)}),Yy(l.classes,function(W){W=F(W),Cl.hasClass(m,W)||Cl.addClass(m,W)}),r.fire("PreviewFormats"),Cl.setStyles(h,{position:"absolute",left:-65535}),r.getBody().appendChild(h),k=Cl.getStyle(r.getBody(),"fontSize",!0),k=/px$/.test(k)?parseInt(k,10):0,Yy(P.split(" "),function(W){var q=Cl.getStyle(m,W,!0);if(!("background-color"===W&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(q)&&(q=Cl.getStyle(r.getBody(),W,!0),"#ffffff"===Cl.toHex(q).toLowerCase())||"color"===W&&"#000000"===Cl.toHex(q).toLowerCase())){if("font-size"===W&&/em|%$/.test(q)){if(0===k)return;q=parseFloat(q)/(/%$/.test(q)?100:1)*k+"px"}"border"===W&&q&&(N+="padding:0 2px;"),N+=W+":"+q+";"}}),r.fire("AfterPreviewFormats"),Cl.remove(h),N)},i1=function(r,l,c,h,m){var M=l.get(c);!Sl.match(r,c,h,m)||"toggle"in M[0]&&!M[0].toggle?qy.applyFormat(r,c,h,m):Qb(r,c,h,m)};function nS(r){var l,c,h,m=(c={},(h=function(k,P){k&&("string"!=typeof k?ge.each(k,function(N,F){h(F,N)}):(ge.each(P=P.length?P:[P],function(N){void 0===N.deep&&(N.deep=!N.selector),void 0===N.split&&(N.split=!N.selector||N.inline),void 0===N.remove&&N.selector&&!N.inline&&(N.remove="none"),N.selector&&N.inline&&(N.mixed=!0,N.block_expand=!0),"string"==typeof N.classes&&(N.classes=N.classes.split(/\s+/))}),c[k]=P))})(function(r){var l={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(c,h,m){ge.each(m,function(M,k){r.setAttrib(c,k,M)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ge.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(c){l[c]={block:c,remove:"all"}}),l}((l=r).dom)),h(l.settings.formats),{get:function(k){return k?c[k]:c},register:h,unregister:function(k){return k&&c[k]&&delete c[k],c}}),M=_a(null);return function(r){r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(var l=1;l<=6;l++)r.addShortcut("access+"+l,"",["FormatBlock",!1,"h"+l]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])}(r),function(r){r.on("mouseup keydown",function(l){var c,h,m,M;h=l.keyCode,m=(c=r).selection,M=c.getBody(),qa(c,null,!1),8!==h&&46!==h||!m.isCollapsed()||"\ufeff"!==m.getStart().innerHTML||qa(c,du(M,m.getStart())),37!==h&&39!==h||qa(c,du(M,m.getStart()))})}(r),{get:m.get,register:m.register,unregister:m.unregister,apply:Ve(qy.applyFormat,r),remove:Ve(Qb,r),toggle:Ve(i1,r,m),match:Ve(Sl.match,r),matchAll:Ve(Sl.matchAll,r),matchNode:Ve(Sl.matchNode,r),canApply:Ve(Sl.canApply,r),formatChanged:Ve(kM,r,M),getCssText:Ve(Xy,r)}}var Pv,iS=Object.prototype.hasOwnProperty,Zp=(Pv=function(r,l){return l},function(){for(var r=new Array(arguments.length),l=0;l<r.length;l++)r[l]=arguments[l];if(0===r.length)throw new Error("Can't merge zero objects");for(var c={},h=0;h<r.length;h++){var m=r[h];for(var M in m)iS.call(m,M)&&(c[M]=Pv(0,m[M]))}return c}),aS_register=function(r,l){l.inline_styles&&function(r,l){var c,h=pc();l.convert_fonts_to_spans&&function(r,l,c){r.addNodeFilter("font",function(h){Ke(h,function(m){var M,k=l.parse(m.attr("style")),P=m.attr("color"),N=m.attr("face"),F=m.attr("size");P&&(k.color=P),N&&(k["font-family"]=N),F&&(k["font-size"]=c[parseInt(m.attr("size"),10)-1]),m.name="span",m.attr("style",l.serialize(k)),M=m,Ke(["color","face","size"],function(W){M.attr(W,null)})})})}(r,h,ge.explode(l.font_size_legacy_values)),c=h,r.addNodeFilter("strike",function(m){Ke(m,function(M){var k=c.parse(M.attr("style"));k["text-decoration"]="line-through",M.name="span",M.attr("style",c.serialize(k))})})}(r,l)},$y=/^[ \t\r\n]*$/,sS={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Kp=function(r,l,c){var h,m,M=c?"lastChild":"firstChild",k=c?"prev":"next";if(r[M])return r[M];if(r!==l){if(h=r[k])return h;for(m=r.parent;m&&m!==l;m=m.parent)if(h=m[k])return h}},Ds=function(){function r(l,c){this.name=l,1===(this.type=c)&&(this.attributes=[],this.attributes.map={})}return r.create=function(l,c){var h,m;if(h=new r(l,sS[l]||1),c)for(m in c)h.attr(m,c[m]);return h},r.prototype.replace=function(l){return l.parent&&l.remove(),this.insert(l,this),this.remove(),this},r.prototype.attr=function(l,c){var h,m;if("string"!=typeof l){for(m in l)this.attr(m,l[m]);return this}if(h=this.attributes){if(void 0!==c){if(null===c){if(l in h.map)for(delete h.map[l],m=h.length;m--;)if(h[m].name===l)return h=h.splice(m,1),this;return this}if(l in h.map){for(m=h.length;m--;)if(h[m].name===l){h[m].value=c;break}}else h.push({name:l,value:c});return h.map[l]=c,this}return h.map[l]}},r.prototype.clone=function(){var l,c,h,m,M,k=new r(this.name,this.type);if(h=this.attributes){for((M=[]).map={},l=0,c=h.length;l<c;l++)"id"!==(m=h[l]).name&&(M[M.length]={name:m.name,value:m.value},M.map[m.name]=m.value);k.attributes=M}return k.value=this.value,k.shortEnded=this.shortEnded,k},r.prototype.wrap=function(l){return this.parent.insert(l,this),l.append(this),this},r.prototype.unwrap=function(){var l,c;for(l=this.firstChild;l;)c=l.next,this.insert(l,this,!0),l=c;this.remove()},r.prototype.remove=function(){var l=this.parent,c=this.next,h=this.prev;return l&&(l.firstChild===this?(l.firstChild=c)&&(c.prev=null):h.next=c,l.lastChild===this?(l.lastChild=h)&&(h.next=null):c.prev=h,this.parent=this.next=this.prev=null),this},r.prototype.append=function(l){var c;return l.parent&&l.remove(),(c=this.lastChild)?((c.next=l).prev=c,this.lastChild=l):this.lastChild=this.firstChild=l,l.parent=this,l},r.prototype.insert=function(l,c,h){var m;return l.parent&&l.remove(),m=c.parent||this,h?(c===m.firstChild?m.firstChild=l:c.prev.next=l,l.prev=c.prev,(l.next=c).prev=l):(c===m.lastChild?m.lastChild=l:c.next.prev=l,l.next=c.next,(l.prev=c).next=l),l.parent=m,l},r.prototype.getAll=function(l){var c,h=[];for(c=this.firstChild;c;c=Kp(c,this))c.name===l&&h.push(c);return h},r.prototype.empty=function(){var l,c,h;if(this.firstChild){for(l=[],h=this.firstChild;h;h=Kp(h,this))l.push(h);for(c=l.length;c--;)(h=l[c]).parent=h.firstChild=h.lastChild=h.next=h.prev=null}return this.firstChild=this.lastChild=null,this},r.prototype.isEmpty=function(l,c,h){var m,M,k=this.firstChild;if(c=c||{},k)do{if(1===k.type){if(k.attributes.map["data-mce-bogus"])continue;if(l[k.name])return!1;for(m=k.attributes.length;m--;)if("name"===(M=k.attributes[m].name)||0===M.indexOf("data-mce-bookmark"))return!1}if(8===k.type||3===k.type&&!$y.test(k.value)||3===k.type&&k.parent&&c[k.parent.name]&&$y.test(k.value)||h&&h(k))return!1}while(k=Kp(k,this));return!0},r.prototype.walk=function(l){return Kp(this,null,l)},r}(),a1=function(r,l,c,h){(r.padd_empty_with_br||l.insert)&&c[h.name]?h.empty().append(new Ds("br",1)).shortEnded=!0:h.empty().append(new Ds("#text",3)).value="\xa0"},s1=function(r,l){return r&&r.firstChild&&r.firstChild===r.lastChild&&r.firstChild.name===l},Qp=function(r,l,c,h){return h.isEmpty(l,c,function(m){return(k=r.getElementRule(m.name))&&k.paddEmpty;var k})},tm=ge.makeMap,em=ge.each,Nv=ge.explode,cS=ge.extend;function l1(r,l){void 0===l&&(l=su());var c={},h=[],m={},M={};(r=r||{}).validate=!("validate"in r)||r.validate,r.root_name=r.root_name||"body";var k=function(N){var F,W,q;for(((W=N.name)in c&&((q=m[W])?q.push(N):m[W]=[N]),F=h.length);F--;)(W=h[F].name)in N.attributes.map&&((q=M[W])?q.push(N):M[W]=[N]);return N},P={schema:l,addAttributeFilter:function(N,F){em(Nv(N),function(W){var q;for(q=0;q<h.length;q++)if(h[q].name===W)return void h[q].callbacks.push(F);h.push({name:W,callbacks:[F]})})},getAttributeFilters:function(){return[].concat(h)},addNodeFilter:function(N,F){em(Nv(N),function(W){var q=c[W];q||(c[W]=q=[]),q.push(F)})},getNodeFilters:function(){var N=[];for(var F in c)c.hasOwnProperty(F)&&N.push({name:F,callbacks:c[F]});return N},filterNode:k,parse:function(N,F){var W,q,Z,ht,at,gt,rt,dt,mt,Dt,Pt,wt=[];F=F||{},m={},M={},mt=cS(tm("script,style,head,html,body,title,meta,param"),l.getBlockElements());var Ht=l.getNonEmptyElements(),ce=l.children,Xt=r.validate,xe="forced_root_block"in F?F.forced_root_block:r.forced_root_block,te=l.getWhiteSpaceElements(),Ee=/^[ \t\r\n]+/,be=/[ \t\r\n]+$/,Ne=/[ \t\r\n]+/g,Cn=/^[ \t\r\n]+$/;Dt=te.hasOwnProperty(F.context)||te.hasOwnProperty(r.root_name);var Ae=function(an,ke){var Ze,Hn=new Ds(an,ke);return an in c&&((Ze=m[an])?Ze.push(Hn):m[an]=[Hn]),Hn},Be=function(an){var ke,Ze,Hn,Yn,Wn=l.getBlockElements();for(ke=an.prev;ke&&3===ke.type;){if(0<(Hn=ke.value.replace(be,"")).length)return void(ke.value=Hn);if(Ze=ke.next){if(3===Ze.type&&Ze.value.length){ke=ke.prev;continue}if(!Wn[Ze.name]&&"script"!==Ze.name&&"style"!==Ze.name){ke=ke.prev;continue}}Yn=ke.prev,ke.remove(),ke=Yn}};W=Oy({validate:Xt,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:function(an){var ke,Ze={};for(ke in an)"li"!==ke&&"p"!==ke&&(Ze[ke]=an[ke]);return Ze}(l.getSelfClosingElements()),cdata:function(an){Pt.append(Ae("#cdata",4)).value=an},text:function(an,ke){var Ze;Dt||(an=an.replace(Ne," "),function(r,l){return r&&(l[r.name]||"br"===r.name)}(Pt.lastChild,mt)&&(an=an.replace(Ee,""))),0!==an.length&&((Ze=Ae("#text",3)).raw=!!ke,Pt.append(Ze).value=an)},comment:function(an){Pt.append(Ae("#comment",8)).value=an},pi:function(an,ke){Pt.append(Ae(an,7)).value=ke,Be(Pt)},doctype:function(an){Pt.append(Ae("#doctype",10)).value=an,Be(Pt)},start:function(an,ke,Ze){var Hn,Yn,Wn,dn,Xn;if(Wn=Xt?l.getElementRule(an):{}){for((Hn=Ae(Wn.outputName||an,1)).attributes=ke,Hn.shortEnded=Ze,Pt.append(Hn),(Xn=ce[Pt.name])&&ce[Hn.name]&&!Xn[Hn.name]&&wt.push(Hn),Yn=h.length;Yn--;)(dn=h[Yn].name)in ke.map&&((rt=M[dn])?rt.push(Hn):M[dn]=[Hn]);mt[an]&&Be(Hn),Ze||(Pt=Hn),!Dt&&te[an]&&(Dt=!0)}},end:function(an){var ke,Ze,Hn,Yn,Wn;if(Ze=Xt?l.getElementRule(an):{}){if(mt[an]&&!Dt){if((ke=Pt.firstChild)&&3===ke.type)if(0<(Hn=ke.value.replace(Ee,"")).length)ke.value=Hn,ke=ke.next;else for(Yn=ke.next,ke.remove(),ke=Yn;ke&&3===ke.type;)Yn=ke.next,(0===(Hn=ke.value).length||Cn.test(Hn))&&(ke.remove(),ke=Yn),ke=Yn;if((ke=Pt.lastChild)&&3===ke.type)if(0<(Hn=ke.value.replace(be,"")).length)ke.value=Hn,ke=ke.prev;else for(Yn=ke.prev,ke.remove(),ke=Yn;ke&&3===ke.type;)Yn=ke.prev,(0===(Hn=ke.value).length||Cn.test(Hn))&&(ke.remove(),ke=Yn),ke=Yn}if(Dt&&te[an]&&(Dt=!1),Ze.removeEmpty&&Qp(l,Ht,te,Pt)&&!Pt.attributes.map.name&&!Pt.attr("id"))return Wn=Pt.parent,mt[Pt.name]?Pt.empty().remove():Pt.unwrap(),void(Pt=Wn);Ze.paddEmpty&&(function(r){return s1(r,"#text")&&"\xa0"===r.firstChild.value}(Pt)||Qp(l,Ht,te,Pt))&&a1(r,F,mt,Pt),Pt=Pt.parent}}},l);var Pn=Pt=new Ds(F.context||r.root_name,11);if(W.parse(N),Xt&&wt.length&&(F.context?F.invalid=!0:function(an){var ke,Ze,Hn,Yn,Wn,dn,Xn,zt,ie,Te,Ge,Gn,Li,qi,sr,Lo;for(Gn=tm("tr,td,th,tbody,thead,tfoot,table"),Te=l.getNonEmptyElements(),Ge=l.getWhiteSpaceElements(),Li=l.getTextBlockElements(),qi=l.getSpecialElements(),ke=0;ke<an.length;ke++)if((Ze=an[ke]).parent&&!Ze.fixed)if(Li[Ze.name]&&"li"===Ze.parent.name){for(sr=Ze.next;sr&&Li[sr.name];)sr.name="li",sr.fixed=!0,Ze.parent.insert(sr,Ze.parent),sr=sr.next;Ze.unwrap(Ze)}else{for(Yn=[Ze],Hn=Ze.parent;Hn&&!l.isValidChild(Hn.name,Ze.name)&&!Gn[Hn.name];Hn=Hn.parent)Yn.push(Hn);if(Hn&&1<Yn.length){for(Yn.reverse(),Wn=dn=k(Yn[0].clone()),ie=0;ie<Yn.length-1;ie++){for(l.isValidChild(dn.name,Yn[ie].name)?(Xn=k(Yn[ie].clone()),dn.append(Xn)):Xn=dn,zt=Yn[ie].firstChild;zt&&zt!==Yn[ie+1];)Lo=zt.next,Xn.append(zt),zt=Lo;dn=Xn}Qp(l,Te,Ge,Wn)?Hn.insert(Ze,Yn[0],!0):(Hn.insert(Wn,Yn[0],!0),Hn.insert(Ze,Wn)),(Qp(l,Te,Ge,Hn=Yn[0])||s1(Hn,"br"))&&Hn.empty().remove()}else if(Ze.parent){if("li"===Ze.name){if((sr=Ze.prev)&&("ul"===sr.name||"ul"===sr.name)){sr.append(Ze);continue}if((sr=Ze.next)&&("ul"===sr.name||"ul"===sr.name)){sr.insert(Ze,sr.firstChild,!0);continue}Ze.wrap(k(new Ds("ul",1)));continue}l.isValidChild(Ze.parent.name,"div")&&l.isValidChild("div",Ze.name)?Ze.wrap(k(new Ds("div",1))):qi[Ze.name]?Ze.empty().remove():Ze.unwrap()}}}(wt)),xe&&("body"===Pn.name||F.isRootContent)&&function(){var an,ke,Ze=Pn.firstChild,Hn=function(Yn){Yn&&((Ze=Yn.firstChild)&&3===Ze.type&&(Ze.value=Ze.value.replace(Ee,"")),(Ze=Yn.lastChild)&&3===Ze.type&&(Ze.value=Ze.value.replace(be,"")))};if(l.isValidChild(Pn.name,xe.toLowerCase())){for(;Ze;)an=Ze.next,3===Ze.type||1===Ze.type&&"p"!==Ze.name&&!mt[Ze.name]&&!Ze.attr("data-mce-type")?(ke||((ke=Ae(xe,1)).attr(r.forced_root_block_attrs),Pn.insert(ke,Ze)),ke.append(Ze)):(Hn(ke),ke=null),Ze=an;Hn(ke)}}(),!F.invalid){for(dt in m){for(rt=c[dt],at=(q=m[dt]).length;at--;)q[at].parent||q.splice(at,1);for(Z=0,ht=rt.length;Z<ht;Z++)rt[Z](q,dt,F)}for(Z=0,ht=h.length;Z<ht;Z++)if((rt=h[Z]).name in M){for(at=(q=M[rt.name]).length;at--;)q[at].parent||q.splice(at,1);for(at=0,gt=rt.callbacks.length;at<gt;at++)rt.callbacks[at](q,rt.name,F)}}return Pn}};return function(r,l){var c=r.schema;l.remove_trailing_brs&&r.addNodeFilter("br",function(h,m,M){var k,P,N,F,W,q,Z,ht,at=h.length,gt=ge.extend({},c.getBlockElements()),rt=c.getNonEmptyElements(),dt=c.getWhiteSpaceElements();for(gt.body=1,k=0;k<at;k++)if(N=(P=h[k]).parent,gt[P.parent.name]&&P===N.lastChild){for(W=P.prev;W;){if("span"!==(q=W.name)||"bookmark"!==W.attr("data-mce-type")){if("br"!==q)break;if("br"===q){P=null;break}}W=W.prev}P&&(P.remove(),Qp(c,rt,dt,N)&&(Z=c.getElementRule(N.name))&&(Z.removeEmpty?N.remove():Z.paddEmpty&&a1(l,M,gt,N)))}else{for(F=P;N&&N.firstChild===F&&N.lastChild===F&&!gt[(F=N).name];)N=N.parent;F===N&&!0!==l.padd_empty_with_br&&((ht=new Ds("#text",3)).value="\xa0",P.replace(ht))}}),r.addAttributeFilter("href",function(h){var m,M,k,P=h.length;if(!l.allow_unsafe_link_target)for(;P--;)"a"===(m=h[P]).name&&"_blank"===m.attr("target")&&m.attr("rel",(k=(M=m.attr("rel"))?ge.trim(M):"",/\b(noopener)\b/g.test(k)?k:k.split(" ").filter(function(N){return 0<N.length}).concat(["noopener"]).sort().join(" ")))}),l.allow_html_in_named_anchor||r.addAttributeFilter("id,name",function(h){for(var m,M,k,P,N=h.length;N--;)if("a"===(P=h[N]).name&&P.firstChild&&!P.attr("href"))for(k=P.parent,m=P.lastChild;M=m.prev,k.insert(m,P),m=M;);}),l.fix_list_elements&&r.addNodeFilter("ul,ol",function(h){for(var m,M,k=h.length;k--;)if("ul"===(M=(m=h[k]).parent).name||"ol"===M.name)if(m.prev&&"li"===m.prev.name)m.prev.append(m);else{var P=new Ds("li",1);P.attr("style","list-style-type: none"),m.wrap(P)}}),l.validate&&c.getValidClasses()&&r.addAttributeFilter("class",function(h){for(var m,M,k,P,N,F,W,q=h.length,Z=c.getValidClasses();q--;){for(M=(m=h[q]).attr("class").split(" "),N="",k=0;k<M.length;k++)P=M[k],W=!1,(F=Z["*"])&&F[P]&&(W=!0),F=Z[m.name],!W&&F&&F[P]&&(W=!0),W&&(N&&(N+=" "),N+=P);N.length||(N=null),m.attr("class",N)}})}(P,r),aS_register(P,r),P}var PM=function(r,l,c){-1===ge.inArray(l,c)&&(r.addAttributeFilter(c,function(h,m){for(var M=h.length;M--;)h[M].attr(m,null)}),l.push(c))};function Zy(r,l){var c,h,m,M,k,P,N=(c=r,P=["data-mce-selected"],m=(h=l)&&h.dom?h.dom:eo.DOM,M=h&&h.schema?h.schema:su(c),c.entity_encoding=c.entity_encoding||"named",c.remove_trailing_brs=!("remove_trailing_brs"in c)||c.remove_trailing_brs,function(r,l,c){r.addAttributeFilter("data-mce-tabindex",function(h,m){for(var M,k=h.length;k--;)(M=h[k]).attr("tabindex",M.attributes.map["data-mce-tabindex"]),M.attr(m,null)}),r.addAttributeFilter("src,href,style",function(h,m){for(var M,k,P=h.length,N="data-mce-"+m,F=l.url_converter,W=l.url_converter_scope;P--;)void 0!==(k=(M=h[P]).attributes.map[N])?(M.attr(m,0<k.length?k:null),M.attr(N,null)):(k=M.attributes.map[m],"style"===m?k=c.serializeStyle(c.parseStyle(k),M.name):F&&(k=F.call(W,k,m,M.name)),M.attr(m,0<k.length?k:null))}),r.addAttributeFilter("class",function(h){for(var m,M,k=h.length;k--;)(M=(m=h[k]).attr("class"))&&(M=m.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",0<M.length?M:null))}),r.addAttributeFilter("data-mce-type",function(h,m,M){for(var k,P=h.length;P--;)"bookmark"!==(k=h[P]).attributes.map["data-mce-type"]||M.cleanup||(kt.from(k.firstChild).exists(function(N){return!ig(N.value)})?k.unwrap():k.remove())}),r.addNodeFilter("noscript",function(h){for(var m,M=h.length;M--;)(m=h[M].firstChild)&&(m.value=to.decode(m.value))}),r.addNodeFilter("script,style",function(h,m){for(var M,k,P,N=h.length,F=function(W){return W.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};N--;)k=(M=h[N]).firstChild?M.firstChild.value:"","script"===m?((P=M.attr("type"))&&M.attr("type","mce-no/type"===P?null:P.replace(/^mce\-/,"")),"xhtml"===l.element_format&&0<k.length&&(M.firstChild.value="// <![CDATA[\n"+F(k)+"\n// ]]>")):"xhtml"===l.element_format&&0<k.length&&(M.firstChild.value="\x3c!--\n"+F(k)+"\n--\x3e")}),r.addNodeFilter("#comment",function(h){for(var m,M=h.length;M--;)0===(m=h[M]).value.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=m.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===m.value.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(m.value).substr(14))}),r.addNodeFilter("xml:namespace,input",function(h,m){for(var M,k=h.length;k--;)7===(M=h[k]).type?M.remove():1===M.type&&("input"!==m||"type"in M.attributes.map||M.attr("type","text"))}),r.addAttributeFilter("data-mce-type",function(h){Ke(h,function(m){"format-caret"===m.attr("data-mce-type")&&(m.isEmpty(r.schema.getNonEmptyElements())?m.remove():m.unwrap())})}),r.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(h,m){for(var M=h.length;M--;)h[M].attr(m,null)})}(k=l1(c,M),c,m),{schema:M,addNodeFilter:k.addNodeFilter,addAttributeFilter:k.addAttributeFilter,serialize:function(F,W){var q=Zp({format:"html"},W||{}),Z=function(r,l,c){return q=c,(W=r)&&W.hasEventListeners("PreProcess")&&!q.no_events?(M=c,F=(h=r).dom,m=(m=l).cloneNode(!0),(k=Rt.document.implementation).createHTMLDocument&&(P=k.createHTMLDocument(""),ge.each("BODY"===m.nodeName?m.childNodes:[m],function(Z){P.body.appendChild(P.importNode(Z,!0))}),m="BODY"!==m.nodeName?P.body.firstChild:P.body,N=F.doc,F.doc=P),function(r,l){r.fire("PreProcess",l)}(h,Zp(M,{node:m})),N&&(F.doc=N),m):l;var h,m,M,k,P,N,F,W,q}(h,F,q),ht=function(r,l,c){var h=f(c.getInner?l.innerHTML:r.getOuterHTML(l));return c.selection||Tt(Ce_fromDom(l))?h:ge.trim(h)}(m,Z,q),at=function(r,l,c){var h=c.selection?Zp({forced_root_block:!1},c):c,m=r.parse(l,h);return function(r){var l,c,h=function(m){return m&&"br"===m.name};h(l=r.lastChild)&&h(c=l.prev)&&(l.remove(),c.remove())}(m),m}(k,ht,q);return"tree"===q.format?at:function(r,l,c,h,m){var M,k,P,N;return k=r,M=h,N=ah(l,c).serialize(M),!(P=m).no_events&&k?function(r,l){return r.fire("PostProcess",l)}(k,Zp(P,{content:N})).content:N}(h,c,M,at,q)},addRules:function(F){M.addValidElements(F)},setRules:function(F){M.setValidElements(F)},addTempAttr:Ve(PM,k,P),getTempAttrs:function(){return P}});return{schema:N.schema,addNodeFilter:N.addNodeFilter,addAttributeFilter:N.addAttributeFilter,serialize:N.serialize,addRules:N.addRules,setRules:N.setRules,addTempAttr:N.addTempAttr,getTempAttrs:N.getTempAttrs}}function Rv(r){return{getBookmark:Ve(Em,r),moveToBookmark:Ve(gg,r)}}(Rv||(Rv={})).isBookmarkNode=Hl;var jl,Hf,hS=Rv,fS=Lt.isContentEditableFalse,gS=Lt.isContentEditableTrue,nm=function(r,l){var c,h,m,M,k,P,N,F,W,q,Z,ht,at,gt,rt,dt,mt,Dt=l.dom,Pt=ge.each,wt=l.getDoc(),Ht=Rt.document,ce=Math.abs,Xt=Math.round,xe=l.getBody();M={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var te=".mce-content-body";l.contentStyles.push(te+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+te+" .mce-resizehandle:hover {background: #000}"+te+" img[data-mce-selected],"+te+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+te+" .mce-clonedresizable {position: absolute;"+(sn.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+te+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var Ee=function(Wn){return Wn&&("IMG"===Wn.nodeName||l.dom.is(Wn,"figure.image"))},be=function(Wn){var dn,Xn,zt=Wn.target;dn=Wn,Xn=l.selection.getRng(),!Ee(dn.target)||zb(dn.clientX,dn.clientY,Xn)||Wn.isDefaultPrevented()||l.selection.select(zt)},Ne=function(Wn){return l.dom.is(Wn,"figure.image")?Wn.querySelector("img"):Wn},Cn=function(Wn){var dn=l.settings.object_resizing;return!1!==dn&&!sn.iOS&&("string"!=typeof dn&&(dn="table,img,figure.image,div"),"false"!==Wn.getAttribute("data-mce-resize")&&Wn!==l.getBody()&&Ru(Ce_fromDom(Wn),dn))},Ae=function(Wn){var dn,Xn,zt,ie;gt=(gt=(dn=Wn.screenX-P)*k[2]+q)<5?5:gt,rt=(rt=(Xn=Wn.screenY-N)*k[3]+Z)<5?5:rt,(Ee(c)&&!1!==l.settings.resize_img_proportional?!ar.modifierPressed(Wn):ar.modifierPressed(Wn)||Ee(c)&&k[2]*k[3]!=0)&&(ce(dn)>ce(Xn)?(rt=Xt(gt*ht),gt=Xt(rt/ht)):(gt=Xt(rt/ht),rt=Xt(gt*ht))),Dt.setStyles(Ne(h),{width:gt,height:rt}),zt=0<(zt=k.startPos.x+dn)?zt:0,ie=0<(ie=k.startPos.y+Xn)?ie:0,Dt.setStyles(m,{left:zt,top:ie,display:"block"}),m.innerHTML=gt+" &times; "+rt,k[2]<0&&h.clientWidth<=gt&&Dt.setStyle(h,"left",F+(q-gt)),k[3]<0&&h.clientHeight<=rt&&Dt.setStyle(h,"top",W+(Z-rt)),(dn=xe.scrollWidth-dt)+(Xn=xe.scrollHeight-mt)!=0&&Dt.setStyles(m,{left:zt-dn,top:ie-Xn}),at||(function(r,l,c,h){r.fire("ObjectResizeStart",{target:l,width:c,height:h})}(l,c,q,Z),at=!0)},Be=function(){at=!1;var Wn=function(dn,Xn){Xn&&(c.style[dn]||!l.schema.isValid(c.nodeName.toLowerCase(),dn)?Dt.setStyle(Ne(c),dn,Xn):Dt.setAttrib(Ne(c),dn,Xn))};Wn("width",gt),Wn("height",rt),Dt.unbind(wt,"mousemove",Ae),Dt.unbind(wt,"mouseup",Be),Ht!==wt&&(Dt.unbind(Ht,"mousemove",Ae),Dt.unbind(Ht,"mouseup",Be)),Dt.remove(h),Dt.remove(m),Pn(c),function(r,l,c,h){r.fire("ObjectResized",{target:l,width:c,height:h})}(l,c,gt,rt),Dt.setAttrib(c,"style",Dt.getAttrib(c,"style")),l.nodeChanged()},Pn=function(Wn){var dn,Xn,zt,ie,Te;an(),Hn(),dn=Dt.getPos(Wn,xe),F=dn.x,W=dn.y,Te=Wn.getBoundingClientRect(),Xn=Te.width||Te.right-Te.left,zt=Te.height||Te.bottom-Te.top,c!==Wn&&(c=Wn,gt=rt=0),ie=l.fire("ObjectSelected",{target:Wn}),Cn(Wn)&&!ie.isDefaultPrevented()?Pt(M,function(Ge,Gn){var Li;(Li=Dt.get("mceResizeHandle"+Gn))&&Dt.remove(Li),Li=Dt.add(xe,"div",{id:"mceResizeHandle"+Gn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Gn+"-resize; margin:0; padding:0"}),11===sn.ie&&(Li.contentEditable=!1),Dt.bind(Li,"mousedown",function(qi){var sr;qi.stopImmediatePropagation(),qi.preventDefault(),P=(sr=qi).screenX,N=sr.screenY,q=Ne(c).clientWidth,Z=Ne(c).clientHeight,ht=Z/q,(k=Ge).startPos={x:Xn*Ge[0]+F,y:zt*Ge[1]+W},dt=xe.scrollWidth,mt=xe.scrollHeight,h=c.cloneNode(!0),Dt.addClass(h,"mce-clonedresizable"),Dt.setAttrib(h,"data-mce-bogus","all"),h.contentEditable=!1,h.unSelectabe=!0,Dt.setStyles(h,{left:F,top:W,margin:0}),h.removeAttribute("data-mce-selected"),xe.appendChild(h),Dt.bind(wt,"mousemove",Ae),Dt.bind(wt,"mouseup",Be),Ht!==wt&&(Dt.bind(Ht,"mousemove",Ae),Dt.bind(Ht,"mouseup",Be)),m=Dt.add(xe,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},q+" &times; "+Z)}),Ge.elm=Li,Dt.setStyles(Li,{left:Xn*Ge[0]+F-Li.offsetWidth/2,top:zt*Ge[1]+W-Li.offsetHeight/2})}):an(),c.setAttribute("data-mce-selected","1")},an=function(){var Wn,dn;for(Wn in Hn(),c&&c.removeAttribute("data-mce-selected"),M)(dn=Dt.get("mceResizeHandle"+Wn))&&(Dt.unbind(dn),Dt.remove(dn))},ke=function(Wn){var dn,Xn=function(zt,ie){if(zt)do{if(zt===ie)return!0}while(zt=zt.parentNode)};at||l.removed||(Pt(Dt.select("img[data-mce-selected],hr[data-mce-selected]"),function(zt){zt.removeAttribute("data-mce-selected")}),dn="mousedown"===Wn.type?Wn.target:r.getNode(),Xn(dn=Dt.$(dn).closest("table,img,figure.image,hr")[0],xe)&&(Yn(),Xn(r.getStart(!0),dn)&&Xn(r.getEnd(!0),dn))?Pn(dn):an())},Ze=function(Wn){return fS(function(dn,Xn){for(;Xn&&Xn!==dn;){if(gS(Xn)||fS(Xn))return Xn;Xn=Xn.parentNode}return null}(l.getBody(),Wn))},Hn=function(){for(var Wn in M){var dn=M[Wn];dn.elm&&(Dt.unbind(dn.elm),delete dn.elm)}},Yn=function(){try{l.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(Wn){}};return l.on("init",function(){Yn(),sn.ie&&11<=sn.ie&&(l.on("mousedown click",function(dn){var Xn=dn.target,zt=Xn.nodeName;at||!/^(TABLE|IMG|HR)$/.test(zt)||Ze(Xn)||(2!==dn.button&&l.selection.select(Xn,"TABLE"===zt),"mousedown"===dn.type&&l.nodeChanged())}),l.dom.bind(xe,"mscontrolselect",function(dn){var Xn=function(zt){mr.setEditorTimeout(l,function(){l.selection.select(zt)})};if(Ze(dn.target))return dn.preventDefault(),void Xn(dn.target);/^(TABLE|IMG|HR)$/.test(dn.target.nodeName)&&(dn.preventDefault(),"IMG"===dn.target.tagName&&Xn(dn.target))}));var Wn=mr.throttle(function(dn){l.composing||ke(dn)});l.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",Wn),l.on("keyup compositionend",function(dn){c&&"TABLE"===c.nodeName&&Wn(dn)}),l.on("hide blur",an),l.on("contextmenu",be)}),l.on("remove",Hn),{isResizable:Cn,showResizeRect:Pn,hideResizeRect:an,updateResizeRect:ke,destroy:function(){c=h=null}}},u1=function(r){return Lt.isContentEditableTrue(r)||Lt.isContentEditableFalse(r)},Lv=function(r,l,c){var h,m,M,k,P,N=c;if(N.caretPositionFromPoint)(m=N.caretPositionFromPoint(r,l))&&((h=c.createRange()).setStart(m.offsetNode,m.offset),h.collapse(!0));else if(c.caretRangeFromPoint)h=c.caretRangeFromPoint(r,l);else if(N.body.createTextRange){h=N.body.createTextRange();try{h.moveToPoint(r,l),h.collapse(!0)}catch(F){h=function(W,q,Z){var ht,at,gt;if(ht=Z.elementFromPoint(W,q),at=Z.body.createTextRange(),ht&&"HTML"!==ht.tagName||(ht=Z.body),at.moveToElementText(ht),0<(gt=(gt=ge.toArray(at.getClientRects())).sort(function(rt,dt){return(rt=Math.abs(Math.max(rt.top-q,rt.bottom-q)))-Math.abs(Math.max(dt.top-q,dt.bottom-q))})).length){q=(gt[0].bottom+gt[0].top)/2;try{return at.moveToPoint(W,q),at.collapse(!0),at}catch(rt){}}return null}(r,l,c)}return k=c.body,P=(M=h)&&M.parentElement?M.parentElement():null,Lt.isContentEditableFalse(function(F,W,q){for(;F&&F!==W;){if(q(F))return F;F=F.parentNode}return null}(P,k,u1))?null:M}return h},c1=function(r,l){return _i(l,function(c){var h=r.fire("GetSelectionRange",{range:c});return h.range!==c?h.range:c})},d1=function(r,l){var c=(l||Rt.document).createDocumentFragment();return Ke(r,function(h){c.appendChild(h.dom())}),Ce_fromDom(c)},h1=Io("element","width","rows"),f1=Io("element","cells"),pS=Io("x","y"),g1=function(r,l){var c=parseInt(Pl(r,l),10);return isNaN(c)?1:c},p1=function(r){return Ei(r,function(l,c){return c.cells().length>l?c.cells().length:l},0)},Ky=function(r,l){for(var c=r.rows(),h=0;h<c.length;h++)for(var m=c[h].cells(),M=0;M<m.length;M++)if(jr(m[M],l))return kt.some(pS(M,h));return kt.none()},im=function(r,l,c,h,m){for(var M=[],k=r.rows(),P=c;P<=m;P++){var N=k[P].cells(),F=l<h?N.slice(l,h+1):N.slice(h,l+1);M.push(f1(k[P].element(),F))}return M},mS=function(r){return c=_i((l=r).rows(),function(M){var k=_i(M.cells(),function(N){var F=yd(N);return Ql(F,"colspan"),Ql(F,"rowspan"),F}),P=Ms(M.element());return Rl(P,k),P}),h=Ms(l.element()),m=Ce_fromTag("tbody"),Rl(m,c),da(h,m),h;var l,c,h,m},Jy=function(){return d1([])},RM=function(r,l){return c=Ce_fromDom(l.cloneContents()),h=function(r,l){var c,h=Ce_fromDom(l.commonAncestorContainer),m=Sc(h,r),M=Vn(m,function(N){return Lu(N)||hl(N)}),k=function(r,l){return Zn(r,function(c){return"li"===la(c)&&function(r,l){return Jr((M=l,k=M.startContainer,P=M.startOffset,Lt.isText(k)?0===P?kt.some(Ce_fromDom(k)):kt.none():kt.from(k.childNodes[P]).map(Ce_fromDom)),(c=l,h=c.endContainer,m=c.endOffset,Lt.isText(h)?m===h.data.length?kt.some(Ce_fromDom(h)):kt.none():kt.from(h.childNodes[m-1]).map(Ce_fromDom)),function(N,F){var W=Zn(Rb(r),Ve(jr,N)),q=Zn(Lb(r),Ve(jr,F));return W.isSome()&&q.isSome()}).getOr(!1);var c,h,m,M,k,P}(c,l)}).fold(Oe([]),function(c){return(h=r,Zn(h,function(m){return"ul"===la(m)||"ol"===la(m)})).map(function(m){return[Ce_fromTag("li"),Ce_fromTag(la(m))]}).getOr([]);var h})}(m,l),P=M.concat(k.length?k:U(c=h)?ul(c).filter(B).fold(Oe([]),function(N){return[c,N]}):B(c)?[c]:[]);return _i(P,Ms)}(r,l),m=Ei(h,function(M,k){return da(k,M),k},c),0<h.length?d1([m]):m;var c,h,m},yS=function(r,l){if(void 0===l&&(l={}),l.get=!0,l.format=l.format||"html",l.selection=!0,(l=r.fire("BeforeGetContent",l)).isDefaultPrevented())return r.fire("GetContent",l),l.content;if("text"===l.format)return kt.from((F=r).selection.getRng()).map(function(q){var Z=F.dom.add(F.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},q.cloneContents()),ht=f(Z.innerText);return F.dom.remove(Z),ht}).getOr("");l.getInner=!0;var c,h,m,M,k,P,N,F,W=(h=l,M=(c=r).selection.getRng(),k=c.dom.create("body"),P=c.selection.getSel(),N=c1(c,Kx(P)),(m=h.contextual?function(r,l){var c,h,m=Cr(l,r);return 0<m.length?function(r,l){return(c=r,h=l[0],Hc(h,"table",Ve(jr,c))).bind(function(m){var M=l[0],k=l[l.length-1],P=function(r){var l=h1(Ms(r),0,[]);return Ke(Ho(r,"tr"),function(c,h){Ke(Ho(c,"td,th"),function(m,M){!function(k,P,N,F,W){for(var q=g1(W,"rowspan"),Z=g1(W,"colspan"),ht=k.rows(),at=N;at<N+q;at++){ht[at]||(ht[at]=f1(yd(F),[]));for(var gt=P;gt<P+Z;gt++)ht[at].cells()[gt]=at===N&&gt===P?W:Ms(W)}}(l,function(k,P,N){for(;F=P,W=N,q=void 0,((q=k.rows())[W]?q[W].cells():[])[F];)P++;var F,W,q;return P}(l,M,h),h,c,m)})}),h1(l.element(),p1(l.rows()),l.rows())}(m);return function(r,l,c){return Ky(r,l).bind(function(h){return Ky(r,c).map(function(m){return M=r,P=m,N=(k=h).x(),F=k.y(),W=P.x(),Z=F<(q=P.y())?im(M,N,F,W,q):im(M,N,q,W,F),h1(M.element(),p1(Z),Z);var M,k,P,N,F,W,q,Z})})}(P,M,k).map(function(N){return d1([mS(N)])})}).getOrThunk(Jy);var c,h}(r,m):(c=r,0<(h=l).length&&h[0].collapsed?Jy():RM(c,h[0]))}(Ce_fromDom(c.getBody()),N).dom():M.cloneContents())&&k.appendChild(m),c.selection.serializer.serialize(k,h));return"tree"===l.format?W:(l.content=r.selection.isCollapsed()?"":W,r.fire("GetContent",l),l.content)},Pd=function(r,l,c,h,m){var k=c?l.startOffset:l.endOffset;return kt.from(c?l.startContainer:l.endContainer).map(Ce_fromDom).map(function(P){return h&&l.collapsed?P:hc(P,m(P,k)).getOr(P)}).bind(function(P){return es(P)?kt.some(P):ul(P)}).map(function(P){return P.dom()}).getOr(r)},bS=function(r,l,c){return Pd(r,l,!0,c,function(h,m){return Math.min(h.dom().childNodes.length,m)})},_S=function(r,l,c){return Pd(r,l,!1,c,function(h,m){return 0<m?m-1:m})},wS=function(r,l){for(var c=r;r&&Lt.isText(r)&&0===r.length;)r=l?r.nextSibling:r.previousSibling;return r||c},Bv=ge.each,SS=function(r){return!!r.select},tx=function(r){return!(!r||!r.ownerDocument)&&xs(Ce_fromDom(r.ownerDocument),Ce_fromDom(r))},CS=function(r,l,c,h){var m,M,k,P,N,F=function(rt,dt){return function(r,l,c){var h,m,M,k,P=(h=l,vc(vc({format:"html"},c),{set:!0,selection:!0,content:h})),N=r.selection.getRng(),F=r.getDoc();if(P.no_events||!(P=r.fire("BeforeSetContent",P)).isDefaultPrevented()){if(l=function(q,Z){if("raw"!==Z.format){var ht=q.parser.parse(Z.content,vc({isRootContent:!0,forced_root_block:!1},Z));return ah({validate:q.validate},q.schema).serialize(ht)}return Z.content}(r,P),N.insertNode){l+='<span id="__caret">_</span>',N.startContainer===F&&N.endContainer===F?F.body.innerHTML=l:(N.deleteContents(),0===F.body.childNodes.length?F.body.innerHTML=l:N.createContextualFragment?N.insertNode(N.createContextualFragment(l)):(M=F.createDocumentFragment(),k=F.createElement("div"),M.appendChild(k),k.outerHTML=l,N.insertNode(M))),m=r.dom.get("__caret"),(N=F.createRange()).setStartBefore(m),N.setEndBefore(m),r.selection.setRng(N),r.dom.remove("__caret");try{r.selection.setRng(N)}catch(q){}}else{var W=N;W.item&&(F.execCommand("Delete",!1,null),W=r.selection.getRng()),/^\s+/.test(l)?(W.pasteHTML('<span id="__mce_tmp">_</span>'+l),r.dom.remove("__mce_tmp")):W.pasteHTML(l)}P.no_events||r.fire("SetContent",P)}else r.fire("SetContent",P)}(h,rt,dt)},W=function(rt){var dt=Z();dt.collapse(!!rt),ht(dt)},q=function(){return l.getSelection?l.getSelection():l.document.selection},Z=function(){var rt,dt,mt,Dt,Pt=function(Ht,ce,Xt){try{return ce.compareBoundaryPoints(Ht,Xt)}catch(xe){return-1}};if(!l||null==(Dt=l.document))return null;if(void 0!==h.bookmark&&!1===Rg(h)){var wt=Ig(h);if(wt.isSome())return wt.map(function(Ht){return c1(h,[Ht])[0]}).getOr(Dt.createRange())}try{(rt=q())&&!Lt.isRestrictedNode(rt.anchorNode)&&(dt=0<rt.rangeCount?rt.getRangeAt(0):rt.createRange?rt.createRange():Dt.createRange())}catch(Ht){}return(dt=c1(h,[dt])[0])||(dt=Dt.createRange?Dt.createRange():Dt.body.createTextRange()),dt.setStart&&9===dt.startContainer.nodeType&&dt.collapsed&&(mt=r.getRoot(),dt.setStart(mt,0),dt.setEnd(mt,0)),k&&P&&(0===Pt(dt.START_TO_START,dt,k)&&0===Pt(dt.END_TO_END,dt,k)?dt=P:P=k=null),dt},ht=function(rt,dt){var mt,Dt;if((Pt=rt)&&(SS(Pt)||tx(Pt.startContainer)&&tx(Pt.endContainer))){var Pt,wt=SS(rt)?rt:null;if(wt){P=null;try{wt.select()}catch(Ht){}}else{if(mt=q(),rt=h.fire("SetSelectionRange",{range:rt,forward:dt}).range,mt){P=rt;try{mt.removeAllRanges(),mt.addRange(rt)}catch(Ht){}!1===dt&&mt.extend&&(mt.collapse(rt.endContainer,rt.endOffset),mt.extend(rt.startContainer,rt.startOffset)),k=0<mt.rangeCount?mt.getRangeAt(0):null}rt.collapsed||rt.startContainer!==rt.endContainer||!mt.setBaseAndExtent||sn.ie||rt.endOffset-rt.startOffset<2&&rt.startContainer.hasChildNodes()&&(Dt=rt.startContainer.childNodes[rt.startOffset])&&"IMG"===Dt.tagName&&(mt.setBaseAndExtent(rt.startContainer,rt.startOffset,rt.endContainer,rt.endOffset),mt.anchorNode===rt.startContainer&&mt.focusNode===rt.endContainer||mt.setBaseAndExtent(Dt,0,Dt,1)),h.fire("AfterSetSelectionRange",{range:rt,forward:dt})}}},at=function(){var rt,dt,mt=q();return!(mt&&mt.anchorNode&&mt.focusNode)||((rt=r.createRng()).setStart(mt.anchorNode,mt.anchorOffset),rt.collapse(!0),(dt=r.createRng()).setStart(mt.focusNode,mt.focusOffset),dt.collapse(!0),rt.compareBoundaryPoints(rt.START_TO_START,dt)<=0)},gt={bookmarkManager:null,controlSelection:null,dom:r,win:l,serializer:c,editor:h,collapse:W,setCursorLocation:function(rt,dt){var mt=r.createRng();rt?(mt.setStart(rt,dt),mt.setEnd(rt,dt),ht(mt),W(!1)):(Iy(r,mt,h.getBody(),!0),ht(mt))},getContent:function(rt){return yS(h,rt)},setContent:F,getBookmark:function(rt,dt){return m.getBookmark(rt,dt)},moveToBookmark:function(rt){return m.moveToBookmark(rt)},select:function(rt,dt){var mt,Dt,Pt;return(mt=r,Dt=rt,Pt=dt,kt.from(Dt).map(function(wt){var Ht=mt.nodeIndex(wt),ce=mt.createRng();return ce.setStart(wt.parentNode,Ht),ce.setEnd(wt.parentNode,Ht+1),Pt&&(Iy(mt,ce,wt,!0),Iy(mt,ce,wt,!1)),ce})).each(ht),rt},isCollapsed:function(){var rt=Z(),dt=q();return!(!rt||rt.item)&&(rt.compareEndPoints?0===rt.compareEndPoints("StartToEnd",rt):!dt||rt.collapsed)},isForward:at,setNode:function(rt){return F(r.getOuterHTML(rt)),rt},getNode:function(){return rt=h.getBody(),(dt=Z())?(Dt=dt.startContainer,Pt=dt.endContainer,wt=dt.startOffset,Ht=dt.endOffset,mt=dt.commonAncestorContainer,!dt.collapsed&&(Dt===Pt&&Ht-wt<2&&Dt.hasChildNodes()&&(mt=Dt.childNodes[wt]),3===Dt.nodeType&&3===Pt.nodeType&&(Dt=Dt.length===wt?wS(Dt.nextSibling,!0):Dt.parentNode,Pt=0===Ht?wS(Pt.previousSibling,!1):Pt.parentNode,Dt&&Dt===Pt))?Dt:mt&&3===mt.nodeType?mt.parentNode:mt):rt;var rt,dt,mt,Dt,Pt,wt,Ht},getSel:q,setRng:ht,getRng:Z,getStart:function(rt){return bS(h.getBody(),Z(),rt)},getEnd:function(rt){return _S(h.getBody(),Z(),rt)},getSelectedBlocks:function(rt,dt){return function(mt,Dt,Pt,wt){var Ht,ce,Xt=[];if(ce=mt.getRoot(),Pt=mt.getParent(Pt||bS(ce,Dt,Dt.collapsed),mt.isBlock),wt=mt.getParent(wt||_S(ce,Dt,Dt.collapsed),mt.isBlock),Pt&&Pt!==ce&&Xt.push(Pt),Pt&&wt&&Pt!==wt)for(var xe=new Zi(Ht=Pt,ce);(Ht=xe.next())&&Ht!==wt;)mt.isBlock(Ht)&&Xt.push(Ht);return wt&&Pt!==wt&&wt!==ce&&Xt.push(wt),Xt}(r,Z(),rt,dt)},normalize:function(){var rt=Z();if(!function(r){return 1<K0(r).length}(q())&&Wl(h)){var mt=zp(r,rt);return mt.each(function(Dt){ht(Dt,at())}),mt.getOr(rt)}return rt},selectorChanged:function(rt,dt){var mt;return N||(N={},mt={},h.on("NodeChange",function(Dt){var Pt=Dt.element,wt=r.getParents(Pt,null,r.getRoot()),Ht={};Bv(N,function(ce,Xt){Bv(wt,function(xe){if(r.is(xe,Xt))return mt[Xt]||(Bv(ce,function(te){te(!0,{node:xe,selector:Xt,parents:wt})}),mt[Xt]=ce),Ht[Xt]=ce,!1})}),Bv(mt,function(ce,Xt){Ht[Xt]||(delete mt[Xt],Bv(ce,function(xe){xe(!1,{node:Pt,selector:Xt,parents:wt})}))})})),N[rt]||(N[rt]=[]),N[rt].push(dt),gt},getScrollContainer:function(){for(var rt,dt=r.getRoot();dt&&"BODY"!==dt.nodeName;){if(dt.scrollHeight>dt.clientHeight){rt=dt;break}dt=dt.parentNode}return rt},scrollIntoView:function(rt,dt){return function(r,l,c){var h,m,M,k,P,N=r.dom,F=N.getRoot(),W=0;if(r.fire("scrollIntoView",P={elm:l,alignToTop:c}),!P.isDefaultPrevented()&&Lt.isElement(l)){if(!1===c&&(W=l.offsetHeight),"BODY"!==F.nodeName){var q=r.selection.getScrollContainer();if(q)return h=ow(l).y-ow(q).y+W,k=q.clientHeight,void((h<(M=q.scrollTop)||M+k<h+25)&&(q.scrollTop=h<M?h:h-k+25))}m=N.getViewPort(r.getWin()),h=N.getPos(l).y+W,M=m.y,k=m.h,(h<m.y||M+k<h+25)&&r.getWin().scrollTo(0,h<M?h:h-k+25)}}(h,rt,dt)},placeCaretAt:function(rt,dt){return ht(Lv(rt,dt,h.getDoc()))},getBoundingClientRect:function(){var rt=Z();return rt.collapsed?Ye.fromRangeStart(rt).getClientRects()[0]:rt.getBoundingClientRect()},destroy:function(){l=k=P=null,M.destroy()}};return m=hS(gt),M=nm(gt,h),gt.bookmarkManager=m,gt.controlSelection=M,gt};(Hf=jl||(jl={}))[Hf.Br=0]="Br",Hf[Hf.Block=1]="Block",Hf[Hf.Wrap=2]="Wrap",Hf[Hf.Eol=3]="Eol";var ex=function(r,l){return r===Ts.Backwards?l.reverse():l},x1=function(r,l,c,h){for(var m,k,P,N,F,W=hu(c),q=h,Z=[];q&&(N=W,F=q,m=l===Ts.Forwards?N.next(F):N.prev(F));){if(Lt.isBr(m.getNode(!1)))return l===Ts.Forwards?{positions:ex(l,Z).concat([m]),breakType:jl.Br,breakAt:kt.some(m)}:{positions:ex(l,Z),breakType:jl.Br,breakAt:kt.some(m)};if(m.isVisible()){if(r(q,m)){var ht=(k=q,Lt.isBr((P=m).getNode(l===Ts.Forwards))?jl.Br:!1===Hu(k,P)?jl.Block:jl.Wrap);return{positions:ex(l,Z),breakType:ht,breakAt:kt.some(m)}}Z.push(m),q=m}else q=m}return{positions:ex(l,Z),breakType:jl.Eol,breakAt:kt.none()}},nx=function(r,l,c,h){return l(c,h).breakAt.map(function(m){var M=l(c,m).positions;return r===Ts.Backwards?M.concat(m):[m].concat(M)}).getOr([])},Fg=function(r,l){return Ei(r,function(c,h){return c.fold(function(){return kt.some(h)},function(m){return Jr(pe(m.getClientRects()),pe(h.getClientRects()),function(M,k){var P=Math.abs(l-M.left);return Math.abs(l-k.left)<=P?h:m}).or(c)})},kt.none())},b1=function(r,l){return pe(l.getClientRects()).bind(function(c){return Fg(r,c.left)})},Vf=Ve(x1,Mo.isAbove,-1),Nr=Ve(x1,Mo.isBelow,1),zv=Ve(nx,-1,Vf),_1=Ve(nx,1,Nr),Fv=Lt.isContentEditableFalse,w1=nr,Wf=function(r,l,c){var h,m,M,k,P=hu(r.getBody()),N=Ve(ln,P.next),F=Ve(ln,P.prev);if(c.collapsed&&r.settings.forced_root_block){if(!(h=r.dom.getParent(c.startContainer,"PRE")))return;(1===l?N(Ye.fromRangeStart(c)):F(Ye.fromRangeStart(c)))||(k=(M=r).dom.create(La(M)),(!sn.ie||11<=sn.ie)&&(k.innerHTML='<br data-mce-bogus="1">'),m=k,1===l?r.$(h).after(m):r.$(h).before(m),r.selection.select(m,!0),r.selection.collapse())}},ox=function(r,l){return function(){var c,h,m,M,k,P,N,F,W,q=(h=l,M=hu((c=r).getBody()),k=Ve(ln,M.next),P=Ve(ln,M.prev),N=h?Ts.Forwards:Ts.Backwards,F=h?k:P,W=c.selection.getRng(),(m=function(r,l,c,h){var m=r===Ts.Forwards,M=m?Sf:Md;if(!h.collapsed){var k=w1(h);if(Fv(k))return Ku(r,l,k,r===Ts.Backwards,!0)}var P=A(h.startContainer),N=gp(r,l.getBody(),h);if(M(N))return lb(l,N.getNode(!m));var F=jn.normalizePosition(m,c(N));if(!F)return P?h:null;if(M(F))return Ku(r,l,F.getNode(!m),m,!0);var W=c(F);return W&&M(W)&&ga(F,W)?Ku(r,l,W.getNode(!m),m,!0):P?Wh(l,F.toRange(),!0):null}(N,c,F,W))?m:(m=Wf(c,N,W))||null);return!!q&&(Af(r,q),!0)}},ax=function(r,l){return function(){var c,h,m,M,k,P,N=(M=(h=l)?1:-1,k=h?Rw:Nw,P=(c=r).selection.getRng(),(m=function(r,l,c,h){var m,M,k,P,N,F,W,q,Z;if(Z=w1(h),m=gp(r,l.getBody(),h),M=c(l.getBody(),Ob(1),m),k=Vn(M,Lf(1)),N=wr.last(m.getClientRects()),(Sf(m)||Yc(m))&&(Z=m.getNode()),(Md(m)||F_(m))&&(Z=m.getNode(!0)),!N)return null;if((P=Of(k,F=N.left))&&Fv(P.node))return W=Math.abs(F-P.left),q=Math.abs(F-P.right),Ku(r,l,P.node,W<q,!0);if(Z){var ht=function(at,gt,rt,dt){var mt,Dt,Pt,wt,Ht,ce,Xt=hu(gt),xe=[],te=0,Ee=function(be){return wr.last(be.getClientRects())};1===at?(mt=Xt.next,Dt=Tn,Pt=oi,wt=Ye.after(dt)):(mt=Xt.prev,Dt=oi,Pt=Tn,wt=Ye.before(dt)),ce=Ee(wt);do{if(wt.isVisible()&&!Pt(Ht=Ee(wt),ce)){if(0<xe.length&&Dt(Ht,wr.last(xe))&&te++,(Ht=un(Ht)).position=wt,Ht.line=te,rt(Ht))return xe;xe.push(Ht)}}while(wt=mt(wt));return xe}(r,l.getBody(),Ob(1),Z);if((P=Of(Vn(ht,Lf(1)),F))||(P=wr.last(Vn(ht,Lf(0)))))return Wh(l,P.position.toRange(),!0)}}(M,c,k,P))?m:(m=Wf(c,M,P))||null);return!!N&&(Af(r,N),!0)}},S1=function(r,l){return function(){var c,h=l?Ye.fromRangeEnd(r.selection.getRng()):Ye.fromRangeStart(r.selection.getRng()),m=l?Nr(r.getBody(),h):Vf(r.getBody(),h);return(l?ee(m.positions):pe(m.positions)).filter((c=l,function(M){return c?Md(M):Sf(M)})).fold(Oe(!1),function(M){return r.selection.setRng(M.toRange()),!0})}},MS=function(r,l,c,h,m){var M,k,P,N,F=Ho(Ce_fromDom(c),"td,th,caption").map(function(q){return q.dom()});return(k=Vn((M=r,Mr(F,function(q){var Z,at={left:(Z=un(q.getBoundingClientRect())).left- -1,top:Z.top- -1,right:Z.right+-2,bottom:Z.bottom+-2,width:Z.width+-1,height:Z.height+-1};return[{x:at.left,y:M(at),cell:q},{x:at.right,y:M(at),cell:q}]})),function(q){return l(q,m)}),P=h,N=m,Ei(k,function(q,Z){return q.fold(function(){return kt.some(Z)},function(ht){var at=Math.sqrt(Math.abs(ht.x-P)+Math.abs(ht.y-N)),gt=Math.sqrt(Math.abs(Z.x-P)+Math.abs(Z.y-N));return kt.some(gt<at?Z:ht)})},kt.none())).map(function(q){return q.cell})},sx=Ve(MS,function(r){return r.bottom},function(r,l){return r.y<l}),LM=Ve(MS,function(r){return r.top},function(r,l){return r.y>l}),TS=function(r,l,c){var h,m,M,k,P=r(l,c);return(k=P).breakType===jl.Wrap&&0===k.positions.length||!Lt.isBr(c.getNode())&&(M=P).breakType===jl.Br&&1===M.positions.length?(h=r,m=l,!P.breakAt.map(function(N){return h(m,N).breakAt.isSome()}).getOr(!1)):P.breakAt.isNone()},DS=Ve(TS,Vf),C1=Ve(TS,Nr),AS=function(r,l,c){var h=function(r,l){var c=l.getNode(r);return Lt.isElement(c)&&"TABLE"===c.nodeName?kt.some(c):kt.none()}(!!l,c),m=!1===l;h.fold(function(){return Af(r,c.toRange())},function(M){return mi.positionIn(m,r.getBody()).filter(function(k){return k.isEqual(c)}).fold(function(){return Af(r,c.toRange())},function(k){return P=l,F=M,W=c,void((q=La(N=r))?N.undoManager.transact(function(){var Z=Ce_fromTag(q);ns(Z,wc(N)),da(Z,Ce_fromTag("br")),P?Zr(Ce_fromDom(F),Z):$r(Ce_fromDom(F),Z);var ht=N.dom.createRng();ht.setStart(Z.dom(),0),ht.setEnd(Z.dom(),0),Af(N,ht)}):Af(N,W.toRange()));var P,N,F,W,q})})},Vv=function(r,l){return function(){return kt.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(function(c){return kt.from(r.dom.getParent(c,"table")).map(function(h){return function(r,l,c,h){var m,k,P,N=r.selection.getRng(),F=l?1:-1;if(Qd()&&(m=l,k=c,P=Ye.fromRangeStart(N),mi.positionIn(!m,k).map(function(q){return q.isEqual(P)}).getOr(!1))){var W=Ku(F,r,c,!l,!0);return Af(r,W),!0}return!1}(r,l,h)})}).getOr(!1)}},T1=function(r,l){return function(){return kt.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(function(c){return kt.from(r.dom.getParent(c,"table")).map(function(h){return function(r,l,c,h){var m,M,k,P,N,F,W=r.selection.getRng(),q=Ye.fromRangeStart(W),Z=r.getBody();if(!l&&DS(h,q)){var ht=(P=Z,function(r,l){return pe(l.getClientRects()).bind(function(c){return sx(r,c.left,c.top)}).bind(function(c){return b1(mi.lastPositionIn(h=c).map(function(m){return Vf(h,m).positions.concat(m)}).getOr([]),l);var h})}(N=c,F=q).orThunk(function(){return pe(F.getClientRects()).bind(function(at){return Fg(zv(P,Ye.before(N)),at.left)})}).getOr(Ye.before(N)));return AS(r,l,ht),!0}return!(!l||!C1(h,q)||(m=Z,ht=function(r,l){return ee(l.getClientRects()).bind(function(c){return LM(r,c.left,c.top)}).bind(function(c){return b1(mi.firstPositionIn(h=c).map(function(m){return[m].concat(Nr(h,m).positions)}).getOr([]),l);var h})}(M=c,k=q).orThunk(function(){return pe(k.getClientRects()).bind(function(at){return Fg(_1(m,Ye.after(M)),at.left)})}).getOr(Ye.after(M)),AS(r,l,ht),0))}(r,l,h,c)})}).getOr(!1)}},D1=function(r){return br(["figcaption"],la(r))},A1=function(r){var l=Rt.document.createRange();return l.setStartBefore(r.dom()),l.setEndBefore(r.dom()),l},kS=function(r,l,c){c?da(r,l):gl(r,l)},IS=function(r,l){return function(){return!!r.selection.isCollapsed()&&function(r,l){var c,h,m,M=Ce_fromDom(r.getBody()),k=Ye.fromRangeStart(r.selection.getRng()),P=La(r),N=wc(r);return(c=k,h=M,m=Ve(jr,h),mc(Ce_fromDom(c.container()),Hs,m).filter(D1)).exists(function(){if(function(r,l,c){return l?(m=r.dom(),Nr(m,c).breakAt.isNone()):(h=r.dom(),Vf(h,c).breakAt.isNone());var h,m}(M,l,k)){var F=function(r,l,c,h){return""===l?(W=r,q=h,Z=Ce_fromTag("br"),kS(W,Z,q),A1(Z)):(m=r,M=h,P=c,N=Ce_fromTag(l),F=Ce_fromTag("br"),ns(N,P),da(N,F),kS(m,N,M),A1(F));var m,M,P,N,F,W,q,Z}(M,P,N,l);return r.selection.setRng(F),!0}return!1})}(r,l)}},Zs=function(r){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];var h=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,h)}},rm=function(r,l){return Zn(function(r,l){return Mr(_i(r,function(c){return Zp({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:pi},c)}),function(c){return(m=l).keyCode===(h=c).keyCode&&m.shiftKey===h.shiftKey&&m.altKey===h.altKey&&m.ctrlKey===h.ctrlKey&&m.metaKey===h.metaKey?[c]:[];var h,m})}(r,l),function(c){return c.action()})},mu=function(r){return kt.from(r.dom.getParent(r.selection.getStart(!0),r.dom.isBlock))},vu=function(r,l){var c,h,m,M=l,k=r.dom,P=r.schema.getMoveCaretBeforeOnEnterElements();if(l){if(/^(LI|DT|DD)$/.test(l.nodeName)){var N=function(F){for(;F;){if(1===F.nodeType||3===F.nodeType&&F.data&&/[\r\n\s]/.test(F.data))return F;F=F.nextSibling}}(l.firstChild);N&&/^(UL|OL|DL)$/.test(N.nodeName)&&l.insertBefore(k.doc.createTextNode("\xa0"),l.firstChild)}if(m=k.createRng(),l.normalize(),l.hasChildNodes()){for(c=new Zi(l,l);h=c.current();){if(Lt.isText(h)){m.setStart(h,0),m.setEnd(h,0);break}if(P[h.nodeName.toLowerCase()]){m.setStartBefore(h),m.setEndBefore(h);break}M=h,h=c.next()}h||(m.setStart(M,0),m.setEnd(M,0))}else Lt.isBr(l)?l.nextSibling&&k.isBlock(l.nextSibling)?(m.setStartBefore(l),m.setEndBefore(l)):(m.setStartAfter(l),m.setEndAfter(l)):(m.setStart(l,0),m.setEnd(l,0));r.selection.setRng(m),k.remove(void 0),r.selection.scrollIntoView(l)}},PS=mu,Gv=function(r,l){return r&&r.parentNode&&r.parentNode.nodeName===l},I1=function(r){return r&&/^(OL|UL|LI)$/.test(r.nodeName)},jf=function(r){var l=r.parentNode;return/^(LI|DT|DD)$/.test(l.nodeName)?l:r},Uv=function(r,l,c){for(var h=r[c?"firstChild":"lastChild"];h&&!Lt.isElement(h);)h=h[c?"nextSibling":"previousSibling"];return h===l},P1=function(r){r.innerHTML='<br data-mce-bogus="1">'},qv=function(r,l){return r.nodeName===l||r.previousSibling&&r.previousSibling.nodeName===l},lx=function(r,l){return l&&r.isBlock(l)&&!/^(TD|TH|CAPTION|FORM)$/.test(l.nodeName)&&!/^(fixed|absolute)/i.test(l.style.position)&&"true"!==r.getContentEditable(l)},Hg=function(r,l,c){return!1===Lt.isText(l)?c:r?1===c&&l.data.charAt(c-1)===_?0:c:c===l.data.length-1&&l.data.charAt(c)===_?l.data.length:c},E1=function(r,l){var c,h,m=r.getRoot();for(c=l;c!==m&&"false"!==r.getContentEditable(c);)"true"===r.getContentEditable(c)&&(h=c),c=c.parentNode;return c!==m?h:m},Vg=function(r,l){var c=La(r);c&&c.toLowerCase()===l.tagName.toLowerCase()&&function(r,l,c){kt.from(c.style).map(r.dom.parseStyle).each(function(P){var N=function(W){var q={},Z=W.dom();if(zs(Z))for(var ht=0;ht<Z.style.length;ht++){var at=Z.style.item(ht);q[at]=Z.style[at]}return q}(Ce_fromDom(l)),F=vc(vc({},N),P);r.dom.setStyles(l,F)});var h=kt.from(c.class).map(function(P){return P.split(/\s+/)}),m=kt.from(l.className).map(function(P){return Vn(P.split(/\s+/),function(N){return""!==N})});Jr(h,m,function(P,N){var F=Vn(N,function(q){return!br(P,q)}),W=function(){for(var q=0,Z=0,ht=arguments.length;Z<ht;Z++)q+=arguments[Z].length;var at=Array(q),gt=0;for(Z=0;Z<ht;Z++)for(var rt=arguments[Z],dt=0,mt=rt.length;dt<mt;dt++,gt++)at[gt]=rt[dt];return at}(P,F);r.dom.setAttrib(l,"class",W.join(" "))});var M=["style","class"],k=ud(c,function(P,N){return!br(M,N)}).t;r.dom.setAttribs(l,k)}(r,l,wc(r))},ux=function(r,l){return PS(r).filter(function(c){return 0<l.length&&Ru(Ce_fromDom(c),l)}).isSome()},Gl=Ta([{br:[]},{block:[]},{none:[]}]),Yv=function(r,l){return function(r){return ux(r,function(r){return r.getParam("no_newline_selector","")}(r))}(r)},ph=function(r){return function(l,c){return""===La(l)===r}},Xv=function(r){return function(l,c){return function(r){return mu(r).filter(function(l){return U(Ce_fromDom(l))}).isSome()}(l)===r}},Gf=function(r,l){return function(c,h){return function(r){return mu(r).fold(Oe(""),function(l){return l.nodeName.toUpperCase()})}(c)===r.toUpperCase()===l}},$v=function(r){return Gf("pre",r)},Zv=function(r){return function(l,c){return function(r){return r.getParam("br_in_pre",!0)}(l)===r}},R1=function(r,l){return function(r){return ux(r,function(r){return r.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(r))}(r)},Zh=function(r,l){return l},am=function(r){var l=La(r),c=function(r,l){var c,h,m=r.getRoot();for(c=l;c!==m&&"false"!==r.getContentEditable(c);)"true"===r.getContentEditable(c)&&(h=c),c=c.parentNode;return c!==m?h:m}(r.dom,r.selection.getStart());return c&&r.schema.isValidChild(c.nodeName,l||"P")},yu=function(r,l){return function(c,h){return Ei(r,function(m,M){return m&&M(c,h)},!0)?kt.some(l):kt.none()}},O1=function(r,l){(function(r,l){return Y_([yu([Yv],Gl.none()),yu([Gf("summary",!0)],Gl.br()),yu([$v(!0),Zv(!1),Zh],Gl.br()),yu([$v(!0),Zv(!1)],Gl.block()),yu([$v(!0),Zv(!0),Zh],Gl.block()),yu([$v(!0),Zv(!0)],Gl.br()),yu([Xv(!0),Zh],Gl.br()),yu([Xv(!0)],Gl.block()),yu([ph(!0),Zh,am],Gl.block()),yu([ph(!0)],Gl.br()),yu([R1],Gl.br()),yu([ph(!1),Zh],Gl.br()),yu([am],Gl.block())],[r,l.shiftKey]).getOr(Gl.none())})(r,l).fold(function(){gb(r,l)},function(){!function(r,l){var c,h,m,M,k,P,N,F,W,q,Z,ht,at,gt,rt,dt,Dt,Pt,wt=r.dom,Ht=r.schema,ce=Ht.getNonEmptyElements(),Xt=r.selection.getRng(),xe=function(be){var Ne,Cn,Ae,Be=m,Pn=Ht.getTextInlineElements();if(Ae=Ne=be||"TABLE"===q||"HR"===q?wt.create(be||ht):k.cloneNode(!1),!1===function(r){return r.getParam("keep_styles",!0)}(r))wt.setAttrib(Ne,"style",null),wt.setAttrib(Ne,"class",null);else do{if(Pn[Be.nodeName]){if(Er(Be)||Hl(Be))continue;Cn=Be.cloneNode(!1),wt.setAttrib(Cn,"id",""),Ne.hasChildNodes()?Cn.appendChild(Ne.firstChild):Ae=Cn,Ne.appendChild(Cn)}}while((Be=Be.parentNode)&&Be!==h);return Vg(r,Ne),P1(Ae),Ne},te=function(be){var Ne,Cn,Ae,Be;if(Be=Hg(be,m,M),Lt.isText(m)&&(be?0<Be:Be<m.nodeValue.length))return!1;if(m.parentNode===k&&at&&!be||be&&Lt.isElement(m)&&m===k.firstChild)return!0;if(qv(m,"TABLE")||qv(m,"HR"))return at&&!be||!at&&be;for(Ne=new Zi(m,k),Lt.isText(m)&&(be&&0===Be?Ne.prev():be||Be!==m.nodeValue.length||Ne.next());Cn=Ne.current();){if(Lt.isElement(Cn)){if(!Cn.getAttribute("data-mce-bogus")&&(Ae=Cn.nodeName.toLowerCase(),ce[Ae]&&"br"!==Ae))return!1}else if(Lt.isText(Cn)&&!/^[ \t\r\n]*$/.test(Cn.nodeValue))return!1;be?Ne.prev():Ne.next()}return!0},Ee=function(){N=/^(H[1-6]|PRE|FIGURE)$/.test(q)&&"HGROUP"!==Z?xe(ht):xe(),function(r){return r.getParam("end_container_on_empty_block",!1)}(r)&&lx(wt,W)&&wt.isEmpty(k)?N=wt.split(W,k):wt.insertAfter(N,k),vu(r,N)};zp(wt,Xt).each(function(be){Xt.setStart(be.startContainer,be.startOffset),Xt.setEnd(be.endContainer,be.endOffset)}),m=Xt.startContainer,M=Xt.startOffset,ht=La(r),P=l.shiftKey,Lt.isElement(m)&&m.hasChildNodes()&&(at=M>m.childNodes.length-1,m=m.childNodes[Math.min(M,m.childNodes.length-1)]||m,M=at&&Lt.isText(m)?m.nodeValue.length:0),(h=E1(wt,m))&&((ht&&!P||!ht&&P)&&(m=function(be,Ne,Cn,Ae,Be){var Pn,an,ke,Ze,Hn,Yn,Wn,dn=Ne||"P",Xn=be.dom,zt=E1(Xn,Ae);if(!(an=Xn.getParent(Ae,Xn.isBlock))||!lx(Xn,an)){if(Yn=(an=an||zt)===be.getBody()||(Wn=an)&&/^(TD|TH|CAPTION)$/.test(Wn.nodeName)?an.nodeName.toLowerCase():an.parentNode.nodeName.toLowerCase(),!an.hasChildNodes())return Pn=Xn.create(dn),Vg(be,Pn),an.appendChild(Pn),Cn.setStart(Pn,0),Cn.setEnd(Pn,0),Pn;for(Ze=Ae;Ze.parentNode!==an;)Ze=Ze.parentNode;for(;Ze&&!Xn.isBlock(Ze);)Ze=(ke=Ze).previousSibling;if(ke&&be.schema.isValidChild(Yn,dn.toLowerCase())){for(Pn=Xn.create(dn),Vg(be,Pn),ke.parentNode.insertBefore(Pn,ke),Ze=ke;Ze&&!Xn.isBlock(Ze);)Hn=Ze.nextSibling,Pn.appendChild(Ze),Ze=Hn;Cn.setStart(Ae,Be),Cn.setEnd(Ae,Be)}}return Ae}(r,ht,Xt,m,M)),k=wt.getParent(m,wt.isBlock),W=k?wt.getParent(k.parentNode,wt.isBlock):null,q=k?k.nodeName.toUpperCase():"","LI"!==(Z=W?W.nodeName.toUpperCase():"")||l.ctrlKey||(W=(k=W).parentNode,q=Z),/^(LI|DT|DD)$/.test(q)&&wt.isEmpty(k)?function(r,l,c,h,m){var M=r.dom,k=r.selection.getRng();if(c!==r.getBody()){var P;I1(P=c)&&I1(P.parentNode)&&(m="LI");var N,W=m?l(m):M.create("BR");if(Uv(c,h,!0)&&Uv(c,h,!1))Gv(c,"LI")?M.insertAfter(W,jf(c)):M.replace(W,c);else if(Uv(c,h,!0))Gv(c,"LI")?(M.insertAfter(W,jf(c)),W.appendChild(M.doc.createTextNode(" ")),W.appendChild(c)):c.parentNode.insertBefore(W,c);else if(Uv(c,h,!1))M.insertAfter(W,jf(c));else{c=jf(c);var q=k.cloneRange();q.setStartAfter(h),q.setEndAfter(c);var Z=q.extractContents();"LI"===m&&(N=Z).firstChild&&"LI"===N.firstChild.nodeName?(W=Z.firstChild,M.insertAfter(Z,c)):(M.insertAfter(Z,c),M.insertAfter(W,c))}M.remove(h),vu(r,W)}}(r,xe,W,k,ht):ht&&k===r.getBody()||(ht=ht||"P",A(k)?(N=bt(k),wt.isEmpty(k)&&P1(k),Vg(r,N),vu(r,N)):te()?Ee():te(!0)?(N=k.parentNode.insertBefore(xe(),k),vu(r,qv(k,"HR")?N:k)):((c=(Dt=Xt,Pt=Dt.cloneRange(),Pt.setStart(Dt.startContainer,Hg(!0,Dt.startContainer,Dt.startOffset)),Pt.setEnd(Dt.endContainer,Hg(!1,Dt.endContainer,Dt.endOffset)),Pt).cloneRange()).setEndAfter(k),F=c.extractContents(),Ke(Cs(Ce_fromDom(F),Il),function(be){var Ne=be.dom();Ne.nodeValue=f(Ne.nodeValue)}),function(be){for(;Lt.isText(be)&&(be.nodeValue=be.nodeValue.replace(/^[\r\n]+/,"")),be=be.firstChild;);}(F),N=F.firstChild,wt.insertAfter(F,k),function(be,Ne,Cn){var Ae,Be=Cn,Pn=[];if(Be){for(;Be=Be.firstChild;){if(be.isBlock(Be))return;Lt.isElement(Be)&&!Ne[Be.nodeName.toLowerCase()]&&Pn.push(Be)}for(Ae=Pn.length;Ae--;)(!(Be=Pn[Ae]).hasChildNodes()||Be.firstChild===Be.lastChild&&""===Be.firstChild.nodeValue||(ke=Be)&&"A"===ke.nodeName&&be.isEmpty(ke))&&be.remove(Be);var ke}}(wt,ce,N),gt=wt,(rt=k).normalize(),(dt=rt.lastChild)&&!/^(left|right)$/gi.test(gt.getStyle(dt,"float",!0))||gt.add(rt,"br"),wt.isEmpty(k)&&P1(k),N.normalize(),wt.isEmpty(N)?(wt.remove(N),Ee()):(Vg(r,N),vu(r,N))),wt.setAttrib(N,"id",""),r.fire("NewBlock",{newBlock:N})))}(r,l)},pi)},cx=function(r,l){var c=l.container(),h=l.offset();return Lt.isText(c)?(c.insertData(h,r),kt.some(Mo(c,h+r.length))):no(l).map(function(m){var M=Ce_fromText(r);return l.isAtEnd()?Zr(m,M):$r(m,M),Mo(M.dom(),r.length)})},LS=Ve(cx,"\xa0"),OS=Ve(cx," "),Kv=function(r,l,c){return mi.navigateIgnore(r,l,c,ZC)},Wg=function(r,l){return Zn(Sc(Ce_fromDom(l.container()),r),Hs)},jg=function(r,l,c){return Kv(r,l.dom(),c).forall(function(h){return Wg(l,c).fold(function(){return!1===Hu(h,c,l.dom())},function(m){return!1===Hu(h,c,l.dom())&&xs(m,Ce_fromDom(h.container()))})})},Uf=function(r,l,c){return Wg(l,c).fold(function(){return Kv(r,l.dom(),c).forall(function(h){return!1===Hu(h,c,l.dom())})},function(h){return Kv(r,h.dom(),c).isNone()})},Jv=Ve(Uf,!1),B1=Ve(Uf,!0),dx=Ve(jg,!1),Gg=Ve(jg,!0),Qv=function(r){return Mo.isTextPosition(r)&&!r.isAtStart()&&!r.isAtEnd()},z1=function(r,l){var c=Vn(Sc(Ce_fromDom(l.container()),r),Hs);return pe(c).getOr(r)},F1=function(r,l){return Qv(l)?B0(l):B0(l)||mi.prevPosition(z1(r,l).dom(),l).exists(B0)},H1=function(r,l){return Qv(l)?_g(l):_g(l)||mi.nextPosition(z1(r,l).dom(),l).exists(_g)},t0=function(r){return no(r).bind(function(l){return mc(l,es)}).exists(function(l){return c=cc(l,"white-space"),br(["pre","pre-wrap"],c);var c})},Ug=function(r,l){return c=r,!t0(h=l)&&(Jv(c,h)||dx(c,h)||Fx(c,h)||F1(c,h))||function(r,l){var c,h,m,M=(h=(c=l).container(),m=c.offset(),Lt.isText(h)&&m<h.data.length?Mo(h,m+1):c);return!t0(M)&&(B1(r,M)||Gg(r,M)||L0(r,M)||H1(r,M))}(r,l);var c,h},zS=function(r,l){return Ip(r.charAt(l))},FS=function(r){var l=r.container();return Lt.isText(l)&&Jo(l.data,"\xa0")},hx=function(r){var l=Ce_fromDom(r.getBody());r.selection.isCollapsed()&&function(r,l){return kt.some(l).filter(FS).bind(function(c){var h,m,M,k,P,N,F,W,q=c.container();return P=r,F=(N=q).data,W=Mo(N,0),zS(F,0)&&!Ug(P,W)&&(N.data=" "+F.slice(1),1)||function(r){var l,c=r.data,h=(l=c.split(""),_i(l,function(m,M){return Ip(m)&&0<M&&M<l.length-1&&Hx(l[M-1])&&Hx(l[M+1])?" ":m}).join(""));return h!==c&&(r.data=h,!0)}(q)||(h=r,M=(m=q).data,k=Mo(m,M.length-1),zS(M,M.length-1)&&!Ug(h,k)&&(m.data=M.slice(0,-1)+" ",1))?kt.some(c):kt.none()})}(l,Mo.fromRangeStart(r.selection.getRng())).each(function(c){r.selection.setRng(c.toRange())})},YM=function(r){var l,c,h=Ye.fromRangeStart(r.selection.getRng()),m=Ce_fromDom(r.getBody());if(r.selection.isCollapsed()){var M=Ve(jn.isInlineTarget,r),k=Ye.fromRangeStart(r.selection.getRng());return dh(M,r.getBody(),k).bind((c=m,function(P){return P.fold(function(N){return mi.prevPosition(c.dom(),Ye.before(N))},function(N){return mi.firstPositionIn(N)},function(N){return mi.lastPositionIn(N)},function(N){return mi.nextPosition(c.dom(),Ye.after(N))})})).bind(function(r,l){return function(c){return h=r,!t0(m=c)&&(function(r,l){return M=l,mi.prevPosition(r.dom(),M).isNone()||(h=l,mi.nextPosition(r.dom(),h).isNone())||Jv(r,l)||B1(r,l)||Fx(r,l)||L0(r,l);var h,M}(h,m)||F1(h,m)||H1(h,m))?LS(l):OS(l);var h,m}}(m,h)).exists((l=r,function(P){return l.selection.setRng(P.toRange()),l.nodeChanged(),!0}))}return!1},qf=function(r,l){var c;l.hasAttribute("data-mce-caret")&&(bt(l),(c=r).selection.setRng(c.selection.getRng()),r.selection.scrollIntoView(l))},V1=function(r,l){var h=Bu(Ce_fromDom(r.getBody()),"*[data-mce-caret]").fold(Oe(null),function(m){return m.dom()});if(h)return"compositionstart"===l.type?(l.preventDefault(),l.stopPropagation(),void qf(r,h)):void(j(h)&&(qf(r,h),r.undoManager.add()))},W1=ys.detect().browser,j1=function(r){return Lt.isElement(r)&&T(Ce_fromDom(r))},mh=eo.DOM,U1=function(r){var l;r.bindPendingEventDelegates(),r.initialized=!0,r.fire("init"),r.focus(!0),r.nodeChanged({initial:!0}),r.execCallback("init_instance_callback",r),(l=r).settings.auto_focus&&mr.setEditorTimeout(l,function(){var c;(c=!0===l.settings.auto_focus?l:l.editorManager.get(l.settings.auto_focus)).destroyed||c.focus()},100)},vh=function(r,l){var c,h,m,M,k,N,F,W,q=r.settings,Z=r.getElement(),ht=r.getDoc();q.inline||(r.getElement().style.visibility=r.orgVisibility),l||q.content_editable||(ht.open(),ht.write(r.iframeHTML),ht.close()),q.content_editable&&(r.on("remove",function(){var at=this.getBody();mh.removeClass(at,"mce-content-body"),mh.removeClass(at,"mce-edit-focus"),mh.setAttrib(at,"contentEditable",null)}),mh.addClass(Z,"mce-content-body"),r.contentDocument=ht=q.content_document||Rt.document,r.contentWindow=q.content_window||Rt.window,r.bodyElement=Z,q.content_document=q.content_window=null,q.root_name=Z.nodeName.toLowerCase()),(c=r.getBody()).disabled=!0,r.readonly=q.readonly,r.readonly||(r.inline&&"static"===mh.getStyle(c,"position",!0)&&(c.style.position="relative"),c.contentEditable=r.getParam("content_editable_state",!0)),c.disabled=!1,r.editorUpload=Iw(r),r.schema=su(q),r.dom=eo(ht,{keep_values:!0,url_converter:r.convertURL,url_converter_scope:r,hex_colors:q.force_hex_style_colors,class_filter:q.class_filter,update_styles:!0,root_element:r.inline?r.getBody():null,collect:q.content_editable,schema:r.schema,contentCssCors:ae(r),onSetAttrib:function(at){r.fire("SetAttrib",at)}}),r.parser=((M=l1((m=r).settings,m.schema)).addAttributeFilter("src,href,style,tabindex",function(at,gt){for(var rt,dt,mt,Dt=at.length,Pt=m.dom;Dt--;)if(dt=(rt=at[Dt]).attr(gt),!rt.attributes.map[mt="data-mce-"+gt]){if(0===dt.indexOf("data:")||0===dt.indexOf("blob:"))continue;"style"===gt?((dt=Pt.serializeStyle(Pt.parseStyle(dt),rt.name)).length||(dt=null),rt.attr(mt,dt),rt.attr(gt,dt)):"tabindex"===gt?(rt.attr(mt,dt),rt.attr(gt,null)):rt.attr(mt,m.convertURL(dt,gt,rt.name))}}),M.addNodeFilter("script",function(at){for(var gt,rt,dt=at.length;dt--;)0!==(rt=(gt=at[dt]).attr("type")||"no/type").indexOf("mce-")&&gt.attr("type","mce-"+rt)}),M.addNodeFilter("#cdata",function(at){for(var gt,rt=at.length;rt--;)(gt=at[rt]).type=8,gt.name="#comment",gt.value="[CDATA["+gt.value+"]]"}),M.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(at){for(var gt,rt=at.length,dt=m.schema.getNonEmptyElements();rt--;)(gt=at[rt]).isEmpty(dt)&&0===gt.getAll("br").length&&(gt.append(new Ds("br",1)).shortEnded=!0)}),M),r.serializer=Zy(q,r),r.selection=CS(r.dom,r.getWin(),r.serializer,r),r.annotator=Lm(r),r.formatter=nS(r),r.undoManager=Uw(r),r._nodeChangeDispatcher=new Rf(r),r._selectionOverrides=Ry(r),function(r){var l,c;(l=r).on("click",function(h){l.dom.getParent(h.target,"details")&&h.preventDefault()}),(c=r).parser.addNodeFilter("details",function(h){Ke(h,function(m){m.attr("data-mce-open",m.attr("open")),m.attr("open","open")})}),c.serializer.addNodeFilter("details",function(h){Ke(h,function(m){var M=m.attr("data-mce-open");m.attr("open",Mn(M)?M:null),m.attr("data-mce-open",null)})})}(r),function(r){r.on("click",function(l){3<=l.detail&&function(c){var h=c.selection.getRng(),m=Mo.fromRangeStart(h),M=Mo.fromRangeEnd(h);if(Mo.isElementPosition(m)){var k=m.container();j1(k)&&mi.firstPositionIn(k).each(function(P){return h.setStart(P.container(),P.offset())})}Mo.isElementPosition(M)&&(k=m.container(),j1(k)&&mi.lastPositionIn(k).each(function(P){return h.setEnd(P.container(),P.offset())})),c.selection.setRng(_f(h))}(r)})}(r),function(r){var l=Df.setupSelectedState(r);(function(r){r.on("keyup compositionstart",Ve(V1,r))})(r),function(r,l){r.on("keydown",function(c){var h,m,M,k;!1===c.isDefaultPrevented()&&(h=r,m=l,M=c,k=ys.detect().os,rm([{keyCode:ar.RIGHT,action:ox(h,!0)},{keyCode:ar.LEFT,action:ox(h,!1)},{keyCode:ar.UP,action:ax(h,!1)},{keyCode:ar.DOWN,action:ax(h,!0)},{keyCode:ar.RIGHT,action:Vv(h,!0)},{keyCode:ar.LEFT,action:Vv(h,!1)},{keyCode:ar.UP,action:T1(h,!1)},{keyCode:ar.DOWN,action:T1(h,!0)},{keyCode:ar.RIGHT,action:Df.move(h,m,!0)},{keyCode:ar.LEFT,action:Df.move(h,m,!1)},{keyCode:ar.RIGHT,ctrlKey:!k.isOSX(),altKey:k.isOSX(),action:Df.moveNextWord(h,m)},{keyCode:ar.LEFT,ctrlKey:!k.isOSX(),altKey:k.isOSX(),action:Df.movePrevWord(h,m)},{keyCode:ar.UP,action:IS(h,!1)},{keyCode:ar.DOWN,action:IS(h,!0)}],M).each(function(P){M.preventDefault()}))})}(r,l),function(r,l){r.on("keydown",function(c){var h,m,M;!1===c.isDefaultPrevented()&&(m=l,M=c,rm([{keyCode:ar.BACKSPACE,action:Zs(Ep,h=r,!1)},{keyCode:ar.DELETE,action:Zs(Ep,h,!0)},{keyCode:ar.BACKSPACE,action:Zs(kf,h,!1)},{keyCode:ar.DELETE,action:Zs(kf,h,!0)},{keyCode:ar.BACKSPACE,action:Zs($0,h,m,!1)},{keyCode:ar.DELETE,action:Zs($0,h,m,!0)},{keyCode:ar.BACKSPACE,action:Zs($c,h,!1)},{keyCode:ar.DELETE,action:Zs($c,h,!0)},{keyCode:ar.BACKSPACE,action:Zs(R0,h,!1)},{keyCode:ar.DELETE,action:Zs(R0,h,!0)},{keyCode:ar.BACKSPACE,action:Zs(Cc,h,!1)},{keyCode:ar.DELETE,action:Zs(Cc,h,!0)},{keyCode:ar.BACKSPACE,action:Zs(iv,h,!1)},{keyCode:ar.DELETE,action:Zs(iv,h,!0)}],M).each(function(k){M.preventDefault()}))}),r.on("keyup",function(c){var h,m;!1===c.isDefaultPrevented()&&(m=c,rm([{keyCode:ar.BACKSPACE,action:Zs(Wx,h=r)},{keyCode:ar.DELETE,action:Zs(Wx,h)}],m))})}(r,l),function(r){r.on("keydown",function(l){var c,h,m;l.keyCode===ar.ENTER&&(c=r,(h=l).isDefaultPrevented()||(h.preventDefault(),(m=c.undoManager).typing&&(m.typing=!1,m.add()),c.undoManager.transact(function(){!1===c.selection.isCollapsed()&&c.execCommand("Delete"),O1(c,h)})))})}(r),function(r){r.on("keydown",function(l){var h;!1===l.isDefaultPrevented()&&(h=l,rm([{keyCode:ar.SPACEBAR,action:Zs(YM,r)}],h).each(function(m){h.preventDefault()}))})}(r),function(r){var l,c;l=r,c=lu(function(){l.composing||hx(l)},0),W1.isIE()&&(l.on("keypress",function(h){c.throttle()}),l.on("remove",function(h){c.cancel()})),r.on("input",function(h){!1===h.isComposing&&hx(r)})}(r),function(r){r.on("keydown",function(l){var c,h;!1===l.isDefaultPrevented()&&(h=l,rm([{keyCode:ar.END,action:S1(c=r,!0)},{keyCode:ar.HOME,action:S1(c,!1)}],h).each(function(m){h.preventDefault()}))})}(r)}(r),function(r){r.settings.forced_root_block&&r.on("NodeChange",Ve(Vl,r))}(r),r.fire("PreInit"),q.browser_spellcheck||q.gecko_spellcheck||(ht.body.spellcheck=!1,mh.setAttrib(c,"spellcheck","false")),r.quirks=function XM(r){var l,c,h,m=ge.each,M=ar.BACKSPACE,k=ar.DELETE,P=r.dom,N=r.selection,F=r.settings,W=r.parser,q=sn.gecko,ht=sn.webkit,at="data:text/mce-internal,",gt=sn.ie?"Text":"URL",rt=function(wt,Ht){try{r.getDoc().execCommand(wt,!1,Ht)}catch(ce){}},dt=function(wt){return wt.isDefaultPrevented()},mt=function(){r.shortcuts.add("meta+a",null,"SelectAll")},Dt=function(){r.on("keydown",function(wt){if(!dt(wt)&&wt.keyCode===M&&N.isCollapsed()&&0===N.getRng().startOffset){var Ht=N.getNode().previousSibling;if(Ht&&Ht.nodeName&&"table"===Ht.nodeName.toLowerCase())return wt.preventDefault(),!1}})},Pt=function(){r.inline||(r.contentStyles.push("body {min-height: 150px}"),r.on("click",function(wt){var Ht;if("HTML"===wt.target.nodeName){if(11<sn.ie)return void r.getBody().focus();Ht=r.selection.getRng(),r.getBody().focus(),r.selection.setRng(Ht),r.selection.normalize(),r.nodeChanged()}}))};return r.on("keydown",function(wt){var Ht,ce,Xt,xe,te;if(!dt(wt)&&wt.keyCode===ar.BACKSPACE&&(ce=(Ht=N.getRng()).startContainer,Xt=Ht.startOffset,xe=P.getRoot(),te=ce,Ht.collapsed&&0===Xt)){for(;te&&te.parentNode&&te.parentNode.firstChild===te&&te.parentNode!==xe;)te=te.parentNode;"BLOCKQUOTE"===te.tagName&&(r.formatter.toggle("blockquote",null,te),(Ht=P.createRng()).setStart(ce,0),Ht.setEnd(ce,0),N.setRng(Ht))}}),l=function(wt){var Ht=P.create("body"),ce=wt.cloneContents();return Ht.appendChild(ce),N.serializer.serialize(Ht,{format:"html"})},r.on("keydown",function(wt){var Ht,ce,Xt,xe,te,Ee=wt.keyCode;if(!dt(wt)&&(Ee===k||Ee===M)){if(Ht=r.selection.isCollapsed(),ce=r.getBody(),Ht&&!P.isEmpty(ce)||!Ht&&(Xt=r.selection.getRng(),xe=l(Xt),(te=P.createRng()).selectNode(r.getBody()),xe!==l(te)))return;wt.preventDefault(),r.setContent(""),ce.firstChild&&P.isBlock(ce.firstChild)?r.selection.setCursorLocation(ce.firstChild,0):r.selection.setCursorLocation(ce,0),r.nodeChanged()}}),sn.windowsPhone||r.on("keyup focusin mouseup",function(wt){ar.modifierPressed(wt)||N.normalize()},!0),ht&&(r.settings.content_editable||P.bind(r.getDoc(),"mousedown mouseup",function(wt){var Ht;if(wt.target===r.getDoc().documentElement)if(Ht=N.getRng(),r.getBody().focus(),"mousedown"===wt.type){if(R(Ht.startContainer))return;N.placeCaretAt(wt.clientX,wt.clientY)}else N.setRng(Ht)}),r.on("click",function(wt){var Ht=wt.target;/^(IMG|HR)$/.test(Ht.nodeName)&&"false"!==P.getContentEditableParent(Ht)&&(wt.preventDefault(),r.selection.select(Ht),r.nodeChanged()),"A"===Ht.nodeName&&P.hasClass(Ht,"mce-item-anchor")&&(wt.preventDefault(),N.select(Ht))}),F.forced_root_block&&r.on("init",function(){rt("DefaultParagraphSeparator",F.forced_root_block)}),r.on("init",function(){r.dom.bind(r.getBody(),"submit",function(wt){wt.preventDefault()})}),Dt(),W.addNodeFilter("br",function(wt){for(var Ht=wt.length;Ht--;)"Apple-interchange-newline"===wt[Ht].attr("class")&&wt[Ht].remove()}),sn.iOS?(r.inline||r.on("keydown",function(){Rt.document.activeElement===Rt.document.body&&r.getWin().focus()}),Pt(),r.on("click",function(wt){var Ht=wt.target;do{if("A"===Ht.tagName)return void wt.preventDefault()}while(Ht=Ht.parentNode)}),r.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):mt()),11<=sn.ie&&(Pt(),Dt()),sn.ie&&(mt(),rt("AutoUrlDetect",!1),r.on("dragstart",function(wt){var Ht,ce,Xt;(Ht=wt).dataTransfer&&(r.selection.isCollapsed()&&"IMG"===Ht.target.tagName&&N.select(Ht.target),0<(ce=r.selection.getContent()).length&&(Xt=at+escape(r.id)+","+escape(ce),Ht.dataTransfer.setData(gt,Xt)))}),r.on("drop",function(wt){if(!dt(wt)){var Ht=(te=wt).dataTransfer&&(Ee=te.dataTransfer.getData(gt))&&0<=Ee.indexOf(at)?(Ee=Ee.substr(at.length).split(","),{id:unescape(Ee[0]),html:unescape(Ee[1])}):null;if(Ht&&Ht.id!==r.id){wt.preventDefault();var ce=Lv(wt.x,wt.y,r.getDoc());N.setRng(ce),Xt=Ht.html,r.queryCommandSupported("mceInsertClipboardContent")?r.execCommand("mceInsertClipboardContent",!1,{content:Xt,internal:!0}):r.execCommand("mceInsertContent",!1,Xt)}}var Xt,te,Ee})),q&&(r.on("keydown",function(wt){if(!dt(wt)&&wt.keyCode===M){if(!r.getBody().getElementsByTagName("hr").length)return;if(N.isCollapsed()&&0===N.getRng().startOffset){var Ht=N.getNode(),ce=Ht.previousSibling;if("HR"===Ht.nodeName)return P.remove(Ht),void wt.preventDefault();ce&&ce.nodeName&&"hr"===ce.nodeName.toLowerCase()&&(P.remove(ce),wt.preventDefault())}}}),Rt.Range.prototype.getClientRects||r.on("mousedown",function(wt){if(!dt(wt)&&"HTML"===wt.target.nodeName){var Ht=r.getBody();Ht.blur(),mr.setEditorTimeout(r,function(){Ht.focus()})}}),c=function(){var wt=P.getAttribs(N.getStart().cloneNode(!1));return function(){var Ht=N.getStart();Ht!==r.getBody()&&(P.setAttrib(Ht,"style",null),m(wt,function(ce){Ht.setAttributeNode(ce.cloneNode(!0))}))}},h=function(){return!N.isCollapsed()&&P.getParent(N.getStart(),P.isBlock)!==P.getParent(N.getEnd(),P.isBlock)},r.on("keypress",function(wt){var Ht;if(!dt(wt)&&(8===wt.keyCode||46===wt.keyCode)&&h())return Ht=c(),r.getDoc().execCommand("delete",!1,null),Ht(),wt.preventDefault(),!1}),P.bind(r.getDoc(),"cut",function(wt){var Ht;!dt(wt)&&h()&&(Ht=c(),mr.setEditorTimeout(r,function(){Ht()}))}),F.readonly||r.on("BeforeExecCommand MouseDown",function(){rt("StyleWithCSS",!1),rt("enableInlineTableEditing",!1),F.object_resizing||rt("enableObjectResizing",!1)}),r.on("SetContent ExecCommand",function(wt){"setcontent"!==wt.type&&"mceInsertLink"!==wt.command||m(P.select("a"),function(Ht){var ce=Ht.parentNode,Xt=P.getRoot();if(ce.lastChild===Ht){for(;ce&&!P.isBlock(ce);){if(ce.parentNode.lastChild!==ce||ce===Xt)return;ce=ce.parentNode}P.add(ce,"br",{"data-mce-bogus":1})}})}),r.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),sn.mac&&r.on("keydown",function(wt){!ar.metaKeyPressed(wt)||wt.shiftKey||37!==wt.keyCode&&39!==wt.keyCode||(wt.preventDefault(),r.selection.getSel().modify("move",37===wt.keyCode?"backward":"forward","lineboundary"))}),Dt()),{refreshContentEditable:function(){},isHidden:function(){var wt;return!q||r.removed?0:!(wt=r.selection.getSel())||!wt.rangeCount||0===wt.rangeCount}}}(r),r.fire("PostRender"),q.directionality&&(c.dir=q.directionality),q.nowrap&&(c.style.whiteSpace="nowrap"),q.protect&&r.on("BeforeSetContent",function(at){ge.each(q.protect,function(gt){at.content=at.content.replace(gt,function(rt){return"\x3c!--mce:protected "+escape(rt)+"--\x3e"})})}),r.on("SetContent",function(){r.addVisual(r.getBody())}),r.load({initial:!0,format:"html"}),r.startContent=r.getContent({format:"raw"}),r.on("compositionstart compositionend",function(at){r.composing="compositionstart"===at.type}),0<r.contentStyles.length&&(h="",ge.each(r.contentStyles,function(at){h+=at+"\r\n"}),r.dom.addStyle(h)),(k=r,k.inline?mh.styleSheetLoader:k.dom.styleSheetLoader).loadAll(r.contentCSS,function(at){U1(r)},function(at){U1(r)}),q.content_style&&(N=q.content_style,F=Ce_fromDom(r.getDoc().head),W=Ce_fromTag("style"),Va(W,"type","text/css"),da(W,Ce_fromText(N)),da(F,W))},tc=eo.DOM,yh=eo.DOM,US=function(r,l,c){var h=qh.get(c),m=qh.urls[c]||r.documentBaseUrl.replace(/\/$/,"");if(c=ge.trim(c),h&&-1===ge.inArray(l,c)){if(ge.each(qh.dependencies(c),function(k){US(r,l,k)}),r.plugins[c])return;try{var M=new h(r,m,r.$);(r.plugins[c]=M).init&&(M.init(r,m),l.push(c))}catch(k){!function(r,l,c){var h=Uh.translate(["Failed to initialize plugin: {0}",l]);Nb(h,c),pv(r,h)}(r,c,k)}}},qS=function(r){return r.replace(/^\-/,"")},YS=function(r){return{editorContainer:r,iframeContainer:r}},$S=function(r){var l,c,h,m,M,k,P=r.settings,N=r.getElement();return r.rtl=P.rtl_ui||r.editorManager.i18n.rtl,r.editorManager.i18n.setCode(P.language),P.aria_label=P.aria_label||yh.getAttrib(N,"aria-label",r.getLang("aria.rich_text_area")),r.fire("ScriptsLoaded"),m=(c=r).settings.theme,Mn(m)?(c.settings.theme=qS(m),h=Nf.get(m),c.theme=new h(c,Nf.urls[m]),c.theme.init&&c.theme.init(c,Nf.urls[m]||c.documentBaseUrl.replace(/\/$/,""),c.$)):c.theme={},k=[],ge.each((M=r).settings.plugins.split(/[ ,]/),function(F){US(M,k,qS(F))}),l=function(r){var l,c,h,m,M,k,P,N,F,W,q,Z=r.settings,ht=r.getElement();return r.orgDisplay=ht.style.display,Mn(Z.theme)?(W=(m=r).settings,q=m.getElement(),M=W.width||yh.getStyle(q,"width")||"100%",k=W.height||yh.getStyle(q,"height")||q.offsetHeight,P=W.min_height||100,(N=/^[0-9\.]+(|px)$/i).test(""+M)&&(M=Math.max(parseInt(M,10),100)),N.test(""+k)&&(k=Math.max(parseInt(k,10),P)),F=m.theme.renderUI({targetNode:q,width:M,height:k,deltaWidth:W.delta_width,deltaHeight:W.delta_height}),W.content_editable||(k=(F.iframeHeight||k)+("number"==typeof k?F.deltaHeight||0:""))<P&&(k=P),F.height=k,F):Ui(Z.theme)?(h=(l=r).getElement(),(c=l.settings.theme(l,h)).editorContainer.nodeType&&(c.editorContainer.id=c.editorContainer.id||l.id+"_parent"),c.iframeContainer&&c.iframeContainer.nodeType&&(c.iframeContainer.id=c.iframeContainer.id||l.id+"_iframecontainer"),c.height=c.iframeHeight?c.iframeHeight:h.offsetHeight,c):function(r){var l,c,h=r.getElement();return r.inline?YS(null):(l=h,c=yh.create("div"),yh.insertAfter(c,l),YS(c))}(r)}(r),r.editorContainer=l.editorContainer?l.editorContainer:null,P.content_css&&ge.each(ge.explode(P.content_css),function(F){r.contentCSS.push(r.documentBaseURI.toAbsolute(F))}),P.content_editable?vh(r):function(r,l){var c=function(r,l){var c,h,m,M,k,P,N,F=r.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),W=(c=r.id,h=F,m=l.height,M=function(r){return r.getParam("iframe_attrs",{})}(r),N=Ce_fromTag("iframe"),ns(N,M),ns(N,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:h}),function(r,l){var c=r.dom();Pu(l,function(h,m){!function(M,k,P){if(!Mn(P))throw Rt.console.error("Invalid call to CSS.set. Property ",k,":: Value ",P,":: Element ",M),new Error("CSS value must be a string: "+P);zs(M)&&M.style.setProperty(k,P)}(c,m,h)})}(N,{width:"100%",height:(k=m,P="number"==typeof k?k+"px":k,P||""),display:"block"}),N).dom();W.onload=function(){W.onload=null,r.fire("load")};var q,Z,ht,at,gt=function(rt,dt){if(Rt.document.domain!==Rt.window.location.hostname&&sn.ie&&sn.ie<12){var mt=ky_uuid("mce");return rt[mt]=function(){vh(rt)},tc.setAttrib(dt,"src",'javascript:(function(){document.open();document.domain="'+Rt.document.domain+'";var ed = window.parent.tinymce.get("'+rt.id+'");document.write(ed.iframeHTML);document.close();ed.'+mt+"(true);})()"),!0}return!1}(r,W);return r.contentAreaContainer=l.iframeContainer,r.iframeElement=W,r.iframeHTML=(at=function(r){return r.getParam("doctype","<!DOCTYPE html>")}(q=r)+"<html><head>",function(r){return r.getParam("document_base_url","")}(q)!==q.documentBaseUrl&&(at+='<base href="'+q.documentBaseURI.getURI()+'" />'),at+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',Z=function(r){return Wm(r,"body_id","tinymce")}(q),ht=function(r){return Wm(r,"body_class","")}(q),wf(q)&&(at+='<meta http-equiv="Content-Security-Policy" content="'+wf(q)+'" />'),at+='</head><body id="'+Z+'" class="mce-content-body '+ht+'" data-id="'+q.id+'"><br></body></html>'),tc.add(l.iframeContainer,W),gt}(r,l);l.editorContainer&&(tc.get(l.editorContainer).style.display=r.orgDisplay,r.hidden=tc.isHidden(l.editorContainer)),r.getElement().style.display="none",tc.setAttrib(r.id,"aria-hidden","true"),c||vh(r)}(r,l)},qg=eo.DOM,q1=function(r){return"-"===r.charAt(0)},um=function(r){var l=r.settings,c=r.id,h=function(){qg.unbind(Rt.window,"ready",h),r.render()};if(qr.Event.domLoaded){if(r.getElement()&&sn.contentEditable){l.inline?r.inline=!0:(r.orgVisibility=r.getElement().style.visibility,r.getElement().style.visibility="hidden");var m=r.getElement().form||qg.getParent(c,"form");m&&(r.formElement=m,l.hidden_input&&!/TEXTAREA|INPUT/i.test(r.getElement().nodeName)&&(qg.insertAfter(qg.create("input",{type:"hidden",name:c}),c),r.hasHiddenInput=!0),r.formEventDelegate=function(M){r.fire(M.type,M)},qg.bind(m,"submit reset",r.formEventDelegate),r.on("reset",function(){r.setContent(r.startContent,{format:"raw"})}),!l.submit_patch||m.submit.nodeType||m.submit.length||m._mceOldSubmit||(m._mceOldSubmit=m.submit,m.submit=function(){return r.editorManager.triggerSave(),r.setDirty(!1),m._mceOldSubmit(m)})),r.windowManager=My(r),r.notificationManager=Cy(r),"xml"===l.encoding&&r.on("GetContent",function(M){M.save&&(M.content=qg.encode(M.content))}),l.add_form_submit_trigger&&r.on("submit",function(){r.initialized&&r.save()}),l.add_unload_trigger&&(r._beforeUnload=function(){!r.initialized||r.destroyed||r.isHidden()||r.save({format:"raw",no_events:!0,set_dirty:!1})},r.editorManager.on("BeforeUnload",r._beforeUnload)),r.editorManager.add(r),function(r,l){var c=fo.ScriptLoader;!function(h,m,M,k){var P=m.settings,N=P.theme;if(Mn(N)){if(!q1(N)&&!Nf.urls.hasOwnProperty(N)){var F=P.theme_url;Nf.load(N,F?m.documentBaseURI.toAbsolute(F):"themes/"+N+"/theme"+M+".js")}h.loadQueue(function(){Nf.waitFor(N,k)})}else k()}(c,r,l,function(){var h,m,M,k,P;h=c,(M=(m=r).settings).language&&"en"!==M.language&&!M.language_url&&(M.language_url=m.editorManager.baseURL+"/langs/"+M.language+".js"),M.language_url&&!m.editorManager.i18n.data[M.language]&&h.add(M.language_url),P=l,ge.isArray((k=r.settings).plugins)&&(k.plugins=k.plugins.join(" ")),ge.each(k.external_plugins,function(N,F){qh.load(F,N),k.plugins+=" "+F}),ge.each(k.plugins.split(/[ ,]/),function(N){if((N=ge.trim(N))&&!qh.urls[N])if(q1(N)){N=N.substr(1,N.length);var F=qh.dependencies(N);ge.each(F,function(W){W=qh.createUrl({prefix:"plugins/",resource:W,suffix:"/plugin"+P+".js"},W),qh.load(W.resource,W)})}else qh.load(N,{prefix:"plugins/",resource:N,suffix:"/plugin"+P+".js"})}),c.loadQueue(function(){r.removed||$S(r)},r,function(N){(function(r,l){pv(r,function(r,l){var c=function(h,m){for(var M in Pb.urls)if(Pb.urls[M]+"/plugin"+m+".js"===h)return M;return null}(l,r.suffix);return Uh.translate(c?["Failed to load plugin: {0} from url {1}",c,l]:["Failed to load plugin url: {0}",l])}(r,l))})(r,N[0]),r.removed||$S(r)})})}(r,r.suffix)}}else qg.bind(Rt.window,"ready",h)},Y1=ge.each,KS=ge.trim,JS="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),X1={ftp:21,http:80,https:443,mailto:25},xu=function(r,l){var c,h,m=this;if(r=KS(r),c=(l=m.settings=l||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(r)||/^\s*#/.test(r))m.source=r;else{var M=0===r.indexOf("//");0!==r.indexOf("/")||M||(r=(c&&c.protocol||"http")+"://mce_host"+r),/^[\w\-]*:?\/\//.test(r)||(h=l.base_uri?l.base_uri.path:new xu(Rt.document.location.href).directory,""==l.base_uri.protocol?r="//mce_host"+m.toAbsPath(h,r):(r=/([^#?]*)([#?]?.*)/.exec(r),r=(c&&c.protocol||"http")+"://mce_host"+m.toAbsPath(h,r[1])+r[2])),r=r.replace(/@@/g,"(mce_at)"),r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(r),Y1(JS,function(k,P){var N=r[P];N&&(N=N.replace(/\(mce_at\)/g,"@@")),m[k]=N}),c&&(m.protocol||(m.protocol=c.protocol),m.userInfo||(m.userInfo=c.userInfo),m.port||"mce_host"!==m.host||(m.port=c.port),m.host&&"mce_host"!==m.host||(m.host=c.host),m.source=""),M&&(m.protocol="")}};xu.prototype={setPath:function(r){r=/^(.*?)\/?(\w+)?$/.exec(r),this.path=r[0],this.directory=r[1],this.file=r[2],this.source="",this.getURI()},toRelative:function(r){var l;if("./"===r)return r;if("mce_host"!==(r=new xu(r,{base_uri:this})).host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();var c=this.getURI(),h=r.getURI();return c===h||"/"===c.charAt(c.length-1)&&c.substr(0,c.length-1)===h?c:(l=this.toRelPath(this.path,r.path),r.query&&(l+="?"+r.query),r.anchor&&(l+="#"+r.anchor),l)},toAbsolute:function(r,l){return(r=new xu(r,{base_uri:this})).getURI(l&&this.isSameOrigin(r))},isSameOrigin:function(r){if(this.host==r.host&&this.protocol==r.protocol){if(this.port==r.port)return!0;var l=X1[this.protocol];if(l&&(this.port||l)==(r.port||l))return!0}return!1},toRelPath:function(r,l){var c,h,m,M=0,k="";if(r=(r=r.substring(0,r.lastIndexOf("/"))).split("/"),c=l.split("/"),r.length>=c.length)for(h=0,m=r.length;h<m;h++)if(h>=c.length||r[h]!==c[h]){M=h+1;break}if(r.length<c.length)for(h=0,m=c.length;h<m;h++)if(h>=r.length||r[h]!==c[h]){M=h+1;break}if(1===M)return l;for(h=0,m=r.length-(M-1);h<m;h++)k+="../";for(h=M-1,m=c.length;h<m;h++)k+=h!==M-1?"/"+c[h]:c[h];return k},toAbsPath:function(r,l){var c,h,m,M=0,k=[];for(h=/\/$/.test(l)?"/":"",r=r.split("/"),l=l.split("/"),Y1(r,function(P){P&&k.push(P)}),r=k,c=l.length-1,k=[];0<=c;c--)0!==l[c].length&&"."!==l[c]&&(".."!==l[c]?0<M?M--:k.push(l[c]):M++);return 0!==(m=(c=r.length-M)<=0?k.reverse().join("/"):r.slice(0,c).join("/")+"/"+k.reverse().join("/")).indexOf("/")&&(m="/"+m),h&&m.lastIndexOf("/")!==m.length-1&&(m+=h),m},getURI:function(r){var l,c=this;return c.source&&!r||(l="",r||(l+=c.protocol?c.protocol+"://":"//",c.userInfo&&(l+=c.userInfo+"@"),c.host&&(l+=c.host),c.port&&(l+=":"+c.port)),c.path&&(l+=c.path),c.query&&(l+="?"+c.query),c.anchor&&(l+="#"+c.anchor),c.source=l),c.source}},xu.parseDataUri=function(r){var l,c;return r=decodeURIComponent(r).split(","),(c=/data:([^;]+)/.exec(r[0]))&&(l=c[1]),{type:l,data:r[1]}},xu.getDocumentBaseUrl=function(r){var l;return l=0!==r.protocol.indexOf("http")&&"file:"!==r.protocol?r.href:r.protocol+"//"+r.host+r.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(l)&&(l=l.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(l)||(l+="/")),l};var gx=function(r,l){l(r),r.firstChild&&gx(r.firstChild,l),r.next&&gx(r.next,l)},Kh=function(r){return r instanceof Ds},px=function(r,l){var c;r.dom.setHTML(r.getBody(),l),Rg(c=r)&&mi.firstPositionIn(c.getBody()).each(function(h){var m=h.getNode(),M=Lt.isTable(m)?mi.firstPositionIn(m).getOr(h):h;c.selection.setRng(M.toRange())})},n0=eo.DOM,cm=function(r){return kt.from(r).each(function(l){return l.destroy()})},Yf=eo.DOM,J1=ge.extend,tC=ge.each,Q1=ge.resolve,t_=sn.ie,Yg=function(r,l,c){var N,F,W=this,q=W.documentBaseUrl=c.documentBaseURL,Z=c.baseURI;F={id:r,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:q,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(N=W).convertURL,url_converter_scope:N,ie7_compat:!0},l=function(r,l,c,h){var m,M,k,P,N,F,W,q,Z,ht,at,gt,rt=(m=["mobile"],M=ud(h,function(mt,Dt){return br(m,Dt)}),bw(M.t,M.f)),dt=ge.extend(l,c,rt.settings(),(ht=r,gt=(at=rt).settings().inline,ht&&Sb(at,"mobile")&&!gt?(F="mobile",W=ww,Z=(q=rt.sections()).hasOwnProperty(F)?q[F]:{},ge.extend({},W,Z)):{}),{validate:!0,content_editable:rt.settings().inline,external_plugins:(k=c,P=rt.settings(),N=P.external_plugins?P.external_plugins:{},k&&k.external_plugins?ge.extend({},k.external_plugins,N):N)});return function(r,l,c,h){var m,M=by(c.forced_plugins),k=by(h.plugins),N=(m=r&&Sb(l,"mobile")?Vn(k,Ve(br,$a)):k,[].concat(by(M)).concat(by(m)));return ge.extend(h,{plugins:N.join(" ")})}(r,rt,c,dt)}(_w,F,c.defaultSettings,l),W.settings=l,Ga.language=l.language||"en",Ga.languageLoad=l.language_load,Ga.baseURL=c.baseURL,W.id=r,W.setDirty(!1),W.plugins={},W.documentBaseURI=new xu(l.document_base_url,{base_uri:Z}),W.baseURI=Z,W.contentCSS=[],W.contentStyles=[],W.shortcuts=new Mw(W),W.loadedCSS={},W.editorCommands=new yw(W),W.suffix=c.suffix,W.editorManager=c,W.inline=l.inline,W.buttons={},W.menuItems={},l.cache_suffix&&(sn.cacheSuffix=l.cache_suffix.replace(/^[\?\&]+/,"")),!1===l.override_viewport&&(sn.overrideViewPort=!1),c.fire("SetupEditor",{editor:W}),W.execCallback("setup",W),W.$=Bn.overrideDefaults(function(){return{context:W.inline?W.getBody():W.getDoc(),element:W.getBody()}})};J1(Yg.prototype={render:function(){um(this)},focus:function(r){!function(r,l){r.removed||(l?wy(r):function(c){var h=c.selection,m=c.settings.content_editable,M=c.getBody(),k=h.getRng();c.quirks.refreshContentEditable();var P,N,F=(P=c,N=h.getNode(),P.dom.getParent(N,function(W){return"true"===P.dom.getContentEditable(W)}));if(c.$.contains(M,F))return Ef(F),Ng(c,k),wy(c);void 0!==c.bookmark&&!1===Tb(c)&&Ig(c).each(function(W){c.selection.setRng(W),k=W}),m||(sn.opera||Ef(M),c.getWin().focus()),(sn.gecko||m)&&(Ef(M),Ng(c,k)),wy(c)}(r))}(this,r)},hasFocus:function(){return Rg(this)},execCallback:function(r){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];var h,m=this.settings[r];if(m)return this.callbackLookup&&(h=this.callbackLookup[r])&&(m=h.func,h=h.scope),"string"==typeof m&&(h=(h=m.replace(/\.\w+$/,""))?Q1(h):0,m=Q1(m),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[r]={func:m,scope:h}),m.apply(h||this,Array.prototype.slice.call(arguments,1))},translate:function(r){if(r&&ge.is(r,"string")){var l=this.settings.language||"en",c=this.editorManager.i18n;r=c.data[l+"."+r]||r.replace(/\{\#([^\}]+)\}/g,function(h,m){return c.data[l+"."+m]||"{#"+m+"}"})}return this.editorManager.translate(r)},getLang:function(r,l){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+r]||(void 0!==l?l:"{#"+r+"}")},getParam:function(r,l,c){return function(r,l,c,h){var m,M,k,P=l in r.settings?r.settings[l]:c;return"hash"===h?(k={},"string"==typeof(M=P)?Ke(0<M.indexOf("=")?M.split(/[;,](?![^=;,]*(?:[;,]|$))/):M.split(","),function(N){var F=N.split("=");k[ge.trim(F[0])]=ge.trim(1<F.length?F[1]:F)}):k=M,k):"string"===h?Ju(Mn,r,l).getOr(c):"number"===h?Ju(bi,r,l).getOr(c):"boolean"===h?Ju(Fe,r,l).getOr(c):"object"===h?Ju(gr,r,l).getOr(c):"array"===h?Ju(Rn,r,l).getOr(c):"string[]"===h?Ju((m=Mn,function(N){return Rn(N)&&yi(N,m)}),r,l).getOr(c):"function"===h?Ju(Ui,r,l).getOr(c):P}(this,r,l,c)},nodeChanged:function(r){this._nodeChangeDispatcher.nodeChanged(r)},addButton:function(r,l){var c=this;l.cmd&&(l.onclick=function(){c.execCommand(l.cmd)}),l.stateSelector&&void 0===l.active&&(l.active=!1),l.text||l.icon||(l.icon=r),l.tooltip=l.tooltip||l.title,c.buttons[r]=l},addSidebar:function(r,l){return function(r,l,c){var h=r.sidebars?r.sidebars:[];h.push({name:l,settings:c}),r.sidebars=h}(this,r,l)},addMenuItem:function(r,l){var c=this;l.cmd&&(l.onclick=function(){c.execCommand(l.cmd)}),c.menuItems[r]=l},addContextToolbar:function(r,l){var c,h=this;h.contextToolbars=h.contextToolbars||[],"string"==typeof r&&(c=r,r=function(m){return h.dom.is(m,c)}),h.contextToolbars.push({id:ky_uuid("mcet"),predicate:r,items:l})},addCommand:function(r,l,c){this.editorCommands.addCommand(r,l,c)},addQueryStateHandler:function(r,l,c){this.editorCommands.addQueryStateHandler(r,l,c)},addQueryValueHandler:function(r,l,c){this.editorCommands.addQueryValueHandler(r,l,c)},addShortcut:function(r,l,c,h){this.shortcuts.add(r,l,c,h)},execCommand:function(r,l,c,h){return this.editorCommands.execCommand(r,l,c,h)},queryCommandState:function(r){return this.editorCommands.queryCommandState(r)},queryCommandValue:function(r){return this.editorCommands.queryCommandValue(r)},queryCommandSupported:function(r){return this.editorCommands.queryCommandSupported(r)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(Yf.show(this.getContainer()),Yf.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var r=this,l=r.getDoc();r.hidden||(t_&&l&&!r.inline&&l.execCommand("SelectAll"),r.save(),r.inline?(r.getBody().contentEditable=!1,r===r.editorManager.focusedEditor&&(r.editorManager.focusedEditor=null)):(Yf.hide(r.getContainer()),Yf.setStyle(r.id,"display",r.orgDisplay)),r.hidden=!0,r.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(r,l){this.fire("ProgressState",{state:r,time:l})},load:function(r){var l,c=this.getElement();return this.removed?"":c?((r=r||{}).load=!0,l=this.setContent(void 0!==c.value?c.value:c.innerHTML,r),r.element=c,r.no_events||this.fire("LoadContent",r),r.element=c=null,l):void 0},save:function(r){var l,c,h=this,m=h.getElement();if(m&&h.initialized&&!h.removed)return(r=r||{}).save=!0,r.element=m,r.content=h.getContent(r),r.no_events||h.fire("SaveContent",r),"raw"===r.format&&h.fire("RawSaveContent",r),l=r.content,/TEXTAREA|INPUT/i.test(m.nodeName)?m.value=l:(!r.is_removing&&h.inline||(m.innerHTML=l),(c=Yf.getParent(h.id,"form"))&&tC(c.elements,function(M){if(M.name===h.id)return M.value=l,!1})),r.element=m=null,!1!==r.set_dirty&&h.setDirty(!1),l},setContent:function(r,l){return function(r,l,c){return void 0===c&&(c={}),c.format=c.format?c.format:"html",c.set=!0,c.content=Kh(l)?"":l,Kh(l)||c.no_events||(r.fire("BeforeSetContent",c),l=c.content),kt.from(r.getBody()).fold(Oe(l),function(h){return Kh(l)?function(W,q,Z,ht){!function(r,l,c){var h=function(m,M,k){var P={},N={},F=[];for(var W in k.firstChild&&gx(k.firstChild,function(q){Ke(m,function(Z){Z.name===q.name&&(P[Z.name]?P[Z.name].nodes.push(q):P[Z.name]={filter:Z,nodes:[q]})}),Ke(M,function(Z){"string"==typeof q.attr(Z.name)&&(N[Z.name]?N[Z.name].nodes.push(q):N[Z.name]={filter:Z,nodes:[q]})})}),P)P.hasOwnProperty(W)&&F.push(P[W]);for(var W in N)N.hasOwnProperty(W)&&F.push(N[W]);return F}(r,l,c);Ke(h,function(m){Ke(m.filter.callbacks,function(M){M(m.nodes,m.filter.name,{})})})}(W.parser.getNodeFilters(),W.parser.getAttributeFilters(),Z);var at=ah({validate:W.validate},W.schema).serialize(Z);return ht.content=Tt(Ce_fromDom(q))?at:ge.trim(at),px(W,ht.content),ht.no_events||W.fire("SetContent",ht),Z}(r,h,l,c):(m=r,M=h,P=c,0===(k=l).length||/^\s+$/.test(k)?(F='<br data-mce-bogus="1">',"TABLE"===M.nodeName?k="<tr><td>"+F+"</td></tr>":/^(UL|OL)$/.test(M.nodeName)&&(k="<li>"+F+"</li>"),(N=La(m))&&m.schema.isValidChild(M.nodeName.toLowerCase(),N.toLowerCase())?k=m.dom.createHTML(N,m.settings.forced_root_block_attrs,k=F):k||(k='<br data-mce-bogus="1">'),px(m,k),m.fire("SetContent",P)):("raw"!==P.format&&(k=ah({validate:m.validate},m.schema).serialize(m.parser.parse(k,{isRootContent:!0,insert:!0}))),P.content=Tt(Ce_fromDom(M))?k:ge.trim(k),px(m,P.content),P.no_events||m.fire("SetContent",P)),P.content);var m,M,k,P,N,F})}(this,r,l)},getContent:function(r){return void 0===(c=r)&&(c={}),kt.from((l=this).getBody()).fold(Oe("tree"===c.format?new Ds("body",11):""),function(h){return function(r,l,c){var h,m,M,k,P;if(l.format=l.format?l.format:"html",l.get=!0,l.getInner=!0,l.no_events||r.fire("BeforeGetContent",l),"raw"===l.format)h=ge.trim(Mv_trimExternal(r.serializer,c.innerHTML));else if("text"===l.format)h=f(c.innerText||c.textContent);else{if("tree"===l.format)return r.serializer.serialize(c,l);M=(m=r).serializer.serialize(c,l),k=La(m),P=new RegExp("^(<"+k+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+k+">[\r\n]*|<br \\/>[\r\n]*)$"),h=M.replace(P,"")}return l.content="text"===l.format||Tt(Ce_fromDom(c))?h:ge.trim(h),l.no_events||r.fire("GetContent",l),l.content}(l,c,h)});var l,c},insertContent:function(r,l){l&&(r=J1({content:r},l)),this.execCommand("mceInsertContent",!1,r)},isDirty:function(){return!this.isNotDirty},setDirty:function(r){var l=!this.isNotDirty;this.isNotDirty=!r,r&&r!==l&&this.fire("dirty")},setMode:function(r){var l,c;(c=r)!==function(r){return r.readonly?"readonly":"design"}(l=this)&&(l.initialized?Vp(l,"readonly"===c):l.on("init",function(){Vp(l,"readonly"===c)}),function(r,l){r.fire("SwitchMode",{mode:l})}(l,c))},getContainer:function(){return this.container||(this.container=Yf.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=Yf.get(this.id)),this.targetElm},getWin:function(){var r;return this.contentWindow||(r=this.iframeElement)&&(this.contentWindow=r.contentWindow),this.contentWindow},getDoc:function(){var r;return this.contentDocument||(r=this.getWin())&&(this.contentDocument=r.document),this.contentDocument},getBody:function(){var r=this.getDoc();return this.bodyElement||(r?r.body:null)},convertURL:function(r,l,c){var h=this.settings;return h.urlconverter_callback?this.execCallback("urlconverter_callback",r,c,!0,l):!h.convert_urls||c&&"LINK"===c.nodeName||0===r.indexOf("file:")||0===r.length?r:h.relative_urls?this.documentBaseURI.toRelative(r):r=this.documentBaseURI.toAbsolute(r,h.remove_script_host)},addVisual:function(r){var l,c=this,h=c.settings,m=c.dom;r=r||c.getBody(),void 0===c.hasVisual&&(c.hasVisual=h.visual),tC(m.select("table,a",r),function(M){var k;switch(M.nodeName){case"TABLE":return l=h.visual_table_class||"mce-item-table",void((k=m.getAttrib(M,"border"))&&"0"!==k||!c.hasVisual?m.removeClass(M,l):m.addClass(M,l));case"A":return void(m.getAttrib(M,"href")||(k=m.getAttrib(M,"name")||M.id,l=h.visual_anchor_class||"mce-item-anchor",k&&c.hasVisual?m.addClass(M,l):m.removeClass(M,l)))}}),c.fire("VisualAid",{element:r,hasVisual:c.hasVisual})},remove:function(){!function(r){if(!r.removed){var l=r._selectionOverrides,c=r.editorUpload,h=r.getBody(),m=r.getElement();h&&r.save({is_removing:!0}),r.removed=!0,r.unbindAllNativeEvents(),r.hasHiddenInput&&m&&n0.remove(m.nextSibling),function(r){r.fire("remove")}(r),r.editorManager.remove(r),!r.inline&&h&&n0.setStyle((M=r).id,"display",M.orgDisplay),function(r){r.fire("detach")}(r),n0.remove(r.getContainer()),cm(l),cm(c),r.destroy()}var M}(this)},destroy:function(r){!function(r,l){var c,h,m,M=r.selection,k=r.dom;r.destroyed||(l||r.removed?(l||(r.editorManager.off("beforeunload",r._beforeUnload),r.theme&&r.theme.destroy&&r.theme.destroy(),cm(M),cm(k)),(h=(c=r).formElement)&&(h._mceOldSubmit&&(h.submit=h._mceOldSubmit,h._mceOldSubmit=null),n0.unbind(h,"submit reset",c.formEventDelegate)),(m=r).contentAreaContainer=m.formElement=m.container=m.editorContainer=null,m.bodyElement=m.contentDocument=m.contentWindow=null,m.iframeElement=m.targetElm=null,m.selection&&(m.selection=m.selection.win=m.selection.dom=m.selection.dom.doc=null),r.destroyed=!0):r.remove())}(this,r)},uploadImages:function(r){return this.editorUpload.uploadImages(r)},_scanForImages:function(){return this.editorUpload.scanForImages()}},wb);var Xg,i0,Qh,eC={isEditorUIElement:function(r){return-1!==r.className.toString().indexOf("mce-")}},vx=eo.DOM,e_=function(r,l){var c=r?r.settings.custom_ui_selector:"";return null!==vx.getParent(l,function(h){return function(r){return eC.isEditorUIElement(r)}(h)||!!c&&r.dom.is(h,c)})},rC=function(r,l){var c=l.editor;(function(r){var l,c,h,m=lu(function(){uv(r)},0);r.inline&&(l=r,c=m,eo.DOM.bind(Rt.document,"mouseup",h=function(){c.throttle()}),l.on("remove",function(){eo.DOM.unbind(Rt.document,"mouseup",h)})),r.on("init",function(){!function(r,l){var c,h;ys.detect().browser.isIE()?(h=r).on("focusout",function(){uv(h)}):(c=l,r.on("mouseup touchend",function(m){c.throttle()})),r.on("keyup nodechange",function(m){var M;"nodechange"===(M=m).type&&M.selectionChange||uv(r)})}(r,m)}),r.on("remove",function(){m.cancel()})})(c),c.on("focusin",function(){var h=r.focusedEditor;h!==this&&(h&&h.fire("blur",{focusedEditor:this}),r.setActive(this),(r.focusedEditor=this).fire("focus",{blurredEditor:h}),this.focus(!0))}),c.on("focusout",function(){var h=this;mr.setEditorTimeout(h,function(){var m=r.focusedEditor;e_(h,function(){try{return Rt.document.activeElement}catch(M){return Rt.document.body}}())||m!==h||(h.fire("blur",{focusedEditor:null}),r.focusedEditor=null)})}),Xg||vx.bind(Rt.document,"focusin",Xg=function(h){var m,M=r.activeEditor;m=h.target,M&&m.ownerDocument===Rt.document&&(m===Rt.document.body||e_(M,m)||r.focusedEditor!==M||(M.fire("blur",{focusedEditor:null}),r.focusedEditor=null))})},n_=function(r,l){r.focusedEditor===l.editor&&(r.focusedEditor=null),r.activeEditor||(vx.unbind(Rt.document,"focusin",Xg),Xg=null)},ec=eo.DOM,tT=ge.explode,Jc=ge.each,i_=ge.extend,oC=0,r_=!1,xh=[],Ul=[],o_=function(r){var l=r.type;Jc(Qh.get(),function(c){switch(l){case"scroll":c.fire("ScrollWindow",r);break;case"resize":c.fire("ResizeWindow",r)}})},a_=function(r){r!==r_&&(r?Bn(window).on("resize scroll",o_):Bn(window).off("resize scroll",o_),r_=r)},Xf=function(r){var l=Ul;delete xh[r.id];for(var c=0;c<xh.length;c++)if(xh[c]===r){xh.splice(c,1);break}return Ul=Vn(Ul,function(h){return r!==h}),Qh.activeEditor===r&&(Qh.activeEditor=0<Ul.length?Ul[0]:null),Qh.focusedEditor===r&&(Qh.focusedEditor=null),l.length!==Ul.length};i_(Qh={defaultSettings:{},$:Bn,majorVersion:"4",minorVersion:"9.11",releaseDate:"2020-07-13",editors:xh,i18n:Uh,activeEditor:null,settings:{},setup:function(){var r,l,c="";l=xu.getDocumentBaseUrl(Rt.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(l)&&(l=l.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(l)||(l+="/"));var h=window.tinymce||window.tinyMCEPreInit;if(h)r=h.base||h.baseURL,c=h.suffix;else{for(var m=Rt.document.getElementsByTagName("script"),M=0;M<m.length;M++){var k;if(""!==(k=m[M].src||"")){var P=k.substring(k.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(k)){-1!==P.indexOf(".min")&&(c=".min"),r=k.substring(0,k.lastIndexOf("/"));break}}}!r&&Rt.document.currentScript&&(-1!==(k=Rt.document.currentScript.src).indexOf(".min")&&(c=".min"),r=k.substring(0,k.lastIndexOf("/")))}this.baseURL=new xu(l).toAbsolute(r),this.documentBaseURL=l,this.baseURI=new xu(this.baseURL),this.suffix=c,function(r){r.on("AddEditor",Ve(rC,r)),r.on("RemoveEditor",Ve(n_,r))}(this)},overrideDefaults:function(r){var l;(l=r.base_url)&&(this.baseURL=new xu(this.documentBaseURL).toAbsolute(l.replace(/\/+$/,"")),this.baseURI=new xu(this.baseURL)),r.suffix&&(this.suffix=r.suffix);var h=(this.defaultSettings=r).plugin_base_urls;for(var m in h)Ga.PluginManager.urls[m]=h[m]},init:function(r){var l,c,h=this;c=ge.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var m=function(N){var F=N.id;return F||(F=(F=N.name)&&!ec.get(F)?N.name:ec.uniqueId(),N.setAttribute("id",F)),F},M=function(N,F){return F.constructor===RegExp?F.test(N.className):ec.hasClass(N,F)},k=function(N){l=N},P=function(){var N,F=0,W=[],q=function(Z,ht,at){var gt=new Yg(Z,ht,h);W.push(gt),gt.on("init",function(){++F===N.length&&k(W)}),gt.targetElm=gt.targetElm||at,gt.render()};ec.unbind(window,"ready",P),function(Z){var ht=r[Z];ht&&ht.apply(h,Array.prototype.slice.call(arguments,2))}("onpageload"),N=Bn.unique(function(Z){var ht,at=[];if(sn.ie&&sn.ie<11)return Dc_initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(Z.types)return Jc(Z.types,function(gt){at=at.concat(ec.select(gt.selector))}),at;if(Z.selector)return ec.select(Z.selector);if(Z.target)return[Z.target];switch(Z.mode){case"exact":0<(ht=Z.elements||"").length&&Jc(tT(ht),function(gt){var rt;(rt=ec.get(gt))?at.push(rt):Jc(Rt.document.forms,function(dt){Jc(dt.elements,function(mt){mt.name===gt&&(gt="mce_editor_"+oC++,ec.setAttrib(mt,"id",gt),at.push(mt))})})});break;case"textareas":case"specific_textareas":Jc(ec.select("textarea"),function(gt){Z.editor_deselector&&M(gt,Z.editor_deselector)||Z.editor_selector&&!M(gt,Z.editor_selector)||at.push(gt)})}return at}(r)),r.types?Jc(r.types,function(Z){ge.each(N,function(ht){return!ec.is(ht,Z.selector)||(q(m(ht),i_({},r,Z),ht),!1)})}):(ge.each(N,function(Z){var ht;(ht=h.get(Z.id))&&ht.initialized&&!(ht.getContainer()||ht.getBody()).parentNode&&(Xf(ht),ht.unbindAllNativeEvents(),ht.destroy(!0),ht.removed=!0,ht=null)}),0===(N=ge.grep(N,function(Z){return!h.get(Z.id)})).length?k([]):Jc(N,function(Z){r.inline&&Z.tagName.toLowerCase()in c?Dc_initError("Could not initialize inline editor on invalid inline target element",Z):q(m(Z),r,Z)}))};return h.settings=r,ec.bind(window,"ready",P),new Fi(function(N){l?N(l):k=function(F){N(F)}})},get:function(r){return 0===arguments.length?Ul.slice(0):Mn(r)?Zn(Ul,function(l){return l.id===r}).getOr(null):bi(r)&&Ul[r]?Ul[r]:null},add:function(r){var l=this;return xh[r.id]===r||(null===l.get(r.id)&&("length"!==r.id&&(xh[r.id]=r),xh.push(r),Ul.push(r)),a_(!0),l.activeEditor=r,l.fire("AddEditor",{editor:r}),i0||(i0=function(){l.fire("BeforeUnload")},ec.bind(window,"beforeunload",i0))),r},createEditor:function(r,l){return this.add(new Yg(r,l,this))},remove:function(r){var l,c,h=this;if(r){if(!Mn(r))return kn(h.get((c=r).id))?null:(Xf(c)&&h.fire("RemoveEditor",{editor:c}),0===Ul.length&&ec.unbind(window,"beforeunload",i0),c.remove(),a_(0<Ul.length),c);Jc(ec.select(r),function(m){(c=h.get(m.id))&&h.remove(c)})}else for(l=Ul.length-1;0<=l;l--)h.remove(Ul[l])},execCommand:function(r,l,c){var h=this.get(c);switch(r){case"mceAddEditor":return this.get(c)||new Yg(c,this.settings,this).render(),!0;case"mceRemoveEditor":return h&&h.remove(),!0;case"mceToggleEditor":return h?h.isHidden()?h.show():h.hide():this.execCommand("mceAddEditor",0,c),!0}return!!this.activeEditor&&this.activeEditor.execCommand(r,l,c)},triggerSave:function(){Jc(Ul,function(r){r.save()})},addI18n:function(r,l){Uh.add(r,l)},translate:function(r){return Uh.translate(r)},setActive:function(r){var l=this.activeEditor;this.activeEditor!==r&&(l&&l.fire("deactivate",{relatedTarget:r}),r.fire("activate",{relatedTarget:l})),this.activeEditor=r}},vy),Qh.setup();var r0,o0=Qh;function yx(r){return{walk:function(l,c){return Cd(r,l,c)},split:ny,normalize:function(l){return zp(r,l).fold(Oe(!1),function(c){return l.setStart(c.startContainer,c.startOffset),l.setEnd(c.endContainer,c.endOffset),!0})}}}(r0=yx||(yx={})).compareRanges=ly,r0.getCaretRangeFromPoint=Lv,r0.getSelectedNode=nr,r0.getNode=rr;var a0,Ic,eT=yx,s_=Math.min,$f=Math.max,xx=Math.round,aC=function(r,l,c){var h,m,M,k,P,N;return h=l.x,m=l.y,M=r.w,k=r.h,P=l.w,N=l.h,"b"===(c=(c||"").split(""))[0]&&(m+=N),"r"===c[1]&&(h+=P),"c"===c[0]&&(m+=xx(N/2)),"c"===c[1]&&(h+=xx(P/2)),"b"===c[3]&&(m-=k),"r"===c[4]&&(h-=M),"c"===c[3]&&(m-=xx(k/2)),"c"===c[4]&&(h-=xx(M/2)),dm(h,m,M,k)},dm=function(r,l,c,h){return{x:r,y:l,w:c,h}},nT={inflate:function(r,l,c){return dm(r.x-l,r.y-c,r.w+2*l,r.h+2*c)},relativePosition:aC,findBestRelativePosition:function(r,l,c,h){var m,M;for(M=0;M<h.length;M++)if((m=aC(r,l,h[M])).x>=c.x&&m.x+m.w<=c.w+c.x&&m.y>=c.y&&m.y+m.h<=c.h+c.y)return h[M];return null},intersect:function(r,l){var c,h,m,M;return c=$f(r.x,l.x),h=$f(r.y,l.y),m=s_(r.x+r.w,l.x+l.w),M=s_(r.y+r.h,l.y+l.h),m-c<0||M-h<0?null:dm(c,h,m-c,M-h)},clamp:function(r,l,c){var h,m,M,k,P,N,F,W,q,Z;return N=r.y,F=r.x+r.w,W=r.y+r.h,q=l.x+l.w,Z=l.y+l.h,h=$f(0,l.x-(P=r.x)),m=$f(0,l.y-N),M=$f(0,F-q),k=$f(0,W-Z),P+=h,N+=m,c&&(F+=h,W+=m,P-=M,N-=k),dm(P,N,(F-=M)-P,(W-=k)-N)},create:dm,fromClientRect:function(r){return dm(r.left,r.top,r.width,r.height)}},s0={},Zf={add:function(r,l){s0[r.toLowerCase()]=l},has:function(r){return!!s0[r.toLowerCase()]},get:function(r){var l=r.toLowerCase(),c=s0.hasOwnProperty(l)?s0[l]:null;if(null===c)throw new Error("Could not find module for type: "+r);return c},create:function(r,l){var c;if("string"==typeof r?(l=l||{}).type=r:r=(l=r).type,r=r.toLowerCase(),!(c=s0[r]))throw new Error("Could not find control by type: "+r);return(c=new c(l)).type=r,c}},$g=ge.each,Kf=ge.extend,sC=function(){};sC.extend=a0=function(r){var l,c,h,m=this.prototype,M=function(){var N,F,W;if(!Ic&&(this.init&&this.init.apply(this,arguments),F=this.Mixins))for(N=F.length;N--;)(W=F[N]).init&&W.init.apply(this,arguments)},k=function(){return this},P=function(N,F){return function(){var W,q=this._super;return this._super=m[N],W=F.apply(this,arguments),this._super=q,W}};for(c in Ic=!0,l=new this,Ic=!1,r.Mixins&&($g(r.Mixins,function(N){for(var F in N)"init"!==F&&(r[F]=N[F])}),m.Mixins&&(r.Mixins=m.Mixins.concat(r.Mixins))),r.Methods&&$g(r.Methods.split(","),function(N){r[N]=k}),r.Properties&&$g(r.Properties.split(","),function(N){var F="_"+N;r[N]=function(W){return void 0!==W?(this[F]=W,this):this[F]}}),r.Statics&&$g(r.Statics,function(N,F){M[F]=N}),r.Defaults&&m.Defaults&&(r.Defaults=Kf({},m.Defaults,r.Defaults)),r)l[c]="function"==typeof(h=r[c])&&m[c]?P(c,h):h;return M.prototype=l,(M.constructor=M).extend=a0,M};var l0=Math.min,bx=Math.max,Zg=Math.round,l_=function(r,l){var c,h,m,M;if(l=l||'"',null===r)return"null";if("string"==(m=typeof r))return h="\bb\tt\nn\ff\rr\"\"''\\\\",l+r.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(k,P){return'"'===l&&"'"===k?k:(c=h.indexOf(P))+1?"\\"+h.charAt(c+1):(k=P.charCodeAt().toString(16),"\\u"+"0000".substring(k.length)+k)})+l;if("object"===m){if(r.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(r)){for(c=0,h="[";c<r.length;c++)h+=(0<c?",":"")+l_(r[c],l);return h+"]"}for(M in h="{",r)r.hasOwnProperty(M)&&(h+="function"!=typeof r[M]?(1<h.length?","+l:l)+M+l+":"+l_(r[M],l):"");return h+"}"}return""+r},_x={serialize:l_,parse:function(r){try{return JSON.parse(r)}catch(l){}}},lC={callbacks:{},count:0,send:function(r){var l=this,c=eo.DOM,h=void 0!==r.count?r.count:l.count,m="tinymce_jsonp_"+h;l.callbacks[h]=function(M){c.remove(m),delete l.callbacks[h],r.callback(M)},c.add(c.doc.body,"script",{id:m,src:r.url,type:"text/javascript"}),l.count++}},hm={send:function(r){var l,c=0,h=function(){!r.async||4===l.readyState||1e4<c++?(r.success&&c<1e4&&200===l.status?r.success.call(r.success_scope,""+l.responseText,l,r):r.error&&r.error.call(r.error_scope,1e4<c?"TIMED_OUT":"GENERAL",l,r),l=null):setTimeout(h,10)};if(r.scope=r.scope||this,r.success_scope=r.success_scope||r.scope,r.error_scope=r.error_scope||r.scope,r.async=!1!==r.async,r.data=r.data||"",hm.fire("beforeInitialize",{settings:r}),l=Yh()){if(l.overrideMimeType&&l.overrideMimeType(r.content_type),l.open(r.type||(r.data?"POST":"GET"),r.url,r.async),r.crossDomain&&(l.withCredentials=!0),r.content_type&&l.setRequestHeader("Content-Type",r.content_type),r.requestheaders&&ge.each(r.requestheaders,function(m){l.setRequestHeader(m.key,m.value)}),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),(l=hm.fire("beforeSend",{xhr:l,settings:r}).xhr).send(r.data),!r.async)return h();setTimeout(h,10)}}};ge.extend(hm,vy);var Kg,fm,Jg,Sx,uC=ge.extend,gm=function(r){this.settings=uC({},r),this.count=0};gm.sendRPC=function(r){return(new gm).send(r)},gm.prototype={send:function(r){var l=r.error,c=r.success;(r=uC(this.settings,r)).success=function(h,m){void 0===(h=_x.parse(h))&&(h={error:"JSON Parse error."}),h.error?l.call(r.error_scope||r.scope,h.error,m):c.call(r.success_scope||r.scope,h.result)},r.error=function(h,m){l&&l.call(r.error_scope||r.scope,h,m)},r.data=_x.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),r.content_type="application/json",hm.send(r)}};try{Kg=Rt.window.localStorage}catch(r){fm={},Jg=[],Sx={getItem:function(l){return fm[l]||null},setItem:function(l,c){Jg.push(l),fm[l]=String(c)},key:function(l){return Jg[l]},removeItem:function(l){Jg=Jg.filter(function(c){return c===l}),delete fm[l]},clear:function(){Jg=[],fm={}},length:0},Object.defineProperty(Sx,"length",{get:function(){return Jg.length},configurable:!1,enumerable:!1}),Kg=Sx}var Cx,u_=ge.extend(o0,{geom:{Rect:nT},util:{Promise:Fi,Delay:mr,Tools:ge,VK:ar,URI:xu,Class:sC,EventDispatcher:my,Observable:vy,I18n:Uh,XHR:hm,JSON:_x,JSONRequest:gm,JSONP:lC,LocalStorage:Kg,Color:function(r){var l={},c=0,h=0,m=0,M=function(k){var P;return"object"==typeof k?"r"in k?(c=k.r,h=k.g,m=k.b):"v"in k&&function(N,F,W){var q,Z,ht,at;if(N=(parseInt(N,10)||0)%360,F=parseInt(F,10)/100,W=parseInt(W,10)/100,F=bx(0,l0(F,1)),W=bx(0,l0(W,1)),0!==F){switch(q=N/60,ht=(Z=W*F)*(1-Math.abs(q%2-1)),at=W-Z,Math.floor(q)){case 0:c=Z,h=ht,m=0;break;case 1:c=ht,h=Z,m=0;break;case 2:c=0,h=Z,m=ht;break;case 3:c=0,h=ht,m=Z;break;case 4:c=ht,h=0,m=Z;break;case 5:c=Z,h=0,m=ht;break;default:c=h=m=0}c=Zg(255*(c+at)),h=Zg(255*(h+at)),m=Zg(255*(m+at))}else c=h=m=Zg(255*W)}(k.h,k.s,k.v):(P=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(k))?(c=parseInt(P[1],10),h=parseInt(P[2],10),m=parseInt(P[3],10)):(P=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(k))?(c=parseInt(P[1],16),h=parseInt(P[2],16),m=parseInt(P[3],16)):(P=/#([0-F])([0-F])([0-F])/gi.exec(k))&&(c=parseInt(P[1]+P[1],16),h=parseInt(P[2]+P[2],16),m=parseInt(P[3]+P[3],16)),c=c<0?0:255<c?255:c,h=h<0?0:255<h?255:h,m=m<0?0:255<m?255:m,l};return r&&M(r),l.toRgb=function(){return{r:c,g:h,b:m}},l.toHsv=function(){return k=c,P=h,N=m,W=0,(q=l0(k/=255,l0(P/=255,N/=255)))===(Z=bx(k,bx(P,N)))?{h:0,s:0,v:100*(W=q)}:(F=(Z-q)/Z,{h:Zg(60*((k===q?3:N===q?1:5)-(k===q?P-N:N===q?k-P:N-k)/((W=Z)-q))),s:Zg(100*F),v:Zg(100*W)});var k,P,N,F,W,q,Z},l.toHex=function(){var k=function(P){return 1<(P=parseInt(P,10).toString(16)).length?P:"0"+P};return"#"+k(c)+k(h)+k(m)},l.parse=M,l}},dom:{EventUtils:qr,Sizzle:Hi,DomQuery:Bn,TreeWalker:Zi,DOMUtils:eo,ScriptLoader:fo,RangeUtils:eT,Serializer:Zy,ControlSelection:nm,BookmarkManager:hS,Selection:CS,Event:qr.Event},html:{Styles:pc,Entities:to,Node:Ds,Schema:su,SaxParser:Oy,DomParser:l1,Writer:k0,Serializer:ah},ui:{Factory:Zf},Env:sn,AddOnManager:Ga,Annotator:Lm,Formatter:nS,UndoManager:Uw,EditorCommands:yw,WindowManager:My,NotificationManager:Cy,EditorObservable:wb,Shortcuts:Mw,Editor:Yg,FocusManager:eC,EditorManager:o0,DOM:eo.DOM,ScriptLoader:fo.ScriptLoader,PluginManager:Ga.PluginManager,ThemeManager:Ga.ThemeManager,trim:ge.trim,isArray:ge.isArray,is:ge.is,toArray:ge.toArray,makeMap:ge.makeMap,each:ge.each,map:ge.map,grep:ge.grep,inArray:ge.inArray,extend:ge.extend,create:ge.create,walk:ge.walk,createNS:ge.createNS,resolve:ge.resolve,explode:ge.explode,_addCacheSuffix:ge._addCacheSuffix,isOpera:sn.opera,isWebKit:sn.webkit,isIE:sn.ie,isGecko:sn.gecko,isMac:sn.mac});Cx=u_,window.tinymce=Cx,window.tinyMCE=Cx,function(r){if("object"==typeof module)try{module.exports=r}catch(l){}}(u_)}(window),function(Rt){"use strict";var pi,bn,Oe,se,Ve=tinymce.util.Tools.resolve("tinymce.ThemeManager"),on=tinymce.util.Tools.resolve("tinymce.EditorManager"),Ue=tinymce.util.Tools.resolve("tinymce.util.Tools"),Bi=function(v){return!1!==Nn(v)},Nn=function(v){return v.getParam("menubar")},Pi=function(v){return v.getParam("toolbar_items_size")},Ci=function(v){return v.getParam("menu")},Gi=function(v){return!1===v.settings.skin},zi=function(v){var T=v.getParam("resize","vertical");return!1===T?"none":"both"===T?"both":"vertical"},Si=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),fn=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ei=tinymce.util.Tools.resolve("tinymce.util.I18n"),En=function(v){return v.fire("ResizeEditor")},Dn=function(v){return v.fire("BeforeRenderUI")},Dr=function(v,T){return function(){var B=v.find(T)[0];B&&B.focus(!0)}},po=function(v,T){v.shortcuts.add("Alt+F9","",Dr(T,"menubar")),v.shortcuts.add("Alt+F10,F10","",Dr(T,"toolbar")),v.shortcuts.add("Alt+F11","",Dr(T,"elementpath")),T.on("cancel",function(){v.focus()})},Rr=tinymce.util.Tools.resolve("tinymce.geom.Rect"),zn=tinymce.util.Tools.resolve("tinymce.util.Delay"),ki=function(){},Fn=function(v){return function(){return v}},Lr=Fn(!1),St=Fn(!0),kt=function(){return yn},yn=(pi=function(v){return v.isNone()},se={fold:function(v,T){return v()},is:Lr,isSome:Lr,isNone:St,getOr:Oe=function(v){return v},getOrThunk:bn=function(v){return v()},getOrDie:function(v){throw new Error(v||"error: getOrDie called on none.")},getOrNull:Fn(null),getOrUndefined:Fn(void 0),or:Oe,orThunk:bn,map:kt,each:ki,bind:kt,exists:Lr,forall:St,filter:kt,equals:pi,equals_:pi,toArray:function(){return[]},toString:Fn("none()")},Object.freeze&&Object.freeze(se),se),Mn=function(v){var T=Fn(v),B=function(){return et},U=function(ot){return ot(v)},et={fold:function(ot,xt){return xt(v)},is:function(ot){return v===ot},isSome:St,isNone:Lr,getOr:T,getOrThunk:T,getOrDie:T,getOrNull:T,getOrUndefined:T,or:B,orThunk:B,map:function(ot){return Mn(ot(v))},each:function(ot){ot(v)},bind:U,exists:U,forall:U,filter:function(ot){return ot(v)?et:yn},toArray:function(){return[v]},toString:function(){return"some("+v+")"},equals:function(ot){return ot.is(v)},equals_:function(ot,xt){return ot.fold(Lr,function(Tt){return xt(v,Tt)})}};return et},gr={some:Mn,none:kt,from:function(v){return null==v?yn:Mn(v)}},Rn=function(v){return v?v.getRoot().uiContainer:null},kn_setUiContainer=function(v,T){var B=Si.DOM.select(v.settings.ui_container)[0];T.getRoot().uiContainer=B},kn_getUiContainer=Rn,Fe=function(v,T,B){var U,et=[];if(T)return Ue.each(T.split(/[ ,]/),function(ot){var Tt=function(){var Et=v.selection;ot.settings.stateSelector&&Et.selectorChanged(ot.settings.stateSelector,function(Ut){ot.active(Ut)},!0),ot.settings.disabledStateSelector&&Et.selectorChanged(ot.settings.disabledStateSelector,function(Ut){ot.disabled(Ut)})};"|"===ot?U=null:(U||et.push(U={type:"buttongroup",items:[]}),v.buttons[ot]&&("function"==typeof(ot=v.buttons[ot])&&(ot=ot()),ot.type=ot.type||"button",ot.size=B,ot=fn.create(ot),U.items.push(ot),v.initialized?Tt():v.on("init",Tt)))}),{type:"toolbar",layout:"flow",items:et}},Ui=Fe,bi=function(v,T){var B,U,et=[];if(Ue.each(!1===(U=(B=v).getParam("toolbar"))?[]:Ue.isArray(U)?Ue.grep(U,function(ot){return 0<ot.length}):function(ot,xt){for(var Tt=[],Et=1;Et<10;Et++){var Ut=ot["toolbar"+Et];if(!Ut)break;Tt.push(Ut)}return 0<Tt.length?Tt:ot.toolbar?[ot.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"]}(B.settings),function(ot){var xt;(xt=ot)&&et.push(Fe(v,xt,T))}),et.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:et}},Ln=Si.DOM,aa=function(v){return{left:v.x,top:v.y,width:v.w,height:v.h,right:v.x+v.w,bottom:v.y+v.h}},Br=function(v,T){v.moveTo(T.left,T.top)},ao=function(v,T,B,U,et,ot){return ot=aa({x:T,y:B,w:ot.w,h:ot.h}),v&&(ot=v({elementRect:aa(U),contentAreaRect:aa(et),panelRect:ot})),ot},br=function(v){var T,B=function(){return v.contextToolbars||[]},U=function(Et,Ut){var le,qt,re,we,Me,ci,ii,di=v.getParam("inline_toolbar_position_handler");if(!v.removed){if(!Et||!Et.toolbar.panel)return void Ue.each(v.contextToolbars,function(ta){ta.panel&&ta.panel.hide()});var Lt,An,Ti,Ki;ii=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],Me=Et.toolbar.panel,Ut&&Me.show(),Lt=Et.element,An=Ln.getPos(v.getContentAreaContainer()),Ti=v.dom.getRect(Lt),"BODY"===(Ki=v.dom.getRoot()).nodeName&&(Ti.x-=Ki.ownerDocument.documentElement.scrollLeft||Ki.scrollLeft,Ti.y-=Ki.ownerDocument.documentElement.scrollTop||Ki.scrollTop),Ti.x+=An.x,Ti.y+=An.y,re=Ti,qt=Ln.getRect(Me.getEl()),we=Ln.getRect(v.getContentAreaContainer()||v.getBody());var xr,So,Xo,or=function(v){var T=Rn(v);if(T&&"static"!==Si.DOM.getStyle(T,"position",!0)){var B=Si.DOM.getPos(T);return gr.some({x:T.scrollLeft-B.x,y:T.scrollTop-B.y})}return gr.none()}(Me).getOr({x:0,y:0});if(re.x+=or.x,re.y+=or.y,qt.x+=or.x,qt.y+=or.y,we.x+=or.x,we.y+=or.y,"inline"!==Ln.getStyle(Et.element,"display",!0)){var Wa=Et.element.getBoundingClientRect();re.w=Wa.width,re.h=Wa.height}v.inline||(we.w=v.getDoc().documentElement.offsetWidth),v.selection.controlSelection.isResizable(Et.element)&&re.w<25&&(re=Rr.inflate(re,0,8)),le=Rr.findBestRelativePosition(qt,re,we,ii),re=Rr.clamp(re,we),le?(ci=Rr.relativePosition(qt,re,le),Br(Me,ao(di,ci.x,ci.y,re,we,qt))):(we.h+=qt.h,(re=Rr.intersect(we,re))?(le=Rr.findBestRelativePosition(qt,re,we,["bc-tc","bl-tl","br-tr"]))?(ci=Rr.relativePosition(qt,re,le),Br(Me,ao(di,ci.x,ci.y,re,we,qt))):Br(Me,ao(di,re.x,re.y,re,we,qt)):Me.hide()),xr=Me,Xo=function(ta,Or){return ta===Or},So=(So=le)?So.substr(0,2):"",Ue.each({t:"down",b:"up"},function(ta,Or){xr.classes.toggle("arrow-"+ta,Xo(Or,So.substr(0,1)))}),Ue.each({l:"left",r:"right"},function(ta,Or){xr.classes.toggle("arrow-"+ta,Xo(Or,So.substr(1,1)))})}},et=function(Et){return function(){zn.requestAnimationFrame(function(){v.selection&&U(Tt(v.selection.getNode()),Et)})}},xt=function(){Ue.each(B(),function(Et){Et.panel&&Et.panel.hide()})},Tt=function(Et){var Ut,le,qt,re=B();for(Ut=(qt=v.$(Et).parents().add(Et)).length-1;0<=Ut;Ut--)for(le=re.length-1;0<=le;le--)if(re[le].predicate(qt[Ut]))return{toolbar:re[le],element:qt[Ut]};return null};v.on("click keyup setContent ObjectResized",function(Et){("setcontent"!==Et.type||Et.selection)&&zn.setEditorTimeout(v,function(){var Ut;(Ut=Tt(v.selection.getNode()))?(xt(),function(Et){var Ut;if(Et.toolbar.panel)return Et.toolbar.panel.show(),void U(Et);Ut=fn.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Ui(v,Et.toolbar.items),oncancel:function(){v.focus()}}),kn_setUiContainer(v,Ut),function(le){if(!T){var qt=et(!0),re=kn_getUiContainer(le);T=v.selection.getScrollContainer()||v.getWin(),Ln.bind(T,"scroll",qt),Ln.bind(re,"scroll",qt),v.on("remove",function(){Ln.unbind(T,"scroll",qt),Ln.unbind(re,"scroll",qt)})}}(Ut),(Et.toolbar.panel=Ut).renderTo().reflow(),U(Et)}(Ut)):xt()})}),v.on("blur hide contextmenu",xt),v.on("ObjectResizeStart",function(){var Et=Tt(v.selection.getNode());Et&&Et.toolbar.panel&&Et.toolbar.panel.hide()}),v.on("ResizeEditor ResizeWindow",et(!0)),v.on("nodeChange",et(!1)),v.on("remove",function(){Ue.each(B(),function(Et){Et.panel&&Et.panel.remove()}),v.contextToolbars={}}),v.shortcuts.add("ctrl+F9","",function(){var Et=Tt(v.selection.getNode());Et&&Et.toolbar.panel&&Et.toolbar.panel.items()[0].focus()})},pr=function(v){return function(T){return function(B){if(null===B)return"null";var U=typeof B;return"object"===U&&(Array.prototype.isPrototypeOf(B)||B.constructor&&"Array"===B.constructor.name)?"array":"object"===U&&(String.prototype.isPrototypeOf(B)||B.constructor&&"String"===B.constructor.name)?"string":U}(T)===v}},_i=pr("array"),Ke=pr("function"),mo=pr("number"),Vn=Array.prototype.indexOf,Ei=Array.prototype.push,Qi=function(v,T){for(var B=0,U=v.length;B<U;B++)if(T(v[B],B))return!0;return!1},Mr=function(v,T){for(var B=v.length,U=new Array(B),et=0;et<B;et++)U[et]=T(v[et],et);return U},yi=function(v,T){for(var B=0,U=v.length;B<U;B++)T(v[B],B)},To=function(v,T){for(var B=[],U=0,et=v.length;U<et;U++){var ot=v[U];T(ot,U)&&B.push(ot)}return B},pe=(Ke(Array.from),{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ee=function(v,T){return"|"===v?{name:"|",item:{text:"|"}}:T?{name:v,item:T}:null},Qe=function(v){return v&&"|"===v.item.text},cn=function(v,T,B,U){var et,ot,xt,Tt,Et,Ut,le;return T?(ot=T[U],Tt=!0):ot=pe[U],ot&&(et={text:ot.title},xt=[],Ue.each((ot.items||"").split(/[ ,]/),function(qt){var re=ee(qt,v[qt]);re&&xt.push(re)}),Tt||Ue.each(v,function(qt,re){qt.context!==U||function(v,T){return function(B,U){for(var et=0,ot=B.length;et<ot;et++)if(U(B[et]))return gr.some(et);return gr.none()}(v,function(B){return B.name===T}).isSome()}(xt,re)||("before"===qt.separator&&xt.push({name:"|",item:{text:"|"}}),qt.prependToContext?xt.unshift(ee(re,qt)):xt.push(ee(re,qt)),"after"===qt.separator&&xt.push({name:"|",item:{text:"|"}}))}),et.menu=Mr((Et=B,Ut=To(xt,function(qt){return!1===Et.hasOwnProperty(qt.name)}),le=To(Ut,function(qt,re){return!Qe(qt)||!Qe(Ut[re-1])}),To(le,function(qt,re){return!Qe(qt)||0<re&&re<le.length-1})),function(qt){return qt.item}),!et.menu.length)?null:et},Xe=function(v){for(var T,B=[],U=function(le){var qt,re=[],we=Ci(le);if(we)for(qt in we)re.push(qt);else for(qt in pe)re.push(qt);return re}(v),et=Ue.makeMap((T=v,T.getParam("removed_menuitems","")).split(/[ ,]/)),ot=Nn(v),xt="string"==typeof ot?ot.split(/[ ,]/):U,Tt=0;Tt<xt.length;Tt++){var Et=xt[Tt],Ut=cn(v.menuItems,Ci(v),et,Et);Ut&&B.push(Ut)}return B},jt=Si.DOM,je=function(v){return{width:v.clientWidth,height:v.clientHeight}},nn=function(v,T,B){var U,et,ot,xt;U=v.getContainer(),et=v.getContentAreaContainer().firstChild,ot=je(U),xt=je(et),null!==T&&(T=Math.max(v.getParam("min_width",100,"number"),T),T=Math.min(v.getParam("max_width",65535,"number"),T),jt.setStyle(U,"width",T+(ot.width-xt.width)),jt.setStyle(et,"width",T)),B=Math.max(v.getParam("min_height",100,"number"),B),B=Math.min(v.getParam("max_height",65535,"number"),B),jt.setStyle(et,"height",B),En(v)},gn=nn,Jn=tinymce.util.Tools.resolve("tinymce.Env"),sn=function(v,T,B){var U,et=v.settings[B];et&&et((U=T.getEl("body"),{element:function(){return U}}))},Fi=function(v,T,B){return function(U){var ot,xt,Tt,Ut=U.control,le=Ut.parents().filter("panel")[0],qt=le.find("#"+T)[0],re=(ot=T,Ue.grep(B,function(we){return we.name===ot})[0]);xt=T,Tt=le,Ue.each(B,function(we){var Me=Tt.items().filter("#"+we.name)[0];Me&&Me.visible()&&we.name!==xt&&(sn(we,Me,"onhide"),Me.visible(!1))}),Ut.parent().items().each(function(we){we.active(!1)}),qt&&qt.visible()?(sn(re,qt,"onhide"),qt.hide(),Ut.active(!1)):(qt?qt.show():(qt=fn.create({type:"container",name:T,layout:"stack",classes:"sidebar-panel",html:""}),le.prepend(qt),sn(re,qt,"onrender")),sn(re,qt,"onshow"),Ut.active(!0)),En(v)}},tr=function(v){return!(Jn.ie&&!(11<=Jn.ie)||!v.sidebars)&&0<v.sidebars.length},so=function(v){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:Ue.map(v.sidebars,function(T){var B=T.settings;return{type:"button",icon:B.icon,image:B.image,tooltip:B.tooltip,onclick:Fi(v,T.name,v.sidebars)}})}]}},hr=function(v){var T=function(){v._skinLoaded=!0,function(v){v.fire("SkinLoaded")}(v)};return function(){v.initialized?T():v.on("init",T)}},mr=Si.DOM,vr=function(v){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:v,html:""}},Qn=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),gi=0,De={id:function(){return"mceu_"+gi++},create:function(v,T,B){var U=Rt.document.createElement(v);return Si.DOM.setAttribs(U,T),"string"==typeof B?U.innerHTML=B:Ue.each(B,function(et){et.nodeType&&U.appendChild(et)}),U},createFragment:function(v){return Si.DOM.createFragment(v)},getWindowSize:function(){return Si.DOM.getViewPort()},getSize:function(v){var T,B;if(v.getBoundingClientRect){var U=v.getBoundingClientRect();T=Math.max(U.width||U.right-U.left,v.offsetWidth),B=Math.max(U.height||U.bottom-U.bottom,v.offsetHeight)}else T=v.offsetWidth,B=v.offsetHeight;return{width:T,height:B}},getPos:function(v,T){return Si.DOM.getPos(v,T||De.getContainer())},getContainer:function(){return Jn.container?Jn.container:Rt.document.body},getViewPort:function(v){return Si.DOM.getViewPort(v)},get:function(v){return Rt.document.getElementById(v)},addClass:function(v,T){return Si.DOM.addClass(v,T)},removeClass:function(v,T){return Si.DOM.removeClass(v,T)},hasClass:function(v,T){return Si.DOM.hasClass(v,T)},toggleClass:function(v,T,B){return Si.DOM.toggleClass(v,T,B)},css:function(v,T,B){return Si.DOM.setStyle(v,T,B)},getRuntimeStyle:function(v,T){return Si.DOM.getStyle(v,T,!0)},on:function(v,T,B,U){return Si.DOM.bind(v,T,B,U)},off:function(v,T,B){return Si.DOM.unbind(v,T,B)},fire:function(v,T,B){return Si.DOM.fire(v,T,B)},innerHtml:function(v,T){Si.DOM.setHTML(v,T)}},Wi=function(v){return"static"===De.getRuntimeStyle(v,"position")},$i=function(v){return v.state.get("fixed")};function _r(v,T,B){var U,et,ot,xt,Tt,Et,Ut,le,qt,re;return qt=qr(),ot=(et=De.getPos(T,kn_getUiContainer(v))).x,xt=et.y,$i(v)&&Wi(Rt.document.body)&&(ot-=qt.x,xt-=qt.y),U=v.getEl(),Tt=(re=De.getSize(U)).width,Et=re.height,Ut=(re=De.getSize(T)).width,le=re.height,"b"===(B=(B||"").split(""))[0]&&(xt+=le),"r"===B[1]&&(ot+=Ut),"c"===B[0]&&(xt+=Math.round(le/2)),"c"===B[1]&&(ot+=Math.round(Ut/2)),"b"===B[3]&&(xt-=Et),"r"===B[4]&&(ot-=Tt),"c"===B[3]&&(xt-=Math.round(Et/2)),"c"===B[4]&&(ot-=Math.round(Tt/2)),{x:ot,y:xt,w:Tt,h:Et}}var qr=function(){var v=Rt.window;return{x:Math.max(v.pageXOffset,Rt.document.body.scrollLeft,Rt.document.documentElement.scrollLeft),y:Math.max(v.pageYOffset,Rt.document.body.scrollTop,Rt.document.documentElement.scrollTop),w:v.innerWidth||Rt.document.documentElement.clientWidth,h:v.innerHeight||Rt.document.documentElement.clientHeight}},yr=function(v){var T,B=kn_getUiContainer(v);return B&&!$i(v)?{x:0,y:0,w:(T=B).scrollWidth-1,h:T.scrollHeight-1}:qr()},Mi={testMoveRel:function(v,T){for(var B=yr(this),U=0;U<T.length;U++){var et=_r(this,v,T[U]);if($i(this)){if(0<et.x&&et.x+et.w<B.w&&0<et.y&&et.y+et.h<B.h)return T[U]}else if(et.x>B.x&&et.x+et.w<B.w+B.x&&et.y>B.y&&et.y+et.h<B.h+B.y)return T[U]}return T[0]},moveRel:function(v,T){"string"!=typeof T&&(T=this.testMoveRel(v,T));var B=_r(this,v,T);return this.moveTo(B.x,B.y)},moveBy:function(v,T){var B=this.layoutRect();return this.moveTo(B.x+v,B.y+T),this},moveTo:function(v,T){var B=this;function U(Tt,Et,Ut){return Tt<0||Et<Tt+Ut&&(Tt=Et-Ut)<0?0:Tt}if(B.settings.constrainToViewport){var et=yr(this),ot=B.layoutRect();v=U(v,et.w+et.x,ot.w),T=U(T,et.h+et.y,ot.h)}var xt=kn_getUiContainer(B);return xt&&Wi(xt)&&!$i(B)&&(v-=xt.scrollLeft,T-=xt.scrollTop),xt&&(v+=1,T+=1),B.state.get("rendered")?B.layoutRect({x:v,y:T}).repaint():(B.settings.x=v,B.settings.y=T),B.fire("move",{x:v,y:T}),B}},wi=tinymce.util.Tools.resolve("tinymce.util.Class"),Ai=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),ir=function(v){var T;if(v)return"number"==typeof v?{top:v=v||0,left:v,bottom:v,right:v}:(1===(T=(v=v.split(" ")).length)?v[1]=v[2]=v[3]=v[0]:2===T?(v[2]=v[0],v[3]=v[1]):3===T&&(v[3]=v[1]),{top:parseInt(v[0],10)||0,right:parseInt(v[1],10)||0,bottom:parseInt(v[2],10)||0,left:parseInt(v[3],10)||0})},pa=function(v,T){function B(U){var et=parseFloat(function(ot){var xt=v.ownerDocument.defaultView;if(xt){var Tt=xt.getComputedStyle(v,null);return Tt?(ot=ot.replace(/[A-Z]/g,function(Et){return"-"+Et}),Tt.getPropertyValue(ot)):null}return v.currentStyle[ot]}(U));return isNaN(et)?0:et}return{top:B(T+"TopWidth"),right:B(T+"RightWidth"),bottom:B(T+"BottomWidth"),left:B(T+"LeftWidth")}};function Ks(){}function Js(v){this.cls=[],this.cls._map={},this.onchange=v||Ks,this.prefix=""}Ue.extend(Js.prototype,{add:function(v){return v&&!this.contains(v)&&(this.cls._map[v]=!0,this.cls.push(v),this._change()),this},remove:function(v){if(this.contains(v)){var T=void 0;for(T=0;T<this.cls.length&&this.cls[T]!==v;T++);this.cls.splice(T,1),delete this.cls._map[v],this._change()}return this},toggle:function(v,T){var B=this.contains(v);return B!==T&&(B?this.remove(v):this.add(v),this._change()),this},contains:function(v){return!!this.cls._map[v]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Js.prototype.toString=function(){var v;if(this.clsValue)return this.clsValue;v="";for(var T=0;T<this.cls.length;T++)0<T&&(v+=" "),v+=this.prefix+this.cls[T];return v};var Ar,lo,ma,Yr=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,kr=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,ql=/^\s*|\s*$/g,uo=wi.extend({init:function(v){var T=this.match;function B(et,ot,xt){var Tt;function Et(Ut){Ut&&ot.push(Ut)}return Et(function(Ut){if(Ut)return Ut=Ut.toLowerCase(),function(le){return"*"===Ut||le.type===Ut}}((Tt=Yr.exec(et.replace(ql,"")))[1])),Et(function(Ut){if(Ut)return function(le){return le._name===Ut}}(Tt[2])),Et(function(Ut){if(Ut)return Ut=Ut.split("."),function(le){for(var qt=Ut.length;qt--;)if(!le.classes.contains(Ut[qt]))return!1;return!0}}(Tt[3])),Et(function(Ut,le,qt){if(Ut)return function(re){var we=re[Ut]?re[Ut]():"";return le?"="===le?we===qt:"*="===le?0<=we.indexOf(qt):"~="===le?0<=(" "+we+" ").indexOf(" "+qt+" "):"!="===le?we!==qt:"^="===le?0===we.indexOf(qt):"$="===le&&we.substr(we.length-qt.length)===qt:!!qt}}(Tt[4],Tt[5],Tt[6])),Et(function(Ut){var le;if(Ut)return(Ut=/(?:not\((.+)\))|(.+)/i.exec(Ut))[1]?(le=U(Ut[1],[]),function(qt){return!T(qt,le)}):(Ut=Ut[2],function(qt,re,we){return"first"===Ut?0===re:"last"===Ut?re===we-1:"even"===Ut?re%2==0:"odd"===Ut?re%2==1:!!qt[Ut]&&qt[Ut]()})}(Tt[7])),ot.pseudo=!!Tt[7],ot.direct=xt,ot}function U(et,ot){var xt,Tt,Et,Ut=[];do{if(kr.exec(""),(Tt=kr.exec(et))&&(et=Tt[3],Ut.push(Tt[1]),Tt[2])){xt=Tt[3];break}}while(Tt);for(xt&&U(xt,ot),et=[],Et=0;Et<Ut.length;Et++)">"!==Ut[Et]&&et.push(B(Ut[Et],[],">"===Ut[Et-1]));return ot.push(et),ot}this._selectors=U(v,[])},match:function(v,T){var B,U,et,ot,xt,Tt,Et,Ut,le,qt,re,we,Me;for(B=0,U=(T=T||this._selectors).length;B<U;B++){for(Me=v,we=0,et=(ot=(xt=T[B]).length)-1;0<=et;et--)for(Ut=xt[et];Me;){if(Ut.pseudo)for(le=qt=(re=Me.parent().items()).length;le--&&re[le]!==Me;);for(Tt=0,Et=Ut.length;Tt<Et;Tt++)if(!Ut[Tt](Me,le,qt)){Tt=Et+1;break}if(Tt===Et){we++;break}if(et===ot-1)break;Me=Me.parent()}if(we===ot)return!0}return!1},find:function(v){var T,B,U=[],et=this._selectors;function ot(xt,Tt,Et){var Ut,le,qt,re,we,Me=Tt[Et];for(Ut=0,le=xt.length;Ut<le;Ut++){for(we=xt[Ut],qt=0,re=Me.length;qt<re;qt++)if(!Me[qt](we,Ut,le)){qt=re+1;break}if(qt===re)Et===Tt.length-1?U.push(we):we.items&&ot(we.items(),Tt,Et+1);else if(Me.direct)return;we.items&&ot(we.items(),Tt,Et)}}if(v.items){for(T=0,B=et.length;T<B;T++)ot(v.items(),et[T],0);1<B&&(U=function(xt){for(var Tt,Et=[],Ut=xt.length;Ut--;)(Tt=xt[Ut]).__checked||(Et.push(Tt),Tt.__checked=1);for(Ut=Et.length;Ut--;)delete Et[Ut].__checked;return Et}(U))}return Ar||(Ar=uo.Collection),new Ar(U)}}),Ko=Array.prototype.push,ka=Array.prototype.slice;ma={length:0,init:function(v){v&&this.add(v)},add:function(v){return Ue.isArray(v)?Ko.apply(this,v):v instanceof lo?this.add(v.toArray()):Ko.call(this,v),this},set:function(v){var T,B=this,U=B.length;for(B.length=0,B.add(v),T=B.length;T<U;T++)delete B[T];return B},filter:function(v){var T,B,U,et,ot=[];for("string"==typeof v?(v=new uo(v),et=function(xt){return v.match(xt)}):et=v,T=0,B=this.length;T<B;T++)et(U=this[T])&&ot.push(U);return new lo(ot)},slice:function(){return new lo(ka.apply(this,arguments))},eq:function(v){return-1===v?this.slice(v):this.slice(v,+v+1)},each:function(v){return Ue.each(this,v),this},toArray:function(){return Ue.toArray(this)},indexOf:function(v){for(var T=this.length;T--&&this[T]!==v;);return T},reverse:function(){return new lo(Ue.toArray(this).reverse())},hasClass:function(v){return!!this[0]&&this[0].classes.contains(v)},prop:function(v,T){var B;return void 0!==T?(this.each(function(U){U[v]&&U[v](T)}),this):(B=this[0])&&B[v]?B[v]():void 0},exec:function(v){var T=Ue.toArray(arguments).slice(1);return this.each(function(B){B[v]&&B[v].apply(B,T)}),this},remove:function(){for(var v=this.length;v--;)this[v].remove();return this},addClass:function(v){return this.each(function(T){T.classes.add(v)})},removeClass:function(v){return this.each(function(T){T.classes.remove(v)})}},Ue.each("fire on off show hide append prepend before after reflow".split(" "),function(v){ma[v]=function(){var T=Ue.toArray(arguments);return this.each(function(B){v in B&&B[v].apply(B,T)}),this}}),Ue.each("text name disabled active selected checked visible parent value data".split(" "),function(v){ma[v]=function(T){return this.prop(v,T)}}),lo=wi.extend(ma);var za=uo.Collection=lo,ur=function(v){this.create=v.create};ur.create=function(v,T){return new ur({create:function(B,U){var et,ot=function(xt){B.set(U,xt.value)};return B.on("change:"+U,function(xt){v.set(T,xt.value)}),v.on("change:"+T,ot),(et=B._bindings)||(et=B._bindings=[],B.on("destroy",function(){for(var xt=et.length;xt--;)et[xt]()})),et.push(function(){v.off("change:"+T,ot)}),v.get(T)}})};var zr=tinymce.util.Tools.resolve("tinymce.util.Observable");function vo(v){return 0<v.nodeType}var Za,Ka,Qs=wi.extend({Mixins:[zr],init:function(v){var T,B;for(T in v=v||{})(B=v[T])instanceof ur&&(v[T]=B.create(this,T));this.data=v},set:function(v,T){var B,U,et=this.data[v];if(T instanceof ur&&(T=T.create(this,v)),"object"==typeof v){for(B in v)this.set(B,v[B]);return this}return function ot(xt,Tt){var Et,Ut;if(xt===Tt)return!0;if(null===xt||null===Tt||"object"!=typeof xt||"object"!=typeof Tt)return xt===Tt;if(Ue.isArray(Tt)){if(xt.length!==Tt.length)return!1;for(Et=xt.length;Et--;)if(!ot(xt[Et],Tt[Et]))return!1}if(vo(xt)||vo(Tt))return xt===Tt;for(Et in Ut={},Tt){if(!ot(xt[Et],Tt[Et]))return!1;Ut[Et]=!0}for(Et in xt)if(!Ut[Et]&&!ot(xt[Et],Tt[Et]))return!1;return!0}(et,T)||(this.data[v]=T,this.fire("change:"+v,U={target:this,name:v,value:T,oldValue:et}),this.fire("change",U)),this},get:function(v){return this.data[v]},has:function(v){return v in this.data},bind:function(v){return ur.create(this,v)},destroy:function(){this.fire("destroy")}}),Ja={},yo={add:function(v){var T=v.parent();if(T){if(!T._layout||T._layout.isNative())return;Ja[T._id]||(Ja[T._id]=T),Za||(Za=!0,zn.requestAnimationFrame(function(){var B,U;for(B in Za=!1,Ja)(U=Ja[B]).state.get("rendered")&&U.reflow();Ja={}},Rt.document.body))}},remove:function(v){Ja[v._id]&&delete Ja[v._id]}},ks="onmousewheel"in Rt.document,xo=0,cs={Statics:{classPrefix:"mce-"},isRtl:function(){return Ka.rtl},classPrefix:"mce-",init:function(v){var T,B,U=this;function et(ot){var xt;for(ot=ot.split(" "),xt=0;xt<ot.length;xt++)U.classes.add(ot[xt])}U.settings=v=Ue.extend({},U.Defaults,v),U._id=v.id||"mceu_"+xo++,U._aria={role:v.role},U._elmCache={},U.$=Qn,U.state=new Qs({visible:!0,active:!1,disabled:!1,value:""}),U.data=new Qs(v.data),U.classes=new Js(function(){U.state.get("rendered")&&(U.getEl().className=this.toString())}),U.classes.prefix=U.classPrefix,(T=v.classes)&&(U.Defaults&&(B=U.Defaults.classes)&&T!==B&&et(B),et(T)),Ue.each("title text name visible disabled active value".split(" "),function(ot){ot in v&&U[ot](v[ot])}),U.on("click",function(){if(U.disabled())return!1}),U.settings=v,U.borderBox=ir(v.border),U.paddingBox=ir(v.padding),U.marginBox=ir(v.margin),v.hidden&&U.hide()},Properties:"parent,name",getContainerElm:function(){return kn_getUiContainer(this)||De.getContainer()},getParentCtrl:function(v){for(var T,B=this.getRoot().controlIdLookup;v&&B&&!(T=B[v.id]);)v=v.parentNode;return T},initLayoutRect:function(){var v,T,B,U,et,ot,xt,Tt,Et,Ut,le=this,qt=le.settings,re=le.getEl();v=le.borderBox=le.borderBox||pa(re,"border"),le.paddingBox=le.paddingBox||pa(re,"padding"),le.marginBox=le.marginBox||pa(re,"margin"),Ut=De.getSize(re),et=(Tt=qt.minWidth)||Ut.width,ot=(Et=qt.minHeight)||Ut.height,B=qt.width,U=qt.height,xt=void 0!==(xt=qt.autoResize)?xt:!B&&!U;var we=v.left+v.right,Me=v.top+v.bottom,ci=qt.maxWidth||65535,ii=qt.maxHeight||65535;return le._layoutRect=T={x:qt.x||0,y:qt.y||0,w:B=B||et,h:U=U||ot,deltaW:we,deltaH:Me,contentW:B-we,contentH:U-Me,innerW:B-we,innerH:U-Me,startMinWidth:Tt||0,startMinHeight:Et||0,minW:Math.min(et,ci),minH:Math.min(ot,ii),maxW:ci,maxH:ii,autoResize:xt,scrollW:0},le._lastLayoutRect={},T},layoutRect:function(v){var T,B,U,et,ot,xt=this,Tt=xt._layoutRect;return Tt||(Tt=xt.initLayoutRect()),v?(U=Tt.deltaW,et=Tt.deltaH,void 0!==v.x&&(Tt.x=v.x),void 0!==v.y&&(Tt.y=v.y),void 0!==v.minW&&(Tt.minW=v.minW),void 0!==v.minH&&(Tt.minH=v.minH),void 0!==(B=v.w)&&(B=(B=B<Tt.minW?Tt.minW:B)>Tt.maxW?Tt.maxW:B,Tt.w=B,Tt.innerW=B-U),void 0!==(B=v.h)&&(B=(B=B<Tt.minH?Tt.minH:B)>Tt.maxH?Tt.maxH:B,Tt.h=B,Tt.innerH=B-et),void 0!==(B=v.innerW)&&(B=(B=B<Tt.minW-U?Tt.minW-U:B)>Tt.maxW-U?Tt.maxW-U:B,Tt.innerW=B,Tt.w=B+U),void 0!==(B=v.innerH)&&(B=(B=B<Tt.minH-et?Tt.minH-et:B)>Tt.maxH-et?Tt.maxH-et:B,Tt.innerH=B,Tt.h=B+et),void 0!==v.contentW&&(Tt.contentW=v.contentW),void 0!==v.contentH&&(Tt.contentH=v.contentH),(T=xt._lastLayoutRect).x===Tt.x&&T.y===Tt.y&&T.w===Tt.w&&T.h===Tt.h||((ot=Ka.repaintControls)&&ot.map&&!ot.map[xt._id]&&(ot.push(xt),ot.map[xt._id]=!0),T.x=Tt.x,T.y=Tt.y,T.w=Tt.w,T.h=Tt.h),xt):Tt},repaint:function(){var v,T,B,U,et,ot,xt,Tt,Et,Ut,le=this;Et=Rt.document.createRange?function(qt){return qt}:Math.round,v=le.getEl().style,ot=(et=le.borderBox).left+et.right,xt=et.top+et.bottom,(U=le._layoutRect).x!==(Tt=le._lastRepaintRect||{}).x&&(v.left=Et(U.x)+"px",Tt.x=U.x),U.y!==Tt.y&&(v.top=Et(U.y)+"px",Tt.y=U.y),U.w!==Tt.w&&(Ut=Et(U.w-ot),v.width=(0<=Ut?Ut:0)+"px",Tt.w=U.w),U.h!==Tt.h&&(Ut=Et(U.h-xt),v.height=(0<=Ut?Ut:0)+"px",Tt.h=U.h),le._hasBody&&U.innerW!==Tt.innerW&&(Ut=Et(U.innerW),(B=le.getEl("body"))&&((T=B.style).width=(0<=Ut?Ut:0)+"px"),Tt.innerW=U.innerW),le._hasBody&&U.innerH!==Tt.innerH&&(Ut=Et(U.innerH),(B=B||le.getEl("body"))&&((T=T||B.style).height=(0<=Ut?Ut:0)+"px"),Tt.innerH=U.innerH),le._lastRepaintRect=Tt,le.fire("repaint",{},!1)},updateLayoutRect:function(){var v=this;v.parent()._lastRect=null,De.css(v.getEl(),{width:"",height:""}),v._layoutRect=v._lastRepaintRect=v._lastLayoutRect=null,v.initLayoutRect()},on:function(v,T){var B,U,et,ot=this;return bu(ot).on(v,"string"!=typeof(B=T)?B:function(xt){return U||ot.parentsAndSelf().each(function(Tt){var Et=Tt.settings.callbacks;if(Et&&(U=Et[B]))return et=Tt,!1}),U?U.call(et,xt):(xt.action=B,void this.fire("execute",xt))}),ot},off:function(v,T){return bu(this).off(v,T),this},fire:function(v,T,B){if((T=T||{}).control||(T.control=this),T=bu(this).fire(v,T),!1!==B&&this.parent)for(var U=this.parent();U&&!T.isPropagationStopped();)U.fire(v,T,!1),U=U.parent();return T},hasEventListeners:function(v){return bu(this).has(v)},parents:function(v){var T,B=new za;for(T=this.parent();T;T=T.parent())B.add(T);return v&&(B=B.filter(v)),B},parentsAndSelf:function(v){return new za(this).add(this.parents(v))},next:function(){var v=this.parent().items();return v[v.indexOf(this)+1]},prev:function(){var v=this.parent().items();return v[v.indexOf(this)-1]},innerHtml:function(v){return this.$el.html(v),this},getEl:function(v){var T=v?this._id+"-"+v:this._id;return this._elmCache[T]||(this._elmCache[T]=Qn("#"+T)[0]),this._elmCache[T]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(v){}return this},blur:function(){return this.getEl().blur(),this},aria:function(v,T){var B=this,U=B.getEl(B.ariaTarget);return void 0===T?B._aria[v]:(B._aria[v]=T,B.state.get("rendered")&&U.setAttribute("role"===v?v:"aria-"+v,T),B)},encode:function(v,T){return!1!==T&&(v=this.translate(v)),(v||"").replace(/[&<>"]/g,function(B){return"&#"+B.charCodeAt(0)+";"})},translate:function(v){return Ka.translate?Ka.translate(v):v},before:function(v){var T=this.parent();return T&&T.insert(v,T.items().indexOf(this),!0),this},after:function(v){var T=this.parent();return T&&T.insert(v,T.items().indexOf(this)),this},remove:function(){var v,T,B=this,U=B.getEl(),et=B.parent();if(B.items){var ot=B.items().toArray();for(T=ot.length;T--;)ot[T].remove()}et&&et.items&&(v=[],et.items().each(function(Tt){Tt!==B&&v.push(Tt)}),et.items().set(v),et._lastRect=null),B._eventsRoot&&B._eventsRoot===B&&Qn(U).off();var xt=B.getRoot().controlIdLookup;return xt&&delete xt[B._id],U&&U.parentNode&&U.parentNode.removeChild(U),B.state.set("rendered",!1),B.state.destroy(),B.fire("remove"),B},renderBefore:function(v){return Qn(v).before(this.renderHtml()),this.postRender(),this},renderTo:function(v){return Qn(v||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var v,T,B,U,et,ot=this,xt=ot.settings;for(U in ot.$el=Qn(ot.getEl()),ot.state.set("rendered",!0),xt)0===U.indexOf("on")&&ot.on(U.substr(2),xt[U]);if(ot._eventsRoot){for(B=ot.parent();!et&&B;B=B.parent())et=B._eventsRoot;if(et)for(U in et._nativeEvents)ot._nativeEvents[U]=!0}Ia(ot),xt.style&&(v=ot.getEl())&&(v.setAttribute("style",xt.style),v.style.cssText=xt.style),ot.settings.border&&ot.$el.css({"border-top-width":(T=ot.borderBox).top,"border-right-width":T.right,"border-bottom-width":T.bottom,"border-left-width":T.left});var Tt=ot.getRoot();for(var Et in Tt.controlIdLookup||(Tt.controlIdLookup={}),(Tt.controlIdLookup[ot._id]=ot)._aria)ot.aria(Et,ot._aria[Et]);!1===ot.state.get("visible")&&(ot.getEl().style.display="none"),ot.bindStates(),ot.state.on("change:visible",function(Ut){var le,qt=Ut.value;ot.state.get("rendered")&&(ot.getEl().style.display=!1===qt?"none":"",ot.getEl().getBoundingClientRect()),(le=ot.parent())&&(le._lastRect=null),ot.fire(qt?"show":"hide"),yo.add(ot)}),ot.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(v){var T,B,U,et,ot,xt,Tt=this.getEl(),Et=Tt.parentNode,Ut=function(le,qt){var re,we,Me=le;for(re=we=0;Me&&Me!==qt&&Me.nodeType;)re+=Me.offsetLeft||0,we+=Me.offsetTop||0,Me=Me.offsetParent;return{x:re,y:we}}(Tt,Et);return T=Ut.x,B=Ut.y,U=Tt.offsetWidth,et=Tt.offsetHeight,ot=Et.clientWidth,xt=Et.clientHeight,"end"===v?(T-=ot-U,B-=xt-et):"center"===v&&(T-=ot/2-U/2,B-=xt/2-et/2),Et.scrollLeft=T,Et.scrollTop=B,this},getRoot:function(){for(var v,T=this,B=[];T;){if(T.rootControl){v=T.rootControl;break}B.push(T),T=(v=T).parent()}v||(v=this);for(var U=B.length;U--;)B[U].rootControl=v;return v},reflow:function(){yo.remove(this);var v=this.parent();return v&&v._layout&&!v._layout.isNative()&&v.reflow(),this}};function bu(v){return v._eventDispatcher||(v._eventDispatcher=new Ai({scope:v,toggleEvent:function(T,B){B&&Ai.isNative(T)&&(v._nativeEvents||(v._nativeEvents={}),v._nativeEvents[T]=!0,v.state.get("rendered")&&Ia(v))}})),v._eventDispatcher}function Ia(v){var T,B,U,et,ot,xt;function Tt(re){var we=v.getParentCtrl(re.target);we&&we.fire(re.type,re)}function Et(){var re=et._lastHoverCtrl;re&&(re.fire("mouseleave",{target:re.getEl()}),re.parents().each(function(we){we.fire("mouseleave",{target:we.getEl()})}),et._lastHoverCtrl=null)}function Ut(re){var we,Me,ci,ii=v.getParentCtrl(re.target),di=et._lastHoverCtrl,Vi=0;if(ii!==di){if((Me=(et._lastHoverCtrl=ii).parents().toArray().reverse()).push(ii),di){for((ci=di.parents().toArray().reverse()).push(di),Vi=0;Vi<ci.length&&Me[Vi]===ci[Vi];Vi++);for(we=ci.length-1;Vi<=we;we--)(di=ci[we]).fire("mouseleave",{target:di.getEl()})}for(we=Vi;we<Me.length;we++)(ii=Me[we]).fire("mouseenter",{target:ii.getEl()})}}function le(re){re.preventDefault(),"mousewheel"===re.type?(re.deltaY=-.025*re.wheelDelta,re.wheelDeltaX&&(re.deltaX=-.025*re.wheelDeltaX)):(re.deltaX=0,re.deltaY=re.detail),re=v.fire("wheel",re)}if(ot=v._nativeEvents){for((U=v.parents().toArray()).unshift(v),T=0,B=U.length;!et&&T<B;T++)et=U[T]._eventsRoot;for(et||(et=U[U.length-1]||v),v._eventsRoot=et,B=T,T=0;T<B;T++)U[T]._eventsRoot=et;var qt=et._delegates;for(xt in qt||(qt=et._delegates={}),ot){if(!ot)return!1;"wheel"!==xt?("mouseenter"===xt||"mouseleave"===xt?et._hasMouseEnter||(Qn(et.getEl()).on("mouseleave",Et).on("mouseover",Ut),et._hasMouseEnter=1):qt[xt]||(Qn(et.getEl()).on(xt,Tt),qt[xt]=!0),ot[xt]=!1):ks?Qn(v.getEl()).on("mousewheel",le):Qn(v.getEl()).on("DOMMouseScroll",le)}}}Ue.each("text title visible disabled active value".split(" "),function(v){cs[v]=function(T){return 0===arguments.length?this.state.get(v):(void 0!==T&&this.state.set(v,T),this)}});var Go=Ka=wi.extend(cs),yt=function(v){return!!v.getAttribute("data-mce-tabstop")};function Ft(v){var T,B,U=v.root;function et(Lt){return Lt&&1===Lt.nodeType}try{T=Rt.document.activeElement}catch(Lt){T=Rt.document.body}function ot(Lt){return et(Lt=Lt||T)?Lt.getAttribute("role"):null}function xt(Lt){for(var An,Ti=Lt||T;Ti=Ti.parentNode;)if(An=ot(Ti))return An}function Tt(Lt){var An=T;if(et(An))return An.getAttribute("aria-"+Lt)}function Et(Lt){var An=Lt.tagName.toUpperCase();return"INPUT"===An||"TEXTAREA"===An||"SELECT"===An}function Ut(Lt){var An=[];return function Ti(Ki){if(1===Ki.nodeType&&"none"!==Ki.style.display&&!Ki.disabled){var xr;(Et(xr=Ki)&&!xr.hidden||yt(xr)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(ot(xr)))&&An.push(Ki);for(var So=0;So<Ki.childNodes.length;So++)Ti(Ki.childNodes[So])}}(Lt||U.getEl()),An}function le(Lt){var An,Ti;(Ti=(Lt=Lt||B).parents().toArray()).unshift(Lt);for(var Ki=0;Ki<Ti.length&&!(An=Ti[Ki]).settings.ariaRoot;Ki++);return An}function qt(Lt,An){return Lt<0?Lt=An.length-1:Lt>=An.length&&(Lt=0),An[Lt]&&An[Lt].focus(),Lt}function re(Lt,An){var Ti=-1,Ki=le();An=An||Ut(Ki.getEl());for(var xr=0;xr<An.length;xr++)An[xr]===T&&(Ti=xr);Ki.lastAriaIndex=qt(Ti+=Lt,An)}function we(){"tablist"===xt()?re(-1,Ut(T.parentNode)):B.parent().submenu?di():re(-1)}function Me(){var Lt=ot(),An=xt();"tablist"===An?re(1,Ut(T.parentNode)):"menuitem"===Lt&&"menu"===An&&Tt("haspopup")?Vi():re(1)}function ci(){re(-1)}function ii(){var Lt=ot(),An=xt();"menuitem"===Lt&&"menubar"===An?Vi():"button"===Lt&&Tt("haspopup")?Vi({key:"down"}):re(1)}function di(){B.fire("cancel")}function Vi(Lt){B.fire("click",{target:T,aria:Lt=Lt||{}})}return B=U.getParentCtrl(T),U.on("keydown",function(Lt){function An(Ti,Ki){Et(T)||yt(T)||"slider"!==ot(T)&&!1!==Ki(Ti)&&Ti.preventDefault()}if(!Lt.isDefaultPrevented())switch(Lt.keyCode){case 37:An(Lt,we);break;case 39:An(Lt,Me);break;case 38:An(Lt,ci);break;case 40:An(Lt,ii);break;case 27:di();break;case 14:case 13:case 32:An(Lt,Vi);break;case 9:(function(Ti){if("tablist"===xt()){var Ki=Ut(B.getEl("body"))[0];Ki&&Ki.focus()}else re(Ti.shiftKey?-1:1)})(Lt),Lt.preventDefault()}}),U.on("focusin",function(Lt){T=Lt.target,B=Lt.control}),{focusFirst:function(Lt){var An=le(Lt),Ti=Ut(An.getEl());qt(An.settings.ariaRemember&&"lastAriaIndex"in An?An.lastAriaIndex:0,Ti)}}}var oe={},Kt=Go.extend({init:function(v){var T=this;T._super(v),(v=T.settings).fixed&&T.state.set("fixed",!0),T._items=new za,T.isRtl()&&T.classes.add("rtl"),T.bodyClasses=new Js(function(){T.state.get("rendered")&&(T.getEl("body").className=this.toString())}),T.bodyClasses.prefix=T.classPrefix,T.classes.add("container"),T.bodyClasses.add("container-body"),v.containerCls&&T.classes.add(v.containerCls),T._layout=fn.create((v.layout||"")+"layout"),T.add(T.settings.items?T.settings.items:T.render()),T._hasBody=!0},items:function(){return this._items},find:function(v){return(v=oe[v]=oe[v]||new uo(v)).find(this)},add:function(v){return this.items().add(this.create(v)).parent(this),this},focus:function(v){var T,B,U,et=this;if(!v||!(B=et.keyboardNav||et.parents().eq(-1)[0].keyboardNav))return U=et.find("*"),et.statusbar&&U.add(et.statusbar.items()),U.each(function(ot){if(ot.settings.autofocus)return T=null,!1;ot.canFocus&&(T=T||ot)}),T&&T.focus(),et;B.focusFirst(et)},replace:function(v,T){for(var B,U=this.items(),et=U.length;et--;)if(U[et]===v){U[et]=T;break}0<=et&&((B=T.getEl())&&B.parentNode.removeChild(B),(B=v.getEl())&&B.parentNode.removeChild(B)),T.parent(this)},create:function(v){var T,B=this,U=[];return Ue.isArray(v)||(v=[v]),Ue.each(v,function(et){et&&(et instanceof Go||("string"==typeof et&&(et={type:et}),T=Ue.extend({},B.settings.defaults,et),et.type=T.type=T.type||et.type||B.settings.defaultType||(T.defaults?T.defaults.type:null),et=fn.create(T)),U.push(et))}),U},renderNew:function(){var v=this;return v.items().each(function(T,B){var U;T.parent(v),T.state.get("rendered")||((U=v.getEl("body")).hasChildNodes()&&B<=U.childNodes.length-1?Qn(U.childNodes[B]).before(T.renderHtml()):Qn(U).append(T.renderHtml()),T.postRender(),yo.add(T))}),v._layout.applyClasses(v.items().filter(":visible")),v._lastRect=null,v},append:function(v){return this.add(v).renderNew()},prepend:function(v){return this.items().set(this.create(v).concat(this.items().toArray())),this.renderNew()},insert:function(v,T,B){var U,et,ot;return v=this.create(v),U=this.items(),!B&&T<U.length-1&&(T+=1),0<=T&&T<U.length&&(et=U.slice(0,T).toArray(),ot=U.slice(T).toArray(),U.set(et.concat(v,ot))),this.renderNew()},fromJSON:function(v){for(var T in v)this.find("#"+T).value(v[T]);return this},toJSON:function(){var v={};return this.find("*").each(function(T){var B=T.name(),U=T.value();B&&void 0!==U&&(v[B]=U)}),v},renderHtml:function(){var v=this,T=v._layout,B=this.settings.role;return v.preRender(),T.preRender(v),'<div id="'+v._id+'" class="'+v.classes+'"'+(B?' role="'+this.settings.role+'"':"")+'><div id="'+v._id+'-body" class="'+v.bodyClasses+'">'+(v.settings.html||"")+T.renderHtml(v)+"</div></div>"},postRender:function(){var v,T=this;return T.items().exec("postRender"),T._super(),T._layout.postRender(T),T.state.set("rendered",!0),T.settings.style&&T.$el.css(T.settings.style),T.settings.border&&T.$el.css({"border-top-width":(v=T.borderBox).top,"border-right-width":v.right,"border-bottom-width":v.bottom,"border-left-width":v.left}),T.parent()||(T.keyboardNav=Ft({root:T})),T},initLayoutRect:function(){var v=this._super();return this._layout.recalc(this),v},recalc:function(){var v=this,T=v._layoutRect,B=v._lastRect;if(!B||B.w!==T.w||B.h!==T.h)return v._layout.recalc(v),T=v.layoutRect(),v._lastRect={x:T.x,y:T.y,w:T.w,h:T.h},!0},reflow:function(){var v;if(yo.remove(this),this.visible()){for(Go.repaintControls=[],Go.repaintControls.map={},this.recalc(),v=Go.repaintControls.length;v--;)Go.repaintControls[v].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Go.repaintControls=[]}return this}});function fe(v){var T,B;if(v.changedTouches)for(T="screenX screenY pageX pageY clientX clientY".split(" "),B=0;B<T.length;B++)v[T[B]]=v.changedTouches[0][T[B]]}function he(v,T){var B,U,et,ot,xt,Tt,Et,Ut=T.document||Rt.document,le=Ut.getElementById((T=T||{}).handle||v);et=function(qt){var re,we,Me,ci,ii,di,Vi,Lt,An,Ti,Ki,xr=(re=Ut,ci=(An=Math.max)((we=re.documentElement).scrollWidth,(Me=re.body).scrollWidth),ii=An(we.clientWidth,Me.clientWidth),di=An(we.offsetWidth,Me.offsetWidth),Vi=An(we.scrollHeight,Me.scrollHeight),Lt=An(we.clientHeight,Me.clientHeight),{width:ci<di?ii:ci,height:Vi<An(we.offsetHeight,Me.offsetHeight)?Lt:Vi});fe(qt),qt.preventDefault(),U=qt.button,Ti=le,Tt=qt.screenX,Et=qt.screenY,Ki=Rt.window.getComputedStyle?Rt.window.getComputedStyle(Ti,null).getPropertyValue("cursor"):Ti.runtimeStyle.cursor,B=Qn("<div></div>").css({position:"absolute",top:0,left:0,width:xr.width,height:xr.height,zIndex:2147483647,opacity:1e-4,cursor:Ki}).appendTo(Ut.body),Qn(Ut).on("mousemove touchmove",xt).on("mouseup touchend",ot),T.start(qt)},xt=function(qt){if(fe(qt),qt.button!==U)return ot(qt);qt.deltaX=qt.screenX-Tt,qt.deltaY=qt.screenY-Et,qt.preventDefault(),T.drag(qt)},ot=function(qt){fe(qt),Qn(Ut).off("mousemove touchmove",xt).off("mouseup touchend",ot),B.remove(),T.stop&&T.stop(qt)},this.destroy=function(){Qn(le).off()},Qn(le).on("mousedown touchstart",et)}var In,Pe,hn,vn,pn={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var v=this;function B(){var U,et,ot;function xt(Tt,Et,Ut,le,qt,re){var we,Me,ci,ii,di,Vi,Lt,An;if(Me=v.getEl("scroll"+Tt)){if(Lt=Et.toLowerCase(),An=Ut.toLowerCase(),Qn(v.getEl("absend")).css(Lt,v.layoutRect()[le]-1),!qt)return void Qn(Me).css("display","none");Qn(Me).css("display","block"),we=v.getEl("body"),ci=v.getEl("scroll"+Tt+"t"),ii=we["client"+Ut]-4,di=(ii-=U&&et?Me["client"+re]:0)/we["scroll"+Ut],(Vi={})[Lt]=we["offset"+Et]+2,Vi[An]=ii,Qn(Me).css(Vi),(Vi={})[Lt]=we["scroll"+Et]*di,Vi[An]=ii*di,Qn(ci).css(Vi)}}ot=v.getEl("body"),et=ot.scrollHeight>ot.clientHeight,xt("h","Left","Width","contentW",U=ot.scrollWidth>ot.clientWidth,"Height"),xt("v","Top","Height","contentH",et,"Width")}v.settings.autoScroll&&(v._hasScroll||(v._hasScroll=!0,function(){function U(et,ot,xt,Tt,Et){var Ut,le=v._id+"-scroll"+et,qt=v.classPrefix;Qn(v.getEl()).append('<div id="'+le+'" class="'+qt+"scrollbar "+qt+"scrollbar-"+et+'"><div id="'+le+'t" class="'+qt+'scrollbar-thumb"></div></div>'),v.draghelper=new he(le+"t",{start:function(){Ut=v.getEl("body")["scroll"+ot],Qn("#"+le).addClass(qt+"active")},drag:function(re){var we,Me,ci,ii,di=v.layoutRect();Me=di.contentW>di.innerW,ci=di.contentH>di.innerH,ii=v.getEl("body")["client"+xt]-4,we=(ii-=Me&&ci?v.getEl("scroll"+et)["client"+Et]:0)/v.getEl("body")["scroll"+xt],v.getEl("body")["scroll"+ot]=Ut+re["delta"+Tt]/we},stop:function(){Qn("#"+le).removeClass(qt+"active")}})}v.classes.add("scroll"),U("v","Top","Height","Y","Width"),U("h","Left","Width","X","Height")}(),v.on("wheel",function(U){var et=v.getEl("body");et.scrollLeft+=10*(U.deltaX||0),et.scrollTop+=10*U.deltaY,B()}),Qn(v.getEl("body")).on("scroll",B)),B())}},Le=Kt.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[pn],renderHtml:function(){var v=this,T=v._layout,B=v.settings.html;return v.preRender(),T.preRender(v),void 0===B?B='<div id="'+v._id+'-body" class="'+v.bodyClasses+'">'+T.renderHtml(v)+"</div>":("function"==typeof B&&(B=B.call(v)),v._hasBody=!1),'<div id="'+v._id+'" class="'+v.classes+'" hidefocus="1" tabindex="-1" role="group">'+(v._preBodyHtml||"")+B+"</div>"}}),xn={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(v,T){if(v<=1||T<=1){var B=De.getWindowSize();v=v<=1?v*B.w:v,T=T<=1?T*B.h:T}return this._layoutRect.autoResize=!1,this.layoutRect({minW:v,minH:T,w:v,h:T}).reflow()},resizeBy:function(v,T){var B=this.layoutRect();return this.resizeTo(B.w+v,B.h+T)}},en=[],He=[];function Un(v,T){for(;v;){if(v===T)return!0;v=v.parent()}}function Ii(v){var T=De.getViewPort().y;function B(U,et){for(var ot,xt=0;xt<en.length;xt++)if(en[xt]!==v)for(ot=en[xt].parent();ot&&(ot=ot.parent());)ot===v&&en[xt].fixed(U).moveBy(0,et).repaint()}v.settings.autofix&&(v.state.get("fixed")?v._autoFixY>T&&(v.fixed(!1).layoutRect({y:v._autoFixY}).repaint(),B(!1,v._autoFixY-T)):(v._autoFixY=v.layoutRect().y,v._autoFixY<T&&(v.fixed(!0).layoutRect({y:0}).repaint(),B(!0,T-v._autoFixY))))}function ri(v,T){var B,U,et=er.zIndex||65535;if(v)He.push(T);else for(B=He.length;B--;)He[B]===T&&He.splice(B,1);if(He.length)for(B=0;B<He.length;B++)He[B].modal&&(et++,U=He[B]),He[B].getEl().style.zIndex=et,He[B].zIndex=et,et++;var ot=Qn("#"+T.classPrefix+"modal-block",T.getContainerElm())[0];U?Qn(ot).css("z-index",U.zIndex-1):ot&&(ot.parentNode.removeChild(ot),vn=!1),er.currentZIndex=et}var er=Le.extend({Mixins:[Mi,xn],init:function(v){var T=this;T._super(v),(T._eventsRoot=T).classes.add("floatpanel"),v.autohide&&(function li(){In||(In=function(v){2!==v.button&&function(T){for(var B=en.length;B--;){var U=en[B],et=U.getParentCtrl(T.target);if(U.settings.autohide){if(et&&(Un(et,U)||U.parent()===et))continue;(T=U.fire("autohide",{target:T.target})).isDefaultPrevented()||U.hide()}}}(v)},Qn(Rt.document).on("click touchstart",In))}(),function(){if(!hn){var B=Rt.document.documentElement,U=B.clientWidth,et=B.clientHeight;hn=function(){Rt.document.all&&U===B.clientWidth&&et===B.clientHeight||(U=B.clientWidth,et=B.clientHeight,er.hideAll())},Qn(Rt.window).on("resize",hn)}}(),en.push(T)),v.autofix&&(Pe||(Pe=function(){var B;for(B=en.length;B--;)Ii(en[B])},Qn(Rt.window).on("scroll",Pe)),T.on("move",function(){Ii(this)})),T.on("postrender show",function(B){if(B.control===T){var U,et=T.classPrefix;T.modal&&!vn&&((U=Qn("#"+et+"modal-block",T.getContainerElm()))[0]||(U=Qn('<div id="'+et+'modal-block" class="'+et+"reset "+et+'fade"></div>').appendTo(T.getContainerElm())),zn.setTimeout(function(){U.addClass(et+"in"),Qn(T.getEl()).addClass(et+"in")}),vn=!0),ri(!0,T)}}),T.on("show",function(){T.parents().each(function(B){if(B.state.get("fixed"))return T.fixed(!0),!1})}),v.popover&&(T._preBodyHtml='<div class="'+T.classPrefix+'arrow"></div>',T.classes.add("popover").add("bottom").add(T.isRtl()?"end":"start")),T.aria("label",v.ariaLabel),T.aria("labelledby",T._id),T.aria("describedby",T.describedBy||T._id+"-none")},fixed:function(v){var T=this;if(T.state.get("fixed")!==v){if(T.state.get("rendered")){var B=De.getViewPort();v?T.layoutRect().y-=B.y:T.layoutRect().y+=B.y}T.classes.toggle("fixed",v),T.state.set("fixed",v)}return T},show:function(){var v,T=this._super();for(v=en.length;v--&&en[v]!==this;);return-1===v&&en.push(this),T},hide:function(){return Hi(this),ri(!1,this),this._super()},hideAll:function(){er.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),ri(!1,this)),this},remove:function(){Hi(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function Hi(v){var T;for(T=en.length;T--;)en[T]===v&&en.splice(T,1);for(T=He.length;T--;)He[T]===v&&He.splice(T,1)}function Qr(v,T){var B,U,et=this,ot=Go.classPrefix;et.show=function(xt,Tt){function Et(){B&&(Qn(v).append('<div class="'+ot+"throbber"+(T?" "+ot+"throbber-inline":"")+'"></div>'),Tt&&Tt())}return et.hide(),B=!0,xt?U=zn.setTimeout(Et,xt):Et(),et},et.hide=function(){var xt=v.lastChild;return zn.clearTimeout(U),xt&&-1!==xt.className.indexOf("throbber")&&xt.parentNode.removeChild(xt),B=!1,et}}er.hideAll=function(){for(var v=en.length;v--;){var T=en[v];T&&T.settings.autohide&&(T.hide(),en.splice(v,1))}};var _o=Go.extend({Mixins:[Mi],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var v=this,T=v.classPrefix;return'<div id="'+v._id+'" class="'+v.classes+'" role="presentation"><div class="'+T+'tooltip-arrow"></div><div class="'+T+'tooltip-inner">'+v.encode(v.state.get("text"))+"</div></div>"},bindStates:function(){var v=this;return v.state.on("change:text",function(T){v.getEl().lastChild.innerHTML=v.encode(T.value)}),v._super()},repaint:function(){var v,T;(v=this.getEl().style).left=(T=this._layoutRect).x+"px",v.top=T.y+"px",v.zIndex=131070}}),fr=Go.extend({init:function(v){var T=this;T._super(v),v=T.settings,T.canFocus=!0,v.tooltip&&!1!==fr.tooltips&&(T.on("mouseenter",function(B){var U=T.tooltip().moveTo(-65535);if(B.control===T){var et=U.text(v.tooltip).show().testMoveRel(T.getEl(),["bc-tc","bc-tl","bc-tr"]);U.classes.toggle("tooltip-n","bc-tc"===et),U.classes.toggle("tooltip-nw","bc-tl"===et),U.classes.toggle("tooltip-ne","bc-tr"===et),U.moveRel(T.getEl(),et)}else U.hide()}),T.on("mouseleave mousedown click",function(){T.tooltip().remove(),T._tooltip=null})),T.aria("label",v.ariaLabel||v.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new _o({type:"tooltip"}),function(v,T){T.uiContainer=Rn(v)}(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var v=this,T=v.settings;v._super(),v.parent()||!T.width&&!T.height||(v.initLayoutRect(),v.repaint()),T.autofocus&&v.focus()},bindStates:function(){var v=this;function T(U){v.aria("disabled",U),v.classes.toggle("disabled",U)}function B(U){v.aria("pressed",U),v.classes.toggle("active",U)}return v.state.on("change:disabled",function(U){T(U.value)}),v.state.on("change:active",function(U){B(U.value)}),v.state.get("disabled")&&T(!0),v.state.get("active")&&B(!0),v._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Yl=fr.extend({Defaults:{value:0},init:function(v){this._super(v),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(T){return Math.round(T)})},renderHtml:function(){var T=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+T+'bar-container"><div class="'+T+'bar"></div></div><div class="'+T+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var v=this;function T(B){B=v.settings.filter(B),v.getEl().lastChild.innerHTML=B+"%",v.getEl().firstChild.firstChild.style.width=B+"%"}return v.state.on("change:value",function(B){T(B.value)}),T(v.state.get("value")),v._super()}}),tl=function(v,T){v.getEl().lastChild.textContent=T+(v.progressBar?" "+v.progressBar.value()+"%":"")},_u=Go.extend({Mixins:[Mi],Defaults:{classes:"widget notification"},init:function(v){var T=this;T._super(v),T.maxWidth=v.maxWidth,v.text&&T.text(v.text),v.icon&&(T.icon=v.icon),v.color&&(T.color=v.color),v.type&&T.classes.add("notification-"+v.type),v.timeout&&(v.timeout<0||0<v.timeout)&&!v.closeButton?T.closeButton=!1:(T.classes.add("has-close"),T.closeButton=!0),v.progressBar&&(T.progressBar=new Yl),T.on("click",function(B){-1!==B.target.className.indexOf(T.classPrefix+"close")&&T.close()})},renderHtml:function(){var v,T=this,B=T.classPrefix,U="",et="",ot="";return T.icon&&(U='<i class="'+B+"ico "+B+"i-"+T.icon+'"></i>'),v=' style="max-width: '+T.maxWidth+"px;"+(T.color?"background-color: "+T.color+';"':'"'),T.closeButton&&(et='<button type="button" class="'+B+'close" aria-hidden="true">\xd7</button>'),T.progressBar&&(ot=T.progressBar.renderHtml()),'<div id="'+T._id+'" class="'+T.classes+'"'+v+' role="presentation">'+U+'<div class="'+B+'notification-inner">'+T.state.get("text")+"</div>"+ot+et+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var v=this;return zn.setTimeout(function(){v.$el.addClass(v.classPrefix+"in"),tl(v,v.state.get("text"))},100),v._super()},bindStates:function(){var v=this;return v.state.on("change:text",function(T){v.getEl().firstChild.innerHTML=T.value,tl(v,T.value)}),v.progressBar&&(v.progressBar.bindStates(),v.progressBar.state.on("change:value",function(T){tl(v,v.state.get("text"))})),v._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var v,T;(v=this.getEl().style).left=(T=this._layoutRect).x+"px",v.top=T.y+"px",v.zIndex=65534}}),cr=[],wu="";function Tl(v){var T,B=Qn("meta[name=viewport]")[0];!1!==Jn.overrideViewPort&&(B||((B=Rt.document.createElement("meta")).setAttribute("name","viewport"),Rt.document.getElementsByTagName("head")[0].appendChild(B)),(T=B.getAttribute("content"))&&void 0!==wu&&(wu=T),B.setAttribute("content",v?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":wu))}var el=er.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(v){var T=this;T._super(v),T.isRtl()&&T.classes.add("rtl"),T.classes.add("window"),T.bodyClasses.add("window-body"),T.state.set("fixed",!0),v.buttons&&(T.statusbar=new Le({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:T.isRtl()?"start":"end",defaults:{type:"button"},items:v.buttons}),T.statusbar.classes.add("foot"),T.statusbar.parent(T)),T.on("click",function(B){var U=T.classPrefix+"close";(De.hasClass(B.target,U)||De.hasClass(B.target.parentNode,U))&&T.close()}),T.on("cancel",function(){T.close()}),T.on("move",function(B){B.control===T&&er.hideAll()}),T.aria("describedby",T.describedBy||T._id+"-none"),T.aria("label",v.title),T._fullscreen=!1},recalc:function(){var v,T,B,U,et=this,ot=et.statusbar;et._fullscreen&&(et.layoutRect(De.getWindowSize()),et.layoutRect().contentH=et.layoutRect().innerH),et._super(),v=et.layoutRect(),et.settings.title&&!et._fullscreen&&(T=v.headerW)>v.w&&(B=v.x-Math.max(0,T/2),et.layoutRect({w:T,x:B}),U=!0),ot&&(ot.layoutRect({w:et.layoutRect().innerW}).recalc(),(T=ot.layoutRect().minW+v.deltaW)>v.w&&(B=v.x-Math.max(0,T-v.w),et.layoutRect({w:T,x:B}),U=!0)),U&&et.recalc()},initLayoutRect:function(){var v,T=this,B=T._super(),U=0;if(T.settings.title&&!T._fullscreen){v=T.getEl("head");var et=De.getSize(v);B.headerW=et.width,B.headerH=et.height,U+=B.headerH}T.statusbar&&(U+=T.statusbar.layoutRect().h),B.deltaH+=U,B.minH+=U,B.h+=U;var ot=De.getWindowSize();return B.x=T.settings.x||Math.max(0,ot.w/2-B.w/2),B.y=T.settings.y||Math.max(0,ot.h/2-B.h/2),B},renderHtml:function(){var v=this,T=v._layout,B=v._id,U=v.classPrefix,et=v.settings,ot="",xt="",Tt=et.html;return v.preRender(),T.preRender(v),et.title&&(ot='<div id="'+B+'-head" class="'+U+'window-head"><div id="'+B+'-title" class="'+U+'title">'+v.encode(et.title)+'</div><div id="'+B+'-dragh" class="'+U+'dragh"></div><button type="button" class="'+U+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),et.url&&(Tt='<iframe src="'+et.url+'" tabindex="-1"></iframe>'),void 0===Tt&&(Tt=T.renderHtml(v)),v.statusbar&&(xt=v.statusbar.renderHtml()),'<div id="'+B+'" class="'+v.classes+'" hidefocus="1"><div class="'+v.classPrefix+'reset" role="application">'+ot+'<div id="'+B+'-body" class="'+v.bodyClasses+'">'+Tt+"</div>"+xt+"</div></div>"},fullscreen:function(v){var T,B,U=this,et=Rt.document.documentElement,ot=U.classPrefix;if(v!==U._fullscreen)if(Qn(Rt.window).on("resize",function(){var Tt;if(U._fullscreen)if(T)U._timer||(U._timer=zn.setTimeout(function(){var Ut=De.getWindowSize();U.moveTo(0,0).resizeTo(Ut.w,Ut.h),U._timer=0},50));else{Tt=(new Date).getTime();var Et=De.getWindowSize();U.moveTo(0,0).resizeTo(Et.w,Et.h),50<(new Date).getTime()-Tt&&(T=!0)}}),B=U.layoutRect(),U._fullscreen=v){U._initial={x:B.x,y:B.y,w:B.w,h:B.h},U.borderBox=ir("0"),U.getEl("head").style.display="none",B.deltaH-=B.headerH+2,Qn([et,Rt.document.body]).addClass(ot+"fullscreen"),U.classes.add("fullscreen");var xt=De.getWindowSize();U.moveTo(0,0).resizeTo(xt.w,xt.h)}else U.borderBox=ir(U.settings.border),U.getEl("head").style.display="",B.deltaH+=B.headerH,Qn([et,Rt.document.body]).removeClass(ot+"fullscreen"),U.classes.remove("fullscreen"),U.moveTo(U._initial.x,U._initial.y).resizeTo(U._initial.w,U._initial.h);return U.reflow()},postRender:function(){var v,T=this;setTimeout(function(){T.classes.add("in"),T.fire("open")},0),T._super(),T.statusbar&&T.statusbar.postRender(),T.focus(),this.dragHelper=new he(T._id+"-dragh",{start:function(){v={x:T.layoutRect().x,y:T.layoutRect().y}},drag:function(B){T.moveTo(v.x+B.deltaX,v.y+B.deltaY)}}),T.on("submit",function(B){B.isDefaultPrevented()||T.close()}),cr.push(T),Tl(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var v,T=this;for(T.dragHelper.destroy(),T._super(),T.statusbar&&this.statusbar.remove(),function ic(v,T){(function(){for(var B=0;B<cr.length;B++)if(cr[B]._fullscreen)return!0;return!1})()&&!1===T&&Qn([Rt.document.documentElement,Rt.document.body]).removeClass(v+"fullscreen")}(T.classPrefix,!1),v=cr.length;v--;)cr[v]===T&&cr.splice(v,1);Tl(0<cr.length)},getContentWindow:function(){var v=this.getEl().getElementsByTagName("iframe")[0];return v?v.contentWindow:null}});!function(){if(!Jn.desktop){var v={w:Rt.window.innerWidth,h:Rt.window.innerHeight};zn.setInterval(function(){var T=Rt.window.innerWidth,B=Rt.window.innerHeight;v.w===T&&v.h===B||(v={w:T,h:B},Qn(Rt.window).trigger("resize"))},100)}Qn(Rt.window).on("resize",function(){var T,B,U=De.getWindowSize();for(T=0;T<cr.length;T++)B=cr[T].layoutRect(),cr[T].moveTo(cr[T].settings.x||Math.max(0,U.w/2-B.w/2),cr[T].settings.y||Math.max(0,U.h/2-B.h/2))})}();var sa,nl,wr,Fr=el.extend({init:function(v){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(v){var T,B=v.callback||function(){};function U(et,ot,xt){return{type:"button",text:et,subtype:xt?"primary":"",onClick:function(Tt){Tt.control.parents()[1].close(),B(ot)}}}switch(v.buttons){case Fr.OK_CANCEL:T=[U("Ok",!0,!0),U("Cancel",!1)];break;case Fr.YES_NO:case Fr.YES_NO_CANCEL:T=[U("Yes",1,!0),U("No",0)],v.buttons===Fr.YES_NO_CANCEL&&T.push(U("Cancel",-1));break;default:T=[U("Ok",!0,!0)]}return new el({padding:20,x:v.x,y:v.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:T,title:v.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:v.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:v.onClose,onCancel:function(){B(!1)}}).renderTo(Rt.document.body).reflow()},alert:function(v,T){return"string"==typeof v&&(v={text:v}),v.callback=T,Fr.msgBox(v)},confirm:function(v,T){return"string"==typeof v&&(v={text:v}),v.callback=T,v.buttons=Fr.OK_CANCEL,Fr.msgBox(v)}}}),Su=function(v){return{renderUI:function(T){return function(v,T,B){var U=function(et){var ot=et.settings,xt=ot.skin,Tt=ot.skin_url;if(!1!==xt){var Et=xt||"lightgray";Tt=Tt?et.documentBaseURI.toAbsolute(Tt):on.baseURL+"/skins/"+Et}return Tt}(v);return U&&(B.skinUiCss=U+"/skin.min.css",v.contentCSS.push(U+"/content"+(v.inline?".inline":"")+".min.css")),function(v,T){var B;v.on("ProgressState",function(U){B=B||new Qr(T.panel.getEl("body")),U.state?B.show(U.time):B.hide()})}(v,T),v.getParam("inline",!1,"boolean")?function(v,T,B){var U,et,ot=Si.DOM,xt=v.getParam("fixed_toolbar_container");xt&&(et=ot.select(xt)[0]);var Tt=function(){if(U&&U.moveRel&&U.visible()&&!U._fixed){var qt=v.selection.getScrollContainer(),re=v.getBody(),we=0,Me=0;if(qt){var ci=ot.getPos(re),ii=ot.getPos(qt);we=Math.max(0,ii.x-ci.x),Me=Math.max(0,ii.y-ci.y)}U.fixed(!1).moveRel(re,v.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(we,Me)}},Et=function(){U&&(U.show(),Tt(),ot.addClass(v.getBody(),"mce-edit-focus"))},Ut=function(){U&&(U.hide(),er.hideAll(),ot.removeClass(v.getBody(),"mce-edit-focus"))},le=function(){var qt,re;U?U.visible()||Et():(U=T.panel=fn.create({type:et?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:(qt=et,re=v,!(!qt||re.settings.ui_container)),border:1,items:[!1===Bi(v)?null:{type:"menubar",border:"0 0 1 0",items:Xe(v)},bi(v,Pi(v))]}),kn_setUiContainer(v,U),Dn(v),et?U.renderTo(et).reflow():U.renderTo().reflow(),po(v,U),Et(),br(v),v.on("nodeChange",Tt),v.on("ResizeWindow",Tt),v.on("activate",Et),v.on("deactivate",Ut),v.nodeChanged())};return v.settings.content_editable=!0,v.on("focus",function(){!1===Gi(v)&&B.skinUiCss?ot.styleSheetLoader.load(B.skinUiCss,le,le):le()}),v.on("blur hide",Ut),v.on("remove",function(){U&&(U.remove(),U=null)}),!1===Gi(v)&&B.skinUiCss?ot.styleSheetLoader.load(B.skinUiCss,hr(v)):hr(v)(),{}}(v,T,B):function(v,T,B){var U,et,ot,xt,Tt;if(!1===Gi(v)&&B.skinUiCss?mr.styleSheetLoader.load(B.skinUiCss,hr(v)):hr(v)(),U=T.panel=fn.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===Bi(v)?null:{type:"menubar",border:"0 0 1 0",items:Xe(v)},bi(v,Pi(v))]},tr(v)?(xt=v,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[vr("0"),so(xt)]}):vr("1 0 0 0")]}),kn_setUiContainer(v,U),"none"!==zi(v)&&(et={type:"resizehandle",direction:zi(v),onResizeStart:function(){var le=v.getContentAreaContainer().firstChild;ot={width:le.clientWidth,height:le.clientHeight}},onResize:function(le){"both"===zi(v)?gn(v,ot.width+le.deltaX,ot.height+le.deltaY):gn(v,null,ot.height+le.deltaY)}}),v.getParam("statusbar",!0,"boolean")){var Et=ei.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),Ut=v.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+Et}:null;U.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:v},et,Ut]})}return Dn(v),v.on("SwitchMode",(Tt=U,function(le){Tt.find("*").disabled("readonly"===le.mode)})),U.renderBefore(B.targetNode).reflow(),v.getParam("readonly",!1,"boolean")&&v.setMode("readonly"),B.width&&mr.setStyle(U.getEl(),"width",B.width),v.on("remove",function(){U.remove(),U=null}),po(v,U),br(v),{iframeContainer:U.find("#iframe")[0].getEl(),editorContainer:U.getEl()}}(v,T,B)}(v,this,T)},resizeTo:function(T,B){return gn(v,T,B)},resizeBy:function(T,B){return function(v,T,B){var U=v.getContentAreaContainer();nn(v,U.clientWidth+T,U.clientHeight+B)}(v,T,B)},getNotificationManagerImpl:function(){return function ds(v){var T=function(B){return B.inline?B.getElement():B.getContentAreaContainer()};return{open:function(B,U){var et,ot=Ue.extend(B,{maxWidth:(et=T(v),De.getSize(et).width)}),xt=new _u(ot);return 0<(xt.args=ot).timeout&&(xt.timer=setTimeout(function(){xt.close(),U()},ot.timeout)),xt.on("close",function(){U()}),xt.renderTo(),xt},close:function(B){B.close()},reposition:function(B){yi(B,function(U){U.moveTo(0,0)}),function(U){if(0<U.length){var et=U.slice(0,1)[0],ot=T(v);et.moveRel(ot,"tc-tc"),yi(U,function(xt,Tt){0<Tt&&xt.moveRel(U[Tt-1].getEl(),"bc-tc")})}}(B)},getArgs:function(B){return B.args}}}(v)},getWindowManagerImpl:function(){return{open:function(T,B,U){var et;return T.title=T.title||" ",T.url=T.url||T.file,T.url&&(T.width=parseInt(T.width||320,10),T.height=parseInt(T.height||240,10)),T.body&&(T.items={defaults:T.defaults,type:T.bodyType||"form",items:T.body,data:T.data,callbacks:T.commands}),T.url||T.buttons||(T.buttons=[{text:"Ok",subtype:"primary",onclick:function(){et.find("form")[0].submit()}},{text:"Cancel",onclick:function(){et.close()}}]),(et=new el(T)).on("close",function(){U(et)}),T.data&&et.on("postRender",function(){this.find("*").each(function(ot){var xt=ot.name();xt in T.data&&ot.value(T.data[xt])})}),et.features=T||{},et.params=B||{},et=et.renderTo(Rt.document.body).reflow()},alert:function(T,B,U){var et;return(et=Fr.alert(T,function(){B()})).on("close",function(){U(et)}),et},confirm:function(T,B,U){var et;return(et=Fr.confirm(T,function(ot){B(ot)})).on("close",function(){U(et)}),et},close:function(T){T.close()},getParams:function(T){return T.params},setParams:function(T,B){T.params=B}}}}},Cu=wi.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(v){this.settings=Ue.extend({},this.Defaults,v)},preRender:function(v){v.bodyClasses.add(this.settings.containerClass)},applyClasses:function(v){var T,B,U,et,ot=this.settings;T=ot.firstControlClass,B=ot.lastControlClass,v.each(function(xt){xt.classes.remove(T).remove(B).add(ot.controlClass),xt.visible()&&(U||(U=xt),et=xt)}),U&&U.classes.add(T),et&&et.classes.add(B)},renderHtml:function(v){var T="";return this.applyClasses(v.items()),v.items().each(function(B){T+=B.renderHtml()}),T},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),il=Cu.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(v){v.items().filter(":visible").each(function(T){var B=T.settings;T.layoutRect({x:B.x,y:B.y,w:B.w,h:B.h}),T.recalc&&T.recalc()})},renderHtml:function(v){return'<div id="'+v._id+'-absend" class="'+v.classPrefix+'abs-end"></div>'+this._super(v)}}),ge=fr.extend({Defaults:{classes:"widget btn",role:"button"},init:function(v){var T,B=this;B._super(v),v=B.settings,T=B.settings.size,B.on("click mousedown",function(U){U.preventDefault()}),B.on("touchstart",function(U){B.fire("click",U),U.preventDefault()}),v.subtype&&B.classes.add(v.subtype),T&&B.classes.add("btn-"+T),v.icon&&B.icon(v.icon)},icon:function(v){return arguments.length?(this.state.set("icon",v),this):this.state.get("icon")},repaint:function(){var v,T=this.getEl().firstChild;T&&((v=T.style).width=v.height="100%"),this._super()},renderHtml:function(){var v,B=this,U=B._id,et=B.classPrefix,ot=B.state.get("icon"),xt=B.state.get("text"),Tt="",Et=B.settings;return(v=Et.image)?(ot="none","string"!=typeof v&&(v=Rt.window.getSelection?v[0]:v[1]),v=" style=\"background-image: url('"+v+"')\""):v="",xt&&(B.classes.add("btn-has-text"),Tt='<span class="'+et+'txt">'+B.encode(xt)+"</span>"),'<div id="'+U+'" class="'+B.classes+'" tabindex="-1"'+("boolean"==typeof Et.active?' aria-pressed="'+Et.active+'"':"")+'><button id="'+U+'-button" role="presentation" type="button" tabindex="-1">'+((ot=ot?et+"ico "+et+"i-"+ot:"")?'<i class="'+ot+'"'+v+"></i>":"")+Tt+"</button></div>"},bindStates:function(){var v=this,T=v.$,B=v.classPrefix+"txt";function U(et){var ot=T("span."+B,v.getEl());et?(ot[0]||(T("button:first",v.getEl()).append('<span class="'+B+'"></span>'),ot=T("span."+B,v.getEl())),ot.html(v.encode(et))):ot.remove(),v.classes.toggle("btn-has-text",!!et)}return v.state.on("change:text",function(et){U(et.value)}),v.state.on("change:icon",function(et){var ot=et.value,xt=v.classPrefix;ot=(v.settings.icon=ot)?xt+"ico "+xt+"i-"+v.settings.icon:"";var Tt=v.getEl().firstChild,Et=Tt.getElementsByTagName("i")[0];ot?(Et&&Et===Tt.firstChild||(Et=Rt.document.createElement("i"),Tt.insertBefore(Et,Tt.firstChild)),Et.className=ot):Et&&Tt.removeChild(Et),U(v.state.get("text"))}),v._super()}}),Ps=ge.extend({init:function(v){v=Ue.extend({text:"Browse...",multiple:!1,accept:null},v),this._super(v),this.classes.add("browsebutton"),v.multiple&&this.classes.add("multiple")},postRender:function(){var v=this,T=De.create("input",{type:"file",id:v._id+"-browse",accept:v.settings.accept});v._super(),Qn(T).on("change",function(B){var U=B.target.files;v.value=function(){return U.length?v.settings.multiple?U:U[0]:null},B.preventDefault(),U.length&&v.fire("change",B)}),Qn(T).on("click",function(B){B.stopPropagation()}),Qn(v.getEl("button")).on("click touchstart",function(B){B.stopPropagation(),T.click(),B.preventDefault()}),v.getEl().appendChild(T)},remove:function(){Qn(this.getEl("button")).off(),Qn(this.getEl("input")).off(),this._super()}}),Fa=Kt.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var v=this,T=v._layout;return v.classes.add("btn-group"),v.preRender(),T.preRender(v),'<div id="'+v._id+'" class="'+v.classes+'"><div id="'+v._id+'-body">'+(v.settings.html||"")+T.renderHtml(v)+"</div></div>"}}),Es=fr.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(v){var T=this;T._super(v),T.on("click mousedown",function(B){B.preventDefault()}),T.on("click",function(B){B.preventDefault(),T.disabled()||T.checked(!T.checked())}),T.checked(T.settings.checked)},checked:function(v){return arguments.length?(this.state.set("checked",v),this):this.state.get("checked")},value:function(v){return arguments.length?this.checked(v):this.checked()},renderHtml:function(){var v=this,T=v._id,B=v.classPrefix;return'<div id="'+T+'" class="'+v.classes+'" unselectable="on" aria-labelledby="'+T+'-al" tabindex="-1"><i class="'+B+"ico "+B+'i-checkbox"></i><span id="'+T+'-al" class="'+B+'label">'+v.encode(v.state.get("text"))+"</span></div>"},bindStates:function(){var v=this;function T(B){v.classes.toggle("checked",B),v.aria("checked",B)}return v.state.on("change:text",function(B){v.getEl("al").firstChild.data=v.translate(B.value)}),v.state.on("change:checked change:value",function(B){v.fire("change"),T(B.value)}),v.state.on("change:icon",function(B){var U=B.value,et=v.classPrefix;if(void 0===U)return v.settings.icon;U=(v.settings.icon=U)?et+"ico "+et+"i-"+v.settings.icon:"";var ot=v.getEl().firstChild,xt=ot.getElementsByTagName("i")[0];U?(xt&&xt===ot.firstChild||(xt=Rt.document.createElement("i"),ot.insertBefore(xt,ot.firstChild)),xt.className=U):xt&&ot.removeChild(xt)}),v.state.get("checked")&&T(!0),v._super()}}),Xl=tinymce.util.Tools.resolve("tinymce.util.VK"),Ir=fr.extend({init:function(v){var T=this;T._super(v),v=T.settings,T.classes.add("combobox"),T.subinput=!0,T.ariaTarget="inp",v.menu=v.menu||v.values,v.menu&&(v.icon="caret"),T.on("click",function(B){var U=B.target,et=T.getEl();if(Qn.contains(et,U)||U===et)for(;U&&U!==et;)U.id&&-1!==U.id.indexOf("-open")&&(T.fire("action"),v.menu&&(T.showMenu(),B.aria&&T.menu.items()[0].focus())),U=U.parentNode}),T.on("keydown",function(B){var U;13===B.keyCode&&"INPUT"===B.target.nodeName&&(B.preventDefault(),T.parents().reverse().each(function(et){if(et.toJSON)return U=et,!1}),T.fire("submit",{data:U.toJSON()}))}),T.on("keyup",function(B){if("INPUT"===B.target.nodeName){var U=T.state.get("value"),et=B.target.value;et!==U&&(T.state.set("value",et),T.fire("autocomplete",B))}}),T.on("mouseover",function(B){var U=T.tooltip().moveTo(-65535);if(T.statusLevel()&&-1!==B.target.className.indexOf(T.classPrefix+"status")){var et=T.statusMessage()||"Ok",ot=U.text(et).show().testMoveRel(B.target,["bc-tc","bc-tl","bc-tr"]);U.classes.toggle("tooltip-n","bc-tc"===ot),U.classes.toggle("tooltip-nw","bc-tl"===ot),U.classes.toggle("tooltip-ne","bc-tr"===ot),U.moveRel(B.target,ot)}})},statusLevel:function(v){return 0<arguments.length&&this.state.set("statusLevel",v),this.state.get("statusLevel")},statusMessage:function(v){return 0<arguments.length&&this.state.set("statusMessage",v),this.state.get("statusMessage")},showMenu:function(){var v,T=this;T.menu||((v=T.settings.menu||[]).length?v={type:"menu",items:v}:v.type=v.type||"menu",T.menu=fn.create(v).parent(T).renderTo(T.getContainerElm()),T.fire("createmenu"),T.menu.reflow(),T.menu.on("cancel",function(U){U.control===T.menu&&T.focus()}),T.menu.on("show hide",function(U){U.control.items().each(function(et){et.active(et.value()===T.value())})}).fire("show"),T.menu.on("select",function(U){T.value(U.control.value())}),T.on("focusin",function(U){"INPUT"===U.target.tagName.toUpperCase()&&T.menu.hide()}),T.aria("expanded",!0)),T.menu.show(),T.menu.layoutRect({w:T.layoutRect().w}),T.menu.moveRel(T.getEl(),T.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var v,T,B=this,U=B.getEl(),et=B.getEl("open"),ot=B.layoutRect(),xt=0,Tt=U.firstChild;B.statusLevel()&&"none"!==B.statusLevel()&&(xt=parseInt(De.getRuntimeStyle(Tt,"padding-right"),10)-parseInt(De.getRuntimeStyle(Tt,"padding-left"),10)),v=et?ot.w-De.getSize(et).width-10:ot.w-10;var Et=Rt.document;return Et.all&&(!Et.documentMode||Et.documentMode<=8)&&(T=B.layoutRect().h-2+"px"),Qn(Tt).css({width:v-xt,lineHeight:T}),B._super(),B},postRender:function(){var v=this;return Qn(this.getEl("inp")).on("change",function(T){v.state.set("value",T.target.value),v.fire("change",T)}),v._super()},renderHtml:function(){var v,T,B,U=this,et=U._id,ot=U.settings,xt=U.classPrefix,Tt=U.state.get("value")||"",Et="",Ut="";return"spellcheck"in ot&&(Ut+=' spellcheck="'+ot.spellcheck+'"'),ot.maxLength&&(Ut+=' maxlength="'+ot.maxLength+'"'),ot.size&&(Ut+=' size="'+ot.size+'"'),ot.subtype&&(Ut+=' type="'+ot.subtype+'"'),B='<i id="'+et+'-status" class="mce-status mce-ico" style="display: none"></i>',U.disabled()&&(Ut+=' disabled="disabled"'),(v=ot.icon)&&"caret"!==v&&(v=xt+"ico "+xt+"i-"+ot.icon),T=U.state.get("text"),(v||T)&&(Et='<div id="'+et+'-open" class="'+xt+"btn "+xt+'open" tabIndex="-1" role="button"><button id="'+et+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==v?'<i class="'+v+'"></i>':'<i class="'+xt+'caret"></i>')+(T?(v?" ":"")+T:"")+"</button></div>",U.classes.add("has-open")),'<div id="'+et+'" class="'+U.classes+'"><input id="'+et+'-inp" class="'+xt+'textbox" value="'+U.encode(Tt,!1)+'" hidefocus="1"'+Ut+' placeholder="'+U.encode(ot.placeholder)+'" />'+B+Et+"</div>"},value:function(v){return arguments.length?(this.state.set("value",v),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(v,T){var B=this;if(0!==v.length){B.menu?B.menu.items().remove():B.menu=fn.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(B).renderTo(),Ue.each(v,function(et){var ot,xt;B.menu.add({text:et.title,url:et.previewUrl,match:T,classes:"menu-item-ellipsis",onclick:(ot=et.value,xt=et.title,function(){B.fire("selectitem",{title:xt,value:ot})})})}),B.menu.renderNew(),B.hideMenu(),B.menu.on("cancel",function(et){et.control.parent()===B.menu&&(et.stopPropagation(),B.focus(),B.hideMenu())}),B.menu.on("select",function(){B.focus()});var U=B.layoutRect().w;B.menu.layoutRect({w:U,minW:0,maxW:U}),B.menu.repaint(),B.menu.reflow(),B.menu.show(),B.menu.moveRel(B.getEl(),B.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else B.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var v=this;v.state.on("change:value",function(B){v.getEl("inp").value!==B.value&&(v.getEl("inp").value=B.value)}),v.state.on("change:disabled",function(B){v.getEl("inp").disabled=B.value}),v.state.on("change:statusLevel",function(B){var U=v.getEl("status"),et=v.classPrefix,ot=B.value;De.css(U,"display","none"===ot?"none":""),De.toggleClass(U,et+"i-checkmark","ok"===ot),De.toggleClass(U,et+"i-warning","warn"===ot),De.toggleClass(U,et+"i-error","error"===ot),v.classes.toggle("has-status","none"!==ot),v.repaint()}),De.on(v.getEl("status"),"mouseleave",function(){v.tooltip().hide()}),v.on("cancel",function(B){v.menu&&v.menu.visible()&&(B.stopPropagation(),v.hideMenu())});var T=function(B,U){U&&0<U.items().length&&U.items().eq(B)[0].focus()};return v.on("keydown",function(B){var U=B.keyCode;"INPUT"===B.target.nodeName&&(U===Xl.DOWN?(B.preventDefault(),v.fire("autocomplete"),T(0,v.menu)):U===Xl.UP&&(B.preventDefault(),T(-1,v.menu)))}),v._super()},remove:function(){Qn(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Dl=Ir.extend({init:function(v){var T=this;v.spellcheck=!1,v.onaction&&(v.icon="none"),T._super(v),T.classes.add("colorbox"),T.on("change keyup postrender",function(){T.repaintColor(T.value())})},repaintColor:function(v){var T=this.getEl("open"),B=T?T.getElementsByTagName("i")[0]:null;if(B)try{B.style.background=v}catch(U){}},bindStates:function(){var v=this;return v.state.on("change:value",function(T){v.state.get("rendered")&&v.repaintColor(T.value)}),v._super()}}),rl=ge.extend({showPanel:function(){var v=this,T=v.settings;if(v.classes.add("opened"),v.panel)v.panel.show();else{var B=T.panel;B.type&&(B={layout:"grid",items:B}),B.role=B.role||"dialog",B.popover=!0,B.autohide=!0,B.ariaRoot=!0,v.panel=new er(B).on("hide",function(){v.classes.remove("opened")}).on("cancel",function(ot){ot.stopPropagation(),v.focus(),v.hidePanel()}).parent(v).renderTo(v.getContainerElm()),v.panel.fire("show"),v.panel.reflow()}var U=v.panel.testMoveRel(v.getEl(),T.popoverAlign||(v.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));v.panel.classes.toggle("start","l"===U.substr(-1)),v.panel.classes.toggle("end","r"===U.substr(-1));var et="t"===U.substr(0,1);v.panel.classes.toggle("bottom",!et),v.panel.classes.toggle("top",et),v.panel.moveRel(v.getEl(),U)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var v=this;return v.aria("haspopup",!0),v.on("click",function(T){T.control===v&&(v.panel&&v.panel.visible()?v.hidePanel():(v.showPanel(),v.panel.focus(!!T.aria)))}),v._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Mu=Si.DOM,id=rl.extend({init:function(v){this._super(v),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(v){return v?(this._color=v,this.getEl("preview").style.backgroundColor=v,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var v=this,T=v._id,B=v.classPrefix,U=v.state.get("text"),et=v.settings.icon?B+"ico "+B+"i-"+v.settings.icon:"",ot=v.settings.image?" style=\"background-image: url('"+v.settings.image+"')\"":"",xt="";return U&&(v.classes.add("btn-has-text"),xt='<span class="'+B+'txt">'+v.encode(U)+"</span>"),'<div id="'+T+'" class="'+v.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(et?'<i class="'+et+'"'+ot+"></i>":"")+'<span id="'+T+'-preview" class="'+B+'preview"></span>'+xt+'</button><button type="button" class="'+B+'open" hidefocus="1" tabindex="-1"> <i class="'+B+'caret"></i></button></div>'},postRender:function(){var v=this,T=v.settings.onclick;return v.on("click",function(B){B.aria&&"down"===B.aria.key||B.control!==v||Mu.getParent(B.target,"."+v.classPrefix+"open")||(B.stopImmediatePropagation(),T.call(v,B))}),delete v.settings.onclick,v._super()}}),hs=tinymce.util.Tools.resolve("tinymce.util.Color"),bh=fr.extend({Defaults:{classes:"widget colorpicker"},init:function(v){this._super(v)},postRender:function(){var v,T,B,U,et,ot=this,xt=ot.color();function Tt(qt,re){var we,Me,ci=De.getPos(qt);return we=re.pageX-ci.x,Me=re.pageY-ci.y,{x:we=Math.max(0,Math.min(we/qt.clientWidth,1)),y:Me=Math.max(0,Math.min(Me/qt.clientHeight,1))}}function Et(qt,re){De.css(B,{top:(360-qt.h)/360*100+"%"}),re||De.css(et,{left:qt.s+"%",top:100-qt.v+"%"}),U.style.background=hs({s:100,v:100,h:qt.h}).toHex(),ot.color().parse({s:qt.s,v:qt.v,h:qt.h})}function Ut(qt){var re;re=Tt(U,qt),v.s=100*re.x,v.v=100*(1-re.y),Et(v),ot.fire("change")}function le(qt){var re;re=Tt(T,qt),(v=xt.toHsv()).h=360*(1-re.y),Et(v,!0),ot.fire("change")}T=ot.getEl("h"),B=ot.getEl("hp"),U=ot.getEl("sv"),et=ot.getEl("svp"),ot._repaint=function(){Et(v=xt.toHsv())},ot._super(),ot._svdraghelper=new he(ot._id+"-sv",{start:Ut,drag:Ut}),ot._hdraghelper=new he(ot._id+"-h",{start:le,drag:le}),ot._repaint()},rgb:function(){return this.color().toRgb()},value:function(v){if(!arguments.length)return this.color().toHex();this.color().parse(v),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=hs()),this._color},renderHtml:function(){var v,T=this._id,B=this.classPrefix,U="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return v='<div id="'+T+'-h" class="'+B+'colorpicker-h" style="background: -ms-linear-gradient(top,'+U+");background: linear-gradient(to bottom,"+U+');">'+function(){var et,ot,xt,Tt,Et="";for(xt="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",et=0,ot=(Tt=U.split(",")).length-1;et<ot;et++)Et+='<div class="'+B+'colorpicker-h-chunk" style="height:'+100/ot+"%;"+xt+Tt[et]+",endColorstr="+Tt[et+1]+");-ms-"+xt+Tt[et]+",endColorstr="+Tt[et+1]+')"></div>';return Et}()+'<div id="'+T+'-hp" class="'+B+'colorpicker-h-marker"></div></div>','<div id="'+T+'" class="'+this.classes+'"><div id="'+T+'-sv" class="'+B+'colorpicker-sv"><div class="'+B+'colorpicker-overlay1"><div class="'+B+'colorpicker-overlay2"><div id="'+T+'-svp" class="'+B+'colorpicker-selector1"><div class="'+B+'colorpicker-selector2"></div></div></div></div></div>'+v+"</div>"}}),Od=fr.extend({init:function(v){v=Ue.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},v),this._super(v),this.classes.add("dropzone"),v.multiple&&this.classes.add("multiple")},renderHtml:function(){var T,B=this.settings;return T=De.create("div",{id:this._id,hidefocus:"1"},"<span>"+this.translate(B.text)+"</span>"),B.height&&De.css(T,"height",B.height+"px"),B.width&&De.css(T,"width",B.width+"px"),T.className=this.classes,T.outerHTML},postRender:function(){var v=this,T=function(B){B.preventDefault(),v.classes.toggle("dragenter"),v.getEl().className=v.classes};v._super(),v.$el.on("dragover",function(B){B.preventDefault()}),v.$el.on("dragenter",T),v.$el.on("dragleave",T),v.$el.on("drop",function(B){if(B.preventDefault(),!v.state.get("disabled")){var U=function(et){var ot=v.settings.accept;if("string"!=typeof ot)return et;var xt=new RegExp("("+ot.split(/\s*,\s*/).join("|")+")$","i");return Ue.grep(et,function(Tt){return xt.test(Tt.name)})}(B.dataTransfer.files);v.value=function(){return U.length?v.settings.multiple?U:U[0]:null},U.length&&v.fire("change",B)}})},remove:function(){this.$el.off(),this._super()}}),wo=fr.extend({init:function(v){var T=this;v.delimiter||(v.delimiter="\xbb"),T._super(v),T.classes.add("path"),T.canFocus=!0,T.on("click",function(B){var U;(U=B.target.getAttribute("data-index"))&&T.fire("select",{value:T.row()[U],index:U})}),T.row(T.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(v){return arguments.length?(this.state.set("row",v),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var v=this;return v.state.on("change:row",function(T){v.innerHtml(v._getDataPathHtml(T.value))}),v._super()},_getDataPathHtml:function(v){var T,B,U=v||[],et="",ot=this.classPrefix;for(T=0,B=U.length;T<B;T++)et+=(0<T?'<div class="'+ot+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+ot+"path-item"+(T===B-1?" "+ot+"last":"")+'" data-index="'+T+'" tabindex="-1" id="'+this._id+"-"+T+'" aria-level="'+(T+1)+'">'+U[T].name+"</div>";return et||(et='<div class="'+ot+'path-item">\xa0</div>'),et}}),fs=wo.extend({postRender:function(){var v=this,T=v.settings.editor;function B(U){return!(1!==U.nodeType||"BR"!==U.nodeName&&!U.getAttribute("data-mce-bogus")&&"bookmark"!==U.getAttribute("data-mce-type"))}return!1!==T.settings.elementpath&&(v.on("select",function(U){T.focus(),T.selection.select(this.row()[U.index].element),T.nodeChanged()}),T.on("nodeChange",function(U){for(var et=[],ot=U.parents,xt=ot.length;xt--;)if(1===ot[xt].nodeType&&!B(ot[xt])){var Tt=T.fire("ResolveName",{name:ot[xt].nodeName.toLowerCase(),target:ot[xt]});if(Tt.isDefaultPrevented()||et.push({name:Tt.name,element:ot[xt]}),Tt.isPropagationStopped())break}v.row(et)})),v._super()}}),Bd=Kt.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var v=this,T=v._layout,B=v.classPrefix;return v.classes.add("formitem"),T.preRender(v),'<div id="'+v._id+'" class="'+v.classes+'" hidefocus="1" tabindex="-1">'+(v.settings.title?'<div id="'+v._id+'-title" class="'+B+'title">'+v.settings.title+"</div>":"")+'<div id="'+v._id+'-body" class="'+v.bodyClasses+'">'+(v.settings.html||"")+T.renderHtml(v)+"</div></div>"}}),gs=Kt.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var v=this,T=v.items();v.settings.formItemDefaults||(v.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),T.each(function(B){var U,et=B.settings.label;et&&((U=new Bd(Ue.extend({items:{type:"label",id:B._id+"-l",text:et,flex:0,forId:B._id,disabled:B.disabled()}},v.settings.formItemDefaults))).type="formitem",B.aria("labelledby",B._id+"-l"),void 0===B.settings.flex&&(B.settings.flex=1),v.replace(B,U),U.add(B))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var v=this;function T(){var B,U,et=0,ot=[];if(!1!==v.settings.labelGapCalc)for(("children"===v.settings.labelGapCalc?v.find("formitem"):v.items()).filter("formitem").each(function(xt){var Tt=xt.items()[0],Et=Tt.getEl().clientWidth;et=et<Et?Et:et,ot.push(Tt)}),U=v.settings.labelGap||0,B=ot.length;B--;)ot[B].settings.minWidth=et+U}v._super(),v.on("show",T),T()}}),Do=gs.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var v=this,T=v._layout,B=v.classPrefix;return v.preRender(),T.preRender(v),'<fieldset id="'+v._id+'" class="'+v.classes+'" hidefocus="1" tabindex="-1">'+(v.settings.title?'<legend id="'+v._id+'-title" class="'+B+'fieldset-title">'+v.settings.title+"</legend>":"")+'<div id="'+v._id+'-body" class="'+v.bodyClasses+'">'+(v.settings.html||"")+T.renderHtml(v)+"</div></fieldset>"}}),ji=0,Tu_fromDom=function(v){if(null==v)throw new Error("Node cannot be null or undefined");return{dom:Fn(v)}},Ns=Rt.Node.DOCUMENT_NODE,Ao=Rt.Node.ELEMENT_NODE,Rs=(void 0!==Rt.window||Function("return this;")(),function(v,T){var B=function(et,ot){for(var xt=0;xt<et.length;xt++){var Tt=et[xt];if(Tt.test(ot))return Tt}}(v,T);if(!B)return{major:0,minor:0};var U=function(et){return Number(T.replace(B,"$"+et))};return ps(U(1),U(2))}),rc=function(){return ps(0,0)},ps=function(v,T){return{major:v,minor:T}},Ha_detect=function(v,T){var B=String(T).toLowerCase();return 0===v.length?rc():Rs(v,B)},Ha_unknown=rc,Qa="Firefox",Oo=function(v,T){return function(){return T===v}},ts=function(v){var T=v.current;return{current:T,version:v.version,isEdge:Oo("Edge",T),isChrome:Oo("Chrome",T),isIE:Oo("IE",T),isOpera:Oo("Opera",T),isFirefox:Oo(Qa,T),isSafari:Oo("Safari",T)}},Ls_unknown=function(){return ts({current:void 0,version:Ha_unknown()})},Ls_nu=ts,$l=(Fn("Edge"),Fn("Chrome"),Fn("IE"),Fn("Opera"),Fn(Qa),Fn("Safari"),"Windows"),Zl="Android",Kl="Solaris",Yi="FreeBSD",_n=function(v,T){return function(){return T===v}},rd=function(v){var T=v.current;return{current:T,version:v.version,isWindows:_n($l,T),isiOS:_n("iOS",T),isAndroid:_n(Zl,T),isOSX:_n("OSX",T),isLinux:_n("Linux",T),isSolaris:_n(Kl,T),isFreeBSD:_n(Yi,T)}},oc_unknown=function(){return rd({current:void 0,version:Ha_unknown()})},oc_nu=rd,Du=(Fn($l),Fn("iOS"),Fn(Zl),Fn("Linux"),Fn("OSX"),Fn(Kl),Fn(Yi),function(v,T){var B=String(T).toLowerCase();return function(U,et){for(var ot=0,xt=U.length;ot<xt;ot++){var Tt=U[ot];if(et(Tt))return gr.some(Tt)}return gr.none()}(v,function(U){return U.search(B)})}),ko=function(v,T){return-1!==v.indexOf(T)},Au=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ms=function(v){return function(T){return ko(T,v)}},ku=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(v){return ko(v,"edge/")&&ko(v,"chrome")&&ko(v,"safari")&&ko(v,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Au],search:function(v){return ko(v,"chrome")&&!ko(v,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(v){return ko(v,"msie")||ko(v,"trident")}},{name:"Opera",versionRegexes:[Au,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ms("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ms("firefox")},{name:"Safari",versionRegexes:[Au,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(v){return(ko(v,"safari")||ko(v,"mobile/"))&&ko(v,"applewebkit")}}],zd=[{name:"Windows",search:ms("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(v){return ko(v,"iphone")||ko(v,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ms("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ms("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ms("linux"),versionRegexes:[]},{name:"Solaris",search:ms("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ms("freebsd"),versionRegexes:[]}],Fd={browsers:Fn(ku),oses:Fn(zd)},Pa=(wr=!(sa=function(){return function(v){var T,B,U,et,ot,xt,Tt,Et,Ut,le,qt,re=Fd.browsers(),we=Fd.oses(),Me=function(v,T){return Du(v,T).map(function(B){var U=Ha_detect(B.versionRegexes,T);return{current:B.name,version:U}})}(re,v).fold(Ls_unknown,Ls_nu),ci=function(v,T){return Du(v,T).map(function(B){var U=Ha_detect(B.versionRegexes,T);return{current:B.name,version:U}})}(we,v).fold(oc_unknown,oc_nu);return{browser:Me,os:ci,deviceType:(B=Me,U=v,et=(T=ci).isiOS()&&!0===/ipad/i.test(U),ot=T.isiOS()&&!et,xt=T.isAndroid()&&3===T.version.major,Tt=T.isAndroid()&&4===T.version.major,Et=et||xt||Tt&&!0===/mobile/i.test(U),Ut=T.isiOS()||T.isAndroid(),le=Ut&&!Et,qt=B.isSafari()&&T.isiOS()&&!1===/safari/i.test(U),{isiPad:Fn(et),isiPhone:Fn(ot),isTablet:Fn(Et),isPhone:Fn(le),isTouch:Fn(Ut),isAndroid:T.isAndroid,isiOS:T.isiOS,isWebView:Fn(qt)})}}(Rt.navigator.userAgent)}),function(){for(var v=[],T=0;T<arguments.length;T++)v[T]=arguments[T];return wr||(wr=!0,nl=sa.apply(null,v)),nl}),ad=Ao,Os=Ns,vs=function(v){return v.nodeType!==ad&&v.nodeType!==Os||0===v.childElementCount},nf=(Pa().browser.isIE(),function(){for(var v=[],T=0;T<arguments.length;T++)v[T]=arguments[T]}("element","offset"),Ue.trim),Uo=function(v){return function(T){return!(!T||1!==T.nodeType||T.contentEditable!==v&&T.getAttribute("data-mce-contenteditable")!==v)}},Jo=Uo("true"),Hd=Uo("false"),sc=function(v,T,B,U,et){return{type:v,title:T,url:B,level:U,attach:et}},Iu=function(v){return v.innerText||v.textContent},_h=function(v){return(T=v)&&"A"===T.nodeName&&(T.id||T.name)&&sd(v);var T},Jl=function(v){return v&&/^(H[1-6])$/.test(v.nodeName)},sd=function(v){return function(T){for(;T=T.parentNode;){var B=T.contentEditable;if(B&&"inherit"!==B)return Jo(T)}return!1}(v)&&!Hd(v)},ld=function(v){return Jl(v)&&sd(v)},ys=function(v){var T,B=function(v){return v.id?v.id:(B=(new Date).getTime(),"h_"+Math.floor(1e9*Math.random())+ ++ji+String(B));var B}(v);return sc("header",Iu(v),"#"+B,Jl(T=v)?parseInt(T.nodeName.substr(1),10):0,function(){v.id=B})},Bs=function(v){var T=v.id||v.name,B=Iu(v);return sc("anchor",B||"#"+T,"#"+T,0,ki)},lc=function(v){return 0<nf(v.title).length},kl={},la=function(v){return{title:v.title,value:{title:{raw:v.title},url:v.url,attach:v.attach}}},uc=function(v,T){return{title:v,value:{title:v,url:T,attach:ki}}},es=function(v,T,B){var U=T in v?v[T]:B;return!1===U?null:U},Qo=function(v,T){var B=v.toLowerCase(),U=Ue.grep(T,function(et){return-1!==et.title.toLowerCase().indexOf(B)});return 1===U.length&&U[0].title===v?[]:U},al=function(v,T,B,U){var et=function(ot){var Tt=function(v,T,B,U){var et,ot,xt,Tt,Et,Ut,le={title:"-"},qt=function(we){var Me=we.hasOwnProperty(B)?we[B]:[],ci=To(Me,function(ii){return di=ii,!Qi(T,function(Vi){return Vi.url===di});var di});return Ue.map(ci,function(ii){return{title:ii,value:{title:ii,url:ii,attach:ki}}})},re=function(we){var ci=To(T,function(ii){return ii.type===we});return Ue.map(ci,la)};return!1===U.typeahead_urls?[]:"file"===B?(et=[Qo(v,qt(kl)),Qo(v,re("header")),Qo(v,(Tt=re("anchor"),Et=es(U,"anchor_top","#top"),Ut=es(U,"anchor_bottom","#bottom"),null!==Et&&Tt.unshift(uc("<top>",Et)),null!==Ut&&Tt.push(uc("<bottom>",Ut)),Tt))],ot=function(we,Me){return 0===we.length||0===Me.length?we.concat(Me):we.concat(le,Me)},xt=[],yi(et,function(we){xt=ot(xt,we)}),xt):Qo(v,qt(kl))}(ot,function(v){var T,B=function(v){var B,ot,xt;return B=v,Mr((Pa().browser.isIE(),function(){for(var Tt=[],Et=0;Et<arguments.length;Et++)Tt[Et]=arguments[Et]}("element","offset"),xt=void 0===(ot=Tu_fromDom(B))?Rt.document:ot.dom(),vs(xt)?[]:Mr(xt.querySelectorAll("h1,h2,h3,h4,h5,h6,a:not([href])"),Tu_fromDom)),function(Tt){return Tt.dom()})}(v);return To((T=B,Mr(To(T,ld),ys)).concat(Mr(To(B,_h),Bs)),lc)}(B),U,T);v.showAutoComplete(Tt,ot)};v.on("autocomplete",function(){et(v.value())}),v.on("selectitem",function(ot){var xt=ot.value;v.value(xt.url);var Tt,Et=(Tt=xt.title).raw?Tt.raw:Tt;v.fire("change","image"===U?{meta:{alt:Et,attach:xt.attach}}:{meta:{text:Et,attach:xt.attach}}),v.focus()}),v.on("click",function(ot){0===v.value().length&&"INPUT"===ot.target.nodeName&&et("")}),v.on("PostRender",function(){v.getRoot().on("submit",function(ot){var xt,Tt,Et;ot.isDefaultPrevented()||(xt=v.value(),Et=kl[Tt=U],/^https?/.test(xt)&&(Et?function(v,T){var et=Vn.call(v,T);return-1===et?gr.none():gr.some(et)}(Et,xt).isNone()&&(kl[Tt]=Et.slice(0,5).concat(xt)):kl[Tt]=[xt]))})})},Eu=Ir.extend({Statics:{clearHistory:function(){kl={}}},init:function(v){var T,B,U,et=this,ot=window.tinymce?window.tinymce.activeEditor:on.activeEditor,xt=ot.settings,Tt=v.filetype;v.spellcheck=!1,(U=xt.file_picker_types||xt.file_browser_callback_types)&&(U=Ue.makeMap(U,/[, ]/)),U&&!U[Tt]||(!(B=xt.file_picker_callback)||U&&!U[Tt]?!(B=xt.file_browser_callback)||U&&!U[Tt]||(T=function(){B(et.getEl("inp").id,et.value(),Tt,window)}):T=function(){var Et=et.fire("beforecall").meta;Et=Ue.extend({filetype:Tt},Et),B.call(ot,function(Ut,le){et.value(Ut).fire("change",{meta:le})},et.value(),Et)}),T&&(v.icon="browse",v.onaction=T),et._super(v),et.classes.add("filepicker"),al(et,xt,ot.getBody(),Tt),function(v,T,B){var U=T.filepicker_validator_handler;U&&v.state.on("change:value",function(et){var ot;0!==(ot=et.value).length?U({url:ot,type:B},function(xt){var Tt,Et,Ut,le=(Et=(Tt=xt).status,Ut=Tt.message,"valid"===Et?{status:"ok",message:Ut}:"unknown"===Et||"invalid"===Et?{status:"warn",message:Ut}:{status:"none",message:""});v.statusMessage(le.message),v.statusLevel(le.status)}):v.statusLevel("none")})}(et,xt,Tt)}}),ud=il.extend({recalc:function(v){var T=v.layoutRect(),B=v.paddingBox;v.items().filter(":visible").each(function(U){U.layoutRect({x:B.left,y:B.top,w:T.innerW-B.right-B.left,h:T.innerH-B.top-B.bottom}),U.recalc&&U.recalc()})}}),Rc=il.extend({recalc:function(v){var T,B,U,et,ot,xt,Tt,Et,Ut,le,qt,re,we,Me,ci,ii,di,Vi,Lt,An,Ti,Ki,xr,So,Xo,or,Wa,ta,Or,ba,ws,ja,to,si,ca,Vs,zo,is=[],zc=Math.max,Wd=Math.min;for(U=v.items().filter(":visible"),et=v.layoutRect(),ot=v.paddingBox,xt=v.settings,re=v.isRtl()?xt.direction||"row-reversed":xt.direction,Tt=xt.align,Et=v.isRtl()?xt.pack||"end":xt.pack,Ut=xt.spacing||0,"row-reversed"!==re&&"column-reverse"!==re||(U=U.set(U.toArray().reverse()),re=re.split("-")[0]),"column"===re?(So="y",Ki="h",xr="minH",Xo="maxH",Wa="innerH",or="top",ta="deltaH",Or="contentH",si="left",ja="w",ba="x",ws="innerW",to="minW",ca="right",Vs="deltaW",zo="contentW"):(So="x",Ki="w",xr="minW",Xo="maxW",Wa="innerW",or="left",ta="deltaW",Or="contentW",si="top",ja="h",ba="y",ws="innerH",to="minH",ca="bottom",Vs="deltaH",zo="contentH"),qt=et[Wa]-ot[or]-ot[or],Ti=le=0,T=0,B=U.length;T<B;T++)Me=(we=U[T]).layoutRect(),qt-=T<B-1?Ut:0,0<(ci=we.settings.flex)&&(le+=ci,Me[Xo]&&is.push(we),Me.flex=ci),qt-=Me[xr],Ti<(ii=ot[si]+Me[to]+ot[ca])&&(Ti=ii);if((Lt={})[xr]=qt<0?et[xr]-qt+et[ta]:et[Wa]-qt+et[ta],Lt[to]=Ti+et[Vs],Lt[Or]=et[Wa]-qt,Lt[zo]=Ti,Lt.minW=Wd(Lt.minW,et.maxW),Lt.minH=Wd(Lt.minH,et.maxH),Lt.minW=zc(Lt.minW,et.startMinWidth),Lt.minH=zc(Lt.minH,et.startMinHeight),!et.autoResize||Lt.minW===et.minW&&Lt.minH===et.minH){for(Vi=qt/le,T=0,B=is.length;T<B;T++)(di=(Me=(we=is[T]).layoutRect())[Xo])<(ii=Me[xr]+Me.flex*Vi)?(qt-=Me[Xo]-Me[xr],le-=Me.flex,Me.flex=0,Me.maxFlexSize=di):Me.maxFlexSize=0;for(Vi=qt/le,An=ot[or],Lt={},0===le&&("end"===Et?An=qt+ot[or]:"center"===Et?(An=Math.round(et[Wa]/2-(et[Wa]-qt)/2)+ot[or])<0&&(An=ot[or]):"justify"===Et&&(An=ot[or],Ut=Math.floor(qt/(U.length-1)))),Lt[ba]=ot[si],T=0,B=U.length;T<B;T++)ii=(Me=(we=U[T]).layoutRect()).maxFlexSize||Me[xr],"center"===Tt?Lt[ba]=Math.round(et[ws]/2-Me[ja]/2):"stretch"===Tt?(Lt[ja]=zc(Me[to]||0,et[ws]-ot[si]-ot[ca]),Lt[ba]=ot[si]):"end"===Tt&&(Lt[ba]=et[ws]-Me[ja]-ot.top),0<Me.flex&&(ii+=Me.flex*Vi),Lt[Ki]=ii,Lt[So]=An,we.layoutRect(Lt),we.recalc&&we.recalc(),An+=ii+Ut}else if(Lt.w=Lt.minW,Lt.h=Lt.minH,v.layoutRect(Lt),this.recalc(v),null===v._lastRect){var Hr=v.parent();Hr&&(Hr._lastRect=null,Hr.recalc())}}}),zs=Cu.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(v){v.items().filter(":visible").each(function(T){T.recalc&&T.recalc()})},isNative:function(){return!0}}),Va=function(v,T){return function(){v.execCommand("mceToggleFormat",!1,T)}},ns=function(v,T,B){var U=function(et){B(et,T)};v.formatter?v.formatter.formatChanged(T,U):v.on("init",function(){v.formatter.formatChanged(T,U)})},Pl=function(v,T){return function(B){ns(v,T,function(U){B.control.active(U)})}},tu=function(v){return v?v.split(",")[0]:""},cc=function(v,T){return function(){var B=this;B.state.set("value",null),v.on("init nodeChange",function(U){var et,ot,xt,Tt,Et=v.queryCommandValue("FontName"),Ut=(et=T,Tt=(ot=Et)?ot.toLowerCase():"",Ue.each(et,function(le){le.value.toLowerCase()===Tt&&(xt=le.value)}),Ue.each(et,function(le){xt||tu(le.value).toLowerCase()!==tu(Tt).toLowerCase()||(xt=le.value)}),xt);B.value(Ut||null),!Ut&&Et&&B.text(tu(Et))})}},ua=function(v,T){return/[0-9.]+px$/.test(v)?(B=72*parseInt(v,10)/96,et=Math.pow(10,T||0),Math.round(B*et)/et+"pt"):v;var B,et},rf=function(v,T,B){var U;return Ue.each(v,function(et){et.value===B?U=B:et.value===T&&(U=T)}),U},eu=function(v,T){var B=T.length;return Ue.each(T,function(U){U.menu&&(U.hidden=0===eu(v,U.menu));var et=U.format;et&&(U.hidden=!v.formatter.canApply(et)),U.hidden&&B--}),B},Nu=function(v,T){var B=T.items().length;return T.items().each(function(U){U.menu&&U.visible(0<Nu(v,U.menu)),!U.menu&&U.settings.menu&&U.visible(0<eu(v,U.settings.menu));var et=U.settings.format;et&&U.visible(v.formatter.canApply(et)),U.visible()||B--}),B},xs=function(v,T){var B,U;if("string"==typeof T)U=T.split(" ");else if(Ue.isArray(T))return function(et){for(var ot=[],xt=0,Tt=et.length;xt<Tt;++xt){if(!_i(et[xt]))throw new Error("Arr.flatten item "+xt+" was not an array, input: "+et);Ei.apply(ot,et[xt])}return ot}(Ue.map(T,function(et){return xs(v,et)}));return B=Ue.grep(U,function(et){return"|"===et||et in v.menuItems}),Ue.map(B,function(et){return"|"===et?{text:"-"}:v.menuItems[et]})},Fs=function(v){return v&&"-"===v.text},Lc=function(v,T){return function(){var B=this,U=function(){return!!v.undoManager&&v.undoManager["redo"===T?"hasRedo":"hasUndo"]()};B.disabled(!U()),v.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){B.disabled(v.readonly||!U())})}},iu={setup:function(v){var T;v.rtl&&(Go.rtl=!0),v.on("mousedown progressstate",function(){er.hideAll()}),(T=v).settings.ui_container&&(Jn.container=function(v,T){return B=T,et=void 0===(U=v)?Rt.document:U.dom(),vs(et)?gr.none():gr.from(et.querySelector(B)).map(Tu_fromDom);var B,U,et}(Tu_fromDom(Rt.document.body),T.settings.ui_container).fold(Fn(null),function(B){return B.dom()})),fr.tooltips=!Jn.iOS,Go.translate=function(B){return on.translate(B)},function(v){var T,B,U=function(et){for(var ot=(et=et.replace(/;$/,"").split(";")).length;ot--;)et[ot]=et[ot].split("=");return et}(v.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");v.addMenuItem("blockformats",{text:"Blocks",menu:(T=v,B=U,Ue.map(B,function(et){return{text:et[0],onclick:Va(T,et[1]),textStyle:function(){return T.formatter.getCssText(et[1])}}}))}),v.addButton("formatselect",function(v,T){return function(){var B,U,ot=[];return Ue.each(T,function(xt){ot.push({text:xt[0],value:xt[1],textStyle:function(){return v.formatter.getCssText(xt[1])}})}),{type:"listbox",text:T[0][0],values:ot,fixedWidth:!0,onselect:function(xt){if(xt.control){var Tt=xt.control.value();Va(v,Tt)()}},onPostRender:(B=v,U=ot,function(){var xt=this;B.on("nodeChange",function(Tt){var Et=B.formatter,Ut=null;Ue.each(Tt.parents,function(le){if(Ue.each(U,function(qt){if(Et.matchNode(le,qt.value)&&(Ut=qt.value),Ut)return!1}),Ut)return!1}),xt.value(Ut)})})}}}(v,U))}(v),function(v){var T=["alignleft","aligncenter","alignright","alignjustify"],B="alignleft",U=[{text:"Left",icon:"alignleft",onclick:Va(v,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Va(v,"aligncenter")},{text:"Right",icon:"alignright",onclick:Va(v,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Va(v,"alignjustify")}];v.addMenuItem("align",{text:"Align",menu:U}),v.addButton("align",{type:"menubutton",icon:B,menu:U,onShowMenu:function(et){var ot=et.control.menu;Ue.each(T,function(xt,Tt){ot.items().eq(Tt).each(function(Et){return Et.active(v.formatter.match(xt))})})},onPostRender:function(et){var ot=et.control;Ue.each(T,function(xt,Tt){ns(v,xt,function(Et){ot.icon(B),Et&&ot.icon(xt)})})}}),Ue.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(et,ot){v.addButton(ot,{active:!1,tooltip:et[0],cmd:et[1],onPostRender:Pl(v,ot)})})}(v),function(v){var T;(function(v){var T,B,U;T=v,Ue.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(et,ot){T.addButton(ot,{active:!1,tooltip:et,onPostRender:Pl(T,ot),onclick:Va(T,ot)})}),B=v,Ue.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(et,ot){B.addButton(ot,{tooltip:et[0],cmd:et[1]})}),U=v,Ue.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(et,ot){U.addButton(ot,{active:!1,tooltip:et[0],cmd:et[1],onPostRender:Pl(U,ot)})})})(v),T=v,Ue.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(B,U){T.addMenuItem(U,{text:B[0],icon:U,shortcut:B[2],cmd:B[1]})}),T.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Va(T,"code")})}(v),function(v){var T,B;(T=v).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Lc(T,"undo"),cmd:"undo"}),T.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Lc(T,"redo"),cmd:"redo"}),(B=v).addButton("undo",{tooltip:"Undo",onPostRender:Lc(B,"undo"),cmd:"undo"}),B.addButton("redo",{tooltip:"Redo",onPostRender:Lc(B,"redo"),cmd:"redo"})}(v),function(v){!function(v){v.addButton("fontsizeselect",function(){var B,U,et=Ue.map((v.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),function(ot){var xt=ot,Tt=ot,Et=ot.split("=");return 1<Et.length&&(xt=Et[0],Tt=Et[1]),{text:xt,value:Tt}});return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:et,fixedWidth:!0,onPostRender:(B=v,U=et,function(){var ot=this;B.on("init nodeChange",function(xt){var Tt,Et,Ut,le;if(Tt=B.queryCommandValue("FontSize"))for(Ut=3;!le&&0<=Ut;Ut--)Et=ua(Tt,Ut),le=rf(U,Et,Tt);ot.value(le||null),le||ot.text(Et)})}),onclick:function(ot){ot.control.settings.value&&v.execCommand("FontSize",!1,ot.control.settings.value)}}})}(v)}(v),function(v){!function(v){v.addButton("fontselect",function(){var T,B=(T=function(U){for(var et=(U=U.replace(/;$/,"").split(";")).length;et--;)U[et]=U[et].split("=");return U}(v.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),Ue.map(T,function(U){return{text:{raw:U[0]},value:U[1],textStyle:-1===U[1].indexOf("dings")?"font-family:"+U[1]:""}}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:B,fixedWidth:!0,onPostRender:cc(v,B),onselect:function(U){U.control.settings.value&&v.execCommand("FontName",!1,U.control.settings.value)}}})}(v)}(v),function(v){var T,B,U,et,ot,Tt,Ut=(B=0,U=[],et=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],ot=function(le){var qt=[];if(le)return Ue.each(le,function(re){var we={text:re.title,icon:re.icon};if(re.items)we.menu=ot(re.items);else{var Me=re.format||"custom"+B++;re.format||(re.name=Me,U.push(re)),we.format=Me,we.cmd=re.cmd}qt.push(we)}),qt},(T=v).on("init",function(){Ue.each(U,function(le){T.formatter.register(le.name,le)})}),{type:"menu",items:ot(T.settings.style_formats_merge?T.settings.style_formats?et.concat(T.settings.style_formats):et:T.settings.style_formats||et),onPostRender:function(le){T.fire("renderFormatsMenu",{control:le.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return T.formatter.getCssText(this.settings.format)},onPostRender:function(){var le=this;le.parent().on("show",function(){var qt,re;(qt=le.settings.format)&&(le.disabled(!T.formatter.canApply(qt)),le.active(T.formatter.match(qt))),(re=le.settings.cmd)&&le.active(T.queryCommandState(re))})},onclick:function(){this.settings.format&&Va(T,this.settings.format)(),this.settings.cmd&&T.execCommand(this.settings.cmd)}}});v.addMenuItem("formats",{text:"Formats",menu:Ut}),(Tt=v).addButton("styleselect",{type:"menubutton",text:"Formats",menu:Ut,onShowMenu:function(){Tt.settings.style_formats_autohide&&Nu(Tt,this.menu)}})}(v),function(v){var T,B;(T=v).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(B=T,function(){var U=this;B.on("VisualAid",function(et){U.active(et.hasVisual)}),U.active(B.hasVisual)}),cmd:"mceToggleVisualAid"})}(v),function(v){var T;(T=v).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(function(v){var U,et,ot=v.settings.insert_button_items;return function(v){var T=To(v,function(B,U){return!Fs(B)||!Fs(v[U-1])});return To(T,function(B,U){return!Fs(B)||0<U&&U<T.length-1})}(ot?xs(v,ot):(U=[{text:"-"}],et=Ue.grep(v.menuItems,function(xt){return"insert"===xt.context}),Ue.each(et,function(xt){"before"===xt.separator&&U.push({text:"|"}),xt.prependToContext?U.unshift(xt):U.push(xt),"after"===xt.separator&&U.push({text:"|"})}),U))}(T)),this.menu.renderNew()}})}(v)}},fc=il.extend({recalc:function(v){var T,B,U,et,ot,xt,Tt,Et,Ut,le,qt,re,we,Me,ci,ii,di,Vi,Lt,An,Ti,Ki,xr,So,Xo,or,Wa,ta,Or=[],ba=[];for((T=v.settings,et=v.items().filter(":visible"),ot=v.layoutRect(),U=T.columns||Math.ceil(Math.sqrt(et.length)),B=Math.ceil(et.length/U),Vi=T.spacingH||T.spacing||0,Lt=T.spacingV||T.spacing||0,An=T.alignH||T.align,Ti=T.alignV||T.align,ii=v.paddingBox,ta="reverseRows"in T?T.reverseRows:v.isRtl(),An&&"string"==typeof An&&(An=[An]),Ti&&"string"==typeof Ti&&(Ti=[Ti]),qt=0);qt<U;qt++)Or.push(0);for(re=0;re<B;re++)ba.push(0);for(re=0;re<B;re++)for(qt=0;qt<U&&(le=et[re*U+qt]);qt++)So=(Ut=le.layoutRect()).minW,Xo=Ut.minH,Or[qt]=So>Or[qt]?So:Or[qt],ba[re]=Xo>ba[re]?Xo:ba[re];for(or=ot.innerW-ii.left-ii.right,qt=Ki=0;qt<U;qt++)Ki+=Or[qt]+(0<qt?Vi:0),or-=(0<qt?Vi:0)+Or[qt];for(Wa=ot.innerH-ii.top-ii.bottom,re=xr=0;re<B;re++)xr+=ba[re]+(0<re?Lt:0),Wa-=(0<re?Lt:0)+ba[re];if(xr+=ii.top+ii.bottom,(Et={}).minW=(Ki+=ii.left+ii.right)+(ot.w-ot.innerW),Et.minH=xr+(ot.h-ot.innerH),Et.contentW=Et.minW-ot.deltaW,Et.contentH=Et.minH-ot.deltaH,Et.minW=Math.min(Et.minW,ot.maxW),Et.minH=Math.min(Et.minH,ot.maxH),Et.minW=Math.max(Et.minW,ot.startMinWidth),Et.minH=Math.max(Et.minH,ot.startMinHeight),!ot.autoResize||Et.minW===ot.minW&&Et.minH===ot.minH){var ws;ot.autoResize&&((Et=v.layoutRect(Et)).contentW=Et.minW-ot.deltaW,Et.contentH=Et.minH-ot.deltaH),ws="start"===T.packV?0:0<Wa?Math.floor(Wa/B):0;var ja=0,to=T.flexWidths;if(to)for(qt=0;qt<to.length;qt++)ja+=to[qt];else ja=U;var si=or/ja;for(qt=0;qt<U;qt++)Or[qt]+=to?to[qt]*si:si;for(Me=ii.top,re=0;re<B;re++){for(we=ii.left,Tt=ba[re]+ws,qt=0;qt<U&&(le=et[ta?re*U+U-1-qt:re*U+qt]);qt++)ci=le.settings,Ut=le.layoutRect(),xt=Math.max(Or[qt],Ut.startMinWidth),Ut.x=we,Ut.y=Me,"center"===(di=ci.alignH||(An?An[qt]||An[0]:null))?Ut.x=we+xt/2-Ut.w/2:"right"===di?Ut.x=we+xt-Ut.w:"stretch"===di&&(Ut.w=xt),"center"===(di=ci.alignV||(Ti?Ti[qt]||Ti[0]:null))?Ut.y=Me+Tt/2-Ut.h/2:"bottom"===di?Ut.y=Me+Tt-Ut.h:"stretch"===di&&(Ut.h=Tt),le.layoutRect(Ut),we+=xt+Vi,le.recalc&&le.recalc();Me+=Tt+Lt}}else if(Et.w=Et.minW,Et.h=Et.minH,v.layoutRect(Et),this.recalc(v),null===v._lastRect){var ca=v.parent();ca&&(ca._lastRect=null,ca.recalc())}}}),Bo=fr.extend({renderHtml:function(){var v=this;return v.classes.add("iframe"),v.canFocus=!1,'<iframe id="'+v._id+'" class="'+v.classes+'" tabindex="-1" src="'+(v.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(v){this.getEl().src=v},html:function(v,T){var B=this,U=this.getEl().contentWindow.document.body;return U?(U.innerHTML=v,T&&T()):zn.setTimeout(function(){B.html(v)}),this}}),ya=fr.extend({init:function(v){this._super(v),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(v){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(v)},help:function(v){this.state.set("help",v)},renderHtml:function(){var v=this,T=v.classPrefix;return'<div id="'+v._id+'" class="'+v.classes+'"><div id="'+v._id+'-body">'+v.encode(v.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+T+"ico "+T+'i-help"></i></button></div></div>'},bindStates:function(){var v=this;return v.state.on("change:text",function(T){v.getEl("body").firstChild.data=v.encode(T.value),v.state.get("rendered")&&v.updateLayoutRect()}),v.state.on("change:help",function(T){v.classes.toggle("has-help",T.value),v.state.get("rendered")&&v.updateLayoutRect()}),v._super()}}),Po=fr.extend({init:function(v){var T=this;T._super(v),T.classes.add("widget").add("label"),T.canFocus=!1,v.multiline&&T.classes.add("autoscroll"),v.strong&&T.classes.add("strong")},initLayoutRect:function(){var v=this,T=v._super();return v.settings.multiline&&(De.getSize(v.getEl()).width>T.maxW&&(T.minW=T.maxW,v.classes.add("multiline")),v.getEl().style.width=T.minW+"px",T.startMinH=T.h=T.minH=Math.min(T.maxH,De.getSize(v.getEl()).height)),T},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(v){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(v)},renderHtml:function(){var v,T,B=this,U=B.settings.forId,et=B.settings.html?B.settings.html:B.encode(B.state.get("text"));return!U&&(T=B.settings.forName)&&(v=B.getRoot().find("#"+T)[0])&&(U=v._id),U?'<label id="'+B._id+'" class="'+B.classes+'"'+(U?' for="'+U+'"':"")+">"+et+"</label>":'<span id="'+B._id+'" class="'+B.classes+'">'+et+"</span>"},bindStates:function(){var v=this;return v.state.on("change:text",function(T){v.innerHtml(v.encode(T.value)),v.state.get("rendered")&&v.updateLayoutRect()}),v._super()}}),Yo=Kt.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(v){this._super(v),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(v){v.classes.add("toolbar-item")}),this._super()}}),ru=Yo.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),cl=ge.extend({init:function(v){var T=this;T._renderOpen=!0,T._super(v),v=T.settings,T.classes.add("menubtn"),v.fixedWidth&&T.classes.add("fixed-width"),T.aria("haspopup",!0),T.state.set("menu",v.menu||T.render())},showMenu:function(v){var T,B=this;if(B.menu&&B.menu.visible()&&!1!==v)return B.hideMenu();B.menu||(T=B.state.get("menu")||[],B.classes.add("opened"),T.length?T={type:"menu",animate:!0,items:T}:(T.type=T.type||"menu",T.animate=!0),B.menu=T.renderTo?T.parent(B).show().renderTo():fn.create(T).parent(B).renderTo(),B.fire("createmenu"),B.menu.reflow(),B.menu.on("cancel",function(ot){ot.control.parent()===B.menu&&(ot.stopPropagation(),B.focus(),B.hideMenu())}),B.menu.on("select",function(){B.focus()}),B.menu.on("show hide",function(ot){"hide"===ot.type&&ot.control.parent()===B&&B.classes.remove("opened-under"),ot.control===B.menu&&(B.activeMenu("show"===ot.type),B.classes.toggle("opened","show"===ot.type)),B.aria("expanded","show"===ot.type)}).fire("show")),B.menu.show(),B.menu.layoutRect({w:B.layoutRect().w}),B.menu.repaint(),B.menu.moveRel(B.getEl(),B.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var U=B.menu.layoutRect(),et=B.$el.offset().top+B.layoutRect().h;et>U.y&&et<U.y+U.h&&B.classes.add("opened-under"),B.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(v){v.hideMenu&&v.hideMenu()}),this.menu.hide())},activeMenu:function(v){this.classes.toggle("active",v)},renderHtml:function(){var v,T=this,B=T._id,U=T.classPrefix,et=T.settings.icon,ot=T.state.get("text"),xt="";return(v=T.settings.image)?(et="none","string"!=typeof v&&(v=Rt.window.getSelection?v[0]:v[1]),v=" style=\"background-image: url('"+v+"')\""):v="",ot&&(T.classes.add("btn-has-text"),xt='<span class="'+U+'txt">'+T.encode(ot)+"</span>"),et=T.settings.icon?U+"ico "+U+"i-"+et:"",T.aria("role",T.parent()instanceof ru?"menuitem":"button"),'<div id="'+B+'" class="'+T.classes+'" tabindex="-1" aria-labelledby="'+B+'"><button id="'+B+'-open" role="presentation" type="button" tabindex="-1">'+(et?'<i class="'+et+'"'+v+"></i>":"")+xt+' <i class="'+U+'caret"></i></button></div>'},postRender:function(){var v=this;return v.on("click",function(T){T.control===v&&function(B,U){for(;B;){if(U===B)return!0;B=B.parentNode}return!1}(T.target,v.getEl())&&(v.focus(),v.showMenu(!T.aria),T.aria&&v.menu.items().filter(":visible")[0].focus())}),v.on("mouseenter",function(T){var B,U=T.control,et=v.parent();U&&et&&U instanceof cl&&U.parent()===et&&(et.items().filter("MenuButton").each(function(ot){ot.hideMenu&&ot!==U&&(ot.menu&&ot.menu.visible()&&(B=!0),ot.hideMenu())}),B&&(U.focus(),U.showMenu()))}),v._super()},bindStates:function(){var v=this;return v.state.on("change:menu",function(){v.menu&&v.menu.remove(),v.menu=null}),v._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Oc=er.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(v){if(v.autohide=!0,v.constrainToViewport=!0,"function"==typeof v.items&&(v.itemsFactory=v.items,v.items=[]),v.itemDefaults)for(var T=v.items,B=T.length;B--;)T[B]=Ue.extend({},v.itemDefaults,T[B]);this._super(v),this.classes.add("menu"),v.animate&&11!==Jn.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var v,T=this;function B(){T.throbber&&(T.throbber.hide(),T.throbber=null)}T.settings.itemsFactory&&(T.throbber||(T.throbber=new Qr(T.getEl("body"),!0),0===T.items().length?(T.throbber.show(),T.fire("loading")):T.throbber.show(100,function(){T.items().remove(),T.fire("loading")}),T.on("hide close",B)),T.requestTime=v=(new Date).getTime(),T.settings.itemsFactory(function(U){0!==U.length?T.requestTime===v&&(T.getEl().style.width="",T.getEl("body").style.width="",B(),T.items().remove(),T.getEl("body").innerHTML="",T.add(U),T.renderNew(),T.fire("loaded")):T.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var v=this;return v.items().each(function(T){var B=T.settings;if(B.icon||B.image||B.selectable)return!(v._hasIcons=!0)}),v.settings.itemsFactory&&v.on("postrender",function(){v.settings.itemsFactory&&v.load()}),v.on("show hide",function(T){T.control===v&&("show"===T.type?zn.setTimeout(function(){v.classes.add("in")},0):v.classes.remove("in"))}),v._super()}}),Vd=cl.extend({init:function(v){var T,B,U,et,ot=this;ot._super(v),ot._values=T=(v=ot.settings).values,T&&(void 0!==v.value&&function xt(Tt){for(var Et=0;Et<Tt.length;Et++){if(B=Tt[Et].selected||v.value===Tt[Et].value)return U=U||Tt[Et].text,ot.state.set("value",Tt[Et].value),!0;if(Tt[Et].menu&&xt(Tt[Et].menu))return!0}}(T),!B&&0<T.length&&(U=T[0].text,ot.state.set("value",T[0].value)),ot.state.set("menu",T)),ot.state.set("text",v.text||U),ot.classes.add("listbox"),ot.on("select",function(xt){var Tt=xt.control;et&&(xt.lastControl=et),v.multiple?Tt.active(!Tt.active()):ot.value(xt.control.value()),et=Tt})},value:function(v){return 0===arguments.length?this.state.get("value"):(void 0===v||(this.settings.values&&!function T(B){return Qi(B,function(U){return U.menu?T(U.menu):U.value===v})}(this.settings.values)?null===v&&this.state.set("value",null):this.state.set("value",v)),this)},bindStates:function(){var v=this;return v.on("show",function(T){var B,U;B=T.control,U=v.value(),B instanceof Oc&&B.items().each(function(et){et.hasMenus()||et.active(et.value()===U)})}),v.state.on("change:value",function(T){var B=function U(et,ot){var xt;if(et)for(var Tt=0;Tt<et.length;Tt++){if(et[Tt].value===ot)return et[Tt];if(et[Tt].menu&&(xt=U(et[Tt].menu,ot)))return xt}}(v.state.get("menu"),T.value);v.text(B?B.text:v.settings.text)}),v._super()}}),Bc=fr.extend({Defaults:{border:0,role:"menuitem"},init:function(v){var T,B=this;B._super(v),v=B.settings,B.classes.add("menu-item"),v.menu&&B.classes.add("menu-item-expand"),v.preview&&B.classes.add("menu-item-preview"),"-"!==(T=B.state.get("text"))&&"|"!==T||(B.classes.add("menu-item-sep"),B.aria("role","separator"),B.state.set("text","-")),v.selectable&&(B.aria("role","menuitemcheckbox"),B.classes.add("menu-item-checkbox"),v.icon="selected"),v.preview||v.selectable||B.classes.add("menu-item-normal"),B.on("mousedown",function(U){U.preventDefault()}),v.menu&&!v.ariaHideMenu&&B.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var v,T=this,B=T.settings,U=T.parent();if(U.items().each(function(ot){ot!==T&&ot.hideMenu()}),B.menu){(v=T.menu)?v.show():((v=B.menu).length?v={type:"menu",items:v}:v.type=v.type||"menu",U.settings.itemDefaults&&(v.itemDefaults=U.settings.itemDefaults),(v=T.menu=fn.create(v).parent(T).renderTo()).reflow(),v.on("cancel",function(ot){ot.stopPropagation(),T.focus(),v.hide()}),v.on("show hide",function(ot){ot.control.items&&ot.control.items().each(function(xt){xt.active(xt.settings.selected)})}).fire("show"),v.on("hide",function(ot){ot.control===v&&T.classes.remove("selected")}),v.submenu=!0),v._parentMenu=U,v.classes.add("menu-sub");var et=v.testMoveRel(T.getEl(),T.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);v.moveRel(T.getEl(),et),et="menu-sub-"+(v.rel=et),v.classes.remove(v._lastRel).add(et),v._lastRel=et,T.classes.add("selected"),T.aria("expanded",!0)}},hideMenu:function(){var v=this;return v.menu&&(v.menu.items().each(function(T){T.hideMenu&&T.hideMenu()}),v.menu.hide(),v.aria("expanded",!1)),v},renderHtml:function(){var v,T=this,B=T._id,U=T.settings,et=T.classPrefix,ot=T.state.get("text"),xt=T.settings.icon,Tt="",Et=U.shortcut,Ut=T.encode(U.url);function le(we){return we.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function qt(we){var Me=U.match||"";return Me?we.replace(new RegExp(le(Me),"gi"),function(ci){return"!mce~match["+ci+"]mce~match!"}):we}function re(we){return we.replace(new RegExp(le("!mce~match["),"g"),"<b>").replace(new RegExp(le("]mce~match!"),"g"),"</b>")}return xt&&T.parent().classes.add("menu-has-icons"),U.image&&(Tt=" style=\"background-image: url('"+U.image+"')\""),Et&&(Et=function(we){var Me,ci,ii;for(ii=Jn.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},we=we.split("+"),Me=0;Me<we.length;Me++)(ci=ii[we[Me].toLowerCase()])&&(we[Me]=ci);return we.join("+")}(Et)),xt=et+"ico "+et+"i-"+(T.settings.icon||"none"),v="-"!==ot?'<i class="'+xt+'"'+Tt+"></i>\xa0":"",ot=re(T.encode(qt(ot))),Ut=re(T.encode(qt(Ut))),'<div id="'+B+'" class="'+T.classes+'" tabindex="-1">'+v+("-"!==ot?'<span id="'+B+'-text" class="'+et+'text">'+ot+"</span>":"")+(Et?'<div id="'+B+'-shortcut" class="'+et+'menu-shortcut">'+Et+"</div>":"")+(U.menu?'<div class="'+et+'caret"></div>':"")+(Ut?'<div class="'+et+'menu-item-link">'+Ut+"</div>":"")+"</div>"},postRender:function(){var v=this,T=v.settings,B=T.textStyle;if("function"==typeof B&&(B=B.call(this)),B){var U=v.getEl("text");U&&(U.setAttribute("style",B),v._textStyle=B)}return v.on("mouseenter click",function(et){et.control===v&&(T.menu||"click"!==et.type?(v.showMenu(),et.aria&&v.menu.focus(!0)):(v.fire("select"),zn.requestAnimationFrame(function(){v.parent().hideAll()})))}),v._super(),v},hover:function(){return this.parent().items().each(function(v){v.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(v){return function(T,B){var U=T._textStyle;if(U){var et=T.getEl("text");et.setAttribute("style",U),B&&(et.style.color="",et.style.backgroundColor="")}}(this,v),void 0!==v&&this.aria("checked",v),this._super(v)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),ou=Es.extend({Defaults:{classes:"radio",role:"radio"}}),hd=fr.extend({renderHtml:function(){var v=this,T=v.classPrefix;return v.classes.add("resizehandle"),"both"===v.settings.direction&&v.classes.add("resizehandle-both"),v.canFocus=!1,'<div id="'+v._id+'" class="'+v.classes+'"><i class="'+T+"ico "+T+'i-resize"></i></div>'},postRender:function(){var v=this;v._super(),v.resizeDragHelper=new he(this._id,{start:function(){v.fire("ResizeStart")},drag:function(T){"both"!==v.settings.direction&&(T.deltaX=0),v.fire("Resize",T)},stop:function(){v.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function fd(v){var T="";if(v)for(var B=0;B<v.length;B++)T+='<option value="'+v[B]+'">'+v[B]+"</option>";return T}var gd=fr.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(v){var T=this;T._super(v),T.settings.size&&(T.size=T.settings.size),T.settings.options&&(T._options=T.settings.options),T.on("keydown",function(B){var U;13===B.keyCode&&(B.preventDefault(),T.parents().reverse().each(function(et){if(et.toJSON)return U=et,!1}),T.fire("submit",{data:U.toJSON()}))})},options:function(v){return arguments.length?(this.state.set("options",v),this):this.state.get("options")},renderHtml:function(){var v,T=this,B="";return v=fd(T._options),T.size&&(B=' size = "'+T.size+'"'),'<select id="'+T._id+'" class="'+T.classes+'"'+B+">"+v+"</select>"},bindStates:function(){var v=this;return v.state.on("change:options",function(T){v.getEl().innerHTML=fd(T.value)}),v._super()}});function _s(v,T,B){return v<T&&(v=T),B<v&&(v=B),v}function El(v,T,B){v.setAttribute("aria-"+T,B)}function pd(v,T){var B,U,et,ot,xt;"v"===v.settings.orientation?(et="top",U="height",B="h"):(et="left",U="width",B="w"),xt=v.getEl("handle"),ot=((v.layoutRect()[B]||100)-De.getSize(xt)[U])*((T-v._minValue)/(v._maxValue-v._minValue))+"px",xt.style[et]=ot,xt.style.height=v.layoutRect().h+"px",El(xt,"valuenow",T),El(xt,"valuetext",""+v.settings.previewFilter(T)),El(xt,"valuemin",v._minValue),El(xt,"valuemax",v._maxValue)}var v,Zi=fr.extend({init:function(v){var T=this;v.previewFilter||(v.previewFilter=function(B){return Math.round(100*B)/100}),T._super(v),T.classes.add("slider"),"v"===v.orientation&&T.classes.add("vertical"),T._minValue=mo(v.minValue)?v.minValue:0,T._maxValue=mo(v.maxValue)?v.maxValue:100,T._initValue=T.state.get("value")},renderHtml:function(){var v=this._id;return'<div id="'+v+'" class="'+this.classes+'"><div id="'+v+'-handle" class="'+this.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var v,T,B,U,et,ot,xt,Tt,Et,Ut,le,qt,re,we,Me=this;v=Me._minValue,T=Me._maxValue,"v"===Me.settings.orientation?(B="screenY",U="top",et="height",ot="h"):(B="screenX",U="left",et="width",ot="w"),Me._super(),function(ci,ii){function di(Vi){var Lt,An,Ti,Ki;Lt=_s(Lt=(((Lt=Me.value())+(Ki=An=ci))/((Ti=ii)-Ki)+.05*Vi)*(Ti-An)-An,ci,ii),Me.value(Lt),Me.fire("dragstart",{value:Lt}),Me.fire("drag",{value:Lt}),Me.fire("dragend",{value:Lt})}Me.on("keydown",function(Vi){switch(Vi.keyCode){case 37:case 38:di(-1);break;case 39:case 40:di(1)}})}(v,T),xt=v,Tt=T,Et=Me.getEl("handle"),Me._dragHelper=new he(Me._id,{handle:Me._id+"-handle",start:function(ci){Ut=ci[B],le=parseInt(Me.getEl("handle").style[U],10),qt=(Me.layoutRect()[ot]||100)-De.getSize(Et)[et],Me.fire("dragstart",{value:we})},drag:function(ci){re=_s(le+(ci[B]-Ut),0,qt),Et.style[U]=re+"px",Me.value(we=xt+re/qt*(Tt-xt)),Me.tooltip().text(""+Me.settings.previewFilter(we)).show().moveRel(Et,"bc tc"),Me.fire("drag",{value:we})},stop:function(){Me.tooltip().hide(),Me.fire("dragend",{value:we})}})},repaint:function(){this._super(),pd(this,this.value())},bindStates:function(){var v=this;return v.state.on("change:value",function(T){pd(v,T.value)}),v._super()}}),au=fr.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),xa=cl.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var T,B=this.getEl(),U=this.layoutRect();return this._super(),T=B.lastChild,Qn(B.firstChild).css({width:U.w-De.getSize(T).width,height:U.h-2}),Qn(T).css({height:U.h-2}),this},activeMenu:function(v){Qn(this.getEl().lastChild).toggleClass(this.classPrefix+"active",v)},renderHtml:function(){var v,B=this,U=B._id,et=B.classPrefix,ot=B.state.get("icon"),xt=B.state.get("text"),Tt=B.settings,Et="";return(v=Tt.image)?(ot="none","string"!=typeof v&&(v=Rt.window.getSelection?v[0]:v[1]),v=" style=\"background-image: url('"+v+"')\""):v="",ot=Tt.icon?et+"ico "+et+"i-"+ot:"",xt&&(B.classes.add("btn-has-text"),Et='<span class="'+et+'txt">'+B.encode(xt)+"</span>"),'<div id="'+U+'" class="'+B.classes+'" role="button"'+("boolean"==typeof Tt.active?' aria-pressed="'+Tt.active+'"':"")+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(ot?'<i class="'+ot+'"'+v+"></i>":"")+Et+'</button><button type="button" class="'+et+'open" hidefocus="1" tabindex="-1">'+(B._menuBtnText?(ot?"\xa0":"")+B._menuBtnText:"")+' <i class="'+et+'caret"></i></button></div>'},postRender:function(){var v=this.settings.onclick;return this.on("click",function(T){var B=T.target;if(T.control===this)for(;B;){if(T.aria&&"down"!==T.aria.key||"BUTTON"===B.nodeName&&-1===B.className.indexOf("open"))return T.stopImmediatePropagation(),void(v&&v.call(this,T));B=B.parentNode}}),delete this.settings.onclick,this._super()}}),dl=zs.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Eo=Le.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(v){var T;this.activeTabId&&(T=this.getEl(this.activeTabId),Qn(T).removeClass(this.classPrefix+"active"),T.setAttribute("aria-selected","false")),this.activeTabId="t"+v,(T=this.getEl("t"+v)).setAttribute("aria-selected","true"),Qn(T).addClass(this.classPrefix+"active"),this.items()[v].show().fire("showtab"),this.reflow(),this.items().each(function(B,U){v!==U&&B.hide()})},renderHtml:function(){var v=this,T=v._layout,B="",U=v.classPrefix;return v.preRender(),T.preRender(v),v.items().each(function(et,ot){var xt=v._id+"-t"+ot;et.aria("role","tabpanel"),et.aria("labelledby",xt),B+='<div id="'+xt+'" class="'+U+'tab" unselectable="on" role="tab" aria-controls="'+et._id+'" aria-selected="false" tabIndex="-1">'+v.encode(et.settings.title)+"</div>"}),'<div id="'+v._id+'" class="'+v.classes+'" hidefocus="1" tabindex="-1"><div id="'+v._id+'-head" class="'+U+'tabs" role="tablist">'+B+'</div><div id="'+v._id+'-body" class="'+v.bodyClasses+'">'+T.renderHtml(v)+"</div></div>"},postRender:function(){var v=this;v._super(),v.settings.activeTab=v.settings.activeTab||0,v.activateTab(v.settings.activeTab),this.on("click",function(T){var B=T.target.parentNode;if(B&&B.id===v._id+"-head")for(var U=B.childNodes.length;U--;)B.childNodes[U]===T.target&&v.activateTab(U)})},initLayoutRect:function(){var v,T,B,U=this;T=(T=De.getSize(U.getEl("head")).width)<0?0:T,B=0,U.items().each(function(ot){T=Math.max(T,ot.layoutRect().minW),B=Math.max(B,ot.layoutRect().minH)}),U.items().each(function(ot){ot.settings.x=0,ot.settings.y=0,ot.settings.w=T,ot.settings.h=B,ot.layoutRect({x:0,y:0,w:T,h:B})});var et=De.getSize(U.getEl("head")).height;return U.settings.minWidth=T,U.settings.minHeight=B+et,(v=U._super()).deltaH+=et,v.innerH=v.h-v.deltaH,v}}),hl=fr.extend({init:function(v){var T=this;T._super(v),T.classes.add("textbox"),v.multiline?T.classes.add("multiline"):(T.on("keydown",function(B){var U;13===B.keyCode&&(B.preventDefault(),T.parents().reverse().each(function(et){if(et.toJSON)return U=et,!1}),T.fire("submit",{data:U.toJSON()}))}),T.on("keyup",function(B){T.state.set("value",B.target.value)}))},repaint:function(){var v,T,B,U,et,ot=this,xt=0;v=ot.getEl().style,T=ot._layoutRect,et=ot._lastRepaintRect||{};var Tt=Rt.document;return!ot.settings.multiline&&Tt.all&&(!Tt.documentMode||Tt.documentMode<=8)&&(v.lineHeight=T.h-xt+"px"),U=(B=ot.borderBox).left+B.right+8,xt=B.top+B.bottom+(ot.settings.multiline?8:0),T.x!==et.x&&(v.left=T.x+"px",et.x=T.x),T.y!==et.y&&(v.top=T.y+"px",et.y=T.y),T.w!==et.w&&(v.width=T.w-U+"px",et.w=T.w),T.h!==et.h&&(v.height=T.h-xt+"px",et.h=T.h),ot._lastRepaintRect=et,ot.fire("repaint",{},!1),ot},renderHtml:function(){var v,T,B=this,U=B.settings;return v={id:B._id,hidefocus:"1"},Ue.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(et){v[et]=U[et]}),B.disabled()&&(v.disabled="disabled"),U.subtype&&(v.type=U.subtype),(T=De.create(U.multiline?"textarea":"input",v)).value=B.state.get("value"),T.className=B.classes.toString(),T.outerHTML},value:function(v){return arguments.length?(this.state.set("value",v),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var v=this;v.getEl().value=v.state.get("value"),v._super(),v.$el.on("change",function(T){v.state.set("value",T.target.value),v.fire("change",T)})},bindStates:function(){var v=this;return v.state.on("change:value",function(T){v.getEl().value!==T.value&&(v.getEl().value=T.value)}),v.state.on("change:disabled",function(T){v.getEl().disabled=T.value}),v._super()},remove:function(){this.$el.off(),this._super()}}),Hs=function(){return{Selector:uo,Collection:za,ReflowQueue:yo,Control:Go,Factory:fn,KeyboardNavigation:Ft,Container:Kt,DragHelper:he,Scrollable:pn,Panel:Le,Movable:Mi,Resizable:xn,FloatPanel:er,Window:el,MessageBox:Fr,Tooltip:_o,Widget:fr,Progress:Yl,Notification:_u,Layout:Cu,AbsoluteLayout:il,Button:ge,ButtonGroup:Fa,Checkbox:Es,ComboBox:Ir,ColorBox:Dl,PanelButton:rl,ColorButton:id,ColorPicker:bh,Path:wo,ElementPath:fs,FormItem:Bd,Form:gs,FieldSet:Do,FilePicker:Eu,FitLayout:ud,FlexLayout:Rc,FlowLayout:zs,FormatControls:iu,GridLayout:fc,Iframe:Bo,InfoBox:ya,Label:Po,Toolbar:Yo,MenuBar:ru,MenuButton:cl,MenuItem:Bc,Throbber:Qr,Menu:Oc,ListBox:Vd,Radio:ou,ResizeHandle:hd,SelectBox:gd,Slider:Zi,Spacer:au,SplitButton:xa,StackLayout:dl,TabPanel:Eo,TextBox:hl,DropZone:Od,BrowseButton:Ps}};Ue.each(Hs(),function(v,T){fn.add(T,v)}),(v=window.tinymce?window.tinymce:{}).ui?Ue.each(Hs(),function(T,B){v.ui[B]=T}):v.ui=Hs(),Ve.add("modern",function(v){return iu.setup(v),Su(v)})}(window),function(Rt){"use strict";var pi=tinymce.util.Tools.resolve("tinymce.PluginManager"),bn=tinymce.util.Tools.resolve("tinymce.util.VK"),Oe=function(jt){return jt.target_list},se=function(jt){return jt.rel_list},Ve=function(jt){return jt.link_class_list},Ci=Oe,Si=se,fn=function(jt){return void 0!==se(jt)},ei=Ve,Dn=function(jt){return"boolean"==typeof jt.allow_unsafe_link_target&&jt.allow_unsafe_link_target},Dr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),po=tinymce.util.Tools.resolve("tinymce.Env"),zn=tinymce.util.Tools.resolve("tinymce.util.Tools"),ki=function(jt,je){var nn,ui=["noopener"],Jn=jt?jt.split(/\s+/):[],sn=function(Fi){return Fi.filter(function(tr){return-1===zn.inArray(ui,tr)})};return(Jn=je?(nn=sn(nn=Jn)).length?nn.concat(ui):ui:sn(Jn)).length?zn.trim(Jn.sort().join(" ")):null},Fn=function(jt,je){return je=je||jt.selection.getNode(),St(je)?jt.dom.select("a[href]",je)[0]:jt.dom.getParent(je,"a[href]")},Lr=function(jt){return jt&&"A"===jt.nodeName&&jt.href},St=function(jt){return jt&&"FIGURE"===jt.nodeName&&/\bimage\b/i.test(jt.className)},gr=function(jt){return function(){jt.undoManager.transact(function(){var je=jt.selection.getNode();St(je)?function(jt,je){var nn,gn;(gn=jt.dom.select("img",je)[0])&&(nn=jt.dom.getParents(gn,"a[href]",je)[0])&&(nn.parentNode.insertBefore(gn,nn),jt.dom.remove(nn))}(jt,je):jt.execCommand("unlink")})}},Rn=Lr,kn=function(jt){return 0<zn.grep(jt,Lr).length},Ui=Fn,Ln=ki,aa=tinymce.util.Tools.resolve("tinymce.util.Delay"),Br=tinymce.util.Tools.resolve("tinymce.util.XHR"),ao={},br=function(jt,je,nn){var gn=function(ui,Jn){return Jn=Jn||[],zn.each(ui,function(sn){var Fi={text:sn.text||sn.title};sn.menu?Fi.menu=gn(sn.menu):(Fi.value=sn.value,je&&je(Fi)),Jn.push(Fi)}),Jn};return gn(jt,nn||[])},pr=function(jt,je,nn){var gn=jt.selection.getRng();aa.setEditorTimeout(jt,function(){jt.windowManager.confirm(je,function(ui){jt.selection.setRng(gn),nn(ui)})})},_i=function(jt,je){var nn,gn,ui,Jn,sn,Fi,tr,so,hr,mr,vr,lr={},gi=jt.dom,De=function($i){var _r=ui.find("#text");(!_r.value()||$i.lastControl&&_r.value()===$i.lastControl.text())&&_r.value($i.control.text()),ui.find("#href").value($i.control.value())},Wi=function(){gn||!Jn||lr.text||this.parent().parent().find("#text")[0].value(this.value())};Jn=function(jt){return!(/</.test(jt)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(jt)||-1===jt.indexOf("href=")))}(jt.selection.getContent()),nn=Ui(jt),lr.text=gn=function(jt,je){return(je?je.innerText||je.textContent:jt.getContent({format:"text"})).replace(/\uFEFF/g,"")}(jt.selection,nn),lr.href=nn?gi.getAttrib(nn,"href"):"",nn?lr.target=gi.getAttrib(nn,"target"):function(jt){return"string"==typeof jt.default_link_target}(jt.settings)&&(lr.target=function(jt){return jt.default_link_target}(jt.settings)),(vr=gi.getAttrib(nn,"rel"))&&(lr.rel=vr),(vr=gi.getAttrib(nn,"class"))&&(lr.class=vr),(vr=gi.getAttrib(nn,"title"))&&(lr.title=vr),Jn&&(sn={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){lr.text=this.value()}}),je&&(Fi={type:"listbox",label:"Link list",values:br(je,function($i){$i.value=jt.convertURL($i.value||$i.url,"href")},[{text:"None",value:""}]),onselect:De,value:jt.convertURL(lr.href,"href"),onPostRender:function(){Fi=this}}),function(jt){return!1!==Oe(jt)}(jt.settings)&&(void 0===Ci(jt.settings)&&function(jt,je){jt.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]}(jt),so={name:"target",type:"listbox",label:"Target",values:br(Ci(jt.settings))}),fn(jt.settings)&&(tr={name:"rel",type:"listbox",label:"Rel",values:br(Si(jt.settings),function($i){!1===Dn(jt.settings)&&($i.value=Ln($i.value,"_blank"===lr.target))})}),function(jt){return void 0!==Ve(jt)}(jt.settings)&&(hr={name:"class",type:"listbox",label:"Class",values:br(ei(jt.settings),function($i){$i.value&&($i.textStyle=function(){return jt.formatter.getCssText({inline:"a",classes:[$i.value]})})})}),function(jt){return!1!==jt.link_title}(jt.settings)&&(mr={name:"title",type:"textbox",label:"Title",value:lr.title}),ui=jt.windowManager.open({title:"Insert link",data:lr,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function($i){var _r=$i.meta||{};Fi&&Fi.value(jt.convertURL(this.value(),"href")),zn.each($i.meta,function(qr,yr){var Mi=ui.find("#"+yr);"text"===yr?0===gn.length&&(Mi.value(qr),lr.text=qr):Mi.value(qr)}),_r.attach&&(ao={href:this.value(),attach:_r.attach}),_r.text||Wi.call(this)},onkeyup:Wi,onpaste:Wi,onbeforecall:function($i){$i.meta=ui.toJSON()}},sn,mr,function($i){var _r=[];if(zn.each(jt.dom.select("a:not([href])"),function(qr){var yr=qr.name||qr.id;yr&&_r.push({text:yr,value:"#"+yr,selected:-1!==$i.indexOf("#"+yr)})}),_r.length)return _r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:_r,onselect:De}}(lr.href),Fi,tr,so,hr],onSubmit:function($i){var _r=function(jt){return"boolean"==typeof jt.link_assume_external_targets&&jt.link_assume_external_targets}(jt.settings),qr=function(jt,je){return function(nn){jt.undoManager.transact(function(){var gn=jt.selection.getNode(),ui=Fn(jt,gn),Jn={href:nn.href,target:nn.target?nn.target:null,rel:nn.rel?nn.rel:null,class:nn.class?nn.class:null,title:nn.title?nn.title:null};fn(jt.settings)||!1!==Dn(jt.settings)||(Jn.rel=ki(Jn.rel,"_blank"===Jn.target)),nn.href===je.href&&(je.attach(),je={}),ui?(jt.focus(),nn.hasOwnProperty("text")&&("innerText"in ui?ui.innerText=nn.text:ui.textContent=nn.text),jt.dom.setAttribs(ui,Jn),jt.selection.select(ui),jt.undoManager.add()):St(gn)?function(jt,je,nn){var gn,ui;(ui=jt.dom.select("img",je)[0])&&(gn=jt.dom.create("a",nn),ui.parentNode.insertBefore(gn,ui),gn.appendChild(ui))}(jt,gn,Jn):nn.hasOwnProperty("text")?jt.insertContent(jt.dom.createHTML("a",Jn,jt.dom.encode(nn.text))):jt.execCommand("mceInsertLink",!1,Jn)})}}(jt,ao),yr=gr(jt),Mi=zn.extend({},lr,$i.data),wi=Mi.href;wi?(Jn&&Mi.text!==gn||delete Mi.text,0<wi.indexOf("@")&&-1===wi.indexOf("//")&&-1===wi.indexOf("mailto:")?pr(jt,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(Ai){Ai&&(Mi.href="mailto:"+wi),qr(Mi)}):!0===_r&&!/^\w+:/i.test(wi)||!1===_r&&/^\s*www[\.|\d\.]/i.test(wi)?pr(jt,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(Ai){Ai&&(Mi.href="http://"+wi),qr(Mi)}):qr(Mi)):yr()}})},mo=function(jt,je){return jt.dom.getParent(je,"a[href]")},Vn=function(jt){return mo(jt,jt.selection.getStart())},Ei=function(jt,je){if(je){var nn=(ui=je).getAttribute("data-mce-href")||ui.getAttribute("href");if(/^#/.test(nn)){var gn=jt.$(nn);gn.length&&jt.selection.scrollIntoView(gn[0],!0)}else!function(jt){if(!po.ie||10<po.ie){var je=Rt.document.createElement("a");je.target="_blank",je.href=jt,je.rel="noreferrer noopener";var nn=Rt.document.createEvent("MouseEvents");nn.initMouseEvent("click",!0,!0,Rt.window,0,0,0,0,0,!1,!1,!1,!1,0,null),sn=nn,Rt.document.body.appendChild(Jn=je),Jn.dispatchEvent(sn),Rt.document.body.removeChild(Jn)}else{var gn=Rt.window.open("","_blank");if(gn){gn.opener=null;var ui=gn.document;ui.open(),ui.write('<meta http-equiv="refresh" content="0; url='+Dr.DOM.encode(jt)+'">'),ui.close()}}var Jn,sn}(je.href)}var ui},Zn=function(jt){return function(){!function(jt){var je,nn,gn;nn=_i,"string"==typeof(gn=function(jt){return jt.link_list}((je=jt).settings))?Br.send({url:gn,success:function(ui){nn(je,JSON.parse(ui))}}):"function"==typeof gn?gn(function(ui){nn(je,ui)}):nn(je,gn)}(jt)}},Qi=function(jt){return function(){Ei(jt,Vn(jt))}},To=function(jt){return function(){var je=this;jt.on("nodechange",function(nn){je.active(!jt.readonly&&!!Ui(jt,nn.element))})}},pe=function(jt){return function(){var je=this,nn=function(gn){kn(gn.parents)?je.show():je.hide()};kn(jt.dom.getParents(jt.selection.getStart()))||je.hide(),jt.on("nodechange",nn),je.on("remove",function(){jt.off("nodechange",nn)})}};pi.add("link",function(jt){(function(jt){jt.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:Zn(jt),onpostrender:To(jt)}),jt.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:gr(jt),onpostrender:To(jt)}),jt.addContextToolbar&&jt.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:Qi(jt)})})(jt),function(jt){jt.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:Qi(jt),onPostRender:pe(jt),prependToContext:!0}),jt.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:Zn(jt),stateSelector:"a[href]",context:"insert",prependToContext:!0}),jt.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:gr(jt),stateSelector:"a[href]"})}(jt),function(jt){jt.addContextToolbar&&jt.addContextToolbar(function(jt){return function(je){var nn,gn,ui,Jn;return!!(function(jt){return"boolean"==typeof jt.link_context_toolbar&&jt.link_context_toolbar}(jt.settings)&&(!(Jn=jt.plugins.contextmenu)||!Jn.isContextMenuVisible())&&Rn(je)&&3===(ui=(gn=(nn=jt.selection).getRng()).startContainer).nodeType&&nn.isCollapsed()&&0<gn.startOffset&&gn.startOffset<ui.data.length)}}(jt),"openlink | link unlink")}(jt),function(jt){jt.on("click",function(je){var nn=mo(jt,je.target);nn&&bn.metaKeyPressed(je)&&(je.preventDefault(),Ei(jt,nn))}),jt.on("keydown",function(je){var nn,gn=Vn(jt);gn&&13===je.keyCode&&!0===(nn=je).altKey&&!1===nn.shiftKey&&!1===nn.ctrlKey&&!1===nn.metaKey&&(je.preventDefault(),Ei(jt,gn))})}(jt),function(jt){jt.addCommand("mceLink",Zn(jt))}(jt),function(jt){jt.addShortcut("Meta+K","",Zn(jt))}(jt)})}(window),function(Rt){"use strict";var pi=function(yt){var Ft=yt,oe=function(){return Ft};return{get:oe,set:function(Kt){Ft=Kt},clone:function(){return pi(oe())}}},bn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ue=function(yt,Ft){return yt.fire("PastePlainTextToggle",{state:Ft})},Nn_shouldPasteDataImages=function(yt){return yt.getParam("paste_data_images",!1)},Nn_shouldMergeFormats=function(yt){return yt.getParam("paste_merge_formats",!0)},Nn_getRetainStyleProps=function(yt){return yt.getParam("paste_retain_style_properties")},Gi=tinymce.util.Tools.resolve("tinymce.Env"),zi=tinymce.util.Tools.resolve("tinymce.util.Delay"),Si=tinymce.util.Tools.resolve("tinymce.util.Tools"),fn=tinymce.util.Tools.resolve("tinymce.util.VK"),ei="x-tinymce/html",Zt="\x3c!-- "+ei+" --\x3e",Dr=function(yt){return-1!==yt.indexOf(Zt)},po=function(){return ei},Rr=tinymce.util.Tools.resolve("tinymce.html.Entities"),St=tinymce.util.Tools.resolve("tinymce.html.DomParser"),kt=tinymce.util.Tools.resolve("tinymce.html.Serializer"),yn=tinymce.util.Tools.resolve("tinymce.html.Node"),Mn=tinymce.util.Tools.resolve("tinymce.html.Schema");function gr(yt,Ft){return Si.each(Ft,function(oe){yt=oe.constructor===RegExp?yt.replace(oe,""):yt.replace(oe[0],oe[1])}),yt}var Rn={filter:gr,innerText:function(yt){var Ft=Mn(),oe=St({},Ft),Kt="",fe=Ft.getShortEndedElements(),he=Si.makeMap("script noscript style textarea video audio iframe object"," "),In=Ft.getBlockElements();return yt=gr(yt,[/<!\[[^\]]+\]>/g]),function Pe(hn){var vn=hn.name,pn=hn;if("br"!==vn){if("wbr"!==vn)if(fe[vn]&&(Kt+=" "),he[vn])Kt+=" ";else{if(3===hn.type&&(Kt+=hn.value),!hn.shortEnded&&(hn=hn.firstChild))for(;Pe(hn),hn=hn.next;);In[vn]&&pn.next&&(Kt+="\n","p"===vn&&(Kt+="\n"))}}else Kt+="\n"}(oe.parse(yt)),Kt},trimHtml:function(yt){return gr(yt,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(Ft,oe,Kt){return oe||Kt?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(yt){var Ft=0;return function(){return yt+Ft++}},isMsEdge:function(){return-1!==Rt.navigator.userAgent.indexOf(" Edge/")}};function kn(yt){var Ft,oe;return oe=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],yt=yt.replace(/^[\u00a0 ]+/,""),Si.each(oe,function(Kt){if(Kt.test(yt))return!(Ft=!0)}),Ft}function Ui(yt,Ft,oe,Kt){var fe,he={},In=yt.dom.parseStyle(Kt);return Si.each(In,function(Pe,hn){switch(hn){case"mso-list":(fe=/\w+ \w+([0-9]+)/i.exec(Kt))&&(oe._listLevel=parseInt(fe[1],10)),/Ignore/i.test(Pe)&&oe.firstChild&&(oe._listIgnore=!0,oe.firstChild._listIgnore=!0);break;case"horiz-align":hn="text-align";break;case"vert-align":hn="vertical-align";break;case"font-color":case"mso-foreground":hn="color";break;case"mso-background":case"mso-highlight":hn="background";break;case"font-weight":case"font-style":return void("normal"!==Pe&&(he[hn]=Pe));case"mso-element":if(/^(comment|comment-list)$/i.test(Pe))return void oe.remove()}0!==hn.indexOf("mso-comment")?0!==hn.indexOf("mso-")&&("all"===Nn_getRetainStyleProps(yt)||Ft&&Ft[hn])&&(he[hn]=Pe):oe.remove()}),/(bold)/i.test(he["font-weight"])&&(delete he["font-weight"],oe.wrap(new yn("b",1))),/(italic)/i.test(he["font-style"])&&(delete he["font-style"],oe.wrap(new yn("i",1))),(he=yt.dom.serializeStyle(he,oe.name))||null}var bi,Ln,aa,Br,pr,_i,mo_isWordContent=function(yt){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(yt)||/class="OutlineElement/.test(yt)||/id="?docs\-internal\-guid\-/.test(yt)},Vn=function(yt,Ft){return{content:yt,cancelled:Ft}},Zn=function(yt,Ft,oe){var Kt=mo_isWordContent(Ft);return function(yt,Ft,oe,Kt){var fe,In,Pe,hn,vn,pn=function(yt,Ft,oe,Kt){return yt.fire("PastePreProcess",{content:Ft,internal:oe,wordContent:Kt})}(yt,Ft,oe,Kt),Le=function(xn,en){var He=St({},xn.schema);He.addNodeFilter("meta",function(li){Si.each(li,function(Ii){return Ii.remove()})});var Un=He.parse(en,{forced_root_block:!1,isRootContent:!0});return kt({validate:xn.settings.validate},xn.schema).serialize(Un)}(yt,pn.content);return yt.hasEventListeners("PastePostProcess")&&!pn.isDefaultPrevented()?(In=oe,Pe=Kt,hn=(fe=yt).dom.create("div",{style:"display:none"},Le),vn=function(yt,Ft,oe,Kt){return yt.fire("PastePostProcess",{node:Ft,internal:oe,wordContent:Kt})}(fe,hn,In,Pe),Vn(vn.node.innerHTML,vn.isDefaultPrevented())):Vn(Le,pn.isDefaultPrevented())}(yt,Kt?function(yt,Ft){return function(yt){return yt.getParam("paste_enable_default_filters",!0)}(yt)?function(oe,Kt){var fe,he;(fe=Nn_getRetainStyleProps(oe))&&(he=Si.makeMap(fe.split(/[, ]/))),Kt=Rn.filter(Kt,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(pn,Le){return 0<Le.length?Le.replace(/./," ").slice(Math.floor(Le.length/2)).split("").join("\xa0"):""}]]);var In=function(yt){return yt.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}(oe),Pe=Mn({valid_elements:In,valid_children:"-li[p]"});Si.each(Pe.elements,function(pn){pn.attributes.class||(pn.attributes.class={},pn.attributesOrder.push("class")),pn.attributes.style||(pn.attributes.style={},pn.attributesOrder.push("style"))});var hn=St({},Pe);hn.addAttributeFilter("style",function(pn){for(var Le,xn=pn.length;xn--;)(Le=pn[xn]).attr("style",Ui(oe,he,Le,Le.attr("style"))),"span"===Le.name&&Le.parent&&!Le.attributes.length&&Le.unwrap()}),hn.addAttributeFilter("class",function(pn){for(var Le,xn,en=pn.length;en--;)xn=(Le=pn[en]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(xn)&&Le.remove(),Le.attr("class",null)}),hn.addNodeFilter("del",function(pn){for(var Le=pn.length;Le--;)pn[Le].remove()}),hn.addNodeFilter("a",function(pn){for(var Le,xn,en,He=pn.length;He--;)if(xn=(Le=pn[He]).attr("href"),en=Le.attr("name"),xn&&-1!==xn.indexOf("#_msocom_"))Le.remove();else if(xn&&0===xn.indexOf("file://")&&(xn=xn.split("#")[1])&&(xn="#"+xn),xn||en){if(en&&!/^_?(?:toc|edn|ftn)/i.test(en)){Le.unwrap();continue}Le.attr({href:xn,name:en})}else Le.unwrap()});var vn=hn.parse(Kt);return function(yt){return yt.getParam("paste_convert_word_fake_lists",!0)}(oe)&&function Fe(yt){var Ft,oe,Kt=1;function fe(en){var He="";if(3===en.type)return en.value;if(en=en.firstChild)for(;He+=fe(en),en=en.next;);return He}function he(en,He){if(3===en.type&&He.test(en.value))return en.value=en.value.replace(He,""),!1;if(en=en.firstChild)do{if(!he(en,He))return!1}while(en=en.next);return!0}function In(en,He,Un){var li=en._listLevel||Kt;li!==Kt&&(li<Kt?Ft&&(Ft=Ft.parent.parent):(oe=Ft,Ft=null)),Ft&&Ft.name===He?Ft.append(en):(oe=oe||Ft,Ft=new yn(He,1),1<Un&&Ft.attr("start",""+Un),en.wrap(Ft)),en.name="li",Kt<li&&oe&&oe.lastChild.append(Ft),Kt=li,function Ii(ri){if(ri._listIgnore)ri.remove();else if(ri=ri.firstChild)for(;Ii(ri),ri=ri.next;);}(en),he(en,/^\u00a0+/),he(en,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),he(en,/^\u00a0+/)}for(var Pe=[],hn=yt.firstChild;null!=hn;)if(Pe.push(hn),null!==(hn=hn.walk()))for(;void 0!==hn&&hn.parent!==yt;)hn=hn.walk();for(var vn=0;vn<Pe.length;vn++)if("p"===(yt=Pe[vn]).name&&yt.firstChild){var pn=fe(yt);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(pn)){In(yt,"ul");continue}if(kn(pn)){var Le=/([0-9]+)\./.exec(pn),xn=1;Le&&(xn=parseInt(Le[1],10)),In(yt,"ol",xn);continue}if(yt._listLevel){In(yt,"ul",1);continue}Ft=null}else oe=Ft,Ft=null}(vn),kt({validate:oe.settings.validate},Pe).serialize(vn)}(yt,Ft):Ft}(yt,Ft):Ft,oe,Kt)},Qi=function(yt,Ft){return yt.insertContent(Ft,{merge:Nn_shouldMergeFormats(yt),paste:!0}),!0},Mr=function(yt){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(yt)},To=function(yt,Ft,oe){return!(!1!==yt.selection.isCollapsed()||!Mr(Ft)||(fe=Ft,he=oe,(Kt=yt).undoManager.extra(function(){he(Kt,fe)},function(){Kt.execCommand("mceInsertLink",!1,fe)}),0));var Kt,fe,he},pe=function(yt,Ft,oe){return!!function(yt){return Mr(yt)&&/.(gif|jpe?g|png)$/.test(yt)}(Ft)&&(fe=Ft,he=oe,(Kt=yt).undoManager.extra(function(){he(Kt,fe)},function(){Kt.insertContent('<img src="'+fe+'">')}),!0);var Kt,fe,he},Qe=function(yt){return function(){return yt}},cn=Qe(!1),Xe=Qe(!0),jt=function(){return je},je=(bi=function(yt){return yt.isNone()},Br={fold:function(yt,Ft){return yt()},is:cn,isSome:cn,isNone:Xe,getOr:aa=function(yt){return yt},getOrThunk:Ln=function(yt){return yt()},getOrDie:function(yt){throw new Error(yt||"error: getOrDie called on none.")},getOrNull:Qe(null),getOrUndefined:Qe(void 0),or:aa,orThunk:Ln,map:jt,each:function(){},bind:jt,exists:cn,forall:Xe,filter:jt,equals:bi,equals_:bi,toArray:function(){return[]},toString:Qe("none()")},Object.freeze&&Object.freeze(Br),Br),nn=function(yt){var Ft=Qe(yt),oe=function(){return fe},Kt=function(he){return he(yt)},fe={fold:function(he,In){return In(yt)},is:function(he){return yt===he},isSome:Xe,isNone:cn,getOr:Ft,getOrThunk:Ft,getOrDie:Ft,getOrNull:Ft,getOrUndefined:Ft,or:oe,orThunk:oe,map:function(he){return nn(he(yt))},each:function(he){he(yt)},bind:Kt,exists:Kt,forall:Kt,filter:function(he){return he(yt)?fe:je},toArray:function(){return[yt]},toString:function(){return"some("+yt+")"},equals:function(he){return he.is(yt)},equals_:function(he,In){return he.fold(cn,function(Pe){return In(yt,Pe)})}};return fe},gn={some:nn,none:jt,from:function(yt){return null==yt?je:nn(yt)}},ui=function(yt){return"function"===function(Ft){if(null===Ft)return"null";var oe=typeof Ft;return"object"===oe&&(Array.prototype.isPrototypeOf(Ft)||Ft.constructor&&"Array"===Ft.constructor.name)?"array":"object"===oe&&(String.prototype.isPrototypeOf(Ft)||Ft.constructor&&"String"===Ft.constructor.name)?"string":oe}(yt)},Jn=Array.prototype.slice,sn=function(yt,Ft){for(var oe=yt.length,Kt=new Array(oe),fe=0;fe<oe;fe++)Kt[fe]=Ft(yt[fe],fe);return Kt},Fi=function(yt,Ft){for(var oe=0,Kt=yt.length;oe<Kt;oe++)Ft(yt[oe],oe)},tr=ui(Array.from)?Array.from:function(yt){return Jn.call(yt)},so={},hr={exports:so};pr=so,_i=hr,function(yt){"object"==typeof pr&&void 0!==_i?_i.exports=yt():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=yt()}(function(){return function yt(Ft,oe,Kt){function fe(Pe,hn){if(!oe[Pe]){if(!Ft[Pe]){if(he)return he(Pe,!0);var pn=new Error("Cannot find module '"+Pe+"'");throw pn.code="MODULE_NOT_FOUND",pn}var Le=oe[Pe]={exports:{}};Ft[Pe][0].call(Le.exports,function(xn){return fe(Ft[Pe][1][xn]||xn)},Le,Le.exports,yt,Ft,oe,Kt)}return oe[Pe].exports}for(var he=!1,In=0;In<Kt.length;In++)fe(Kt[In]);return fe}({1:[function(yt,Ft,oe){var Kt,fe,he=Ft.exports={};function In(){throw new Error("setTimeout has not been defined")}function Pe(){throw new Error("clearTimeout has not been defined")}function hn(Ii){if(Kt===setTimeout)return setTimeout(Ii,0);if((Kt===In||!Kt)&&setTimeout)return Kt=setTimeout,setTimeout(Ii,0);try{return Kt(Ii,0)}catch(ri){try{return Kt.call(null,Ii,0)}catch(er){return Kt.call(this,Ii,0)}}}!function(){try{Kt="function"==typeof setTimeout?setTimeout:In}catch(Ii){Kt=In}try{fe="function"==typeof clearTimeout?clearTimeout:Pe}catch(Ii){fe=Pe}}();var vn,pn=[],Le=!1,xn=-1;function en(){Le&&vn&&(Le=!1,vn.length?pn=vn.concat(pn):xn=-1,pn.length&&He())}function He(){if(!Le){var Ii=hn(en);Le=!0;for(var ri=pn.length;ri;){for(vn=pn,pn=[];++xn<ri;)vn&&vn[xn].run();xn=-1,ri=pn.length}vn=null,Le=!1,function(er){if(fe===clearTimeout)return clearTimeout(er);if((fe===Pe||!fe)&&clearTimeout)return fe=clearTimeout,clearTimeout(er);try{fe(er)}catch(Hi){try{return fe.call(null,er)}catch(bo){return fe.call(this,er)}}}(Ii)}}function Un(Ii,ri){this.fun=Ii,this.array=ri}function li(){}he.nextTick=function(Ii){var ri=new Array(arguments.length-1);if(1<arguments.length)for(var er=1;er<arguments.length;er++)ri[er-1]=arguments[er];pn.push(new Un(Ii,ri)),1!==pn.length||Le||hn(He)},Un.prototype.run=function(){this.fun.apply(null,this.array)},he.title="browser",he.browser=!0,he.env={},he.argv=[],he.version="",he.versions={},he.on=li,he.addListener=li,he.once=li,he.off=li,he.removeListener=li,he.removeAllListeners=li,he.emit=li,he.prependListener=li,he.prependOnceListener=li,he.listeners=function(Ii){return[]},he.binding=function(Ii){throw new Error("process.binding is not supported")},he.cwd=function(){return"/"},he.chdir=function(Ii){throw new Error("process.chdir is not supported")},he.umask=function(){return 0}},{}],2:[function(yt,Ft,oe){(function(Kt){!function(fe){var he=setTimeout;function In(){}function Pe(He){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof He)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],en(He,this)}function hn(He,Un){for(;3===He._state;)He=He._value;0!==He._state?(He._handled=!0,Pe._immediateFn(function(){var li=1===He._state?Un.onFulfilled:Un.onRejected;if(null!==li){var Ii;try{Ii=li(He._value)}catch(ri){return void pn(Un.promise,ri)}vn(Un.promise,Ii)}else(1===He._state?vn:pn)(Un.promise,He._value)})):He._deferreds.push(Un)}function vn(He,Un){try{if(Un===He)throw new TypeError("A promise cannot be resolved with itself.");if(Un&&("object"==typeof Un||"function"==typeof Un)){var li=Un.then;if(Un instanceof Pe)return He._state=3,He._value=Un,void Le(He);if("function"==typeof li)return void en((Ii=li,ri=Un,function(){Ii.apply(ri,arguments)}),He)}He._state=1,He._value=Un,Le(He)}catch(er){pn(He,er)}var Ii,ri}function pn(He,Un){He._state=2,He._value=Un,Le(He)}function Le(He){2===He._state&&0===He._deferreds.length&&Pe._immediateFn(function(){He._handled||Pe._unhandledRejectionFn(He._value)});for(var Un=0,li=He._deferreds.length;Un<li;Un++)hn(He,He._deferreds[Un]);He._deferreds=null}function xn(He,Un,li){this.onFulfilled="function"==typeof He?He:null,this.onRejected="function"==typeof Un?Un:null,this.promise=li}function en(He,Un){var li=!1;try{He(function(Ii){li||(li=!0,vn(Un,Ii))},function(Ii){li||(li=!0,pn(Un,Ii))})}catch(Ii){if(li)return;li=!0,pn(Un,Ii)}}Pe.prototype.catch=function(He){return this.then(null,He)},Pe.prototype.then=function(He,Un){var li=new this.constructor(In);return hn(this,new xn(He,Un,li)),li},Pe.all=function(He){var Un=Array.prototype.slice.call(He);return new Pe(function(li,Ii){if(0===Un.length)return li([]);var ri=Un.length;function er(bo,Qr){try{if(Qr&&("object"==typeof Qr||"function"==typeof Qr)){var Xr=Qr.then;if("function"==typeof Xr)return void Xr.call(Qr,function(Is){er(bo,Is)},Ii)}Un[bo]=Qr,0==--ri&&li(Un)}catch(Is){Ii(Is)}}for(var Hi=0;Hi<Un.length;Hi++)er(Hi,Un[Hi])})},Pe.resolve=function(He){return He&&"object"==typeof He&&He.constructor===Pe?He:new Pe(function(Un){Un(He)})},Pe.reject=function(He){return new Pe(function(Un,li){li(He)})},Pe.race=function(He){return new Pe(function(Un,li){for(var Ii=0,ri=He.length;Ii<ri;Ii++)He[Ii].then(Un,li)})},Pe._immediateFn="function"==typeof Kt?function(He){Kt(He)}:function(He){he(He,0)},Pe._unhandledRejectionFn=function(He){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",He)},Pe._setImmediateFn=function(He){Pe._immediateFn=He},Pe._setUnhandledRejectionFn=function(He){Pe._unhandledRejectionFn=He},void 0!==Ft&&Ft.exports?Ft.exports=Pe:fe.Promise||(fe.Promise=Pe)}(this)}).call(this,yt("timers").setImmediate)},{timers:3}],3:[function(yt,Ft,oe){(function(Kt,fe){var he=yt("process/browser.js").nextTick,In=Function.prototype.apply,Pe=Array.prototype.slice,hn={},vn=0;function pn(Le,xn){this._id=Le,this._clearFn=xn}oe.setTimeout=function(){return new pn(In.call(setTimeout,window,arguments),clearTimeout)},oe.setInterval=function(){return new pn(In.call(setInterval,window,arguments),clearInterval)},oe.clearTimeout=oe.clearInterval=function(Le){Le.close()},pn.prototype.unref=pn.prototype.ref=function(){},pn.prototype.close=function(){this._clearFn.call(window,this._id)},oe.enroll=function(Le,xn){clearTimeout(Le._idleTimeoutId),Le._idleTimeout=xn},oe.unenroll=function(Le){clearTimeout(Le._idleTimeoutId),Le._idleTimeout=-1},oe._unrefActive=oe.active=function(Le){clearTimeout(Le._idleTimeoutId);var xn=Le._idleTimeout;0<=xn&&(Le._idleTimeoutId=setTimeout(function(){Le._onTimeout&&Le._onTimeout()},xn))},oe.setImmediate="function"==typeof Kt?Kt:function(Le){var xn=vn++,en=!(arguments.length<2)&&Pe.call(arguments,1);return hn[xn]=!0,he(function(){hn[xn]&&(en?Le.apply(null,en):Le.call(null),oe.clearImmediate(xn))}),xn},oe.clearImmediate="function"==typeof fe?fe:function(Le){delete hn[Le]}}).call(this,yt("timers").setImmediate,yt("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(yt,Ft,oe){var Kt=yt("promise-polyfill"),fe="undefined"!=typeof window?window:Function("return this;")();Ft.exports={boltExport:fe.Promise||Kt}},{"promise-polyfill":2}]},{},[4])(4)});var mr=hr.exports.boltExport,vr=function(yt){var Ft=gn.none(),oe=[],Kt=function(Pe){fe()?In(Pe):oe.push(Pe)},fe=function(){return Ft.isSome()},In=function(Pe){Ft.each(function(hn){Rt.setTimeout(function(){Pe(hn)},0)})};return yt(function(Pe){Ft=gn.some(Pe),function(Pe){Fi(Pe,In)}(oe),oe=[]}),{get:Kt,map:function(Pe){return vr(function(hn){Kt(function(vn){hn(Pe(vn))})})},isReady:fe}},lr={nu:vr,pure:function(yt){return vr(function(Ft){Ft(yt)})}},Qn=function(yt){Rt.setTimeout(function(){throw yt},0)},gi=function(yt){var Ft=function(oe){yt().then(oe,Qn)};return{map:function(oe){return gi(function(){return yt().then(oe)})},bind:function(oe){return gi(function(){return yt().then(function(Kt){return oe(Kt).toPromise()})})},anonBind:function(oe){return gi(function(){return yt().then(function(){return oe.toPromise()})})},toLazy:function(){return lr.nu(Ft)},toCached:function(){var oe=null;return gi(function(){return null===oe&&(oe=yt()),oe})},toPromise:yt,get:Ft}},De=function(yt){return gi(function(){return new mr(yt)})},_r=function(yt,Ft,oe){var Kt=oe||Dr(Ft),fe=Zn(yt,function(yt){return yt.replace(Zt,"")}(Ft),Kt);!1===fe.cancelled&&function(yt,Ft){var oe,Kt;!1===function(yt){return yt.getParam("smart_paste",!0)}(yt)?Qi(yt,Ft):(oe=yt,Kt=Ft,Si.each([To,pe,Qi],function(fe){return!0!==fe(oe,Kt,Qi)}))}(yt,fe.content)},qr=function(yt,Ft){Ft=function(yt,Ft,oe){return Ft?function(yt,Ft,oe){var Kt=yt.split(/\n\n/),fe=function(Pe,hn){var vn,pn=[],Le="<"+Pe;if("object"==typeof hn){for(vn in hn)hn.hasOwnProperty(vn)&&pn.push(vn+'="'+Rr.encodeAllRaw(hn[vn])+'"');pn.length&&(Le+=" "+pn.join(" "))}return Le+">"}(Ft,oe),he="</"+Ft+">",In=Si.map(Kt,function(Pe){return Pe.split(/\n/).join("<br />")});return 1===In.length?In[0]:Si.map(In,function(Pe){return fe+Pe+he}).join("")}(yt,Ft,oe):function(yt){return yt.replace(/\r?\n/g,"<br>")}(yt)}(Ft=yt.dom.encode(Ft).replace(/\r\n/g,"\n"),yt.settings.forced_root_block,yt.settings.forced_root_block_attrs),_r(yt,Ft,!1)},yr=function(yt){var Ft={};if(yt){if(yt.getData){var oe=yt.getData("Text");oe&&0<oe.length&&-1===oe.indexOf("data:text/mce-internal,")&&(Ft["text/plain"]=oe)}if(yt.types)for(var Kt=0;Kt<yt.types.length;Kt++){var fe=yt.types[Kt];try{Ft[fe]=yt.getData(fe)}catch(he){Ft[fe]=""}}}return Ft},Mi=function(yt,Ft){return Ft in yt&&0<yt[Ft].length},wi=function(yt){return Mi(yt,"text/html")||Mi(yt,"text/plain")},Ai=Rn.createIdGenerator("mceclip"),ir=function(yt,Ft,oe){var Kt,fe,he,In,Pe="paste"===Ft.type?Ft.clipboardData:Ft.dataTransfer;if(yt.settings.paste_data_images&&Pe){var hn=(he=(fe=Pe).items?sn(tr(fe.items),function(vn){return vn.getAsFile()}):[],In=fe.files?tr(fe.files):[],function(vn,pn){for(var Le=[],xn=0,en=vn.length;xn<en;xn++){var He=vn[xn];pn(He)&&Le.push(He)}return Le}(0<he.length?he:In,function(vn){return/^image\/(jpeg|png|gif|bmp)$/.test(vn.type)}));if(0<hn.length)return Ft.preventDefault(),(Kt=hn,function(yt,Ft){return function(yt,Ft){return Ft(function(oe){var Kt=[],fe=0;0===yt.length?oe([]):Fi(yt,function(he,In){var Pe;he.get((Pe=In,function(hn){Kt[Pe]=hn,++fe>=yt.length&&oe(Kt)}))})})}(sn(yt,Ft),De)}(Kt,function(vn){return De(function(pn){var Le=vn.getAsFile?vn.getAsFile():vn,xn=new window.FileReader;xn.onload=function(){pn({blob:Le,uri:xn.result})},xn.readAsDataURL(Le)})})).get(function(vn){oe&&yt.selection.setRng(oe),Fi(vn,function(pn){!function(Le,xn){var en,He,Un,Ii,ri,Hi=-1!==(He=(en=xn.uri).indexOf(","))?en.substr(He+1):null,bo=Ai(),Qr=Le.settings.images_reuse_filename&&xn.blob.name?(Un=Le,(Ii=xn.blob.name.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?Un.dom.encode(Ii[1]):null):bo,Xr=new Rt.Image;if(Xr.src=xn.uri,!(ri=Le.settings).images_dataimg_filter||ri.images_dataimg_filter(Xr)){var Is,_o=Le.editorUpload.blobCache,fr=void 0;(Is=_o.findFirst(function(Yl){return Yl.base64()===Hi}))?fr=Is:(fr=_o.create(bo,xn.blob,Hi,Qr),_o.add(fr)),_r(Le,'<img src="'+fr.blobUri()+'">',!1)}else _r(Le,'<img src="'+xn.uri+'">',!1)}(yt,pn)})}),!0}return!1},pa=function(yt){return fn.metaKeyPressed(yt)&&86===yt.keyCode||yt.shiftKey&&45===yt.keyCode},Js=function(yt){return Gi.ie&&yt.inline?Rt.document.body:yt.getBody()},lo=function(yt){return yt.dom.get("mcepastebin")},ma=function(yt,Ft){return Ft===yt},Yr=function(yt,Ft){var oe,Kt=lo(yt);return(oe=Kt)&&"mcepastebin"===oe.id&&ma(Ft,Kt.innerHTML)},ql=function(yt,Ft){var oe=function(yt){var Ft=pi(null),oe="%MCEPASTEBIN%";return{create:function(){return fe=Ft,he=oe,Pe=(Kt=yt).dom,hn=Kt.getBody(),fe.set(Kt.selection.getRng()),In=Kt.dom.add(Js(Kt),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},he),(Gi.ie||Gi.gecko)&&Pe.setStyle(In,"left","rtl"===Pe.getStyle(hn,"direction",!0)?65535:-65535),Pe.bind(In,"beforedeactivate focusin focusout",function(vn){vn.stopPropagation()}),function(yt,Ft,oe){var Kt;Js(Kt=yt)!==Kt.getBody()&&yt.dom.bind(Ft,"paste keyup",function(fe){Yr(yt,"%MCEPASTEBIN%")||yt.fire("paste")})}(Kt,In),In.focus(),void Kt.selection.select(In,!0);var Kt,fe,he,In,Pe,hn},remove:function(){return function(Kt,fe){if(lo(Kt)){for(var he=void 0,In=fe.get();he=Kt.dom.get("mcepastebin");)Kt.dom.remove(he),Kt.dom.unbind(he);In&&Kt.selection.setRng(In)}fe.set(null)}(yt,Ft)},getEl:function(){return lo(yt)},getHtml:function(){return function(Kt){var fe,he,In,Pe,hn,vn=function(pn,Le){pn.appendChild(Le),Kt.dom.remove(Le,!0)};for(he=Si.grep(Js(Kt).childNodes,function(pn){return"mcepastebin"===pn.id}),fe=he.shift(),Si.each(he,function(pn){vn(fe,pn)}),In=(Pe=Kt.dom.select("div[id=mcepastebin]",fe)).length-1;0<=In;In--)hn=Kt.dom.create("div"),fe.insertBefore(hn,Pe[In]),vn(hn,Pe[In]);return fe?fe.innerHTML:""}(yt)},getLastRng:function(){return Ft.get()},isDefault:function(){return Yr(yt,oe)},isDefaultContent:function(Kt){return ma(oe,Kt)}}}(yt);return yt.on("preInit",function(){return function(yt,Ft,oe){var Kt,fe,he=(Kt=pi(gn.none()),{clear:function(){Kt.set(gn.none())},set:function(Pe){Kt.set(gn.some(Pe))},isSet:function(){return Kt.get().isSome()},on:function(Pe){Kt.get().each(Pe)}});function In(Pe,hn,vn,pn){var Le,xn;Mi(Pe,"text/html")?Le=Pe["text/html"]:(Le=Ft.getHtml(),pn=pn||Dr(Le),Ft.isDefaultContent(Le)&&(vn=!0)),Le=Rn.trimHtml(Le),Ft.remove(),xn=!1===pn&&function(yt){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(yt)}(Le),Le.length&&!xn||(vn=!0),vn&&(Le=Mi(Pe,"text/plain")&&xn?Pe["text/plain"]:Rn.innerText(Le)),Ft.isDefaultContent(Le)?hn||yt.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):vn?qr(yt,Le):_r(yt,Le,pn)}yt.on("keydown",function(Pe){function hn(vn){pa(vn)&&!vn.isDefaultPrevented()&&Ft.remove()}if(pa(Pe)&&!Pe.isDefaultPrevented()){if((fe=Pe.shiftKey&&86===Pe.keyCode)&&Gi.webkit&&-1!==Rt.navigator.userAgent.indexOf("Version/"))return;if(Pe.stopImmediatePropagation(),he.set(Pe),window.setTimeout(function(){he.clear()},100),Gi.ie&&fe)return Pe.preventDefault(),void function(yt,Ft){yt.fire("paste",{ieFake:!0})}(yt);Ft.remove(),Ft.create(),yt.once("keyup",hn),yt.once("paste",function(){yt.off("keyup",hn)})}}),yt.on("paste",function(Pe){var vn,pn,Le=he.isSet(),xn=(vn=yr(Pe.clipboardData||yt.getDoc().dataTransfer),Rn.isMsEdge()?Si.extend(vn,{"text/html":""}):vn),en="text"===oe.get()||fe,He=Mi(xn,po());fe=!1,Pe.isDefaultPrevented()||(pn=Pe.clipboardData,-1!==Rt.navigator.userAgent.indexOf("Android")&&pn&&pn.items&&0===pn.items.length)?Ft.remove():wi(xn)||!ir(yt,Pe,Ft.getLastRng()||yt.selection.getRng())?(Le||Pe.preventDefault(),!Gi.ie||Le&&!Pe.ieFake||Mi(xn,"text/html")||(Ft.create(),yt.dom.bind(Ft.getEl(),"paste",function(Un){Un.stopPropagation()}),yt.getDoc().execCommand("Paste",!1,null),xn["text/html"]=Ft.getHtml()),Mi(xn,"text/html")?(Pe.preventDefault(),He||(He=Dr(xn["text/html"])),In(xn,Le,en,He)):zi.setEditorTimeout(yt,function(){In(xn,Le,en,He)},0)):Ft.remove()})}(Kt=yt,oe,Ft),void Kt.parser.addNodeFilter("img",function(he,In,Pe){var hn,vn=function(Le){Le.attr("data-mce-object")||fe===Gi.transparentSrc||Le.remove()};if(!Kt.settings.paste_data_images&&(hn=Pe).data&&!0===hn.data.paste)for(var pn=he.length;pn--;)(fe=he[pn].attributes.map.src)&&(0===fe.indexOf("webkit-fake-url")?vn(he[pn]):Kt.settings.allow_html_data_urls||0!==fe.indexOf("data:")||vn(he[pn]))});var Kt,fe}),{pasteFormat:Ft,pasteHtml:function(Kt,fe){return _r(yt,Kt,fe)},pasteText:function(Kt){return qr(yt,Kt)},pasteImageData:function(Kt,fe){return ir(yt,Kt,fe)},getDataTransferItems:yr,hasHtmlOrText:wi,hasContentType:Mi}},uo=function(){},ka=function(yt,Ft,oe,Kt){!function(yt,Ft,oe){if(Kt=yt,!1!==Gi.iOS||void 0===Kt||"function"!=typeof Kt.setData||!0===Rn.isMsEdge())return!1;try{return yt.clearData(),yt.setData("text/html",Ft),yt.setData("text/plain",oe),yt.setData(po(),Ft),!0}catch(fe){return!1}var Kt}(yt.clipboardData,Ft.html,Ft.text)?oe(Ft.html,Kt):(yt.preventDefault(),Kt())},za=function(yt){return function(Ft,oe){var Kt=function(yt){return Zt+yt}(Ft),fe=yt.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),he=yt.dom.create("div",{contenteditable:"true"},Kt);yt.dom.setStyles(fe,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),fe.appendChild(he),yt.dom.add(yt.getBody(),fe);var In=yt.selection.getRng();he.focus();var Pe=yt.dom.createRng();Pe.selectNodeContents(he),yt.selection.setRng(Pe),setTimeout(function(){yt.selection.setRng(In),fe.parentNode.removeChild(fe),oe()},0)}},ur=function(yt){return{html:yt.selection.getContent({contextual:!0}),text:yt.selection.getContent({format:"text"})}},zr=function(yt){return!yt.selection.isCollapsed()||!!(Ft=yt).dom.getParent(Ft.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",Ft.getBody());var Ft},Za=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ka=function(yt,Ft){return Za.getCaretRangeFromPoint(Ft.clientX,Ft.clientY,yt.getDoc())},Qs=function(yt,Ft){yt.focus(),yt.selection.setRng(Ft)};function ks(yt,Ft){yt.on("PastePreProcess",function(oe){oe.content=Ft(yt,oe.content,oe.internal,oe.wordContent)})}function co(yt,Ft){if(!mo_isWordContent(Ft))return Ft;var oe=[];Si.each(yt.schema.getBlockElements(),function(fe,he){oe.push(he)});var Kt=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+oe.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return Ft=Rn.filter(Ft,[[Kt,"$1"]]),Rn.filter(Ft,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function xo(yt,Ft,oe,Kt){if(Kt||oe)return Ft;var fe,he=function(yt){return yt.getParam("paste_webkit_styles")}(yt);if(!1===function(yt){return yt.getParam("paste_remove_styles_if_webkit",!0)}(yt)||"all"===he)return Ft;if(he&&(fe=he.split(/[, ]/)),fe){var In=yt.dom,Pe=yt.selection.getNode();Ft=Ft.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(hn,vn,pn,Le){var xn=In.parseStyle(In.decode(pn)),en={};if("none"===fe)return vn+Le;for(var He=0;He<fe.length;He++){var Un=xn[fe[He]],li=In.getStyle(Pe,fe[He],!0);/color/.test(fe[He])&&(Un=In.toHex(Un),li=In.toHex(li)),li!==Un&&(en[fe[He]]=Un)}return(en=In.serializeStyle(en,"span"))?vn+' style="'+en+'"'+Le:vn+Le})}else Ft=Ft.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return Ft.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(hn,vn,pn,Le){return vn+' style="'+pn+'"'+Le})}function cs(yt,Ft){yt.$("a",Ft).find("font,u").each(function(oe,Kt){yt.dom.remove(Kt,!0)})}var Ia=function(yt,Ft,oe){var Kt=oe.control;Kt.active("text"===Ft.pasteFormat.get()),yt.on("PastePlainTextToggle",function(fe){Kt.active(fe.state)})};bn.add("paste",function(yt){if(!1===function(yt){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(yt.settings.plugins)||!bn.get("powerpaste")||(void 0!==Rt.window.console&&Rt.window.console.log&&Rt.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))}(yt)){var Ft=pi(!1),oe=pi(!1),Kt=pi(function(yt){return yt.getParam("paste_as_text",!1)}(yt)?"text":"html"),fe=ql(yt,Kt),he=function(yt){var Ft,oe;Gi.webkit&&ks(yt,xo),Gi.ie&&(ks(yt,co),oe=cs,(Ft=yt).on("PastePostProcess",function(Kt){oe(Ft,Kt.node)}))}(yt);return function(yt,Ft){var oe=function(Kt){for(var fe=[],he=1;he<arguments.length;he++)fe[he-1]=arguments[he];return function(){for(var In=[],Pe=0;Pe<arguments.length;Pe++)In[Pe]=arguments[Pe];var hn=fe.concat(In);return Kt.apply(null,hn)}}(Ia,yt,Ft);yt.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:oe}),yt.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:Ft.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:oe})}(yt,fe),function(yt,Ft,oe){yt.addCommand("mceTogglePlainTextPaste",function(){!function(yt,Ft,oe){var Kt,he;"text"===Ft.pasteFormat.get()?(Ft.pasteFormat.set("html"),Ue(yt,!1)):(Ft.pasteFormat.set("text"),Ue(yt,!0),he=yt,!1===oe.get()&&function(yt){return yt.getParam("paste_plaintext_inform",!0)}(he)&&((Kt=yt).notificationManager.open({text:Kt.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),type:"info"}),oe.set(!0))),yt.focus()}(yt,Ft,oe)}),yt.addCommand("mceInsertClipboardContent",function(Kt,fe){fe.content&&Ft.pasteHtml(fe.content,fe.internal),fe.text&&Ft.pasteText(fe.text)})}(yt,fe,Ft),function(yt){var Ft=yt.plugins.paste,oe=function(yt){return yt.getParam("paste_preprocess")}(yt);oe&&yt.on("PastePreProcess",function(fe){oe.call(Ft,Ft,fe)});var Kt=function(yt){return yt.getParam("paste_postprocess")}(yt);Kt&&yt.on("PastePostProcess",function(fe){Kt.call(Ft,Ft,fe)})}(yt),function(yt){var Ft,oe;yt.on("cut",(Ft=yt,function(Kt){zr(Ft)&&ka(Kt,ur(Ft),za(Ft),function(){setTimeout(function(){Ft.execCommand("Delete")},0)})})),yt.on("copy",(oe=yt,function(Kt){zr(oe)&&ka(Kt,ur(oe),za(oe),uo)}))}(yt),function(yt,Ft,oe){(function(yt){return yt.getParam("paste_block_drop",!1)})(yt)&&yt.on("dragend dragover draggesture dragdrop drop drag",function(Kt){Kt.preventDefault(),Kt.stopPropagation()}),Nn_shouldPasteDataImages(yt)||yt.on("drop",function(Kt){var fe=Kt.dataTransfer;fe&&fe.files&&0<fe.files.length&&Kt.preventDefault()}),yt.on("drop",function(Kt){var fe,he;if(he=Ka(yt,Kt),!Kt.isDefaultPrevented()&&!oe.get()){fe=Ft.getDataTransferItems(Kt.dataTransfer);var In,Pe=Ft.hasContentType(fe,po());if((Ft.hasHtmlOrText(fe)&&(!(In=fe["text/plain"])||0!==In.indexOf("file://"))||!Ft.pasteImageData(Kt,he))&&he&&function(yt){return yt.getParam("paste_filter_drop",!0)}(yt)){var hn=fe["mce-internal"]||fe["text/html"]||fe["text/plain"];hn&&(Kt.preventDefault(),zi.setEditorTimeout(yt,function(){yt.undoManager.transact(function(){fe["mce-internal"]&&yt.execCommand("Delete"),Qs(yt,he),hn=Rn.trimHtml(hn),fe["text/html"]?Ft.pasteHtml(hn,Pe):Ft.pasteText(hn)})}))}}}),yt.on("dragstart",function(Kt){oe.set(!0)}),yt.on("dragover dragend",function(Kt){Nn_shouldPasteDataImages(yt)&&!1===oe.get()&&(Kt.preventDefault(),Qs(yt,Ka(yt,Kt))),"dragend"===Kt.type&&oe.set(!1)})}(yt,fe,oe),function(yt,Ft){return{clipboard:yt,quirks:Ft}}(fe,he)}})}(window),function(Rt){"use strict";var pi=tinymce.util.Tools.resolve("tinymce.PluginManager"),bn=function(){},Oe=function(b,D){return function(){for(var L=[],H=0;H<arguments.length;H++)L[H]=arguments[H];return b(D.apply(null,L))}},se=function(b){return function(){return b}},Ve=function(b){return b};function on(b){for(var D=[],L=1;L<arguments.length;L++)D[L-1]=arguments[L];return function(){for(var H=[],X=0;X<arguments.length;X++)H[X]=arguments[X];var J=D.concat(H);return b.apply(null,J)}}var Ue,Bi,Nn,Pi,Ci=function(b){return function(){for(var D=[],L=0;L<arguments.length;L++)D[L]=arguments[L];return!b.apply(null,D)}},Gi=se(!1),zi=se(!0),Si=function(){return fn},fn=(Ue=function(b){return b.isNone()},Pi={fold:function(b,D){return b()},is:Gi,isSome:Gi,isNone:zi,getOr:Nn=function(b){return b},getOrThunk:Bi=function(b){return b()},getOrDie:function(b){throw new Error(b||"error: getOrDie called on none.")},getOrNull:se(null),getOrUndefined:se(void 0),or:Nn,orThunk:Bi,map:Si,each:bn,bind:Si,exists:Gi,forall:zi,filter:Si,equals:Ue,equals_:Ue,toArray:function(){return[]},toString:se("none()")},Object.freeze&&Object.freeze(Pi),Pi),ei=function(b){var D=se(b),L=function(){return X},H=function(J){return J(b)},X={fold:function(J,lt){return lt(b)},is:function(J){return b===J},isSome:zi,isNone:Gi,getOr:D,getOrThunk:D,getOrDie:D,getOrNull:D,getOrUndefined:D,or:L,orThunk:L,map:function(J){return ei(J(b))},each:function(J){J(b)},bind:H,exists:H,forall:H,filter:function(J){return J(b)?X:fn},toArray:function(){return[b]},toString:function(){return"some("+b+")"},equals:function(J){return J.is(b)},equals_:function(J,lt){return J.fold(Gi,function(pt){return lt(b,pt)})}};return X},Zt={some:ei,none:Si,from:function(b){return null==b?fn:ei(b)}},En=function(b){return function(D){return function(L){if(null===L)return"null";var H=typeof L;return"object"===H&&(Array.prototype.isPrototypeOf(L)||L.constructor&&"Array"===L.constructor.name)?"array":"object"===H&&(String.prototype.isPrototypeOf(L)||L.constructor&&"String"===L.constructor.name)?"string":H}(D)===b}},Dn=En("string"),Dr=En("array"),po=En("boolean"),Rr=En("function"),zn=En("number"),ki=Array.prototype.slice,Fn=Array.prototype.indexOf,Lr=Array.prototype.push,St=function(b,D){return-1<Fn.call(b,D)},kt=function(b,D){for(var L=0,H=b.length;L<H;L++)if(D(b[L],L))return!0;return!1},yn=function(b,D){for(var L=b.length,H=new Array(L),X=0;X<L;X++)H[X]=D(b[X],X);return H},Mn=function(b,D){for(var L=0,H=b.length;L<H;L++)D(b[L],L)},gr=function(b,D){for(var L=[],H=0,X=b.length;H<X;H++){var J=b[H];D(J,H)&&L.push(J)}return L},Rn=function(b,D,L){return function(H,X){for(var J=H.length-1;0<=J;J--)X(H[J])}(b,function(H){L=D(L,H)}),L},kn=function(b,D,L){return Mn(b,function(H){L=D(L,H)}),L},Fe=function(b,D){for(var L=0,H=b.length;L<H;L++){var X=b[L];if(D(X,L))return Zt.some(X)}return Zt.none()},Ui=function(b,D){for(var L=0,H=b.length;L<H;L++)if(D(b[L],L))return Zt.some(L);return Zt.none()},bi=function(b){for(var D=[],L=0,H=b.length;L<H;++L){if(!Dr(b[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+b);Lr.apply(D,b[L])}return D},Ln=function(b,D){var L=yn(b,D);return bi(L)},aa=function(b,D){for(var L=0,H=b.length;L<H;++L)if(!0!==D(b[L],L))return!1;return!0},ao=(Rr(Array.from),Object.keys),br=function(b,D){for(var L=ao(b),H=0,X=L.length;H<X;H++){var J=L[H];D(b[J],J)}},pr=function(b,D){return _i(b,function(L,H){return{k:H,v:D(L,H)}})},_i=function(b,D){var L={};return br(b,function(H,X){var J=D(H,X);L[J.k]=J.v}),L},Ke=function(){for(var b=[],D=0;D<arguments.length;D++)b[D]=arguments[D];return function(){for(var L=[],H=0;H<arguments.length;H++)L[H]=arguments[H];if(b.length!==L.length)throw new Error('Wrong number of arguments to struct. Expected "['+b.length+']", got '+L.length+" arguments");var X={};return Mn(b,function(J,lt){X[J]=se(L[lt])}),X}},mo=function(b){return b.slice(0).sort()},Vn=function(b,D){throw new Error("All required keys ("+mo(b).join(", ")+") were not specified. Specified keys were: "+mo(D).join(", ")+".")},Ei=function(b){throw new Error("Unsupported keys for object: "+mo(b).join(", "))},Zn=function(b,D){if(!Dr(D))throw new Error("The "+b+" fields must be an array. Was: "+D+".");Mn(D,function(L){if(!Dn(L))throw new Error("The value "+L+" in the "+b+" fields was not a string.")})},Qi=function(b){var D=mo(b);Fe(D,function(L,H){return H<D.length-1&&L===D[H+1]}).each(function(L){throw new Error("The field: "+L+" occurs more than once in the combined fields: ["+D.join(", ")+"].")})},Mr=function(b,D){var L=b.concat(D);if(0===L.length)throw new Error("You must specify at least one required or optional field.");return Zn("required",b),Zn("optional",D),Qi(L),function(H){var X=ao(H);aa(b,function(pt){return St(X,pt)})||Vn(b,X);var J=gr(X,function(pt){return!St(L,pt)});0<J.length&&Ei(J);var lt={};return Mn(b,function(pt){lt[pt]=se(H[pt])}),Mn(D,function(pt){lt[pt]=se(Object.prototype.hasOwnProperty.call(H,pt)?Zt.some(H[pt]):Zt.none())}),lt}},yi=Rt.Node.COMMENT_NODE,To=Rt.Node.DOCUMENT_NODE,pe=Rt.Node.ELEMENT_NODE,ee=Rt.Node.TEXT_NODE,_e=void 0!==Rt.window?Rt.window:Function("return this;")(),Xe=function(b){return b.dom().nodeName.toLowerCase()},jt=function(b){return b.dom().nodeType},je=function(b){return function(D){return jt(D)===b}},nn=function(b){return jt(b)===yi||"#comment"===Xe(b)},gn=je(pe),ui=je(ee),Jn=function(b,D,L){if(!(Dn(L)||po(L)||zn(L)))throw Rt.console.error("Invalid call to Attr.set. Key ",D,":: Value ",L,":: Element ",b),new Error("Attribute value was not simple");b.setAttribute(D,L+"")},sn=function(b,D,L){Jn(b.dom(),D,L)},Fi=function(b,D){var L=b.dom();br(D,function(H,X){Jn(L,X,H)})},tr=function(b,D){var L=b.dom().getAttribute(D);return null===L?void 0:L},so=function(b,D){var L=b.dom();return!(!L||!L.hasAttribute)&&L.hasAttribute(D)},hr=function(b,D){b.dom().removeAttribute(D)},mr=function(b){return kn(b.dom().attributes,function(D,L){return D[L.name]=L.value,D},{})},vr=function(b,D){return-1!==b.indexOf(D)},lr=function(b){return void 0!==b.style&&Rr(b.style.getPropertyValue)},Qn=function(b){var D,L=!1;return function(){for(var H=[],X=0;X<arguments.length;X++)H[X]=arguments[X];return L||(L=!0,D=b.apply(null,H)),D}},gi=function(b){if(null==b)throw new Error("Node cannot be null or undefined");return{dom:se(b)}},De={fromHtml:function(b,D){var L=(D||Rt.document).createElement("div");if(L.innerHTML=b,!L.hasChildNodes()||1<L.childNodes.length)throw Rt.console.error("HTML does not have a single root node",b),new Error("HTML must have a single root node");return gi(L.childNodes[0])},fromTag:function(b,D){var L=(D||Rt.document).createElement(b);return gi(L)},fromText:function(b,D){var L=(D||Rt.document).createTextNode(b);return gi(L)},fromDom:gi,fromPoint:function(b,D,L){var H=b.dom();return Zt.from(H.elementFromPoint(D,L)).map(gi)}},Wi=function(b){var D=ui(b)?b.dom().parentNode:b.dom();return null!=D&&D.ownerDocument.body.contains(D)},$i=Qn(function(){return _r(De.fromDom(Rt.document))}),_r=function(b){var D=b.dom().body;if(null==D)throw new Error("Body is not available yet");return De.fromDom(D)},qr=function(b,D,L){if(!Dn(L))throw Rt.console.error("Invalid call to CSS.set. Property ",D,":: Value ",L,":: Element ",b),new Error("CSS value must be a string: "+L);lr(b)&&b.style.setProperty(D,L)},yr=function(b,D,L){var H=b.dom();qr(H,D,L)},Mi=function(b,D){var L=b.dom();br(D,function(H,X){qr(L,X,H)})},wi=function(b,D){var L=b.dom(),H=Rt.window.getComputedStyle(L).getPropertyValue(D),X=""!==H||Wi(b)?H:Ai(L,D);return null===X?void 0:X},Ai=function(b,D){return lr(b)?b.style.getPropertyValue(D):""},ir=function(b,D){var L=b.dom(),H=Ai(L,D);return Zt.from(H).filter(function(X){return 0<X.length})},pa=function(b,D){var L,H,X=b.dom();H=D,lr(L=X)&&L.style.removeProperty(H),so(b,"style")&&""===tr(b,"style").replace(/^\s+|\s+$/g,"")&&hr(b,"style")},Ar=function(b,D){return function(b,D,L){return 0!=(b.compareDocumentPosition(D)&L)}(b,D,function(b,D){var L=function(b,D){return function(L,H){for(var X=null!=H?H:_e,J=0;J<L.length&&null!=X;++J)X=X[L[J]];return X}(b.split("."),D)}(b,D);if(null==L)throw new Error(b+" not available on this browser");return L}("Node").DOCUMENT_POSITION_CONTAINED_BY)},ma=function(){return Yr(0,0)},Yr=function(b,D){return{major:b,minor:D}},kr_detect=function(b,D){var L=String(D).toLowerCase();return 0===b.length?ma():function(b,D){var L=function(X,J){for(var lt=0;lt<X.length;lt++){var pt=X[lt];if(pt.test(J))return pt}}(b,D);if(!L)return{major:0,minor:0};var H=function(X){return Number(D.replace(L,"$"+X))};return Yr(H(1),H(2))}(b,L)},kr_unknown=ma,ql="Firefox",uo=function(b,D){return function(){return D===b}},Ko=function(b){var D=b.current;return{current:D,version:b.version,isEdge:uo("Edge",D),isChrome:uo("Chrome",D),isIE:uo("IE",D),isOpera:uo("Opera",D),isFirefox:uo(ql,D),isSafari:uo("Safari",D)}},ka_unknown=function(){return Ko({current:void 0,version:kr_unknown()})},ka_nu=Ko,za=(se("Edge"),se("Chrome"),se("IE"),se("Opera"),se(ql),se("Safari"),"Windows"),ur="Android",zr="Solaris",vo="FreeBSD",Za=function(b,D){return function(){return D===b}},Ka=function(b){var D=b.current;return{current:D,version:b.version,isWindows:Za(za,D),isiOS:Za("iOS",D),isAndroid:Za(ur,D),isOSX:Za("OSX",D),isLinux:Za("Linux",D),isSolaris:Za(zr,D),isFreeBSD:Za(vo,D)}},Qs_unknown=function(){return Ka({current:void 0,version:kr_unknown()})},Qs_nu=Ka,Ja=(se(za),se("iOS"),se(ur),se("Linux"),se("OSX"),se(zr),se(vo),function(b,D){var L=String(D).toLowerCase();return Fe(b,function(H){return H.search(L)})}),co=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xo=function(b){return function(D){return vr(D,b)}},cs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(b){return vr(b,"edge/")&&vr(b,"chrome")&&vr(b,"safari")&&vr(b,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,co],search:function(b){return vr(b,"chrome")&&!vr(b,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(b){return vr(b,"msie")||vr(b,"trident")}},{name:"Opera",versionRegexes:[co,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xo("firefox")},{name:"Safari",versionRegexes:[co,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(b){return(vr(b,"safari")||vr(b,"mobile/"))&&vr(b,"applewebkit")}}],bu=[{name:"Windows",search:xo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(b){return vr(b,"iphone")||vr(b,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:xo("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xo("linux"),versionRegexes:[]},{name:"Solaris",search:xo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xo("freebsd"),versionRegexes:[]}],Ia={browsers:se(cs),oses:se(bu)},yt={detect:Qn(function(){return b=Rt.navigator.userAgent,Se=Ia.browsers(),me=Ia.oses(),ae=function(b,D){return Ja(b,D).map(function(L){var H=kr_detect(L.versionRegexes,D);return{current:L.name,version:H}})}(Se,b).fold(ka_unknown,ka_nu),tn=function(b,D){return Ja(b,D).map(function(L){var H=kr_detect(L.versionRegexes,D);return{current:L.name,version:H}})}(me,b).fold(Qs_unknown,Qs_nu),{browser:ae,os:tn,deviceType:(L=ae,H=b,X=(D=tn).isiOS()&&!0===/ipad/i.test(H),J=D.isiOS()&&!X,lt=D.isAndroid()&&3===D.version.major,pt=D.isAndroid()&&4===D.version.major,Ct=X||lt||pt&&!0===/mobile/i.test(H),Wt=D.isiOS()||D.isAndroid(),Qt=Wt&&!Ct,ve=L.isSafari()&&D.isiOS()&&!1===/safari/i.test(H),{isiPad:se(X),isiPhone:se(J),isTablet:se(Ct),isPhone:se(Qt),isTouch:se(Wt),isAndroid:D.isAndroid,isiOS:D.isiOS,isWebView:se(ve)})};var b,D,L,H,X,J,lt,pt,Ct,Wt,Qt,ve,Se,me,ae,tn})},Ft=pe,oe=To,Kt=function(b,D){var L=b.dom();if(L.nodeType!==Ft)return!1;var H=L;if(void 0!==H.matches)return H.matches(D);if(void 0!==H.msMatchesSelector)return H.msMatchesSelector(D);if(void 0!==H.webkitMatchesSelector)return H.webkitMatchesSelector(D);if(void 0!==H.mozMatchesSelector)return H.mozMatchesSelector(D);throw new Error("Browser lacks native selectors")},fe=function(b){return b.nodeType!==Ft&&b.nodeType!==oe||0===b.childElementCount},he=function(b,D){return b.dom()===D.dom()},In=yt.detect().browser.isIE()?function(b,D){return Ar(b.dom(),D.dom())}:function(b,D){var L=b.dom(),H=D.dom();return L!==H&&L.contains(H)},Pe=Kt,hn=function(b){return De.fromDom(b.dom().ownerDocument)},vn=function(b){return Zt.from(b.dom().parentNode).map(De.fromDom)},pn=function(b,D){for(var L=Rr(D)?D:Gi,H=b.dom(),X=[];null!=H.parentNode;){var J=H.parentNode,lt=De.fromDom(J);if(X.push(lt),!0===L(lt))break;H=J}return X},Le=function(b){return Zt.from(b.dom().previousSibling).map(De.fromDom)},xn=function(b){return Zt.from(b.dom().nextSibling).map(De.fromDom)},en=function(b){return yn(b.dom().childNodes,De.fromDom)},He=function(b,D){var L=b.dom().childNodes;return Zt.from(L[D]).map(De.fromDom)},Un=(Ke("element","offset"),function(b,D){vn(b).each(function(L){L.dom().insertBefore(D.dom(),b.dom())})}),li=function(b,D){xn(b).fold(function(){vn(b).each(function(L){ri(L,D)})},function(L){Un(L,D)})},Ii=function(b,D){He(b,0).fold(function(){ri(b,D)},function(L){b.dom().insertBefore(D.dom(),L.dom())})},ri=function(b,D){b.dom().appendChild(D.dom())},er=function(b,D){Un(b,D),ri(D,b)},Hi=function(b,D){Mn(D,function(L,H){li(0===H?b:D[H-1],L)})},bo=function(b,D){Mn(D,function(L){ri(b,L)})},Qr=function(b){b.dom().textContent="",Mn(en(b),function(D){Xr(D)})},Xr=function(b){var D=b.dom();null!==D.parentNode&&D.parentNode.removeChild(D)},Is=function(b){var D,L=en(b);0<L.length&&(D=b,Mn(L,function(H){Un(D,H)})),Xr(b)},_o=(Ke("width","height"),Ke("width","height"),Ke("rows","columns")),fr=Ke("row","column"),Yl=(Ke("x","y"),Ke("element","rowspan","colspan")),tl=Ke("element","rowspan","colspan","isNew"),_u=Ke("element","rowspan","colspan","row","column"),ds=Ke("element","cells","section"),cr=Ke("element","isNew"),wu=Ke("element","cells","section","isNew"),Tl=Ke("cells","section"),ic=Ke("details","section"),el=Ke("startRow","startCol","finishRow","finishCol"),sa=function(b,D){var L=[];return Mn(en(b),function(H){D(H)&&(L=L.concat([H])),L=L.concat(sa(H,D))}),L},nl=function(b,D,L){return H=function(X){return Kt(X,D)},gr(pn(b,L),H);var H},Fr=function(b,D){return L=D,X=void 0===(H=b)?Rt.document:H.dom(),fe(X)?[]:yn(X.querySelectorAll(L),De.fromDom);var L,H,X};function Su(b,D,L,H,X){return b(L,H)?Zt.some(L):Rr(X)&&X(L)?Zt.none():D(L,H,X)}var Cu,ge,Ps=function(b,D,L){for(var H=b.dom(),X=Rr(L)?L:se(!1);H.parentNode;){var J=De.fromDom(H=H.parentNode);if(D(J))return Zt.some(J);if(X(J))break}return Zt.none()},Fa=function(b,D,L){return Ps(b,function(H){return Kt(H,D)},L)},Es=function(b,D){return L=function(H){return Kt(H,D)},Fe(b.dom().childNodes,function(H){return L(De.fromDom(H))}).map(De.fromDom);var L},Xl=function(b,D){return L=D,X=void 0===(H=b)?Rt.document:H.dom(),fe(X)?Zt.none():Zt.from(X.querySelector(L)).map(De.fromDom);var L,H,X},Ir=function(b,D,L){return Su(Kt,Fa,b,D,L)},Dl=function(b,D,L){return Ln(en(b),function(H){return Kt(H,D)?L(H)?[H]:[]:Dl(H,D,L)})},rl={firstLayer:function(b,D){return Dl(b,D,se(!0))},filterFirstLayer:Dl},id=function(b,D){return vn(D).map(function(L){return function(b,D){return L=function(H){return Kt(H,D)},gr(en(b),L);var L}(L,b)})},wo_cell=(on(id,"th,td"),on(id,"tr"),function(b,D){return function(b,D,L){return void 0===L&&(L=Gi),L(D)?Zt.none():St(b,Xe(D))?Zt.some(D):Fa(D,b.join(","),function(H){return Kt(H,"table")||L(H)})}(["td","th"],b,D)}),wo_cells=function(b){return rl.firstLayer(b,"th,td")},wo_table=function(b,D){return Ir(b,"table",D)},fs=function(b){var D=function(b){return rl.firstLayer(b,"tr")}(b);return yn(D,function(L){var H=L,X=vn(H).map(function(lt){var pt=Xe(lt);return"tfoot"===pt||"thead"===pt||"tbody"===pt?pt:"tbody"}).getOr("tbody"),J=yn(wo_cells(L),function(lt){var pt=so(lt,"rowspan")?parseInt(tr(lt,"rowspan"),10):1,Ct=so(lt,"colspan")?parseInt(tr(lt,"colspan"),10):1;return Yl(lt,pt,Ct)});return ds(H,J,X)})},gs=function(b,D){return b+","+D},Do=function(b,D){var L=Ln(b.all(),function(H){return H.cells()});return gr(L,D)},ji_generate=function(b){var D={},L=[],H=b.length,X=0;Mn(b,function(lt,pt){var Ct=[];Mn(lt.cells(),function(Wt){for(var Qt=0;void 0!==D[gs(pt,Qt)];)Qt++;for(var ve=_u(Wt.element(),Wt.rowspan(),Wt.colspan(),pt,Qt),Se=0;Se<Wt.colspan();Se++)for(var me=0;me<Wt.rowspan();me++){var ae=Qt+Se,tn=gs(pt+me,ae);D[tn]=ve,X=Math.max(X,ae+1)}Ct.push(ve)}),L.push(ds(lt.element(),Ct,lt.section()))});var J=_o(H,X);return{grid:se(J),access:se(D),all:se(L)}},ji_getAt=function(b,D,L){var H=b.access()[gs(D,L)];return void 0!==H?Zt.some(H):Zt.none()},ji_findItem=function(b,D,L){var H=Do(b,function(X){return L(D,X.element())});return 0<H.length?Zt.some(H[0]):Zt.none()},ji_filterItems=Do,ji_justCells=function(b){var D=yn(b.all(),function(L){return L.cells()});return bi(D)},Bn=Ke("minRow","minCol","maxRow","maxCol"),Tu=function(b,D){var L,H,X,J,lt,pt,Ct,Wt,Qt,ve,Se=function(vi){return Kt(vi.element(),D)},me=fs(b),ae=ji_generate(me),tn=(H=Se,X=(L=ae).grid().columns(),J=L.grid().rows(),lt=X,Ct=pt=0,br(L.access(),function(vi){if(H(vi)){var ti=vi.row(),On=ti+vi.rowspan()-1,Di=vi.column(),Ni=Di+vi.colspan()-1;ti<J?J=ti:pt<On&&(pt=On),Di<lt?lt=Di:Ct<Ni&&(Ct=Ni)}}),Bn(J,lt,pt,Ct)),Sn="th:not("+D+"),td:not("+D+")",jn=rl.filterFirstLayer(b,"th,td",function(vi){return Kt(vi,Sn)});return Mn(jn,Xr),function(vi,ti,On,Di){for(var Ni,io,Ro,qc=ti.grid().columns(),Zo=ti.grid().rows(),Ua=0;Ua<Zo;Ua++)for(var lh=!1,Yu=0;Yu<qc;Yu++)Ua<On.minRow()||Ua>On.maxRow()||Yu<On.minCol()||Yu>On.maxCol()||(ji_getAt(ti,Ua,Yu).filter(Di).isNone()?(Ni=lh,io=vi[Ua].element(),Ro=De.fromTag("td"),ri(Ro,De.fromTag("br")),(Ni?ri:Ii)(io,Ro)):lh=!0)}(me,ae,tn,Se),Qt=tn,ve=gr(rl.firstLayer(Wt=b,"tr"),function(vi){return 0===vi.dom().childElementCount}),Mn(ve,Xr),Qt.minCol()!==Qt.maxCol()&&Qt.minRow()!==Qt.maxRow()||Mn(rl.firstLayer(Wt,"th,td"),function(vi){hr(vi,"rowspan"),hr(vi,"colspan")}),hr(Wt,"width"),hr(Wt,"height"),pa(Wt,"width"),pa(Wt,"height"),b},Ns=(Cu=ui,{get:function(b){if(!Cu(b))throw new Error("Can only get text value of a text node");return ge(b).getOr("")},getOption:ge=function(b){return Cu(b)?Zt.from(b.dom().nodeValue):Zt.none()},set:function(b,D){if(!Cu(b))throw new Error("Can only set raw text value of a text node");b.dom().nodeValue=D}}),Ao=function(b){return Ns.get(b)},Rs=function(b){return Ns.getOption(b)},rc=function(b,D){Ns.set(b,D)},ps=function(b){return"img"===Xe(b)?1:Rs(b).fold(function(){return en(b).length},function(D){return D.length})},Ha=["img","br"],Qa=function(b){return Rs(b).filter(function(D){return 0!==D.trim().length||-1<D.indexOf("\xa0")}).isSome()||St(Ha,Xe(b))},Oo=function(b){return D=Qa,(L=function(H){for(var X=0;X<H.childNodes.length;X++){var J=De.fromDom(H.childNodes[X]);if(D(J))return Zt.some(J);var lt=L(H.childNodes[X]);if(lt.isSome())return lt}return Zt.none()})(b.dom());var D,L},ts=function(b){return Ls(b,Qa)},Ls=function(b,D){var L=function(H){for(var X=en(H),J=X.length-1;0<=J;J--){var lt=X[J];if(D(lt))return Zt.some(lt);var pt=L(lt);if(pt.isSome())return pt}return Zt.none()};return L(b)},$l=function(b,D){return De.fromDom(b.dom().cloneNode(D))},Zl=function(b){return $l(b,!1)},Kl=function(b){return $l(b,!0)},_n=function(){var b=De.fromTag("td");return ri(b,De.fromTag("br")),b},rd=function(b,D,L){var H=function(b,D){var L,X,J,lt=(L=b,X=De.fromTag(D),J=mr(L),Fi(X,J),X),pt=en(Kl(b));return bo(lt,pt),lt}(b,D);return br(L,function(X,J){null===X?hr(H,J):sn(H,J,X)}),H},oc=function(b){return b},Du=function(b){return function(){return De.fromTag("tr",b.dom())}},ac=function(b,D,L){return{row:Du(D),cell:function(H){var X,J,lt,Ct,Wt,Qt,ve=hn(H.element()),Se=De.fromTag(Xe(H.element()),ve.dom()),me=L.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ae=0<me.length?(X=H.element(),J=Se,lt=me,Oo(X).map(function(tn){var Sn=lt.join(","),jn=nl(tn,Sn,function(vi){return he(vi,X)});return Rn(jn,function(vi,ti){var On=Zl(ti);return hr(On,"contenteditable"),ri(vi,On),On},J)}).getOr(J)):Se;return ri(ae,De.fromTag("br")),Ct=Se,Wt=H.element().dom(),Qt=Ct.dom(),lr(Wt)&&lr(Qt)&&(Qt.style.cssText=Wt.style.cssText),pa(Se,"height"),1!==H.colspan()&&pa(H.element(),"width"),b(H.element(),Se),Se},replace:rd,gap:_n}},Nc=function(b){return{row:Du(b),cell:_n,replace:oc,gap:_n}},ko=function(b,D){return D.column()>=b.startCol()&&D.column()+D.colspan()-1<=b.finishCol()&&D.row()>=b.startRow()&&D.row()+D.rowspan()-1<=b.finishRow()},Au=function(b,D){var L=D.column(),H=D.column()+D.colspan()-1,X=D.row(),J=D.row()+D.rowspan()-1;return L<=b.finishCol()&&H>=b.startCol()&&X<=b.finishRow()&&J>=b.startRow()},ku=function(b,D,L){var H=ji_findItem(b,D,he),X=ji_findItem(b,L,he);return H.bind(function(J){return X.map(function(lt){return pt=J,Ct=lt,el(Math.min(pt.row(),Ct.row()),Math.min(pt.column(),Ct.column()),Math.max(pt.row()+pt.rowspan()-1,Ct.row()+Ct.rowspan()-1),Math.max(pt.column()+pt.colspan()-1,Ct.column()+Ct.colspan()-1));var pt,Ct})})},zd=ku,Pa=function(b,D,L){return zd(b,D,L).map(function(H){var X=ji_filterItems(b,on(Au,H));return yn(X,function(J){return J.element()})})},ad=function(b,D){return ji_findItem(b,D,function(L,H){return In(H,L)}).map(function(L){return L.element()})},Os=function(b){var D=fs(b);return ji_generate(D)},nf=function(b,D,L){var H=Os(b);return Pa(H,D,L)},Uo=function(b,D,L,H,X){var J=Os(b),lt=he(b,L)?Zt.some(D):ad(J,D),pt=he(b,X)?Zt.some(H):ad(J,H);return lt.bind(function(Ct){return pt.bind(function(Wt){return Pa(J,Ct,Wt)})})},Hd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function sc(){return{up:se({selector:Fa,closest:Ir,predicate:Ps,all:pn}),down:se({selector:Fr,predicate:sa}),styles:se({get:wi,getRaw:ir,set:yr,remove:pa}),attrs:se({get:tr,set:sn,remove:hr,copyTo:function(b,D){var L=mr(b);Fi(D,L)}}),insert:se({before:Un,after:li,afterAll:Hi,append:ri,appendAll:bo,prepend:Ii,wrap:er}),remove:se({unwrap:Is,remove:Xr}),create:se({nu:De.fromTag,clone:function(b){return De.fromDom(b.dom().cloneNode(!1))},text:De.fromText}),query:se({comparePosition:function(b,D){return b.dom().compareDocumentPosition(D.dom())},prevSibling:Le,nextSibling:xn}),property:se({children:en,name:Xe,parent:vn,document:function(b){return b.dom().ownerDocument},isText:ui,isComment:nn,isElement:gn,getText:Ao,setText:rc,isBoundary:function(b){return!!gn(b)&&("body"===Xe(b)||St(Hd,Xe(b)))},isEmptyTag:function(b){return!!gn(b)&&St(["br","img","hr","input"],Xe(b))}}),eq:he,is:Pe}}Ke("left","right"),Ke("first","second","splits");var Bs_sharedOne=function(b,D,L){return 0<L.length?function(b,D,L,H){var X=D(b,L);return Rn(H,function(J,lt){var pt=D(b,lt);return function(b,D,L){return D.bind(function(H){return L.filter(on(b.eq,H))})}(b,J,pt)},X)}(b,D,(H=L)[0],H.slice(1)):Zt.none();var H},Bs_ancestors=function(b,D,L,H){void 0===H&&(H=Gi);var X=[D].concat(b.up().all(D)),J=[L].concat(b.up().all(L)),lt=function(Qt){return Ui(Qt,H).fold(function(){return Qt},function(ve){return Qt.slice(0,ve+1)})},pt=lt(X),Ct=lt(J),Wt=Fe(pt,function(Qt){return kt(Ct,function(b,D){return on(b.eq,D)}(b,Qt))});return{firstpath:se(pt),secondpath:se(Ct),shared:se(Wt)}},Ce=sc(),lc_sharedOne=function(b,D){return Bs_sharedOne(Ce,function(L,H){return b(H)},D)},ol={create:Mr(["boxes","start","finish"],[])},kl=function(b){return Fa(b,"table")},la=function(b,D,L){var H=function(X){return function(J){return void 0!==L&&L(J)||he(J,X)}};return he(b,D)?Zt.some(ol.create({boxes:Zt.some([b]),start:b,finish:D})):kl(b).bind(function(X){return kl(D).bind(function(J){if(he(X,J))return Zt.some(ol.create({boxes:nf(X,b,D),start:b,finish:D}));if(In(X,J)){var lt=0<(pt=nl(D,"td,th",H(X))).length?pt[pt.length-1]:D;return Zt.some(ol.create({boxes:Uo(X,b,X,D,J),start:b,finish:lt}))}if(In(J,X)){var pt,Ct=0<(pt=nl(b,"td,th",H(J))).length?pt[pt.length-1]:b;return Zt.some(ol.create({boxes:Uo(J,b,X,D,J),start:b,finish:Ct}))}return function(b,D,L){return Bs_ancestors(Ce,b,D,L)}(b,D).shared().bind(function(Wt){return Ir(Wt,"table",L).bind(function(Qt){var ve=nl(D,"td,th",H(Qt)),Se=0<ve.length?ve[ve.length-1]:D,me=nl(b,"td,th",H(Qt)),ae=0<me.length?me[me.length-1]:b;return Zt.some(ol.create({boxes:Uo(Qt,b,X,D,J),start:ae,finish:Se}))})})})})},uc=la,es=function(b,D){var L=Fr(b,D);return 0<L.length?Zt.some(L):Zt.none()},Qo=function(b,D,L){return Xl(b,D).bind(function(H){return Xl(b,L).bind(function(X){return lc_sharedOne(kl,[H,X]).map(function(J){return{first:se(H),last:se(X),table:se(J)}})})})},Pu=function(b,D,L){return Qo(b,D,L).bind(function(H){var X=function(pt){return he(b,pt)},J=Fa(H.first(),"thead,tfoot,tbody,table",X),lt=Fa(H.last(),"thead,tfoot,tbody,table",X);return J.bind(function(pt){return lt.bind(function(Ct){return he(pt,Ct)?function(b,D,L){return function(b,D,L){return ku(b,D,L).bind(function(H){return function(b,D){for(var L=!0,H=on(ko,D),X=D.startRow();X<=D.finishRow();X++)for(var J=D.startCol();J<=D.finishCol();J++)L=L&&ji_getAt(b,X,J).exists(H);return L?Zt.some(D):Zt.none()}(b,H)})}(Os(b),D,L)}(H.table(),H.first(),H.last()):Zt.none()})})})},zs={selected:se("data-mce-selected"),selectedSelector:se("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:se("[data-mce-selected]"),firstSelected:se("data-mce-first-selected"),firstSelectedSelector:se("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:se("data-mce-last-selected"),lastSelectedSelector:se("td[data-mce-last-selected],th[data-mce-last-selected]")},sl=function(b){if(!Dr(b))throw new Error("cases must be an array");if(0===b.length)throw new Error("there must be at least one case");var D=[],L={};return Mn(b,function(H,X){var J=ao(H);if(1!==J.length)throw new Error("one and only one name per case");var lt=J[0],pt=H[lt];if(void 0!==L[lt])throw new Error("duplicate key detected:"+lt);if("cata"===lt)throw new Error("cannot have a case named cata (sorry)");if(!Dr(pt))throw new Error("case arguments must be an array");D.push(lt),L[lt]=function(){var Ct=arguments.length;if(Ct!==pt.length)throw new Error("Wrong number of arguments to case "+lt+". Expected "+pt.length+" ("+pt+"), got "+Ct);for(var Wt=new Array(Ct),Qt=0;Qt<Wt.length;Qt++)Wt[Qt]=arguments[Qt];return{fold:function(){if(arguments.length!==b.length)throw new Error("Wrong number of arguments to fold. Expected "+b.length+", got "+arguments.length);return arguments[X].apply(null,Wt)},match:function(ve){var Se=ao(ve);if(D.length!==Se.length)throw new Error("Wrong number of arguments to match. Expected: "+D.join(",")+"\nActual: "+Se.join(","));if(!aa(D,function(me){return St(Se,me)}))throw new Error("Not all branches were specified when using match. Specified: "+Se.join(", ")+"\nRequired: "+D.join(", "));return ve[lt].apply(null,Wt)},log:function(ve){Rt.console.log(ve,{constructors:D,constructor:lt,params:Wt})}}}}),L},Va=sl([{none:[]},{multiple:["elements"]},{single:["selection"]}]),ns={cata:function(b,D,L,H){return b.fold(D,L,H)},none:Va.none,multiple:Va.multiple,single:Va.single},Pl=function(b,D){return ns.cata(D.get(),se([]),Ve,se([b]))},Ql=function(b,D){return ns.cata(D.get(),Zt.none,function(L,H){return 0===L.length?Zt.none():Pu(b,zs.firstSelectedSelector(),zs.lastSelectedSelector()).bind(function(X){return 1<L.length?Zt.some({bounds:se(X),cells:se(L)}):Zt.none()})},Zt.none)},tu=function(b,D){var L=Pl(b,D);return 0<L.length&&aa(L,function(H){return so(H,"rowspan")&&1<parseInt(tr(H,"rowspan"),10)||so(H,"colspan")&&1<parseInt(tr(H,"colspan"),10)})?Zt.some(L):Zt.none()},cc=Pl,cd=function(b){return{element:se(b),mergable:Zt.none,unmergable:Zt.none,selection:se([b])}},Io=Ke("element","clipboard","generators"),ua={noMenu:cd,forMenu:function(b,D,L){return{element:se(L),mergable:se(Ql(D,b)),unmergable:se(tu(L,b)),selection:se(cc(L,b))}},notCell:function(b){return cd(b)},paste:Io,pasteRows:function(b,D,L,H,X){return{element:se(L),mergable:Zt.none,unmergable:Zt.none,selection:se(cc(L,b)),clipboard:se(H),generators:se(X)}}};function dc(b,D){var L=function(X){var J=D(X);if(J<=0||null===J){var lt=wi(X,b);return parseFloat(lt)||0}return J},H=function(X,J){return kn(J,function(lt,pt){var Ct=wi(X,pt),Wt=void 0===Ct?0:parseInt(Ct,10);return isNaN(Wt)?lt:lt+Wt},0)};return{set:function(X,J){if(!zn(J)&&!J.match(/^[0-9]+$/))throw new Error(b+".set accepts only positive integer values. Value was "+J);var lt=X.dom();lr(lt)&&(lt.style[b]=J+"px")},get:L,getOuter:L,aggregate:H,max:function(X,J,lt){var pt=H(X,lt);return pt<J?J-pt:0}}}var wh=dc("height",function(b){var D=b.dom();return Wi(b)?D.getBoundingClientRect().height:D.offsetHeight}),eu=function(b){return wh.get(b)},Nu=function(b){return wh.getOuter(b)},Ru=dc("width",function(b){return b.dom().offsetWidth}),nu=function(b){return Ru.get(b)},jr=function(b){return Ru.getOuter(b)},xs=yt.detect(),Fs=function(b,D,L){return H=wi(b,D),X=L,J=parseFloat(H),isNaN(J)?X:J;var H,X,J},ul=/(\d+(\.\d+)?)(\w|%)*/,va=/(\d+(\.\d+)?)%/,qo=/(\d+(\.\d+)?)px|em/,dd=function(b,D){yr(b,"height",D+"px")},iu=function(b){return ir(b,"width").fold(function(){return Zt.from(tr(b,"width"))},function(D){return Zt.some(D)})},fc=function(b,D){return b/D.pixelWidth()*100},Bo={percentageBasedSizeRegex:se(va),pixelBasedSizeRegex:se(qo),setPixelWidth:function(b,D){yr(b,"width",D+"px")},setPercentageWidth:function(b,D){yr(b,"width",D+"%")},setHeight:dd,getPixelWidth:function(b,D){return iu(b).fold(function(){return nu(b)},function(L){return function(H,X,J){var lt=qo.exec(X);if(null!==lt)return parseInt(lt[1],10);var pt=va.exec(X);return null!==pt?parseFloat(pt[1])/100*J.pixelWidth():nu(H)}(b,L,D)})},getPercentageWidth:function(b,D){return iu(b).fold(function(){var L=nu(b);return fc(L,D)},function(L){return function(H,X,J){var lt=va.exec(X);if(null!==lt)return parseFloat(lt[1]);var pt=nu(H);return fc(pt,J)}(b,L,D)})},getGenericWidth:function(b){return iu(b).bind(function(D){var L=ul.exec(D);return null!==L?Zt.some({width:se(parseFloat(L[1])),unit:se(L[3])}):Zt.none()})},setGenericWidth:function(b,D,L){yr(b,"width",D+L)},getHeight:function(b){return function(b){var D,L=ir(D=b,"height").getOrThunk(function(){return function(b){return xs.browser.isIE()||xs.browser.isEdge()?(L=Fs(D=b,"padding-top",0),H=Fs(D,"padding-bottom",0),X=Fs(D,"border-top-width",0),J=Fs(D,"border-bottom-width",0),lt=D.dom().getBoundingClientRect().height,"border-box"===wi(D,"box-sizing")?lt:lt-L-H-(X+J)):Fs(b,"height",eu(b));var D,L,H,X,J,lt}(D)+"px"});return L?function(b,D,L,H){var X,J,lt,Ct,Qt,Se,me=parseInt(b,10);return Se=(Qt=b).length-"%".length,Qt.length<"%".length||"%"!==Qt.substr(Se,Se+"%".length)||"table"===Xe(D)?me:(J=me,lt=L,H(X=D,Ct=wo_table(X).map(function(ae){var tn=lt(ae);return Math.floor(J/100*tn)}).getOr(J)),Ct)}(L,b,eu,dd):eu(b)}(D=b)/function(b,D){return so(b,D)?parseInt(tr(b,D),10):1}(D,"rowspan");var D},getRawWidth:iu},ya=function(b,D){Bo.getGenericWidth(b).each(function(L){var H=L.width()/2;Bo.setGenericWidth(b,H,L.unit()),Bo.setGenericWidth(D,H,L.unit())})},Po=function(b,D){return{left:se(b),top:se(D),translate:function(L,H){return Po(b+L,D+H)}}},Yo=Po,ru=function(b,D){return void 0!==b?b:void 0!==D?D:0},cl=function(b){var D=b.dom().ownerDocument,L=D.body,H=D.defaultView,X=D.documentElement,J=ru(H.pageYOffset,X.scrollTop),lt=ru(H.pageXOffset,X.scrollLeft),pt=ru(X.clientTop,L.clientTop),Ct=ru(X.clientLeft,L.clientLeft);return Oc(b).translate(lt-Ct,J-pt)},Oc=function(b){var D,L=b.dom(),H=L.ownerDocument.body;return H===L?Yo(H.offsetLeft,H.offsetTop):Wi(b)?(D=L.getBoundingClientRect(),Yo(D.left,D.top)):Yo(0,0)},Vd=Ke("row","y"),Bc=Ke("col","x"),ou=function(b){return cl(b).left()+jr(b)},hd=function(b){return cl(b).left()},fd=function(b,D){return Bc(b,hd(D))},gd=function(b,D){return Bc(b,ou(D))},_s=function(b){return cl(b).top()},El=function(b,D){return Vd(b,_s(D))},pd=function(b,D){return Vd(b,_s(D)+Nu(D))},Zi=function(b,D,L){if(0===L.length)return[];var H=yn(L.slice(1),function(J,lt){return J.map(function(pt){return b(lt,pt)})}),X=L[L.length-1].map(function(J){return D(L.length-1,J)});return H.concat([X])},au={height:{delta:Ve,positions:function(b){return Zi(El,pd,b)},edge:_s},rtl:{delta:function(b){return-b},edge:ou,positions:function(b){return Zi(gd,fd,b)}},ltr:{delta:Ve,edge:hd,positions:function(b){return Zi(fd,gd,b)}}},xa={ltr:au.ltr,rtl:au.rtl};function dl(b){var D=function(L){return b(L).isRtl()?xa.rtl:xa.ltr};return{delta:function(L,H){return D(H).delta(L,H)},edge:function(L){return D(L).edge(L)},positions:function(L,H){return D(H).positions(L,H)}}}var Eo=function(b){var D=fs(b);return ji_generate(D).grid()},hl=function(){return(hl=Object.assign||function(b){for(var D,L=1,H=arguments.length;L<H;L++)for(var X in D=arguments[L])Object.prototype.hasOwnProperty.call(D,X)&&(b[X]=D[X]);return b}).apply(this,arguments)},Hs=function(b){for(var D=[],L=function(X){D.push(X)},H=0;H<b.length;H++)b[H].each(L);return D},Lu=function(b,D){for(var L=0;L<b.length;L++){var H=D(b[L],L);if(H.isSome())return H}return Zt.none()},v=function(b,D,L,H){L===H?hr(b,D):sn(b,D,L)},et=function(b){return void 0!==b.dom().classList},Tt=function(b,D){et(b)?b.dom().classList.add(D):function(b,D){return X=D,J=function(b,D){var L=tr(b,D);return void 0===L||""===L?[]:L.split(" ")}(L=b,"class").concat([X]),sn(L,"class",J.join(" ")),!0;var L,X,J}(b,D)},Ut=function(b,D){return et(b)&&b.dom().classList.contains(D)},le=function(b,D){for(var L=[],H=b;H<D;H++)L.push(H);return L},qt=function(b,D){if(D<0||D>=b.length-1)return Zt.none();var L=b[D].fold(function(){var X=function(b){var D=ki.call(b,0);return D.reverse(),D}(b.slice(0,D));return Lu(X,function(J,lt){return J.map(function(pt){return{value:pt,delta:lt+1}})})},function(X){return Zt.some({value:X,delta:0})}),H=b[D+1].fold(function(){var X=b.slice(D+1);return Lu(X,function(J,lt){return J.map(function(pt){return{value:pt,delta:lt+1}})})},function(X){return Zt.some({value:X,delta:1})});return L.bind(function(X){return H.map(function(J){var lt=J.delta+X.delta;return Math.abs(J.value-X.value)/lt})})},re=function(b,D,L){var H=b();return Fe(H,D).orThunk(function(){return Zt.from(H[0]).orThunk(L)}).map(function(X){return X.element()})},we=function(b){var D=b.grid(),L=le(0,D.columns()),H=le(0,D.rows());return yn(L,function(X){return re(function(){return Ln(H,function(J){return ji_getAt(b,J,X).filter(function(lt){return lt.column()===X}).fold(se([]),function(lt){return[lt]})})},function(J){return 1===J.colspan()},function(){return ji_getAt(b,0,X)})})},Me=function(b){var D=b.grid(),L=le(0,D.rows()),H=le(0,D.columns());return yn(L,function(X){return re(function(){return Ln(H,function(J){return ji_getAt(b,X,J).filter(function(lt){return lt.row()===X}).fold(se([]),function(lt){return[lt]})})},function(J){return 1===J.rowspan()},function(){return ji_getAt(b,X,0)})})},ci=function(b){var D=b.replace(/\./g,"-");return{resolve:function(L){return D+"-"+L}}},ii={resolve:ci("ephox-snooker").resolve},Lt=ii.resolve("resizer-bar"),An=ii.resolve("resizer-rows"),Ti=ii.resolve("resizer-cols"),Ki=function(b){var D=Fr(b.parent(),"."+Lt);Mn(D,Xr)},xr=function(b,D,L){var H=b.origin();Mn(D,function(X,J){X.each(function(lt){var pt=L(H,lt);Tt(pt,Lt),ri(b.parent(),pt)})})},Xo=function(b,D){var L=Fr(b.parent(),"."+Lt);Mn(L,D)},or=function(b,D,L,H){Ki(b);var X=fs(D),J=ji_generate(X);!function(b,D,L,H,X,J){var lt,pt,Ct,Wt,Se,me,ae,tn,Qt=cl(D);lt=b,pt=0<L.length?X.positions(L,D):[],Ct=Qt,Wt=jr(D),xr(lt,pt,function(jn,vi){var ti=function(b,D,L,H,X){var J=De.fromTag("div");return Mi(J,{position:"absolute",left:D+"px",top:L-3.5+"px",height:"7px",width:H+"px"}),Fi(J,{"data-row":b,role:"presentation"}),J}(vi.row(),Ct.left()-jn.left(),vi.y()-jn.top(),Wt);return Tt(ti,An),ti}),Se=b,me=0<H.length?J.positions(H,D):[],ae=Qt,tn=Nu(D),xr(Se,me,function(jn,vi){var ti=function(b,D,L,H,X){var J=De.fromTag("div");return Mi(J,{position:"absolute",left:D-3.5+"px",top:L+"px",height:X+"px",width:"7px"}),Fi(J,{"data-column":b,role:"presentation"}),J}(vi.col(),vi.x()-jn.left(),ae.top()-jn.top(),0,tn);return Tt(ti,Ti),ti})}(b,D,Me(J),we(J),L,H)},Wa=function(b){Xo(b,function(D){yr(D,"display","none")})},ta=function(b){Xo(b,function(D){yr(D,"display","block")})},Or=Ki,ja=function(b,D){return Tl(D,b.section())},to=function(b,D){return b.cells()[D]},si_addCell=function(b,D,L){var H=b.cells(),X=H.slice(0,D),J=H.slice(D),lt=X.concat([L]).concat(J);return ja(b,lt)},si_setCells=ja,si_mutateCell=function(b,D,L){b.cells()[D]=L},si_getCell=to,si_getCellElement=function(b,D){return to(b,D).element()},si_mapCells=function(b,D){var L=b.cells(),H=yn(L,D);return Tl(H,b.section())},si_cellLength=function(b){return b.cells().length},ca=function(b,D){if(0===b.length)return 0;var L=b[0];return Ui(b,function(H){return!D(L.element(),H.element())}).fold(function(){return b.length},function(H){return H})},is=function(b,D,L){for(var H=[],X=0;X<b.grid().rows();X++){for(var J=[],lt=0;lt<b.grid().columns();lt++){var pt=ji_getAt(b,X,lt).map(function(Wt){return cr(Wt.element(),L)}).getOrThunk(function(){return cr(D.gap(),!0)});J.push(pt)}var Ct=Tl(J,b.all()[X].section());H.push(Ct)}return H},Wd=function(b,D){return function(b,D){return yn(b,function(L){var H,X=(H=L.details(),Lu(H,function(J){return vn(J.element()).map(function(lt){var pt=vn(lt).isNone();return cr(lt,pt)})}).getOrThunk(function(){return cr(D.row(),!0)}));return wu(X.element(),L.details(),L.section(),X.isNew())})}(function(b,D){var L=yn(b,function(H,X){return yn(H.cells(),function(J,lt){return!1})});return yn(b,function(H,X){var J=Ln(H.cells(),function(lt,pt){if(!1===L[X][pt]){var Ct=function(b,D,L,H){var X,J,lt,pt,Ct=(X=b,J=D,X[J]).cells().slice(L),Wt=ca(Ct,H),Qt=(lt=b,pt=L,yn(lt,function(Se){return si_getCell(Se,pt)})).slice(D),ve=ca(Qt,H);return{colspan:se(Wt),rowspan:se(ve)}}(b,X,pt,D);return function(Wt,Qt,ve,Se){for(var me=Wt;me<Wt+ve;me++)for(var ae=Qt;ae<Qt+Se;ae++)L[me][ae]=!0}(X,pt,Ct.rowspan(),Ct.colspan()),[tl(lt.element(),Ct.rowspan(),Ct.colspan(),lt.isNew())]}return[]});return ic(J,H.section())})}(b,he),D)},Hr=function(b,D){var L=bi(yn(b.all(),function(H){return H.cells()}));return Fe(L,function(H){return he(D,H.element())})},ho=function(b,D,L,H,X){return function(J,lt,pt,Ct,Wt){var Qt=fs(lt),ve=ji_generate(Qt);return D(ve,pt).map(function(Se){var me=is(ve,Ct,!1),ae=b(me,Se,he,X(Ct)),tn=Wd(ae.grid(),Ct);return{grid:se(tn),cursor:ae.cursor}}).fold(function(){return Zt.none()},function(Se){var me=function(b,D){var L=[],H=[],X=function(Ct,Wt){0<Ct.length?function(Qt,ve){var Se=Es(b,ve).getOrThunk(function(){var ae=De.fromTag(ve,hn(b).dom());return ri(b,ae),ae});Qr(Se);var me=yn(Qt,function(ae){ae.isNew()&&L.push(ae.element());var tn=ae.element();return Qr(tn),Mn(ae.cells(),function(Sn){Sn.isNew()&&H.push(Sn.element()),v(Sn.element(),"colspan",Sn.colspan(),1),v(Sn.element(),"rowspan",Sn.rowspan(),1),ri(tn,Sn.element())}),tn});bo(Se,me)}(Ct,Wt):Es(b,Wt).each(Xr)},J=[],lt=[],pt=[];return Mn(D,function(Ct){switch(Ct.section()){case"thead":J.push(Ct);break;case"tbody":lt.push(Ct);break;case"tfoot":pt.push(Ct)}}),X(J,"thead"),X(lt,"tbody"),X(pt,"tfoot"),{newRows:se(L),newCells:se(H)}}(lt,Se.grid());return L(lt,Se.grid(),Wt),H(lt),or(J,lt,au.height,Wt),Zt.some({cursor:Se.cursor,newRows:me.newRows,newCells:me.newCells})})}},Ws=function(b,D){return wo_cell(D.element()).bind(function(L){return Hr(b,L)})},su=function(b,D){var L=yn(D.selection(),function(X){return wo_cell(X).bind(function(J){return Hr(b,J)})}),H=Hs(L);return 0<H.length?Zt.some({cells:H,generators:D.generators,clipboard:D.clipboard}):Zt.none()},gc=function(b,D){var L=yn(D.selection(),function(X){return wo_cell(X).bind(function(J){return Hr(b,J)})}),H=Hs(L);return 0<H.length?Zt.some(H):Zt.none()},pc=function(b){return{is:function(D){return b===D},isValue:zi,isError:Gi,getOr:se(b),getOrThunk:se(b),getOrDie:se(b),or:function(D){return pc(b)},orThunk:function(D){return pc(b)},fold:function(D,L){return L(b)},map:function(D){return pc(D(b))},mapError:function(D){return pc(b)},each:function(D){D(b)},bind:function(D){return D(b)},exists:function(D){return D(b)},forall:function(D){return D(b)},toOption:function(){return Zt.some(b)}}},Ou=function(b){return{is:Gi,isValue:Gi,isError:zi,getOr:Ve,getOrThunk:function(D){return D()},getOrDie:function(){return D=String(b),function(){throw new Error(D)}();var D},or:function(D){return D},orThunk:function(D){return D()},fold:function(D,L){return D(b)},map:function(D){return Ou(b)},mapError:function(D){return Ou(D(b))},each:bn,bind:function(D){return Ou(b)},exists:Gi,forall:zi,toOption:Zt.none}},js={value:pc,error:Ou,fromOption:function(b,D){return b.fold(function(){return Ou(D)},pc)}},Sh=function(b,D){return yn(b,function(){return cr(D.cell(),!0)})},eg=function(b,D,L){return b.concat(function(H,X){for(var J=[],lt=0;lt<H;lt++)J.push(si_setCells(b[b.length-1],Sh(b[b.length-1].cells(),L)));return J}(D))},ng=function(b,D,L){return yn(b,function(H){return si_setCells(H,H.cells().concat(Sh(le(0,D),L)))})},fl=function(b,D){var L=si_cellLength(b[0]),H=si_cellLength(D[0]);return{rowDelta:se(0),colDelta:se(L-H)}},rs=function(b,D,L){var H=D.colDelta()<0?ng:Ve;return(D.rowDelta()<0?eg:Ve)(H(b,Math.abs(D.colDelta()),L),Math.abs(D.rowDelta()),L)},Gs=function(b,D,L,H){for(var X=!0,J=0;J<b.length;J++)for(var lt=0;lt<si_cellLength(b[0]);lt++){var pt=L(si_getCellElement(b[J],lt),D);!0===pt&&!1===X?si_mutateCell(b[J],lt,cr(H(),!0)):!0===pt&&(X=!1)}return b},jd=function(b,D,L,H,X){!function(b,D,L,H){if(0<D&&D<b.length){var X=b[D-1].cells(),J=(lt=L,kn(X,function(pt,Ct){return kt(pt,function(Wt){return lt(Wt.element(),Ct.element())})?pt:pt.concat([Ct])},[]));Mn(J,function(pt){for(var Ct=Zt.none(),Wt=function(ve){for(var Se=function(ae){var tn=b[ve].cells()[ae];L(tn.element(),pt.element())&&(Ct.isNone()&&(Ct=Zt.some(H())),Ct.each(function(Sn){si_mutateCell(b[ve],ae,cr(Sn,!0))}))},me=0;me<si_cellLength(b[0]);me++)Se(me)},Qt=D;Qt<b.length;Qt++)Wt(Qt)})}var lt}(D,b,X,H.cell);var J=fl(L,D),lt=rs(L,J,H),pt=fl(D,lt),Ct=rs(D,pt,H);return Ct.slice(0,b).concat(lt).concat(Ct.slice(b,Ct.length))},Gd=function(b,D,L,H,X){var J=b.slice(0,D),lt=b.slice(D),pt=si_mapCells(b[L],function(Ct,Wt){return 0<D&&D<b.length&&H(si_getCellElement(b[D-1],Wt),si_getCellElement(b[D],Wt))?si_getCell(b[D],Wt):cr(X(Ct.element(),H),!0)});return J.concat([pt]).concat(lt)},Fc=function(b,D,L,H,X){return yn(b,function(J){var lt=0<D&&D<si_cellLength(J)&&H(si_getCellElement(J,D-1),si_getCellElement(J,D))?si_getCell(J,D):cr(X(si_getCellElement(J,L),H),!0);return si_addCell(J,D,lt)})},$r=function(b,D,L,H){return yn(b,function(X){return si_mapCells(X,function(J){return lt=J,kt(D,function(pt){return L(lt.element(),pt.element())})?cr(H(J.element(),L),!0):J;var lt})})},Zr=function(b,D,L,H){return void 0!==si_getCellElement(b[D],L)&&0<D&&H(si_getCellElement(b[D-1],L),si_getCellElement(b[D],L))},gl=function(b,D,L){return 0<D&&L(si_getCellElement(b,D-1),si_getCellElement(b,D))},da=function(b,D,L,H){var X=Ln(b,function(J,lt){return Zr(b,lt,D,L)||gl(J,D,L)?[]:[si_getCell(J,D)]});return $r(b,X,L,H)},Rl=function(b,D,L,H){var X=b[D],J=Ln(X.cells(),function(lt,pt){return Zr(b,D,pt,L)||gl(X,pt,L)?[]:[lt]});return $r(b,J,L,H)},qd=sl([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Fo=hl({},qd),lu=function(b,D){return so(b,D)&&1<parseInt(tr(b,D),10)},_a={hasColspan:function(b){return lu(b,"colspan")},hasRowspan:function(b){return lu(b,"rowspan")},minWidth:se(10),minHeight:se(10),getInt:function(b,D){return parseInt(wi(b,D),10)}},Xd=function(b,D,L){return ir(b,D).fold(function(){return L(b)+"px"},function(H){return H})},vd=function(b,D){return Xd(b,"width",function(L){return Bo.getPixelWidth(L,D)})},bm=function(b){return Xd(b,"height",Bo.getHeight)},of=function(b,D,L,H,X){var J=we(b),lt=yn(J,function(pt){return pt.map(D.edge)});return yn(J,function(pt,Ct){return pt.filter(Ci(_a.hasColspan)).fold(function(){var Wt=qt(lt,Ct);return H(Wt)},function(Wt){return L(Wt,X)})})},Co=function(b){return b.map(function(D){return D+"px"}).getOr("")},Us=function(b,D,L,H){var X=Me(b),J=yn(X,function(lt){return lt.map(D.edge)});return yn(X,function(lt,pt){return lt.filter(Ci(_a.hasRowspan)).fold(function(){var Ct=qt(J,pt);return H(Ct)},function(Ct){return L(Ct)})})},Ll={getRawWidths:function(b,D,L){return of(b,D,vd,Co,L)},getPixelWidths:function(b,D,L){return of(b,D,Bo.getPixelWidth,function(H){return H.getOrThunk(L.minCellWidth)},L)},getPercentageWidths:function(b,D,L){return of(b,D,Bo.getPercentageWidth,function(H){return H.fold(function(){return L.minCellWidth()},function(X){return X/L.pixelWidth()*100})},L)},getPixelHeights:function(b,D){return Us(b,D,Bo.getHeight,function(L){return L.getOrThunk(_a.minHeight)})},getRawHeights:function(b,D){return Us(b,D,bm,Co)}},Cs=function(b,D,L){for(var H=0,X=b;X<D;X++)H+=void 0!==L[X]?L[X]:0;return H},Ho=function(b,D){var L=ji_justCells(b);return yn(L,function(H){var X=Cs(H.column(),H.column()+H.colspan(),D);return{element:H.element,width:se(X),colspan:H.colspan}})},Ol=function(b){var D=Ve;return{width:se(b),pixelWidth:se(b),getWidths:Ll.getPixelWidths,getCellDelta:D,singleColumnWidth:function(L,H){return[Math.max(_a.minWidth(),L+H)-L]},minCellWidth:_a.minWidth,setElementWidth:Bo.setPixelWidth,setTableWidth:function(L,H,X){var J=Rn(H,function(lt,pt){return lt+pt},0);Bo.setPixelWidth(L,J)}}},Hc=function(b){return Bo.getRawWidth(b).fold(function(){var D=nu(b);return Ol(D)},function(D){return function(b,D){var H,X,J,lt=Bo.percentageBasedSizeRegex().exec(D);if(null!==lt)return H=b,X=parseFloat(lt[1]),J=nu(H),{width:se(X),pixelWidth:se(J),getWidths:Ll.getPercentageWidths,getCellDelta:function(Qt){return Qt/J*100},singleColumnWidth:function(Qt,ve){return[100-Qt]},minCellWidth:function(){return _a.minWidth()/J*100},setElementWidth:Bo.setPercentageWidth,setTableWidth:function(Qt,ve,Se){Bo.setPercentageWidth(Qt,X+Se/100*X)}};var pt=Bo.pixelBasedSizeRegex().exec(D);if(null!==pt){var Ct=parseInt(pt[1],10);return Ol(Ct)}var Wt=nu(b);return Ol(Wt)}(b,D)})},Bu=function(b){return ji_generate(b)},Mh=function(b){var D=fs(b);return Bu(D)},uu=function(b){var D=b,L=function(){return D};return{get:L,set:function(H){D=H},clone:function(){return uu(L())}}},ea=function(b,D){var L=gr(D,function(H){return!St(b,H)});0<L.length&&Ei(L)},Vc=function(b){return function(b,D,L){if(0===D.length)throw new Error("You must specify at least one required field.");return Zn("required",D),Qi(D),function(H){var X=ao(H);aa(D,function(lt){return St(X,lt)})||Vn(D,X),b(D,X);var J=gr(D,function(lt){return!L.validate(H[lt],lt)});return 0<J.length&&function(lt,pt){throw new Error("All values need to be of type: "+pt+". Keys ("+mo(lt).join(", ")+") were not.")}(J,L.label),H}}(ea,b,{validate:Rr,label:"function"})},vc=Vc(["cell","row","replace","gap"]),zu=function(b){var D=so(b,"colspan")?parseInt(tr(b,"colspan"),10):1,L=so(b,"rowspan")?parseInt(tr(b,"rowspan"),10):1;return{element:se(b),colspan:se(D),rowspan:se(L)}},No=function(b,D){void 0===D&&(D=zu),vc(b);var L=uu(Zt.none()),X=function(lt){var pt=function(lt){var Ct=D(lt);return b.cell(Ct)}(lt);return L.get().isNone()&&L.set(Zt.some(pt)),J=Zt.some({item:lt,replacement:pt}),pt},J=Zt.none();return{getOrInit:function(lt,pt){return J.fold(function(){return X(lt)},function(Ct){return pt(lt,Ct.item)?Ct.replacement:X(lt)})},cursor:L.get}},Ms=function(b,D){return function(L){var H=uu(Zt.none());vc(L);var X=[],J=function(lt){var Ct=L.replace(lt,D,{scope:b});return X.push({item:lt,sub:Ct}),H.get().isNone()&&H.set(Zt.some(Ct)),Ct};return{replaceOrInit:function(lt,pt){return(Ct=lt,Wt=pt,Fe(X,function(Qt){return Wt(Qt.item,Ct)})).fold(function(){return J(lt)},function(Qt){return pt(lt,Qt.item)?Qt.sub:J(lt)});var Ct,Wt},cursor:H.get}}},yd=function(b){vc(b);var D=uu(Zt.none());return{combine:function(L){return D.get().isNone()&&D.set(Zt.some(L)),function(){var H=b.cell({element:se(L),colspan:se(1),rowspan:se(1)});return pa(H,"width"),pa(L,"width"),H}},cursor:D.get}},wa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],w=sc(),A=function(b){return function(b,D){var L=b.property().name(D);return St(wa,L)}(w,b)},E=function(b){return function(b,D){var L=b.property().name(D);return St(["ol","ul"],L)}(w,b)},j=function(b){var D,L=function(J){return"br"===Xe(J)},H=function(J){return ts(J).bind(function(lt){var pt=xn(lt).map(function(Ct){return!!A(Ct)||!!function(b){return function(b,D){return St(["br","img","hr","input"],b.property().name(D))}(w,b)}(Ct)&&"img"!==Xe(Ct)}).getOr(!1);return vn(lt).map(function(Ct){return!0===pt||"li"===Xe(Wt=Ct)||Ps(Wt,E).isSome()||L(lt)||A(Ct)&&!he(J,Ct)?[]:[De.fromTag("br")];var Wt})}).getOr([])},X=0===(D=Ln(b,function(J){var lt=en(J);return aa(lt,function(pt){return L(pt)||ui(pt)&&0===Ao(pt).trim().length})?[]:lt.concat(H(J))})).length?[De.fromTag("br")]:D;Qr(b[0]),bo(b[0],X)},$=function(b){0===wo_cells(b).length&&Xr(b)},K=Ke("grid","cursor"),st=function(b,D,L){return ut(b,D,L).orThunk(function(){return ut(b,0,0)})},ut=function(b,D,L){return Zt.from(b[D]).bind(function(H){return Zt.from(H.cells()[L]).bind(function(X){return Zt.from(X.element())})})},ft=function(b,D,L){return K(b,ut(b,D,L))},bt=function(b){return kn(b,function(D,L){return kt(D,function(H){return H.row()===L.row()})?D:D.concat([L])},[]).sort(function(D,L){return D.row()-L.row()})},Mt=function(b){return kn(b,function(D,L){return kt(D,function(H){return H.column()===L.column()})?D:D.concat([L])},[]).sort(function(D,L){return D.column()-L.column()})},It=function(b,D,L){var H=function(b,D){return yn(b,function(L){var H=yn(wo_cells(L),function(X){var J=so(X,"rowspan")?parseInt(tr(X,"rowspan"),10):1,lt=so(X,"colspan")?parseInt(tr(X,"colspan"),10):1;return Yl(X,J,lt)});return ds(L,H,D.section())})}(b,L),X=ji_generate(H);return is(X,D,!0)},Nt=function(b,D,L){var H=Hc(b),X=Bu(D),J=H.getWidths(X,L,H),lt=Ho(X,J);Mn(lt,function(pt){H.setElementWidth(pt.element(),pt.width())}),0<lt.length&&H.setTableWidth(b,J,H.getCellDelta(0))},Gt={insertRowBefore:ho(function(b,D,L,H){var X=D.row(),J=D.row(),lt=Gd(b,J,X,L,H.getOrInit);return ft(lt,J,D.column())},Ws,bn,bn,No),insertRowsBefore:ho(function(b,D,L,H){var X=D[0].row(),J=D[0].row(),lt=bt(D),pt=kn(lt,function(Ct,Wt){return Gd(Ct,J,X,L,H.getOrInit)},b);return ft(pt,J,D[0].column())},gc,bn,bn,No),insertRowAfter:ho(function(b,D,L,H){var X=D.row(),J=D.row()+D.rowspan(),lt=Gd(b,J,X,L,H.getOrInit);return ft(lt,J,D.column())},Ws,bn,bn,No),insertRowsAfter:ho(function(b,D,L,H){var X=bt(D),J=X[X.length-1].row(),lt=X[X.length-1].row()+X[X.length-1].rowspan(),pt=kn(X,function(Ct,Wt){return Gd(Ct,lt,J,L,H.getOrInit)},b);return ft(pt,lt,D[0].column())},gc,bn,bn,No),insertColumnBefore:ho(function(b,D,L,H){var X=D.column(),J=D.column(),lt=Fc(b,J,X,L,H.getOrInit);return ft(lt,D.row(),J)},Ws,Nt,bn,No),insertColumnsBefore:ho(function(b,D,L,H){var X=Mt(D),J=X[0].column(),lt=X[0].column(),pt=kn(X,function(Ct,Wt){return Fc(Ct,lt,J,L,H.getOrInit)},b);return ft(pt,D[0].row(),lt)},gc,Nt,bn,No),insertColumnAfter:ho(function(b,D,L,H){var X=D.column(),J=D.column()+D.colspan(),lt=Fc(b,J,X,L,H.getOrInit);return ft(lt,D.row(),J)},Ws,Nt,bn,No),insertColumnsAfter:ho(function(b,D,L,H){var X=D[D.length-1].column(),J=D[D.length-1].column()+D[D.length-1].colspan(),lt=Mt(D),pt=kn(lt,function(Ct,Wt){return Fc(Ct,J,X,L,H.getOrInit)},b);return ft(pt,D[0].row(),J)},gc,Nt,bn,No),splitCellIntoColumns:ho(function(b,D,L,H){var X=function(b,D,L,H,X){var J=L+1;return yn(b,function(lt,pt){var Ct=pt===D?cr(X(si_getCellElement(lt,L),H),!0):si_getCell(lt,L);return si_addCell(lt,J,Ct)})}(b,D.row(),D.column(),L,H.getOrInit);return ft(X,D.row(),D.column())},Ws,Nt,bn,No),splitCellIntoRows:ho(function(b,D,L,H){var X=function(b,D,L,H,X){var J=D+1,lt=b.slice(0,J),pt=b.slice(J),Ct=si_mapCells(b[D],function(Wt,Qt){return Qt===L?cr(X(Wt.element(),H),!0):Wt});return lt.concat([Ct]).concat(pt)}(b,D.row(),D.column(),L,H.getOrInit);return ft(X,D.row(),D.column())},Ws,bn,bn,No),eraseColumns:ho(function(b,D,L,H){var X=Mt(D),J=function(b,D,L){var H=yn(b,function(X){var J=X.cells().slice(0,D).concat(X.cells().slice(L+1));return Tl(J,X.section())});return gr(H,function(X){return 0<X.cells().length})}(b,X[0].column(),X[X.length-1].column()),lt=st(J,D[0].row(),D[0].column());return K(J,lt)},gc,Nt,$,No),eraseRows:ho(function(b,D,L,H){var X=bt(D),J=function(b,D,L){return b.slice(0,D).concat(b.slice(L+1))}(b,X[0].row(),X[X.length-1].row()),lt=st(J,D[0].row(),D[0].column());return K(J,lt)},gc,bn,$,No),makeColumnHeader:ho(function(b,D,L,H){var X=da(b,D.column(),L,H.replaceOrInit);return ft(X,D.row(),D.column())},Ws,bn,bn,Ms("row","th")),unmakeColumnHeader:ho(function(b,D,L,H){var X=da(b,D.column(),L,H.replaceOrInit);return ft(X,D.row(),D.column())},Ws,bn,bn,Ms(null,"td")),makeRowHeader:ho(function(b,D,L,H){var X=Rl(b,D.row(),L,H.replaceOrInit);return ft(X,D.row(),D.column())},Ws,bn,bn,Ms("col","th")),unmakeRowHeader:ho(function(b,D,L,H){var X=Rl(b,D.row(),L,H.replaceOrInit);return ft(X,D.row(),D.column())},Ws,bn,bn,Ms(null,"td")),mergeCells:ho(function(b,D,L,H){var X=D.cells();j(X);var J=function(b,D,L,H){if(0===b.length)return b;for(var X=D.startRow();X<=D.finishRow();X++)for(var J=D.startCol();J<=D.finishCol();J++)si_mutateCell(b[X],J,cr(H(),!1));return b}(b,D.bounds(),0,se(X[0]));return K(J,Zt.from(X[0]))},function(b,D){return D.mergable()},bn,bn,yd),unmergeCells:ho(function(b,D,L,H){var X=Rn(D,function(J,lt){return Gs(J,lt,L,H.combine(lt))},b);return K(X,Zt.from(D[0]))},function(b,D){return D.unmergable()},Nt,bn,yd),pasteCells:ho(function(b,D,L,H){var X,J,lt,pt,Ct=(X=D.clipboard(),J=D.generators(),lt=fs(X),pt=ji_generate(lt),is(pt,J,!0));return function(b,D,L,H,X){return function(b,D,L){if(b.row()>=D.length||b.column()>si_cellLength(D[0]))return js.error("invalid start address out of table bounds, row: "+b.row()+", column: "+b.column());var H=D.slice(b.row()),X=H[0].cells().slice(b.column()),J=si_cellLength(L[0]);return js.value({rowDelta:se(H.length-L.length),colDelta:se(X.length-J)})}(b,D,L).map(function(J){var lt=rs(D,J,H);return function(pt,Ct,Wt,Qt,ve){for(var Se,me,ae,tn,Sn,jn=pt.row(),vi=pt.column(),ti=jn+Wt.length,On=vi+si_cellLength(Wt[0]),Di=jn;Di<ti;Di++)for(var Ni=vi;Ni<On;Ni++){Sn=tn=void 0,tn=on(ve,si_getCell((Se=Ct)[me=Di],ae=Ni).element()),Sn=Se[me],1<Se.length&&1<si_cellLength(Sn)&&(0<ae&&tn(si_getCellElement(Sn,ae-1))||ae<Sn.cells().length-1&&tn(si_getCellElement(Sn,ae+1))||0<me&&tn(si_getCellElement(Se[me-1],ae))||me<Se.length-1&&tn(si_getCellElement(Se[me+1],ae)))&&Gs(Ct,si_getCellElement(Ct[Di],Ni),ve,Qt.cell);var io=si_getCellElement(Wt[Di-jn],Ni-vi),Ro=Qt.replace(io);si_mutateCell(Ct[Di],Ni,cr(Ro,!0))}return Ct}(b,lt,L,H,X)})}(fr(D.row(),D.column()),b,Ct,D.generators(),L).fold(function(){return K(b,Zt.some(D.element()))},function(Qt){var ve=st(Qt,D.row(),D.column());return K(Qt,ve)})},function(b,D){return wo_cell(D.element()).bind(function(L){return Hr(b,L).map(function(H){return hl(hl({},H),{generators:D.generators,clipboard:D.clipboard})})})},Nt,bn,No),pasteRowsBefore:ho(function(b,D,L,H){var X=b[D.cells[0].row()],J=D.cells[0].row(),lt=It(D.clipboard(),D.generators(),X),pt=jd(J,b,lt,D.generators(),L),Ct=st(pt,D.cells[0].row(),D.cells[0].column());return K(pt,Ct)},su,bn,bn,No),pasteRowsAfter:ho(function(b,D,L,H){var X=b[D.cells[0].row()],J=D.cells[D.cells.length-1].row()+D.cells[D.cells.length-1].rowspan(),lt=It(D.clipboard(),D.generators(),X),pt=jd(J,b,lt,D.generators(),L),Ct=st(pt,D.cells[0].row(),D.cells[0].column());return K(pt,Ct)},su,bn,bn,No)},ne=function(b){return De.fromDom(b.getBody())},de=function(b){return b.getBoundingClientRect().width},ye=function(b){return b.getBoundingClientRect().height},qe=function(b){return function(D){return he(D,ne(b))}},$e=function(b){return/^[0-9]+$/.test(b)&&(b+="px"),b},wn=function(b){var D=Fr(b,"td[data-mce-style],th[data-mce-style]");hr(b,"data-mce-style"),Mn(D,function(L){hr(L,"data-mce-style")})},rn={isRtl:se(!1)},$n={isRtl:se(!0)},un_directionAt=function(b){return"rtl"==("rtl"===wi(b,"direction")?"rtl":"ltr")?$n:rn},ni=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Kn={"border-collapse":"collapse",width:"100%"},oi={border:"1"},Tn=function(b){return b.getParam("table_cell_advtab",!0,"boolean")},qn=function(b){return b.getParam("table_row_advtab",!0,"boolean")},nr=function(b){return b.getParam("table_advtab",!0,"boolean")},rr=function(b){return b.getParam("table_style_by_css",!1,"boolean")},Kr=function(b){return b.getParam("table_cell_class_list",[],"array")},$o=function(b){return b.getParam("table_row_class_list",[],"array")},Jr=function(b){return b.getParam("table_class_list",[],"array")},na=function(b){return!1===b.getParam("table_responsive_width")},Sa=function(b,D){return b.fire("newrow",{node:D})},Ji=function(b,D){return b.fire("newcell",{node:D})},pl=function(b,D,L,H){b.fire("ObjectResizeStart",{target:D,width:L,height:H})},go=function(b,D,L,H){b.fire("ObjectResized",{target:D,width:L,height:H})},Tr=tinymce.util.Tools.resolve("tinymce.util.Tools"),sf=function(b,D,L){L&&b.formatter.apply("align"+L,{},D)},lf=function(b,D){Tr.each("left center right".split(" "),function(L){b.formatter.remove("align"+L,{},D)})},Zd=function(b,D,L){return function(X,J){for(var lt=0;lt<J.length;lt++){var pt=b.getStyle(J[lt],L);if(void 0===X&&(X=pt),X!==pt)return""}return X}(undefined,b.select("td,th",D))},ss=function(b,D){var L=b.dom,H=D.control.rootControl,X=H.toJSON(),J=L.parseStyle(X.style);J["border-style"]=X.borderStyle,J["border-color"]=X.borderColor,J["background-color"]=X.backgroundColor,J.width=X.width?$e(X.width):"",J.height=X.height?$e(X.height):"",H.find("#style").value(L.serializeStyle(L.parseStyle(L.serializeStyle(J))))},rg=function(b,D){var L=b.dom,H=D.control.rootControl,X=H.toJSON(),J=L.parseStyle(X.style);H.find("#borderStyle").value(J["border-style"]||""),H.find("#borderColor").value(J["border-color"]||""),H.find("#backgroundColor").value(J["background-color"]||""),H.find("#width").value(J.width||""),H.find("#height").value(J.height||"")},ha_createStyleForm=function(b){var D=function(){var L=b.getParam("color_picker_callback");if(L)return function(H){return L.call(b,function(X){H.control.value(X).fire("change")},H.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:on(ss,b)},items:[{label:"Style",name:"style",type:"textbox",onchange:on(rg,b)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:on(ss,b),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:D()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:D()}]}]}},ha_buildListItems=function(b,D,L){var H=function(X,J){return J=J||[],Tr.each(X,function(lt){var pt={text:lt.text||lt.title};lt.menu?pt.menu=H(lt.menu):(pt.value=lt.value,D&&D(pt)),J.push(pt)}),J};return H(b,L||[])},ha_updateStyleField=ss,ha_extractAdvancedStyles=function(b,D){var L=b.parseStyle(b.getAttrib(D,"style")),H={};return L["border-style"]&&(H.borderStyle=L["border-style"]),L["border-color"]&&(H.borderColor=L["border-color"]),L["background-color"]&&(H.backgroundColor=L["background-color"]),H.style=b.serializeStyle(L),H},ha_syncAdvancedStyleFields=function(b,D){D.control.rootControl.find("#style")[0].getEl().isEqualNode(Rt.document.activeElement)?rg(b,D):ss(b,D)},kh=function(b,D,L){var H,X=b.dom;function J(pt,Ct,Wt){(1===D.length||Wt)&&X.setAttrib(pt,Ct,Wt)}function lt(pt,Ct,Wt){(1===D.length||Wt)&&X.setStyle(pt,Ct,Wt)}Tn(b)&&ha_syncAdvancedStyleFields(b,L),H=L.control.rootControl.toJSON(),b.undoManager.transact(function(){Tr.each(D,function(pt){var Ct,Wt;J(pt,"scope",H.scope),1===D.length?J(pt,"style",H.style):(Wt=H.style,delete(Ct=pt).dataset.mceStyle,Ct.style.cssText+=";"+Wt),J(pt,"class",H.class),lt(pt,"width",$e(H.width)),lt(pt,"height",$e(H.height)),H.type&&pt.nodeName.toLowerCase()!==H.type&&(pt=X.rename(pt,H.type)),1===D.length&&(lf(b,pt),function(b,D){Tr.each("top middle bottom".split(" "),function(L){b.formatter.remove("valign"+L,{},D)})}(b,pt)),H.align&&sf(b,pt,H.align),H.valign&&function(b,D,L){L&&b.formatter.apply("valign"+L,{},D)}(b,pt,H.valign)}),b.focus()})},og=function(b){var D,L,H,X=[];if(X=b.dom.select("td[data-mce-selected],th[data-mce-selected]"),D=b.dom.getParent(b.selection.getStart(),"td,th"),!X.length&&D&&X.push(D),D=D||X[0]){var J,lt,pt,Ct;1<X.length?L={width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:D.nodeName.toLowerCase()}:(pt=(J=b).dom,Ct={width:pt.getStyle(lt=D,"width")||pt.getAttrib(lt,"width"),height:pt.getStyle(lt,"height")||pt.getAttrib(lt,"height"),scope:pt.getAttrib(lt,"scope"),class:pt.getAttrib(lt,"class"),type:lt.nodeName.toLowerCase(),style:"",align:"",valign:""},Tr.each("left center right".split(" "),function(Qt){J.formatter.matchNode(lt,"align"+Qt)&&(Ct.align=Qt)}),Tr.each("top middle bottom".split(" "),function(Qt){J.formatter.matchNode(lt,"valign"+Qt)&&(Ct.valign=Qt)}),Tn(J)&&Tr.extend(Ct,ha_extractAdvancedStyles(pt,lt)),L=Ct),0<Kr(b).length&&(H={name:"class",type:"listbox",label:"Class",values:ha_buildListItems(Kr(b),function(Qt){Qt.value&&(Qt.textStyle=function(){return b.formatter.getCssText({block:"td",classes:[Qt.value]})})})});var Wt={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:on(ha_updateStyleField,b)},{label:"Height",name:"height",onchange:on(ha_updateStyleField,b)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},H]};Tn(b)?b.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:L,body:[{title:"General",type:"form",items:Wt},ha_createStyleForm(b)],onsubmit:on(kh,b,X)}):b.windowManager.open({title:"Cell properties",data:L,body:Wt,onsubmit:on(kh,b,X)})}};function cu(b,D,L,H){var X=b.dom;function J(pt,Ct,Wt){(1===D.length||Wt)&&X.setAttrib(pt,Ct,Wt)}qn(b)&&ha_syncAdvancedStyleFields(b,H);var lt=H.control.rootControl.toJSON();b.undoManager.transact(function(){Tr.each(D,function(pt){var Ct,Qt,ve,Se,me,ae,tn,Sn;J(pt,"scope",lt.scope),J(pt,"style",lt.style),J(pt,"class",lt.class),Ct=pt,Qt=$e(lt.height),(1===D.length||Qt)&&X.setStyle(Ct,"height",Qt),lt.type!==pt.parentNode.nodeName.toLowerCase()&&(me=lt.type,ae=(ve=b.dom).getParent(Se=pt,"table"),tn=Se.parentNode,(Sn=ve.select(me,ae)[0])||(Sn=ve.create(me),ae.firstChild?"CAPTION"===ae.firstChild.nodeName?ve.insertAfter(Sn,ae.firstChild):ae.insertBefore(Sn,ae.firstChild):ae.appendChild(Sn)),Sn.appendChild(Se),tn.hasChildNodes()||ve.remove(tn)),lt.align!==L.align&&(lf(b,pt),sf(b,pt,lt.align))}),b.focus()})}var Kd=function(b){var D,L,H,X,J,lt,pt,Ct,Wt,Qt,ve=b.dom,Se=[];D=ve.getParent(b.selection.getStart(),"table"),L=ve.getParent(b.selection.getStart(),"td,th"),Tr.each(D.rows,function(me){Tr.each(me.cells,function(ae){if(ve.getAttrib(ae,"data-mce-selected")||ae===L)return Se.push(me),!1})}),(H=Se[0])&&(1<Se.length?J={height:"",scope:"",style:"",class:"",align:"",type:H.parentNode.nodeName.toLowerCase()}:(Wt=(pt=b).dom,Qt={height:Wt.getStyle(Ct=H,"height")||Wt.getAttrib(Ct,"height"),scope:Wt.getAttrib(Ct,"scope"),class:Wt.getAttrib(Ct,"class"),align:"",style:"",type:Ct.parentNode.nodeName.toLowerCase()},Tr.each("left center right".split(" "),function(me){pt.formatter.matchNode(Ct,"align"+me)&&(Qt.align=me)}),qn(pt)&&Tr.extend(Qt,ha_extractAdvancedStyles(Wt,Ct)),J=Qt),0<$o(b).length&&(X={name:"class",type:"listbox",label:"Class",values:ha_buildListItems($o(b),function(me){me.value&&(me.textStyle=function(){return b.formatter.getCssText({block:"tr",classes:[me.value]})})})}),lt={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},X]},qn(b)?b.windowManager.open({title:"Row properties",data:J,bodyType:"tabpanel",body:[{title:"General",type:"form",items:lt},ha_createStyleForm(b)],onsubmit:on(cu,b,Se,J)}):b.windowManager.open({title:"Row properties",data:J,body:lt,onsubmit:on(cu,b,Se,J)}))},ap=tinymce.util.Tools.resolve("tinymce.Env"),Mo={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ag=function(b,D){b.selection.select(D.dom(),!0),b.selection.collapse(!0)},Ye=function(b,D,L){var H,X,J=b.getParam("table_default_styles",Kn,"object"),pt=function(b,D,L,H,X){void 0===X&&(X=Mo);var J=De.fromTag("table");Mi(J,X.styles),Fi(J,X.attributes);var lt=De.fromTag("tbody");ri(J,lt);for(var pt=[],Ct=0;Ct<b;Ct++){for(var Wt=De.fromTag("tr"),Qt=0;Qt<D;Qt++){var ve=De.fromTag(Ct<0||Qt<0?"th":"td");Qt<0&&sn(ve,"scope","row"),Ct<0&&sn(ve,"scope","col"),ri(ve,De.fromTag("br")),X.percentages&&yr(ve,"width",100/D+"%"),ri(Wt,ve)}pt.push(Wt)}return bo(lt,pt),J}(L,D,0,0,{styles:J,attributes:(X=b,X.getParam("table_default_attributes",oi,"object")),percentages:(H=J.width,Dn(H)&&-1!==H.indexOf("%")&&!na(b))});sn(pt,"data-mce-id","__mce");var Ct,Wt,Qt,ve=(Ct=pt,Wt=De.fromTag("div"),Qt=De.fromDom(Ct.dom().cloneNode(!0)),ri(Wt,Qt),Wt.dom().innerHTML);return b.insertContent(ve),Xl(ne(b),'table[data-mce-id="__mce"]').map(function(Se){var me,ae;return na(b)&&yr(Se,"width",wi(Se,"width")),hr(Se,"data-mce-id"),me=b,Mn(Fr(Se,"tr"),function(tn){Sa(me,tn.dom()),Mn(Fr(tn,"th,td"),function(Sn){Ji(me,Sn.dom())})}),ae=b,Xl(Se,"td,th").each(on(ag,ae)),Se.dom()}).getOr(null)};function ia(b,D,L,H){if("TD"===D.tagName||"TH"===D.tagName)b.setStyle(D,L,H);else if(D.children)for(var X=0;X<D.children.length;X++)ia(b,D.children[X],L,H)}var Fu,sg=function(b,D,L){var H,X,J=b.dom;nr(b)&&ha_syncAdvancedStyleFields(b,L),!1===(X=L.control.rootControl.toJSON()).class&&delete X.class,b.undoManager.transact(function(){D||(D=Ye(b,X.cols||1,X.rows||1)),function(lt,pt,Ct){var Wt,Qt=lt.dom,ve={},Se={};if(ve.class=Ct.class,Se.height=$e(Ct.height),Qt.getAttrib(pt,"width")&&!rr(lt)?ve.width=(Wt=Ct.width)?Wt.replace(/px$/,""):"":Se.width=$e(Ct.width),rr(lt)?(Se["border-width"]=$e(Ct.border),Se["border-spacing"]=$e(Ct.cellspacing),Tr.extend(ve,{"data-mce-border-color":Ct.borderColor,"data-mce-cell-padding":Ct.cellpadding,"data-mce-border":Ct.border})):Tr.extend(ve,{border:Ct.border,cellpadding:Ct.cellpadding,cellspacing:Ct.cellspacing}),rr(lt)&&pt.children)for(var me=0;me<pt.children.length;me++)ia(Qt,pt.children[me],{"border-width":$e(Ct.border),"border-color":Ct.borderColor,padding:$e(Ct.cellpadding)});Ct.style?Tr.extend(Se,Qt.parseStyle(Ct.style)):Se=Tr.extend({},Qt.parseStyle(Qt.getAttrib(pt,"style")),Se),ve.style=Qt.serializeStyle(Se),Qt.setAttribs(pt,ve)}(b,D,X),(H=J.select("caption",D)[0])&&!X.caption&&J.remove(H),!H&&X.caption&&((H=J.create("caption")).innerHTML=ap.ie?"\xa0":'<br data-mce-bogus="1"/>',D.insertBefore(H,D.firstChild)),lf(b,D),X.align&&sf(b,D,X.align),b.focus(),b.addVisual()})},uf=function(b,D){var L,H,X,J,lt,pt,Ct,Wt,Qt,ve,me={};!0===D?(L=b.dom.getParent(b.selection.getStart(),"table"))&&(Wt=(pt=b).dom,Qt={width:Wt.getStyle(Ct=L,"width")||Wt.getAttrib(Ct,"width"),height:Wt.getStyle(Ct,"height")||Wt.getAttrib(Ct,"height"),cellspacing:Wt.getStyle(Ct,"border-spacing")||Wt.getAttrib(Ct,"cellspacing"),cellpadding:Wt.getAttrib(Ct,"data-mce-cell-padding")||Wt.getAttrib(Ct,"cellpadding")||Zd(pt.dom,Ct,"padding"),border:Wt.getAttrib(Ct,"data-mce-border")||Wt.getAttrib(Ct,"border")||Zd(pt.dom,Ct,"border"),borderColor:Wt.getAttrib(Ct,"data-mce-border-color"),caption:!!Wt.select("caption",Ct)[0],class:Wt.getAttrib(Ct,"class")},Tr.each("left center right".split(" "),function(ae){pt.formatter.matchNode(Ct,"align"+ae)&&(Qt.align=ae)}),nr(pt)&&Tr.extend(Qt,ha_extractAdvancedStyles(Wt,Ct)),me=Qt):(H={label:"Cols",name:"cols"},X={label:"Rows",name:"rows"}),0<Jr(b).length&&(me.class&&(me.class=me.class.replace(/\s*mce\-item\-table\s*/g,"")),J={name:"class",type:"listbox",label:"Class",values:ha_buildListItems(Jr(b),function(ae){ae.value&&(ae.textStyle=function(){return b.formatter.getCssText({block:"table",classes:[ae.value]})})})}),lt={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(ve=b,ve.getParam("table_appearance_options",!0,"boolean")?[H,X,{label:"Width",name:"width",onchange:on(ha_updateStyleField,b)},{label:"Height",name:"height",onchange:on(ha_updateStyleField,b)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[H,X,{label:"Width",name:"width",onchange:on(ha_updateStyleField,b)},{label:"Height",name:"height",onchange:on(ha_updateStyleField,b)}])},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},J]},nr(b)?b.windowManager.open({title:"Table properties",data:me,bodyType:"tabpanel",body:[{title:"General",type:"form",items:lt},ha_createStyleForm(b)],onsubmit:on(sg,b,L)}):b.windowManager.open({title:"Table properties",data:me,body:lt,onsubmit:on(sg,b,L)})},lg=Tr.each,zl=function(b){var D=Zt.from(b.dom().documentElement).map(De.fromDom).getOr(b);return{parent:se(D),view:se(b),origin:se(Yo(0,0))}},ml=function(b){var D=Ke.apply(null,b),L=[];return{bind:function(H){if(void 0===H)throw new Error("Event bind error: undefined handler");L.push(H)},unbind:function(H){L=gr(L,function(X){return X!==H})},trigger:function(){for(var H=[],X=0;X<arguments.length;X++)H[X]=arguments[X];var J=D.apply(null,H);Mn(L,function(lt){lt(J)})}}},Wc_create=function(b){return{registry:pr(b,function(D){return{bind:D.bind,unbind:D.unbind}}),trigger:pr(b,function(D){return D.trigger})}},lp=function(b,D,L,H){b.dom().removeEventListener(D,L,H)},up=se(!0),xd=function(b,D,L){return function(b,D,L,H){return X=b,J=D,pt=function(b,D){return function(L){if(b(L)){var X,J,lt,pt,Ct,Wt,Qt=De.fromDom(L.target),ve=function(){L.stopPropagation()},Se=function(){L.preventDefault()},me=Oe(Se,ve),ae=(X=L.clientX,J=L.clientY,lt=ve,pt=Se,Ct=me,Wt=L,{target:se(Qt),x:se(X),y:se(J),stop:lt,prevent:pt,kill:Ct,raw:se(Wt)});D(ae)}}}(L,H),X.dom().addEventListener(J,pt,!1),{unbind:on(lp,X,J,pt,!1)};var X,J,pt}(b,D,up,L)},cf=Object.prototype.hasOwnProperty,df=(Fu=function(b,D){return D},function(){for(var b=new Array(arguments.length),D=0;D<b.length;D++)b[D]=arguments[D];if(0===b.length)throw new Error("Can't merge zero objects");for(var L={},H=0;H<b.length;H++){var X=b[H];for(var J in X)cf.call(X,J)&&(L[J]=Fu(0,X[J]))}return L}),Sm={resolve:ci("ephox-dragster").resolve},w0=Vc(["compare","extract","mutate","sink"]),S0=Vc(["element","start","stop","destroy"]),hf=Vc(["forceDrop","drop","move","delayDrop"]),Cm=w0({compare:function(b,D){return Yo(D.left()-b.left(),D.top()-b.top())},extract:function(b){return Zt.some(Yo(b.x(),b.y()))},sink:function(b,D){var L,H,X,J=(L=D,H=df({layerClass:Sm.resolve("blocker")},L),X=De.fromTag("div"),sn(X,"role","presentation"),Mi(X,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Tt(X,Sm.resolve("blocker")),Tt(X,H.layerClass),{element:function(){return X},destroy:function(){Xr(X)}}),lt=xd(J.element(),"mousedown",b.forceDrop),pt=xd(J.element(),"mouseup",b.drop),Ct=xd(J.element(),"mousemove",b.move),Wt=xd(J.element(),"mouseout",b.delayDrop);return S0({element:J.element,start:function(Qt){ri(Qt,J.element())},stop:function(){Xr(J.element())},destroy:function(){J.destroy(),pt.unbind(),Ct.unbind(),Wt.unbind(),lt.unbind()}})},mutate:function(b,D){b.mutate(D.left(),D.top())}});var Mm=function(b,D){return void 0===D&&(D={}),function(b,D,L){var H,J,lt=!1,pt=Wc_create({start:ml([]),stop:ml([])}),Ct=function du(){var b={onEvent:bn,reset:bn},D=function Er(){var b=Zt.none(),D=Wc_create({move:ml(["info"])});return{onEvent:function(L,H){H.extract(L).each(function(X){var J,lt,pt;(J=H,lt=X,pt=b.map(function(Ct){return J.compare(Ct,lt)}),b=Zt.some(lt),pt).each(function(Ct){D.trigger.move(Ct)})})},reset:function(){b=Zt.none()},events:D.registry}}(),L=b;return{on:function(){L.reset(),L=D},off:function(){L.reset(),L=b},isOn:function(){return L===D},onEvent:function(H,X){L.onEvent(H,X)},events:D.events}}(),Wt=function(){Se.stop(),Ct.isOn()&&(Ct.off(),pt.trigger.stop())},Qt=(H=Wt,J=null,{cancel:function(){null!==J&&(Rt.clearTimeout(J),J=null)},throttle:function(){for(var me=[],ae=0;ae<arguments.length;ae++)me[ae]=arguments[ae];null!==J&&Rt.clearTimeout(J),J=Rt.setTimeout(function(){H.apply(null,me),J=null},200)}});Ct.events.move.bind(function(me){D.mutate(b,me.info())});var ve=function(me){return function(){for(var ae=[],tn=0;tn<arguments.length;tn++)ae[tn]=arguments[tn];lt&&me.apply(null,ae)}},Se=D.sink(hf({forceDrop:Wt,drop:ve(Wt),move:ve(function(me){Qt.cancel(),Ct.onEvent(me,D)}),delayDrop:ve(Qt.throttle)}),L);return{element:Se.element,go:function(me){Se.start(me),Ct.on(),pt.trigger.start()},on:function(){lt=!0},off:function(){lt=!1},destroy:function(){Se.destroy()},events:pt.registry}}(b,void 0!==D.mode?D.mode:Cm,D)},dp=function(b){return"true"===tr(b,"contenteditable")},Wo=ii.resolve("resizer-bar-dragging"),bd=function(b){var D,L,H=Zt.none(),X=Zt.none(),J=Zt.none(),lt=/(\d+(\.\d+)?)%/,pt=function(Ct){return"TABLE"===Ct.nodeName};return b.on("init",function(){var Ct,Wt=dl(un_directionAt),Qt=function(b,D){return b.inline?function(b,D){return{parent:se(D),view:se(b),origin:se(Yo(0,0))}}(ne(b),(L=De.fromTag("div"),Mi(L,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ri($i(),L),L)):zl(De.fromDom(b.getDoc()));var L}(b);if(J=Zt.some(Qt),("table"===(Ct=b.getParam("object_resizing",!0))||Ct)&&b.getParam("table_resize_bars",!0,"boolean")){var ve=function(b,D){var L=au.height,H=function(b,D,L){var H=function(){var b,D=Wc_create({drag:ml(["xDelta","yDelta","target"])}),L=Zt.none(),H={mutate:function(X,J){b.trigger.drag(X,J)},events:(b=Wc_create({drag:ml(["xDelta","yDelta"])})).registry};return H.events.drag.bind(function(X){L.each(function(J){D.trigger.drag(X.xDelta(),X.yDelta(),J)})}),{assign:function(X){L=Zt.some(X)},get:function(){return L},mutate:H.mutate,events:D.registry}}(),X=Mm(H,{}),J=Zt.none(),lt=function(ae,tn){return Zt.from(tr(ae,tn))};H.events.drag.bind(function(ae){lt(ae.target(),"data-row").each(function(tn){var Sn=_a.getInt(ae.target(),"top");yr(ae.target(),"top",Sn+ae.yDelta()+"px")}),lt(ae.target(),"data-column").each(function(tn){var Sn=_a.getInt(ae.target(),"left");yr(ae.target(),"left",Sn+ae.xDelta()+"px")})});var pt=function(ae,tn){return _a.getInt(ae,tn)-parseInt(tr(ae,"data-initial-"+tn),10)};X.events.stop.bind(function(){H.get().each(function(ae){J.each(function(tn){lt(ae,"data-row").each(function(Sn){var jn=pt(ae,"top");hr(ae,"data-initial-top"),me.trigger.adjustHeight(tn,jn,parseInt(Sn,10))}),lt(ae,"data-column").each(function(Sn){var jn=pt(ae,"left");hr(ae,"data-initial-left"),me.trigger.adjustWidth(tn,jn,parseInt(Sn,10))}),or(b,tn,L,D)})})});var Ct=function(ae,tn){me.trigger.startAdjust(),H.assign(ae),sn(ae,"data-initial-"+tn,parseInt(wi(ae,tn),10)),Tt(ae,Wo),yr(ae,"opacity","0.2"),X.go(b.parent())},Wt=xd(b.parent(),"mousedown",function(ae){(function(b){return Ut(b,An)})(ae.target())&&Ct(ae.target(),"top"),function(b){return Ut(b,Ti)}(ae.target())&&Ct(ae.target(),"left")}),Qt=function(ae){return he(ae,b.view())},Se=xd(b.view(),"mouseover",function(ae){(function(ae){return Ir(ae,"table",Qt).filter(function(tn){return(Sn=tn,jn=Qt,Ir(Sn,"[contenteditable]",jn)).exists(dp);var Sn,jn})})(ae.target()).fold(function(){Wi(ae.target())&&Or(b)},function(tn){J=Zt.some(tn),or(b,tn,L,D)})}),me=Wc_create({adjustHeight:ml(["table","delta","row"]),adjustWidth:ml(["table","delta","column"]),startAdjust:ml([])});return{destroy:function(){Wt.unbind(),Se.unbind(),X.destroy(),Or(b)},refresh:function(ae){or(b,ae,L,D)},on:X.on,off:X.off,hideBars:on(Wa,b),showBars:on(ta,b),events:me.registry}}(b,D,L),X=Wc_create({beforeResize:ml(["table"]),afterResize:ml(["table"]),startDrag:ml([])});return H.events.adjustHeight.bind(function(J){X.trigger.beforeResize(J.table());var lt=L.delta(J.delta(),J.table());(function(b,D,L,H){var X=Mh(b),J=Ll.getPixelHeights(X,H),lt=yn(J,function(Qt,ve){return L===ve?Math.max(D+Qt,_a.minHeight()):Qt}),pt=function(b,D){var L=ji_justCells(b);return yn(L,function(H){var X=Cs(H.row(),H.row()+H.rowspan(),D);return{element:H.element,height:se(X),rowspan:H.rowspan}})}(X,lt),Ct=function(b,D){return yn(b.all(),function(L,H){return{element:L.element,height:se(D[H])}})}(X,lt);Mn(Ct,function(Qt){Bo.setHeight(Qt.element(),Qt.height())}),Mn(pt,function(Qt){Bo.setHeight(Qt.element(),Qt.height())});var Wt=Rn(lt,function(Qt,ve){return Qt+ve},0);Bo.setHeight(b,Wt)})(J.table(),lt,J.row(),L),X.trigger.afterResize(J.table())}),H.events.startAdjust.bind(function(J){X.trigger.startDrag()}),H.events.adjustWidth.bind(function(J){X.trigger.beforeResize(J.table());var lt=D.delta(J.delta(),J.table());(function(b,D,L,H){var X=Hc(b),J=X.getCellDelta(D),lt=Mh(b),pt=X.getWidths(lt,H,X),Ct=function(b,D,L,H){var X,J,lt=b.slice(0),pt=(J=D,0===(X=b).length?Fo.none():1===X.length?Fo.only(0):0===J?Fo.left(0,1):J===X.length-1?Fo.right(J-1,J):0<J&&J<X.length-1?Fo.middle(J-1,J,J+1):Fo.none()),Ct=function(Se){return yn(Se,se(0))},Wt=se(Ct(lt)),Qt=function(Se,me){if(0<=L){var ae=Math.max(H.minCellWidth(),lt[me]-L);return Ct(lt.slice(0,Se)).concat([L,ae-lt[me]]).concat(Ct(lt.slice(me+1)))}var tn=Math.max(H.minCellWidth(),lt[Se]+L),Sn=lt[Se]-tn;return Ct(lt.slice(0,Se)).concat([tn-lt[Se],Sn]).concat(Ct(lt.slice(me+1)))};return pt.fold(Wt,function(Se){return H.singleColumnWidth(lt[Se],L)},Qt,function(Se,me,ae){return Qt(me,ae)},function(Se,me){if(0<=L)return Ct(lt.slice(0,me)).concat([L]);var ae=Math.max(H.minCellWidth(),lt[me]+L);return Ct(lt.slice(0,me)).concat([ae-lt[me]])})}(pt,L,J,X),Wt=yn(Ct,function(ve,Se){return ve+pt[Se]}),Qt=Ho(lt,Wt);Mn(Qt,function(ve){X.setElementWidth(ve.element(),ve.width())}),L===lt.grid().columns()-1&&X.setTableWidth(b,Wt,J)})(J.table(),lt,J.column(),D),X.trigger.afterResize(J.table())}),{on:H.on,off:H.off,hideBars:H.hideBars,showBars:H.showBars,destroy:H.destroy,events:X.registry}}(Qt,Wt);ve.on(),ve.events.startDrag.bind(function(Se){H=Zt.some(b.selection.getRng())}),ve.events.beforeResize.bind(function(Se){var me=Se.table().dom();pl(b,me,de(me),ye(me))}),ve.events.afterResize.bind(function(Se){var me=Se.table(),ae=me.dom();wn(me),H.each(function(tn){b.selection.setRng(tn),b.focus()}),go(b,ae,de(ae),ye(ae)),b.undoManager.add()}),X=Zt.some(ve)}}),b.on("ObjectResizeStart",function(Ct){var Wt,Qt=Ct.target;pt(Qt)&&(D=Ct.width,L=b.dom.getStyle(Wt=Qt,"width")||b.dom.getAttrib(Wt,"width"))}),b.on("ObjectResized",function(Ct){var Wt=Ct.target;if(pt(Wt)){var Qt=Wt;if(lt.test(L)){var ve=parseFloat(lt.exec(L)[1]);b.dom.setStyle(Qt,"width",Ct.width*ve/D+"%")}else{var me=[];Tr.each(Qt.rows,function(ae){Tr.each(ae.cells,function(tn){var Sn=b.dom.getStyle(tn,"width",!0);me.push({cell:tn,width:Sn})})}),Tr.each(me,function(ae){b.dom.setStyle(ae.cell,"width",ae.width),b.dom.setAttrib(ae.cell,"width",null)})}}}),{lazyResize:function(){return X},lazyWire:function(){return J.getOr(zl(De.fromDom(b.getBody())))},destroy:function(){X.each(function(Ct){Ct.destroy()}),J.each(function(Ct){!function(b,D){b.inline&&Xr(D.parent())}(b,Ct)})}}},ff=sl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Jd=hl(hl({},ff),{none:function(b){return void 0===b&&(b=void 0),ff.none(b)}}),Xi=function(b,D){return wo_table(b,D).bind(function(L){var H=wo_cells(L);return Ui(H,function(X){return he(b,X)}).map(function(X){return{index:se(X),all:se(H)}})})},fa={create:Ke("start","soffset","finish","foffset")},th=sl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Na={before:th.before,on:th.on,after:th.after,cata:function(b,D,L,H){return b.fold(D,L,H)},getStart:function(b){return b.fold(Ve,Ve,Ve)}},gf=sl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vl={domRange:gf.domRange,relative:gf.relative,exact:gf.exact,exactFromRange:function(b){return gf.exact(b.start(),b.soffset(),b.finish(),b.foffset())},getWin:function(b){var L=b.match({domRange:function(H){return De.fromDom(H.startContainer)},relative:function(H,X){return Na.getStart(H)},exact:function(H,X,J,lt){return H}});return De.fromDom(L.dom().ownerDocument.defaultView)},range:fa.create},Dm=function(b,D,L){var H,X,J=b.document.createRange();return H=J,D.fold(function(lt){H.setStartBefore(lt.dom())},function(lt,pt){H.setStart(lt.dom(),pt)},function(lt){H.setStartAfter(lt.dom())}),X=J,L.fold(function(lt){X.setEndBefore(lt.dom())},function(lt,pt){X.setEnd(lt.dom(),pt)},function(lt){X.setEndAfter(lt.dom())}),J},yc=function(b,D,L,H,X){var J=b.document.createRange();return J.setStart(D.dom(),L),J.setEnd(H.dom(),X),J},yl=function(b){return{left:se(b.left),top:se(b.top),right:se(b.right),bottom:se(b.bottom),width:se(b.width),height:se(b.height)}},mf=sl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ph=function(b,D,L){return D(De.fromDom(L.startContainer),L.startOffset,De.fromDom(L.endContainer),L.endOffset)},jc=function(b,D){var L,H,X,J=(L=b,D.match({domRange:function(lt){return{ltr:se(lt),rtl:Zt.none}},relative:function(lt,pt){return{ltr:Qn(function(){return Dm(L,lt,pt)}),rtl:Qn(function(){return Zt.some(Dm(L,pt,lt))})}},exact:function(lt,pt,Ct,Wt){return{ltr:Qn(function(){return yc(L,lt,pt,Ct,Wt)}),rtl:Qn(function(){return Zt.some(yc(L,Ct,Wt,lt,pt))})}}}));return(X=(H=J).ltr()).collapsed?H.rtl().filter(function(lt){return!1===lt.collapsed}).map(function(lt){return mf.rtl(De.fromDom(lt.endContainer),lt.endOffset,De.fromDom(lt.startContainer),lt.startOffset)}).getOrThunk(function(){return Ph(0,mf.ltr,X)}):Ph(0,mf.ltr,X)},Hu=function(b,D){return jc(b,D).match({ltr:function(L,H,X,J){var lt=b.document.createRange();return lt.setStart(L.dom(),H),lt.setEnd(X.dom(),J),lt},rtl:function(L,H,X,J){var lt=b.document.createRange();return lt.setStart(X.dom(),J),lt.setEnd(L.dom(),H),lt}})},Eh=function(b,D,L){return D>=b.left&&D<=b.right&&L>=b.top&&L<=b.bottom},dr=function(b,D,L,H){return ui(D)?function(Qt,ve,Se,me){var ae=Qt.dom().createRange();ae.selectNode(ve.dom());var tn=ae.getClientRects();return Lu(tn,function(Sn){return Eh(Sn,Se,me)?Zt.some(Sn):Zt.none()}).map(function(Sn){return function(b,D,L,H,X){var J=function(Ct){var Wt=b.dom().createRange();return Wt.setStart(D.dom(),Ct),Wt.collapse(!0),Wt},lt=Ao(D).length,pt=function(Ct,Wt,Qt,ve,Se){if(0===Se)return 0;if(Wt===ve)return Se-1;for(var me=ve,ae=1;ae<Se;ae++){var tn=Ct(ae),Sn=Math.abs(Wt-tn.left);if(Qt<=tn.bottom){if(Qt<tn.top||me<Sn)return ae-1;me=Sn}}return 0}(function(Ct){return J(Ct).getBoundingClientRect()},L,H,X.right,lt);return J(pt)}(Qt,ve,Se,me,Sn)})}(b,D,L,H):(J=D,lt=L,pt=H,Ct=(X=b).dom().createRange(),Wt=en(J),Lu(Wt,function(Qt){return Ct.selectNode(Qt.dom()),Eh(Ct.getBoundingClientRect(),lt,pt)?dr(X,Qt,lt,pt):Zt.none()}));var X,J,lt,pt,Ct,Wt},Nh=function(b,D){return D-b.left<b.right-D},eh=function(b,D,L){var H=b.dom().createRange();return H.selectNode(D.dom()),H.collapse(L),H},fp=function(b,D,L){var H=b.dom().createRange();H.selectNode(D.dom());var X=H.getBoundingClientRect(),J=Nh(X,L);return(!0===J?Oo:ts)(D).map(function(lt){return eh(b,lt,J)})},vf=function(b,D,L){var H=D.dom().getBoundingClientRect(),X=Nh(H,L);return Zt.some(eh(b,D,X))},no=document.caretPositionFromPoint?function(b,D,L){return Zt.from(b.dom().caretPositionFromPoint(D,L)).bind(function(H){if(null===H.offsetNode)return Zt.none();var X=b.dom().createRange();return X.setStart(H.offsetNode,H.offset),X.collapse(),Zt.some(X)})}:document.caretRangeFromPoint?function(b,D,L){return Zt.from(b.dom().caretRangeFromPoint(D,L))}:function(b,D,L){return De.fromPoint(b,D,L).bind(function(H){var X=function(){return J=b,pt=D,(0===en(lt=H).length?vf:fp)(J,lt,pt);var J,lt,pt};return 0===en(H).length?X():function(b,D,L,H){var X=b.dom().createRange();X.selectNode(D.dom());var J=X.getBoundingClientRect();return function(lt,pt,Ct,Wt){var Qt=lt.dom().createRange();Qt.selectNode(pt.dom());var ve=Qt.getBoundingClientRect(),Se=Math.max(ve.left,Math.min(ve.right,Ct)),me=Math.max(ve.top,Math.min(ve.bottom,Wt));return dr(lt,pt,Se,me)}(b,D,Math.max(J.left,Math.min(J.right,L)),Math.max(J.top,Math.min(J.bottom,H)))}(b,H,D,L).orThunk(X)})},ln=function(b,D){var L=Xe(b);return"input"===L?Na.after(b):St(["br","img"],L)?0===D?Na.before(b):Na.after(b):Na.on(b,D)},ga=function(b,D){var L=b.fold(Na.before,ln,Na.after),H=D.fold(Na.before,ln,Na.after);return vl.relative(L,H)},Vu=function(b,D,L,H){var X=ln(b,D),J=ln(L,H);return vl.relative(X,J)},xf=function(b,D){Zt.from(b.getSelection()).each(function(L){L.removeAllRanges(),L.addRange(D)})},cg=function(b,D,L,H,X){var J=yc(b,D,L,H,X);xf(b,J)},Wu=function(b,D){return jc(b,D).match({ltr:function(L,H,X,J){cg(b,L,H,X,J)},rtl:function(L,H,X,J){var lt,Ct,Wt,Qt,ve=b.getSelection();if(ve.setBaseAndExtent)ve.setBaseAndExtent(L.dom(),H,X.dom(),J);else if(ve.extend)try{Ct=H,Wt=X,Qt=J,(lt=ve).collapse(L.dom(),Ct),lt.extend(Wt.dom(),Qt)}catch(Se){cg(b,X,J,L,H)}else cg(b,X,J,L,H)}})},dg=function(b){var D=De.fromDom(b.anchorNode),L=De.fromDom(b.focusNode);return function(b,D,L,H){var X,J,lt,pt,Ct,Wt=(J=D,lt=L,pt=H,(Ct=hn(X=b).dom().createRange()).setStart(X.dom(),J),Ct.setEnd(lt.dom(),pt),Ct),Qt=he(b,L)&&D===H;return Wt.collapsed&&!Qt}(D,b.anchorOffset,L,b.focusOffset)?Zt.some(fa.create(D,b.anchorOffset,L,b.focusOffset)):function(H){if(0<H.rangeCount){var X=H.getRangeAt(0),J=H.getRangeAt(H.rangeCount-1);return Zt.some(fa.create(De.fromDom(X.startContainer),X.startOffset,De.fromDom(J.endContainer),J.endOffset))}return Zt.none()}(b)},mp=tinymce.util.Tools.resolve("tinymce.util.VK"),hg=function(b,D,L,H){return Uc(b,D,function(b,D){return Xi(b,void 0).fold(function(){return Jd.none(b)},function(L){return L.index()+1<L.all().length?Jd.middle(b,L.all()[L.index()+1]):Jd.last(b)})}(L),H)},hu=function(b,D,L,H){return Uc(b,D,function(b,D){return Xi(b,void 0).fold(function(){return Jd.none()},function(L){return 0<=L.index()-1?Jd.middle(b,L.all()[L.index()-1]):Jd.first(b)})}(L),H)},vp=function(b,D){return function(b){var D=vl.getWin(b).dom(),L=function(X,J,lt,pt){return yc(D,X,J,lt,pt)},H=b.match({domRange:function(X){var J=De.fromDom(X.startContainer),lt=De.fromDom(X.endContainer);return Vu(J,X.startOffset,lt,X.endOffset)},relative:ga,exact:Vu});return jc(D,H).match({ltr:L,rtl:L})}(vl.exact(D,0,D,0))},Uc=function(b,D,L,H,X){return L.fold(Zt.none,Zt.none,function(J,lt){return Oo(lt).map(function(pt){return vp(0,pt)})},function(J){return wo_table(J,D).bind(function(lt){var pt=ua.noMenu(J);return b.undoManager.transact(function(){H.insertRowsAfter(lt,pt)}),function(b,D){var L;return(L=Fr(D,"tr"),0===L.length?Zt.none():Zt.some(L[L.length-1])).bind(function(X){return Xl(X,"td,th").map(function(J){return vp(0,J)})})}(0,lt)})})},D0=["table","li","dl"],Rh={create:Ke("selection","kill")},Im=function(b,D,L,H){return{start:se(Na.on(b,D)),finish:se(Na.on(L,H))}},Vr_convertToRange=function(b,D){var L=Hu(b,D);return fa.create(De.fromDom(L.startContainer),L.startOffset,De.fromDom(L.endContainer),L.endOffset)},Vr_makeSitus=Im,yp=function(b,D,L,H,X){return he(L,H)?Zt.none():uc(L,H,D).bind(function(J){var lt=J.boxes().getOr([]);return 0<lt.length?(X(b,lt,J.start(),J.finish()),Zt.some(Rh.create(Zt.some(Vr_makeSitus(L,0,L,ps(L))),!0))):Zt.none()})},xp_detect=yp,xp_update=function(b,D,L,H,X){return function(b,D,L,H,X){return(J=b,lt=X,Fe(J,function(pt){return Kt(pt,lt)})).bind(function(pt){return function(b,D,L){return wo_table(b).bind(function(H){return function(b,D,L,H){return ji_findItem(b,D,he).bind(function(X){var J=0<L?X.row()+X.rowspan()-1:X.row(),lt=0<H?X.column()+X.colspan()-1:X.column();return ji_getAt(b,J+L,lt+H).map(function(pt){return pt.element()})})}(Os(H),b,D,L)})}(pt,D,L).bind(function(Ct){return Qt=H,Fa(Wt=Ct,"table").bind(function(ve){return Xl(ve,Qt).bind(function(Se){return la(Se,Wt).bind(function(me){return me.boxes().map(function(ae){return{boxes:se(ae),start:se(me.start()),finish:se(me.finish())}})})})});var Wt,Qt})});var J,lt}(H,b,D,X.firstSelectedSelector(),X.lastSelectedSelector()).map(function(J){return X.clear(L),X.selectRange(L,J.boxes(),J.start(),J.finish()),J.boxes()})},mi=Ke("item","mode"),bp=function(b,D,L,H){return void 0===H&&(H=_d),b.property().parent(D).map(function(X){return mi(X,H)})},_d=function(b,D,L,H){return void 0===H&&(H=xc),L.sibling(b,D).map(function(X){return mi(X,H)})},xc=function(b,D,L,H){void 0===H&&(H=xc);var X=b.property().children(D);return L.first(X).map(function(J){return mi(J,H)})},_p=[{current:bp,next:_d,fallback:Zt.none()},{current:_d,next:xc,fallback:Zt.some(bp)},{current:xc,next:xc,fallback:Zt.some(_d)}],Lh=function(b,D,L,H,X){return void 0===X&&(X=_p),Fe(X,function(J){return J.current===L}).bind(function(J){return J.current(b,D,H,J.next).orThunk(function(){return J.fallback.bind(function(lt){return Lh(b,D,lt,H)})})})},Em=function(b,D,L,H,X,J){return Lh(b,D,H,X).bind(function(lt){return J(lt.item())?Zt.none():L(lt.item())?Zt.some(lt.item()):Em(b,lt.item(),L,lt.mode(),X,J)})},gg=function(b){return function(D){return 0===b.property().children(D).length}},Hl=function(b,D,L,H){return Em(b,D,L,_d,{sibling:function(b,D){return b.query().prevSibling(D)},first:function(b){return 0<b.length?Zt.some(b[b.length-1]):Zt.none()}},H)},wd=function(b,D,L,H){return Em(b,D,L,_d,{sibling:function(b,D){return b.query().nextSibling(D)},first:function(b){return 0<b.length?Zt.some(b[0]):Zt.none()}},H)},ih=sc(),Sd=function(b,D){return H=D,Hl(L=ih,b,gg(L),H);var L,H},xi=function(b,D){return H=D,wd(L=ih,b,gg(L),H);var L,H},fu=Ke("element","offset"),Gu=(Ke("element","deltaOffset"),Ke("element","start","finish"),Ke("begin","end"),Ke("element","text"),sl([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),Oh=function(b){return Ir(b,"tr")},Bh=hl(hl({},Gu),{verify:function(b,D,L,H,X,J,lt){return Ir(H,"td,th",lt).bind(function(pt){return Ir(D,"td,th",lt).map(function(Ct){return he(pt,Ct)?he(H,pt)&&ps(pt)===X?J(Ct):Gu.none("in same cell"):lc_sharedOne(Oh,[pt,Ct]).fold(function(){return ve=pt,Se=(Wt=b).getRect(Ct),(me=Wt.getRect(ve)).right>Se.left&&me.left<Se.right?Gu.success():J(Ct);var Wt,ve,Se,me},function(Wt){return J(Ct)})})}).getOr(Gu.none("default"))},cata:function(b,D,L,H,X){return b.fold(D,L,H,X)}}),wp=(Ke("ancestor","descendants","element","index"),Ke("parent","children","element","index")),mg=function(b){return"br"===Xe(b)},Sp=function(b,D,L){return D(b,L).bind(function(H){return ui(H)&&0===Ao(H).trim().length?Sp(H,D,L):Zt.some(H)})},bc=Mr(["left","top","right","bottom"],[]),xl={nu:bc,moveUp:function(b,D){return bc({left:b.left(),top:b.top()-D,right:b.right(),bottom:b.bottom()-D})},moveDown:function(b,D){return bc({left:b.left(),top:b.top()+D,right:b.right(),bottom:b.bottom()+D})},moveBottomTo:function(b,D){var L=b.bottom()-b.top();return bc({left:b.left(),top:D-L,right:b.right(),bottom:D})},moveTopTo:function(b,D){var L=b.bottom()-b.top();return bc({left:b.left(),top:D,right:b.right(),bottom:D+L})},getTop:function(b){return b.top()},getBottom:function(b){return b.bottom()},translate:function(b,D,L){return bc({left:b.left()+D,top:b.top()+L,right:b.right()+D,bottom:b.bottom()+L})},toString:function(b){return"("+b.left()+", "+b.top()+") -> ("+b.right()+", "+b.bottom()+")"}},Cd=function(b){return xl.nu({left:b.left,top:b.top,right:b.right,bottom:b.bottom})},rh=function(b,D){return Zt.some(b.getRect(D))},zh=function(b,D,L){return gn(D)?rh(b,D).map(Cd):ui(D)?(H=b,X=D,J=L,0<=J&&J<ps(X)?H.getRangedRect(X,J,X,J+1):0<J?H.getRangedRect(X,J-1,X,J):Zt.none()).map(Cd):Zt.none();var H,X,J},bf=function(b,D){return gn(D)?rh(b,D).map(Cd):ui(D)?b.getRangedRect(D,0,D,ps(D)).map(Cd):Zt.none()},bl=sl([{none:[]},{retry:["caret"]}]),Rm=function(b,D,L){return(H=D,X=A,Su(function(lt,pt){return pt(lt)},Ps,H,X,void 0)).fold(se(!1),function(lt){return bf(b,lt).exists(function(pt){return Wt=pt,(Ct=L).left()<Wt.left()||Math.abs(Wt.right()-Ct.left())<1||Ct.left()>Wt.right();var Ct,Wt})});var H,X},Cp={point:xl.getTop,adjuster:function(b,D,L,H,X){var J=xl.moveUp(X,5);return Math.abs(L.top()-H.top())<1||L.bottom()<X.top()?bl.retry(J):L.bottom()===X.top()?bl.retry(xl.moveUp(X,1)):Rm(b,D,X)?bl.retry(xl.translate(J,5,0)):bl.none()},move:xl.moveUp,gather:Sd},Lm={point:xl.getBottom,adjuster:function(b,D,L,H,X){var J=xl.moveDown(X,5);return Math.abs(L.bottom()-H.bottom())<1||L.top()>X.bottom()?bl.retry(J):L.top()===X.bottom()?bl.retry(xl.moveDown(X,1)):Rm(b,D,X)?bl.retry(xl.translate(J,5,0)):bl.none()},move:xl.moveDown,gather:xi},yg=function(b,D,L,H,X){return 0===X?Zt.some(H):(Ct=b,Wt=H.left(),Qt=D.point(H),Ct.elementFromPoint(Wt,Qt).filter(function(ve){return"table"===Xe(ve)}).isSome()?(pt=X-1,yg(b,J=D,L,J.move(H,5),pt)):b.situsFromPoint(H.left(),D.point(H)).bind(function(ve){return ve.start().fold(Zt.none,function(Se){return bf(b,Se).bind(function(me){return D.adjuster(b,Se,me,L,H).fold(Zt.none,function(ae){return yg(b,D,L,ae,X-1)})}).orThunk(function(){return Zt.some(H)})},Zt.none)}));var J,pt,Ct,Wt,Qt},Uu=function(b,D,L){var H,X,J,lt=b.move(L,5),pt=yg(D,b,L,lt,100).getOr(lt);return(H=b,X=pt,J=D,H.point(X)>J.getInnerHeight()?Zt.some(H.point(X)-J.getInnerHeight()):H.point(X)<0?Zt.some(-H.point(X)):Zt.none()).fold(function(){return D.situsFromPoint(pt.left(),b.point(pt))},function(Ct){return D.scrollBy(0,Ct),D.situsFromPoint(pt.left(),b.point(pt)-Ct)})},Ra={tryUp:on(Uu,Cp),tryDown:on(Uu,Lm),ieTryUp:function(b,D){return b.situsFromPoint(D.left(),D.top()-5)},ieTryDown:function(b,D){return b.situsFromPoint(D.left(),D.bottom()+5)},getJumpSize:se(5)},qu=yt.detect(),xg=function(b,D,L,H,X,J){return 0===J?Zt.none():A0(b,D,L,H,X).bind(function(lt){var pt=b.fromSitus(lt),Ct=Bh.verify(b,L,H,pt.finish(),pt.foffset(),X.failure,D);return Bh.cata(Ct,function(){return Zt.none()},function(){return Zt.some(lt)},function(Wt){return he(L,Wt)&&0===H?Om(b,L,H,xl.moveUp,X):xg(b,D,Wt,0,X,J-1)},function(Wt){return he(L,Wt)&&H===ps(Wt)?Om(b,L,H,xl.moveDown,X):xg(b,D,Wt,ps(Wt),X,J-1)})})},Om=function(b,D,L,H,X){return zh(b,D,L).bind(function(J){return Bm(b,X,H(J,Ra.getJumpSize()))})},Bm=function(b,D,L){return qu.browser.isChrome()||qu.browser.isSafari()||qu.browser.isFirefox()||qu.browser.isEdge()?D.otherRetry(b,L):qu.browser.isIE()?D.ieRetry(b,L):Zt.none()},A0=function(b,D,L,H,X){return zh(b,L,H).bind(function(J){return Bm(b,X,J)})},zm=function(b,D,L){return(H=b,X=D,J=L,H.getSelection().bind(function(lt){return function(b,D,L,H){var X,J,lt;return(mg(D)?(X=b,J=D,(lt=H).traverse(J).orThunk(function(){return Sp(J,lt.gather,X)}).map(lt.relative)):function(b,D,L,H){return(X=D,J=L,He(X,J).filter(mg).orThunk(function(){return He(X,J-1).filter(mg)})).bind(function(lt){return H.traverse(lt).fold(function(){return Sp(lt,H.gather,b).map(H.relative)},function(pt){return(Ct=pt,vn(Ct).bind(function(Wt){var Qt=en(Wt);return function(b,D){return Ui(b,on(he,D))}(Qt,Ct).map(function(ve){return wp(Wt,Qt,Ct,ve)})})).map(function(Wt){return Na.on(Wt.parent(),Wt.index())});var Ct})});var X,J}(b,D,L,H)).map(function(pt){return{start:se(pt),finish:se(pt)}})}(X,lt.finish(),lt.foffset(),J).fold(function(){return Zt.some(fu(lt.finish(),lt.foffset()))},function(pt){var Ct=H.fromSitus(pt);return function(b){return Bh.cata(b,function(D){return Zt.none()},function(){return Zt.none()},function(D){return Zt.some(fu(D,0))},function(D){return Zt.some(fu(D,ps(D)))})}(Bh.verify(H,lt.finish(),lt.foffset(),Ct.finish(),Ct.foffset(),J.failure,X))})})).bind(function(lt){return xg(b,D,lt.element(),lt.offset(),L,20).map(b.fromSitus)});var H,X,J},Fm=yt.detect(),Mp=function(b,D,L,H,X){return Ir(H,"td,th",D).bind(function(J){return Ir(J,"table",D).bind(function(lt){return function(b,D){return Ps(b,function(H){return vn(H).exists(function(X){return he(X,D)})},void 0).isSome()}(X,lt)?zm(b,D,L).bind(function(pt){return Ir(pt.finish(),"td,th",D).map(function(Ct){return{start:se(J),finish:se(Ct),range:se(pt)}})}):Zt.none()})})},oh=function(b,D,L,H,X,J){return Fm.browser.isIE()?Zt.none():J(H,D).orThunk(function(){return Mp(b,D,L,H,X).map(function(lt){var pt=lt.range();return Rh.create(Zt.some(Vr_makeSitus(pt.start(),pt.soffset(),pt.finish(),pt.foffset())),!0)})})},Tp=function(b,D,L,H,X,J,lt){return Mp(b,L,H,X,J).bind(function(pt){return xp_detect(D,L,pt.start(),pt.finish(),lt)})},Vm=function(b,D){return Ir(b,"tr",D).bind(function(L){return Ir(L,"table",D).bind(function(H){var X,J,lt,pt=Fr(H,"tr");return he(L,pt[0])?(X=H,J=function(Ct){return ts(Ct).isSome()},lt=D,Hl(ih,X,J,lt)).map(function(Ct){var Wt=ps(Ct);return Rh.create(Zt.some(Vr_makeSitus(Ct,Wt,Ct,Wt)),!0)}):Zt.none()})})},k0=function(b,D){return Ir(b,"tr",D).bind(function(L){return Ir(L,"table",D).bind(function(H){var X,J,lt,pt=Fr(H,"tr");return he(L,pt[pt.length-1])?(X=H,J=function(Ct){return Oo(Ct).isSome()},lt=D,wd(ih,X,J,lt)).map(function(Ct){return Rh.create(Zt.some(Vr_makeSitus(Ct,0,Ct,0)),!0)}):Zt.none()})})},ah=function(b,D){return Ir(b,"td,th",D)},Fh={down:{traverse:xn,gather:xi,relative:Na.before,otherRetry:Ra.tryDown,ieRetry:Ra.ieTryDown,failure:Bh.failedDown},up:{traverse:Le,gather:Sd,relative:Na.before,otherRetry:Ra.tryUp,ieRetry:Ra.ieTryUp,failure:Bh.failedUp}},Ca=function(b){return function(D){return D===b}},_f=Ca(38),Hh=Ca(40),Ys={ltr:{isBackward:Ca(37),isForward:Ca(39)},rtl:{isBackward:Ca(39),isForward:Ca(37)},isUp:_f,isDown:Hh,isNavigation:function(b){return 37<=b&&b<=40}},I0=function(b){return{left:b.left(),top:b.top(),right:b.right(),bottom:b.bottom(),width:b.width(),height:b.height()}},P0=(yt.detect().browser.isSafari(),function(b){return{elementFromPoint:function(D,L){return De.fromPoint(De.fromDom(b.document),D,L)},getRect:function(D){return D.dom().getBoundingClientRect()},getRangedRect:function(D,L,H,X){var J=vl.exact(D,L,H,X);return function(b,D){var L,H,X;return 0<(X=0<(H=(L=Hu(b,D)).getClientRects()).length?H[0]:L.getBoundingClientRect()).width||0<X.height?Zt.some(X).map(yl):Zt.none()}(b,J).map(I0)},getSelection:function(){return function(b){return(D=b,Zt.from(D.getSelection()).filter(function(L){return 0<L.rangeCount}).bind(dg)).map(function(L){return vl.exact(L.start(),L.soffset(),L.finish(),L.foffset())});var D}(b).map(function(D){return Vr_convertToRange(b,D)})},fromSitus:function(D){var L=vl.relative(D.start(),D.finish());return Vr_convertToRange(b,L)},situsFromPoint:function(D,L){return function(b,D,L){return X=D,J=L,lt=De.fromDom(b.document),no(lt,X,J).map(function(pt){return fa.create(De.fromDom(pt.startContainer),pt.startOffset,De.fromDom(pt.endContainer),pt.endOffset)});var X,J,lt}(b,D,L).map(function(H){return Im(H.start(),H.soffset(),H.finish(),H.foffset())})},clearSelection:function(){b.getSelection().removeAllRanges()},setSelection:function(D){var L,H,X,J,lt,pt;L=b,H=D.start(),X=D.soffset(),J=D.finish(),lt=D.foffset(),pt=Vu(H,X,J,lt),Wu(L,pt)},setRelativeSelection:function(D,L){var H,X;H=b,X=ga(D,L),Wu(H,X)},selectContents:function(D){!function(b,D){var L,H,X=(L=D,function(b,D){b.selectNodeContents(D.dom())}(H=b.document.createRange(),L),H);xf(b,X)}(b,D)},getInnerHeight:function(){return b.innerHeight},getScrollY:function(){var D,L,H,X;return(D=De.fromDom(b.document),L=void 0!==D?D.dom():Rt.document,H=L.body.scrollLeft||L.documentElement.scrollLeft,X=L.body.scrollTop||L.documentElement.scrollTop,Yo(H,X)).top()},scrollBy:function(D,L){var H,X,J;H=D,X=L,(void 0!==(J=De.fromDom(b.document))?J.dom():Rt.document).defaultView.scrollBy(H,X)}}}),sh=Ke("rows","cols"),Wm_keyboard=function(b,D,L,H){var X=P0(b),J=function(){return H.clear(D),Zt.none()};return{keydown:function(lt,pt,Ct,Wt,Qt,ve){var Se=lt.raw(),me=Se.which,ae=!0===Se.shiftKey;return es(D,H.selectedSelector()).fold(function(){return Ys.isDown(me)&&ae?on(Tp,X,D,L,Fh.down,Wt,pt,H.selectRange):Ys.isUp(me)&&ae?on(Tp,X,D,L,Fh.up,Wt,pt,H.selectRange):Ys.isDown(me)?on(oh,X,L,Fh.down,Wt,pt,k0):Ys.isUp(me)?on(oh,X,L,Fh.up,Wt,pt,Vm):Zt.none},function(tn){var Sn=function(jn){return function(){return Lu(jn,function(vi){return xp_update(vi.rows(),vi.cols(),D,tn,H)}).fold(function(){return Qo(D,H.firstSelectedSelector(),H.lastSelectedSelector()).map(function(vi){var ti=Ys.isDown(me)||ve.isForward(me)?Na.after:Na.before;return X.setRelativeSelection(Na.on(vi.first(),0),ti(vi.table())),H.clear(D),Rh.create(Zt.none(),!0)})},function(vi){return Zt.some(Rh.create(Zt.none(),!0))})}};return Ys.isDown(me)&&ae?Sn([sh(1,0)]):Ys.isUp(me)&&ae?Sn([sh(-1,0)]):ve.isBackward(me)&&ae?Sn([sh(0,-1),sh(-1,0)]):ve.isForward(me)&&ae?Sn([sh(0,1),sh(1,0)]):Ys.isNavigation(me)&&!1===ae?J:Zt.none})()},keyup:function(lt,pt,Ct,Wt,Qt){return es(D,H.selectedSelector()).fold(function(){var ve=lt.raw(),Se=ve.which;return!0===ve.shiftKey==0?Zt.none():Ys.isNavigation(Se)?function(b,D,L,H,X,J,lt){return he(L,X)&&H===J?Zt.none():Ir(L,"td,th",D).bind(function(pt){return Ir(X,"td,th",D).bind(function(Ct){return yp(b,D,pt,Ct,lt)})})}(D,L,pt,Ct,Wt,Qt,H.selectRange):Zt.none()},Zt.none)}}},Dp=function(b){return!1===Ut(De.fromDom(b.target),"ephox-snooker-resizer-bar")},Xs=Tr.each;pi.add("table",function(b){var D,L=bd(b),H=function jm(b,D){var L=Mr(["mousedown","mouseover","mouseup","keyup","keydown"],[]),H=Zt.none(),X=function(b){var D=function(X){hr(X,b.selected()),hr(X,b.firstSelected()),hr(X,b.lastSelected())},L=function(X){sn(X,b.selected(),"1")},H=function(X){var J=Fr(X,b.selectedSelector());Mn(J,D)};return{clear:H,selectRange:function(X,J,lt,pt){H(X),Mn(J,L),sn(lt,b.firstSelected(),"1"),sn(pt,b.lastSelected(),"1")},selectedSelector:b.selectedSelector,firstSelectedSelector:b.firstSelectedSelector,lastSelectedSelector:b.lastSelectedSelector}}(zs);return b.on("init",function(J){var lt=b.getWin(),pt=ne(b),Ct=qe(b),Wt=function(b,D,L,H){var X,J,lt,pt,Ct,Wt,Qt=P0(b),ve=(X=Qt,J=D,lt=L,pt=H,Ct=Zt.none(),Wt=function(){Ct=Zt.none()},{mousedown:function(Se){pt.clear(J),Ct=ah(Se.target(),lt)},mouseover:function(Se){Ct.each(function(me){pt.clear(J),ah(Se.target(),lt).each(function(ae){uc(me,ae,lt).each(function(tn){var Sn=tn.boxes().getOr([]);(1<Sn.length||1===Sn.length&&!he(me,ae))&&(pt.selectRange(J,Sn,tn.start(),tn.finish()),X.selectContents(ae))})})})},mouseup:function(Se){Ct.each(Wt)}});return{mousedown:ve.mousedown,mouseover:ve.mouseover,mouseup:ve.mouseup}}(lt,pt,Ct,X),Qt=Wm_keyboard(lt,pt,Ct,X),ve=function(On,Di){!0===On.raw().shiftKey&&(Di.kill()&&On.kill(),Di.selection().each(function(Ni){var io=vl.relative(Ni.start(),Ni.finish()),Ro=Hu(lt,io);b.selection.setRng(Ro)}))},Se=function(On){var Di=tn(On);if(Di.raw().shiftKey&&Ys.isNavigation(Di.raw().which)){var Ni=b.selection.getRng(),io=De.fromDom(Ni.startContainer),Ro=De.fromDom(Ni.endContainer);Qt.keyup(Di,io,Ni.startOffset,Ro,Ni.endOffset).each(function(qc){ve(Di,qc)})}},me=function(On){var Di=tn(On);D().each(function(Ua){Ua.hideBars()});var Ni=b.selection.getRng(),io=De.fromDom(b.selection.getStart()),Ro=De.fromDom(Ni.startContainer),qc=De.fromDom(Ni.endContainer),Zo=un_directionAt(io).isRtl()?Ys.rtl:Ys.ltr;Qt.keydown(Di,Ro,Ni.startOffset,qc,Ni.endOffset,Zo).each(function(Ua){ve(Di,Ua)}),D().each(function(Ua){Ua.showBars()})},ae=function(On){return On.hasOwnProperty("x")&&On.hasOwnProperty("y")},tn=function(On){var Di=De.fromDom(On.target),Ni=function(){On.stopPropagation()},io=function(){On.preventDefault()},Ro=Oe(io,Ni);return{target:se(Di),x:se(ae(On)?On.x:null),y:se(ae(On)?On.y:null),stop:Ni,prevent:io,kill:Ro,raw:se(On)}},Sn=function(On){return 0===On.button},jn=function(On){Sn(On)&&Dp(On)&&Wt.mousedown(tn(On))},vi=function(On){var Di;(void 0===(Di=On).buttons||ap.ie&&12<=ap.ie&&0===Di.buttons||0!=(1&Di.buttons))&&Dp(On)&&Wt.mouseover(tn(On))},ti=function(On){Sn(On)&&Dp(On)&&Wt.mouseup(tn(On))};b.on("mousedown",jn),b.on("mouseover",vi),b.on("mouseup",ti),b.on("keyup",Se),b.on("keydown",me),b.on("nodechange",function(){var On=b.selection,Di=De.fromDom(On.getStart()),Ni=De.fromDom(On.getEnd());lc_sharedOne(wo_table,[Di,Ni]).fold(function(){X.clear(pt)},bn)}),H=Zt.some(L({mousedown:jn,mouseover:vi,mouseup:ti,keyup:Se,keydown:me}))}),{clear:X.clear,destroy:function(){H.each(function(J){})}}}(b,L.lazyResize),X=function(b,D){var L,H=function(lt){return"table"===Xe(ne(lt))},X=(L=b.getParam("table_clone_elements"),Dn(L)?Zt.some(L.split(/[ ,]/)):Array.isArray(L)?Zt.some(L):Zt.none()),J=function(lt,pt,Ct,Wt){return function(Qt,ve){wn(Qt);var Se=Wt(),me=De.fromDom(b.getDoc()),ae=dl(un_directionAt),tn=ac(Ct,me,X);return pt(Qt)?lt(Se,Qt,ve,tn,ae).bind(function(Sn){return Mn(Sn.newRows(),function(jn){Sa(b,jn.dom())}),Mn(Sn.newCells(),function(jn){Ji(b,jn.dom())}),Sn.cursor().map(function(jn){var vi=b.dom.createRng();return vi.setStart(jn.dom(),0),vi.setEnd(jn.dom(),0),vi})}):Zt.none()}};return{deleteRow:J(Gt.eraseRows,function(lt){var pt=Eo(lt);return!1===H(b)||1<pt.rows()},bn,D),deleteColumn:J(Gt.eraseColumns,function(lt){var pt=Eo(lt);return!1===H(b)||1<pt.columns()},bn,D),insertRowsBefore:J(Gt.insertRowsBefore,zi,bn,D),insertRowsAfter:J(Gt.insertRowsAfter,zi,bn,D),insertColumnsBefore:J(Gt.insertColumnsBefore,zi,ya,D),insertColumnsAfter:J(Gt.insertColumnsAfter,zi,ya,D),mergeCells:J(Gt.mergeCells,zi,bn,D),unmergeCells:J(Gt.unmergeCells,zi,bn,D),pasteRowsBefore:J(Gt.pasteRowsBefore,zi,bn,D),pasteRowsAfter:J(Gt.pasteRowsAfter,zi,bn,D),pasteCells:J(Gt.pasteCells,zi,bn,D)}}(b,L.lazyWire),J=(D=b,{get:function(){return function(b,D){return es(b,D)}(ne(D),zs.selectedSelector()).fold(function(){return void 0===D.selection.getStart()?ns.none():ns.single(D.selection)},function(Ct){return ns.multiple(Ct)})}}),lt=uu(Zt.none());return function(b,D,L,H,X){var J=qe(b),lt=function(ae){return function(){return Zt.from(b.dom.getParent(b.selection.getStart(),ae)).map(De.fromDom)}},pt=lt("caption"),Ct=lt("th,td"),Wt=function(ae){return wo_table(ae,J)},Qt=function(ae){return{width:de(ae.dom()),height:de(ae.dom())}},ve=function(ae){Ct().each(function(tn){Wt(tn).each(function(Sn){var jn=ua.forMenu(H,Sn,tn),vi=Qt(Sn);ae(Sn,jn).each(function(ti){var On,Di,Ni,io;On=b,Di=vi,io=Qt(Ni=Sn),Di.width===io.width&&Di.height===io.height||(pl(On,Ni.dom(),Di.width,Di.height),go(On,Ni.dom(),io.width,io.height)),b.selection.setRng(ti),b.focus(),L.clear(Sn),wn(Sn)})})})},Se=function(ae){return Ct().bind(function(tn){return Wt(tn).bind(function(Sn){var jn=De.fromDom(b.getDoc());return function(b,D,L){var H=fs(b),X=ji_generate(H);return gc(X,D).map(function(J){var lt=is(X,L,!1).slice(J[0].row(),J[J.length-1].row()+J[J.length-1].rowspan());return function(b){return yn(b,function(D){var L=Zl(D.element());return Mn(D.cells(),function(H){var X=Kl(H.element());v(X,"colspan",H.colspan(),1),v(X,"rowspan",H.rowspan(),1),ri(L,X)}),L})}(Wd(lt,L))})}(Sn,ua.forMenu(H,Sn,tn),ac(bn,jn,Zt.none()))})})},me=function(ae){X.get().each(function(tn){var Sn=yn(tn,function(jn){return Kl(jn)});Ct().each(function(jn){Wt(jn).each(function(vi){var ti=De.fromDom(b.getDoc()),On=Nc(ti),Di=ua.pasteRows(H,vi,jn,Sn,On);ae(vi,Di).each(function(Ni){b.selection.setRng(Ni),b.focus(),L.clear(vi)})})})})};lg({mceTableSplitCells:function(){ve(D.unmergeCells)},mceTableMergeCells:function(){ve(D.mergeCells)},mceTableInsertRowBefore:function(){ve(D.insertRowsBefore)},mceTableInsertRowAfter:function(){ve(D.insertRowsAfter)},mceTableInsertColBefore:function(){ve(D.insertColumnsBefore)},mceTableInsertColAfter:function(){ve(D.insertColumnsAfter)},mceTableDeleteCol:function(){ve(D.deleteColumn)},mceTableDeleteRow:function(){ve(D.deleteRow)},mceTableCutRow:function(ae){X.set(Se()),ve(D.deleteRow)},mceTableCopyRow:function(ae){X.set(Se())},mceTablePasteRowBefore:function(ae){me(D.pasteRowsBefore)},mceTablePasteRowAfter:function(ae){me(D.pasteRowsAfter)},mceTableDelete:function(){Ct().orThunk(pt).each(function(ae){wo_table(ae,J).filter(Ci(J)).each(function(tn){var Sn=De.fromText("");li(tn,Sn),Xr(tn);var jn=b.dom.createRng();jn.setStart(Sn.dom(),0),jn.setEnd(Sn.dom(),0),b.selection.setRng(jn)})})}},function(ae,tn){b.addCommand(tn,ae)}),lg({mceInsertTable:on(uf,b),mceTableProps:on(uf,b,!0),mceTableRowProps:on(Kd,b),mceTableCellProps:on(og,b)},function(ae,tn){b.addCommand(tn,function(Sn,jn){ae(jn)})})}(b,X,H,J,lt),function(b,D,L,H){b.on("BeforeGetContent",function(X){!0===X.selection&&ns.cata(D.get(),bn,function(J){var lt;X.preventDefault(),(lt=J,wo_table(lt[0]).map(Kl).map(function(pt){return[Tu(pt,zs.attributeSelector())]})).each(function(pt){var Ct;X.content="text"===X.format?yn(pt,function(Wt){return Wt.dom().innerText}).join(""):(Ct=b,yn(pt,function(Wt){return Ct.selection.serializer.serialize(Wt.dom(),{})}).join(""))})},bn)}),b.on("BeforeSetContent",function(X){!0===X.selection&&!0===X.paste&&Zt.from(b.dom.getParent(b.selection.getStart(),"th,td")).each(function(J){var lt=De.fromDom(J);wo_table(lt).each(function(pt){var Ct,Qt,ve=gr((Ct=X.content,(Qt=Rt.document.createElement("div")).innerHTML=Ct,en(De.fromDom(Qt))),function(tn){return"meta"!==Xe(tn)});if(1===ve.length&&"table"===Xe(ve[0])){X.preventDefault();var Se=De.fromDom(b.getDoc()),me=Nc(Se),ae=ua.paste(lt,ve[0],me);L.pasteCells(pt,ae).each(function(tn){b.selection.setRng(tn),b.focus(),H.clear(pt)})}})})})}(b,J,X,H),function(b,D){var L=Zt.none(),H=[],X=[],J=[],lt=[],pt=function(ti){ti.disabled(!0)},Ct=function(ti){ti.disabled(!1)},Wt=function(){var ti=this;H.push(ti),L.fold(function(){pt(ti)},function(On){Ct(ti)})},Qt=function(){var ti=this;X.push(ti),L.fold(function(){pt(ti)},function(On){Ct(ti)})};b.on("init",function(){b.on("nodechange",function(ti){var On=Zt.from(b.dom.getParent(b.selection.getStart(),"th,td"));(L=On.bind(function(Di){var Ni=De.fromDom(Di);return wo_table(Ni).map(function(io){return ua.forMenu(D,io,Ni)})})).fold(function(){Mn(H,pt),Mn(X,pt),Mn(J,pt),Mn(lt,pt)},function(Di){Mn(H,Ct),Mn(X,Ct),Mn(J,function(Ni){Ni.disabled(Di.mergable().isNone())}),Mn(lt,function(Ni){Ni.disabled(Di.unmergable().isNone())})})})});var ve=function(ti,On,Di,Ni){var io,Ro,qc,Zo,Ua,lh=Ni.getEl().getElementsByTagName("table")[0],Yu=Ni.isRtl()||"tl-tr"===Ni.parent().rel;for(lh.nextSibling.innerHTML=On+1+" x "+(Di+1),Yu&&(On=9-On),Ro=0;Ro<10;Ro++)for(io=0;io<10;io++)ti.dom.toggleClass(Zo=lh.rows[Ro].childNodes[io].firstChild,"mce-active",Ua=(Yu?On<=io:io<=On)&&Ro<=Di),Ua&&(qc=Zo);return qc.parentNode},Se=!1===b.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:me("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(ti){ti.aria&&(this.parent().hideAll(),ti.stopImmediatePropagation(),b.execCommand("mceInsertTable"))},onshow:function(){ve(b,0,0,this.menu.items()[0])},onhide:function(){var ti=this.menu.items()[0].getEl().getElementsByTagName("a");b.dom.removeClass(ti,"mce-active"),b.dom.addClass(ti[0],"mce-active")},menu:[{type:"container",html:function(){var ti="";ti='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var On=0;On<10;On++){ti+="<tr>";for(var Di=0;Di<10;Di++)ti+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*On+Di)+'" href="#" data-mce-x="'+Di+'" data-mce-y="'+On+'"></a></td>';ti+="</tr>"}return(ti+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(ti){var On,Di,Ni=ti.target;"A"===Ni.tagName.toUpperCase()&&(On=parseInt(Ni.getAttribute("data-mce-x"),10),Di=parseInt(Ni.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(On=9-On),On===this.lastX&&Di===this.lastY||(ve(b,On,Di,ti.control),this.lastX=On,this.lastY=Di))},onclick:function(ti){var On=this;"A"===ti.target.tagName.toUpperCase()&&(ti.preventDefault(),ti.stopPropagation(),On.parent().cancel(),b.undoManager.transact(function(){Ye(b,On.lastX+1,On.lastY+1)}),b.addVisual())}}]};function me(ti){return function(){b.execCommand(ti)}}var ae={text:"Table properties",context:"table",onPostRender:Wt,onclick:me("mceTableProps")},tn={text:"Delete table",context:"table",onPostRender:Wt,cmd:"mceTableDelete"},Sn={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:me("mceTableInsertRowBefore"),onPostRender:Qt},{text:"Insert row after",onclick:me("mceTableInsertRowAfter"),onPostRender:Qt},{text:"Delete row",onclick:me("mceTableDeleteRow"),onPostRender:Qt},{text:"Row properties",onclick:me("mceTableRowProps"),onPostRender:Qt},{text:"-"},{text:"Cut row",onclick:me("mceTableCutRow"),onPostRender:Qt},{text:"Copy row",onclick:me("mceTableCopyRow"),onPostRender:Qt},{text:"Paste row before",onclick:me("mceTablePasteRowBefore"),onPostRender:Qt},{text:"Paste row after",onclick:me("mceTablePasteRowAfter"),onPostRender:Qt}]},jn={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:me("mceTableInsertColBefore"),onPostRender:Qt},{text:"Insert column after",onclick:me("mceTableInsertColAfter"),onPostRender:Qt},{text:"Delete column",onclick:me("mceTableDeleteCol"),onPostRender:Qt}]},vi={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:me("mceTableCellProps"),onPostRender:Qt},{text:"Merge cells",onclick:me("mceTableMergeCells"),onPostRender:function(){var ti=this;J.push(ti),L.fold(function(){pt(ti)},function(On){ti.disabled(On.mergable().isNone())})}},{text:"Split cell",onclick:me("mceTableSplitCells"),onPostRender:function(){var ti=this;lt.push(ti),L.fold(function(){pt(ti)},function(On){ti.disabled(On.unmergable().isNone())})}}]};b.addMenuItem("inserttable",Se),b.addMenuItem("tableprops",ae),b.addMenuItem("deletetable",tn),b.addMenuItem("row",Sn),b.addMenuItem("column",jn),b.addMenuItem("cell",vi)}(b,J),function(b){var D=[];function L(H){return function(){b.execCommand(H)}}Xs("inserttable tableprops deletetable | cell row column".split(" "),function(H){D.push("|"===H?{text:"-"}:b.menuItems[H])}),b.addButton("table",{type:"menubutton",title:"Table",menu:D}),b.addButton("tableprops",{title:"Table properties",onclick:L("mceTableProps"),icon:"table"}),b.addButton("tabledelete",{title:"Delete table",onclick:L("mceTableDelete")}),b.addButton("tablecellprops",{title:"Cell properties",onclick:L("mceTableCellProps")}),b.addButton("tablemergecells",{title:"Merge cells",onclick:L("mceTableMergeCells")}),b.addButton("tablesplitcells",{title:"Split cell",onclick:L("mceTableSplitCells")}),b.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:L("mceTableInsertRowBefore")}),b.addButton("tableinsertrowafter",{title:"Insert row after",onclick:L("mceTableInsertRowAfter")}),b.addButton("tabledeleterow",{title:"Delete row",onclick:L("mceTableDeleteRow")}),b.addButton("tablerowprops",{title:"Row properties",onclick:L("mceTableRowProps")}),b.addButton("tablecutrow",{title:"Cut row",onclick:L("mceTableCutRow")}),b.addButton("tablecopyrow",{title:"Copy row",onclick:L("mceTableCopyRow")}),b.addButton("tablepasterowbefore",{title:"Paste row before",onclick:L("mceTablePasteRowBefore")}),b.addButton("tablepasterowafter",{title:"Paste row after",onclick:L("mceTablePasteRowAfter")}),b.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:L("mceTableInsertColBefore")}),b.addButton("tableinsertcolafter",{title:"Insert column after",onclick:L("mceTableInsertColAfter")}),b.addButton("tabledeletecol",{title:"Delete column",onclick:L("mceTableDeleteCol")})}(b),function(b){var D,L=""===(D=b.getParam("table_toolbar",ni))||!1===D?[]:Dn(D)?D.split(/[ ,]/):Dr(D)?D:[];0<L.length&&b.addContextToolbar(function(H){return b.dom.is(H,"table")&&b.getBody().contains(H)},L.join(" "))}(b),b.on("PreInit",function(){b.serializer.addTempAttr(zs.firstSelected()),b.serializer.addTempAttr(zs.lastSelected())}),b.getParam("table_tab_navigation",!0,"boolean")&&b.on("keydown",function(pt){!function(b,D,L,H){if(b.keyCode===mp.TAB){var X=ne(D),J=function(Ct){var Wt=Xe(Ct);return he(Ct,X)||St(D0,Wt)},lt=D.selection.getRng();if(lt.collapsed){var pt=De.fromDom(lt.startContainer);wo_cell(pt,J).each(function(Ct){b.preventDefault(),(b.shiftKey?hu:hg)(D,J,Ct,L,H).each(function(Wt){D.selection.setRng(Wt)})})}}}(pt,b,X,L.lazyWire)}),b.on("remove",function(){L.destroy(),H.destroy()}),function(b,D){return{insertTable:function(L,H){return Ye(b,L,H)},setClipboardRows:function(L){return H=D,X=yn(L,De.fromDom),void H.set(Zt.from(X));var H,X},getClipboardRows:function(){return D.get().fold(function(){},function(L){return yn(L,function(H){return H.dom()})})}}}(b,lt)})}(window),function(Rt,pi){"object"==typeof exports&&"undefined"!=typeof module?pi(exports):"function"==typeof define&&define.amd?define(["exports"],pi):pi(Rt.echarts={})}(this,function(Rt){"use strict";var t,e,n,i,o,a,po,pi=2311,bn=function(){return pi++},Oe="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(e={},n=(t=navigator.userAgent).match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t),n&&(e.firefox=!0,e.version=n[1]),i&&(e.ie=!0,e.version=i[1]),o&&(e.edge=!0,e.version=o[1]),a&&(e.weChat=!0),{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version),domSupported:"undefined"!=typeof document}),se={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},Ve={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},on=Object.prototype.toString,Ue=Array.prototype,Bi=Ue.forEach,Nn=Ue.filter,Pi=Ue.slice,Ci=Ue.map,Gi=Ue.reduce,zi={};function Si(t,e){"createCanvas"===t&&(po=null),zi[t]=e}function fn(t){if(null==t||"object"!=typeof t)return t;var e=t,n=on.call(t);if("[object Array]"===n){if(!yi(t)){e=[];for(var i=0,o=t.length;i<o;i++)e[i]=fn(t[i])}}else if(Ve[n]){if(!yi(t)){var a=t.constructor;if(t.constructor.from)e=a.from(t);else for(e=new a(t.length),i=0,o=t.length;i<o;i++)e[i]=fn(t[i])}}else if(!se[n]&&!yi(t)&&!ao(t))for(var s in e={},t)t.hasOwnProperty(s)&&(e[s]=fn(t[s]));return e}function ei(t,e,n){if(!Ln(e)||!Ln(t))return n?fn(e):t;for(var i in e)if(e.hasOwnProperty(i)){var o=t[i],a=e[i];!Ln(a)||!Ln(o)||Fe(a)||Fe(o)||ao(a)||ao(o)||aa(a)||aa(o)||yi(a)||yi(o)?!n&&i in t||(t[i]=fn(e[i])):ei(o,a,n)}return t}function Zt(t,e){for(var n=t[0],i=1,o=t.length;i<o;i++)n=ei(n,t[i],e);return n}function En(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Dn(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function Dr(){return zi.createCanvas()}function Rr(){return po=po||Dr().getContext("2d")}function zn(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function ki(t,e){var n=t.prototype;function i(){}for(var o in i.prototype=e.prototype,t.prototype=new i,n)n.hasOwnProperty(o)&&(t.prototype[o]=n[o]);(t.prototype.constructor=t).superClass=e}function Fn(t,e,n){Dn(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)}function Lr(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function St(t,e,n){if(t&&e)if(t.forEach&&t.forEach===Bi)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function kt(t,e,n){if(t&&e){if(t.map&&t.map===Ci)return t.map(e,n);for(var i=[],o=0,a=t.length;o<a;o++)i.push(e.call(n,t[o],o,t));return i}}function yn(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===Gi)return t.reduce(e,n,i);for(var o=0,a=t.length;o<a;o++)n=e.call(i,n,t[o],o,t);return n}}function Mn(t,e,n){if(t&&e){if(t.filter&&t.filter===Nn)return t.filter(e,n);for(var i=[],o=0,a=t.length;o<a;o++)e.call(n,t[o],o,t)&&i.push(t[o]);return i}}function gr(t,e,n){if(t&&e)for(var i=0,o=t.length;i<o;i++)if(e.call(n,t[i],i,t))return t[i]}function Rn(t,e){var n=Pi.call(arguments,2);return function(){return t.apply(e,n.concat(Pi.call(arguments)))}}function kn(t){var e=Pi.call(arguments,1);return function(){return t.apply(this,e.concat(Pi.call(arguments)))}}function Fe(t){return"[object Array]"===on.call(t)}function Ui(t){return"function"==typeof t}function bi(t){return"[object String]"===on.call(t)}function Ln(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function aa(t){return!!se[on.call(t)]}function Br(t){return!!Ve[on.call(t)]}function ao(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function br(t){return t!=t}function pr(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function _i(t,e){return null!=t?t:e}function Ke(t,e,n){return null!=t?t:null!=e?e:n}function mo(){return Function.call.apply(Pi,arguments)}function Vn(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function Ei(t,e){if(!t)throw new Error(e)}function Zn(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}zi.createCanvas=function(){return document.createElement("canvas")};var Qi="__ec_primitive__";function Mr(t){t[Qi]=!0}function yi(t){return t[Qi]}function To(t){var e=Fe(t);this.data={};var n=this;function i(o,a){e?n.set(o,a):n.set(a,o)}t instanceof To?t.each(i):t&&St(t,i)}function pe(t){return new To(t)}function ee(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var o=t.length;for(i=0;i<e.length;i++)n[i+o]=e[i];return n}function _e(){}To.prototype={constructor:To,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=Rn(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var Qe=(Object.freeze||Object)({$override:Si,clone:fn,merge:ei,mergeAll:Zt,extend:En,defaults:Dn,createCanvas:Dr,getContext:Rr,indexOf:zn,inherits:ki,mixin:Fn,isArrayLike:Lr,each:St,map:kt,reduce:yn,filter:Mn,find:gr,bind:Rn,curry:kn,isArray:Fe,isFunction:Ui,isString:bi,isObject:Ln,isBuiltInObject:aa,isTypedArray:Br,isDom:ao,eqNaN:br,retrieve:pr,retrieve2:_i,retrieve3:Ke,slice:mo,normalizeCssArray:Vn,assert:Ei,trim:Zn,setAsPrimitive:Mr,isPrimitive:yi,createHashMap:pe,concatArray:ee,noop:_e}),cn="undefined"==typeof Float32Array?Array:Float32Array;function Xe(t,e){var n=new cn(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n}function jt(t,e){return t[0]=e[0],t[1]=e[1],t}function je(t){var e=new cn(2);return e[0]=t[0],e[1]=t[1],e}function nn(t,e,n){return t[0]=e,t[1]=n,t}function gn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ui(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function Jn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function sn(t){return Math.sqrt(tr(t))}function tr(t){return t[0]*t[0]+t[1]*t[1]}function hr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function mr(t,e){var n=sn(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function vr(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var lr=vr;function Qn(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var gi=Qn;function De(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function Wi(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o+n[4],t[1]=n[1]*i+n[3]*o+n[5],t}function $i(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function _r(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var qr=(Object.freeze||Object)({create:Xe,copy:jt,clone:je,set:nn,add:gn,scaleAndAdd:ui,sub:Jn,len:sn,length:sn,lenSquare:tr,lengthSquare:tr,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:hr,normalize:mr,distance:vr,dist:lr,distanceSquare:Qn,distSquare:gi,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:De,applyTransform:Wi,min:$i,max:_r});function yr(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function Mi(t,e){return{target:t,topTarget:e&&e.topTarget}}yr.prototype={constructor:yr,_dragStart:function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(Mi(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,e.drift(o,a,t),this.dispatchToElement(Mi(e,t),"drag",t.event);var s=this.findHover(n,i,e).target,u=this._dropTarget;e!==(this._dropTarget=s)&&(u&&s!==u&&this.dispatchToElement(Mi(u,t),"dragleave",t.event),s&&s!==u&&this.dispatchToElement(Mi(s,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(Mi(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(Mi(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var wi=Array.prototype.slice,Ai=function(t){this._$handlers={},this._$eventProcessor=t};function ir(t,e,n,i,o,a){var S,C,s=t._$handlers;if("function"==typeof n&&(o=i,i=n,n=null),!i||!e)return t;C=t._$eventProcessor,null!=(S=n)&&C&&C.normalizeQuery&&(S=C.normalizeQuery(S)),n=S,s[e]||(s[e]=[]);for(var u=0;u<s[e].length;u++)if(s[e][u].h===i)return t;var d={h:i,one:a,query:n,ctx:o||t,callAtLast:i.zrEventfulCallAtLast},g=s[e].length-1,p=s[e][g];return p&&p.callAtLast?s[e].splice(g,0,d):s[e].push(d),t}Ai.prototype={constructor:Ai,one:function(t,e,n,i){return ir(this,t,e,n,i,!0)},on:function(t,e,n,i){return ir(this,t,e,n,i,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==e&&i.push(n[t][o]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,o=i.length;3<o&&(i=wi.call(i,1));for(var a=e.length,s=0;s<a;){var u=e[s];if(n&&n.filter&&null!=u.query&&!n.filter(t,u.query))s++;else{switch(o){case 1:u.h.call(u.ctx);break;case 2:u.h.call(u.ctx,i[1]);break;case 3:u.h.call(u.ctx,i[1],i[2]);break;default:u.h.apply(u.ctx,i)}u.one?(e.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,o=i.length;4<o&&(i=wi.call(i,1,i.length-1));for(var a=i[i.length-1],s=e.length,u=0;u<s;){var d=e[u];if(n&&n.filter&&null!=d.query&&!n.filter(t,d.query))u++;else{switch(o){case 1:d.h.call(a);break;case 2:d.h.call(a,i[1]);break;case 3:d.h.call(a,i[1],i[2]);break;default:d.h.apply(a,i)}d.one?(e.splice(u,1),s--):u++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var pa=Math.log(2);function Ks(t,e,n,i,o,a){var s=i+"-"+o,u=t.length;if(a.hasOwnProperty(s))return a[s];if(1===e){var d=Math.round(Math.log((1<<u)-1&~o)/pa);return t[n][d]}for(var g=i|1<<n,p=n+1;i&1<<p;)p++;for(var x=0,S=0,C=0;S<u;S++){var I=1<<S;I&o||(x+=(C%2?-1:1)*t[n][S]*Ks(t,e-1,p,g,o|I,a),C++)}return a[s]=x}function Js(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},o=Ks(n,8,0,0,0,i);if(0!==o){for(var a=[],s=0;s<8;s++)for(var u=0;u<8;u++)null==a[u]&&(a[u]=0),a[u]+=((s+u)%2?-1:1)*Ks(n,7,0===s?1:0,1<<s,1<<u,i)/o*e[s];return function(d,g,p){var x=g*a[6]+p*a[7]+1;d[0]=(g*a[0]+p*a[1]+a[2])/x,d[1]=(g*a[3]+p*a[4]+a[5])/x}}}var Ar="___zrEVENTSAVED",lo=[];function ma(t,e,n,i,o){if(e.getBoundingClientRect&&Oe.domSupported&&!Yr(e)){var a=e[Ar]||(e[Ar]={}),s=function(u,d,g){for(var p=g?"invTrans":"trans",x=d[p],S=d.srcCoords,C=!0,I=[],z=[],O=0;O<4;O++){var V=u[O].getBoundingClientRect(),Y=2*O,G=V.left,tt=V.top;I.push(G,tt),C=C&&S&&G===S[Y]&&tt===S[1+Y],z.push(u[O].offsetLeft,u[O].offsetTop)}return C&&x?x:(d.srcCoords=I,d[p]=g?Js(z,I):Js(I,z))}(function(u,d){var g=d.markers;if(g)return g;g=d.markers=[];for(var p=["left","right"],x=["top","bottom"],S=0;S<4;S++){var C=document.createElement("div"),z=S%2,O=(S>>1)%2;C.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",p[z]+":0",x[O]+":0",p[1-z]+":auto",x[1-O]+":auto",""].join("!important;"),u.appendChild(C),g.push(C)}return g}(e,a),a,o);if(s)return s(t,n,i),!0}return!1}function Yr(t){return"CANVAS"===t.nodeName.toUpperCase()}var kr="undefined"!=typeof window&&!!window.addEventListener,ql=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,uo=[];function Ko(t,e,n,i){return n=n||{},i||!Oe.canvasSupported?ka(t,e,n):Oe.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):ka(t,e,n),n}function ka(t,e,n){if(Oe.domSupported&&t.getBoundingClientRect){var i=e.clientX,o=e.clientY;if(Yr(t)){var a=t.getBoundingClientRect();return n.zrX=i-a.left,void(n.zrY=o-a.top)}if(ma(uo,t,i,o))return n.zrX=uo[0],void(n.zrY=uo[1])}n.zrX=n.zrY=0}function za(t){return t||window.event}function ur(t,e,n){if(null!=(e=za(e)).zrX)return e;var i=e.type;if(i&&0<=i.indexOf("touch")){var o="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];o&&Ko(t,o,e,n)}else Ko(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var a=e.button;return null==e.which&&void 0!==a&&ql.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e}function zr(t,e,n,i){kr?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)}var vo=kr?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function Za(t){return 2===t.which||3===t.which}function Ka(){this._track=[]}function Qs(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}Ka.prototype={constructor:Ka,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var o={points:[],touches:[],target:e,event:t},a=0,s=i.length;a<s;a++){var u=i[a],d=Ko(n,u,{});o.points.push([d.zrX,d.zrY]),o.touches.push(u)}this._track.push(o)}},_recognize:function(t){for(var e in Ja)if(Ja.hasOwnProperty(e)){var n=Ja[e](this._track,t);if(n)return n}}};var Ja={pinch:function(t,e){var u,n=t.length;if(n){var i=(t[n-1]||{}).points,o=(t[n-2]||{}).points||i;if(o&&1<o.length&&i&&1<i.length){var a=Qs(i)/Qs(o);isFinite(a)||(a=1),e.pinchScale=a;var s=[((u=i)[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}};function ks(){vo(this.event)}function co(){}function xo(t,e,n,i){Ai.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new co,this.proxy=null,this._hovered={},yr.call(this),this.setHandlerProxy(n)}co.prototype.dispose=function(){};var cs=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function bu(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,o=t;o;){if(o.clipPath&&!o.clipPath.contain(e,n))return!1;o.silent&&(i=!0),o=o.parent}return!i||"silent"}return!1}function Ia(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}xo.prototype={constructor:xo,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(St(cs,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,i=Ia(this,e,n),o=this._hovered,a=o.target;a&&!a.__zr&&(a=(o=this.findHover(o.x,o.y)).target);var s=this._hovered=i?{x:e,y:n}:this.findHover(e,n),u=s.target,d=this.proxy;d.setCursor&&d.setCursor(u?u.cursor:"default"),a&&u!==a&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(s,"mousemove",t),u&&u!==a&&this.dispatchToElement(s,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&(n||this.trigger("globalout",{type:"globalout",event:t}))},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var u,d,i=(t=t||{}).target;if(!i||!i.silent){for(var o="on"+e,a={type:e,event:d=n,target:(u=t).target,topTarget:u.topTarget,cancelBubble:!1,offsetX:d.zrX,offsetY:d.zrY,gestureEvent:d.gestureEvent,pinchX:d.pinchX,pinchY:d.pinchY,pinchScale:d.pinchScale,wheelDelta:d.zrDelta,zrByTouch:d.zrByTouch,which:d.which,stop:ks};i&&(i[o]&&(a.cancelBubble=i[o].call(i,a)),i.trigger(e,a),i=i.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer(function(s){"function"==typeof s[o]&&s[o].call(s,a),s.trigger&&s.trigger(e,a)}))}},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),o={x:t,y:e},a=i.length-1;0<=a;a--){var s;if(i[a]!==n&&!i[a].ignore&&(s=bu(i[a],t,e))&&(o.topTarget||(o.topTarget=i[a]),"silent"!==s)){o.target=i[a];break}}return o},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new Ka);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var o=i.type;t.gestureEvent=o,this.dispatchToElement({target:i.target},o,i.event)}}},St(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){xo.prototype[t]=function(e){var n,i,o=e.zrX,a=e.zrY,s=Ia(this,o,a);if("mouseup"===t&&s||(i=(n=this.findHover(o,a)).target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||4<lr(this._downPoint,[e.zrX,e.zrY]))return;this._downPoint=null}this.dispatchToElement(n,t,e)}}),Fn(xo,Ai),Fn(xo,yr);var Go="undefined"==typeof Float32Array?Array:Float32Array;function yt(){var t=new Go(6);return Ft(t),t}function Ft(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function oe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Kt(t,e,n){var o=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],s=e[1]*n[2]+e[3]*n[3],u=e[0]*n[4]+e[2]*n[5]+e[4],d=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=o,t[2]=a,t[3]=s,t[4]=u,t[5]=d,t}function fe(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function he(t,e,n){var i=e[0],o=e[2],a=e[4],s=e[1],u=e[3],d=e[5],g=Math.sin(n),p=Math.cos(n);return t[0]=i*p+s*g,t[1]=-i*g+s*p,t[2]=o*p+u*g,t[3]=-o*g+p*u,t[4]=p*a+g*d,t[5]=p*d-g*a,t}function In(t,e,n){var i=n[0],o=n[1];return t[0]=e[0]*i,t[1]=e[1]*o,t[2]=e[2]*i,t[3]=e[3]*o,t[4]=e[4]*i,t[5]=e[5]*o,t}function Pe(t,e){var n=e[0],i=e[2],o=e[4],a=e[1],s=e[3],u=e[5],d=n*s-a*i;return d?(t[0]=s*(d=1/d),t[1]=-a*d,t[2]=-i*d,t[3]=n*d,t[4]=(i*u-s*o)*d,t[5]=(a*o-n*u)*d,t):null}function hn(t){var e=yt();return oe(e,t),e}var vn=(Object.freeze||Object)({create:yt,identity:Ft,copy:oe,mul:Kt,translate:fe,rotate:he,scale:In,invert:Pe,clone:hn}),pn=Ft;function Le(t){return 5e-5<t||t<-5e-5}var xn=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},en=xn.prototype;en.transform=null,en.needLocalTransform=function(){return Le(this.rotation)||Le(this.position[0])||Le(this.position[1])||Le(this.scale[0]-1)||Le(this.scale[1]-1)};var He=[];en.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;if(n||e){i=i||yt(),n?this.getLocalTransform(i):pn(i),e&&(n?Kt(i,t.transform,i):oe(i,t.transform)),this.transform=i;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(He);var a=He[0]<0?-1:1,s=He[1]<0?-1:1,u=((He[0]-a)*o+a)/He[0]||0,d=((He[1]-s)*o+s)/He[1]||0;i[0]*=u,i[1]*=u,i[2]*=d,i[3]*=d}this.invTransform=this.invTransform||yt(),Pe(this.invTransform,i)}else i&&pn(i)},en.getLocalTransform=function(t){return xn.getLocalTransform(this,t)},en.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},en.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var Un=[],li=yt();en.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=this.position,o=this.scale;Le(e-1)&&(e=Math.sqrt(e)),Le(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),i[0]=t[4],i[1]=t[5],o[0]=e,o[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},en.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(Kt(Un,t.invTransform,e),e=Un);var n=this.origin;n&&(n[0]||n[1])&&(li[4]=n[0],li[5]=n[1],Kt(Un,e,li),Un[4]-=n[0],Un[5]-=n[1],e=Un),this.setLocalTransform(e)}},en.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1])):(t[0]=1,t[1]=1),t},en.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&Wi(n,n,i),n},en.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&Wi(n,n,i),n},xn.getLocalTransform=function(t,e){pn(e=e||[]);var n=t.origin,i=t.scale||[1,1],o=t.rotation||0,a=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),In(e,e,i),o&&he(e,e,o),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=a[0],e[5]+=a[1],e};var Ii={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},bounceIn:function(t){return 1-Ii.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*Ii.bounceIn(2*t):.5*Ii.bounceOut(2*t-1)+.5}};function ri(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function er(){this.head=null,this.tail=null,this._len=0}ri.prototype={constructor:ri,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,o="string"==typeof i?Ii[i]:i,a="function"==typeof o?o(n):n;return this.fire("frame",a),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){this._startTime=t-(t-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Hi=er.prototype;function bo(t){this._list=new er,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null}Hi.insert=function(t){var e=new Qr(t);return this.insertEntry(e),e},Hi.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},Hi.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},Hi.len=function(){return this._len},Hi.clear=function(){this.head=this.tail=null,this._len=0};var Qr=function(t){this.value=t},Xr=bo.prototype;Xr.put=function(t,e){var n=this._list,i=this._map,o=null;if(null==i[t]){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&0<a){var u=n.head;n.remove(u),delete i[u.key],o=u.value,this._lastRemovedEntry=u}s?s.value=e:s=new Qr(e),s.key=t,n.insertEntry(s),i[t]=s}return o},Xr.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},Xr.clear=function(){this._list.clear(),this._map={}};var Is={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _o(t){return(t=Math.round(t))<0?0:255<t?255:t}function fr(t){return t<0?0:1<t?1:t}function Yl(t){return t.length&&"%"===t.charAt(t.length-1)?_o(parseFloat(t)/100*255):_o(parseInt(t,10))}function tl(t){return t.length&&"%"===t.charAt(t.length-1)?fr(parseFloat(t)/100):fr(parseFloat(t))}function _u(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function ds(t,e,n){return t+(e-t)*n}function cr(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function wu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Tl=new bo(20),ic=null;function el(t,e){ic&&wu(ic,e),ic=Tl.put(t,ic||e.slice())}function sa(t,e){if(t){e=e||[];var n=Tl.get(t);if(n)return wu(e,n);var i,o=(t+="").replace(/ /g,"").toLowerCase();if(o in Is)return wu(e,Is[o]),el(t,e),e;if("#"===o.charAt(0))return 4===o.length?0<=(i=parseInt(o.substr(1),16))&&i<=4095?(cr(e,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),el(t,e),e):void cr(e,0,0,0,1):7===o.length?0<=(i=parseInt(o.substr(1),16))&&i<=16777215?(cr(e,(16711680&i)>>16,(65280&i)>>8,255&i,1),el(t,e),e):void cr(e,0,0,0,1):void 0;var a=o.indexOf("("),s=o.indexOf(")");if(-1!==a&&s+1===o.length){var u=o.substr(0,a),d=o.substr(a+1,s-(a+1)).split(","),g=1;switch(u){case"rgba":if(4!==d.length)return void cr(e,0,0,0,1);g=tl(d.pop());case"rgb":return 3!==d.length?void cr(e,0,0,0,1):(cr(e,Yl(d[0]),Yl(d[1]),Yl(d[2]),g),el(t,e),e);case"hsla":return 4!==d.length?void cr(e,0,0,0,1):(d[3]=tl(d[3]),nl(d,e),el(t,e),e);case"hsl":return 3!==d.length?void cr(e,0,0,0,1):(nl(d,e),el(t,e),e);default:return}}cr(e,0,0,0,1)}}function nl(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=tl(t[1]),o=tl(t[2]),a=o<=.5?o*(i+1):o+i-o*i,s=2*o-a;return cr(e=e||[],_o(255*_u(s,a,n+1/3)),_o(255*_u(s,a,n)),_o(255*_u(s,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function wr(t,e){var n=sa(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,255<n[i]?n[i]=255:t[i]<0&&(n[i]=0);return Es(n,4===n.length?"rgba":"rgb")}}function Fr(t){var e=sa(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function Su(t,e,n){if(e&&e.length&&0<=t&&t<=1){n=n||[];var i=t*(e.length-1),o=Math.floor(i),a=Math.ceil(i),s=e[o],u=e[a],d=i-o;return n[0]=_o(ds(s[0],u[0],d)),n[1]=_o(ds(s[1],u[1],d)),n[2]=_o(ds(s[2],u[2],d)),n[3]=fr(ds(s[3],u[3],d)),n}}function il(t,e,n){if(e&&e.length&&0<=t&&t<=1){var i=t*(e.length-1),o=Math.floor(i),a=Math.ceil(i),s=sa(e[o]),u=sa(e[a]),d=i-o,g=Es([_o(ds(s[0],u[0],d)),_o(ds(s[1],u[1],d)),_o(ds(s[2],u[2],d)),fr(ds(s[3],u[3],d))],"rgba");return n?{color:g,leftIndex:o,rightIndex:a,value:i}:g}}function Ps(t,e,n,i){if(t=sa(t))return t=function(o){if(o){var a,s,u=o[0]/255,d=o[1]/255,g=o[2]/255,p=Math.min(u,d,g),x=Math.max(u,d,g),S=x-p,C=(x+p)/2;if(0==S)s=a=0;else{s=C<.5?S/(x+p):S/(2-x-p);var I=((x-u)/6+S/2)/S,z=((x-d)/6+S/2)/S,O=((x-g)/6+S/2)/S;u===x?a=O-z:d===x?a=1/3+I-O:g===x&&(a=2/3+z-I),a<0&&(a+=1),1<a&&(a-=1)}var V=[360*a,s,C];return null!=o[3]&&V.push(o[3]),V}}(t),null!=e&&(t[0]=function(o){return(o=Math.round(o))<0?0:360<o?360:o}(e)),null!=n&&(t[1]=tl(n)),null!=i&&(t[2]=tl(i)),Es(nl(t),"rgba")}function Fa(t,e){if((t=sa(t))&&null!=e)return t[3]=fr(e),Es(t,"rgba")}function Es(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var Xl=(Object.freeze||Object)({parse:sa,lift:wr,toHex:Fr,fastLerp:Su,fastMapToColor:Su,lerp:il,mapToColor:il,modifyHSL:Ps,modifyAlpha:Fa,stringify:Es}),Ir=Array.prototype.slice;function Dl(t,e){return t[e]}function rl(t,e,n){t[e]=n}function Mu(t,e,n){return(e-t)*n+t}function id(t,e,n){return.5<n?e:t}function hs(t,e,n,i,o){var a=t.length;if(1===o)for(var s=0;s<a;s++)i[s]=Mu(t[s],e[s],n);else{var u=a&&t[0].length;for(s=0;s<a;s++)for(var d=0;d<u;d++)i[s][d]=Mu(t[s][d],e[s][d],n)}}function bh(t,e,n){var i=t.length,o=e.length;if(i!==o)if(o<i)t.length=o;else for(var a=i;a<o;a++)t.push(1===n?e[a]:Ir.call(e[a]));var s=t[0]&&t[0].length;for(a=0;a<t.length;a++)if(1===n)isNaN(t[a])&&(t[a]=e[a]);else for(var u=0;u<s;u++)isNaN(t[a][u])&&(t[a][u]=e[a][u])}function Od(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(var o=0;o<i;o++)if(t[o]!==e[o])return!1}else{var a=t[0].length;for(o=0;o<i;o++)for(var s=0;s<a;s++)if(t[o][s]!==e[o][s])return!1}return!0}function wo(t,e,n,i,o,a,s,u,d){var g=t.length;if(1===d)for(var p=0;p<g;p++)u[p]=fs(t[p],e[p],n[p],i[p],o,a,s);else{var x=t[0].length;for(p=0;p<g;p++)for(var S=0;S<x;S++)u[p][S]=fs(t[p][S],e[p][S],n[p][S],i[p][S],o,a,s)}}function fs(t,e,n,i,o,a,s){var u=.5*(n-t),d=.5*(i-e);return(2*(e-n)+u+d)*s+(-3*(e-n)-2*u-d)*a+u*o+e}function Bd(t){if(Lr(t)){var e=t.length;if(Lr(t[0])){for(var n=[],i=0;i<e;i++)n.push(Ir.call(t[i]));return n}return Ir.call(t)}return t}function gs(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function Do(t,e,n,i,o,a){var Jt,Yt,s=t._getter,u=t._setter,d="spline"===e,g=i.length;if(g){var p,x=Lr(i[0].value),S=!1,C=!1,I=x?Lr((Yt=(Jt=i)[Jt.length-1].value)&&Yt[0])?2:1:0;i.sort(function(Jt,Yt){return Jt.time-Yt.time}),p=i[g-1].time;for(var z=[],O=[],V=i[0].value,Y=!0,G=0;G<g;G++){z.push(i[G].time/p);var tt=i[G].value;if(x&&Od(tt,V,I)||!x&&tt===V||(Y=!1),"string"==typeof(V=tt)){var Q=sa(tt);Q?(tt=Q,S=!0):C=!0}O.push(tt)}if(a||!Y){var nt=O[g-1];for(G=0;G<g-1;G++)x?bh(O[G],nt,I):!isNaN(O[G])||isNaN(nt)||C||S||(O[G]=nt);x&&bh(s(t._target,o),nt,I);var it,ct,vt,_t,At,Ot=0,Bt=0;if(S)var Vt=[0,0,0,0];var $t=new ri({target:t._target,life:p,loop:t._loop,delay:t._delay,onframe:function(Jt,Yt){var ue;if(Yt<0)ue=0;else if(Yt<Bt){for(ue=Math.min(Ot+1,g-1);0<=ue&&!(z[ue]<=Yt);ue--);ue=Math.min(ue,g-2)}else{for(ue=Ot;ue<g&&!(z[ue]>Yt);ue++);ue=Math.min(ue-1,g-2)}Bt=Yt;var Re=z[(Ot=ue)+1]-z[ue];if(0!=Re)if(it=(Yt-z[ue])/Re,d)if(vt=O[ue],ct=O[0===ue?ue:ue-1],_t=O[g-2<ue?g-1:ue+1],At=O[g-3<ue?g-1:ue+2],x)wo(ct,vt,_t,At,it,it*it,it*it*it,s(Jt,o),I);else{if(S)ze=wo(ct,vt,_t,At,it,it*it,it*it*it,Vt,1),ze=gs(Vt);else{if(C)return id(vt,_t,it);ze=fs(ct,vt,_t,At,it,it*it,it*it*it)}u(Jt,o,ze)}else if(x)hs(O[ue],O[ue+1],it,s(Jt,o),I);else{var ze;if(S)hs(O[ue],O[ue+1],it,Vt,1),ze=gs(Vt);else{if(C)return id(O[ue],O[ue+1],it);ze=Mu(O[ue],O[ue+1],it)}u(Jt,o,ze)}},ondestroy:n});return e&&"spline"!==e&&($t.easing=e),$t}}}function ji(t,e,n,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||Dl,this._setter=i||rl,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}ji.prototype={when:function(t,e){var n=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!n[i]){n[i]=[];var o=this._getter(this._target,i);if(null==o)continue;0!==t&&n[i].push({time:0,value:Bd(o)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){function n(){--a||o._doneCallback()}var i,o=this,a=0;for(var s in this._tracks)if(this._tracks.hasOwnProperty(s)){var u=Do(this,t,n,this._tracks[s],s,e);u&&(this._clipList.push(u),a++,this.animation&&this.animation.addClip(u),i=u)}if(i){var d=i.onframe;i.onframe=function(g,p){d(g,p);for(var x=0;x<o._onframeList.length;x++)o._onframeList[x](g,p)}}return a||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var o=e[i];t&&o.onframe(this._target,1),n&&n.removeClip(o)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var Bn=1;"undefined"!=typeof window&&(Bn=Math.max(window.devicePixelRatio||1,1));var Tu=Bn;function Ao(){this.animators=[]}function rc(t,e,n,i,o,a,s,u){bi(i)?(a=o,o=i,i=0):Ui(o)?(a=o,o="linear",i=0):Ui(i)?(a=i,i=0):n=Ui(n)?(a=n,500):n||500,t.stopAnimation(),function S(C,I,z,O,V,Y,G){var tt={},Q=0;for(var nt in O)O.hasOwnProperty(nt)&&(null!=z[nt]?Ln(O[nt])&&!Lr(O[nt])?S(C,I?I+"."+nt:nt,z[nt],O[nt],V,Y,G):(G?(tt[nt]=z[nt],ps(C,I,nt,O[nt])):tt[nt]=O[nt],Q++):null==O[nt]||G||ps(C,I,nt,O[nt]));0<Q&&C.animate(I,!1).when(null==V?500:V,tt).delay(Y||0)}(t,"",t,e,n,i,u);var d=t.animators.slice(),g=d.length;function p(){--g||a&&a()}g||a&&a();for(var x=0;x<d.length;x++)d[x].done(p).start(o,s)}function ps(t,e,n,i){if(e){var o={};o[e]={},o[e][n]=i,t.attr(o)}else t.attr(n,i)}Ao.prototype={constructor:Ao,animate:function(t,e){var n,i=!1,o=this,a=this.__zr;if(t){var s=t.split("."),u=o;i="shape"===s[0];for(var d=0,g=s.length;d<g;d++)u=u&&u[s[d]];u&&(n=u)}else n=o;if(n){var p=o.animators,x=new ji(n,e);return x.during(function(S){o.dirty(i)}).done(function(){p.splice(zn(p,x),1)}),p.push(x),a&&a.animation.addAnimator(x),x}},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,o,a){rc(this,t,e,n,i,o,a)},animateFrom:function(t,e,n,i,o,a){rc(this,t,e,n,i,o,a,!0)}};var Ha=function(t){xn.call(this,t),Ai.call(this,t),Ao.call(this,t),this.id=t.id||bn()};Ha.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];(n=n||(this[t]=[]))[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(Ln(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},Fn(Ha,Ao),Fn(Ha,xn),Fn(Ha,Ai);var Qa,Oo,ts,Ls,$l=Wi,Zl=Math.min,Kl=Math.max;function Yi(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}Yi.prototype={constructor:Yi,union:function(t){var e=Zl(t.x,this.x),n=Zl(t.y,this.y);this.width=Kl(t.x+t.width,this.x+this.width)-e,this.height=Kl(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(Qa=[],Oo=[],ts=[],Ls=[],function(t){if(t){Qa[0]=ts[0]=this.x,Qa[1]=Ls[1]=this.y,Oo[0]=Ls[0]=this.x+this.width,Oo[1]=ts[1]=this.y+this.height,$l(Qa,Qa,t),$l(Oo,Oo,t),$l(ts,ts,t),$l(Ls,Ls,t),this.x=Zl(Qa[0],Oo[0],ts[0],Ls[0]),this.y=Zl(Qa[1],Oo[1],ts[1],Ls[1]);var e=Kl(Qa[0],Oo[0],ts[0],Ls[0]),n=Kl(Qa[1],Oo[1],ts[1],Ls[1]);this.width=e-this.x,this.height=n-this.y}}),calculateTransform:function(t){var e=t.width/this.width,n=t.height/this.height,i=yt();return fe(i,i,[-this.x,-this.y]),In(i,i,[e,n]),fe(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof Yi||(t=Yi.create(t));var e=this;return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new Yi(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},Yi.create=function(t){return new Yi(t.x,t.y,t.width,t.height)};var _n=function(t){for(var e in Ha.call(this,t=t||{}),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};function Du(t,e,n,i){var o=e+1;if(o===n)return 1;if(i(t[o++],t[e])<0){for(;o<n&&i(t[o],t[o-1])<0;)o++;!function(a,s,u){for(u--;s<u;){var d=a[s];a[s++]=a[u],a[u--]=d}}(t,e,o)}else for(;o<n&&0<=i(t[o],t[o-1]);)o++;return o-e}function ac(t,e,n,i,o){for(i===e&&i++;i<n;i++){for(var a,s=t[i],u=e,d=i;u<d;)o(s,t[a=u+d>>>1])<0?d=a:u=1+a;var g=i-u;switch(g){case 3:t[u+3]=t[u+2];case 2:t[u+2]=t[u+1];case 1:t[u+1]=t[u];break;default:for(;0<g;)t[u+g]=t[u+g-1],g--}t[u]=s}}function Nc(t,e,n,i,o,a){var s=0,u=0,d=1;if(0<a(t,e[n+o])){for(u=i-o;d<u&&0<a(t,e[n+o+d]);)(d=1+((s=d)<<1))<=0&&(d=u);u<d&&(d=u),s+=o,d+=o}else{for(u=o+1;d<u&&a(t,e[n+o-d])<=0;)(d=1+((s=d)<<1))<=0&&(d=u);u<d&&(d=u);var g=s;s=o-d,d=o-g}for(s++;s<d;){var p=s+(d-s>>>1);0<a(t,e[n+p])?s=p+1:d=p}return d}function ko(t,e,n,i,o,a){var s=0,u=0,d=1;if(a(t,e[n+o])<0){for(u=o+1;d<u&&a(t,e[n+o-d])<0;)(d=1+((s=d)<<1))<=0&&(d=u);u<d&&(d=u);var g=s;s=o-d,d=o-g}else{for(u=i-o;d<u&&0<=a(t,e[n+o+d]);)(d=1+((s=d)<<1))<=0&&(d=u);u<d&&(d=u),s+=o,d+=o}for(s++;s<d;){var p=s+(d-s>>>1);a(t,e[n+p])<0?d=p:s=p+1}return d}function Au(t,e){var n,i,o=7,a=0,s=[];function u(d){var g=n[d],p=i[d],x=n[d+1],S=i[d+1];i[d]=p+S,d===a-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),a--;var C=ko(t[x],t,g,p,0,e);g+=C,0!=(p-=C)&&0!==(S=Nc(t[g+p-1],t,x,S,S-1,e))&&(p<=S?function(I,z,O,V){var Y=0;for(Y=0;Y<z;Y++)s[Y]=t[I+Y];var G=0,tt=O,Q=I;if(t[Q++]=t[tt++],0!=--V){if(1===z){for(Y=0;Y<V;Y++)t[Q+Y]=t[tt+Y];return t[Q+V]=s[G]}for(var nt,it,ct,vt=o;;){it=nt=0,ct=!1;do{if(e(t[tt],s[G])<0){if(t[Q++]=t[tt++],it++,(nt=0)==--V){ct=!0;break}}else if(t[Q++]=s[G++],nt++,it=0,1==--z){ct=!0;break}}while((nt|it)<vt);if(ct)break;do{if(0!==(nt=ko(t[tt],s,G,z,0,e))){for(Y=0;Y<nt;Y++)t[Q+Y]=s[G+Y];if(Q+=nt,G+=nt,(z-=nt)<=1){ct=!0;break}}if(t[Q++]=t[tt++],0==--V){ct=!0;break}if(0!==(it=Nc(s[G],t,tt,V,0,e))){for(Y=0;Y<it;Y++)t[Q+Y]=t[tt+Y];if(Q+=it,tt+=it,0==(V-=it)){ct=!0;break}}if(t[Q++]=s[G++],1==--z){ct=!0;break}vt--}while(7<=nt||7<=it);if(ct)break;vt<0&&(vt=0),vt+=2}if((o=vt)<1&&(o=1),1===z){for(Y=0;Y<V;Y++)t[Q+Y]=t[tt+Y];t[Q+V]=s[G]}else{if(0===z)throw new Error;for(Y=0;Y<z;Y++)t[Q+Y]=s[G+Y]}}else for(Y=0;Y<z;Y++)t[Q+Y]=s[G+Y]}(g,p,x,S):function(I,z,O,V){var Y=0;for(Y=0;Y<V;Y++)s[Y]=t[O+Y];var G=I+z-1,tt=V-1,Q=O+V-1,nt=0,it=0;if(t[Q--]=t[G--],0!=--z){if(1===V){for(it=1+(Q-=z),nt=1+(G-=z),Y=z-1;0<=Y;Y--)t[it+Y]=t[nt+Y];return t[Q]=s[tt]}for(var ct=o;;){var vt=0,_t=0,At=!1;do{if(e(s[tt],t[G])<0){if(t[Q--]=t[G--],vt++,(_t=0)==--z){At=!0;break}}else if(t[Q--]=s[tt--],_t++,vt=0,1==--V){At=!0;break}}while((vt|_t)<ct);if(At)break;do{if(0!=(vt=z-ko(s[tt],t,I,z,z-1,e))){for(z-=vt,it=1+(Q-=vt),nt=1+(G-=vt),Y=vt-1;0<=Y;Y--)t[it+Y]=t[nt+Y];if(0===z){At=!0;break}}if(t[Q--]=s[tt--],1==--V){At=!0;break}if(0!=(_t=V-Nc(t[G],s,0,V,V-1,e))){for(V-=_t,it=1+(Q-=_t),nt=1+(tt-=_t),Y=0;Y<_t;Y++)t[it+Y]=s[nt+Y];if(V<=1){At=!0;break}}if(t[Q--]=t[G--],0==--z){At=!0;break}ct--}while(7<=vt||7<=_t);if(At)break;ct<0&&(ct=0),ct+=2}if((o=ct)<1&&(o=1),1===V){for(it=1+(Q-=z),nt=1+(G-=z),Y=z-1;0<=Y;Y--)t[it+Y]=t[nt+Y];t[Q]=s[tt]}else{if(0===V)throw new Error;for(nt=Q-(V-1),Y=0;Y<V;Y++)t[nt+Y]=s[Y]}}else for(nt=Q-(V-1),Y=0;Y<V;Y++)t[nt+Y]=s[Y]}(g,p,x,S))}n=[],i=[],this.mergeRuns=function(){for(;1<a;){var d=a-2;if(1<=d&&i[d-1]<=i[d]+i[d+1]||2<=d&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;u(d)}},this.forceMergeRuns=function(){for(;1<a;){var d=a-2;0<d&&i[d-1]<i[d+1]&&d--,u(d)}},this.pushRun=function(d,g){n[a]=d,i[a]=g,a+=1}}function ms(t,e,n,i){var o=(i=i||t.length)-(n=n||0);if(!(o<2)){var a=0;if(o<32)ac(t,n,i,n+(a=Du(t,n,i,e)),e);else{var s=new Au(t,e),u=function(g){for(var p=0;32<=g;)p|=1&g,g>>=1;return g+p}(o);do{if((a=Du(t,n,i,e))<u){var d=o;u<d&&(d=u),ac(t,n,n+d,n+a,e),a=d}s.pushRun(n,a),s.mergeRuns(),o-=a,n+=a}while(0!==o);s.forceMergeRuns()}}}function ku(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function zd(){this._roots=[],this._displayList=[],this._displayListLen=0}_n.prototype={constructor:_n,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);0<=i&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof _n&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,o=zn(i,t);return o<0||(i.splice(o,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof _n&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromStorage(t),t instanceof _n&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++)t.call(e,n[i],i);return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof _n&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof _n&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new Yi(0,0,0,0),i=t||this._children,o=[],a=0;a<i.length;a++){var s=i[a];if(!s.ignore&&!s.invisible){var u=s.getBoundingRect(),d=s.getLocalTransform(o);d?(n.copy(u),n.applyTransform(d),(e=e||n.clone()).union(n)):(e=e||u.clone()).union(u)}}return e||n}},ki(_n,Ha),zd.prototype={constructor:zd,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,o=e.length;i<o;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,Oe.canvasSupported&&ms(n,ku)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),e.push(o),o=(a=o).clipPath}if(t.isGroup){for(var s=t._children,u=0;u<s.length;u++){var d=s[u];t.__dirty&&(d.__dirty=!0),this._updateAndAddDisplayable(d,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof _n&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof _n&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var i=t.length;e<i;e++)this.delRoot(t[e])}else{var o=zn(this._roots,t);0<=o&&(this.delFromStorage(t),this._roots.splice(o,1),t instanceof _n&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:ku};var Fd={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},od=function(t,e,n){return Fd.hasOwnProperty(e)?n*t.dpr:n},Os=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],vs=function(t){this.extendFrom(t,!1)};function nf(t,e,n){var i=null==e.x?0:e.x,o=null==e.x2?1:e.x2,a=null==e.y?0:e.y,s=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,o=o*n.width+n.x,a=a*n.height+n.y,s=s*n.height+n.y),i=isNaN(i)?0:i,o=isNaN(o)?1:o,a=isNaN(a)?0:a,s=isNaN(s)?0:s,t.createLinearGradient(i,a,o,s)}function Uo(t,e,n){var i=n.width,o=n.height,a=Math.min(i,o),s=null==e.x?.5:e.x,u=null==e.y?.5:e.y,d=null==e.r?.5:e.r;return e.global||(s=s*i+n.x,u=u*o+n.y,d*=a),t.createRadialGradient(s,u,0,s,u,d)}for(var Jo=vs.prototype={constructor:vs,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var i=this,o=n&&n.style,a=!o||1!==t.__attrCachedBy;t.__attrCachedBy=1;for(var s=0;s<Os.length;s++){var u=Os[s],d=u[0];!a&&i[d]===o[d]||(t[d]=od(t,d,i[d]||u[1]))}!a&&i.fill===o.fill||(t.fillStyle=i.fill),!a&&i.stroke===o.stroke||(t.strokeStyle=i.stroke),!a&&i.opacity===o.opacity||(t.globalAlpha=null==i.opacity?1:i.opacity),!a&&i.blend===o.blend||(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(t.lineWidth=i.lineWidth/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1))},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var i=("radial"===e.type?Uo:nf)(t,e,n),o=e.colorStops,a=0;a<o.length;a++)i.addColorStop(o[a].offset,o[a].color);return i}},Hd=0;Hd<Os.length;Hd++){var sc=Os[Hd];sc[0]in Jo||(Jo[sc[0]]=sc[1])}function Iu(t,e){this.image=t,this.repeat=e,this.type="pattern"}function Al(){return!1}function _h(t,e,n){var i=Dr(),o=e.getWidth(),a=e.getHeight(),s=i.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=o+"px",s.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=o*n,i.height=a*n,i}function Jl(t,e,n){var i;n=n||Tu,"string"==typeof t?i=_h(t,e,n):Ln(t)&&(t=(i=t).id),this.id=t;var o=(this.dom=i).style;o&&(i.onselectstart=Al,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}vs.getGradient=Jo.getGradient,Jl.prototype={constructor:Jl,__dirty:!0,__used:!(Iu.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=_h("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,o=i.style,a=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),i.width=t*n,i.height=e*n,a&&(a.width=t*n,a.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,i=this.dom,o=this.ctx,a=i.width,s=i.height,u=(e=e||this.clearColor,this.motionBlur&&!t),d=this.lastFrameAlpha,g=this.dpr;if(u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,a/g,s/g)),o.clearRect(0,0,a,s),e&&"transparent"!==e&&(e.colorStops?(n=e.__canvasGradient||vs.getGradient(o,e,{x:0,y:0,width:a,height:s}),e.__canvasGradient=n):e.image&&(n=Iu.prototype.getCanvasPattern.call(e,o)),o.save(),o.fillStyle=n||e,o.fillRect(0,0,a,s),o.restore()),u){var p=this.domBack;o.save(),o.globalAlpha=d,o.drawImage(p,0,0,a,s),o.restore()}}};var sd="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},ld=new bo(50);function ys(t){if("string"!=typeof t)return t;var e=ld.get(t);return e&&e.image}function Bs(t,e,n,i,o){if(t){if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!n)return e;var a=ld.get(t),s={hostEl:n,cb:i,cbPayload:o};return a?lc(e=a.image)||a.pending.push(s):((e=new Image).onload=e.onerror=Ce,ld.put(t,e.__cachedImgObj={image:e,pending:[s]}),e.src=e.__zrImageSrc=t),e}return e}function Ce(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function lc(t){return t&&t.width&&t.height}var ol={},kl=0,uc=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,es="12px sans-serif",Il={};function Qo(t,e){var n=t+":"+(e=e||es);if(ol[n])return ol[n];for(var i,o,a=(t+"").split("\n"),s=0,u=0,d=a.length;u<d;u++)s=Math.max((i=a[u],o=e,Il.measureText(i,o)).width,s);return 5e3<kl&&(kl=0,ol={}),kl++,ol[n]=s}function al(t,e,n,i,o,a,s,u){return s?(x=i,Y=(O=Ql(t,{rich:s,truncate:u,font:e,textAlign:p=n,textPadding:o,textLineHeight:a})).outerHeight,new Yi(Pu(0,V=O.outerWidth,p),Eu(0,Y,x),V,Y)):function(d,g,p,x,S,C,I){var z=Pl(d,g,S,C,I),O=Qo(d,g);S&&(O+=S[1]+S[3]);var V=z.outerHeight,tt=new Yi(Pu(0,O,p),Eu(0,V,x),O,V);return tt.lineHeight=z.lineHeight,tt}(t,e,n,i,o,a,u);var p,x,O,V,Y}function Pu(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Eu(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function ud(t,e,n){var o=e.textDistance,a=n.x,s=n.y;o=o||0;var u=n.height,d=n.width,g=u/2,p="left",x="top";switch(e.textPosition){case"left":a-=o,s+=g,p="right",x="middle";break;case"right":a+=o+d,s+=g,x="middle";break;case"top":a+=d/2,s-=o,p="center",x="bottom";break;case"bottom":a+=d/2,s+=u+o,p="center";break;case"inside":a+=d/2,s+=g,p="center",x="middle";break;case"insideLeft":a+=o,s+=g,x="middle";break;case"insideRight":a+=d-o,s+=g,p="right",x="middle";break;case"insideTop":a+=d/2,s+=o,p="center";break;case"insideBottom":a+=d/2,s+=u-o,p="center",x="bottom";break;case"insideTopLeft":a+=o,s+=o;break;case"insideTopRight":a+=d-o,s+=o,p="right";break;case"insideBottomLeft":a+=o,s+=u-o,x="bottom";break;case"insideBottomRight":a+=d-o,s+=u-o,p="right",x="bottom"}return(t=t||{}).x=a,t.y=s,t.textAlign=p,t.textVerticalAlign=x,t}function Rc(t,e,n,i,o){if(!e)return"";var a=(t+"").split("\n");o=zs(e,n,i,o);for(var s=0,u=a.length;s<u;s++)a[s]=sl(a[s],o);return a.join("\n")}function zs(t,e,n,i){(i=En({},i)).font=e,n=_i(n,"..."),i.maxIterations=_i(i.maxIterations,2);var o=i.minChar=_i(i.minChar,0);i.cnCharWidth=Qo("\u56fd",e);var a=i.ascCharWidth=Qo("a",e);i.placeholder=_i(i.placeholder,"");for(var s=t=Math.max(0,t-1),u=0;u<o&&a<=s;u++)s-=a;var d=Qo(n,e);return s<d&&(n="",d=0),s=t-d,i.ellipsis=n,i.ellipsisWidth=d,i.contentWidth=s,i.containerWidth=t,i}function sl(t,e){var n=e.containerWidth,i=e.font,o=e.contentWidth;if(!n)return"";var a=Qo(t,i);if(a<=n)return t;for(var s=0;;s++){if(a<=o||s>=e.maxIterations){t+=e.ellipsis;break}var u=0===s?Va(t,o,e.ascCharWidth,e.cnCharWidth):0<a?Math.floor(t.length*o/a):0;a=Qo(t=t.substr(0,u),i)}return""===t&&(t=e.placeholder),t}function Va(t,e,n,i){for(var o=0,a=0,s=t.length;a<s&&o<e;a++){var u=t.charCodeAt(a);o+=0<=u&&u<=127?n:i}return a}function ns(t){return Qo("\u56fd",t)}function Pl(t,e,n,i,o){null!=t&&(t+="");var a=_i(i,ns(e)),s=t?t.split("\n"):[],u=s.length*a,d=u,g=!0;if(n&&(d+=n[0]+n[2]),t&&o){g=!1;var p=o.outerHeight,x=o.outerWidth;if(null!=p&&p<d)t="",s=[];else if(null!=x)for(var S=zs(x-(n?n[1]+n[3]:0),e,o.ellipsis,{minChar:o.minChar,placeholder:o.placeholder}),C=0,I=s.length;C<I;C++)s[C]=sl(s[C],S)}return{lines:s,height:u,outerHeight:d,lineHeight:a,canCacheByTextString:g}}function Ql(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,o=uc.lastIndex=0;null!=(i=uc.exec(t));){var a=i.index;o<a&&tu(n,t.substring(o,a)),tu(n,i[2],i[1]),o=uc.lastIndex}o<t.length&&tu(n,t.substring(o,t.length));var s=n.lines,u=0,d=0,g=[],p=e.textPadding,x=e.truncate,S=x&&x.outerWidth,C=x&&x.outerHeight;p&&(null!=S&&(S-=p[1]+p[3]),null!=C&&(C-=p[0]+p[2]));for(var I=0;I<s.length;I++){for(var z=s[I],O=0,V=0,Y=0;Y<z.tokens.length;Y++){var G=(Bt=z.tokens[Y]).styleName&&e.rich[Bt.styleName]||{},tt=Bt.textPadding=G.textPadding,Q=Bt.font=G.font||e.font,nt=Bt.textHeight=_i(G.textHeight,ns(Q));if(tt&&(nt+=tt[0]+tt[2]),Bt.height=nt,Bt.lineHeight=Ke(G.textLineHeight,e.textLineHeight,nt),Bt.textAlign=G&&G.textAlign||e.textAlign,Bt.textVerticalAlign=G&&G.textVerticalAlign||"middle",null!=C&&u+Bt.lineHeight>C)return{lines:[],width:0,height:0};Bt.textWidth=Qo(Bt.text,Q);var it=G.textWidth,ct=null==it||"auto"===it;if("string"==typeof it&&"%"===it.charAt(it.length-1))Bt.percentWidth=it,g.push(Bt),it=0;else{if(ct){it=Bt.textWidth;var vt=G.textBackgroundColor,_t=vt&&vt.image;_t&&lc(_t=ys(_t))&&(it=Math.max(it,_t.width*nt/_t.height))}var At=tt?tt[1]+tt[3]:0;it+=At;var Ot=null!=S?S-V:null;null!=Ot&&Ot<it&&(!ct||Ot<At?(Bt.text="",Bt.textWidth=it=0):(Bt.text=Rc(Bt.text,Ot-At,Q,x.ellipsis,{minChar:x.minChar}),Bt.textWidth=Qo(Bt.text,Q),it=Bt.textWidth+At))}V+=Bt.width=it,G&&(O=Math.max(O,Bt.lineHeight))}z.width=V,u+=z.lineHeight=O,d=Math.max(d,V)}for(n.outerWidth=n.width=_i(e.textWidth,d),n.outerHeight=n.height=_i(e.textHeight,u),p&&(n.outerWidth+=p[1]+p[3],n.outerHeight+=p[0]+p[2]),I=0;I<g.length;I++){var Bt,Vt=(Bt=g[I]).percentWidth;Bt.width=parseInt(Vt,10)/100*d}return n}function tu(t,e,n){for(var i=""===e,o=e.split("\n"),a=t.lines,s=0;s<o.length;s++){var u=o[s],d={styleName:n,text:u,isLineHolder:!u&&!i};if(s)a.push({tokens:[d]});else{var g=(a[a.length-1]||(a[0]={tokens:[]})).tokens,p=g.length;1===p&&g[0].isLineHolder?g[0]=d:!u&&p&&!i||g.push(d)}}}function cc(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&Zn(e)||t.textFont||t.font}function cd(t,e){var n,i,o,a,s,u=e.x,d=e.y,g=e.width,p=e.height,x=e.r;g<0&&(u+=g,g=-g),p<0&&(d+=p,p=-p),"number"==typeof x?n=i=o=a=x:x instanceof Array?1===x.length?n=i=o=a=x[0]:2===x.length?(n=o=x[0],i=a=x[1]):3===x.length?(n=x[0],i=a=x[1],o=x[2]):(n=x[0],i=x[1],o=x[2],a=x[3]):n=i=o=a=0,g<n+i&&(n*=g/(s=n+i),i*=g/s),g<o+a&&(o*=g/(s=o+a),a*=g/s),p<i+o&&(i*=p/(s=i+o),o*=p/s),p<n+a&&(n*=p/(s=n+a),a*=p/s),t.moveTo(u+n,d),t.lineTo(u+g-i,d),0!==i&&t.arc(u+g-i,d+i,i,-Math.PI/2,0),t.lineTo(u+g,d+p-o),0!==o&&t.arc(u+g-o,d+p-o,o,0,Math.PI/2),t.lineTo(u+a,d+p),0!==a&&t.arc(u+a,d+p-a,a,Math.PI/2,Math.PI),t.lineTo(u,d+n),0!==n&&t.arc(u+n,d+n,n,Math.PI,1.5*Math.PI)}Il.measureText=function(t,e){var n=Rr();return n.font=e||es,n.measureText(t)};var Io=es,ua={left:1,right:1,center:1},rf={top:1,bottom:1,middle:1},dc=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],wh={},eu={};function Nu(t){return Ru(t),St(t.rich,Ru),t}function Ru(t){if(t){t.font=cc(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||ua[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||rf[n]?n:"top",t.textPadding&&(t.textPadding=Vn(t.textPadding))}}function nu(t,e,n,i,o,a){i.rich?function(s,u,d,g,p,x){9!==x&&(u.__attrCachedBy=0);var S=s.__textCotentBlock;S&&!s.__dirtyText||(S=s.__textCotentBlock=Ql(d,g)),function(C,I,z,O,V){var Y=z.width,G=z.outerWidth,tt=z.outerHeight,Q=O.textPadding,nt=va(eu,C,O,V),it=nt.baseX,ct=nt.baseY,vt=nt.textAlign,_t=nt.textVerticalAlign;jr(I,O,V,it,ct);var At=Pu(it,G,vt),Ot=Eu(ct,tt,_t),Bt=At,Vt=Ot;Q&&(Bt+=Q[3],Vt+=Q[0]);var $t=Bt+Y;Fs(O)&&ll(C,I,O,At,Ot,G,tt);for(var Jt=0;Jt<z.lines.length;Jt++){for(var Yt,ue=z.lines[Jt],Re=ue.tokens,ze=Re.length,Ie=ue.lineHeight,Je=ue.width,mn=0,hi=Bt,We=$t,ai=ze-1;mn<ze&&(!(Yt=Re[mn]).textAlign||"left"===Yt.textAlign);)xs(C,I,Yt,O,Ie,Vt,hi,"left"),Je-=Yt.width,hi+=Yt.width,mn++;for(;0<=ai&&"right"===(Yt=Re[ai]).textAlign;)xs(C,I,Yt,O,Ie,Vt,We,"right"),Je-=Yt.width,We-=Yt.width,ai--;for(hi+=(Y-(hi-Bt)-($t-We)-Je)/2;mn<=ai;)xs(C,I,Yt=Re[mn],O,Ie,Vt,hi+Yt.width/2,"center"),hi+=Yt.width,mn++;Vt+=Ie}}(s,u,S,g,p)}(t,e,n,i,o,a):function(s,u,d,g,p,x){var S,C=Fs(g),I=!1,z=2===u.__attrCachedBy;9!==x?(x&&(S=x.style,I=!C&&z&&S),u.__attrCachedBy=C?0:2):z&&(u.__attrCachedBy=0);var O=g.font||Io;I&&O===(S.font||Io)||(u.font=O);var V=s.__computedFont;s.__styleFont!==O&&(s.__styleFont=O,V=s.__computedFont=u.font);var Y=g.textPadding,tt=s.__textCotentBlock;tt&&!s.__dirtyText||(tt=s.__textCotentBlock=Pl(d,V,Y,g.textLineHeight,g.truncate));var Q=tt.outerHeight,nt=tt.lines,it=tt.lineHeight,ct=va(eu,s,g,p),vt=ct.baseX,_t=ct.baseY,At=ct.textAlign||"left",Ot=ct.textVerticalAlign;jr(u,g,p,vt,_t);var Bt=Eu(_t,Q,Ot),Vt=vt,$t=Bt;if(C||Y){var Jt=Qo(d,V);Y&&(Jt+=Y[1]+Y[3]);var Yt=Pu(vt,Jt,At);C&&ll(s,u,g,Yt,Bt,Jt,Q),Y&&(Vt=hc(vt,At,Y),$t+=Y[0])}u.textAlign=At,u.textBaseline="middle",u.globalAlpha=g.opacity||1;for(var ue=0;ue<dc.length;ue++){var Re=dc[ue],ze=Re[0],Ie=Re[1],Je=g[ze];I&&Je===S[ze]||(u[Ie]=od(u,Ie,Je||Re[2]))}$t+=it/2;var mn=g.textStrokeWidth,We=!I||mn!==(I?S.textStrokeWidth:null),ai=!I||We||g.textStroke!==S.textStroke,fi=dd(g.textStroke,mn),Oi=Lc(g.textFill);if(fi&&(We&&(u.lineWidth=mn),ai&&(u.strokeStyle=fi)),Oi&&(I&&g.textFill===S.textFill||(u.fillStyle=Oi)),1===nt.length)fi&&u.strokeText(nt[0],Vt,$t),Oi&&u.fillText(nt[0],Vt,$t);else for(ue=0;ue<nt.length;ue++)fi&&u.strokeText(nt[ue],Vt,$t),Oi&&u.fillText(nt[ue],Vt,$t),$t+=it}(t,e,n,i,o,a)}function jr(t,e,n,i,o){if(n&&e.textRotation){var a=e.textOrigin;"center"===a?(i=n.width/2+n.x,o=n.height/2+n.y):a&&(i=a[0]+n.x,o=a[1]+n.y),t.translate(i,o),t.rotate(-e.textRotation),t.translate(-i,-o)}}function xs(t,e,n,i,o,a,s,u){var d=i.rich[n.styleName]||{};d.text=n.text;var g=n.textVerticalAlign,p=a+o/2;"top"===g?p=a+n.height/2:"bottom"===g&&(p=a+o-n.height/2),!n.isLineHolder&&Fs(d)&&ll(t,e,d,"right"===u?s-n.width:"center"===u?s-n.width/2:s,p-n.height/2,n.width,n.height);var x=n.textPadding;x&&(s=hc(s,u,x),p-=n.height/2-x[2]-n.textHeight/2),qo(e,"shadowBlur",Ke(d.textShadowBlur,i.textShadowBlur,0)),qo(e,"shadowColor",d.textShadowColor||i.textShadowColor||"transparent"),qo(e,"shadowOffsetX",Ke(d.textShadowOffsetX,i.textShadowOffsetX,0)),qo(e,"shadowOffsetY",Ke(d.textShadowOffsetY,i.textShadowOffsetY,0)),qo(e,"textAlign",u),qo(e,"textBaseline","middle"),qo(e,"font",n.font||Io);var S=dd(d.textStroke||i.textStroke,I),C=Lc(d.textFill||i.textFill),I=_i(d.textStrokeWidth,i.textStrokeWidth);S&&(qo(e,"lineWidth",I),qo(e,"strokeStyle",S),e.strokeText(n.text,s,p)),C&&(qo(e,"fillStyle",C),e.fillText(n.text,s,p))}function Fs(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function ll(t,e,n,i,o,a,s){var u=n.textBackgroundColor,d=n.textBorderWidth,g=n.textBorderColor,p=bi(u);if(qo(e,"shadowBlur",n.textBoxShadowBlur||0),qo(e,"shadowColor",n.textBoxShadowColor||"transparent"),qo(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),qo(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),p||d&&g){e.beginPath();var x=n.textBorderRadius;x?cd(e,{x:i,y:o,width:a,height:s,r:x}):e.rect(i,o,a,s),e.closePath()}if(p)if(qo(e,"fillStyle",u),null!=n.fillOpacity){var S=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=S}else e.fill();else if(Ln(u)){var C=u.image;(C=Bs(C,null,t,ul,u))&&lc(C)&&e.drawImage(C,i,o,a,s)}d&&g&&(qo(e,"lineWidth",d),qo(e,"strokeStyle",g),null!=n.strokeOpacity?(S=e.globalAlpha,e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=S):e.stroke())}function ul(t,e){e.image=t}function va(t,e,n,i){var o=n.x||0,a=n.y||0,s=n.textAlign,u=n.textVerticalAlign;if(i){var d=n.textPosition;if(d instanceof Array)o=i.x+bs(d[0],i.width),a=i.y+bs(d[1],i.height);else{var g=e&&e.calculateTextPosition?e.calculateTextPosition(wh,n,i):ud(wh,n,i);o=g.x,a=g.y,s=s||g.textAlign,u=u||g.textVerticalAlign}var p=n.textOffset;p&&(o+=p[0],a+=p[1])}return(t=t||{}).baseX=o,t.baseY=a,t.textAlign=s,t.textVerticalAlign=u,t}function qo(t,e,n){return t[e]=od(t,e,n),t[e]}function dd(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Lc(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function bs(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function hc(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function iu(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}function fc(){}var Bo=new Yi;function ya(t){for(var e in Ha.call(this,t=t||{}),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new vs(t.style,this),this._rect=null,this.__clipPaths=null}function Po(t){ya.call(this,t)}ya.prototype={constructor:ya,type:"displayable",__dirty:!0,invisible:!(fc.prototype={constructor:fc,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Nu(n);var i=n.text;if(null!=i&&(i+=""),iu(i,n)){t.save();var o=this.transform;n.transformText?this.setTransform(t):o&&(Bo.copy(e),Bo.applyTransform(o),e=Bo),nu(this,t,i,n,e,9),t.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?Ha.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new vs(t,this),this.dirty(!1),this},calculateTextPosition:null},ki(ya,Ha),Fn(ya,fc),Po.prototype={constructor:Po,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var o=this._image=Bs(i,this._image,this,this.onload);if(o&&lc(o)){var a=n.x||0,s=n.y||0,u=n.width,d=n.height,g=o.width/o.height;if(null==u&&null!=d?u=d*g:null==d&&null!=u?d=u/g:null==u&&null==d&&(u=o.width,d=o.height),this.setTransform(t),n.sWidth&&n.sHeight){var p=n.sx||0,x=n.sy||0;t.drawImage(o,p,x,n.sWidth,n.sHeight,a,s,u,d)}else if(n.sx&&n.sy){var S=u-(p=n.sx),C=d-(x=n.sy);t.drawImage(o,p,x,S,C,a,s,u,d)}else t.drawImage(o,a,s,u,d);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new Yi(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},ki(Po,ya);var Yo=314159;function ru(t){return parseInt(t,10)}var cl=new Yi(0,0,0,0),Oc=new Yi(0,0,0,0);function Vd(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=En({},n||{}),this.dpr=n.devicePixelRatio||Tu,this._singleCanvas=i;var o=(this.root=t).style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var x,S,C,a=this._zlevelList=[],s=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var u=t.width,d=t.height;null!=n.width&&(u=n.width),null!=n.height&&(d=n.height),this.dpr=n.devicePixelRatio||1,t.width=u*this.dpr,t.height=d*this.dpr,this._width=u,this._height=d;var g=new Jl(t,this,this.dpr);g.__builtin__=!0,g.initContext(),(s[Yo]=g).zlevel=Yo,a.push(Yo),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var p=this._domRoot=(x=this._width,S=this._height,(C=document.createElement("div")).style.cssText=["position:relative","width:"+x+"px","height:"+S+"px","padding:0","margin:0","border-width:0"].join(";")+";",C);t.appendChild(p)}this._hoverlayer=null,this._hoverElements=[]}function Bc(t){this.stage=(t=t||{}).stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,Ai.call(this)}Vd.prototype={constructor:Vd,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<n.length;i++){var a=this._layers[n[i]];!a.__builtin__&&a.refresh&&a.refresh(0===i?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return(n.__from=t).__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var n=this._hoverElements,i=zn(n,t.__hoverMir);0<=i&&n.splice(i,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){ms(t,this.storage.displayableSortFunc);var i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var o=0;o<e;){var a=t[o],s=a.__from;s&&s.__zr?(o++,s.invisible||(a.transform=s.transform,a.invTransform=s.invTransform,a.__clipPaths=s.__clipPaths,this._doPaintEl(a,n,!0,i))):(t.splice(o,1),s.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var o=this;sd(function(){o._paintList(t,e,n)})}}},_compositeManually:function(){var t=this.getLayer(Yo).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)})},_doPaintList:function(t,e){for(var n=[],i=0;i<this._zlevelList.length;i++)(u=this._layers[this._zlevelList[i]]).__builtin__&&u!==this._hoverlayer&&(u.__dirty||e)&&n.push(u);for(var a=!0,s=0;s<n.length;s++){var u,d=(u=n[s]).ctx,g={};d.save();var p=e?u.__startIndex:u.__drawIndex,x=!e&&u.incremental&&Date.now,S=x&&Date.now(),C=u.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(u.__startIndex===u.__endIndex)u.clear(!1,C);else if(p===u.__startIndex){var I=t[p];I.incremental&&I.notClear&&!e||u.clear(!1,C)}-1===p&&(console.error("For some unknown reason. drawIndex is -1"),p=u.__startIndex);for(var z=p;z<u.__endIndex;z++){var O=t[z];if(this._doPaintEl(O,u,e,g),O.__dirty=O.__dirtyText=!1,x&&15<Date.now()-S)break}u.__drawIndex=z,u.__drawIndex<u.__endIndex&&(a=!1),g.prevElClipPaths&&d.restore(),d.restore()}return Oe.wxa&&St(this._layers,function(V){V&&V.ctx&&V.ctx.draw&&V.ctx.draw()}),a},_doPaintEl:function(t,e,n,i){var d,g,p,o=e.ctx,a=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!a||a[0]||a[3])&&(!t.culling||(g=this._width,p=this._height,cl.copy((d=t).getBoundingRect()),d.transform&&cl.applyTransform(d.transform),Oc.width=g,Oc.height=p,cl.intersect(Oc)))){var s=t.__clipPaths,u=i.prevElClipPaths;u&&!function(d,g){if(d===g)return!1;if(!d||!g||d.length!==g.length)return!0;for(var p=0;p<d.length;p++)if(d[p]!==g[p])return!0;return!1}(s,u)||(u&&(o.restore(),i.prevElClipPaths=null,i.prevEl=null),s&&(o.save(),function(d,g){for(var p=0;p<d.length;p++){var x=d[p];x.setTransform(g),g.beginPath(),x.buildPath(g,x.shape),g.clip(),x.restoreTransform(g)}}(s,o),i.prevElClipPaths=s)),t.beforeBrush&&t.beforeBrush(o),t.brush(o,i.prevEl||null),(i.prevEl=t).afterBrush&&t.afterBrush(o)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Yo);var n=this._layers[t];return n||((n=new Jl("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?ei(n,this._layerConfig[t],!0):this._layerConfig[t-.01]&&ei(n,this._layerConfig[t-.01],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var g,n=this._layers,i=this._zlevelList,o=i.length,a=null,s=-1,u=this._domRoot;if(n[t]);else if((g=e)&&(g.__builtin__||"function"==typeof g.resize&&"function"==typeof g.refresh)){if(0<o&&t>i[0]){for(s=0;s<o-1&&!(i[s]<t&&i[s+1]>t);s++);a=n[i[s]]}if(i.splice(s+1,0,t),!(n[t]=e).virtual)if(a){var d=a.dom;d.nextSibling?u.insertBefore(e.dom,d.nextSibling):u.appendChild(e.dom)}else u.firstChild?u.insertBefore(e.dom,u.firstChild):u.appendChild(e.dom)}},eachLayer:function(t,e){var n,i,o=this._zlevelList;for(i=0;i<o.length;i++)t.call(e,this._layers[n=o[i]],n)},eachBuiltinLayer:function(t,e){var n,i,o,a=this._zlevelList;for(o=0;o<a.length;o++)(n=this._layers[i=a[o]]).__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,o,a=this._zlevelList;for(o=0;o<a.length;o++)(n=this._layers[i=a[o]]).__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(g){o&&(o.__endIndex!==g&&(o.__dirty=!0),o.__endIndex=g)}if(this.eachBuiltinLayer(function(g,p){g.__dirty=g.__used=!1}),this._singleCanvas)for(var n=1;n<t.length;n++)if((s=t[n]).zlevel!==t[n-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}var i,o=null,a=0;for(n=0;n<t.length;n++){var s,u,d=(s=t[n]).zlevel;i!==d&&(i=d,a=0),s.incremental?((u=this.getLayer(d+.001,this._needsManuallyCompositing)).incremental=!0,a=1):u=this.getLayer(d+(0<a?.01:0),this._needsManuallyCompositing),u!==o&&(u.__used=!0,u.__startIndex!==n&&(u.__dirty=!0),u.__startIndex=n,u.__drawIndex=u.incremental?-1:n,e(n),o=u),s.__dirty&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=n))}e(n),this.eachBuiltinLayer(function(g,p){!g.__used&&0<g.getElementCount()&&(g.__dirty=!0,g.__startIndex=g.__endIndex=g.__drawIndex=0),g.__dirty&&g.__drawIndex<0&&(g.__drawIndex=g.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?ei(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];(o===t||o===t+.01)&&ei(this._layers[o],n[t],!0)}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(zn(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var o in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);St(this._progressiveLayers,function(a){a.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(Yo).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(this._singleCanvas&&!this._compositeManually)return this._layers[Yo].dom;var e=new Jl("image",this,(t=t||{}).pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,i=e.dom.height,o=e.ctx;this.eachLayer(function(g){g.__builtin__?o.drawImage(g.dom,0,0,n,i):g.renderToCanvas&&(e.ctx.save(),g.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var a={},s=this.storage.getDisplayList(!0),u=0;u<s.length;u++)this._doPaintEl(s[u],e,!0,a);return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var s=this.root,u=document.defaultView.getComputedStyle(s);return(s[i]||ru(u[n])||ru(s.style[n]))-(ru(u[o])||0)-(ru(u[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),o=t.getBoundingRect(),a=t.style,s=a.shadowBlur*e,u=a.shadowOffsetX*e,d=a.shadowOffsetY*e,g=a.hasStroke()?a.lineWidth:0,p=Math.max(g/2,s-u),x=Math.max(g/2,u+s),S=Math.max(g/2,s-d),C=Math.max(g/2,d+s),I=o.width+p+x,z=o.height+S+C;n.width=I*e,n.height=z*e,i.scale(e,e),i.clearRect(0,0,I,z),i.dpr=e;var O={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[p-o.x,S-o.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var V=new Po({style:{x:0,y:0,image:n}});return null!=O.position&&(V.position=t.position=O.position),null!=O.rotation&&(V.rotation=t.rotation=O.rotation),null!=O.scale&&(V.scale=t.scale=O.scale),V}},Bc.prototype={constructor:Bc,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=zn(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,o=[],a=[],s=0;s<i;s++){var u=n[s],d=u.step(t,e);d&&(o.push(d),a.push(u))}for(s=0;s<i;)n[s]._needsRemove?(n[s]=n[i-1],n.pop(),i--):s++;for(i=o.length,s=0;s<i;s++)a[s].fire(o[s]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,sd(function e(){t._running&&(sd(e),t._paused||t._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new ji(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},Fn(Bc,Ai);var ou,hd,fd=Oe.domSupported,gd=(hd={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:ou=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:kt(ou,function(t){var e=t.replace("mouse","pointer");return hd.hasOwnProperty(e)?e:t})}),_s_mouse=["mousemove","mouseup"],_s_pointer=["pointermove","pointerup"];function El(t){return"mousewheel"===t&&Oe.browser.firefox?"DOMMouseScroll":t}function pd(t){var e=t.pointerType;return"pen"===e||"touch"===e}function Zi(t){t&&(t.zrByTouch=!0)}function au(t,e){for(var n=e,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return i}function xa(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var dl=xa.prototype;dl.stopPropagation=dl.stopImmediatePropagation=dl.preventDefault=_e;var Eo={mousedown:function(t){t=ur(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=ur(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||B(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=ur(this.dom,t),B(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=ur(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout"),t.zrIsToLocalDOM=au(this,t.toElement||t.relatedTarget),this.trigger("mouseout",t)},touchstart:function(t){Zi(t=ur(this.dom,t)),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Eo.mousemove.call(this,t),Eo.mousedown.call(this,t)},touchmove:function(t){Zi(t=ur(this.dom,t)),this.handler.processGesture(t,"change"),Eo.mousemove.call(this,t)},touchend:function(t){Zi(t=ur(this.dom,t)),this.handler.processGesture(t,"end"),Eo.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&Eo.click.call(this,t)},pointerdown:function(t){Eo.mousedown.call(this,t)},pointermove:function(t){pd(t)||Eo.mousemove.call(this,t)},pointerup:function(t){Eo.mouseup.call(this,t)},pointerout:function(t){pd(t)||Eo.mouseout.call(this,t)}};St(["click","mousewheel","dblclick","contextmenu"],function(t){Eo[t]=function(e){e=ur(this.dom,e),this.trigger(t,e)}});var hl={pointermove:function(t){pd(t)||hl.mousemove.call(this,t)},pointerup:function(t){hl.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;B(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function v(t,e,n,i){t.mounted[e]=n,t.listenerOpts[e]=i,zr(t.domTarget,El(e),n,i)}function T(t){var e,n,i,a=t.mounted;for(var s in a)a.hasOwnProperty(s)&&(e=t.domTarget,n=El(s),i=a[s],kr?e.removeEventListener(n,i,t.listenerOpts[s]):e.detachEvent("on"+n,i));t.mounted={}}function B(t,e){if(t._mayPointerCapture=null,fd&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?function Lu(t,e){function n(i){v(e,i,function(o){o=za(o),au(t,o.target)||(o=function(a,s){return ur(a.dom,new xa(a,s),!0)}(t,o),e.domHandlers[i].call(t,o))},{capture:!0})}Oe.pointerEventsSupported?St(_s_pointer,n):Oe.touchEventsSupported||St(_s_mouse,n)}(t,n):T(n)}}function U(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function et(t,e){Ai.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new U(t,Eo),fd&&(this._globalHandlerScope=new U(document,hl)),this._pointerCapturing=!1,this._mayPointerCapture=null,function Hs(t,e){var n=e.domHandlers;Oe.pointerEventsSupported?St(gd.pointer,function(i){v(e,i,function(o){n[i].call(t,o)})}):(Oe.touchEventsSupported&&St(gd.touch,function(i){v(e,i,function(o){n[i].call(t,o),function(a){a.touching=!0,null!=a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}(e)})}),St(gd.mouse,function(i){v(e,i,function(o){o=za(o),e.touching||n[i].call(t,o)})}))}(this,this._localHandlerScope)}var ot=et.prototype;ot.dispose=function(){T(this._localHandlerScope),fd&&T(this._globalHandlerScope)},ot.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},Fn(et,Ai);var xt=!Oe.canvasSupported,Tt={canvas:Vd},Et={};function Ut(t,e){var n=new qt(bn(),t,e);return Et[n.id]=n}function le(t,e){Tt[t]=e}var qt=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,o=new zd,a=n.renderer;if(xt){if(!Tt.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&Tt[a]||(a="canvas");var s=new Tt[a](e,o,n,t);this.storage=o,this.painter=s;var u=Oe.node||Oe.worker?null:new et(s.getViewportRoot(),s.root);this.handler=new xo(o,s,u,s.root),this.animation=new Bc({stage:{update:Rn(this.flush,this)}}),this.animation.start();var d=o.delFromStorage,g=o.addToStorage;o.delFromStorage=function(p){d.call(o,p),p&&p.removeSelfFromZr(i)},o.addToStorage=function(p){g.call(o,p),p.addSelfToZr(i)}};qt.prototype={constructor:qt,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){this.painter.resize((t=t||{}).width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete Et[t]}(this.id)}};var re=(Object.freeze||Object)({version:"4.3.2",init:Ut,dispose:function(t){if(t)t.dispose();else{for(var e in Et)Et.hasOwnProperty(e)&&Et[e].dispose();Et={}}return this},getInstance:function(t){return Et[t]},registerPainter:le}),we=St,Me=Ln,ci=Fe,ii="series\0";function di(t){return t instanceof Array?t:null==t?[]:[t]}function Vi(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,o=n.length;i<o;i++){var a=n[i];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var Lt=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function An(t){return!Me(t)||ci(t)||t instanceof Date?t:t.value}function Ti(t,e){e=(e||[]).slice();var n=kt(t||[],function(i,o){return{exist:i}});return we(e,function(i,o){if(Me(i)){for(var a=0;a<n.length;a++)if(!n[a].option&&null!=i.id&&n[a].exist.id===i.id+"")return n[a].option=i,void(e[o]=null);for(a=0;a<n.length;a++){var s=n[a].exist;if(!(n[a].option||null!=s.id&&null!=i.id||null==i.name||So(i)||So(s)||s.name!==i.name+""))return n[a].option=i,void(e[o]=null)}}}),we(e,function(i,o){if(Me(i)){for(var a=0;a<n.length;a++)if(!n[a].option&&!So(n[a].exist)&&null==i.id){n[a].option=i;break}a>=n.length&&n.push({option:i})}}),n}function Ki(t){var e=pe();we(t,function(n,i){var o=n.exist;o&&e.set(o.id,n)}),we(t,function(n,i){var o=n.option;Ei(!o||null==o.id||!e.get(o.id)||e.get(o.id)===n,"id duplicates: "+(o&&o.id)),o&&null!=o.id&&e.set(o.id,n),n.keyInfo||(n.keyInfo={})}),we(t,function(n,i){var o=n.exist,a=n.option,s=n.keyInfo;if(Me(a)){if(s.name=null!=a.name?a.name+"":o?o.name:ii+i,o)s.id=o.id;else if(null!=a.id)s.id=a.id+"";else for(var u=0;s.id="\0"+s.name+"\0"+u++,e.get(s.id););e.set(s.id,n)}})}function xr(t){var e=t.name;return!(!e||!e.indexOf(ii))}function So(t){return Me(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function Xo(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?Fe(e.dataIndex)?kt(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?Fe(e.name)?kt(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name):void 0}function or(){var t="__\0ec_inner_"+Wa+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var Wa=0;function ta(t,e,n){if(bi(e)){var i={};i[e+"Index"]=0,e=i}var o=n&&n.defaultMainType;!o||Or(e,o+"Index")||Or(e,o+"Id")||Or(e,o+"Name")||(e[o+"Index"]=0);var a={};return we(e,function(s,u){if(s=e[u],"dataIndex"!==u&&"dataIndexInside"!==u){var d=u.match(/^(\w+)(Index|Id|Name)$/)||[],g=d[1],p=(d[2]||"").toLowerCase();if(!(!g||!p||null==s||"index"===p&&"none"===s||n&&n.includeMainTypes&&zn(n.includeMainTypes,g)<0)){var x={mainType:g};"index"===p&&"all"===s||(x[p]=s);var S=t.queryComponents(x);a[g+"Models"]=S,a[g+"Model"]=S[0]}}else a[u]=s}),a}function Or(t,e){return t&&t.hasOwnProperty(e)}function ba(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function ws(t){return"auto"===t?Oe.domSupported?"html":"richText":t||"html"}function ja(t,e){var n=pe(),i=[];return St(t,function(o){var a=e(o);(n.get(a)||(i.push(a),n.set(a,[]))).push(o)}),{keys:i,buckets:n}}var si="___EC__COMPONENT__CONTAINER___";function ca(t){var e={main:"",sub:""};return t&&(t=t.split("."),e.main=t[0]||"",e.sub=t[1]||""),e}function Vs(t){(t.$constructor=t).extend=function(e){function n(){e.$constructor?e.$constructor.apply(this,arguments):i.apply(this,arguments)}var i=this;return En(n.prototype,e),n.extend=this.extend,n.superCall=zc,n.superApply=Wd,ki(n,this),n.superClass=i,n}}var zo=0;function is(t){var e=["__\0is_clz",zo++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!(!n||!n[e])}}function zc(t,e){var n=mo(arguments,2);return this.superClass.prototype[e].apply(t,n)}function Wd(t,e,n){return this.superClass.prototype[e].apply(t,n)}function Hr(t,e){e=e||{};var n={};if(t.registerClass=function(o,a){return a&&(Ei(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(s=a),'componentType "'+s+'" illegal'),(a=ca(a)).sub?a.sub!==si&&((function(s){var u=n[s.main];return u&&u[si]||((u=n[s.main]={})[si]=!0),u}(a))[a.sub]=o):n[a.main]=o),o;var s},t.getClass=function(o,a,s){var u=n[o];if(u&&u[si]&&(u=a?u[a]:null),s&&!u)throw new Error(a?"Component "+o+"."+(a||"")+" not exists. Load it first.":o+".type should be specified.");return u},t.getClassesByMainType=function(o){o=ca(o);var a=[],s=n[o.main];return s&&s[si]?St(s,function(u,d){d!==si&&a.push(u)}):a.push(s),a},t.hasClass=function(o){return o=ca(o),!!n[o.main]},t.getAllClassMainTypes=function(){var o=[];return St(n,function(a,s){o.push(s)}),o},t.hasSubTypes=function(o){o=ca(o);var a=n[o.main];return a&&a[si]},t.parseClassType=ca,e.registerWhenExtend){var i=t.extend;i&&(t.extend=function(o){var a=i.call(this,o);return t.registerClass(a,o.type)})}return t}function ho(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(n,i,o){for(var a={},s=0;s<t.length;s++){var u=t[s][1];if(!(i&&0<=zn(i,u)||o&&zn(o,u)<0)){var d=n.getShallow(u);null!=d&&(a[t[s][0]]=d)}}return a}}var Ws=ho([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),su={getLineStyle:function(t){var e=Ws(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),i=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[i,i]:[n,n])}},gc=ho([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),pc={getAreaStyle:function(t,e){return gc(this,t,e)}},Ou=Math.pow,js=Math.sqrt,ng=js(3),Ch=1/3,fl=Xe(),rs=Xe(),Nl=Xe();function Gs(t){return-1e-8<t&&t<1e-8}function eo(t){return 1e-8<t||t<-1e-8}function Ss(t,e,n,i,o){var a=1-o;return a*a*(a*t+3*o*e)+o*o*(o*i+3*a*n)}function jd(t,e,n,i,o){var a=1-o;return 3*(((e-t)*a+2*(n-e)*o)*a+(i-n)*o*o)}function Gd(t,e,n,i,o){var a=6*n-12*e+6*t,s=9*e+3*i-3*t-9*n,u=3*e-3*t,d=0;if(Gs(s))eo(a)&&0<=(p=-u/a)&&p<=1&&(o[d++]=p);else{var g=a*a-4*s*u;if(Gs(g))o[0]=-a/(2*s);else if(0<g){var p,x=js(g),S=(-a-x)/(2*s);0<=(p=(-a+x)/(2*s))&&p<=1&&(o[d++]=p),0<=S&&S<=1&&(o[d++]=S)}}return d}function Fc(t,e,n,i,o,a){var s=(e-t)*o+t,u=(n-e)*o+e,d=(i-n)*o+n,g=(u-s)*o+s,p=(d-u)*o+u,x=(p-g)*o+g;a[0]=t,a[1]=s,a[2]=g,a[3]=x,a[4]=x,a[5]=p,a[6]=d,a[7]=i}function fo(t,e,n,i){var o=1-i;return o*(o*t+2*i*e)+i*i*n}function Ud(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function md(t,e,n){var i=t+n-2*e;return 0==i?.5:(t-e)/i}function Ga(t,e,n,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,u=(s-a)*i+a;o[0]=t,o[1]=a,o[2]=u,o[3]=u,o[4]=s,o[5]=n}var $r=Math.min,Zr=Math.max,gl=Math.sin,da=Math.cos,Rl=2*Math.PI,qd=Xe(),Fo=Xe(),Yd=Xe();function lu(t,e,n){if(0!==t.length){var i,o=t[0],a=o[0],s=o[0],u=o[1],d=o[1];for(i=1;i<t.length;i++)a=$r(a,(o=t[i])[0]),s=Zr(s,o[0]),u=$r(u,o[1]),d=Zr(d,o[1]);e[0]=a,e[1]=u,n[0]=s,n[1]=d}}function _a(t,e,n,i,o,a){o[0]=$r(t,n),o[1]=$r(e,i),a[0]=Zr(t,n),a[1]=Zr(e,i)}var Xd=[],vd=[];function bm(t,e,n,i,o,a,s,u,d,g){var p,x=Gd,S=Ss,C=x(t,n,o,s,Xd);for(d[0]=1/0,d[1]=1/0,g[0]=-1/0,g[1]=-1/0,p=0;p<C;p++){var I=S(t,n,o,s,Xd[p]);d[0]=$r(I,d[0]),g[0]=Zr(I,g[0])}for(C=x(e,i,a,u,vd),p=0;p<C;p++){var z=S(e,i,a,u,vd[p]);d[1]=$r(z,d[1]),g[1]=Zr(z,g[1])}d[0]=$r(t,d[0]),g[0]=Zr(t,g[0]),d[0]=$r(s,d[0]),g[0]=Zr(s,g[0]),d[1]=$r(e,d[1]),g[1]=Zr(e,g[1]),d[1]=$r(u,d[1]),g[1]=Zr(u,g[1])}function of(t,e,n,i,o,a,s,u,d){var g=$i,p=_r,x=Math.abs(o-a);if(x%Rl<1e-4&&1e-4<x)return u[0]=t-n,u[1]=e-i,d[0]=t+n,void(d[1]=e+i);if(qd[0]=da(o)*n+t,qd[1]=gl(o)*i+e,Fo[0]=da(a)*n+t,Fo[1]=gl(a)*i+e,g(u,qd,Fo),p(d,qd,Fo),(o%=Rl)<0&&(o+=Rl),(a%=Rl)<0&&(a+=Rl),a<o&&!s?a+=Rl:o<a&&s&&(o+=Rl),s){var S=a;a=o,o=S}for(var C=0;C<a;C+=Math.PI/2)o<C&&(Yd[0]=da(C)*n+t,Yd[1]=gl(C)*i+e,g(u,Yd,u),p(d,Yd,d))}var Co={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Us=[],Ll=[],Cs=[],Ho=[],af=Math.min,Ea=Math.max,Ol=Math.cos,mc=Math.sin,Hc=Math.sqrt,Bu=Math.abs,Mh="undefined"!=typeof Float32Array,os=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};function Bl(t,e,n,i,o,a,s){if(0===o)return!1;var d,u=o;if(e+u<s&&i+u<s||s<e-u&&s<i-u||t+u<a&&n+u<a||a<t-u&&a<n-u)return!1;if(t===n)return Math.abs(a-t)<=u/2;var g=(d=(e-i)/(t-n))*a-s+(t*i-n*e)/(t-n);return g*g/(d*d+1)<=u/2*u/2}function Th(t,e,n,i,o,a,s,u,d,g,p){if(0===d)return!1;var x=d;return!(e+x<p&&i+x<p&&a+x<p&&u+x<p||p<e-x&&p<i-x&&p<a-x&&p<u-x||t+x<g&&n+x<g&&o+x<g&&s+x<g||g<t-x&&g<n-x&&g<o-x&&g<s-x)&&function(S,C,I,z,O,V,Y,G,tt,Q,nt){var it,ct,vt,_t,At,Ot=.005,Bt=1/0;fl[0]=tt,fl[1]=Q;for(var Vt=0;Vt<1;Vt+=.05)rs[0]=Ss(S,I,O,Y,Vt),rs[1]=Ss(C,z,V,G,Vt),(_t=gi(fl,rs))<Bt&&(it=Vt,Bt=_t);Bt=1/0;for(var $t=0;$t<32&&!(Ot<1e-4);$t++)vt=it+Ot,rs[0]=Ss(S,I,O,Y,ct=it-Ot),rs[1]=Ss(C,z,V,G,ct),_t=gi(rs,fl),0<=ct&&_t<Bt?(it=ct,Bt=_t):(Nl[0]=Ss(S,I,O,Y,vt),Nl[1]=Ss(C,z,V,G,vt),At=gi(Nl,fl),vt<=1&&At<Bt?(it=vt,Bt=At):Ot*=.5);return js(Bt)}(t,e,n,i,o,a,s,u,g,p)<=x/2}function uu(t,e,n,i,o,a,s,u,d){if(0===s)return!1;var g=s;return!(e+g<d&&i+g<d&&a+g<d||d<e-g&&d<i-g&&d<a-g||t+g<u&&n+g<u&&o+g<u||u<t-g&&u<n-g&&u<o-g)&&function(p,x,S,C,I,z,O,V,Y){var G,tt=.005,Q=1/0;fl[0]=O,fl[1]=V;for(var nt=0;nt<1;nt+=.05)rs[0]=fo(p,S,I,nt),rs[1]=fo(x,C,z,nt),(_t=gi(fl,rs))<Q&&(G=nt,Q=_t);Q=1/0;for(var it=0;it<32&&!(tt<1e-4);it++){var ct=G-tt,vt=G+tt;rs[0]=fo(p,S,I,ct),rs[1]=fo(x,C,z,ct);var _t=gi(rs,fl);if(0<=ct&&_t<Q)G=ct,Q=_t;else{Nl[0]=fo(p,S,I,vt),Nl[1]=fo(x,C,z,vt);var At=gi(Nl,fl);vt<=1&&At<Q?(G=vt,Q=At):tt*=.5}}return js(Q)}(t,e,n,i,o,a,u,d)<=g/2}os.prototype={constructor:os,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){this._ux=Bu((n=n||0)/Tu/t)||0,this._uy=Bu(n/Tu/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(Co.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=Bu(t-this._xi)>this._ux||Bu(e-this._yi)>this._uy||this._len<5;return this.addData(Co.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,o,a){return this.addData(Co.C,t,e,n,i,o,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,o,a):this._ctx.bezierCurveTo(t,e,n,i,o,a)),this._xi=o,this._yi=a,this},quadraticCurveTo:function(t,e,n,i){return this.addData(Co.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,o,a){return this.addData(Co.A,t,e,n,n,i,o-i,0,a?0:1),this._ctx&&this._ctx.arc(t,e,n,i,o,a),this._xi=Ol(o)*n+t,this._yi=mc(o)*n+e,this},arcTo:function(t,e,n,i,o){return this._ctx&&this._ctx.arcTo(t,e,n,i,o),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(Co.R,t,e,n,i),this},closePath:function(){this.addData(Co.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!Mh||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,o=0;o<e;o++)n+=t[o].len();for(Mh&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),o=0;o<e;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,o=this._dashSum,a=this._dashOffset,s=this._lineDash,u=this._ctx,d=this._xi,g=this._yi,p=t-d,x=e-g,S=Hc(p*p+x*x),C=d,I=g,z=s.length;for(a<0&&(a=o+a),C-=(a%=o)*(p/=S),I-=a*(x/=S);0<p&&C<=t||p<0&&t<=C||0===p&&(0<x&&I<=e||x<0&&e<=I);)C+=p*(n=s[i=this._dashIdx]),I+=x*n,this._dashIdx=(i+1)%z,0<p&&C<d||p<0&&d<C||0<x&&I<g||x<0&&g<I||u[i%2?"moveTo":"lineTo"](0<=p?af(C,t):Ea(C,t),0<=x?af(I,e):Ea(I,e));this._dashOffset=-Hc((p=C-t)*p+(x=I-e)*x)},_dashedBezierTo:function(t,e,n,i,o,a){var s,u,d,g,p,x=this._dashSum,S=this._dashOffset,C=this._lineDash,I=this._ctx,z=this._xi,O=this._yi,V=Ss,Y=0,G=this._dashIdx,tt=C.length,Q=0;for(S<0&&(S=x+S),S%=x,s=0;s<1;s+=.1)u=V(z,t,n,o,s+.1)-V(z,t,n,o,s),d=V(O,e,i,a,s+.1)-V(O,e,i,a,s),Y+=Hc(u*u+d*d);for(;G<tt&&!(S<(Q+=C[G]));G++);for(s=(Q-S)/Y;s<=1;)g=V(z,t,n,o,s),p=V(O,e,i,a,s),G%2?I.moveTo(g,p):I.lineTo(g,p),s+=C[G]/Y,G=(G+1)%tt;G%2!=0&&I.lineTo(o,a),this._dashOffset=-Hc((u=o-g)*u+(d=a-p)*d)},_dashedQuadraticTo:function(t,e,n,i){var o=n,a=i;n=(n+2*t)/3,i=(i+2*e)/3,this._dashedBezierTo(t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,n,i,o,a)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,Mh&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Us[0]=Us[1]=Cs[0]=Cs[1]=Number.MAX_VALUE,Ll[0]=Ll[1]=Ho[0]=Ho[1]=-Number.MAX_VALUE;for(var t,e,n,i,o,a,s,u,d,g,p,x,S,C,I=this.data,z=0,O=0,V=0,Y=0,G=0;G<I.length;){var tt=I[G++];switch(1===G&&(V=z=I[G],Y=O=I[G+1]),tt){case Co.M:z=V=I[G++],O=Y=I[G++],Cs[0]=V,Cs[1]=Y,Ho[0]=V,Ho[1]=Y;break;case Co.L:_a(z,O,I[G],I[G+1],Cs,Ho),z=I[G++],O=I[G++];break;case Co.C:bm(z,O,I[G++],I[G++],I[G++],I[G++],I[G],I[G+1],Cs,Ho),z=I[G++],O=I[G++];break;case Co.Q:e=O,n=I[G++],i=I[G++],a=I[G+1],s=Cs,u=Ho,g=d=void 0,g=fo,p=Zr($r((d=md)(t=z,n,o=I[G]),1),0),x=Zr($r(d(e,i,a),1),0),S=g(t,n,o,p),C=g(e,i,a,x),s[0]=$r(t,o,S),s[1]=$r(e,a,C),u[0]=Zr(t,o,S),u[1]=Zr(e,a,C),z=I[G++],O=I[G++];break;case Co.A:var Q=I[G++],nt=I[G++],it=I[G++],ct=I[G++],vt=I[G++],_t=I[G++]+vt;G+=1;var At=1-I[G++];1===G&&(V=Ol(vt)*it+Q,Y=mc(vt)*ct+nt),of(Q,nt,it,ct,vt,_t,At,Cs,Ho),z=Ol(_t)*it+Q,O=mc(_t)*ct+nt;break;case Co.R:_a(V=z=I[G++],Y=O=I[G++],V+I[G++],Y+I[G++],Cs,Ho);break;case Co.Z:z=V,O=Y}$i(Us,Us,Cs),_r(Ll,Ll,Ho)}return 0===G&&(Us[0]=Us[1]=Ll[0]=Ll[1]=0),new Yi(Us[0],Us[1],Ll[0]-Us[0],Ll[1]-Us[1])},rebuildPath:function(t){for(var e,n,i,o,a,s,u=this.data,d=this._ux,g=this._uy,p=this._len,x=0;x<p;){var S=u[x++];switch(1===x&&(e=i=u[x],n=o=u[x+1]),S){case Co.M:e=i=u[x++],n=o=u[x++],t.moveTo(i,o);break;case Co.L:a=u[x++],s=u[x++],(Bu(a-i)>d||Bu(s-o)>g||x===p-1)&&(t.lineTo(a,s),i=a,o=s);break;case Co.C:t.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]),i=u[x-2],o=u[x-1];break;case Co.Q:t.quadraticCurveTo(u[x++],u[x++],u[x++],u[x++]),i=u[x-2],o=u[x-1];break;case Co.A:var C=u[x++],I=u[x++],z=u[x++],O=u[x++],V=u[x++],Y=u[x++],G=u[x++],tt=u[x++],Q=O<z?z:O,nt=O<z?1:z/O,it=O<z?O/z:1,ct=V+Y;.001<Math.abs(z-O)?(t.translate(C,I),t.rotate(G),t.scale(nt,it),t.arc(0,0,Q,V,ct,1-tt),t.scale(1/nt,1/it),t.rotate(-G),t.translate(-C,-I)):t.arc(C,I,Q,V,ct,1-tt),1===x&&(e=Ol(V)*z+C,n=mc(V)*O+I),i=Ol(ct)*z+C,o=mc(ct)*O+I;break;case Co.R:e=i=u[x],n=o=u[x+1],t.rect(u[x++],u[x++],u[x++],u[x++]);break;case Co.Z:t.closePath(),i=e,o=n}}}},os.CMD=Co;var Dh=2*Math.PI;function ea(t){return(t%=Dh)<0&&(t+=Dh),t}var Vc=2*Math.PI;function vc(t,e,n,i,o,a,s,u,d){if(0===s)return!1;var g=s;u-=t,d-=e;var p=Math.sqrt(u*u+d*d);if(n<p-g||p+g<n)return!1;if(Math.abs(i-o)%Vc<1e-4)return!0;if(a){var x=i;i=ea(o),o=ea(x)}else i=ea(i),o=ea(o);o<i&&(o+=Vc);var S=Math.atan2(d,u);return S<0&&(S+=Vc),i<=S&&S<=o||i<=S+Vc&&S+Vc<=o}function zu(t,e,n,i,o,a){if(e<a&&i<a||a<e&&a<i||i===e)return 0;var s=i<e?1:-1,u=(a-e)/(i-e);1!=u&&0!=u||(s=i<e?.5:-.5);var d=u*(n-t)+t;return d===o?1/0:o<d?s:0}var No=os.CMD,Ms=2*Math.PI,wa=[-1,-1,-1],as=[-1,-1];function ig(t,e,n,i,o,a,s,u,d,g){if(e<g&&i<g&&a<g&&u<g||g<e&&g<i&&g<a&&g<u)return 0;var p,x=function(G,tt,Q,nt,it,ct){var vt=nt+3*(tt-Q)-G,_t=3*(Q-2*tt+G),At=3*(tt-G),Ot=G-it,Bt=_t*_t-3*vt*At,Vt=_t*At-9*vt*Ot,$t=At*At-3*_t*Ot,Jt=0;if(Gs(Bt)&&Gs(Vt))Gs(_t)?ct[0]=0:0<=(fi=-At/_t)&&fi<=1&&(ct[Jt++]=fi);else{var Yt=Vt*Vt-4*Bt*$t;if(Gs(Yt)){var ue=Vt/Bt,Re=-ue/2;0<=(fi=-_t/vt+ue)&&fi<=1&&(ct[Jt++]=fi),0<=Re&&Re<=1&&(ct[Jt++]=Re)}else if(0<Yt){var ze=js(Yt),Ie=Bt*_t+1.5*vt*(-Vt+ze),Je=Bt*_t+1.5*vt*(-Vt-ze);0<=(fi=(-_t-((Ie=Ie<0?-Ou(-Ie,Ch):Ou(Ie,Ch))+(Je=Je<0?-Ou(-Je,Ch):Ou(Je,Ch))))/(3*vt))&&fi<=1&&(ct[Jt++]=fi)}else{var mn=(2*Bt*_t-3*vt*Vt)/(2*js(Bt*Bt*Bt)),hi=Math.acos(mn)/3,We=js(Bt),ai=Math.cos(hi),fi=(-_t-2*We*ai)/(3*vt),Oi=(Re=(-_t+We*(ai+ng*Math.sin(hi)))/(3*vt),(-_t+We*(ai-ng*Math.sin(hi)))/(3*vt));0<=fi&&fi<=1&&(ct[Jt++]=fi),0<=Re&&Re<=1&&(ct[Jt++]=Re),0<=Oi&&Oi<=1&&(ct[Jt++]=Oi)}}return Jt}(e,i,a,u,g,wa);if(0===x)return 0;for(var S,C,I=0,z=-1,O=0;O<x;O++){var V=wa[O],Y=0===V||1===V?.5:1;Ss(t,n,o,s,V)<d||(z<0&&(z=Gd(e,i,a,u,as),as[1]<as[0]&&1<z&&(p=as[0],as[0]=as[1],as[1]=p),S=Ss(e,i,a,u,as[0]),1<z&&(C=Ss(e,i,a,u,as[1]))),I+=2===z?V<as[0]?S<e?Y:-Y:V<as[1]?C<S?Y:-Y:u<C?Y:-Y:V<as[0]?S<e?Y:-Y:u<S?Y:-Y)}return I}function _(t,e,n,i,o,a,s,u){if(e<u&&i<u&&a<u||u<e&&u<i&&u<a)return 0;var d=function(I,z,O,V,Y){var G=I-2*z+O,tt=2*(z-I),Q=I-V,nt=0;if(Gs(G))eo(tt)&&0<=(ct=-Q/tt)&&ct<=1&&(Y[nt++]=ct);else{var it=tt*tt-4*G*Q;if(Gs(it))0<=(ct=-tt/(2*G))&&ct<=1&&(Y[nt++]=ct);else if(0<it){var ct,vt=js(it),_t=(-tt-vt)/(2*G);0<=(ct=(-tt+vt)/(2*G))&&ct<=1&&(Y[nt++]=ct),0<=_t&&_t<=1&&(Y[nt++]=_t)}}return nt}(e,i,a,u,wa);if(0===d)return 0;var g=md(e,i,a);if(0<=g&&g<=1){for(var p=0,x=fo(e,i,a,g),S=0;S<d;S++){var C=0===wa[S]||1===wa[S]?.5:1;fo(t,n,o,wa[S])<s||(p+=wa[S]<g?x<e?C:-C:a<x?C:-C)}return p}return C=0===wa[0]||1===wa[0]?.5:1,fo(t,n,o,wa[0])<s?0:a<e?C:-C}function f(t,e,n,i,o,a,s,u){if(n<(u-=e)||u<-n)return 0;var d=Math.sqrt(n*n-u*u);wa[0]=-d,wa[1]=d;var g=Math.abs(i-o);if(g<1e-4)return 0;if(g%Ms<1e-4){o=Ms;var p=a?1:-1;return s>=wa[i=0]+t&&s<=wa[1]+t?p:0}a?(d=i,i=ea(o),o=ea(d)):(i=ea(i),o=ea(o)),o<i&&(o+=Ms);for(var x=0,S=0;S<2;S++){var C=wa[S];if(s<C+t){var I=Math.atan2(u,C);p=a?1:-1,I<0&&(I=Ms+I),(i<=I&&I<=o||i<=I+Ms&&I+Ms<=o)&&(I>Math.PI/2&&I<1.5*Math.PI&&(p=-p),x+=p)}}return x}function y(t,e,n,i,o){for(var a=0,s=0,u=0,d=0,g=0,p=0;p<t.length;){var x=t[p++];switch(x===No.M&&1<p&&(n||(a+=zu(s,u,d,g,i,o))),1===p&&(d=s=t[p],g=u=t[p+1]),x){case No.M:s=d=t[p++],u=g=t[p++];break;case No.L:if(n){if(Bl(s,u,t[p],t[p+1],e,i,o))return!0}else a+=zu(s,u,t[p],t[p+1],i,o)||0;s=t[p++],u=t[p++];break;case No.C:if(n){if(Th(s,u,t[p++],t[p++],t[p++],t[p++],t[p],t[p+1],e,i,o))return!0}else a+=ig(s,u,t[p++],t[p++],t[p++],t[p++],t[p],t[p+1],i,o)||0;s=t[p++],u=t[p++];break;case No.Q:if(n){if(uu(s,u,t[p++],t[p++],t[p],t[p+1],e,i,o))return!0}else a+=_(s,u,t[p++],t[p++],t[p],t[p+1],i,o)||0;s=t[p++],u=t[p++];break;case No.A:var S=t[p++],C=t[p++],I=t[p++],z=t[p++],O=t[p++],V=t[p++];p+=1;var Y=1-t[p++],G=Math.cos(O)*I+S,tt=Math.sin(O)*z+C;1<p?a+=zu(s,u,G,tt,i,o):(d=G,g=tt);var Q=(i-S)*z/I+S;if(n){if(vc(S,C,z,O,O+V,Y,e,Q,o))return!0}else a+=f(S,C,z,O,O+V,Y,Q,o);s=Math.cos(O+V)*I+S,u=Math.sin(O+V)*z+C;break;case No.R:if(d=s=t[p++],g=u=t[p++],G=d+t[p++],tt=g+t[p++],n){if(Bl(d,g,G,g,e,i,o)||Bl(G,g,G,tt,e,i,o)||Bl(G,tt,d,tt,e,i,o)||Bl(d,tt,d,g,e,i,o))return!0}else a+=zu(G,g,G,tt,i,o),a+=zu(d,tt,d,g,i,o);break;case No.Z:if(n){if(Bl(s,u,d,g,e,i,o))return!0}else a+=zu(s,u,d,g,i,o);s=d,u=g}}return n||Math.abs(u-g)<1e-4||(a+=zu(s,u,d,g,i,o)||0),0!==a}var w=Iu.prototype.getCanvasPattern,A=Math.abs,E=new os(!0);function R(t){ya.call(this,t),this.path=null}function j(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}R.prototype={constructor:R,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,i=this.style,o=this.path||E,a=i.hasStroke(),s=i.hasFill(),u=i.fill,d=i.stroke,g=s&&!!u.colorStops,p=a&&!!d.colorStops,x=s&&!!u.image,S=a&&!!d.image;i.bind(t,this,e),this.setTransform(t),this.__dirty&&(g&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(t,u,n)),p&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,d,n))),g?t.fillStyle=this._fillGradient:x&&(t.fillStyle=w.call(u,t)),p?t.strokeStyle=this._strokeGradient:S&&(t.strokeStyle=w.call(d,t));var C=i.lineDash,I=i.lineDashOffset,z=!!t.setLineDash,O=this.getGlobalScale();if(o.setScale(O[0],O[1],this.segmentIgnoreThreshold),this.__dirtyPath||C&&!z&&a?(o.beginPath(t),C&&!z&&(o.setLineDash(C),o.setLineDashOffset(I)),this.buildPath(o,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),s)if(null!=i.fillOpacity){var V=t.globalAlpha;t.globalAlpha=i.fillOpacity*i.opacity,o.fill(t),t.globalAlpha=V}else o.fill(t);C&&z&&(t.setLineDash(C),t.lineDashOffset=I),a&&(null!=i.strokeOpacity?(V=t.globalAlpha,t.globalAlpha=i.strokeOpacity*i.opacity,o.stroke(t),t.globalAlpha=V):o.stroke(t)),C&&z&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new os},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var i=this.path;i=i||(this.path=new os),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var o=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){o.copy(t);var a=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(a=Math.max(a,this.strokeContainThreshold||4)),1e-10<s&&(o.width+=a/s,o.height+=a/s,o.x-=a/s/2,o.y-=a/s/2)}return o}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),o=this.style;if(i.contain(t=n[0],e=n[1])){var a=this.path.data;if(o.hasStroke()){var s=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(1e-10<u&&(o.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),y(a,s/u,!0,t,e)))return!0}if(o.hasFill())return y(a,0,!1,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):ya.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(Ln(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<A(t[0]-1)&&1e-10<A(t[3]-1)?Math.sqrt(A(t[0]*t[3]-t[2]*t[1])):1}},R.extend=function(t){function e(i){R.call(this,i),t.style&&this.style.extendFrom(t.style,!1);var o=t.shape;if(o){this.shape=this.shape||{};var a=this.shape;for(var s in o)!a.hasOwnProperty(s)&&o.hasOwnProperty(s)&&(a[s]=o[s])}t.init&&t.init.call(this,i)}for(var n in ki(e,R),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},ki(R,ya);var $=os.CMD,K=[[],[],[]],st=Math.sqrt,ut=Math.atan2,bt=Math.sqrt,Mt=Math.sin,It=Math.cos,Nt=Math.PI,Gt=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(j(t)*j(e))},ne=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Gt(t,e))};function de(t,e,n,i,o,a,s,u,d,g,p){var x=d*(Nt/180),S=It(x)*(t-n)/2+Mt(x)*(e-i)/2,C=-1*Mt(x)*(t-n)/2+It(x)*(e-i)/2,I=S*S/(s*s)+C*C/(u*u);1<I&&(s*=bt(I),u*=bt(I));var z=(o===a?-1:1)*bt((s*s*(u*u)-s*s*(C*C)-u*u*(S*S))/(s*s*(C*C)+u*u*(S*S)))||0,O=z*s*C/u,V=z*-u*S/s,Y=(t+n)/2+It(x)*O-Mt(x)*V,G=(e+i)/2+Mt(x)*O+It(x)*V,tt=ne([1,0],[(S-O)/s,(C-V)/u]),Q=[(S-O)/s,(C-V)/u],nt=[(-1*S-O)/s,(-1*C-V)/u],it=ne(Q,nt);Gt(Q,nt)<=-1&&(it=Nt),1<=Gt(Q,nt)&&(it=0),0===a&&0<it&&(it-=2*Nt),1===a&&it<0&&(it+=2*Nt),p.addData(g,Y,G,s,u,tt,it,x,a)}var ye=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,qe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function $e(t,e){var n=function(i){if(!i)return new os;for(var o,a=0,s=0,u=a,d=s,g=new os,p=os.CMD,x=i.match(ye),S=0;S<x.length;S++){for(var C,I=x[S],z=I.charAt(0),O=I.match(qe)||[],V=O.length,Y=0;Y<V;Y++)O[Y]=parseFloat(O[Y]);for(var G=0;G<V;){var tt,Q,nt,it,ct,vt,_t,At=a,Ot=s;switch(z){case"l":a+=O[G++],s+=O[G++],g.addData(C=p.L,a,s);break;case"L":a=O[G++],s=O[G++],g.addData(C=p.L,a,s);break;case"m":a+=O[G++],s+=O[G++],g.addData(C=p.M,a,s),u=a,d=s,z="l";break;case"M":a=O[G++],s=O[G++],g.addData(C=p.M,a,s),u=a,d=s,z="L";break;case"h":a+=O[G++],g.addData(C=p.L,a,s);break;case"H":a=O[G++],g.addData(C=p.L,a,s);break;case"v":s+=O[G++],g.addData(C=p.L,a,s);break;case"V":s=O[G++],g.addData(C=p.L,a,s);break;case"C":g.addData(C=p.C,O[G++],O[G++],O[G++],O[G++],O[G++],O[G++]),a=O[G-2],s=O[G-1];break;case"c":g.addData(C=p.C,O[G++]+a,O[G++]+s,O[G++]+a,O[G++]+s,O[G++]+a,O[G++]+s),a+=O[G-2],s+=O[G-1];break;case"S":tt=a,Q=s;var Bt=g.len(),Vt=g.data;o===p.C&&(tt+=a-Vt[Bt-4],Q+=s-Vt[Bt-3]),At=O[G++],Ot=O[G++],a=O[G++],s=O[G++],g.addData(C=p.C,tt,Q,At,Ot,a,s);break;case"s":tt=a,Q=s,Bt=g.len(),Vt=g.data,o===p.C&&(tt+=a-Vt[Bt-4],Q+=s-Vt[Bt-3]),At=a+O[G++],Ot=s+O[G++],a+=O[G++],s+=O[G++],g.addData(C=p.C,tt,Q,At,Ot,a,s);break;case"Q":At=O[G++],Ot=O[G++],a=O[G++],s=O[G++],g.addData(C=p.Q,At,Ot,a,s);break;case"q":At=O[G++]+a,Ot=O[G++]+s,a+=O[G++],s+=O[G++],g.addData(C=p.Q,At,Ot,a,s);break;case"T":tt=a,Q=s,Bt=g.len(),Vt=g.data,o===p.Q&&(tt+=a-Vt[Bt-4],Q+=s-Vt[Bt-3]),a=O[G++],s=O[G++],g.addData(C=p.Q,tt,Q,a,s);break;case"t":tt=a,Q=s,Bt=g.len(),Vt=g.data,o===p.Q&&(tt+=a-Vt[Bt-4],Q+=s-Vt[Bt-3]),a+=O[G++],s+=O[G++],g.addData(C=p.Q,tt,Q,a,s);break;case"A":nt=O[G++],it=O[G++],ct=O[G++],vt=O[G++],_t=O[G++],de(At=a,Ot=s,a=O[G++],s=O[G++],vt,_t,nt,it,ct,C=p.A,g);break;case"a":nt=O[G++],it=O[G++],ct=O[G++],vt=O[G++],_t=O[G++],de(At=a,Ot=s,a+=O[G++],s+=O[G++],vt,_t,nt,it,ct,C=p.A,g)}}"z"!==z&&"Z"!==z||(g.addData(C=p.Z),a=u,s=d),o=C}return g.toStatic(),g}(t);return(e=e||{}).buildPath=function(i){if(i.setData)i.setData(n.data),(o=i.getContext())&&i.rebuildPath(o);else{var o=i;n.rebuildPath(o)}},e.applyTransform=function(i){(function(t,e){var n,i,o,a,s,u=t.data,d=$.M,g=$.C,p=$.L,x=$.R,S=$.A,C=$.Q;for(a=o=0;o<u.length;){switch(n=u[o++],a=o,i=0,n){case d:case p:i=1;break;case g:i=3;break;case C:i=2;break;case S:var I=e[4],z=e[5],O=st(e[0]*e[0]+e[1]*e[1]),V=st(e[2]*e[2]+e[3]*e[3]),Y=ut(-e[1]/V,e[0]/O);u[o]*=O,u[o++]+=I,u[o]*=V,u[o++]+=z,u[o++]*=O,u[o++]*=V,u[o++]+=Y,u[o++]+=Y,a=o+=2;break;case x:G[0]=u[o++],G[1]=u[o++],Wi(G,G,e),u[a++]=G[0],u[a++]=G[1],G[0]+=u[o++],G[1]+=u[o++],Wi(G,G,e),u[a++]=G[0],u[a++]=G[1]}for(s=0;s<i;s++){var G;(G=K[s])[0]=u[o++],G[1]=u[o++],Wi(G,G,e),u[a++]=G[0],u[a++]=G[1]}}})(n,i),this.dirty(!0)},e}function wn(t,e){return new R($e(t,e))}var rn=function(t){ya.call(this,t)};function $n(t){return Oe.browser.ie&&11<=Oe.browser.version?function(){var e,n=this.__clipPaths,i=this.style;if(n)for(var o=0;o<n.length;o++){var a=n[o],s=a&&a.shape,u=a&&a.type;if(s&&("sector"===u&&s.startAngle===s.endAngle||"rect"===u&&(!s.width||!s.height))){for(var d=0;d<ni.length;d++)ni[d][2]=i[ni[d][0]],i[ni[d][0]]=ni[d][1];e=!0;break}}if(t.apply(this,arguments),e)for(d=0;d<ni.length;d++)i[ni[d][0]]=ni[d][2]}:t}rn.prototype={constructor:rn,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Nu(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),iu(i,n)?(this.setTransform(t),nu(this,t,i,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=0},getBoundingRect:function(){var t=this.style;if(this.__dirty&&Nu(t),!this._rect){var e=t.text;null!=e?e+="":e="";var n=al(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,dd(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},ki(rn,ya);var un=R.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),ni=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Kn=R.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:$n(R.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,o=Math.max(e.r0||0,0),a=Math.max(e.r,0),s=e.startAngle,u=e.endAngle,d=e.clockwise,g=Math.cos(s),p=Math.sin(s);t.moveTo(g*o+n,p*o+i),t.lineTo(g*a+n,p*a+i),t.arc(n,i,a,s,u,!d),t.lineTo(Math.cos(u)*o+n,Math.sin(u)*o+i),0!==o&&t.arc(n,i,o,u,s,d),t.closePath()}}),oi=R.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,o,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,o,!0)}});function Tn(t,e,n,i,o,a,s){var u=.5*(n-t),d=.5*(i-e);return(2*(e-n)+u+d)*s+(-3*(e-n)-2*u-d)*a+u*o+e}function qn(t,e,n){var i=e.points,o=e.smooth;if(i&&2<=i.length){if(o&&"spline"!==o){var a=function(S,C,I,z){var O,V,Y,G,tt=[],Q=[],nt=[],it=[];if(z){Y=[1/0,1/0],G=[-1/0,-1/0];for(var ct=0,vt=S.length;ct<vt;ct++)$i(Y,Y,S[ct]),_r(G,G,S[ct]);$i(Y,Y,z[0]),_r(G,G,z[1])}for(ct=0,vt=S.length;ct<vt;ct++){var _t=S[ct];if(I)O=S[ct?ct-1:vt-1],V=S[(ct+1)%vt];else{if(0===ct||ct===vt-1){tt.push(je(S[ct]));continue}O=S[ct-1],V=S[ct+1]}Jn(Q,V,O),hr(Q,Q,C);var At=vr(_t,O),Ot=vr(_t,V),Bt=At+Ot;0!==Bt&&(At/=Bt,Ot/=Bt),hr(nt,Q,-At),hr(it,Q,Ot);var Vt=gn([],_t,nt),$t=gn([],_t,it);z&&(_r(Vt,Vt,Y),$i(Vt,Vt,G),_r($t,$t,Y),$i($t,$t,G)),tt.push(Vt),tt.push($t)}return I&&tt.push(tt.shift()),tt}(i,o,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var s=i.length,u=0;u<(n?s:s-1);u++){var d=a[2*u],g=a[2*u+1],p=i[(u+1)%s];t.bezierCurveTo(d[0],d[1],g[0],g[1],p[0],p[1])}}else{"spline"===o&&(i=function(S,C){for(var I=S.length,z=[],O=0,V=1;V<I;V++)O+=vr(S[V-1],S[V]);var Y=O/2;for(Y=Y<I?I:Y,V=0;V<Y;V++){var G,tt,Q,nt=V/(Y-1)*(C?I:I-1),it=Math.floor(nt),ct=nt-it,vt=S[it%I];Q=C?(G=S[(it-1+I)%I],tt=S[(it+1)%I],S[(it+2)%I]):(G=S[0===it?it:it-1],tt=S[I-2<it?I-1:it+1],S[I-3<it?I-1:it+2]);var _t=ct*ct,At=ct*_t;z.push([Tn(G[0],vt[0],tt[0],Q[0],ct,_t,At),Tn(G[1],vt[1],tt[1],Q[1],ct,_t,At)])}return z}(i,n)),t.moveTo(i[0][0],i[0][1]),u=1;for(var x=i.length;u<x;u++)t.lineTo(i[u][0],i[u][1])}n&&t.closePath()}}var nr=R.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){qn(t,e,!0)}}),rr=R.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){qn(t,e,!1)}}),Kr=Math.round;function $o(t,e,n){if(e){var i=e.x1,o=e.x2,a=e.y1,s=e.y2;t.x1=i,t.x2=o,t.y1=a,t.y2=s;var u=n&&n.lineWidth;u&&(Kr(2*i)===Kr(2*o)&&(t.x1=t.x2=na(i,u,!0)),Kr(2*a)===Kr(2*s)&&(t.y1=t.y2=na(a,u,!0)))}}function Jr(t,e,n){if(e){var i=e.x,o=e.y,a=e.width,s=e.height;t.x=i,t.y=o,t.width=a,t.height=s;var u=n&&n.lineWidth;u&&(t.x=na(i,u,!0),t.y=na(o,u,!0),t.width=Math.max(na(i+a,u,!1)-t.x,0===a?0:1),t.height=Math.max(na(o+s,u,!1)-t.y,0===s?0:1))}}function na(t,e,n){if(!e)return t;var i=Kr(2*t);return(i+Kr(e))%2==0?i/2:(i+(n?1:-1))/2}var Sa={},Ji=R.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,i,o,a;this.subPixelOptimize?(Jr(Sa,e,this.style),n=Sa.x,i=Sa.y,o=Sa.width,a=Sa.height,Sa.r=e.r,e=Sa):(n=e.x,i=e.y,o=e.width,a=e.height),e.r?cd(t,e):t.rect(n,i,o,a),t.closePath()}}),pl={},go=R.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,i,o,a;a=this.subPixelOptimize?($o(pl,e,this.style),n=pl.x1,i=pl.y1,o=pl.x2,pl.y2):(n=e.x1,i=e.y1,o=e.x2,e.y2);var s=e.percent;0!==s&&(t.moveTo(n,i),s<1&&(o=n*(1-s)+o*s,a=i*(1-s)+a*s),t.lineTo(o,a))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),Vo=[];function _0(t,e,n){return null===t.cpx2||null===t.cpy2?[(n?jd:Ss)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?jd:Ss)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Ud:fo)(t.x1,t.cpx1,t.x2,e),(n?Ud:fo)(t.y1,t.cpy1,t.y2,e)]}function Tr(t){this.colorStops=t||[]}var sf=R.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.cpx1,u=e.cpy1,d=e.cpx2,g=e.cpy2,p=e.percent;0!==p&&(t.moveTo(n,i),null==d||null==g?(p<1&&(Ga(n,s,o,p,Vo),s=Vo[1],o=Vo[2],Ga(i,u,a,p,Vo),u=Vo[1],a=Vo[2]),t.quadraticCurveTo(s,u,o,a)):(p<1&&(Fc(n,s,d,o,p,Vo),s=Vo[1],d=Vo[2],o=Vo[3],Fc(i,u,g,a,p,Vo),u=Vo[1],g=Vo[2],a=Vo[3]),t.bezierCurveTo(s,u,d,g,o,a)))},pointAt:function(t){return _0(this.shape,t,!1)},tangentAt:function(t){var e=_0(this.shape,t,!0);return mr(e,e)}}),Ah=R.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,u=e.clockwise,d=Math.cos(a),g=Math.sin(a);t.moveTo(d*o+n,g*o+i),t.arc(n,i,o,a,s,!u)}}),lf=R.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),R.prototype.getBoundingRect.call(this)}});function $d(t,e,n,i,o,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=a||!1,Tr.call(this,o)}function Zd(t,e,n,i,o){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,Tr.call(this,i)}function ss(t){ya.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Tr.prototype={constructor:Tr,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}},$d.prototype={constructor:$d},ki($d,Tr),Zd.prototype={constructor:Zd},ki(Zd,Tr),ss.prototype.incremental=!0,ss.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},ss.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},ss.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},ss.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},ss.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},ss.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(t);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var i;(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var rg=[];ss.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Yi(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(rg)),t.union(i)}this._rect=t}return this._rect},ss.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(t,e))return!0;return!1},ki(ss,ya);var ha=Math.max,kh=Math.min,og={},Kd={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},ap="emphasis",Ts=1,ag={},Ye={};function ia(t){return R.extend(t)}function Fu(t,e){Ye[t]=e}function sg(t){if(Ye.hasOwnProperty(t))return Ye[t]}function uf(t,e,n,i){var o=wn(t,e);return n&&("center"===i&&(n=_m(n,o.getBoundingRect())),wm(o,n)),o}function lg(t,e,n){var i=new Po({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(o){"center"===n&&i.setStyle(_m(e,{width:o.width,height:o.height}))}});return i}function _m(t,e){var n,i=e.width/e.height,o=t.height*i;return n=o<=t.width?t.height:(o=t.width)/i,{x:t.x+t.width/2-o/2,y:t.y+t.height/2-n/2,width:o,height:n}}var zl=function(t,e){for(var n=[],i=t.length,o=0;o<i;o++){var a=t[o];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),n.push(a.path)}var s=new R(e);return s.createPathProxy(),s.buildPath=function(u){u.appendPath(n);var d=u.getContext();d&&u.rebuildPath(d)},s};function wm(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}var ml=na;function Wc(t){return null!=t&&"none"!==t}var sp=pe(),ug=0;function lp(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.__zr,i=t.useHoverLayer&&n&&"canvas"===n.painter.type;if(t.__highlighted=i?"layer":"plain",!(t.isGroup||!n&&t.useHoverLayer)){var o=t,a=t.style;i&&(a=(o=n.addHover(t)).style),bd(a),i||function(s){if(s.__hoverStlDirty){s.__hoverStlDirty=!1;var u=s.__hoverStl;if(u){var d=s.__cachedNormalStl={};s.__cachedNormalZ2=s.z2;var g=s.style;for(var p in u)null!=u[p]&&(d[p]=g[p]);d.fill=g.fill,d.stroke=g.stroke}else s.__cachedNormalStl=s.__cachedNormalZ2=null}}(o),a.extendFrom(e),up(a,e,"fill"),up(a,e,"stroke"),Ih(a),i||(t.dirty(!1),t.z2+=1)}}}function up(t,e,n){!Wc(e[n])&&Wc(t[n])&&(t[n]=function(i){if("string"!=typeof i)return i;var o=sp.get(i);return o||(o=wr(i,-.1),ug<1e4&&(sp.set(i,o),ug++)),o}(t[n]))}function xd(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var n=t.style,i=t.__cachedNormalStl;i&&(bd(n),t.setStyle(i),Ih(n));var o=t.__cachedNormalZ2;null!=o&&t.z2-o==1&&(t.z2=o)}}function cf(t,e,n){var i,o="normal",a="normal";t.__highlighted&&(o=ap,i=!0),e(t,n),t.__highlighted&&(a=ap,i=!0),t.isGroup&&t.traverse(function(s){s.isGroup||e(s,n)}),i&&t.__highDownOnUpdate&&t.__highDownOnUpdate(o,a)}function df(t,e){e=t.__hoverStl=!1!==e&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,xd(t),lp(t))}function Sm(t){Cm(this,t)||this.__highByOuter||cf(this,lp)}function w0(t){Cm(this,t)||this.__highByOuter||cf(this,xd)}function S0(t){this.__highByOuter|=1<<(t||0),cf(this,lp)}function hf(t){(this.__highByOuter&=~(1<<(t||0)))||cf(this,xd)}function Cm(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Er(t,e){du(t,!0),cf(t,df,e)}function du(t,e){var n=!1===e;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!n||t.__highDownDispatcher){var i=n?"off":"on";t[i]("mouseover",Sm)[i]("mouseout",w0),t[i]("emphasis",S0)[i]("normal",hf),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!n}}function cp(t){return!(!t||!t.__highDownDispatcher)}function Mm(t){var e=ag[t];return null==e&&Ts<=32&&(e=ag[t]=Ts++),e}function Fl(t,e,n,i,o,a,s){var u,d=(o=o||og).labelFetcher,g=o.labelDataIndex,p=o.labelDimIndex,x=o.labelProp,S=n.getShallow("show"),C=i.getShallow("show");(S||C)&&(d&&(u=d.getFormattedLabel(g,"normal",null,p,x)),null==u&&(u=Ui(o.defaultText)?o.defaultText(g,o):o.defaultText));var I=S?u:null,z=C?_i(d?d.getFormattedLabel(g,"emphasis",null,p,x):null,u):null;null==I&&null==z||(Wo(t,n,a,o),Wo(e,i,s,o,!0)),t.text=I,e.text=z}function dp(t,e,n){var i=t.style;e&&(bd(i),t.setStyle(e),Ih(i)),i=t.__hoverStl,n&&i&&(bd(i),En(i,n),Ih(i))}function Wo(t,e,n,i,o){return Tm(t,e,i,o),n&&En(t,n),t}function Tm(t,e,n,i){if((n=n||og).isRectText){var o;n.getTextPosition?o=n.getTextPosition(e,i):"outside"===(o=e.getShallow("position")||(i?null:"inside"))&&(o="top"),t.textPosition=o,t.textOffset=e.getShallow("offset");var a=e.getShallow("rotate");null!=a&&(a*=Math.PI/180),t.textRotation=a,t.textDistance=_i(e.getShallow("distance"),i?null:5)}var s,u=e.ecModel,d=u&&u.option.textStyle,g=function(S){for(var C;S&&S!==S.ecModel;){var I=(S.option||og).rich;if(I)for(var z in C=C||{},I)I.hasOwnProperty(z)&&(C[z]=1);S=S.parentModel}return C}(e);if(g)for(var p in s={},g)if(g.hasOwnProperty(p)){var x=e.getModel(["rich",p]);C0(s[p]={},x,d,n,i)}return t.rich=s,C0(t,e,d,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function C0(t,e,n,i,o,a){n=!o&&n||og,t.textFill=hp(e.getShallow("color"),i)||n.color,t.textStroke=hp(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=_i(e.getShallow("textBorderWidth"),n.textBorderWidth),o||(a&&(t.insideRollbackOpt=i,Ih(t)),null==t.textFill&&(t.textFill=i.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),a&&i.disableBox||(t.textBackgroundColor=hp(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=hp(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function hp(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Ih(t){var e,n=t.textPosition,i=t.insideRollbackOpt;if(i&&null==t.textFill){var o=i.autoColor,s=i.useInsideStyle,u=!1!==s&&(!0===s||i.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),d=!u&&null!=o;(u||d)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),u&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=o,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),d&&(t.textFill=o)}t.insideRollback=e}function bd(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function ff(t,e){var n=e&&e.getModel("textStyle");return Zn([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Jd(t,e,n,i,o,a){if("function"==typeof o&&(a=o,o=null),i&&i.isAnimationEnabled()){var s=t?"Update":"",u=i.getShallow("animationDuration"+s),d=i.getShallow("animationEasing"+s),g=i.getShallow("animationDelay"+s);"function"==typeof g&&(g=g(o,i.getAnimationDelayParams?i.getAnimationDelayParams(e,o):null)),"function"==typeof u&&(u=u(o)),0<u?e.animateTo(n,u,g||0,d,a,!!a):(e.stopAnimation(),e.attr(n),a&&a())}else e.stopAnimation(),e.attr(n),a&&a()}function Xi(t,e,n,i,o){Jd(!0,t,e,n,i,o)}function qs(t,e,n,i,o){Jd(!1,t,e,n,i,o)}function Qd(t,e){for(var n=Ft([]);t&&t!==e;)Kt(n,t.getLocalTransform(),n),t=t.parent;return n}function fa(t,e,n){return e&&!Lr(e)&&(e=xn.getLocalTransform(e)),n&&(e=Pe([],e)),Wi([],t,e)}function th(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),o=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),a=["left"===t?-i:"right"===t?i:0,"top"===t?-o:"bottom"===t?o:0];return a=fa(a,e,n),Math.abs(a[0])>Math.abs(a[1])?0<a[0]?"right":"left":0<a[1]?"bottom":"top"}function Na(t,e,n,i){if(t&&e){var o,a=(o={},t.traverse(function(u){!u.isGroup&&u.anid&&(o[u.anid]=u)}),o);e.traverse(function(u){if(!u.isGroup&&u.anid){var d=a[u.anid];if(d){var g=s(u);u.attr(s(d)),Xi(u,g,n,u.dataIndex)}}})}function s(u){var d={position:je(u.position),rotation:u.rotation};return u.shape&&(d.shape=En({},u.shape)),d}}function gf(t,e){return kt(t,function(n){var i=n[0];i=ha(i,e.x),i=kh(i,e.x+e.width);var o=n[1];return o=ha(o,e.y),[i,o=kh(o,e.y+e.height)]})}function vl(t,e,n){var i=(e=En({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),Dn(i,n),new Po(e)):uf(t.replace("path://",""),e,n,"center")}function pf(t,e,n,i,o){for(var a=0,s=o[o.length-1];a<o.length;a++){var u=o[a];if(Dm(t,e,n,i,u[0],u[1],s[0],s[1]))return!0;s=u}}function Dm(t,e,n,i,o,a,s,u){var V,d=n-t,g=i-e,p=s-o,x=u-a,S=yc(p,x,d,g);if((V=S)<=1e-6&&-1e-6<=V)return!1;var C=t-o,I=e-a,z=yc(C,I,d,g)/S;if(z<0||1<z)return!1;var O=yc(C,I,p,x)/S;return!(O<0||1<O)}function yc(t,e,n,i){return t*i-n*e}Fu("circle",un),Fu("sector",Kn),Fu("ring",oi),Fu("polygon",nr),Fu("polyline",rr),Fu("rect",Ji),Fu("line",go),Fu("bezierCurve",sf),Fu("arc",Ah);var yl=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:Kd,extendShape:ia,extendPath:function(t,e){return function(n,i){return R.extend($e(n,i))}(t,e)},registerShape:Fu,getShapeClass:sg,makePath:uf,makeImage:lg,mergePath:zl,resizePath:wm,subPixelOptimizeLine:function(t){return $o(t.shape,t.shape,t.style),t},subPixelOptimizeRect:function(t){return Jr(t.shape,t.shape,t.style),t},subPixelOptimize:ml,setElementHoverStyle:df,setHoverStyle:Er,setAsHighDownDispatcher:du,isHighDownDispatcher:cp,getHighlightDigit:Mm,setLabelStyle:Fl,modifyLabelStyle:dp,setTextStyle:Wo,setText:function(t,e,n){var i,o={isRectText:!0};!1===n?i=!0:o.autoColor=n,Tm(t,e,o,i)},getFont:ff,updateProps:Xi,initProps:qs,getTransform:Qd,applyTransform:fa,transformDirection:th,groupTransition:Na,clipPointsByRect:gf,clipRectByRect:function(t,e){var n=ha(t.x,e.x),i=kh(t.x+t.width,e.x+e.width),o=ha(t.y,e.y),a=kh(t.y+t.height,e.y+e.height);if(n<=i&&o<=a)return{x:n,y:o,width:i-n,height:a-o}},createIcon:vl,linePolygonIntersect:pf,lineLineIntersect:Dm,Group:_n,Image:Po,Text:rn,Circle:un,Sector:Kn,Ring:oi,Polygon:nr,Polyline:rr,Rect:Ji,Line:go,BezierCurve:sf,Arc:Ah,IncrementalDisplayable:ss,CompoundPath:lf,LinearGradient:$d,RadialGradient:Zd,BoundingRect:Yi}),mf=["textStyle","color"],Ph={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(mf):null)},getFont:function(){return ff({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return al(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},jc=ho([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),Hu={getItemStyle:function(t,e){var n=jc(this,t,e),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},Eh=Fn,Am=or();function dr(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function Nh(t,e,n){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return null==t&&n&&(t=n.get(e)),t}function eh(t,e){var n=Am(t).getParent;return n?n.call(t,e):t.parentModel}dr.prototype={constructor:dr,init:null,mergeOption:function(t){ei(this.option,t,!0)},get:function(t,e){return null==t?this.option:Nh(this.option,this.parsePath(t),!e&&eh(this,t))},getShallow:function(t,e){var n=this.option,i=null==n?n:n[t],o=!e&&eh(this,t);return null==i&&o&&(i=o.getShallow(t)),i},getModel:function(t,e){var n;return new dr(null==t?this.option:Nh(this.option,t=this.parsePath(t)),e=e||(n=eh(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(fn(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){Am(this).getParent=t},isAnimationEnabled:function(){if(!Oe.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Vs(dr),is(dr),Eh(dr,su),Eh(dr,pc),Eh(dr,Ph),Eh(dr,Hu);var fp=0;function vf(t){return[t||"",fp++,Math.random().toFixed(5)].join("_")}function no(t,e,n,i){var o=e[1]-e[0],a=n[1]-n[0];if(0==o)return 0==a?n[0]:(n[0]+n[1])/2;if(i)if(0<o){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/o*a+n[0]}function ln(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?function(n){return n.replace(/^\s+|\s+$/g,"")}(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function ga(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function Vu(t){return t.sort(function(e,n){return e-n}),t}function yf(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}function xf(t){var e=t.toString(),n=e.indexOf("e");if(0<n){var i=+e.slice(n+1);return i<0?-i:0}var o=e.indexOf(".");return o<0?0:e.length-1-o}function cg(t,e){var n=Math.log,i=Math.LN10,o=Math.floor(n(t[1]-t[0])/i),a=Math.round(n(Math.abs(e[1]-e[0]))/i),s=Math.min(Math.max(-o+a,0),20);return isFinite(s)?s:20}function Wu(t,e,n){if(!t[e])return 0;var i=yn(t,function(I,z){return I+(isNaN(z)?0:z)},0);if(0===i)return 0;for(var o=Math.pow(10,n),a=kt(t,function(I){return(isNaN(I)?0:I)/i*o*100}),s=100*o,u=kt(a,function(I){return Math.floor(I)}),d=yn(u,function(I,z){return I+z},0),g=kt(a,function(I,z){return I-u[z]});d<s;){for(var p=Number.NEGATIVE_INFINITY,x=null,S=0,C=g.length;S<C;++S)g[S]>p&&(p=g[S],x=S);++u[x],g[x]=0,++d}return u[e]/o}var pp=9007199254740991;function dg(t){var e=2*Math.PI;return(t%e+e)%e}function Gc(t){return-1e-4<t&&t<1e-4}var M0=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function nh(t){if(t instanceof Date)return t;if("string"!=typeof t)return null==t?new Date(NaN):new Date(Math.round(t));var e=M0.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}function km(t){return Math.pow(10,mp(t))}function mp(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return 10<=t/Math.pow(10,e)&&e++,e}function hg(t,e){var n=mp(t),i=Math.pow(10,n),o=t/i;return t=(e?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*i,-20<=n?+t.toFixed(n<0?-n:0):t}function hu(t){t.sort(function(u,d){return function g(p,x,S){return p.interval[S]<x.interval[S]||p.interval[S]===x.interval[S]&&(p.close[S]-x.close[S]==(S?-1:1)||!S&&g(p,x,1))}(u,d,0)?-1:1});for(var e=-1/0,n=1,i=0;i<t.length;){for(var o=t[i].interval,a=t[i].close,s=0;s<2;s++)o[s]<=e&&(o[s]=e,a[s]=s?1:1-n),e=o[s],n=a[s];o[0]===o[1]&&a[0]*a[1]!=1?t.splice(i,1):i++}return t}function vp(t){return 0<=t-parseFloat(t)}var T0=(Object.freeze||Object)({linearMap:no,parsePercent:ln,round:ga,asc:Vu,getPrecision:yf,getPrecisionSafe:xf,getPixelPrecision:cg,getPercentWithPrecision:Wu,MAX_SAFE_INTEGER:pp,remRadian:dg,isRadianAroundZero:Gc,parseDate:nh,quantity:km,quantityExponent:mp,nice:hg,quantile:function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),o=+t[i-1],a=n-i;return a?o+a*(t[i]-o):o},reformIntervals:hu,isNumeric:vp});function Uc(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")}function D0(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,i){return i.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var ju=Vn,Rh=/([&<>"'])/g,Im={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Vr(t){return null==t?"":(t+"").replace(Rh,function(e,n){return Im[n]})}function yp(t,e){return"{"+t+(null==e?"":e)+"}"}var xp=["a","b","c","d","e","f","g"];function mi(t,e,n){Fe(e)||(e=[e]);var i=e.length;if(!i)return"";for(var o=e[0].$vars||[],a=0;a<o.length;a++){var s=xp[a];t=t.replace(yp(s),yp(s,0))}for(var u=0;u<i;u++)for(var d=0;d<o.length;d++){var g=e[u][o[d]];t=t.replace(yp(xp[d],u),n?Vr(g):g)}return t}function bp(t,e,n){return St(e,function(i,o){t=t.replace("{"+o+"}",n?Vr(i):i)}),t}function _d(t,e){var n=(t=bi(t)?{color:t,extraCssText:e}:t||{}).color,o=(e=t.extraCssText,t.renderMode||"html"),a=t.markerId||"X";return n?"html"===o?"subItem"===t.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Vr(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Vr(n)+";"+(e||"")+'"></span>':{renderMode:o,content:"{marker"+a+"|}  ",style:{color:n}}:""}function xc(t,e){return"0000".substr(0,e-(t+="").length)+t}function _p(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=nh(e),o=n?"UTC":"",a=i["get"+o+"FullYear"](),s=i["get"+o+"Month"]()+1,u=i["get"+o+"Date"](),d=i["get"+o+"Hours"](),g=i["get"+o+"Minutes"](),p=i["get"+o+"Seconds"](),x=i["get"+o+"Milliseconds"]();return t.replace("MM",xc(s,2)).replace("M",s).replace("yyyy",a).replace("yy",a%100).replace("dd",xc(u,2)).replace("d",u).replace("hh",xc(d,2)).replace("h",d).replace("mm",xc(g,2)).replace("m",g).replace("ss",xc(p,2)).replace("s",p).replace("SSS",xc(x,3))}function Lh(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}var Pm=Rc;function fg(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location=t}else window.open(t,e)}var Em=(Object.freeze||Object)({addCommas:Uc,toCamelCase:D0,normalizeCssArray:ju,encodeHTML:Vr,formatTpl:mi,formatTplSimple:bp,getTooltipMarker:_d,formatTime:_p,capitalFirst:Lh,truncateText:Pm,getTextBoundingRect:function(t){return al(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)},getTextRect:function(t,e,n,i,o,a,s,u){return al(t,e,n,i,o,u,a,s)},windowOpen:fg}),gg=St,Hl=["left","right","top","bottom","width","height"],wd=[["width","left","right"],["height","top","bottom"]];function ih(t,e,n,i,o){var a=0,s=0;null==i&&(i=1/0),null==o&&(o=1/0);var u=0;e.eachChild(function(d,g){var p,x,S=d.position,C=d.getBoundingRect(),I=e.childAt(g+1),z=I&&I.getBoundingRect();if("horizontal"===t){var O=C.width+(z?-z.x+C.x:0);u=i<(p=a+O)||d.newline?(a=0,p=O,s+=u+n,C.height):Math.max(u,C.height)}else{var V=C.height+(z?-z.y+C.y:0);u=o<(x=s+V)||d.newline?(a+=u+n,s=0,x=V,C.width):Math.max(u,C.width)}d.newline||(S[0]=a,S[1]=s,"horizontal"===t?a=p+n:s=x+n)})}var Sd=ih;function xi(t,e,n){n=ju(n||0);var i=e.width,o=e.height,a=ln(t.left,i),s=ln(t.top,o),u=ln(t.right,i),d=ln(t.bottom,o),g=ln(t.width,i),p=ln(t.height,o),x=n[2]+n[0],S=n[1]+n[3],C=t.aspect;switch(isNaN(g)&&(g=i-u-S-a),isNaN(p)&&(p=o-d-x-s),null!=C&&(isNaN(g)&&isNaN(p)&&(i/o<C?g=.8*i:p=.8*o),isNaN(g)&&(g=C*p),isNaN(p)&&(p=g/C)),isNaN(a)&&(a=i-u-g-S),isNaN(s)&&(s=o-d-p-x),t.left||t.right){case"center":a=i/2-g/2-n[3];break;case"right":a=i-g-S}switch(t.top||t.bottom){case"middle":case"center":s=o/2-p/2-n[0];break;case"bottom":s=o-p-x}a=a||0,s=s||0,isNaN(g)&&(g=i-S-a-(u||0)),isNaN(p)&&(p=o-x-s-(d||0));var I=new Yi(a+n[3],s+n[0],g,p);return I.margin=n,I}function fu(t,e,n,i,o){var a=!o||!o.hv||o.hv[0],s=!o||!o.hv||o.hv[1],u=o&&o.boundingMode||"all";if(a||s){var d;if("raw"===u)d="group"===t.type?new Yi(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(d=t.getBoundingRect(),t.needLocalTransform()){var g=t.getLocalTransform();(d=d.clone()).applyTransform(g)}e=xi(Dn({width:d.width,height:d.height},e),n,i);var p=t.position,x=a?e.x-d.x:0,S=s?e.y-d.y:0;t.attr("position","raw"===u?[x,S]:[p[0]+x,p[1]+S])}}function Gu(t,e,n){Ln(n)||(n={});var i=n.ignoreSize;Fe(i)||(i=[i,i]);var o=s(wd[0],0),a=s(wd[1],1);function s(p,x){var S={},C=0,I={},z=0;if(gg(p,function(Y){I[Y]=t[Y]}),gg(p,function(Y){u(e,Y)&&(S[Y]=I[Y]=e[Y]),d(S,Y)&&C++,d(I,Y)&&z++}),i[x])return d(e,p[1])?I[p[2]]=null:d(e,p[2])&&(I[p[1]]=null),I;if(2!==z&&C){if(2<=C)return S;for(var O=0;O<p.length;O++){var V=p[O];if(!u(S,V)&&u(t,V)){S[V]=t[V];break}}return S}return I}function u(p,x){return p.hasOwnProperty(x)}function d(p,x){return null!=p[x]&&"auto"!==p[x]}function g(p,x,S){gg(p,function(C){x[C]=S[C]})}g(wd[0],t,o),g(wd[1],t,a)}function Oh(t){return Bh({},t)}function Bh(t,e){return e&&t&&gg(Hl,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}kn(ih,"vertical"),kn(ih,"horizontal");var wp,pg,mg,Sp=or(),Sr=dr.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){dr.call(this,t,e,n,i),this.uid=vf("ec_cpt_model")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?Oh(t):{};ei(t,e.getTheme().get(this.mainType)),ei(t,this.getDefaultOption()),n&&Gu(t,i,n)},mergeOption:function(t,e){ei(this.option,t,!0);var n=this.layoutMode;n&&Gu(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=Sp(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var o={},a=e.length-1;0<=a;a--)o=ei(o,e[a],!0);t.defaultOption=o}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});function Nm(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}Hr(Sr,{registerWhenExtend:!0}),pg={},(wp=Sr).registerSubTypeDefaulter=function(t,e){t=ca(t),pg[t.main]=e},wp.determineSubType=function(t,e){var n=e.type;if(!n){var i=ca(t).main;wp.hasSubTypes(t)&&pg[i]&&(n=pg[i](e))}return n},mg=function(t){var e=[];return St(Sr.getClassesByMainType(t),function(n){e=e.concat(n.prototype.dependencies||[])}),e=kt(e,function(n){return ca(n).main}),"dataset"!==t&&zn(e,"dataset")<=0&&e.unshift("dataset"),e},Sr.topologicalTravel=function(t,e,n,i){if(t.length){var o=(I={},z=[],St(C=e,function(O){var G,tt,Q,V=Nm(I,O),Y=(G=V.originalDeps=mg(O),tt=C,Q=[],St(G,function(nt){0<=zn(tt,nt)&&Q.push(nt)}),Q);V.entryCount=Y.length,0===V.entryCount&&z.push(O),St(Y,function(G){zn(V.predecessor,G)<0&&V.predecessor.push(G);var tt=Nm(I,G);zn(tt.successor,G)<0&&tt.successor.push(O)})}),{graph:I,noEntryList:z}),a=o.graph,s=o.noEntryList,u={};for(St(t,function(C){u[C]=!0});s.length;){var d=s.pop(),g=a[d],p=!!u[d];p&&(n.call(i,d,g.originalDeps.slice()),delete u[d]),St(g.successor,p?S:x)}St(u,function(){throw new Error("Circle dependency may exists")})}var C,I,z;function x(C){a[C].entryCount--,0===a[C].entryCount&&s.push(C)}function S(C){u[C]=!0,x(C)}},Fn(Sr,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var vg="";"undefined"!=typeof navigator&&(vg=navigator.platform||"");var bc={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:vg.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},xl=or(),Cd={clearColorPalette:function(){xl(this).colorIdx=0,xl(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var i=xl(e=e||this),o=i.colorIdx||0,a=i.colorNameMap=i.colorNameMap||{};if(a.hasOwnProperty(t))return a[t];var s=di(this.get("color",!0)),u=this.get("colorLayer",!0),d=null!=n&&u?function(p,x){for(var S=p.length,C=0;C<S;C++)if(p[C].length>x)return p[C];return p[S-1]}(u,n):s;if((d=d||s)&&d.length){var g=d[o];return t&&(a[t]=g),i.colorIdx=(o+1)%d.length,g}}},rh="original",zh="arrayRows",bf="objectRows",bl="keyedColumns",Rm="unknown",Cp="typedArray";function Uu(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===bl?{}:[]),this.sourceFormat=t.sourceFormat||Rm,this.seriesLayoutBy=t.seriesLayoutBy||"column",this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&pe(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}Uu.seriesDataToSource=function(t){return new Uu({data:t,sourceFormat:Br(t)?Cp:rh,fromDataset:!1})},is(Uu);var qu=or();function xg(t){var e=t.option,n=e.data,i=Br(n)?Cp:rh,o=!1,a=e.seriesLayoutBy,s=e.sourceHeader,u=e.dimensions,d=Fm(t);if(d){var g=d.option;n=g.source,i=qu(d).sourceFormat,o=!0,a=a||g.seriesLayoutBy,null==s&&(s=g.sourceHeader),u=u||g.dimensions}var p=function(x,S,C,I,z){if(!x)return{dimensionsDefine:Om(z)};var O,V;if(S===zh)"auto"===I||null==I?Bm(function(G){null!=G&&"-"!==G&&(bi(G)?null==V&&(V=1):V=0)},C,x,10):V=I?1:0,z||1!==V||(z=[],Bm(function(G,tt){z[tt]=null!=G?G:""},C,x)),O=z?z.length:"row"===C?x.length:x[0]?x[0].length:null;else if(S===bf)z=z||function(G){for(var tt,Q=0;Q<G.length&&!(tt=G[Q++]););if(tt){var nt=[];return St(tt,function(it,ct){nt.push(ct)}),nt}}(x);else if(S===bl)z||(z=[],St(x,function(G,tt){z.push(tt)}));else if(S===rh){var Y=An(x[0]);O=Fe(Y)&&Y.length||1}return{startIndex:V,dimensionsDefine:Om(z),dimensionsDetectCount:O}}(n,i,a,s,u);qu(t).source=new Uu({data:n,fromDataset:o,seriesLayoutBy:a,sourceFormat:i,dimensionsDefine:p.dimensionsDefine,startIndex:p.startIndex,dimensionsDetectCount:p.dimensionsDetectCount,encodeDefine:e.encode})}function Om(t){if(t){var e=pe();return kt(t,function(n,i){if(null==(n=En({},Ln(n)?n:{name:n})).name)return n;n.name+="",null==n.displayName&&(n.displayName=n.name);var o=e.get(n.name);return o?n.name+="-"+o.count++:e.set(n.name,{count:1}),n})}}function Bm(t,e,n,i){if(null==i&&(i=1/0),"row"===e)for(var o=0;o<n.length&&o<i;o++)t(n[o]?n[o][0]:null,o);else{var a=n[0]||[];for(o=0;o<a.length&&o<i;o++)t(a[o],o)}}function A0(t,e,n){var i={},o=Fm(e);if(!o||!t)return i;var a,s,u=[],d=[],p=qu(e.ecModel).datasetMap,x=o.uid+"_"+n.seriesLayoutBy;St(t=t.slice(),function(z,O){Ln(z)||(t[O]={name:z}),"ordinal"===z.type&&null==a&&(s=I(t[a=O])),i[z.name]=[]});var S=p.get(x)||p.set(x,{categoryWayDim:s,valueWayDim:0});function C(z,O,V){for(var Y=0;Y<V;Y++)z.push(O+Y)}function I(z){var O=z.dimsDef;return O?O.length:1}return St(t,function(z,O){var V=z.name,Y=I(z);if(null==a){var G=S.valueWayDim;C(i[V],G,Y),C(d,G,Y),S.valueWayDim+=Y}else a===O?(C(i[V],0,Y),C(u,0,Y)):(C(i[V],G=S.categoryWayDim,Y),C(d,G,Y),S.categoryWayDim+=Y)}),u.length&&(i.itemName=u),d.length&&(i.seriesName=d),i}function zm(t,e,n){var i={};if(!Fm(t))return i;var o,a=e.sourceFormat,s=e.dimensionsDefine;a!==bf&&a!==bl||St(s,function(g,p){"name"===(Ln(g)?g.name:g)&&(o=p)});var u=function(){for(var g={},p={},x=[],S=0,C=Math.min(5,n);S<C;S++){var I=Hm(e.data,a,e.seriesLayoutBy,s,e.startIndex,S);x.push(I);var z=3===I;if(z&&null==g.v&&S!==o&&(g.v=S),null!=g.n&&g.n!==g.v&&(z||3!==x[g.n])||(g.n=S),O(g)&&3!==x[g.n])return g;z||(2===I&&null==p.v&&S!==o&&(p.v=S),null!=p.n&&p.n!==p.v||(p.n=S))}function O(V){return null!=V.v&&null!=V.n}return O(g)?g:O(p)?p:null}();if(u){i.value=u.v;var d=null!=o?o:u.n;i.itemName=[d],i.seriesName=[d]}return i}function Fm(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function Hm(t,e,n,i,o,a){var s,u,d;if(Br(t))return 3;if(i){var g=i[a];Ln(g)?(u=g.name,d=g.type):bi(g)&&(u=g)}if(null!=d)return"ordinal"===d?1:3;if(e===zh)if("row"===n){for(var p=t[a],x=0;x<(p||[]).length&&x<5;x++)if(null!=(s=z(p[o+x])))return s}else for(x=0;x<t.length&&x<5;x++){var S=t[o+x];if(S&&null!=(s=z(S[a])))return s}else if(e===bf){if(!u)return 3;for(x=0;x<t.length&&x<5;x++)if((C=t[x])&&null!=(s=z(C[u])))return s}else if(e===bl){if(!u||!(p=t[u])||Br(p))return 3;for(x=0;x<p.length&&x<5;x++)if(null!=(s=z(p[x])))return s}else if(e===rh)for(x=0;x<t.length&&x<5;x++){var C,I=An(C=t[x]);if(!Fe(I))return 3;if(null!=(s=z(I[a])))return s}function z(O){var V=bi(O);return null!=O&&isFinite(O)&&""!==O?V?2:3:V&&"-"!==O?1:void 0}return 3}var Mp="\0_ec_inner",oh=dr.extend({init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new dr(n),this._optionManager=i},setOption:function(t,e){Ei(!(Mp in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var i=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):function(s){var u,g;this.option={},this.option[Mp]=1,this._componentsMap=pe({series:[]}),g=(u=s).color&&!u.colorLayer,St(this._theme.option,function(p,x){"colorLayer"===x&&g||Sr.hasClass(x)||("object"==typeof p?u[x]=u[x]?ei(u[x],p,!1):fn(p):null==u[x]&&(u[x]=p))}),ei(s,bc,!1),this.mergeOption(s)}.call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var o=n.getTimelineOption(this);o&&(this.mergeOption(o),e=!0)}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this,this._api);a.length&&St(a,function(s){this.mergeOption(s,e=!0)},this)}return e},mergeOption:function(t){var e=this.option,n=this._componentsMap,i=[];(function(o){qu(o).datasetMap=pe()})(this),St(t,function(o,a){null!=o&&(Sr.hasClass(a)?a&&i.push(a):e[a]=null==e[a]?fn(o):ei(e[a],o,!0))}),Sr.topologicalTravel(i,Sr.getAllClassMainTypes(),function(o,a){var s=di(t[o]),u=Ti(n.get(o),s);Ki(u),St(u,function(g,p){var C,I,x=g.option;Ln(x)&&(g.keyInfo.mainType=o,g.keyInfo.subType=(I=g.exist,(C=x).type?C.type:I?I.subType:Sr.determineSubType(o,C)))});var d=function(g,p){Fe(p)||(p=p?[p]:[]);var x={};return St(p,function(S){x[S]=(g.get(S)||[]).slice()}),x}(n,a);e[o]=[],n.set(o,[]),St(u,function(g,p){var x=g.exist,S=g.option;if(Ei(Ln(S)||x,"Empty component definition"),S){var C=Sr.getClass(o,g.keyInfo.subType,!0);if(x&&x.constructor===C)x.name=g.keyInfo.name,x.mergeOption(S,this),x.optionUpdated(S,!1);else{var I=En({dependentModels:d,componentIndex:p},g.keyInfo);En(x=new C(S,this,this,I),I),x.init(S,this,this,I),x.optionUpdated(null,!0)}}else x.mergeOption({},this),x.optionUpdated({},!1);n.get(o)[p]=x,e[o][p]=x.option},this),"series"===o&&Tp(this,n.get("series"))},this),this._seriesIndicesMap=pe(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=fn(this.option);return St(t,function(e,n){if(Sr.hasClass(n)){for(var i=(e=di(e)).length-1;0<=i;i--)So(e[i])&&e.splice(i,1);t[n]=e}}),delete t[Mp],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,o=t.id,a=t.name,s=this._componentsMap.get(e);if(!s||!s.length)return[];if(null!=i)Fe(i)||(i=[i]),n=Mn(kt(i,function(g){return s[g]}),function(g){return!!g});else if(null!=o){var u=Fe(o);n=Mn(s,function(g){return u&&0<=zn(o,g.id)||!u&&g.id===o})}else if(null!=a){var d=Fe(a);n=Mn(s,function(g){return d&&0<=zn(a,g.name)||!d&&g.name===a})}else n=s.slice();return Vm(n,t)},findComponents:function(t){var e,n,i,o,a,u=t.mainType,d=(n=u+"Index",i=u+"Id",o=u+"Name",!(e=t.query)||null==e[n]&&null==e[i]&&null==e[o]?null:{mainType:u,index:e[n],id:e[i],name:e[o]});return a=Vm(d?this.queryComponents(d):this._componentsMap.get(u),t),t.filter?Mn(a,t.filter):a},eachComponent:function(t,e,n){var i=this._componentsMap;"function"==typeof t?(n=e,e=t,i.each(function(o,a){St(o,function(s,u){e.call(n,a,s,u)})})):bi(t)?St(i.get(t),e,n):Ln(t)&&St(this.findComponents(t),e,n)},getSeriesByName:function(t){return Mn(this._componentsMap.get("series"),function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){return Mn(this._componentsMap.get("series"),function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){St(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)},this)},eachRawSeries:function(t,e){St(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){St(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];o.subType===t&&e.call(n,o,i)},this)},eachRawSeriesByType:function(t,e,n){return St(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Tp(this,Mn(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;Tp(this,e.get("series"));var n=[];e.each(function(i,o){n.push(o)}),Sr.topologicalTravel(n,Sr.getAllClassMainTypes(),function(i,o){St(e.get(i),function(a){"series"===i&&function(s,u){if(u){var d=u.seiresIndex,g=u.seriesId,p=u.seriesName;return null!=d&&s.componentIndex!==d||null!=g&&s.id!==g||null!=p&&s.name!==p}}(a,t)||a.restoreData()})})}});function Tp(t,e){t._seriesIndicesMap=pe(t._seriesIndices=kt(e,function(n){return n.componentIndex})||[])}function Vm(t,e){return e.hasOwnProperty("subType")?Mn(t,function(n){return n.subType===e.subType}):t}Fn(oh,Cd);var k0=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function ah(t){St(k0,function(e){this[e]=Rn(t[e],t)},this)}var Fh={};function Ca(){this._coordinateSystems=[]}Ca.prototype={constructor:Ca,create:function(t,e){var n=[];St(Fh,function(i,o){var a=i.create(t,e);n=n.concat(a||[])}),this._coordinateSystems=n},update:function(t,e){St(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},Ca.register=function(t,e){Fh[t]=e},Ca.get=function(t){return Fh[t]};var _f=St,Hh=fn,Ys=kt,I0=ei,P0=/^(min|max)?(.+)$/;function sh(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function Wm(t,e,n){var i={width:e,height:n,aspectratio:e/n},o=!0;return St(t,function(a,s){var p,x,S,u=s.match(P0);if(u&&u[1]&&u[2]){var d=u[1],g=u[2].toLowerCase();p=i[g],x=a,!("min"===(S=d)?x<=p:"max"===S?p<=x:p===x)&&(o=!1)}}),o}sh.prototype={constructor:sh,setOption:function(t,e){t&&St(di(t.series),function(o){o&&o.data&&Br(o.data)&&Mr(o.data)}),t=Hh(t);var n=this._optionBackup,i=function(o,a,s){var u,d,g=[],p=[],x=o.timeline;return o.baseOption&&(d=o.baseOption),(x||o.options)&&(d=d||{},g=(o.options||[]).slice()),o.media&&(d=d||{},_f(o.media,function(C){C&&C.option&&(C.query?p.push(C):u=u||C)})),(d=d||o).timeline||(d.timeline=x),_f([d].concat(g).concat(kt(p,function(C){return C.option})),function(C){_f(a,function(I){I(C,s)})}),{baseOption:d,timelineOptions:g,mediaDefault:u,mediaList:p}}.call(this,t,e,!n);this._newBaseOption=i.baseOption,n?(function(o,a){_f(a=a||{},function(s,u){if(null!=s){var d=o[u];if(Sr.hasClass(u)){s=di(s);var g=Ti(d=di(d),s);o[u]=Ys(g,function(p){return p.option&&p.exist?I0(p.exist,p.option,!0):p.exist||p.option})}else o[u]=I0(d,s,!0)}})}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=Ys(e.timelineOptions,Hh),this._mediaList=Ys(e.mediaList,Hh),this._mediaDefault=Hh(e.mediaDefault),this._currentMediaIndices=[],Hh(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=Hh(n[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var p,e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var u=0,d=i.length;u<d;u++)Wm(i[u].query,e,n)&&a.push(u);return!a.length&&o&&(a=[-1]),a.length&&(p=this._currentMediaIndices,!(a.join(",")===p.join(",")))&&(s=Ys(a,function(g){return Hh(-1===g?o.option:i[g].option)})),this._currentMediaIndices=a,s}};var _c=St,bg=Ln,Dp=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function jm(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=Dp.length;n<i;n++){var o=Dp[n],a=e.normal,s=e.emphasis;a&&a[o]&&(t[o]=t[o]||{},t[o].normal?ei(t[o].normal,a[o]):t[o].normal=a[o],a[o]=null),s&&s[o]&&(t[o]=t[o]||{},t[o].emphasis?ei(t[o].emphasis,s[o]):t[o].emphasis=s[o],s[o]=null)}}function Xs(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,o=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,Dn(t[e],i)):t[e]=i),o&&(t.emphasis=t.emphasis||{},t.emphasis[e]=o)}}function wf(t){Xs(t,"itemStyle"),Xs(t,"lineStyle"),Xs(t,"areaStyle"),Xs(t,"label"),Xs(t,"labelLine"),Xs(t,"upperLabel"),Xs(t,"edgeLabel")}function Ma(t,e){var n=bg(t)&&t[e],i=bg(n)&&n.textStyle;if(i)for(var o=0,a=Lt.length;o<a;o++)i.hasOwnProperty(e=Lt[o])&&(n[e]=i[e])}function La(t){t&&(wf(t),Ma(t,"label"),t.emphasis&&Ma(t.emphasis,"label"))}function wc(t){return Fe(t)?t:t?[t]:[]}function b(t){return(Fe(t)?t[0]:t)||{}}function L(t){St(H,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var H=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],X=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],J=function(t,e){(function D(t,e){_c(wc(t.series),function(i){bg(i)&&function(o){if(bg(o)){jm(o),wf(o),Ma(o,"label"),Ma(o,"upperLabel"),Ma(o,"edgeLabel"),o.emphasis&&(Ma(o.emphasis,"label"),Ma(o.emphasis,"upperLabel"),Ma(o.emphasis,"edgeLabel")),(s=o.markPoint)&&(jm(s),La(s)),(u=o.markLine)&&(jm(u),La(u));var a=o.markArea;a&&La(a);var s,u,d=o.data;if("graph"===o.type){d=d||o.nodes;var g=o.links||o.edges;if(g&&!Br(g))for(var p=0;p<g.length;p++)La(g[p]);St(o.categories,function(C){wf(C)})}if(d&&!Br(d))for(p=0;p<d.length;p++)La(d[p]);if((s=o.markPoint)&&s.data){var x=s.data;for(p=0;p<x.length;p++)La(x[p])}if((u=o.markLine)&&u.data){var S=u.data;for(p=0;p<S.length;p++)Fe(S[p])?(La(S[p][0]),La(S[p][1])):La(S[p])}"gauge"===o.type?(Ma(o,"axisLabel"),Ma(o,"title"),Ma(o,"detail")):"treemap"===o.type?(Xs(o.breadcrumb,"itemStyle"),St(o.levels,function(C){wf(C)})):"tree"===o.type&&wf(o.leaves)}}(i)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),_c(n,function(i){_c(wc(t[i]),function(o){o&&(Ma(o,"axisLabel"),Ma(o.axisPointer,"label"))})}),_c(wc(t.parallel),function(i){var o=i&&i.parallelAxisDefault;Ma(o,"axisLabel"),Ma(o&&o.axisPointer,"label")}),_c(wc(t.calendar),function(i){Xs(i,"itemStyle"),Ma(i,"dayLabel"),Ma(i,"monthLabel"),Ma(i,"yearLabel")}),_c(wc(t.radar),function(i){Ma(i,"name")}),_c(wc(t.geo),function(i){bg(i)&&(La(i),_c(wc(i.regions),function(o){La(o)}))}),_c(wc(t.timeline),function(i){La(i),Xs(i,"label"),Xs(i,"itemStyle"),Xs(i,"controlStyle",!0);var o=i.data;Fe(o)&&St(o,function(a){Ln(a)&&(Xs(a,"label"),Xs(a,"itemStyle"))})}),_c(wc(t.toolbox),function(i){Xs(i,"iconStyle"),_c(i.feature,function(o){Xs(o,"iconStyle")})}),Ma(b(t.axisPointer),"label"),Ma(b(t.tooltip).axisPointer,"label")})(t,e),t.series=di(t.series),St(t.series,function(n){if(Ln(n)){var i=n.type;if("line"===i)null!=n.clipOverflow&&(n.clip=n.clipOverflow);else if("pie"===i||"gauge"===i)null!=n.clockWise&&(n.clockwise=n.clockWise);else if("gauge"===i){var o=function(a,s){s=s.split(",");for(var u=a,d=0;d<s.length&&null!=(u=u&&u[s[d]]);d++);return u}(n,"pointer.color");null!=o&&function(a,s,u,d){s=s.split(",");for(var g,p=a,x=0;x<s.length-1;x++)null==p[g=s[x]]&&(p[g]={}),p=p[g];null!=p[s[x]]||(p[s[x]]=u)}(n,"itemStyle.color",o)}L(n)}}),t.dataRange&&(t.visualMap=t.dataRange),St(X,function(n){var i=t[n];i&&(Fe(i)||(i=[i]),St(i,function(o){L(o)}))})};function lt(t){St(t,function(e,n){var i=[],o=[NaN,NaN],s=e.data,u=e.isStackedByIndex,d=s.map([e.stackResultDimension,e.stackedOverDimension],function(g,p,x){var S,C,I=s.get(e.stackedDimension,x);if(isNaN(I))return o;u?C=s.getRawIndex(x):S=s.get(e.stackedByDimension,x);for(var z=NaN,O=n-1;0<=O;O--){var V=t[O];if(u||(C=V.data.rawIndexOf(V.stackedByDimension,S)),0<=C){var Y=V.data.getByRawIndex(V.stackResultDimension,C);if(0<=I&&0<Y||I<=0&&Y<0){I+=Y,z=Y;break}}}return i[0]=I,i[1]=z,i});s.hostModel.setData(d),e.data=d})}function pt(t,e){Uu.isInstance(t)||(t=Uu.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,i=t.sourceFormat;i===Cp&&(this._offset=0,this._dimSize=e,this._data=n),En(this,Wt[i===zh?i+"_"+t.seriesLayoutBy:i])}var Ct=pt.prototype;Ct.pure=!1;var Wt={arrayRows_column:{pure:Ct.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:Se},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,i=0;i<n.length;i++){var o=n[i];e.push(o?o[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:Qt,getItem:ve,appendData:Se},keyedColumns:{pure:!0,count:function(){var e=this._data[this._source.dimensionsDefine[0].name];return e?e.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var o=this._data[n[i].name];e.push(o?o[t]:null)}return e},appendData:function(t){var e=this._data;St(t,function(n,i){for(var o=e[i]||(e[i]=[]),a=0;a<(n||[]).length;a++)o.push(n[a])})}},original:{count:Qt,getItem:ve,appendData:Se},typedArray:{persistent:!(Ct.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){e=e||[];for(var n=this._dimSize*(t-=this._offset),i=0;i<this._dimSize;i++)e[i]=this._data[n+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function Qt(){return this._data.length}function ve(t){return this._data[t]}function Se(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var me={arrayRows:ae,objectRows:function(t,e,n,i){return null!=n?t[i]:t},keyedColumns:ae,original:function(t,e,n,i){var o=An(t);return null!=n&&o instanceof Array?o[n]:o},typedArray:ae};function ae(t,e,n,i){return null!=n?t[n]:t}var tn={arrayRows:Sn,objectRows:function(t,e,n,i){return jn(t[e],this._dimensionInfos[e])},keyedColumns:Sn,original:function(t,e,n,i){var o=t&&(null==t.value?t:t.value);return!this._rawData.pure&&function(a){return Me(a)&&!(a instanceof Array)}(t)&&(this.hasItemOption=!0),jn(o instanceof Array?o[i]:o,this._dimensionInfos[e])},typedArray:function(t,e,n,i){return t[i]}};function Sn(t,e,n,i){return jn(t[i],this._dimensionInfos[e])}function jn(t,e){var n=e&&e.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+nh(t)),null==t||""===t?NaN:+t;var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}function vi(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var o,a,s=t.getProvider().getSource().sourceFormat,u=t.getDimensionInfo(n);return u&&(o=u.name,a=u.index),me[s](i,e,a,o)}}}function ti(t,e,n){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===rh||i===bf){var o=t.getRawDataItem(e);return i!==rh||Ln(o)||(o=null),o?o[n]:void 0}}}var On=/\{@(.+?)\}/g,Di={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),u=n.getItemVisual(t,"color"),d=n.getItemVisual(t,"borderColor"),g=this.ecModel.getComponent("tooltip"),p=ws(g&&g.get("renderMode")),x=this.mainType,S="series"===x,C=n.userOutput;return{componentType:x,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:S?this.subType:null,seriesIndex:this.seriesIndex,seriesId:S?this.id:null,seriesName:S?this.name:null,name:a,dataIndex:o,data:s,dataType:e,value:i,color:u,borderColor:d,dimensionNames:C?C.dimensionNames:null,encode:C?C.encode:null,marker:_d({color:u,renderMode:p}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,i,o){e=e||"normal";var a=this.getData(n),s=a.getItemModel(t),u=this.getDataParams(t,n);null!=i&&u.value instanceof Array&&(u.value=u.value[i]);var d=s.get("normal"===e?[o||"label","formatter"]:[e,o||"label","formatter"]);return"function"==typeof d?(u.status=e,u.dimensionIndex=i,d(u)):"string"==typeof d?mi(d,u).replace(On,function(g,p){var x=p.length;return"["===p.charAt(0)&&"]"===p.charAt(x-1)&&(p=+p.slice(1,x-1)),vi(a,t,p)}):void 0},getRawValue:function(t,e){return vi(this.getData(e),t)},formatTooltip:function(){}};function Ni(t){return new io(t)}function io(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}var Ro=io.prototype;Ro.perform=function(t){var e,n=this._upstream,i=t&&t.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var a,s=p(this._modBy),u=this._modDataCount||0,d=p(t&&t.modBy),g=t&&t.modDataCount||0;function p(V){return 1<=V||(V=1),V}s===d&&u===g||(e="reset"),!this._dirty&&"reset"!==e||(this._dirty=!1,a=function(V,Y){var G,tt;V._dueIndex=V._outputDueEnd=V._dueEnd=0,V._settedOutputEnd=null,!Y&&V._reset&&((G=V._reset(V.context))&&G.progress&&(tt=G.forceFirstProgress,G=G.progress),Fe(G)&&!G.length&&(G=null)),V._progress=G,V._modBy=V._modDataCount=null;var Q=V._downstream;return Q&&Q.dirty(),tt}(this,i)),this._modBy=d,this._modDataCount=g;var x=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var S=this._dueIndex,C=Math.min(null!=x?this._dueIndex+x:1/0,this._dueEnd);if(!i&&(a||S<C)){var I=this._progress;if(Fe(I))for(var z=0;z<I.length;z++)O_(this,I[z],S,C,d,g);else O_(this,I,S,C,d,g)}this._dueIndex=C,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:C}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var qc,Zo,Ua,lh,Yu,N_,R_=N_={reset:function(t,e,n,i){Zo=t,qc=e,Ua=n,lh=i,Yu=Math.ceil(lh/Ua),N_.next=1<Ua&&0<lh?L_:GC}};function GC(){return Zo<qc?Zo++:null}function L_(){var t=Zo%Yu*Ua+Math.ceil(Zo/Yu),e=qc<=Zo?null:t<lh?t:Zo;return Zo++,e}function O_(t,e,n,i,o,a){R_.reset(n,i,o,a),t._callingProgress=e,t._callingProgress({start:n,end:i,count:i-n,next:R_.next},t.context)}Ro.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},Ro.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},Ro.pipe=function(t){this._downstream===t&&!this._dirty||((this._downstream=t)._upstream=this,t.dirty())},Ro.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Ro.getUpstream=function(){return this._upstream},Ro.getDownstream=function(){return this._downstream},Ro.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var Sc=or(),ra=Sr.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Ni({count:UC,reset:qC}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),xg(this);var o=this.getInitialData(t,n);Bx(o,this),this.dataTask.context.data=o,Sc(this).dataBeforeProcessed=o,Ox(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?Oh(t):{},o=this.subType;Sr.hasClass(o)&&(o+="Series"),ei(t,e.getTheme().get(this.subType)),ei(t,this.getDefaultOption()),Vi(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&Gu(t,i,n)},mergeOption:function(t,e){t=ei(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&Gu(this.option,t,n),xg(this);var i=this.getInitialData(t,e);Bx(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,Sc(this).dataBeforeProcessed=i,Ox(this)},fillDataTextStyle:function(t){if(t&&!Br(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Vi(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=E0(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return Sc(this).data},setData:function(t){var e=E0(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}Sc(this).data=t},getSource:function(){return function(t){return qu(t).source}(this)},getRawData:function(){return Sc(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,i){var o=this,a="html"===(i=i||"html")?"<br/>":"\n",s="richText"===i,u={},d=0,p=this.getData(),x=p.mapDimension("defaultedTooltip",!0),S=x.length,C=this.getRawValue(t),I=Fe(C),z=p.getItemVisual(t,"color");Ln(z)&&z.colorStops&&(z=(z.colorStops[0]||{}).color),z=z||"transparent";var O=(1<S||I&&!S?function(nt){var it=yn(nt,function(Ot,Bt,Vt){var $t=p.getDimensionInfo(Vt);return Ot|($t&&!1!==$t.tooltip&&null!=$t.displayName)},0),ct=[];function vt(Ot,Bt){var Vt=p.getDimensionInfo(Bt);if(Vt&&!1!==Vt.otherDims.tooltip){var $t=Vt.type,Jt="sub"+o.seriesIndex+"at"+d,Yt=_d({color:z,type:"subItem",renderMode:i,markerId:Jt}),Re=(it?("string"==typeof Yt?Yt:Yt.content)+Vr(Vt.displayName||"-")+": ":"")+Vr("ordinal"===$t?Ot+"":"time"===$t?e?"":_p("yyyy/MM/dd hh:mm:ss",Ot):Uc(Ot));Re&&ct.push(Re),s&&(u[Jt]=z,++d)}}x.length?St(x,function(Ot){vt(vi(p,t,Ot),Ot)}):St(nt,vt);var _t=it?s?"\n":"<br/>":"",At=_t+ct.join(_t||", ");return{renderMode:i,content:At,style:u}}(C):function g(nt){return{renderMode:i,content:Vr(Uc(nt)),style:u}}(S?vi(p,t,x[0]):I?C[0]:C)).content,V=o.seriesIndex+"at"+d,Y=_d({color:z,type:"item",renderMode:i,markerId:V});u[V]=z,++d;var G=p.getName(t),tt=this.name;xr(this)||(tt=""),tt=tt?Vr(tt)+(e?": ":a):"";var Q="string"==typeof Y?Y:Y.content;return{html:e?Q+tt+O:tt+Q+(G?Vr(G)+": "+O:O),markers:u}},isAnimationEnabled:function(){if(Oe.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var i=this.ecModel;return Cd.getColorFromPalette.call(this,t,e,n)||i.getColorFromPalette(t,e,n)},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Ox(t){var e=t.name;xr(t)||(t.name=function(n){var i=n.getRawData(),o=i.mapDimension("seriesName",!0),a=[];return St(o,function(s){var u=i.getDimensionInfo(s);u.displayName&&a.push(u.displayName)}),a.join(" ")}(t)||e)}function UC(t){return t.model.getRawData().count()}function qC(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),YC}function YC(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Bx(t,e){St(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,kn(B_,e))})}function B_(t){var e=E0(t);e&&e.setOutputEnd(this.count())}function E0(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var o=i.agentStubMap;o&&(i=o.get(t.uid))}return i}}Fn(ra,Di),Fn(ra,Cd);var Cc=function(){this.group=new _n,this.uid=vf("viewComponent")},N0=Cc.prototype={constructor:Cc,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){},filterForExposedEvent:null};function Ap(){var t=or();return function(e){var n=t(e),i=e.pipelineContext,o=n.large,a=n.progressiveRender,s=n.large=i&&i.large,u=n.progressiveRender=i&&i.progressiveRender;return!!(o^s||a^u)&&"reset"}}N0.updateView=N0.updateLayout=N0.updateVisual=function(t,e,n,i){},Vs(Cc),Hr(Cc,{registerWhenExtend:!0});var z_=or(),R0=Ap();function Ta(){this.group=new _n,this.uid=vf("viewChart"),this.renderTask=Ni({plan:Fx,reset:XC}),this.renderTask.context={view:this}}var zx=Ta.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){L0(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){L0(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function kp(t,e,n){if(t&&(t.trigger(e,n),t.isGroup&&!cp(t)))for(var i=0,o=t.childCount();i<o;i++)kp(t.childAt(i),e,n)}function L0(t,e,n){var i=Xo(t,e),o=e&&null!=e.highlightKey?Mm(e.highlightKey):null;null!=i?St(di(i),function(a){kp(t.getItemGraphicEl(a),n,o)}):t.eachItemGraphicEl(function(a){kp(a,n,o)})}function Fx(t){return R0(t.model)}function XC(t){var e=t.model,n=t.ecModel,i=t.api,o=t.payload,a=e.pipelineContext.progressiveRender,s=t.view,u=o&&z_(o).updateMethod,d=a?"incrementalPrepareRender":u&&s[u]?u:"render";return"render"!==d&&s[d](e,n,i,o),$C[d]}zx.updateView=zx.updateLayout=zx.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},Vs(Ta),Hr(Ta,{registerWhenExtend:!0}),Ta.markUpdateMethod=function(t,e){z_(t).updateMethod=e};var $C={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},Ip="\0__throttleOriginMethod",O0="\0__throttleRate",Hx="\0__throttleType";function Gm(t,e,n){var i,o,a,s,u,d=0,g=0,p=null;function x(){g=(new Date).getTime(),p=null,t.apply(a,s||[])}function S(){i=(new Date).getTime(),a=this,s=arguments;var C=u||e,I=u||n;u=null,o=i-(I?d:g)-C,clearTimeout(p),I?p=setTimeout(x,C):0<=o?x():p=setTimeout(x,-o),d=i}return e=e||0,S.clear=function(){p&&(clearTimeout(p),p=null)},S.debounceNextCall=function(C){u=C},S}function _g(t,e,n,i){var o=t[e];if(o){var a=o[Ip]||o;if(o[O0]!==n||o[Hx]!==i){if(null==n||!i)return t[e]=a;(o=t[e]=Gm(a,n,"debounce"===i))[Ip]=a,o[Hx]=i,o[O0]=n}return o}}function B0(t,e){var n=t[e];n&&n[Ip]&&(t[e]=n[Ip])}var ZC={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=(t.visualColorAccessPath||"itemStyle.color").split("."),o=t.get(i),a=!Ui(o)||o instanceof Tr?null:o;o&&!a||(o=t.getColorFromPalette(t.name,null,e.getSeriesCount())),n.setVisual("color",o);var s=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),u=t.get(s);if(n.setVisual("borderColor",u),!e.isSeriesFiltered(t))return a&&n.each(function(d){n.setItemVisual(d,"color",a(t.getDataParams(d)))}),{dataEach:n.hasItemOption?function(d,g){var p=d.getItemModel(g),x=p.get(i,!0),S=p.get(s,!0);null!=x&&d.setItemVisual(g,"color",x),null!=S&&d.setItemVisual(g,"borderColor",S)}:null}}},uh={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},Md=Math.PI;function Um(t,e,n,i){this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i),this._stageTaskMap=pe()}var Yc=Um.prototype;function F_(t,e,n,i,o){var a;function s(u,d){return u.setDirty&&(!u.dirtyMap||u.dirtyMap.get(d.__pipeline.id))}o=o||{},St(e,function(u,d){if(!o.visualType||o.visualType===u.visualType){var g=t._stageTaskMap.get(u.uid),p=g.seriesTaskMap,x=g.overallTask;if(x){var S,C=x.agentStubMap;C.each(function(z){s(o,z)&&(z.dirty(),S=!0)}),S&&x.dirty(),gu(x,i);var I=t.getPerformArgs(x,o.block);C.each(function(z){z.perform(I)}),a|=x.perform(I)}else p&&p.each(function(z,O){s(o,z)&&z.dirty();var V=t.getPerformArgs(z,o.block);V.skip=!u.performRawSeries&&n.isSeriesFiltered(z.context.model),gu(z,i),a|=z.perform(V)})}}),t.unfinished|=a}Yc.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},Yc.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,a=i&&i.modDataCount;return{step:o,modBy:null!=a?Math.ceil(a/o):null,modDataCount:a}}},Yc.getPipeline=function(t){return this._pipelineMap.get(t)},Yc.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),o=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,a=t.get("large")&&i>=t.get("largeThreshold"),s="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:s,large:a}},Yc.restorePipelines=function(t){var e=this,n=e._pipelineMap=pe();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),z0(e,i,i.dataTask)})},Yc.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;St(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,[]);i.reset&&function(a,s,u,d,g){var p=u.seriesTaskMap||(u.seriesTaskMap=pe()),x=s.seriesType,S=s.getTargetSeries;function C(z){var O=z.uid,V=p.get(O)||p.set(O,Ni({plan:j_,reset:JC,count:QC}));V.context={model:z,ecModel:d,api:g,useClearVisual:s.isVisual&&!s.isLayout,plan:s.plan,reset:s.reset,scheduler:a},z0(a,z,V)}s.createOnAllSeries?d.eachRawSeries(C):x?d.eachRawSeriesByType(x,C):S&&S(d,g).each(C);var I=a._pipelineMap;p.each(function(z,O){I.get(O)||(z.dispose(),p.removeKey(O))})}(this,i,o,e,n),i.overallReset&&function(a,s,u,d,g){var p=u.overallTask=u.overallTask||Ni({reset:H_});p.context={ecModel:d,api:g,overallReset:s.overallReset,scheduler:a};var x=p.agentStubMap=p.agentStubMap||pe(),S=s.seriesType,C=s.getTargetSeries,I=!0,z=s.modifyOutputEnd;function O(Y){var G=Y.uid,tt=x.get(G);tt||(tt=x.set(G,Ni({reset:V_,onDirty:W_})),p.dirty()),tt.context={model:Y,overallProgress:I,modifyOutputEnd:z},tt.agent=p,tt.__block=I,z0(a,Y,tt)}S?d.eachRawSeriesByType(S,O):C?C(d,g).each(O):(I=!1,St(d.getSeries(),O));var V=a._pipelineMap;x.each(function(Y,G){V.get(G)||(Y.dispose(),p.dirty(),x.removeKey(G))})}(this,i,o,e,n)},this)},Yc.prepareView=function(t,e,n,i){var o=t.renderTask,a=o.context;a.model=e,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,z0(this,e,o)},Yc.performDataProcessorTasks=function(t,e){F_(this,this._dataProcessorHandlers,t,e,{block:!0})},Yc.performVisualTasks=function(t,e,n){F_(this,this._visualHandlers,t,e,n)},Yc.performSeriesTasks=function(t){var e;t.eachSeries(function(n){e|=n.dataTask.perform()}),this.unfinished|=e},Yc.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var gu=Yc.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function H_(t){t.overallReset(t.ecModel,t.api,t.payload)}function V_(t,e){return t.overallProgress&&KC}function KC(){this.agent.dirty(),this.getDownstream().dirty()}function W_(){this.agent&&this.agent.dirty()}function j_(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function JC(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=di(t.reset(t.model,t.ecModel,t.api,t.payload));return 1<e.length?kt(e,function(n,i){return Vx(i)}):G_}var G_=Vx(0);function Vx(t){return function(e,n){var i=n.data,o=n.resetDefines[t];if(o&&o.dataEach)for(var a=e.start;a<e.end;a++)o.dataEach(i,a);else o&&o.progress&&o.progress(e,i)}}function QC(t){return t.data.count()}function z0(t,e,n){var o=t._pipelineMap.get(e.uid);o.head||(o.head=n),o.tail&&o.tail.pipe(n),(o.tail=n).__idxInPipeline=o.count++,n.__pipeline=o}Um.wrapStageHandler=function(t,e){return Ui(t)&&(t={overallReset:t,seriesType:function(n){F0=null;try{n(Pp,U_)}catch(i){}return F0}(t)}),t.uid=vf("stageHandler"),e&&(t.visualType=e),t};var F0,Pp={},U_={};function q_(t,e){for(var n in e.prototype)t[n]=_e}function H0(){return{axisLine:{lineStyle:{color:_l}},axisTick:{lineStyle:{color:_l}},axisLabel:{textStyle:{color:_l}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:_l}}}}q_(Pp,oh),q_(U_,ah),Pp.eachSeriesByType=Pp.eachRawSeriesByType=function(t){F0=t},Pp.eachComponent=function(t){"series"===t.mainType&&t.subType&&(F0=t.subType)};var wg=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],tM={color:wg,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],wg]},_l="#eee",Ep=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Wx={color:Ep,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:_l},crossStyle:{color:_l},label:{color:"#000"}}},legend:{textStyle:{color:_l}},textStyle:{color:_l},title:{textStyle:{color:_l}},toolbox:{iconStyle:{normal:{borderColor:_l}}},dataZoom:{textStyle:{color:_l}},visualMap:{textStyle:{color:_l}},timeline:{lineStyle:{color:_l},itemStyle:{normal:{color:Ep[1]}},label:{normal:{textStyle:{color:_l}}},controlStyle:{normal:{color:_l,borderColor:_l}}},timeAxis:H0(),logAxis:H0(),valueAxis:H0(),categoryAxis:H0(),line:{symbol:"circle"},graph:{color:Ep},gauge:{title:{textStyle:{color:_l}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Wx.categoryAxis.splitLine.show=!1,Sr.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(t){var e=t.option.source,n=Rm;if(Br(e))n=Cp;else if(Fe(e)){0===e.length&&(n=zh);for(var i=0,o=e.length;i<o;i++){var a=e[i];if(null!=a){if(Fe(a)){n=zh;break}if(Ln(a)){n=bf;break}}}}else if(Ln(e)){for(var s in e)if(e.hasOwnProperty(s)&&Lr(e[s])){n=bl;break}}else if(null!=e)throw new Error("Invalid data");qu(t).sourceFormat=n}(this)}}),Cc.extend({type:"dataset"});var Np=R.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=e.rx,a=e.ry,s=.5522848*o,u=.5522848*a;t.moveTo(n-o,i),t.bezierCurveTo(n-o,i-u,n-s,i-a,n,i-a),t.bezierCurveTo(n+s,i-a,n+o,i-u,n+o,i),t.bezierCurveTo(n+o,i+u,n+s,i+a,n,i+a),t.bezierCurveTo(n-s,i+a,n-o,i+u,n-o,i),t.closePath()}}),Vh=/[\s,]+/;function jx(t){for(bi(t)&&(t=(new DOMParser).parseFromString(t,"text/xml")),9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function qm(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}qm.prototype.parse=function(t,e){e=e||{};var n=jx(t);if(!n)throw new Error("Illegal svg");var i=new _n;this._root=i;var o=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||e.width),s=parseFloat(n.getAttribute("height")||e.height);isNaN(a)&&(a=null),isNaN(s)&&(s=null),Xu(n,i,null,!0);for(var u,d,g=n.firstChild;g;)this._parseNode(g,i),g=g.nextSibling;if(o){var p=Zn(o).split(Vh);4<=p.length&&(u={x:parseFloat(p[0]||0),y:parseFloat(p[1]||0),width:parseFloat(p[2]),height:parseFloat(p[3])})}if(u&&null!=a&&null!=s&&(d=Z_(u,a,s),!e.ignoreViewBox)){var x=i;(i=new _n).add(x),x.scale=d.scale.slice(),x.position=d.position.slice()}return e.ignoreRootClip||null==a||null==s||i.setClipPath(new Ji({shape:{x:0,y:0,width:a,height:s}})),{root:i,width:a,height:s,viewBoxRect:u,viewBoxTransform:d}},qm.prototype._parseNode=function(t,e){var n,i,o=t.nodeName.toLowerCase();if("defs"===o?this._isDefine=!0:"text"===o&&(this._isText=!0),this._isDefine){if(i=eM[o]){var a=i.call(this,t),s=t.getAttribute("id");s&&(this._defs[s]=a)}}else(i=V0[o])&&(n=i.call(this,t,e),e.add(n));for(var u=t.firstChild;u;)1===u.nodeType&&this._parseNode(u,n),3===u.nodeType&&this._isText&&this._parseText(u,n),u=u.nextSibling;"defs"===o?this._isDefine=!1:"text"===o&&(this._isText=!1)},qm.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var o=new rn({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Xc(e,o),Xu(t,o,this._defs);var a=o.style.fontSize;a&&a<9&&(o.style.fontSize=9,o.scale=o.scale||[1,1],o.scale[0]*=a/9,o.scale[1]*=a/9);var s=o.getBoundingRect();return this._textX+=s.width,e.add(o),o};var V0={g:function(t,e){var n=new _n;return Xc(e,n),Xu(t,n,this._defs),n},rect:function(t,e){var n=new Ji;return Xc(e,n),Xu(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new un;return Xc(e,n),Xu(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new go;return Xc(e,n),Xu(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Np;return Xc(e,n),Xu(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n=n&&Gx(n);var i=new nr({shape:{points:n||[]}});return Xc(e,i),Xu(t,i,this._defs),i},polyline:function(t,e){var n=new R;Xc(e,n),Xu(t,n,this._defs);var i=t.getAttribute("points");return i=i&&Gx(i),new rr({shape:{points:i||[]}})},image:function(t,e){var n=new Po;return Xc(e,n),Xu(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,i=t.getAttribute("y")||0,o=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(i)+parseFloat(a);var s=new _n;return Xc(e,s),Xu(t,s,this._defs),s},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var o=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0,s=new _n;return Xc(e,s),Xu(t,s,this._defs),this._textX+=o,this._textY+=a,s},path:function(t,e){var n=wn(t.getAttribute("d")||"");return Xc(e,n),Xu(t,n,this._defs),n}},eM={lineargradient:function(t){var a=new $d(parseInt(t.getAttribute("x1")||0,10),parseInt(t.getAttribute("y1")||0,10),parseInt(t.getAttribute("x2")||10,10),parseInt(t.getAttribute("y2")||0,10));return function(s,u){for(var d=s.firstChild;d;){if(1===d.nodeType){var g=d.getAttribute("offset");g=0<g.indexOf("%")?parseInt(g,10)/100:g?parseFloat(g):0;var p=d.getAttribute("stop-color")||"#000000";u.addColorStop(g,p)}d=d.nextSibling}}(t,a),a},radialgradient:function(t){}};function Xc(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Dn(e.__inheritedStyle,t.__inheritedStyle))}function Gx(t){for(var e=Zn(t).split(Vh),n=[],i=0;i<e.length;i+=2){var o=parseFloat(e[i]),a=parseFloat(e[i+1]);n.push([o,a])}return n}var Sg={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function Xu(t,e,n,i){var o=e.__inheritedStyle||{},a="text"===e.type;if(1===t.nodeType&&(function(x,S){var C=x.getAttribute("transform");if(C){C=C.replace(/,/g," ");var I=null,z=[];C.replace(X_,function(G,tt,Q){z.push(tt,Q)});for(var O=z.length-1;0<O;O-=2){var V=z[O],Y=z[O-1];switch(I=I||yt(),Y){case"translate":V=Zn(V).split(Vh),fe(I,I,[parseFloat(V[0]),parseFloat(V[1]||0)]);break;case"scale":V=Zn(V).split(Vh),In(I,I,[parseFloat(V[0]),parseFloat(V[1]||V[0])]);break;case"rotate":V=Zn(V).split(Vh),he(I,I,parseFloat(V[0]));break;case"skew":V=Zn(V).split(Vh),console.warn("Skew transform is not supported yet");break;case"matrix":V=Zn(V).split(Vh),I[0]=parseFloat(V[0]),I[1]=parseFloat(V[1]),I[2]=parseFloat(V[2]),I[3]=parseFloat(V[3]),I[4]=parseFloat(V[4]),I[5]=parseFloat(V[5])}}S.setLocalTransform(I)}}(t,e),En(o,function(x){var S=x.getAttribute("style"),C={};if(!S)return C;var I,z={};for($_.lastIndex=0;null!=(I=$_.exec(S));)z[I[1]]=I[2];for(var O in Sg)Sg.hasOwnProperty(O)&&null!=z[O]&&(C[Sg[O]]=z[O]);return C}(t)),!i))for(var s in Sg)if(Sg.hasOwnProperty(s)){var u=t.getAttribute(s);null!=u&&(o[Sg[s]]=u)}var d=a?"textFill":"fill",g=a?"textStroke":"stroke";e.style=e.style||new vs;var p=e.style;null!=o.fill&&p.set(d,$s(o.fill,n)),null!=o.stroke&&p.set(g,$s(o.stroke,n)),St(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(x){null!=o[x]&&p.set("lineWidth"===x&&a?"textStrokeWidth":x,parseFloat(o[x]))}),o.textBaseline&&"auto"!==o.textBaseline||(o.textBaseline="alphabetic"),"alphabetic"===o.textBaseline&&(o.textBaseline="bottom"),"start"===o.textAlign&&(o.textAlign="left"),"end"===o.textAlign&&(o.textAlign="right"),St(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(x){null!=o[x]&&p.set(x,o[x])}),o.lineDash&&(e.style.lineDash=Zn(o.lineDash).split(Vh)),p[g]&&"none"!==p[g]&&(e[g]=!0),e.__inheritedStyle=o}var Y_=/url\(\s*#(.*?)\)/;function $s(t,e){var n=e&&t&&t.match(Y_);return n?e[Zn(n[1])]:t}var X_=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,$_=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Z_(t,e,n){var a=Math.min(e/t.width,n/t.height);return{scale:[a,a],position:[-(t.x+t.width/2)*a+e/2,-(t.y+t.height/2)*a+n/2]}}var Ux=pe(),W0_retrieveMap=function(t){return Ux.get(t)},nM={geoJSON:function(t){var e=t.source;t.geoJSON=bi(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=jx(t.source)}},iM=Ei,ls=St,j0=Ui,Cg=Ln,G0=Sr.parseClassType,Td={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},ch="__flagInMainProcess",Cf="__optionUpdated",K_=/^[a-zA-Z0-9_]+$/;function Mf(t,e){return function(n,i,o){!e&&this._disposed||(n=n&&n.toLowerCase(),Ai.prototype[t].call(this,n,i,o))}}function dh(){Ai.call(this)}function Ym(t,e,n){n=n||{},"string"==typeof e&&(e=tw[e]),this._dom=t;var i=this._zr=Ut(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=Gm(Rn(i.flush,i),17),(e=fn(e))&&J(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new Ca;var s,u,o=this._api=(u=(s=this)._coordSysMgr,En(new ah(s),{getCoordinateSystems:Rn(u.getCoordinateSystems,u),getComponentByElement:function(d){for(;d;){var g=d.__ecComponentInfo;if(null!=g)return s._model.getComponent(g.mainType,g.index);d=d.parent}}}));function a(s,u){return s.__prio-u.__prio}ms(Dg,a),ms(Tg,a),this._scheduler=new Um(this,o,Tg,Dg),Ai.call(this,this._ecEventProcessor=new $x),this._messageCenter=new dh,this._initEvents(),this.resize=Rn(this.resize,this),this._pendingActions=[],i.animation.on("frame",this._onframe,this),function(s,u){s.on("rendered",function(){u.trigger("rendered"),!s.animation.isFinished()||u[Cf]||u._scheduler.unfinished||u._pendingActions.length||u.trigger("finished")})}(i,this),Mr(this)}dh.prototype.on=Mf("on",!0),dh.prototype.off=Mf("off",!0),dh.prototype.one=Mf("one",!0),Fn(dh,Ai);var Wr=Ym.prototype;function U0(t,e,n){if(!this._disposed){var i,o=this._model,a=this._coordSysMgr.getCoordinateSystems();e=ta(o,e);for(var s=0;s<a.length;s++){var u=a[s];if(u[t]&&null!=(i=u[t](o,e,n)))return i}}}Wr._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[Cf]){var e=this[Cf].silent;this[ch]=!0,Rp(this),Tf.update.call(this),this[ch]=!1,this[Cf]=!1,Xm.call(this,e),$m.call(this,e)}else if(t.unfinished){var n=1,i=this._model;t.unfinished=!1;do{var a=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),q0(this,i),t.performVisualTasks(i),X0(this,this._model,0,"remain"),n-=+new Date-a}while(0<n&&t.unfinished);t.unfinished||this._zr.flush()}}},Wr.getDom=function(){return this._dom},Wr.getZr=function(){return this._zr},Wr.setOption=function(t,e,n){if(!this._disposed){var i;if(Cg(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[ch]=!0,!this._model||e){var o=new sh(this._api),a=this._theme,s=this._model=new oh;s.scheduler=this._scheduler,s.init(null,null,a,o)}this._model.setOption(t,Q_),n?(this[Cf]={silent:i},this[ch]=!1):(Rp(this),Tf.update.call(this),this._zr.flush(),this[Cf]=!1,this[ch]=!1,Xm.call(this,i),$m.call(this,i))}},Wr.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Wr.getModel=function(){return this._model},Wr.getOption=function(){return this._model&&this._model.getOption()},Wr.getWidth=function(){return this._zr.getWidth()},Wr.getHeight=function(){return this._zr.getHeight()},Wr.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Wr.getRenderedCanvas=function(t){if(Oe.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},Wr.getSvgDataURL=function(){if(Oe.svgSupported){var t=this._zr;return St(t.storage.getDisplayList(),function(e){e.stopAnimation(!0)}),t.painter.toDataURL()}},Wr.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,n=this._model,i=[],o=this;ls(e,function(s){n.eachComponent({mainType:s},function(u){var d=o._componentsMap[u.__viewId];d.group.ignore||(i.push(d),d.group.ignore=!0)})});var a="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return ls(i,function(s){s.group.ignore=!1}),a}},Wr.getConnectedDataURL=function(t){if(!this._disposed&&Oe.canvasSupported){var e="svg"===t.type,n=this.group,i=Math.min,o=Math.max;if(Km[n]){var a=1/0,s=1/0,u=-1/0,d=-1/0,g=[],p=t&&t.pixelRatio||1;St(Ag,function(O,V){if(O.group===n){var Y=e?O.getZr().painter.getSvgDom().innerHTML:O.getRenderedCanvas(fn(t)),G=O.getDom().getBoundingClientRect();a=i(G.left,a),s=i(G.top,s),u=o(G.right,u),d=o(G.bottom,d),g.push({dom:Y,left:G.left,top:G.top})}});var x=(u*=p)-(a*=p),S=(d*=p)-(s*=p),C=Dr(),I=Ut(C,{renderer:e?"svg":"canvas"});if(I.resize({width:x,height:S}),e){var z="";return ls(g,function(O){z+='<g transform="translate('+(O.left-a)+","+(O.top-s)+')">'+O.dom+"</g>"}),I.painter.getSvgRoot().innerHTML=z,t.connectedBackgroundColor&&I.painter.setBackgroundColor(t.connectedBackgroundColor),I.refreshImmediately(),I.painter.toDataURL()}return t.connectedBackgroundColor&&I.add(new Ji({shape:{x:0,y:0,width:x,height:S},style:{fill:t.connectedBackgroundColor}})),ls(g,function(O){var V=new Po({style:{x:O.left*p-a,y:O.top*p-s,image:O.dom}});I.add(V)}),I.refreshImmediately(),C.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},Wr.convertToPixel=kn(U0,"convertToPixel"),Wr.convertFromPixel=kn(U0,"convertFromPixel"),Wr.containPixel=function(t,e){var n;if(!this._disposed)return St(t=ta(this._model,t),function(i,o){0<=o.indexOf("Models")&&St(i,function(a){var s=a.coordinateSystem;if(s&&s.containPoint)n|=!!s.containPoint(e);else if("seriesModels"===o){var u=this._chartsMap[a.__viewId];u&&u.containPoint&&(n|=u.containPoint(e,a))}},this)},this),!!n},Wr.getVisual=function(t,e){var n=(t=ta(this._model,t,{defaultMainType:"series"})).seriesModel.getData(),i=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=i?n.getItemVisual(i,e):n.getVisual(e)},Wr.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},Wr.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var Tf={prepareAndUpdate:function(t){Rp(this),Tf.update.call(this,t)},update:function(t){var e=this._model,n=this._api,i=this._zr,o=this._coordSysMgr,a=this._scheduler;if(e){a.restoreData(e,t),a.performSeriesTasks(e),o.create(e,n),a.performDataProcessorTasks(e,t),q0(this,e),o.update(e,n),Df(e),a.performVisualTasks(e,t),Yx(this,e,n,t);var s=e.get("backgroundColor")||"transparent";if(Oe.canvasSupported)i.setBackgroundColor(s);else{var u=sa(s);s=Es(u,"rgb"),0===u[3]&&(s="transparent")}Xx(e,n)}},updateTransform:function(t){var e=this._model,n=this,i=this._api;if(e){var o=[];e.eachComponent(function(s,u){var d=n.getViewOfComponentModel(u);if(d&&d.__alive)if(d.updateTransform){var g=d.updateTransform(u,e,i,t);g&&g.update&&o.push(d)}else o.push(d)});var a=pe();e.eachSeries(function(s){var u=n._chartsMap[s.__viewId];if(u.updateTransform){var d=u.updateTransform(s,e,i,t);d&&d.update&&a.set(s.uid,1)}else a.set(s.uid,1)}),Df(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:a}),X0(n,e,0,t,a),Xx(e,this._api)}},updateView:function(t){var e=this._model;e&&(Ta.markUpdateMethod(t,"updateView"),Df(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),Yx(this,this._model,this._api,t),Xx(e,this._api))},updateVisual:function(t){Tf.update.call(this,t)},updateLayout:function(t){Tf.update.call(this,t)}};function Rp(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),qx(t,"component",e,n),qx(t,"chart",e,n),n.plan()}function J_(t,e,n,i,o){var a=t._model;if(i){var s={};s[i+"Id"]=n[i+"Id"],s[i+"Index"]=n[i+"Index"],s[i+"Name"]=n[i+"Name"];var u={mainType:i,query:s};o&&(u.subType=o);var d=n.excludeSeriesId;null!=d&&(d=pe(di(d))),a&&a.eachComponent(u,function(p){d&&null!=d.get(p.id)||g(t["series"===i?"_chartsMap":"_componentsMap"][p.__viewId])},t)}else ls(t._componentsViews.concat(t._chartsViews),g);function g(p){p&&p.__alive&&p[e]&&p[e](p.__model,a,t._api,n)}}function q0(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries(function(o){i.updateStreamModes(o,n[o.__viewId])})}function Y0(t,e){var n=t.type,i=t.escapeConnect,o=Zm[n],a=o.actionInfo,s=(a.update||"update").split(":"),u=s.pop();s=null!=s[0]&&G0(s[0]),this[ch]=!0;var d=[t],g=!1;t.batch&&(g=!0,d=kt(t.batch,function(C){return(C=Dn(En({},C),t)).batch=null,C}));var p,x=[],S="highlight"===n||"downplay"===n;ls(d,function(C){(p=(p=o.action(C,this._model,this._api))||En({},C)).type=a.event||p.type,x.push(p),S?J_(this,u,C,"series"):s&&J_(this,u,C,s.main,s.sub)},this),"none"===u||S||s||(this[Cf]?(Rp(this),Tf.update.call(this,t),this[Cf]=!1):Tf[u].call(this,t)),p=g?{type:a.event||n,escapeConnect:i,batch:x}:x[0],this[ch]=!1,e||this._messageCenter.trigger(p.type,p)}function Xm(t){for(var e=this._pendingActions;e.length;){var n=e.shift();Y0.call(this,n,t)}}function $m(t){t||this.trigger("updated")}function qx(t,e,n,i){for(var o="component"===e,a=o?t._componentsViews:t._chartsViews,s=o?t._componentsMap:t._chartsMap,u=t._zr,d=t._api,g=0;g<a.length;g++)a[g].__alive=!1;function p(S){var C="_ec_"+S.id+"_"+S.type,I=s[C];if(!I){var z=G0(S.type);(I=new(o?Cc.getClass(z.main,z.sub):Ta.getClass(z.sub))).init(n,d),s[C]=I,a.push(I),u.add(I.group)}S.__viewId=I.__id=C,I.__alive=!0,I.__model=S,I.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},o||i.prepareView(I,S,n,d)}for(o?n.eachComponent(function(S,C){"series"!==S&&p(C)}):n.eachSeries(p),g=0;g<a.length;){var x=a[g];x.__alive?g++:(o||x.renderTask.dispose(),u.remove(x.group),x.dispose(n,d),a.splice(g,1),delete s[x.__id],x.__id=x.group.__ecComponentInfo=null)}}function Df(t){t.clearColorPalette(),t.eachSeries(function(e){e.clearColorPalette()})}function Yx(t,e,n,i){(function(o,a,s,u,d){ls(o._componentsViews,function(g){var p=g.__model;g.render(p,a,s,u),Lp(p,g)})})(t,e,n,i),ls(t._chartsViews,function(o){o.__alive=!1}),X0(t,e,0,i),ls(t._chartsViews,function(o){o.__alive||o.remove(e,n)})}function X0(t,e,n,i,o){var a,u,d,p,s=t._scheduler;e.eachSeries(function(u){var d=t._chartsMap[u.__viewId];d.__alive=!0;var x,S,g=d.renderTask;s.updatePayload(g,i),o&&o.get(u.uid)&&g.dirty(),a|=g.perform(s.getPerformArgs(g)),d.group.silent=!!u.get("silent"),Lp(u,d),x=d,S=u.get("blendMode")||null,x.group.traverse(function(C){C.isGroup||C.style.blend!==S&&C.setStyle("blend",S),C.eachPendingDisplayable&&C.eachPendingDisplayable(function(I){I.setStyle("blend",S)})})}),s.unfinished|=a,d=e,p=0,(u=t)._zr.storage.traverse(function(x){p++}),p>d.get("hoverLayerThreshold")&&!Oe.node&&d.eachSeries(function(x){if(!x.preventUsingHoverLayer){var S=u._chartsMap[x.__viewId];S.__alive&&S.group.traverse(function(C){C.useHoverLayer=!0})}}),function(t,e){var S,n=e.getModel("aria");if(n.get("show"))if(n.get("description"))t.setAttribute("aria-label",n.get("description"));else{var i=0;e.eachSeries(function(S,C){++i},this);var o,a=n.get("data.maxCount")||10,s=n.get("series.maxCount")||10,u=Math.min(i,s);if(!(i<1)){var d=((S=e.getModel("title").option)&&S.length&&(S=S[0]),S&&S.text);o=d?p(x("general.withTitle"),{title:d}):x("general.withoutTitle");var g=[];o+=p(x(1<i?"series.multiple.prefix":"series.single.prefix"),{seriesCount:i}),e.eachSeries(function(S,C){if(C<u){var I,z=S.get("name"),O="series."+(1<i?"multiple":"single")+".";I=p(I=x(z?O+"withName":O+"withoutName"),{seriesId:S.seriesIndex,seriesName:S.get("name"),seriesType:(nt=S.subType,uh.series.typeNames[nt]||"\u81ea\u5b9a\u4e49\u56fe")});var V=S.getData();(window.data=V).count()>a?I+=p(x("data.partialData"),{displayCnt:a}):I+=x("data.allData");for(var Y=[],G=0;G<V.count();G++)if(G<a){var tt=V.getName(G),Q=vi(V,G);Y.push(p(x(tt?"data.withName":"data.withoutName"),{name:tt,value:Q}))}I+=Y.join(x("data.separator.middle"))+x("data.separator.end"),g.push(I)}var nt}),o+=g.join(x("series.multiple.separator.middle"))+x("series.multiple.separator.end"),t.setAttribute("aria-label",o)}}function p(S,C){if("string"!=typeof S)return S;var I=S;return St(C,function(z,O){I=I.replace(new RegExp("\\{\\s*"+O+"\\s*\\}","g"),z)}),I}function x(S){var C=n.get(S);if(null!=C)return C;for(var I=S.split("."),z=uh.aria,O=0;O<I.length;++O)z=z[I[O]];return z}}(t._zr.dom,e)}function Xx(t,e){ls(Zx,function(n){n(t,e)})}Wr.resize=function(t){if(!this._disposed){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[ch]=!0,n&&Rp(this),Tf.update.call(this),this[ch]=!1,Xm.call(this,i),$m.call(this,i)}}},Wr.showLoading=function(t,e){if(!this._disposed&&(Cg(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Z0[t])){var n=Z0[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},Wr.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Wr.makeActionFromEvent=function(t){var e=En({},t);return e.type=Mg[t.type],e},Wr.dispatchAction=function(t,e){this._disposed||(Cg(e)||(e={silent:!!e}),Zm[t.type]&&this._model&&(this[ch]?this._pendingActions.push(t):(Y0.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&Oe.browser.weChat&&this._throttledZrFlush(),Xm.call(this,e.silent),$m.call(this,e.silent))))},Wr.appendData=function(t){if(!this._disposed){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0}},Wr.on=Mf("on",!1),Wr.off=Mf("off",!1),Wr.one=Mf("one",!1);var $0=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Lp(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse(function(o){"group"!==o.type&&(null!=n&&(o.z=n),null!=i&&(o.zlevel=i))})}function $x(){}Wr._initEvents=function(){ls($0,function(t){function e(n){var i,o=this.getModel(),a=n.target;if("globalout"===t)i={};else if(a&&null!=a.dataIndex){var s=a.dataModel||o.getSeriesByIndex(a.seriesIndex);i=s&&s.getDataParams(a.dataIndex,a.dataType,a)||{}}else a&&a.eventData&&(i=En({},a.eventData));if(i){var u=i.componentType,d=i.componentIndex;"markLine"!==u&&"markPoint"!==u&&"markArea"!==u||(u="series",d=i.seriesIndex);var g=u&&null!=d&&o.getComponent(u,d),p=g&&this["series"===g.mainType?"_chartsMap":"_componentsMap"][g.__viewId];i.event=n,i.type=t,this._ecEventProcessor.eventInfo={targetEl:a,packedEvent:i,model:g,view:p},this.trigger(t,i)}}e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)},this),ls(Mg,function(t,e){this._messageCenter.on(e,function(n){this.trigger(e,n)},this)},this)},Wr.isDisposed=function(){return this._disposed},Wr.clear=function(){this._disposed||this.setOption({series:[]},!0)},Wr.dispose=function(){if(!this._disposed){this._disposed=!0,ba(this.getDom(),K0,"");var t=this._api,e=this._model;ls(this._componentsViews,function(n){n.dispose(e,t)}),ls(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete Ag[this.id]}},Fn(Ym,Ai),$x.prototype={constructor:$x,normalizeQuery:function(t){var e={},n={},i={};if(bi(t)){var o=G0(t);e.mainType=o.main||null,e.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};St(t,function(u,d){for(var g=!1,p=0;p<a.length;p++){var x=a[p],S=d.lastIndexOf(x);if(0<S&&S===d.length-x.length){var C=d.slice(0,S);"data"!==C&&(e.mainType=C,e[x.toLowerCase()]=u,g=!0)}}s.hasOwnProperty(d)&&(n[d]=u,g=!0),g||(i[d]=u)})}return{cptQuery:e,dataQuery:n,otherQuery:i}},filter:function(t,e,n){var i=this.eventInfo;if(!i)return!0;var o=i.targetEl,a=i.packedEvent,s=i.model,u=i.view;if(!s||!u)return!0;var d=e.cptQuery,g=e.dataQuery;return p(d,s,"mainType")&&p(d,s,"subType")&&p(d,s,"index","componentIndex")&&p(d,s,"name")&&p(d,s,"id")&&p(g,a,"name")&&p(g,a,"dataIndex")&&p(g,a,"dataType")&&(!u.filterForExposedEvent||u.filterForExposedEvent(t,e.otherQuery,o,a));function p(x,S,C,I){return null==x[C]||S[I||C]===x[C]}},afterTrigger:function(){this.eventInfo=null}};var Zm={},Mg={},Tg=[],Q_=[],Zx=[],Dg=[],tw={},Z0={},Ag={},Km={},rM=new Date-0,oM=new Date-0,K0="_echarts_instance_";function Kx(t){Km[t]=!1}var aM=Kx;function Jx(t){return Ag[function(e,n){return e.getAttribute?e.getAttribute(n):e[n]}(t,K0)]}function Qx(t,e){tw[t]=e}function wl(t){Q_.push(t)}function $u(t,e){tb(Tg,t,e,1e3)}function Cr(t,e,n){"function"==typeof e&&(n=e,e="");var i=Cg(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,iM(K_.test(i)&&K_.test(e)),Zm[i]||(Zm[i]={action:n,actionInfo:t}),Mg[e]=i}function J0(t,e){Ca.register(t,e)}function oa(t,e){tb(Dg,t,e,1e3,"layout")}function jo(t,e){tb(Dg,t,e,3e3,"visual")}function tb(t,e,n,i,o){(j0(e)||Cg(e))&&(n=e,e=i);var a=Um.wrapStageHandler(n,o);return a.__prio=e,a.__raw=n,t.push(a),a}function eb(t,e){Z0[t]=e}function pu(t){return Sr.extend(t)}function Oa(t){return Cc.extend(t)}function Q0(t){return ra.extend(t)}function Zu(t){return Ta.extend(t)}function ew(t){return t}function $c(t,e,n,i,o){this._old=t,this._new=e,this._oldKeyGetter=n||ew,this._newKeyGetter=i||ew,this.context=o}function ty(t,e,n,i,o){for(var a=0;a<t.length;a++){var s="_ec_"+o[i](t[a],a),u=e[s];null==u?(n.push(s),e[s]=a):(u.length||(e[s]=u=[u]),u.push(a))}}jo(2e3,ZC),wl(J),$u(900,function(t){var e=pe();t.eachSeries(function(n){var i=n.get("stack");if(i){var o=e.get(i)||e.set(i,[]),a=n.getData(),s={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:n};if(!s.stackedDimension||!s.isStackedByIndex&&!s.stackedByDimension)return;o.length&&a.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(s)}}),e.each(lt)}),eb("default",function(t,e){Dn(e=e||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new _n,i=new Ji({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(i);var o=e.fontSize+" sans-serif",a=new Ji({style:{fill:"none",text:e.text,font:o,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});if(n.add(a),e.showSpinner){var s=new Ah({shape:{startAngle:-Md/2,endAngle:-Md/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001});s.animateShape(!0).when(1e3,{endAngle:3*Md/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:3*Md/2}).delay(300).start("circularInOut"),n.add(s)}return n.resize=function(){var u=Qo(e.text,o),d=e.showSpinner?e.spinnerRadius:0,g=(t.getWidth()-2*d-(e.showSpinner&&u?10:0)-u)/2-(e.showSpinner?0:u/2),p=t.getHeight()/2;e.showSpinner&&s.setShape({cx:g,cy:p}),a.setShape({x:g-d,y:p-d,width:2*d,height:2*d}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}),Cr({type:"highlight",event:"highlight",update:"highlight"},_e),Cr({type:"downplay",event:"downplay",update:"downplay"},_e),Qx("light",tM),Qx("dark",Wx),$c.prototype={constructor:$c,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},i=[],o=[];for(ty(t,{},i,"_oldKeyGetter",this),ty(e,n,o,"_newKeyGetter",this),a=0;a<t.length;a++)null!=(u=n[s=i[a]])?((g=u.length)?(1===g&&(n[s]=null),u=u.shift()):n[s]=null,this._update&&this._update(u,a)):this._remove&&this._remove(a);for(var a=0;a<o.length;a++){var s=o[a];if(n.hasOwnProperty(s)){var u;if(null==(u=n[s]))continue;if(u.length)for(var d=0,g=u.length;d<g;d++)this._add&&this._add(u[d]);else this._add&&this._add(u)}}}};var nb=pe(["tooltip","label","itemName","itemId","seriesName"]);function Jm(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function Qm(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function Op(t){null!=t&&En(this,t),this.otherDims={}}var kg=Ln,Sl="undefined",ey={float:typeof Float64Array==Sl?Array:Float64Array,int:typeof Int32Array==Sl?Array:Int32Array,ordinal:Array,number:Array,time:Array},ny=typeof Uint32Array==Sl?Array:Uint32Array,Bp=typeof Int32Array==Sl?Array:Int32Array,nw=typeof Uint16Array==Sl?Array:Uint16Array;function tv(t){return 65535<t._rawCount?ny:nw}var iw=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],ib=["_extent","_approximateExtent","_rawExtent"];function iy(t,e){St(iw.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,St(ib,function(n){t[n]=fn(e[n])}),t._calculationInfo=En(e._calculationInfo)}var qa=function(t,e){t=t||["x","y"];for(var n={},i=[],o={},a=0;a<t.length;a++){var s=t[a];bi(s)?s=new Op({name:s}):s instanceof Op||(s=new Op(s));var u=s.name;s.type=s.type||"float",s.coordDim||(s.coordDim=u,s.coordDimIndex=0),s.otherDims=s.otherDims||{},i.push(u),(n[u]=s).index=a,s.createInvertedIndices&&(o[u]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(d){var g={},p=g.encode={},x=pe(),S=[],C=[],I=g.userOutput={dimensionNames:d.dimensions.slice(),encode:{}};St(d.dimensions,function(G){var it,tt=d.getDimensionInfo(G),Q=tt.coordDim;if(Q){var nt=tt.coordDimIndex;Jm(p,Q)[nt]=G,tt.isExtraCoord||(x.set(Q,1),!("ordinal"===(it=tt.type)||"time"===it)&&(S[0]=G),Jm(I.encode,Q)[nt]=tt.index),tt.defaultTooltip&&C.push(G)}nb.each(function(it,ct){var vt=Jm(p,ct),_t=tt.otherDims[ct];null!=_t&&!1!==_t&&(vt[_t]=tt.name)})});var z=[],O={};x.each(function(G,tt){var Q=p[tt];O[tt]=Q[0],z=z.concat(Q)}),g.dataDimsOnCoord=z,g.encodeFirstDimNotExtra=O;var V=p.label;V&&V.length&&(S=V.slice());var Y=p.tooltip;return Y&&Y.length?C=Y.slice():C.length||(C=S.slice()),p.defaultedLabel=S,p.defaultedTooltip=C,g}(this),this._invertedIndicesMap=o,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},Ri=qa.prototype;function rb(t,e,n,i,o){var a=ey[e.type],s=i-1,u=e.name,d=t[u][s];if(d&&d.length<n){for(var g=new a(Math.min(o-s*n,n)),p=0;p<d.length;p++)g[p]=d[p];t[u][s]=g}for(var x=i*n;x<o;x+=n)t[u].push(new a(Math.min(o-x,n)))}function ob(t){var e=t._invertedIndicesMap;St(e,function(n,i){var o=t._dimensionInfos[i].ordinalMeta;if(o){n=e[i]=new Bp(o.categories.length);for(var a=0;a<n.length;a++)n[a]=-1;for(a=0;a<t._count;a++)n[t.get(i,a)]=a}})}function rw(t,e,n){var i;if(null!=e){var o=t._chunkSize,a=Math.floor(n/o),u=t.dimensions[e],d=t._storage[u][a];if(d){i=d[n%o];var g=t._dimensionInfos[u].ordinalMeta;g&&g.categories.length&&(i=g.categories[i])}}return i}function ev(t){return t}function nv(t){return t<this._count&&0<=t?this._indices[t]:-1}function ab(t,e){var n=t._idList[e];return null==n&&(n=rw(t,t._idDimIdx,e)),null==n&&(n="e\0\0"+e),n}function sb(t){return Fe(t)||(t=[t]),t}function iv(t,e){var n=t.dimensions,i=new qa(kt(n,t.getDimensionInfo,t),t.hostModel);iy(i,t);for(var o=i._storage={},a=t._storage,s=0;s<n.length;s++){var u=n[s];a[u]&&(0<=zn(e,u)?(o[u]=ow(a[u]),i._rawExtent[u]=[1/0,-1/0],i._extent[u]=null):o[u]=a[u])}return i}function ow(t){for(var e,n,i=new Array(t.length),o=0;o<t.length;o++)i[o]=(n=void 0,(n=(e=t[o]).constructor)===Array?e.slice():new n(e));return i}function sM(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType}function aw(t,e,n){Uu.isInstance(e)||(e=Uu.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var i=(n.dimsDef||[]).slice(),o=pe(),a=pe(),s=[],u=function(nt,it,ct,vt){var _t=Math.max(nt.dimensionsDetectCount||1,it.length,ct.length,vt||0);return St(it,function(At){var Ot=At.dimsDef;Ot&&(_t=Math.max(_t,Ot.length))}),_t}(e,t,i,n.dimCount),d=0;d<u;d++){var g=i[d]=En({},Ln(i[d])?i[d]:{name:i[d]}),p=g.name,x=s[d]=new Op;null!=p&&null==o.get(p)&&(x.name=x.displayName=p,o.set(p,d)),null!=g.type&&(x.type=g.type),null!=g.displayName&&(x.displayName=g.displayName)}var S=n.encodeDef;!S&&n.encodeDefaulter&&(S=n.encodeDefaulter(e,u)),(S=pe(S)).each(function(nt,it){if(1===(nt=di(nt).slice()).length&&!bi(nt[0])&&nt[0]<0)S.set(it,!1);else{var ct=S.set(it,[]);St(nt,function(vt,_t){bi(vt)&&(vt=o.get(vt)),null!=vt&&vt<u&&(ct[_t]=vt,I(s[vt],it,_t))})}});var C=0;function I(nt,it,ct){null!=nb.get(it)?nt.otherDims[it]=ct:(nt.coordDim=it,nt.coordDimIndex=ct,a.set(it,!0))}St(t,function(nt,it){var ct,vt,_t;if(bi(nt))ct=nt,nt={};else{ct=nt.name;var At=nt.ordinalMeta;nt.ordinalMeta=null,(nt=fn(nt)).ordinalMeta=At,vt=nt.dimsDef,_t=nt.otherDims,nt.name=nt.coordDim=nt.coordDimIndex=nt.dimsDef=nt.otherDims=null}if(!1!==(Ot=S.get(ct))){var Ot;if(!(Ot=di(Ot)).length)for(var Bt=0;Bt<(vt&&vt.length||1);Bt++){for(;C<s.length&&null!=s[C].coordDim;)C++;C<s.length&&Ot.push(C++)}St(Ot,function(Vt,$t){var Jt=s[Vt];if(I(Dn(Jt,nt),ct,$t),null==Jt.name&&vt){var Yt=vt[$t];Ln(Yt)||(Yt={name:Yt}),Jt.name=Jt.displayName=Yt.name,Jt.defaultTooltip=Yt.defaultTooltip}_t&&Dn(Jt.otherDims,_t)})}});var z=n.generateCoord,O=n.generateCoordCount,V=null!=O;O=z?O||1:0;for(var Y,tt=z||"value",Q=0;Q<u;Q++)null==(x=s[Q]=s[Q]||new Op).coordDim&&(x.coordDim=rv(tt,a,V),x.coordDimIndex=0,(!z||O<=0)&&(x.isExtraCoord=!0),O--),null==x.name&&(x.name=rv(x.coordDim,o)),null==x.type&&(1===Hm((Y=e).data,Y.sourceFormat,Y.seriesLayoutBy,Y.dimensionsDefine,Y.startIndex,Q)||x.isExtraCoord&&(null!=x.otherDims.itemName||null!=x.otherDims.seriesName))&&(x.type="ordinal");return s}function rv(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}Ri.type="list",Ri.hasItemOption=!0,Ri.getDimension=function(t){return"number"!=typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},Ri.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},Ri.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},Ri.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return!0===e?(i||[]).slice():i&&i[e]},Ri.initData=function(t,e,n){(Uu.isInstance(t)||Lr(t))&&(t=new pt(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=tn[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=tn.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},Ri.getProvider=function(){return this._rawData},Ri.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var i=e.count();e.persistent||(i+=n),this._initDataFromProvider(n,i)},Ri.appendValues=function(t,e){for(var n=this._chunkSize,i=this._storage,o=this.dimensions,a=o.length,s=this._rawExtent,u=this.count(),d=u+Math.max(t.length,e?e.length:0),g=this._chunkCount,p=0;p<a;p++)s[V=o[p]]||(s[V]=[1/0,-1/0]),i[V]||(i[V]=[]),rb(i,this._dimensionInfos[V],n,g,d),this._chunkCount=i[V].length;for(var x=new Array(a),S=u;S<d;S++){for(var C=S-u,I=Math.floor(S/n),z=S%n,O=0;O<a;O++){var V=o[O],Y=this._dimValueGetterArrayRows(t[C]||x,V,C,O);i[V][I][z]=Y;var G=s[V];Y<G[0]&&(G[0]=Y),Y>G[1]&&(G[1]=Y)}e&&(this._nameList[S]=e[C])}this._rawCount=this._count=d,this._extent={},ob(this)},Ri._initDataFromProvider=function(t,e){if(!(e<=t)){for(var n,i=this._chunkSize,o=this._rawData,a=this._storage,s=this.dimensions,u=s.length,d=this._dimensionInfos,g=this._nameList,p=this._idList,x=this._rawExtent,S=this._nameRepeatCount={},C=this._chunkCount,I=0;I<u;I++){x[Q=s[I]]||(x[Q]=[1/0,-1/0]);var z=d[Q];0===z.otherDims.itemName&&(n=this._nameDimIdx=I),0===z.otherDims.itemId&&(this._idDimIdx=I),a[Q]||(a[Q]=[]),rb(a,z,i,C,e),this._chunkCount=a[Q].length}for(var O=new Array(u),V=t;V<e;V++){O=o.getItem(V,O);for(var Y=Math.floor(V/i),G=V%i,tt=0;tt<u;tt++){var Q,nt=a[Q=s[tt]][Y],it=this._dimValueGetter(O,Q,V,tt);nt[G]=it;var ct=x[Q];it<ct[0]&&(ct[0]=it),it>ct[1]&&(ct[1]=it)}if(!o.pure){var vt=g[V];if(O&&null==vt)if(null!=O.name)g[V]=vt=O.name;else if(null!=n){var _t=s[n],At=a[_t][Y];if(At){vt=At[G];var Ot=d[_t].ordinalMeta;Ot&&Ot.categories.length&&(vt=Ot.categories[vt])}}var Bt=null==O?null:O.id;null==Bt&&null!=vt&&(S[vt]=S[vt]||0,0<S[Bt=vt]&&(Bt+="__ec__"+S[vt]),S[vt]++),null!=Bt&&(p[V]=Bt)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=e,this._extent={},ob(this)}},Ri.count=function(){return this._count},Ri.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array){o=new e(n);for(var i=0;i<n;i++)o[i]=t[i]}else o=new e(t.buffer,0,n)}else{var o=new(e=tv(this))(this.count());for(i=0;i<o.length;i++)o[i]=i}return o},Ri.get=function(t,e){if(!(0<=e&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize);return n[t][i][e%this._chunkSize]},Ri.getByRawIndex=function(t,e){if(!(0<=e&&e<this._rawCount))return NaN;var n=this._storage[t];return n?n[Math.floor(e/this._chunkSize)][e%this._chunkSize]:NaN},Ri._getFast=function(t,e){var n=Math.floor(e/this._chunkSize);return this._storage[t][n][e%this._chunkSize]},Ri.getValues=function(t,e){var n=[];Fe(t)||(e=t,t=this.dimensions);for(var i=0,o=t.length;i<o;i++)n.push(this.get(t[i],e));return n},Ri.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},Ri.getDataExtent=function(t){t=this.getDimension(t);var n=[1/0,-1/0];if(!this._storage[t])return n;var i,o=this.count();if(!this._indices)return this._rawExtent[t].slice();if(i=this._extent[t])return i.slice();for(var a=(i=n)[0],s=i[1],u=0;u<o;u++){var d=this._getFast(t,this.getRawIndex(u));d<a&&(a=d),s<d&&(s=d)}return this._extent[t]=[a,s]},Ri.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},Ri.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},Ri.getCalculationInfo=function(t){return this._calculationInfo[t]},Ri.setCalculationInfo=function(t,e){kg(t)?En(this._calculationInfo,t):this._calculationInfo[t]=e},Ri.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,i=this.count();n<i;n++){var o=this.get(t,n);isNaN(o)||(e+=o)}return e},Ri.getMedian=function(t){var e=[];this.each(t,function(o,a){isNaN(o)||e.push(o)});var n=[].concat(e).sort(function(o,a){return o-a}),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},Ri.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},Ri.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},Ri.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(e[a]<t)i=1+a;else{if(!(e[a]>t))return a;o=a-1}}return-1},Ri.indicesOfNearest=function(t,e,n){var i=[];if(!this._storage[t])return i;null==n&&(n=1/0);for(var o=1/0,a=-1,s=0,u=0,d=this.count();u<d;u++){var g=e-this.get(t,u),p=Math.abs(g);p<=n&&((p<o||p===o&&0<=g&&a<0)&&(o=p,a=g,s=0),g===a&&(i[s++]=u))}return i.length=s,i},Ri.getRawIndex=ev,Ri.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++)e.push(this.get(this.dimensions[n],t));return e},Ri.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||rw(this,this._nameDimIdx,e)||""},Ri.getId=function(t){return ab(this,this.getRawIndex(t))},Ri.each=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;for(var o=(t=kt(sb(t),this.getDimension,this)).length,a=0;a<this.count();a++)switch(o){case 0:e.call(n,a);break;case 1:e.call(n,this.get(t[0],a),a);break;case 2:e.call(n,this.get(t[0],a),this.get(t[1],a),a);break;default:for(var s=0,u=[];s<o;s++)u[s]=this.get(t[s],a);u[s]=a,e.apply(n,u)}}},Ri.filterSelf=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this,t=kt(sb(t),this.getDimension,this);for(var o=this.count(),a=new(tv(this))(o),s=[],u=t.length,d=0,g=t[0],p=0;p<o;p++){var x,S=this.getRawIndex(p);if(0===u)x=e.call(n,p);else if(1===u){var C=this._getFast(g,S);x=e.call(n,C,p)}else{for(var I=0;I<u;I++)s[I]=this._getFast(g,S);s[I]=p,x=e.apply(n,s)}x&&(a[d++]=S)}return d<o&&(this._indices=a),this._count=d,this._extent={},this.getRawIndex=this._indices?nv:ev,this}},Ri.selectRange=function(t){if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=e.length;if(i){var o=this.count(),a=new(tv(this))(o),s=0,u=e[0],d=t[u][0],g=t[u][1],p=!1;if(!this._indices){var x=0;if(1===i){for(var S=this._storage[e[0]],C=0;C<this._chunkCount;C++)for(var I=S[C],z=Math.min(this._count-C*this._chunkSize,this._chunkSize),O=0;O<z;O++)(d<=(Q=I[O])&&Q<=g||isNaN(Q))&&(a[s++]=x),x++;p=!0}else if(2===i){S=this._storage[u];var V=this._storage[e[1]],Y=t[e[1]][0],G=t[e[1]][1];for(C=0;C<this._chunkCount;C++){I=S[C];var tt=V[C];for(z=Math.min(this._count-C*this._chunkSize,this._chunkSize),O=0;O<z;O++){var Q=I[O],nt=tt[O];(d<=Q&&Q<=g||isNaN(Q))&&(Y<=nt&&nt<=G||isNaN(nt))&&(a[s++]=x),x++}}p=!0}}if(!p)if(1===i)for(O=0;O<o;O++){var it=this.getRawIndex(O);(d<=(Q=this._getFast(u,it))&&Q<=g||isNaN(Q))&&(a[s++]=it)}else for(O=0;O<o;O++){var ct=!0;for(it=this.getRawIndex(O),C=0;C<i;C++){var vt=e[C];((Q=this._getFast(n,it))<t[vt][0]||Q>t[vt][1])&&(ct=!1)}ct&&(a[s++]=this.getRawIndex(O))}return s<o&&(this._indices=a),this._count=s,this._extent={},this.getRawIndex=this._indices?nv:ev,this}}},Ri.mapArray=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var o=[];return this.each(t,function(){o.push(e&&e.apply(this,arguments))},n=n||i||this),o},Ri.map=function(t,e,n,i){n=n||i||this;var o=iv(this,t=kt(sb(t),this.getDimension,this));o._indices=this._indices,o.getRawIndex=o._indices?nv:ev;for(var a=o._storage,s=[],u=this._chunkSize,d=t.length,g=this.count(),p=[],x=o._rawExtent,S=0;S<g;S++){for(var C=0;C<d;C++)p[C]=this.get(t[C],S);p[d]=S;var I=e&&e.apply(n,p);if(null!=I){"object"!=typeof I&&(s[0]=I,I=s);for(var z=this.getRawIndex(S),O=Math.floor(z/u),V=z%u,Y=0;Y<I.length;Y++){var G=t[Y],tt=I[Y],Q=x[G],nt=a[G];nt&&(nt[O][V]=tt),tt<Q[0]&&(Q[0]=tt),tt>Q[1]&&(Q[1]=tt)}}}return o},Ri.downSample=function(t,e,n,i){for(var o=iv(this,[t]),a=o._storage,s=[],u=Math.floor(1/e),d=a[t],g=this.count(),p=this._chunkSize,x=o._rawExtent[t],S=new(tv(this))(g),C=0,I=0;I<g;I+=u){g-I<u&&(s.length=u=g-I);for(var z=0;z<u;z++){var O=this.getRawIndex(I+z),V=Math.floor(O/p);s[z]=d[V][O%p]}var G=n(s),tt=this.getRawIndex(Math.min(I+i(s,G)||0,g-1)),Q=tt%p;(d[Math.floor(tt/p)][Q]=G)<x[0]&&(x[0]=G),G>x[1]&&(x[1]=G),S[C++]=tt}return o._count=C,o._indices=S,o.getRawIndex=nv,o},Ri.getItemModel=function(t){var e=this.hostModel;return new dr(this.getRawDataItem(t),e,e&&e.ecModel)},Ri.diff=function(t){var e=this;return new $c(t?t.getIndices():[],this.getIndices(),function(n){return ab(t,n)},function(n){return ab(e,n)})},Ri.getVisual=function(t){var e=this._visual;return e&&e[t]},Ri.setVisual=function(t,e){if(kg(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},Ri.setLayout=function(t,e){if(kg(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},Ri.getLayout=function(t){return this._layout[t]},Ri.getItemLayout=function(t){return this._itemLayouts[t]},Ri.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?En(this._itemLayouts[t]||{},e):e},Ri.clearItemLayouts=function(){this._itemLayouts.length=0},Ri.getItemVisual=function(t,e,n){var i=this._itemVisuals[t],o=i&&i[e];return null!=o||n?o:this.getVisual(e)},Ri.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{},o=this.hasItemVisual;if(this._itemVisuals[t]=i,kg(e))for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a],o[a]=!0);else i[e]=n,o[e]=!0},Ri.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},Ri.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(sM,e)),this._graphicEls[t]=e},Ri.getItemGraphicEl=function(t){return this._graphicEls[t]},Ri.eachItemGraphicEl=function(t,e){St(this._graphicEls,function(n,i){n&&t&&t.call(e,n,i)})},Ri.cloneShallow=function(t){if(!t){var e=kt(this.dimensions,this.getDimensionInfo,this);t=new qa(e,this.hostModel)}return t._storage=this._storage,iy(t,this),t._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,t.getRawIndex=t._indices?nv:ev,t},Ri.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return e.apply(this,[i].concat(mo(arguments)))})},Ri.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],Ri.CHANGABLE_METHODS=["filterSelf","selectRange"];var Ku=function(t,e){return aw((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};function lb(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=pe(),this.categoryAxisMap=pe(),this.firstCategoryDimIndex=null}var sw={cartesian2d:function(t,e,n,i){var o=t.getReferringComponents("xAxis")[0],a=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",o),n.set("y",a),Wh(o)&&(i.set("x",o),e.firstCategoryDimIndex=0),Wh(a)&&(i.set("y",a),e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,i){var o=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",o),Wh(o)&&(i.set("single",o),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var o=t.getReferringComponents("polar")[0],a=o.findAxisModel("radiusAxis"),s=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",s),Wh(a)&&(i.set("radius",a),e.firstCategoryDimIndex=0),Wh(s)&&(i.set("angle",s),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var o=t.ecModel,a=o.getComponent("parallel",t.get("parallelIndex")),s=e.coordSysDims=a.dimensions.slice();St(a.parallelAxisIndex,function(u,d){var g=o.getComponent("parallelAxis",u),p=s[d];n.set(p,g),Wh(g)&&null==e.firstCategoryDimIndex&&(i.set(p,g),e.firstCategoryDimIndex=d)})}};function Wh(t){return"category"===t.get("type")}function Af(t,e,n){var i,o,a,s,u=(n=n||{}).byIndex,d=n.stackedCoordDimension,g=!(!t||!t.get("stack"));if(St(e,function(C,I){bi(C)&&(e[I]=C={name:C}),g&&!C.isExtraCoord&&(u||i||!C.ordinalMeta||(i=C),o||"ordinal"===C.type||"time"===C.type||d&&d!==C.coordDim||(o=C))}),!o||u||i||(u=!0),o){a="__\0ecstackresult",s="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var p=o.coordDim,x=o.type,S=0;St(e,function(C){C.coordDim===p&&S++}),e.push({name:a,coordDim:p,coordDimIndex:S,type:x,isExtraCoord:!0,isCalculationCoord:!0}),S++,e.push({name:s,coordDim:s,coordDimIndex:S,type:x,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:i&&i.name,isStackedByIndex:u,stackedOverDimension:s,stackResultDimension:a}}function hh(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function kf(t,e){return hh(t,e)?t.getCalculationInfo("stackResultDimension"):e}function fh(t,e,n){n=n||{},Uu.isInstance(t)||(t=Uu.seriesDataToSource(t));var i,o=e.get("coordinateSystem"),a=Ca.get(o),s=function(C){var I=C.get("coordinateSystem"),z=new lb(I),O=sw[I];if(O)return O(C,z,z.axisMap,z.categoryAxisMap),z}(e);s&&(i=kt(s.coordSysDims,function(C){var I={name:C},z=s.axisMap.get(C);if(z){var O=z.get("type");I.type=Qm(O)}return I})),i=i||a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"];var u,d,g=Ku(t,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?kn(A0,i,e):null});s&&St(g,function(C,I){var O=s.categoryAxisMap.get(C.coordDim);O&&(null==u&&(u=I),C.ordinalMeta=O.getOrdinalMeta()),null!=C.otherDims.itemName&&(d=!0)}),d||null==u||(g[u].otherDims.itemName=0);var p=Af(e,g),x=new qa(g,e);x.setCalculationInfo(p);var S=null!=u&&function(C){if(C.sourceFormat===rh){var I=function(z){for(var O=0;O<z.length&&null==z[O];)O++;return z[O]}(C.data||[]);return null!=I&&!Fe(An(I))}}(t)?function(C,I,z,O){return O===u?z:this.defaultDimValueGetter(C,I,z,O)}:null;return x.hasItemOption=!1,x.initData(t,null,S),x}function Ya(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function ov(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication}Ya.prototype.parse=function(t){return t},Ya.prototype.getSetting=function(t){return this._setting[t]},Ya.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},Ya.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},Ya.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},Ya.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},Ya.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},Ya.prototype.getExtent=function(){return this._extent.slice()},Ya.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},Ya.prototype.isBlank=function(){return this._isBlank},Ya.prototype.setBlank=function(t){this._isBlank=t},Ya.prototype.getLabel=null,Vs(Ya),Hr(Ya,{registerWhenExtend:!0}),ov.createByAxisModel=function(t){var e=t.option,n=e.data,i=n&&kt(n,oy);return new ov({categories:i,needCollect:!i,deduplication:!1!==e.dedplication})};var lw=ov.prototype;function ub(t){return t._map||(t._map=pe(t.categories))}function oy(t){return Ln(t)&&null!=t.value?t.value:t+""}lw.getOrdinal=function(t){return ub(this).get(t)},lw.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return this.categories[e=this.categories.length]=t,e;var i=ub(this);return null==(e=i.get(t))&&(n?(this.categories[e=this.categories.length]=t,i.set(t,e)):e=NaN),e};var ay=Ya.prototype,sy=Ya.extend({type:"ordinal",init:function(t,e){t&&!Fe(t)||(t=new ov({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),ay.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return ay.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(ay.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:_e,niceExtent:_e});sy.create=function(){return new sy};var cb=ga;function ly(t){return xf(t)+2}function db(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function uw(t,e){isFinite(t[0])||(t[0]=e[0]),isFinite(t[1])||(t[1]=e[1]),db(t,0,e),db(t,1,e),t[0]>t[1]&&(t[0]=t[1])}var If=ga,Dd=Ya.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),Dd.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=ly(t)},getTicks:function(t){var e=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,a=[];if(!e)return a;n[0]<i[0]&&a.push(t?If(i[0]-e,o):n[0]);for(var s=i[0];s<=i[1]&&(a.push(s),(s=If(s+e,o))!==a[a.length-1]);)if(1e4<a.length)return[];var u=a.length?a[a.length-1]:i[1];return n[1]>u&&a.push(t?If(u+e,o):n[1]),a},getMinorTicks:function(t){for(var e=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<e.length;o++){for(var s=e[o-1],u=0,d=[],g=(e[o]-s)/t;u<t-1;){var p=ga(s+(u+1)*g);p>i[0]&&p<i[1]&&d.push(p),u++}n.push(d)}return n},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=xf(t)||0:"auto"===n&&(n=this._intervalPrecision),Uc(t=If(t,n,!0))},niceTicks:function(t,e,n){t=t||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var a=function(s,u,d,g){var p={},S=p.interval=hg((s[1]-s[0])/u,!0);null!=d&&S<d&&(S=p.interval=d),null!=g&&g<S&&(S=p.interval=g);var C=p.intervalPrecision=ly(S);return uw(p.niceTickExtent=[cb(Math.ceil(s[0]/S)*S,C),cb(Math.floor(s[1]/S)*S,C)],s),p}(i,t,e,n);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;isFinite(e[1]-e[0])||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(e[0]=If(Math.floor(e[0]/o)*o)),t.fixMax||(e[1]=If(Math.ceil(e[1]/o)*o))}});Dd.create=function(){return new Dd};var av="__ec_stack_",uy="undefined"!=typeof Float32Array?Float32Array:Array;function zp(t){return t.get("stack")||av+t.seriesIndex}function cy(t){return t.dim+t.index}function hb(t,e){var n=[];return e.eachSeriesByType(t,function(i){gw(i)&&!pw(i)&&n.push(i)}),n}function fb(t){var e=function(i){var o={};St(i,function(x){var S=x.coordinateSystem.getBaseAxis();if("time"===S.type||"value"===S.type)for(var C=x.getData(),I=S.dim+"_"+S.index,z=C.mapDimension(S.dim),O=0,V=C.count();O<V;++O){var Y=C.get(z,O);o[I]?o[I].push(Y):o[I]=[Y]}});var a=[];for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];if(u){u.sort(function(x,S){return x-S});for(var d=null,g=1;g<u.length;++g){var p=u[g]-u[g-1];0<p&&(d=null===d?p:Math.min(d,p))}a[s]=d}}return a}(t),n=[];return St(t,function(i){var o,a=i.coordinateSystem.getBaseAxis(),s=a.getExtent();if("category"===a.type)o=a.getBandWidth();else if("value"===a.type||"time"===a.type){var d=e[a.dim+"_"+a.index],g=Math.abs(s[1]-s[0]),p=a.scale.getExtent(),x=Math.abs(p[1]-p[0]);o=d?g/x*d:g}else{var S=i.getData();o=Math.abs(s[1]-s[0])/S.count()}var C=ln(i.get("barWidth"),o),I=ln(i.get("barMaxWidth"),o),z=ln(i.get("barMinWidth")||1,o),O=i.get("barGap"),V=i.get("barCategoryGap");n.push({bandWidth:o,barWidth:C,barMaxWidth:I,barMinWidth:z,barGap:O,barCategoryGap:V,axisKey:cy(a),stackId:zp(i)})}),cw(n)}function cw(t){var e={};St(t,function(i,o){var a=i.axisKey,s=i.bandWidth,u=e[a]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=u.stacks;e[a]=u;var g=i.stackId;d[g]||u.autoWidthCount++,d[g]=d[g]||{width:0,maxWidth:0};var p=i.barWidth;p&&!d[g].width&&(d[g].width=p,p=Math.min(u.remainedWidth,p),u.remainedWidth-=p);var x=i.barMaxWidth;x&&(d[g].maxWidth=x);var S=i.barMinWidth;S&&(d[g].minWidth=S);var C=i.barGap;null!=C&&(u.gap=C);var I=i.barCategoryGap;null!=I&&(u.categoryGap=I)});var n={};return St(e,function(i,o){n[o]={};var a=i.stacks,s=i.bandWidth,u=ln(i.categoryGap,s),d=ln(i.gap,1),g=i.remainedWidth,p=i.autoWidthCount,x=(g-u)/(p+(p-1)*d);x=Math.max(x,0),St(a,function(z){var O=z.maxWidth,V=z.minWidth;if(z.width)Y=z.width,O&&(Y=Math.min(Y,O)),V&&(Y=Math.max(Y,V)),z.width=Y,g-=Y+d*Y,p--;else{var Y=x;O&&O<Y&&(Y=Math.min(O,g)),V&&Y<V&&(Y=V),Y!==x&&(z.width=Y,g-=Y+d*Y,p--)}}),x=(g-u)/(p+(p-1)*d),x=Math.max(x,0);var S,C=0;St(a,function(z,O){z.width||(z.width=x),C+=(S=z).width*(1+d)}),S&&(C-=S.width*d);var I=-C/2;St(a,function(z,O){n[o][O]=n[o][O]||{bandWidth:s,offset:I,width:z.width},I+=z.width*(1+d)})}),n}function dw(t,e,n){if(t&&e){var i=t[cy(e)];return null!=i&&null!=n&&(i=i[zp(n)]),i}}function hw(t,e){var n=hb(t,e),i=fb(n),o={};St(n,function(a){var s=a.getData(),u=a.coordinateSystem,d=u.getBaseAxis(),g=zp(a),p=i[cy(d)][g],x=p.offset,S=p.width,C=u.getOtherAxis(d),I=a.get("barMinHeight")||0;o[g]=o[g]||[],s.setLayout({bandWidth:p.bandWidth,offset:x,size:S});for(var z=s.mapDimension(C.dim),O=s.mapDimension(d.dim),V=hh(s,z),Y=C.isHorizontal(),G=gb(0,C),tt=0,Q=s.count();tt<Q;tt++){var nt,it,ct,vt,_t,At=s.get(z,tt),Ot=s.get(O,tt),Bt=0<=At?"p":"n",Vt=G;V&&(o[g][Ot]||(o[g][Ot]={p:G,n:G}),Vt=o[g][Ot][Bt]),Y?(nt=Vt,it=(_t=u.dataToPoint([At,Ot]))[1]+x,ct=_t[0]-G,vt=S,Math.abs(ct)<I&&(ct=(ct<0?-1:1)*I),isNaN(ct)||V&&(o[g][Ot][Bt]+=ct)):(nt=(_t=u.dataToPoint([Ot,At]))[0]+x,it=Vt,ct=S,vt=_t[1]-G,Math.abs(vt)<I&&(vt=(vt<=0?-1:1)*I),isNaN(vt)||V&&(o[g][Ot][Bt]+=vt)),s.setItemLayout(tt,{x:nt,y:it,width:ct,height:vt})}},this)}var fw={seriesType:"bar",plan:Ap(),reset:function(t){if(gw(t)&&pw(t)){var e=t.getData(),n=t.coordinateSystem,i=n.grid.getRect(),o=n.getBaseAxis(),a=n.getOtherAxis(o),s=e.mapDimension(a.dim),u=e.mapDimension(o.dim),d=a.isHorizontal(),g=d?0:1,p=dw(fb([t]),o,t).width;return.5<p||(p=.5),{progress:function(x,S){for(var C,I=x.count,z=new uy(2*I),O=new uy(2*I),V=new uy(I),Y=[],G=[],tt=0,Q=0;null!=(C=x.next());)G[g]=S.get(s,C),G[1-g]=S.get(u,C),Y=n.dataToPoint(G,null,Y),O[tt]=d?i.x+i.width:Y[0],z[tt++]=Y[0],O[tt]=d?Y[1]:i.y+i.height,z[tt++]=Y[1],V[Q++]=C;S.setLayout({largePoints:z,largeDataIndices:V,largeBackgroundPoints:O,barWidth:p,valueAxisStart:gb(0,a),backgroundStart:d?i.x:i.y,valueAxisHorizontal:d})}}}}};function gw(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function pw(t){return t.pipelineContext&&t.pipelineContext.large}function gb(t,e){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}var lM=Dd.prototype,dy=Math.ceil,mw=Math.floor,Xa=864e5,pb=Dd.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return _p(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=Xa,e[1]+=Xa),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-Xa}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=ga(mw(e[0]/i)*i)),t.fixMax||(e[1]=ga(dy(e[1]/i)*i))},niceTicks:function(t,e,n){var i=this._extent,o=i[1]-i[0],a=o/(t=t||10);null!=e&&a<e&&(a=e),null!=n&&n<a&&(a=n);var s=hy.length,u=function(S,C,I,z){for(;I<z;){var O=I+z>>>1;S[O][1]<C?I=1+O:z=O}return I}(hy,a,0,s),d=hy[Math.min(u,s-1)],g=d[1];"year"===d[0]&&(g*=hg(o/g/t,!0));var p=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,x=[Math.round(dy((i[0]-p)/g)*g+p),Math.round(mw((i[1]-p)/g)*g+p)];uw(x,i),this._stepLvl=d,this._interval=g,this._niceExtent=x},parse:function(t){return+nh(t)}});St(["contain","normalize"],function(t){pb.prototype[t]=function(e){return lM[t].call(this,this.parse(e))}});var hy=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",Xa],["MM-dd\nyyyy",2*Xa],["MM-dd\nyyyy",3*Xa],["MM-dd\nyyyy",4*Xa],["MM-dd\nyyyy",5*Xa],["MM-dd\nyyyy",6*Xa],["week",7*Xa],["MM-dd\nyyyy",864e6],["week",14*Xa],["week",21*Xa],["month",31*Xa],["week",42*Xa],["month",62*Xa],["week",70*Xa],["quarter",95*Xa],["month",31*Xa*4],["month",13392e6],["half-year",16416e6],["month",31*Xa*8],["month",26784e6],["year",380*Xa]];pb.create=function(t){return new pb({useUTC:t.ecModel.get("useUTC")})};var fy=Ya.prototype,Fp=Dd.prototype,vw=xf,uM=ga,cM=Math.floor,dM=Math.ceil,gy=Math.pow,gh=Math.log,py=Ya.extend({type:"log",base:10,$constructor:function(){Ya.apply(this,arguments),this._originalScale=new Dd},getTicks:function(t){var e=this._originalScale,n=this._extent,i=e.getExtent();return kt(Fp.getTicks.call(this,t),function(o){var a=ga(gy(this.base,o));return a=o===n[0]&&e.__fixMin?lv(a,i[0]):a,o===n[1]&&e.__fixMax?lv(a,i[1]):a},this)},getMinorTicks:Fp.getMinorTicks,getLabel:Fp.getLabel,scale:function(t){return t=fy.scale.call(this,t),gy(this.base,t)},setExtent:function(t,e){var n=this.base;t=gh(t)/gh(n),e=gh(e)/gh(n),Fp.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=fy.getExtent.call(this);e[0]=gy(t,e[0]),e[1]=gy(t,e[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(e[0]=lv(e[0],i[0])),n.__fixMax&&(e[1]=lv(e[1],i[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=gh(t[0])/gh(e),t[1]=gh(t[1])/gh(e),fy.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n==1/0||n<=0)){var i=km(n);for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var o=[ga(dM(e[0]/i)*i),ga(cM(e[1]/i)*i)];this._interval=i,this._niceExtent=o}},niceExtent:function(t){Fp.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function lv(t,e){return uM(t,vw(e))}function uv(t,e){var n,i,o,a=t.type,s=e.getMin(),u=e.getMax(),d=t.getExtent();"ordinal"===a?n=e.getCategories().length:(Fe(i=e.get("boundaryGap"))||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=ln(i[0],1),i[1]=ln(i[1],1),o=d[1]-d[0]||Math.abs(d[0])),"dataMin"===s?s=d[0]:"function"==typeof s&&(s=s({min:d[0],max:d[1]})),"dataMax"===u?u=d[1]:"function"==typeof u&&(u=u({min:d[0],max:d[1]}));var g=null!=s,p=null!=u;null==s&&(s="ordinal"===a?n?0:NaN:d[0]-i[0]*o),null==u&&(u="ordinal"===a?n?n-1:NaN:d[1]+i[1]*o),null!=s&&isFinite(s)||(s=NaN),null!=u&&isFinite(u)||(u=NaN),t.setBlank(br(s)||br(u)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(0<s&&0<u&&!g&&(s=0),s<0&&u<0&&!p&&(u=0));var x=e.ecModel;if(x&&"time"===a){var S,C=hb("bar",x);if(St(C,function(O){S|=O.getBaseAxis()===e.axis}),S){var I=fb(C),z=function(O,V,Y,G){var tt=Y.axis.getExtent(),Q=tt[1]-tt[0],nt=dw(G,Y.axis);if(void 0===nt)return{min:O,max:V};var it=1/0;St(nt,function(Ot){it=Math.min(Ot.offset,it)});var ct=-1/0;St(nt,function(Ot){ct=Math.max(Ot.offset+Ot.width,ct)}),it=Math.abs(it),ct=Math.abs(ct);var vt=it+ct,_t=V-O,At=_t/(1-(it+ct)/Q)-_t;return{min:O-=it/vt*At,max:V+=ct/vt*At}}(s,u,e,I);s=z.min,u=z.max}}return{extent:[s,u],fixMin:g,fixMax:p}}function Pf(t,e){var n=uv(t,e),i=n.extent,o=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var a=t.type;t.setExtent(i[0],i[1]),t.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===a||"time"===a?e.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)}function Ig(t,e){if(e=e||t.get("type"))switch(e){case"category":return new sy(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new Dd;default:return(Ya.getClass(e)||Dd).create(t)}}function Hp(t){var e,n=t.getLabelModel().get("formatter"),i="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof n?(e=n,n=function(o){return o=t.scale.getLabel(o),e.replace("{value}",null!=o?o:"")}):"function"==typeof n?function(o,a){return null!=i&&(a=o-i),n(mb(t,o),a)}:function(o){return t.scale.getLabel(o)}}function mb(t,e){return"category"===t.type?t.scale.getLabel(e):e}function vb(t){var e=t.get("interval");return null==e?"auto":e}function cv(t){return"category"===t.type&&0===vb(t.getLabelModel())}St(["contain","normalize"],function(t){py.prototype[t]=function(e){return e=gh(e)/gh(this.base),fy[t].call(this,e)}}),py.create=function(){return new py};var Pg={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!br(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!br(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:_e,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},hM=ia({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=e.width/2,a=e.height/2;t.moveTo(n,i-a),t.lineTo(n+o,i+a),t.lineTo(n-o,i+a),t.closePath()}}),fM=ia({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=e.width/2,a=e.height/2;t.moveTo(n,i-a),t.lineTo(n+o,i),t.lineTo(n,i+a),t.lineTo(n-o,i),t.closePath()}}),yw=ia({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,o=e.width/5*3,a=Math.max(o,e.height),s=o/2,u=s*s/(a-s),d=i-a+s+u,g=Math.asin(u/s),p=Math.cos(g)*s,x=Math.sin(g),S=Math.cos(g),C=.6*s,I=.7*s;t.moveTo(n-p,d+u),t.arc(n,d,s,Math.PI-g,2*Math.PI+g),t.bezierCurveTo(n+p-x*C,d+u+S*C,n,i-I,n,i),t.bezierCurveTo(n,i-I,n-p+x*C,d+u+S*C,n-p,d+u),t.closePath()}}),gM=ia({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,o=e.x,a=e.y,s=e.width/3*2;t.moveTo(o,a),t.lineTo(o+s,a+n),t.lineTo(o,a+n/4*3),t.lineTo(o-s,a+n),t.lineTo(o,a),t.closePath()}}),my={line:function(t,e,n,i,o){o.x1=t,o.y1=e+i/2,o.x2=t+n,o.y2=e+i/2},rect:function(t,e,n,i,o){o.x=t,o.y=e,o.width=n,o.height=i},roundRect:function(t,e,n,i,o){o.x=t,o.y=e,o.width=n,o.height=i,o.r=Math.min(n,i)/4},square:function(t,e,n,i,o){var a=Math.min(n,i);o.x=t,o.y=e,o.width=a,o.height=a},circle:function(t,e,n,i,o){o.cx=t+n/2,o.cy=e+i/2,o.r=Math.min(n,i)/2},diamond:function(t,e,n,i,o){o.cx=t+n/2,o.cy=e+i/2,o.width=n,o.height=i},pin:function(t,e,n,i,o){o.x=t+n/2,o.y=e+i/2,o.width=n,o.height=i},arrow:function(t,e,n,i,o){o.x=t+n/2,o.y=e+i/2,o.width=n,o.height=i},triangle:function(t,e,n,i,o){o.cx=t+n/2,o.cy=e+i/2,o.width=n,o.height=i}},jh={};St({line:go,rect:Ji,roundRect:Ji,square:Ji,circle:un,diamond:fM,pin:yw,arrow:gM,triangle:hM},function(t,e){jh[e]=new t});var dv=ia({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=ud(t,e,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===e.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var o=jh[i];o=o||jh[i="rect"],my[i](e.x,e.y,e.width,e.height,o.shape),o.buildPath(t,o.shape,n)}}});function vy(t,e){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function Mc(t,e,n,i,o,a,s){var u,d=0===t.indexOf("empty");return d&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(u=0===t.indexOf("image://")?lg(t.slice(8),new Yi(e,n,i,o),s?"center":"cover"):0===t.indexOf("path://")?uf(t.slice(7),{},new Yi(e,n,i,o),s?"center":"cover"):new dv({shape:{symbolType:t,x:e,y:n,width:i,height:o}})).__isEmptyBrush=d,u.setColor=vy,u.setColor(a),u}var mM=(Object.freeze||Object)({createList:function(t){return fh(t.getSource(),t)},getLayoutRect:xi,dataStack:{isDimensionStacked:hh,enableDataStack:Af,getStackedDimension:kf},createScale:function(t,e){var n=e;dr.isInstance(e)||Fn(n=new dr(e),Pg);var i=Ig(n);return i.setExtent(t[0],t[1]),Pf(i,n),i},mixinAxisModelCommonMethods:function(t){Fn(t,Pg)},completeDimensions:aw,createDimensions:Ku,createSymbol:Mc});function xw(t,e){return Math.abs(t-e)<1e-8}function Eg(t,e,n){var i=0,o=t[0];if(!o)return!1;for(var a=1;a<t.length;a++){var s=t[a];i+=zu(o[0],o[1],s[0],s[1],e,n),o=s}var u=t[0];return xw(o[0],u[0])&&xw(o[1],u[1])||(i+=zu(o[0],o[1],u[0],u[1],e,n)),0!==i}function hv(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function yy(t,e,n){for(var i=[],o=e[0],a=e[1],s=0;s<t.length;s+=2){var u=t.charCodeAt(s)-64,d=t.charCodeAt(s+1)-64;u=u>>1^-(1&u),d=d>>1^-(1&d),o=u+=o,a=d+=a,i.push([u/n,d/n])}return i}function yb(t,e){return function(n){if(n.UTF8Encoding){var i=n.UTF8Scale;null==i&&(i=1024);for(var o=n.features,a=0;a<o.length;a++)for(var s=o[a].geometry,u=s.coordinates,d=s.encodeOffsets,g=0;g<u.length;g++){var p=u[g];if("Polygon"===s.type)u[g]=yy(p,d[g],i);else if("MultiPolygon"===s.type)for(var x=0;x<p.length;x++)p[x]=yy(p[x],d[g][x],i)}n.UTF8Encoding=!1}}(t),kt(Mn(t.features,function(n){return n.geometry&&n.properties&&0<n.geometry.coordinates.length}),function(n){var i=n.properties,o=n.geometry,a=o.coordinates,s=[];"Polygon"===o.type&&s.push({type:"polygon",exterior:a[0],interiors:a.slice(1)}),"MultiPolygon"===o.type&&St(a,function(d){d[0]&&s.push({type:"polygon",exterior:d[0],interiors:d.slice(1)})});var u=new hv(i[e||"name"],s,i.cp);return u.properties=i,u})}hv.prototype={constructor:hv,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],o=[],a=[],s=this.geometries,u=0;u<s.length;u++)"polygon"===s[u].type&&(lu(s[u].exterior,o,a),$i(n,n,o),_r(i,i,a));return 0===u&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new Yi(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,o=n.length;i<o;i++)if("polygon"===n[i].type){var s=n[i].interiors;if(Eg(n[i].exterior,t[0],t[1])){for(var u=0;u<(s?s.length:0);u++)if(Eg(s[u]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),a=o.width/o.height;n?i=i||n/a:n=a*i;for(var s=new Yi(t,e,n,i),u=o.calculateTransform(s),d=this.geometries,g=0;g<d.length;g++)if("polygon"===d[g].type){for(var p=d[g].exterior,x=d[g].interiors,S=0;S<p.length;S++)Wi(p[S],p[S],u);for(var C=0;C<(x?x.length:0);C++)for(S=0;S<x[C].length;S++)Wi(x[C][S],x[C][S],u)}(o=this._rect).copy(s),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new hv(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var Vp=or();function fv(t,e){var n,s,u,i=xb(t,"labels"),o=vb(e);return bb(i,o)||_b(i,o,{labels:Ui(o)?bw(t,o):wb(t,n="auto"===o?(s=t,u=Vp(s).autoInterval,null!=u?u:Vp(s).autoInterval=s.calculateCategoryInterval()):o),labelCategoryInterval:n})}function xb(t,e){return Vp(t)[e]||(Vp(t)[e]=[])}function bb(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function _b(t,e,n){return t.push({key:e,value:n}),n}function wb(t,e,n){var i=Hp(t),o=t.scale,a=o.getExtent(),s=t.getLabelModel(),u=[],d=Math.max((e||0)+1,1),g=a[0],p=o.count();0!==g&&1<d&&2<p/d&&(g=Math.round(Math.ceil(g/d)*d));var x=cv(t),S=s.get("showMinLabel")||x,C=s.get("showMaxLabel")||x;S&&g!==a[0]&&z(a[0]);for(var I=g;I<=a[1];I+=d)z(I);function z(O){u.push(n?O:{formattedLabel:i(O),rawLabel:o.getLabel(O),tickValue:O})}return C&&I-d!==a[1]&&z(a[1]),u}function bw(t,e,n){var i=t.scale,o=Hp(t),a=[];return St(i.getTicks(),function(s){var u=i.getLabel(s);e(s,u)&&a.push(n?s:{formattedLabel:o(s),rawLabel:u,tickValue:s})}),a}var _w=[0,1],$a=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function ww(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}$a.prototype={constructor:$a,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return n<=t&&t<=i},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return cg(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&ww(n=n.slice(),i.count()),no(t,_w,n,e)},coordToData:function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&ww(n=n.slice(),i.count());var o=no(t,n,_w,e);return this.scale.scale(o)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=kt(function xy(t,e){return"category"===t.type?function(n,i){var o,a,s=xb(n,"ticks"),u=vb(i),d=bb(s,u);if(d)return d;if(i.get("show")&&!n.scale.isBlank()||(o=[]),Ui(u))o=bw(n,u,!0);else if("auto"===u){var g=fv(n,n.getLabelModel());a=g.labelCategoryInterval,o=kt(g.labels,function(p){return p.tickValue})}else o=wb(n,a=u,!0);return _b(s,u,{ticks:o,tickCategoryInterval:a})}(t,e):{ticks:t.scale.getTicks()}}(this,e).ticks,function(i){return{coord:this.dataToCoord(i),tickValue:i}},this);return function(i,o,a,s){var u=o.length;if(i.onBand&&!a&&u){var d,p=i.getExtent();if(1===u)o[0].coord=p[0],d=o[1]={coord:p[0]};else{var S=(o[u-1].coord-o[0].coord)/(o[u-1].tickValue-o[0].tickValue);St(o,function(O){O.coord-=S/2});var C=i.scale.getExtent();o.push(d={coord:o[u-1].coord+S*(1+C[1]-o[u-1].tickValue)})}var I=p[0]>p[1];z(o[0].coord,p[0])&&(s?o[0].coord=p[0]:o.shift()),s&&z(p[0],o[0].coord)&&o.unshift({coord:p[0]}),z(p[1],d.coord)&&(s?d.coord=p[1]:o.pop()),s&&z(d.coord,p[1])&&o.push({coord:p[1]})}function z(O,V){return O=ga(O),V=ga(V),I?V<O:O<V}}(this,n,e.get("alignWithLabel"),t.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return 0<t&&t<100||(t=5),kt(this.scale.getMinorTicks(t),function(e){return kt(e,function(n){return{coord:this.dataToCoord(n),tickValue:n}},this)},this)},getViewLabels:function(){return function yM(t){return"category"===t.type?function(e){var n=e.getLabelModel(),i=fv(e,n);return!n.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}(t):function(e){var n=e.scale.getTicks(),i=Hp(e);return{labels:kt(n,function(o,a){return{formattedLabel:i(o,a),rawLabel:e.scale.getLabel(o),tickValue:o}})}}(t)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(t){var ct,vt,e=(vt=(ct=t).getLabelModel(),{axisRotate:ct.getRotate?ct.getRotate():ct.isHorizontal&&!ct.isHorizontal()?90:0,labelRotate:vt.get("rotate")||0,font:vt.getFont()}),n=Hp(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,o=t.scale,a=o.getExtent(),s=o.count();if(a[1]-a[0]<1)return 0;var u=1;40<s&&(u=Math.max(1,Math.floor(s/40)));for(var d=a[0],g=t.dataToCoord(d+1)-t.dataToCoord(d),p=Math.abs(g*Math.cos(i)),x=Math.abs(g*Math.sin(i)),S=0,C=0;d<=a[1];d+=u){var z,O=al(n(d),e.font,"center","top");z=1.3*O.height,S=Math.max(S,1.3*O.width,7),C=Math.max(C,z,7)}var V=S/p,Y=C/x;isNaN(V)&&(V=1/0),isNaN(Y)&&(Y=1/0);var G=Math.max(0,Math.floor(Math.min(V,Y))),tt=Vp(t.model),Q=t.getExtent(),nt=tt.lastAutoInterval,it=tt.lastTickCount;return null!=nt&&null!=it&&Math.abs(nt-G)<=1&&Math.abs(it-s)<=1&&G<nt&&tt.axisExtend0===Q[0]&&tt.axisExtend1===Q[1]?G=nt:(tt.lastTickCount=s,tt.lastAutoInterval=G,tt.axisExtend0=Q[0],tt.axisExtend1=Q[1]),G}(this)}};var by=yb,Sb={};St(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){Sb[t]=Qe[t]});var Sw={};function _y(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return vi(t,e,n[0]);if(i){for(var o=[],a=0;a<n.length;a++){var s=vi(t,e,n[a]);o.push(s)}return o.join(" ")}}function Ju(t,e,n){_n.call(this),this.updateData(t,e,n)}St(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){Sw[t]=yl[t]}),ra.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return fh(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var Ad=Ju.prototype,Cb=Ju.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function gv(t){return[t[0]/2,t[1]/2]}function xM(t,e){this.parent.drift(t,e)}Ad._createSymbol=function(t,e,n,i,o){this.removeAll();var a=Mc(t,-1,-1,2,2,e.getItemVisual(n,"color"),o);a.attr({z2:100,culling:!0,scale:gv(i)}),a.drift=xM,this._symbolType=t,this.add(a)},Ad.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},Ad.getSymbolPath=function(){return this.childAt(0)},Ad.getScale=function(){return this.childAt(0).scale},Ad.highlight=function(){this.childAt(0).trigger("emphasis")},Ad.downplay=function(){this.childAt(0).trigger("normal")},Ad.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},Ad.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},Ad.updateData=function(t,e,n){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",o=t.hostModel,a=Cb(t,e),s=i!==this._symbolType;if(s){var u=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,a,u)}else(d=this.childAt(0)).silent=!1,Xi(d,{scale:gv(a)},o,e);if(this._updateCommon(t,e,a,n),s){var d=this.childAt(0),g=n&&n.fadeIn,p={scale:d.scale.slice()};g&&(p.style={opacity:d.style.opacity}),d.scale=[0,0],g&&(d.style.opacity=0),qs(d,p,o,e)}this._seriesModel=o};var Cw=["itemStyle"],Mw=["emphasis","itemStyle"],Tw=["label"],bM=["emphasis","label"];function _M(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var n=this.__symbolOriginalScale,i=n[1]/n[0],o={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(o,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Ng(t){this.group=new _n,this._symbolCtor=t||Ju}Ad._updateCommon=function(t,e,n,i){var o=this.childAt(0),a=t.hostModel,s=t.getItemVisual(e,"color");"image"!==o.type?o.useStyle({strokeNoScale:!0}):o.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var u=i&&i.itemStyle,d=i&&i.hoverItemStyle,g=i&&i.symbolOffset,p=i&&i.labelModel,x=i&&i.hoverLabelModel,S=i&&i.hoverAnimation,C=i&&i.cursorStyle;if(!i||t.hasItemOption){var I=i&&i.itemModel?i.itemModel:t.getItemModel(e);u=I.getModel(Cw).getItemStyle(["color"]),d=I.getModel(Mw).getItemStyle(),g=I.getShallow("symbolOffset"),p=I.getModel(Tw),x=I.getModel(bM),S=I.getShallow("hoverAnimation"),C=I.getShallow("cursor")}else d=En({},d);var z=o.style,O=t.getItemVisual(e,"symbolRotate");o.attr("rotation",(O||0)*Math.PI/180||0),g&&o.attr("position",[ln(g[0],n[0]),ln(g[1],n[1])]),C&&o.attr("cursor",C),o.setColor(s,i&&i.symbolInnerColor),o.setStyle(u);var V=t.getItemVisual(e,"opacity");null!=V&&(z.opacity=V);var Y=t.getItemVisual(e,"liftZ"),G=o.__z2Origin;null!=Y?null==G&&(o.__z2Origin=o.z2,o.z2+=Y):null!=G&&(o.z2=G,o.__z2Origin=null);var tt=i&&i.useNameLabel;Fl(z,d,p,x,{labelFetcher:a,labelDataIndex:e,defaultText:function(Q,nt){return tt?t.getName(Q):_y(t,Q)},isRectText:!0,autoColor:s}),o.__symbolOriginalScale=gv(n),o.hoverStyle=d,o.highDownOnUpdate=S&&a.isAnimationEnabled()?_M:null,Er(o)},Ad.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,e&&e.keepLabel||(n.style.text=null),Xi(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},ki(Ju,_n);var Ef=Ng.prototype;function Mb(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Tb(t){return null==t||Ln(t)||(t={isIgnore:t}),t||{}}function wy(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function Db(t,e,n){var i,z,O,V,o=t.getBaseAxis(),a=t.getOtherAxis(o),s=(z=n,O=0,V=a.scale.getExtent(),"start"===z?O=V[0]:"end"===z?O=V[1]:0<V[0]?O=V[0]:V[1]<0&&(O=V[1]),O),u=o.dim,d=a.dim,g=e.mapDimension(d),p=e.mapDimension(u),x="x"===d||"radius"===d?1:0,S=kt(t.dimensions,function(I){return e.mapDimension(I)}),C=e.getCalculationInfo("stackResultDimension");return(i|=hh(e,S[0]))&&(S[0]=C),(i|=hh(e,S[1]))&&(S[1]=C),{dataDimsForPoint:S,valueStart:s,valueAxisDim:d,baseAxisDim:u,stacked:!!i,valueDim:g,baseDim:p,baseDataOffset:x,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Rg(t,e,n,i){var o=NaN;t.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(o)&&(o=t.valueStart);var a=t.baseDataOffset,s=[];return s[a]=n.get(t.baseDim,i),s[1-a]=o,e.dataToPoint(s)}Ef.updateData=function(t,e){e=Tb(e);var n=this.group,i=t.hostModel,o=this._data,a=this._symbolCtor,s=wy(t);o||n.removeAll(),t.diff(o).add(function(u){var d=t.getItemLayout(u);if(Mb(t,d,u,e)){var g=new a(t,u,s);g.attr("position",d),t.setItemGraphicEl(u,g),n.add(g)}}).update(function(u,d){var g=o.getItemGraphicEl(d),p=t.getItemLayout(u);Mb(t,p,u,e)?(g?(g.updateData(t,u,s),Xi(g,{position:p},i)):(g=new a(t,u)).attr("position",p),n.add(g),t.setItemGraphicEl(u,g)):n.remove(g)}).remove(function(u){var d=o.getItemGraphicEl(u);d&&d.fadeOut(function(){n.remove(d)})}).execute(),this._data=t},Ef.isPersistent=function(){return!0},Ef.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,n){var i=t.getItemLayout(n);e.attr("position",i)})},Ef.incrementalPrepareUpdate=function(t){this._seriesScope=wy(t),this._data=null,this.group.removeAll()},Ef.incrementalUpdate=function(t,e,n){function i(u){u.isGroup||(u.incremental=u.useHoverLayer=!0)}n=Tb(n);for(var o=t.start;o<t.end;o++){var a=e.getItemLayout(o);if(Mb(e,a,o,n)){var s=new this._symbolCtor(e,o,this._seriesScope);s.traverse(i),s.attr("position",a),this.group.add(s),e.setItemGraphicEl(o,s)}}},Ef.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){e.remove(i)})}):e.removeAll()};var Ab=$i,kb=_r,Dw=ui,Sy=jt,Ib=[],Zc=[],Tc=[];function Gh(t){return isNaN(t[0])||isNaN(t[1])}function Cy(t,e,n,i,o,a,s,u,d,g){return"none"!==g&&g?function(p,x,S,C,I,z,O,V,Y,G,tt){for(var Q=0,nt=S,it=0;it<C;it++){var ct=x[nt];if(I<=nt||nt<0)break;if(Gh(ct)){if(tt){nt+=z;continue}break}if(nt===S)p[0<z?"moveTo":"lineTo"](ct[0],ct[1]);else if(0<Y){var vt=x[Q],_t="y"===G?1:0,At=(ct[_t]-vt[_t])*Y;Sy(Zc,vt),Zc[_t]=vt[_t]+At,Sy(Tc,ct),Tc[_t]=ct[_t]-At,p.bezierCurveTo(Zc[0],Zc[1],Tc[0],Tc[1],ct[0],ct[1])}else p.lineTo(ct[0],ct[1]);Q=nt,nt+=z}return it}.apply(this,arguments):function(p,x,S,C,I,z,O,V,Y,G,tt){for(var Q=0,nt=S,it=0;it<C;it++){var ct=x[nt];if(I<=nt||nt<0)break;if(Gh(ct)){if(tt){nt+=z;continue}break}if(nt===S)p[0<z?"moveTo":"lineTo"](ct[0],ct[1]),Sy(Zc,ct);else if(0<Y){var vt=nt+z,_t=x[vt];if(tt)for(;_t&&Gh(x[vt]);)_t=x[vt+=z];var At=.5,Ot=x[Q];if(!(_t=x[vt])||Gh(_t))Sy(Tc,ct);else{var Bt,Vt;if(Gh(_t)&&!tt&&(_t=ct),Jn(Ib,_t,Ot),"x"===G||"y"===G){var $t="x"===G?0:1;Bt=Math.abs(ct[$t]-Ot[$t]),Vt=Math.abs(ct[$t]-_t[$t])}else Bt=lr(ct,Ot),Vt=lr(ct,_t);Dw(Tc,ct,Ib,-Y*(1-(At=Vt/(Vt+Bt))))}Ab(Zc,Zc,V),kb(Zc,Zc,O),Ab(Tc,Tc,V),kb(Tc,Tc,O),p.bezierCurveTo(Zc[0],Zc[1],Tc[0],Tc[1],ct[0],ct[1]),Dw(Zc,ct,Ib,Y*At)}else p.lineTo(ct[0],ct[1]);Q=nt,nt+=z}return it}.apply(this,arguments)}function My(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var o=0;o<t.length;o++){var a=t[o];a[0]<n[0]&&(n[0]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[0]>i[0]&&(i[0]=a[0]),a[1]>i[1]&&(i[1]=a[1])}return{min:e?n:i,max:e?i:n}}var Ty=R.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:$n(R.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,o=n.length,a=My(n,e.smoothConstraint);if(e.connectNulls){for(;0<o&&Gh(n[o-1]);o--);for(;i<o&&Gh(n[i]);i++);}for(;i<o;)i+=Cy(t,n,i,o,o,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Dy=R.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:$n(R.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,o=0,a=n.length,s=e.smoothMonotone,u=My(n,e.smoothConstraint),d=My(i,e.smoothConstraint);if(e.connectNulls){for(;0<a&&Gh(n[a-1]);a--);for(;o<a&&Gh(n[o]);o++);}for(;o<a;){var g=Cy(t,n,o,a,a,1,u.min,u.max,e.smooth,s,e.connectNulls);Cy(t,i,o+g-1,g,a,-1,d.min,d.max,e.stackedOnSmooth,s,e.connectNulls),o+=g+1,t.closePath()}}});function Uh(t,e,n){var i=t.getArea(),o=t.getBaseAxis().isHorizontal(),a=i.x,s=i.y,u=i.width,d=i.height,g=n.get("lineStyle.width")||2;a-=g/2,s-=g/2,u+=g,d+=g,a=Math.floor(a),u=Math.round(u);var p=new Ji({shape:{x:a,y:s,width:u,height:d}});return e&&(p.shape[o?"width":"height"]=0,qs(p,{shape:{width:u,height:d}},n)),p}function Pb(t,e,n){var i=t.getArea(),o=new Kn({shape:{cx:ga(t.cx,1),cy:ga(t.cy,1),r0:ga(i.r0,1),r:ga(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return e&&(o.shape.endAngle=i.startAngle,qs(o,{shape:{endAngle:i.endAngle}},n)),o}function Ay(t,e,n){return t?"polar"===t.type?Pb(t,e,n):"cartesian2d"===t.type?Uh(t,e,n):null:null}function Eb(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],o=e[n];if(i[0]!==o[0]||i[1]!==o[1])return}return!0}}function pv(t,e){var n=[],i=[],o=[],a=[];return lu(t,n,i),lu(e,o,a),Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))}function Nb(t){return"number"==typeof t?t:t?.5:0}function Dc(t,e,n){for(var i=e.getBaseAxis(),o="x"===i.dim||"radius"===i.dim?0:1,a=[],s=0;s<t.length-1;s++){var u=t[s+1],d=t[s];a.push(d);var g=[];switch(n){case"end":g[o]=u[o],g[1-o]=d[1-o],a.push(g);break;case"middle":var x=[];g[o]=x[o]=(d[o]+u[o])/2,g[1-o]=d[1-o],x[1-o]=u[1-o],a.push(g),a.push(x);break;default:g[o]=d[o],g[1-o]=u[1-o],a.push(g)}}return t[s]&&a.push(t[s]),a}function Nf(t,e,n){if("cartesian2d"!==t.type)return Pb(t,e,n);var i=t.getBaseAxis().isHorizontal(),o=Uh(t,e,n);if(!n.get("clip",!0)){var a=o.shape,s=Math.max(a.width,a.height);i?(a.y-=s,a.height+=2*s):(a.x-=s,a.width+=2*s)}return o}function Yh(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(i,o,a){var s=i.getData(),u=i.get("symbol"),d=i.get("symbolSize"),g=i.get("symbolKeepAspect"),p=i.get("symbolRotate"),x=Ui(u),S=Ui(d),C=Ui(p),I=x||S||C,z=!x&&u?u:e;if(s.setVisual({legendSymbol:n||z,symbol:z,symbolSize:S?null:d,symbolKeepAspect:g,symbolRotate:p}),!o.isSeriesFiltered(i))return{dataEach:s.hasItemOption||I?function(V,Y){if(I){var G=i.getRawValue(Y),tt=i.getDataParams(Y);x&&V.setItemVisual(Y,"symbol",u(G,tt)),S&&V.setItemVisual(Y,"symbolSize",d(G,tt)),C&&V.setItemVisual(Y,"symbolRotate",p(G,tt))}if(V.hasItemOption){var Q=V.getItemModel(Y),nt=Q.getShallow("symbol",!0),it=Q.getShallow("symbolSize",!0),ct=Q.getShallow("symbolRotate",!0),vt=Q.getShallow("symbolKeepAspect",!0);null!=nt&&V.setItemVisual(Y,"symbol",nt),null!=it&&V.setItemVisual(Y,"symbolSize",it),null!=ct&&V.setItemVisual(Y,"symbolRotate",ct),null!=vt&&V.setItemVisual(Y,"symbolKeepAspect",vt)}}:null}}}}function mv(t){return{seriesType:t,plan:Ap(),reset:function(e){var n=e.getData(),i=e.coordinateSystem,o=e.pipelineContext.large;if(i){var a=kt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),s=a.length,u=n.getCalculationInfo("stackResultDimension");return hh(n,a[0])&&(a[0]=u),hh(n,a[1])&&(a[1]=u),s&&{progress:function(d,g){for(var x=o&&new Float32Array((d.end-d.start)*s),S=d.start,C=0,I=[],z=[];S<d.end;S++){var O;if(1===s){var V=g.get(a[0],S);O=!isNaN(V)&&i.dataToPoint(V,null,z)}else{V=I[0]=g.get(a[0],S);var Y=I[1]=g.get(a[1],S);O=!isNaN(V)&&!isNaN(Y)&&i.dataToPoint(I,null,z)}o?(x[C++]=O?O[0]:NaN,x[C++]=O?O[1]:NaN):g.setItemLayout(S,O&&O.slice()||[NaN,NaN])}o&&g.setLayout("symbolPoints",x)}}}}}}function wM(t,e){return Math.round(t.length/2)}Ta.extend({type:"line",init:function(){var t=new _n,e=new Ng;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,o=this.group,a=t.getData(),s=t.getModel("lineStyle"),u=t.getModel("areaStyle"),d=a.mapArray(a.getItemLayout),g="polar"===i.type,p=this._coordSys,x=this._symbolDraw,S=this._polyline,C=this._polygon,I=this._lineGroup,z=t.get("animation"),O=!u.isEmpty(),V=u.get("origin"),Y=function(Ot,Bt,Vt){if(!Vt.valueDim)return[];for(var $t=[],Jt=0,Yt=Bt.count();Jt<Yt;Jt++)$t.push(Rg(Vt,Ot,Bt,Jt));return $t}(i,a,Db(i,a,V)),G=t.get("showSymbol"),tt=G&&!g&&function qh(t,e,n){var i=t.get("showAllSymbol"),o="auto"===i;if(!i||o){var a=n.getAxesByScale("ordinal")[0];if(a&&(!o||!function(d,g){var p=d.getExtent(),x=Math.abs(p[1]-p[0])/d.scale.count();isNaN(x)&&(x=0);for(var S=g.count(),C=Math.max(1,Math.round(S/5)),I=0;I<S;I+=C)if(1.5*Ju.getSymbolSize(g,I)[d.isHorizontal()?1:0]>x)return!1;return!0}(a,e))){var s=e.mapDimension(a.dim),u={};return St(a.getViewLabels(),function(d){u[d.tickValue]=1}),function(d){return!u.hasOwnProperty(e.get(s,d))}}}}(t,a,i),Q=this._data;Q&&Q.eachItemGraphicEl(function(Ot,Bt){Ot.__temp&&(o.remove(Ot),Q.setItemGraphicEl(Bt,null))}),G||x.remove(),o.add(I);var nt,it=!g&&t.get("step");i&&i.getArea&&t.get("clip",!0)&&(null!=(nt=i.getArea()).width?(nt.x-=.1,nt.y-=.1,nt.width+=.2,nt.height+=.2):nt.r0&&(nt.r0-=.5,nt.r1+=.5)),this._clipShapeForSymbol=nt,S&&p.type===i.type&&it===this._step?(O&&!C?C=this._newPolygon(d,Y,i,z):C&&!O&&(I.remove(C),C=this._polygon=null),I.setClipPath(Nf(i,!1,t)),G&&x.updateData(a,{isIgnore:tt,clipShape:nt}),a.eachItemGraphicEl(function(Ot){Ot.stopAnimation(!0)}),Eb(this._stackedOnPoints,Y)&&Eb(this._points,d)||(z?this._updateAnimation(a,Y,i,n,it,V):(it&&(d=Dc(d,i,it),Y=Dc(Y,i,it)),S.setShape({points:d}),C&&C.setShape({points:d,stackedOnPoints:Y})))):(G&&x.updateData(a,{isIgnore:tt,clipShape:nt}),it&&(d=Dc(d,i,it),Y=Dc(Y,i,it)),S=this._newPolyline(d,i,z),O&&(C=this._newPolygon(d,Y,i,z)),I.setClipPath(Nf(i,!0,t)));var ct=function(Ot,Bt){var Vt=Ot.getVisual("visualMeta");if(Vt&&Vt.length&&Ot.count()&&"cartesian2d"===Bt.type){for(var $t,Jt,Yt=Vt.length-1;0<=Yt;Yt--){var ze=Ot.getDimensionInfo(Ot.dimensions[Vt[Yt].dimension]);if("x"===($t=ze&&ze.coordDim)||"y"===$t){Jt=Vt[Yt];break}}if(Jt){var Ie=Bt.getAxis($t),Je=kt(Jt.stops,function(Ur){return{coord:Ie.toGlobalCoord(Ie.dataToCoord(Ur.value)),color:Ur.color}}),mn=Je.length,hi=Jt.outerColors.slice();mn&&Je[0].coord>Je[mn-1].coord&&(Je.reverse(),hi.reverse());var We=Je[0].coord-10,ai=Je[mn-1].coord+10,fi=ai-We;if(fi<.001)return"transparent";St(Je,function(Ur){Ur.offset=(Ur.coord-We)/fi}),Je.push({offset:mn?Je[mn-1].offset:.5,color:hi[1]||"transparent"}),Je.unshift({offset:mn?Je[0].offset:.5,color:hi[0]||"transparent"});var Oi=new $d(0,0,0,0,Je,!0);return Oi[$t]=We,Oi[$t+"2"]=ai,Oi}}}(a,i)||a.getVisual("color");S.useStyle(Dn(s.getLineStyle(),{fill:"none",stroke:ct,lineJoin:"bevel"}));var vt=t.get("smooth");if(vt=Nb(t.get("smooth")),S.setShape({smooth:vt,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),C){var _t=a.getCalculationInfo("stackedOnSeries"),At=0;C.useStyle(Dn(u.getAreaStyle(),{fill:ct,opacity:.7,lineJoin:"bevel"})),_t&&(At=Nb(_t.get("smooth"))),C.setShape({smooth:vt,stackedOnSmooth:At,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=a,this._coordSys=i,this._stackedOnPoints=Y,this._points=d,this._step=it,this._valueOrigin=V},dispose:function(){},highlight:function(t,e,n,i){var o=t.getData(),a=Xo(o,i);if(!(a instanceof Array)&&null!=a&&0<=a){var s=o.getItemGraphicEl(a);if(!s){var u=o.getItemLayout(a);if(!u||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u[0],u[1]))return;(s=new Ju(o,a)).position=u,s.setZ(t.get("zlevel"),t.get("z")),s.ignore=isNaN(u[0])||isNaN(u[1]),s.__temp=!0,o.setItemGraphicEl(a,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else Ta.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var o=t.getData(),a=Xo(o,i);if(null!=a&&0<=a){var s=o.getItemGraphicEl(a);s&&(s.__temp?(o.setItemGraphicEl(a,null),this.group.remove(s)):s.downplay())}else Ta.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Ty({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Dy({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(t,e,n,i,o,a){var s=this._polyline,u=this._polygon,d=t.hostModel,g=function(Y,G,tt,Q,nt,it,ct,vt){for(var _t=function(Ec,nc){var op=[];return nc.diff(Ec).add(function(xm){op.push({cmd:"+",idx:xm})}).update(function(xm,P_){op.push({cmd:"=",idx:P_,idx1:xm})}).remove(function(xm){op.push({cmd:"-",idx:xm})}).execute(),op}(Y,G),At=[],Ot=[],Bt=[],Vt=[],$t=[],Jt=[],Yt=[],ue=Db(nt,G,ct),Re=Db(it,Y,vt),ze=0;ze<_t.length;ze++){var Ie=_t[ze],Je=!0;switch(Ie.cmd){case"=":var mn=Y.getItemLayout(Ie.idx),hi=G.getItemLayout(Ie.idx1);(isNaN(mn[0])||isNaN(mn[1]))&&(mn=hi.slice()),At.push(mn),Ot.push(hi),Bt.push(tt[Ie.idx]),Vt.push(Q[Ie.idx1]),Yt.push(G.getRawIndex(Ie.idx1));break;case"+":var We=Ie.idx;At.push(nt.dataToPoint([G.get(ue.dataDimsForPoint[0],We),G.get(ue.dataDimsForPoint[1],We)])),Ot.push(G.getItemLayout(We).slice()),Bt.push(Rg(ue,nt,G,We)),Vt.push(Q[We]),Yt.push(G.getRawIndex(We));break;case"-":var ai=Y.getRawIndex(We=Ie.idx);ai!==We?(At.push(Y.getItemLayout(We)),Ot.push(it.dataToPoint([Y.get(Re.dataDimsForPoint[0],We),Y.get(Re.dataDimsForPoint[1],We)])),Bt.push(tt[We]),Vt.push(Rg(Re,it,Y,We)),Yt.push(ai)):Je=!1}Je&&($t.push(Ie),Jt.push(Jt.length))}Jt.sort(function(Ec,nc){return Yt[Ec]-Yt[nc]});var fi=[],Oi=[],Ur=[],Pr=[],oo=[];for(ze=0;ze<Jt.length;ze++)fi[ze]=At[We=Jt[ze]],Oi[ze]=Ot[We],Ur[ze]=Bt[We],Pr[ze]=Vt[We],oo[ze]=$t[We];return{current:fi,next:Oi,stackedOnCurrent:Ur,stackedOnNext:Pr,status:oo}}(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),p=g.current,x=g.stackedOnCurrent,S=g.next,C=g.stackedOnNext;if(o&&(p=Dc(g.current,n,o),x=Dc(g.stackedOnCurrent,n,o),S=Dc(g.next,n,o),C=Dc(g.stackedOnNext,n,o)),3e3<pv(p,S)||u&&3e3<pv(x,C))return s.setShape({points:S}),void(u&&u.setShape({points:S,stackedOnPoints:C}));s.shape.__points=g.current,s.shape.points=p,Xi(s,{shape:{points:S}},d),u&&(u.setShape({points:p,stackedOnPoints:x}),Xi(u,{shape:{points:S,stackedOnPoints:C}},d));for(var I=[],z=g.status,O=0;O<z.length;O++)if("="===z[O].cmd){var V=t.getItemGraphicEl(z[O].idx1);V&&I.push({el:V,ptIdx:O})}s.animators&&s.animators.length&&s.animators[0].during(function(){for(var Y=0;Y<I.length;Y++)I[Y].el.attr("position",s.shape.__points[I[Y].ptIdx])})},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(e.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Aw={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};function SM(t){return this._axes[t]}function vv(t){this._axes={},this._dimList=[],this.name=t||""}function yv(t){vv.call(this,t)}function xv(t,e,n,i,o){$a.call(this,t,e,n),this.type=i||"value",this.position=o||"bottom"}vv.prototype={constructor:vv,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return kt(this._dimList,SM,this)},getAxesByScale:function(t){return t=t.toLowerCase(),Mn(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},o=0;o<n.length;o++){var a=n[o];i[a]=this._axes[a][e](t[a])}return i}},yv.prototype={constructor:yv,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),o=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=o.toGlobalCoord(o.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),a=i.getExtent(),s=n.parse(t[0]),u=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),u),Math.max(a[0],a[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return(e=e||[])[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]);return new Yi(n,i,Math.max(t[0],t[1])-n,Math.max(e[0],e[1])-i)}},ki(yv,vv),xv.prototype={constructor:xv,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},ki(xv,$a);var kw={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Xh={};function Wp(t,e,n,i){St(CM,function(o){e.extend({type:t+"Axis."+o,mergeDefaultAndTheme:function(a,s){var u=this.layoutMode,d=u?Oh(a):{};ei(a,s.getTheme().get(o+"Axis")),ei(a,this.getDefaultOption()),a.type=n(t,a),u&&Gu(a,d,u)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=ov.createByAxisModel(this))},getCategories:function(a){var s=this.option;if("category"===s.type)return a?s.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:Zt([{},Xh[o+"Axis"],i],!0)})}),Sr.registerSubTypeDefaulter(t+"Axis",kn(n,t))}Xh.categoryAxis=ei({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},kw),Xh.valueAxis=ei({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},kw),Xh.timeAxis=Dn({scale:!0,min:"dataMin",max:"dataMax"},Xh.valueAxis),Xh.logAxis=Dn({scale:!0,logBase:10},Xh.valueAxis);var CM=["value","category","time","log"],jp=Sr.extend({type:"cartesian2dAxis",axis:null,init:function(){jp.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){jp.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){jp.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function ky(t,e){return e.type||(e.data?"category":"value")}ei(jp.prototype,Pg);var Iw={offset:0};function bv(t,e){return t.getCoordSysModel()===e}function Gp(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}Wp("x",jp,ky,Iw),Wp("y",jp,ky,Iw),Sr.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var Vl=Gp.prototype;function Pw(t,e,n,i){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,a=t[e],s=n.model,u=s.get("axisLine.onZero"),d=s.get("axisLine.onZeroAxisIndex");if(u){if(null!=d)Rb(a[d])&&(o=a[d]);else for(var g in a)if(a.hasOwnProperty(g)&&Rb(a[g])&&!i[p(a[g])]){o=a[g];break}o&&(i[p(o)]=!0)}function p(x){return x.dim+"_"+x.index}}function Rb(t){return t&&"category"!==t.type&&"time"!==t.type&&function(e){var n=e.scale.getExtent(),i=n[0],o=n[1];return!(0<i&&0<o||i<0&&o<0)}(t)}Vl.type="grid",Vl.axisPointerEnabled=!0,Vl.getRect=function(){return this._rect},Vl.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),St(n.x,function(o){Pf(o.scale,o.model)}),St(n.y,function(o){Pf(o.scale,o.model)});var i={};St(n.x,function(o){Pw(n,"y",o,i)}),St(n.y,function(o){Pw(n,"x",o,i)}),this.resize(this.model,e)},Vl.resize=function(t,e,n){var i=xi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var o=this._axesList;function a(){St(o,function(s){var p,x,S,C,u=s.isHorizontal(),d=u?[0,i.width]:[0,i.height],g=s.inverse?1:0;s.setExtent(d[g],d[1-g]),x=u?i.x:i.y,S=(p=s).getExtent(),C=S[0]+S[1],p.toGlobalCoord="x"===p.dim?function(I){return I+x}:function(I){return C-I+x},p.toLocalCoord="x"===p.dim?function(I){return I-x}:function(I){return C-I+x}})}a(),!n&&t.get("containLabel")&&(St(o,function(s){if(!s.model.get("axisLabel.inside")){var u=function(p){var S=p.scale;if(p.model.get("axisLabel.show")&&!S.isBlank()){var C,I,z="category"===p.type,O=S.getExtent();I=z?S.count():(C=S.getTicks()).length;var V,Y,tt,Q,nt,it,ct,vt,_t=p.getLabelModel(),At=Hp(p),Ot=1;40<I&&(Ot=Math.ceil(I/40));for(var Bt=0;Bt<I;Bt+=Ot){var Vt=At(C?C[Bt]:O[0]+Bt),Jt=(Y=_t.getTextRect(Vt),tt=(_t.get("rotate")||0)*Math.PI/180,it=(Q=Y.plain()).height,ct=(nt=Q.width)*Math.abs(Math.cos(tt))+Math.abs(it*Math.sin(tt)),vt=nt*Math.abs(Math.sin(tt))+Math.abs(it*Math.cos(tt)),new Yi(Q.x,Q.y,ct,vt));V?V.union(Jt):V=Jt}return V}}(s);if(u){var d=s.isHorizontal()?"height":"width",g=s.model.get("axisLabel.margin");i[d]-=u[d]+g,"top"===s.position?i.y+=u.height+g:"left"===s.position&&(i.x+=u.width+g)}}}),a())},Vl.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},Vl.getAxes=function(){return this._axesList.slice()},Vl.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];Ln(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===e)return o[i]},Vl.getCartesians=function(){return this._coordsList.slice()},Vl.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},Vl.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},Vl._findConvertTarget=function(t,e){var n,i,o=e.seriesModel,a=e.xAxisModel||o&&o.getReferringComponents("xAxis")[0],s=e.yAxisModel||o&&o.getReferringComponents("yAxis")[0],u=e.gridModel;return o?zn(this._coordsList,n=o.coordinateSystem)<0&&(n=null):a&&s?n=this.getCartesian(a.componentIndex,s.componentIndex):a?i=this.getAxis("x",a.componentIndex):s?i=this.getAxis("y",s.componentIndex):u&&u.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},Vl.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},Vl._initCartesian=function(t,e,n){var i={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},a={x:0,y:0};if(e.eachComponent("xAxis",s("x"),this),e.eachComponent("yAxis",s("y"),this),!a.x||!a.y)return this._axesMap={},void(this._axesList=[]);function s(u){return function(d,g){if(bv(d,t)){var p=d.get("position");"x"===u?"top"!==p&&"bottom"!==p&&(p=i.bottom?"top":"bottom"):"left"!==p&&"right"!==p&&(p=i.left?"right":"left"),i[p]=!0;var x=new xv(u,Ig(d),[0,0],d.get("type"),p);x.onBand="category"===x.type&&d.get("boundaryGap"),x.inverse=d.get("inverse"),(d.axis=x).model=d,x.grid=this,x.index=g,this._axesList.push(x),o[u][g]=x,a[u]++}}}St((this._axesMap=o).x,function(u,d){St(o.y,function(g,p){var x="x"+d+"y"+p,S=new yv(x);S.grid=this,S.model=t,this._coordsMap[x]=S,this._coordsList.push(S),S.addAxis(u),S.addAxis(g)},this)},this)},Vl._updateScale=function(t,e){function n(i,o){St(i.mapDimension(o.dim,!0),function(a){o.scale.unionExtentFromData(i,kf(i,a))})}St(this._axesList,function(i){i.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(i){if(Iy(i)){var o=Ew(i),a=o[0],s=o[1];if(!bv(a,e)||!bv(s,e))return;var u=this.getCartesian(a.componentIndex,s.componentIndex),d=i.getData(),g=u.getAxis("x"),p=u.getAxis("y");"list"===d.type&&(n(d,g),n(d,p))}},this)},Vl.getTooltipAxes=function(t){var e=[],n=[];return St(this.getCartesians(),function(i){var o=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);zn(e,o)<0&&e.push(o),zn(n,a)<0&&n.push(a)}),{baseAxes:e,otherAxes:n}};var Lb=["xAxis","yAxis"];function Ew(t){return kt(Lb,function(e){return t.getReferringComponents(e)[0]})}function Iy(t){return"cartesian2d"===t.get("coordinateSystem")}function Wl(t,e){this.opt=e,this.axisModel=t,Dn(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new _n;var n=new _n({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}Gp.create=function(t,e){var n=[];return t.eachComponent("grid",function(i,o){var a=new Gp(i,t,e);a.name="grid_"+o,a.resize(i,e,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(Iy(i)){var o=Ew(i),a=o[0],s=o[1],u=a.getCoordSysModel().coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},Gp.dimensions=Gp.prototype.dimensions=yv.prototype.dimensions,Ca.register("cartesian2d",Gp);var Rf=Math.PI;Wl.prototype={constructor:Wl,hasBuilder:function(t){return!!Lg[t]},add:function(t){Lg[t].call(this)},getGroup:function(){return this.group}};var Lg={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,o=[n[0],0],a=[n[1],0];i&&(Wi(o,o,i),Wi(a,a,i));var s=En({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new go({anid:"line",subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:a[0],y2:a[1]},style:s,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var u=e.get("axisLine.symbol"),d=e.get("axisLine.symbolSize"),g=e.get("axisLine.symbolOffset")||0;if("number"==typeof g&&(g=[g,g]),null!=u){"string"==typeof u&&(u=[u,u]),"string"!=typeof d&&"number"!=typeof d||(d=[d,d]);var p=d[0],x=d[1];St([{rotate:t.rotation+Math.PI/2,offset:g[0],r:0},{rotate:t.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1]))}],function(S,C){if("none"!==u[C]&&null!=u[C]){var I=Mc(u[C],-p/2,-x/2,p,x,s.stroke,!0),z=S.r+S.offset,O=[o[0]+z*Math.cos(t.rotation),o[1]-z*Math.sin(t.rotation)];I.attr({rotation:S.rotate,position:O,silent:!0,z2:11}),this.group.add(I)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(i,o,a){var s=o.axis,u=o.getModel("axisTick");if(u.get("show")&&!s.scale.isBlank()){for(var d=u.getModel("lineStyle"),g=a.tickDirection*u.get("length"),p=Ob(s.getTicksCoords(),i._transform,g,Dn(d.getLineStyle(),{stroke:o.get("axisLine.lineStyle.color")}),"ticks"),x=0;x<p.length;x++)i.group.add(p[x]);return p}}(this,t,e);(function(i,o,a){if(!cv(i.axis)){var s=i.get("axisLabel.showMinLabel"),u=i.get("axisLabel.showMaxLabel"),d=(o=o||[])[0],g=o[1],p=o[o.length-1],x=o[o.length-2],S=(a=a||[])[0],C=a[1],I=a[a.length-1],z=a[a.length-2];!1===s?(Ac(d),Ac(S)):Nw(d,g)&&(s?(Ac(g),Ac(C)):(Ac(d),Ac(S))),!1===u?(Ac(p),Ac(I)):Nw(x,p)&&(u?(Ac(x),Ac(z)):(Ac(p),Ac(I)))}})(t,function(i,o,a){var s=o.axis;if(pr(a.axisLabelShow,o.get("axisLabel.show"))&&!s.scale.isBlank()){var u=o.getModel("axisLabel"),d=u.get("margin"),g=s.getViewLabels(),p=(pr(a.labelRotate,u.get("rotate"))||0)*Rf/180,x=ar(a.rotation,p,a.labelDirection),S=o.getCategories&&o.getCategories(!0),C=[],I=Py(o),z=o.get("triggerEvent");return St(g,function(O,V){var Y=O.tickValue,G=O.formattedLabel,tt=O.rawLabel,Q=u;S&&S[Y]&&S[Y].textStyle&&(Q=new dr(S[Y].textStyle,u,o.ecModel));var nt=Q.getTextColor()||o.get("axisLine.lineStyle.color"),it=[s.dataToCoord(Y),a.labelOffset+a.labelDirection*d],ct=new rn({anid:"label_"+Y,position:it,rotation:x.rotation,silent:I,z2:10});Wo(ct.style,Q,{text:G,textAlign:Q.getShallow("align",!0)||x.textAlign,textVerticalAlign:Q.getShallow("verticalAlign",!0)||Q.getShallow("baseline",!0)||x.textVerticalAlign,textFill:"function"==typeof nt?nt("category"===s.type?tt:"value"===s.type?Y+"":Y,V):nt}),z&&(ct.eventData=_v(o),ct.eventData.targetType="axisLabel",ct.eventData.value=tt),i._dumbGroup.add(ct),ct.updateTransform(),C.push(ct),i.group.add(ct),ct.decomposeTransform()}),C}}(this,t,e),n),function(i,o,a){var s=o.axis,u=o.getModel("minorTick");if(u.get("show")&&!s.scale.isBlank()){var d=s.getMinorTicksCoords();if(d.length)for(var g=u.getModel("lineStyle"),p=a.tickDirection*u.get("length"),x=Dn(g.getLineStyle(),Dn(o.getModel("axisTick").getLineStyle(),{stroke:o.get("axisLine.lineStyle.color")})),S=0;S<d.length;S++)for(var C=Ob(d[S],i._transform,p,x,"minorticks_"+S),I=0;I<C.length;I++)i.group.add(C[I])}}(this,t,e)},axisName:function(){var it,vt,At,Ot,Bt,Vt,t=this.opt,e=this.axisModel,n=pr(t.axisName,e.get("name"));if(n){var i,o,a=e.get("nameLocation"),s=t.nameDirection,u=e.getModel("nameTextStyle"),d=e.get("nameGap")||0,g=this.axisModel.axis.getExtent(),p=g[0]>g[1]?-1:1,x=["start"===a?g[0]-p*d:"end"===a?g[1]+p*d:(g[0]+g[1])/2,Rw(a)?t.labelOffset+s*d:0],S=e.get("nameRotate");null!=S&&(S=S*Rf/180),Rw(a)?i=ar(t.rotation,null!=S?S:t.rotation,s):(it=a,vt=g,Ot=dg((S||0)-t.rotation),Bt=vt[0]>vt[1],Vt="start"===it&&!Bt||"start"!==it&&Bt,i={rotation:Ot,textAlign:Gc(Ot-Rf/2)?(At=Vt?"bottom":"top","center"):Gc(Ot-1.5*Rf)?(At=Vt?"top":"bottom","center"):(At="middle",Ot<1.5*Rf&&Rf/2<Ot?Vt?"left":"right":Vt?"right":"left"),textVerticalAlign:At},null!=(o=t.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(i.rotation)),isFinite(o)||(o=null)));var C=u.getFont(),I=e.get("nameTruncate",!0)||{},z=I.ellipsis,O=pr(t.nameTruncateMaxWidth,I.maxWidth,o),V=null!=z&&null!=O?Pm(n,O,C,z,{minChar:2,placeholder:I.placeholder}):n,Y=e.get("tooltip",!0),G=e.mainType,tt={componentType:G,name:n,$vars:["name"]};tt[G+"Index"]=e.componentIndex;var Q=new rn({anid:"name",__fullText:n,__truncatedText:V,position:x,rotation:i.rotation,silent:Py(e),z2:1,tooltip:Y&&Y.show?En({content:n,formatter:function(){return n},formatterParams:tt},Y):null});Wo(Q.style,u,{text:V,textFont:C,textFill:u.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:u.get("align")||i.textAlign,textVerticalAlign:u.get("verticalAlign")||i.textVerticalAlign}),e.get("triggerEvent")&&(Q.eventData=_v(e),Q.eventData.targetType="axisName",Q.eventData.name=n),this._dumbGroup.add(Q),Q.updateTransform(),this.group.add(Q),Q.decomposeTransform()}}},_v=Wl.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},ar=Wl.innerTextLayout=function(t,e,n){var i,o=dg(e-t);return{rotation:o,textAlign:Gc(o)?(i=0<n?"top":"bottom","center"):Gc(o-Rf)?(i=0<n?"bottom":"top","center"):(i="middle",0<o&&o<Rf?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:i}},Py=Wl.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)};function Ac(t){t&&(t.ignore=!0)}function Nw(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var o=Ft([]);return he(o,o,-t.rotation),n.applyTransform(Kt([],o,t.getLocalTransform())),i.applyTransform(Kt([],o,e.getLocalTransform())),n.intersect(i)}}function Rw(t){return"middle"===t||"center"===t}function Ob(t,e,n,i,o){for(var a=[],s=[],u=[],d=0;d<t.length;d++){var g=t[d].coord;s[0]=g,u[s[1]=0]=g,u[1]=n,e&&(Wi(s,s,e),Wi(u,u,e));var p=new go({anid:o+"_"+t[d].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:u[0],y2:u[1]},style:i,z2:2,silent:!0});a.push(p)}return a}var Lf=St,Bb=kn;function wv(t,e){return"all"===t||Fe(t)&&0<=zn(t,e)||t===e}function Sv(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Of(t)]}function Ey(t){return!!t.get("handle.show")}function Of(t){return t.type+"||"+t.id}var Qu=Oa({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,i){this.axisPointerClass&&function(o){var a=Sv(o);if(a){var s=a.axisPointerModel,u=a.axis.scale,d=s.option,g=s.get("status"),p=s.get("value");null!=p&&(p=u.parse(p));var x=Ey(s);null==g&&(d.status=x?"show":"hide");var S=u.getExtent().slice();S[0]>S[1]&&S.reverse(),(null==p||p>S[1])&&(p=S[1]),p<S[0]&&(p=S[0]),d.value=p,x&&(d.status=a.axis.scale.isBlank()?"hide":"show")}}(t),Qu.superApply(this,"render",arguments),Lw(this,t,0,n,0,!0)},updateAxisPointer:function(t,e,n,i,o){Lw(this,t,0,n,0,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),Qu.superApply(this,"remove",arguments)},dispose:function(t,e){zb(this,e),Qu.superApply(this,"dispose",arguments)}});function Lw(t,e,n,i,o,a){var g,s=Qu.getAxisPointerClass(t.axisPointerClass);if(s){var u=(g=Sv(e))&&g.axisPointerModel;u?(t._axisPointer||(t._axisPointer=new s)).render(e,u,i,a):zb(t,i)}}function zb(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}var Fb=[];function Hb(t,e,n){n=n||{};var i=t.coordinateSystem,o=e.axis,a={},s=o.getAxesOnZeroOf()[0],u=o.position,d=s?"onZero":u,g=o.dim,p=i.getRect(),x=[p.x,p.x+p.width,p.y,p.y+p.height],S={left:0,right:1,top:0,bottom:1,onZero:2},C=e.get("offset")||0,I="x"===g?[x[2]-C,x[3]+C]:[x[0]-C,x[1]+C];if(s){var z=s.toGlobalCoord(s.dataToCoord(0));I[S.onZero]=Math.max(Math.min(z,I[1]),I[0])}a.position=["y"===g?I[S[d]]:x[0],"x"===g?I[S[d]]:x[3]],a.rotation=Math.PI/2*("x"===g?0:1),a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[u],a.labelOffset=s?I[S[u]]-I[S.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),pr(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var O=e.get("axisLabel.rotate");return a.labelRotate="top"===d?-O:O,a.z2=1,a}function Up(t,e,n,i){var o=n.axis;if(!o.scale.isBlank()){var a=n.getModel("splitArea"),s=a.getModel("areaStyle"),u=s.get("color"),d=i.coordinateSystem.getRect(),g=o.getTicksCoords({tickModel:a,clamp:!0});if(g.length){var p=u.length,x=t.__splitAreaColors,S=pe(),C=0;if(x)for(var I=0;I<g.length;I++){var z=x.get(g[I].tickValue);if(null!=z){C=(z+(p-1)*I)%p;break}}var O=o.toGlobalCoord(g[0].coord),V=s.getAreaStyle();for(u=Fe(u)?u:[u],I=1;I<g.length;I++){var Y,G,tt,Q,nt=o.toGlobalCoord(g[I].coord);O=o.isHorizontal()?(G=d.y,Q=d.height,(Y=O)+(tt=nt-Y)):(Y=d.x,tt=d.width,(G=O)+(Q=nt-G));var it=g[I-1].tickValue;null!=it&&S.set(it,C),e.add(new Ji({anid:null!=it?"area_"+it:null,shape:{x:Y,y:G,width:tt,height:Q},style:Dn({fill:u[C]},V),silent:!0})),C=(C+1)%p}t.__splitAreaColors=S}}}function Ow(t){t.__splitAreaColors=null}Qu.registerAxisPointerClass=function(t,e){Fb[t]=e},Qu.getAxisPointerClass=function(t){return t&&Fb[t]};var Bw=["axisLine","axisTickLabel","axisName"],TM=["splitArea","splitLine","minorSplitLine"],Vb=Qu.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new _n,this.group.add(this._axisGroup),t.get("show")){var a=t.getCoordSysModel(),s=Hb(a,t),u=new Wl(t,s);St(Bw,u.add,u),this._axisGroup.add(u.getGroup()),St(TM,function(d){t.get(d+".show")&&this["_"+d](t,a)},this),Na(o,this._axisGroup,t),Vb.superCall(this,"render",t,e,n,i)}},remove:function(){Ow(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitLine"),o=i.getModel("lineStyle"),a=o.get("color");a=Fe(a)?a:[a];for(var s=e.coordinateSystem.getRect(),u=n.isHorizontal(),d=0,g=n.getTicksCoords({tickModel:i}),p=[],x=[],S=o.getLineStyle(),C=0;C<g.length;C++){var I=n.toGlobalCoord(g[C].coord);u?(p[0]=I,p[1]=s.y,x[0]=I,x[1]=s.y+s.height):(p[0]=s.x,p[1]=I,x[0]=s.x+s.width,x[1]=I);var z=d++%a.length;this._axisGroup.add(new go({anid:null!=g[C].tickValue?"line_"+g[C].tickValue:null,subPixelOptimize:!0,shape:{x1:p[0],y1:p[1],x2:x[0],y2:x[1]},style:Dn({stroke:a[z]},S),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,i=t.getModel("minorSplitLine").getModel("lineStyle"),o=e.coordinateSystem.getRect(),a=n.isHorizontal(),s=n.getMinorTicksCoords();if(s.length)for(var u=[],d=[],g=i.getLineStyle(),p=0;p<s.length;p++)for(var x=0;x<s[p].length;x++){var S=n.toGlobalCoord(s[p][x].coord);a?(u[0]=S,u[1]=o.y,d[0]=S,d[1]=o.y+o.height):(u[0]=o.x,u[1]=S,d[0]=o.x+o.width,d[1]=S),this._axisGroup.add(new go({anid:"minor_line_"+s[p][x].tickValue,subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:g,silent:!0}))}},_splitArea:function(t,e){Up(this,this._axisGroup,t,e)}});Vb.extend({type:"xAxis"}),Vb.extend({type:"yAxis"}),Oa({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Ji({shape:t.coordinateSystem.getRect(),style:Dn({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),wl(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),jo(Yh("line","circle","line")),oa(mv("line")),$u(Td.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(t,e,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem;if("cartesian2d"===a.type&&o){var s,u=a.getBaseAxis(),d=a.getOtherAxis(u),g=u.getExtent(),p=Math.abs(g[1]-g[0]),x=Math.round(i.count()/p);1<x&&("string"==typeof o?s=Aw[o]:"function"==typeof o&&(s=o),s&&t.setData(i.downSample(i.mapDimension(d.dim),1/x,s,wM)))}}});var Wb=ra.extend({type:"series.__base_bar__",getInitialData:function(t,e){return fh(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),o=i.getLayout("offset"),a=i.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=o+a/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function zw(t,e,n,i,o,a){Fl(t,e,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:o,labelDataIndex:a,defaultText:_y(o.getData(),a),isRectText:!0,autoColor:i}),Fw(t),Fw(e)}function Fw(t,e){"outside"===t.textPosition&&(t.textPosition=e)}Wb.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return t<e&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var DM=ho([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),jb={getBarItemStyle:function(t){var e=DM(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}},Bf=ia({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,i=e.cy,o=Math.max(e.r0||0,0),a=Math.max(e.r,0),s=.5*(a-o),u=o+s,d=e.startAngle,g=e.endAngle,p=e.clockwise,x=Math.cos(d),S=Math.sin(d),C=Math.cos(g),I=Math.sin(g);(p?g-d<2*Math.PI:d-g<2*Math.PI)&&(t.moveTo(x*o+n,S*o+i),t.arc(x*u+n,S*u+i,s,-Math.PI+d,d,!p)),t.arc(n,i,a,d,g,!p),t.moveTo(C*a+n,I*a+i),t.arc(C*u+n,I*u+i,s,g-2*Math.PI,g-Math.PI,!p),0!==o&&(t.arc(n,i,o,g,d,p),t.moveTo(x*o+n,I*o+i)),t.closePath()}}),Ny=["itemStyle","barBorderWidth"],Ry=[0,0];En(dr.prototype,jb),Zu({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var i,o=this.group,a=t.getData(),s=this._data,u=t.coordinateSystem,d=u.getBaseAxis();"cartesian2d"===u.type?i=d.isHorizontal():"polar"===u.type&&(i="angle"===d.dim);var g=t.isAnimationEnabled()?t:null,p=t.get("clip",!0),x=function(Q,nt){var it=Q.getArea&&Q.getArea();if("cartesian2d"===Q.type){var ct=Q.getBaseAxis();if("category"!==ct.type||!ct.onBand){var vt=nt.getLayout("bandWidth");ct.isHorizontal()?(it.x-=vt,it.width+=2*vt):(it.y-=vt,it.height+=2*vt)}}return it}(u,a);function S(Q){var ct,nt=Mv[u.type](a,Q),it=new("polar"===(ct=u).type?Kn:Ji)({shape:Gw(i,nt,ct),silent:!0,z2:0});return it.useStyle(z.getBarItemStyle()),"cartesian2d"===u.type&&it.setShape("r",O),V[Q]=it}o.removeClipPath();var C=t.get("roundCap",!0),I=t.get("showBackground",!0),z=t.getModel("backgroundStyle"),O=z.get("barBorderRadius")||0,V=[],Y=this._backgroundEls||[];a.diff(s).add(function(Q){var nt=a.getItemModel(Q),it=Mv[u.type](a,Q,nt);if(I&&S(Q),a.hasValue(Q)){if(p&&Hw[u.type](x,it))return void o.remove(ct);var ct=Ly[u.type](Q,it,i,g,!1,C);a.setItemGraphicEl(Q,ct),o.add(ct),Vw(ct,a,Q,nt,it,t,0,"polar"===u.type)}}).update(function(Q,nt){var it=a.getItemModel(Q),ct=Mv[u.type](a,Q,it);if(I){var vt;0===Y.length?vt=S(nt):((vt=Y[nt]).useStyle(z.getBarItemStyle()),"cartesian2d"===u.type&&vt.setShape("r",O),V[Q]=vt);var _t=Mv[u.type](a,Q);Xi(vt,{shape:Gw(i,_t,u)},g,Q)}var At=s.getItemGraphicEl(nt);if(a.hasValue(Q)){if(p&&Hw[u.type](x,ct))return void o.remove(At);At?Xi(At,{shape:ct},g,Q):At=Ly[u.type](Q,ct,i,g,!0,C),a.setItemGraphicEl(Q,At),o.add(At),Vw(At,a,Q,it,ct,t,0,"polar"===u.type)}else o.remove(At)}).remove(function(Q){var nt=s.getItemGraphicEl(Q);"cartesian2d"===u.type?nt&&Oy(Q,g,nt):nt&&Ub(Q,g,nt)}).execute();var G=this._backgroundGroup||(this._backgroundGroup=new _n);G.removeAll();for(var tt=0;tt<V.length;++tt)G.add(V[tt]);o.add(G),this._backgroundEls=V,this._data=a},_renderLarge:function(t,e,n){this._clear(),jw(t,this.group);var i=t.get("clip",!0)?Ay(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),jw(e,this.group,!0)},dispose:_e,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){"sector"===i.type?Ub(i.dataIndex,t,i):Oy(i.dataIndex,t,i)})):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var Gb=Math.max,Cv=Math.min,Hw={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var o=Gb(e.x,t.x),a=Cv(e.x+e.width,t.x+t.width),s=Gb(e.y,t.y),u=Cv(e.y+e.height,t.y+t.height);e.x=o,e.y=s,e.width=a-o,e.height=u-s;var d=e.width<0||e.height<0;return n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),d},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}i=Cv(e.r,t.r);var o=Gb(e.r0,t.r0),a=(e.r=i)-(e.r0=o)<0;return n<0&&(i=e.r,e.r=e.r0,e.r0=i),a}},Ly={cartesian2d:function(t,e,n,i,o){var a=new Ji({shape:En({},e),z2:1});if(a.name="item",i){var s=n?"height":"width",u={};a.shape[s]=0,u[s]=e[s],yl[o?"updateProps":"initProps"](a,{shape:u},i,t)}return a},polar:function(t,e,n,i,o,a){var u=new(!n&&a?Bf:Kn)({shape:Dn({clockwise:e.startAngle<e.endAngle},e),z2:1});if(u.name="item",i){var d=n?"r":"endAngle",g={};u.shape[d]=n?0:e.startAngle,g[d]=e[d],yl[o?"updateProps":"initProps"](u,{shape:g},i,t)}return u}};function Oy(t,e,n){n.style.text=null,Xi(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function Ub(t,e,n){n.style.text=null,Xi(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}var Mv={cartesian2d:function(t,e,n){var d,g,p,x,i=t.getItemLayout(e),o=n?(d=i,g=n.get(Ny)||0,p=isNaN(d.width)?Number.MAX_VALUE:Math.abs(d.width),x=isNaN(d.height)?Number.MAX_VALUE:Math.abs(d.height),Math.min(g,p,x)):0,a=0<i.width?1:-1,s=0<i.height?1:-1;return{x:i.x+a*o/2,y:i.y+s*o/2,width:i.width-a*o,height:i.height-s*o}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function qb(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function Vw(t,e,n,i,o,a,s,u){var d=e.getItemVisual(n,"color"),g=e.getItemVisual(n,"opacity"),p=e.getVisual("borderColor"),x=i.getModel("itemStyle"),S=i.getModel("emphasis.itemStyle").getBarItemStyle();u||t.setShape("r",x.get("barBorderRadius")||0),t.useStyle(Dn({stroke:qb(o)?"none":p,fill:qb(o)?"none":d,opacity:g},x.getBarItemStyle()));var C=i.getShallow("cursor");C&&t.attr("cursor",C),u||zw(t.style,S,i,d,a,n),qb(o)&&(S.fill=S.stroke="none"),Er(t,S)}var Ww=R.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,i=this.__startPoint,o=this.__baseDimIdx,a=0;a<n.length;a+=2)i[o]=n[a+o],t.moveTo(i[0],i[1]),t.lineTo(n[a],n[a+1])}});function jw(t,e,n){var i=t.getData(),o=[],a=i.getLayout("valueAxisHorizontal")?1:0;o[1-a]=i.getLayout("valueAxisStart");var C,I,z,O,V,s=i.getLayout("largeDataIndices"),u=i.getLayout("barWidth"),d=t.getModel("backgroundStyle");if(t.get("showBackground",!0)){var g=i.getLayout("largeBackgroundPoints"),p=[];p[1-a]=i.getLayout("backgroundStart");var x=new Ww({shape:{points:g},incremental:!!n,__startPoint:p,__baseDimIdx:a,__largeDataIndices:s,__barWidth:u,silent:!0,z2:0});C=x,z=i,O=(I=d).get("borderColor")||I.get("color"),V=I.getItemStyle(["color","borderColor"]),C.useStyle(V),C.style.fill=null,C.style.stroke=O,C.style.lineWidth=z.getLayout("barWidth"),e.add(x)}var S=new Ww({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:o,__baseDimIdx:a,__largeDataIndices:s,__barWidth:u});e.add(S),function(C,I,z){var O=z.getVisual("borderColor")||z.getVisual("color"),V=I.getModel("itemStyle").getItemStyle(["color","borderColor"]);C.useStyle(V),C.style.fill=null,C.style.stroke=O,C.style.lineWidth=z.getLayout("barWidth")}(S,t,i),S.seriesIndex=t.seriesIndex,t.get("silent")||(S.on("mousedown",Yb),S.on("mousemove",Yb))}var Yb=Gm(function(t){var e=function(n,i,o){var a=n.__baseDimIdx,s=1-a,u=n.shape.points,d=n.__largeDataIndices,g=Math.abs(n.__barWidth/2),p=n.__startPoint[s];Ry[0]=i,Ry[1]=o;for(var x=Ry[a],S=Ry[1-a],C=x-g,I=x+g,z=0,O=u.length/2;z<O;z++){var V=2*z,Y=u[V+a],G=u[V+s];if(C<=Y&&Y<=I&&(p<=G?p<=S&&S<=G:G<=S&&S<=p))return d[z]}return-1}(this,t.offsetX,t.offsetY);this.dataIndex=0<=e?e:null},30,!1);function Gw(t,e,n){var i,o="polar"===n.type;return i=o?n.getArea():n.grid.getRect(),o?{cx:i.cx,cy:i.cy,r0:t?i.r0:e.r0,r:t?i.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:i.x,y:t?i.y:e.y,width:t?e.width:i.width,height:t?i.height:e.height}}function qp(t,e,n){e=Fe(e)&&{coordDimensions:e}||En({},e);var i=t.getSource(),o=Ku(i,e),a=new qa(o,t);return a.initData(i,n),a}oa(Td.VISUAL.LAYOUT,kn(hw,"bar")),oa(Td.VISUAL.PROGRESSIVE_LAYOUT,fw),jo({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var Xb={updateSelectedMap:function(t){this._targetList=Fe(t)?t.slice():[],this._selectTargetMap=yn(t||[],function(e,n){return e.set(n.name,n),e},pe())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(i){i.selected=!1}),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}};function Yp(t,e){this.getAllNames=function(){var n=e();return n.mapArray(n.getName)},this.containName=function(n){return 0<=e().indexOfName(n)},this.indexOfName=function(n){return t().indexOfName(n)},this.getItemVisual=function(n,i){return t().getItemVisual(n,i)}}var By=Q0({type:"series.pie",init:function(t){By.superApply(this,"init",arguments),this.legendVisualProvider=new Yp(Rn(this.getData,this),Rn(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){By.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return qp(this,{coordDimensions:["value"],encodeDefaulter:kn(zm,this)})},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,o=t.count();i<o;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:ti(t,i,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=By.superCall(this,"getDataParams",t),i=[];return e.each(e.mapDimension("value"),function(o){i.push(o)}),n.percent=Wu(i,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){Vi(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function AM(t,e,n,i){var o=e.getData(),s=o.getName(this.dataIndex),u=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:s,seriesId:e.id}),o.each(function(d){zy(o.getItemGraphicEl(d),o.getItemLayout(d),e.isSelected(o.getName(d)),u,n)})}function zy(t,e,n,i,o){var a=(e.startAngle+e.endAngle)/2,s=n?i:0,u=[Math.cos(a)*s,Math.sin(a)*s];o?t.animate().when(200,{position:u}).start("bounceOut"):t.attr("position",u)}function Fy(t,e){_n.call(this);var n=new Kn({z2:2}),i=new rr,o=new rn;this.add(n),this.add(i),this.add(o),this.updateData(t,e,!0)}Fn(By,Xb);var Hy=Fy.prototype;function Vy(t,e){St(e,function(n){n.update="updateView",Cr(n,function(i,o){var a={};return o.eachComponent({mainType:"series",subType:t,query:i},function(s){s[n.method]&&s[n.method](i.name,i.dataIndex);var u=s.getData();u.each(function(d){var g=u.getName(d);a[g]=s.isSelected(g)||!1})}),{name:i.name,selected:a,seriesId:i.seriesId}})})}function Xp(t){return{getTargetSeries:function(e){var n={},i=pe();return e.eachSeriesByType(t,function(o){o.__paletteScope=n,i.set(o.uid,o)}),i},reset:function(e,n){var i=e.getRawData(),o={},a=e.getData();a.each(function(s){var u=a.getRawIndex(s);o[u]=s}),i.each(function(s){var u,d=o[s],g=null!=d&&a.getItemVisual(d,"color",!0),p=null!=d&&a.getItemVisual(d,"borderColor",!0);if(g&&p||(u=i.getItemModel(s)),!g){var x=u.get("itemStyle.color")||e.getColorFromPalette(i.getName(s)||s+"",e.__paletteScope,i.count());null!=d&&a.setItemVisual(d,"color",x)}if(!p){var S=u.get("itemStyle.borderColor");null!=d&&a.setItemVisual(d,"borderColor",S)}})}}}Hy.updateData=function(t,e,n){var i=this.childAt(0),o=this.childAt(1),a=this.childAt(2),s=t.hostModel,u=t.getItemModel(e),d=t.getItemLayout(e),g=En({},d);g.label=null;var p=s.getShallow("animationTypeUpdate");n?(i.setShape(g),"scale"===s.getShallow("animationType")?(i.shape.r=d.r0,qs(i,{shape:{r:d.r}},s,e)):(i.shape.endAngle=d.startAngle,Xi(i,{shape:{endAngle:d.endAngle}},s,e))):"expansion"===p?i.setShape(g):Xi(i,{shape:g},s,e);var x=t.getItemVisual(e,"color");i.useStyle(Dn({lineJoin:"bevel",fill:x},u.getModel("itemStyle").getItemStyle())),i.hoverStyle=u.getModel("emphasis.itemStyle").getItemStyle();var S=u.getShallow("cursor");S&&i.attr("cursor",S),zy(this,t.getItemLayout(e),s.isSelected(t.getName(e)),s.get("selectedOffset"),s.get("animation")),this._updateLabel(t,e,!n&&"transition"===p),this.highDownOnUpdate=s.get("silent")?null:function(I,z){var O=s.isAnimationEnabled()&&u.get("hoverAnimation");"emphasis"===z?(o.ignore=o.hoverIgnore,a.ignore=a.hoverIgnore,O&&(i.stopAnimation(!0),i.animateTo({shape:{r:d.r+s.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,a.ignore=a.normalIgnore,O&&(i.stopAnimation(!0),i.animateTo({shape:{r:d.r}},300,"elasticOut")))},Er(this)},Hy._updateLabel=function(t,e,n){var i=this.childAt(1),o=this.childAt(2),a=t.hostModel,s=t.getItemModel(e),u=t.getItemLayout(e).label,d=t.getItemVisual(e,"color");if(!u||isNaN(u.x)||isNaN(u.y))o.ignore=o.normalIgnore=o.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0;else{var g={points:u.linePoints||[[u.x,u.y],[u.x,u.y],[u.x,u.y]]},p={x:u.x,y:u.y};n?(Xi(i,{shape:g},a,e),Xi(o,{style:p},a,e)):(i.attr({shape:g}),o.attr({style:p})),o.attr({rotation:u.rotation,origin:[u.x,u.y],z2:10});var x=s.getModel("label"),S=s.getModel("emphasis.label"),C=s.getModel("labelLine"),I=s.getModel("emphasis.labelLine");d=t.getItemVisual(e,"color"),Fl(o.style,o.hoverStyle={},x,S,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:u.text,autoColor:d,useInsideStyle:!!u.inside},{textAlign:u.textAlign,textVerticalAlign:u.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),o.ignore=o.normalIgnore=!x.get("show"),o.hoverIgnore=!S.get("show"),i.ignore=i.normalIgnore=!C.get("show"),i.hoverIgnore=!I.get("show"),i.setStyle({stroke:d,opacity:t.getItemVisual(e,"opacity")}),i.setStyle(C.getModel("lineStyle").getLineStyle()),i.hoverStyle=I.getModel("lineStyle").getLineStyle();var z=C.get("smooth");z&&!0===z&&(z=.4),i.setShape({smooth:z})}},ki(Fy,_n),Ta.extend({type:"pie",init:function(){var t=new _n;this._sectorGroup=t},render:function(t,e,n,i){if(!i||i.from!==this.uid){var o=t.getData(),a=this._data,s=this.group,u=e.get("animation"),d=!a,g=t.get("animationType"),p=t.get("animationTypeUpdate"),x=kn(AM,this.uid,t,u,n),S=t.get("selectedMode");if(o.diff(a).add(function(V){var Y=new Fy(o,V);d&&"scale"!==g&&Y.eachChild(function(G){G.stopAnimation(!0)}),S&&Y.on("click",x),o.setItemGraphicEl(V,Y),s.add(Y)}).update(function(V,Y){var G=a.getItemGraphicEl(Y);d||"transition"===p||G.eachChild(function(tt){tt.stopAnimation(!0)}),G.updateData(o,V),G.off("click"),S&&G.on("click",x),s.add(G),o.setItemGraphicEl(V,G)}).remove(function(V){var Y=a.getItemGraphicEl(V);s.remove(Y)}).execute(),u&&0<o.count()&&(d?"scale"!==g:"transition"!==p)){for(var C=o.getItemLayout(0),I=1;isNaN(C.startAngle)&&I<o.count();++I)C=o.getItemLayout(I);var z=Math.max(n.getWidth(),n.getHeight())/2,O=Rn(s.removeClipPath,s);s.setClipPath(this._createClipPath(C.cx,C.cy,z,C.startAngle,C.clockwise,O,t,d))}else s.removeClipPath();this._data=o}},dispose:function(){},_createClipPath:function(t,e,n,i,o,a,s,u){var d=new Kn({shape:{cx:t,cy:e,r0:0,r:n,startAngle:i,endAngle:i,clockwise:o}});return(u?qs:Xi)(d,{shape:{endAngle:i+(o?1:-1)*Math.PI*2}},s,a),d},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,o=t[1]-n.cy,a=Math.sqrt(i*i+o*o);return a<=n.r&&a>=n.r0}}});var Uw=Math.PI/180;function Wy(t,e,n,i,o,a,s,u,d,g){function p(tt,Q,nt){for(var it=tt;it<Q&&!(t[it].y+nt>d+s);it++)if(t[it].y+=nt,tt<it&&it+1<Q&&t[it+1].y>t[it].y+t[it].height)return void x(it,nt/2);x(Q-1,nt/2)}function x(tt,Q){for(var nt=tt;0<=nt&&!(t[nt].y-Q<d)&&(t[nt].y-=Q,!(0<nt&&t[nt].y>t[nt-1].y+t[nt-1].height));nt--);}function S(tt,Q,nt,it,ct,vt){for(var _t=Q?Number.MAX_VALUE:0,At=0,Ot=tt.length;At<Ot;At++)if("none"===tt[At].labelAlignTo){var Bt=Math.abs(tt[At].y-it),Vt=tt[At].len,$t=tt[At].len2,Jt=Bt<ct+Vt?Math.sqrt((ct+Vt+$t)*(ct+Vt+$t)-Bt*Bt):Math.abs(tt[At].x-nt);Q&&_t<=Jt&&(Jt=_t-10),!Q&&Jt<=_t&&(Jt=_t+10),tt[At].x=nt+Jt*vt,_t=Jt}}t.sort(function(tt,Q){return tt.y-Q.y});for(var C,I=0,z=t.length,O=[],V=[],Y=0;Y<z;Y++)"outer"===t[Y].position&&"labelLine"===t[Y].labelAlignTo&&(t[Y].linePoints[1][0]+=t[Y].x-g,t[Y].x=g),(C=t[Y].y-I)<0&&p(Y,z,-C),I=t[Y].y+t[Y].height;for(s-I<0&&x(z-1,I-s),Y=0;Y<z;Y++)t[Y].y>=n?V.push(t[Y]):O.push(t[Y]);S(O,!1,e,n,i,o),S(V,!0,e,n,i,o)}function $b(t){return"center"===t.position}var Tv=2*Math.PI,Zb=Math.PI/180;function Dv(t){return{seriesType:t,reset:function(e,n){var i=n.findComponents({mainType:"legend"});if(i&&i.length){var o=e.getData();o.filterSelf(function(a){for(var s=o.getName(a),u=0;u<i.length;u++)if(!i[u].isSelected(s))return!1;return!0})}}}}Vy("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),jo(Xp("pie")),oa(kn(function(t,e,n,i){e.eachSeriesByType(t,function(o){var Jt,a=o.getData(),s=a.mapDimension("value"),u=(Jt=n,xi(o.getBoxLayoutParams(),{width:Jt.getWidth(),height:Jt.getHeight()})),d=o.get("center"),g=o.get("radius");Fe(g)||(g=[0,g]),Fe(d)||(d=[d,d]);var p=ln(u.width,n.getWidth()),x=ln(u.height,n.getHeight()),S=Math.min(p,x),C=ln(d[0],p)+u.x,I=ln(d[1],x)+u.y,z=ln(g[0],S/2),O=ln(g[1],S/2),V=-o.get("startAngle")*Zb,Y=o.get("minAngle")*Zb,G=0;a.each(s,function($t){isNaN($t)||G++});var tt=a.getSum(s),Q=Math.PI/(tt||G)*2,nt=o.get("clockwise"),it=o.get("roseType"),ct=o.get("stillShowZeroSum"),vt=a.getDataExtent(s);vt[0]=0;var _t=Tv,At=0,Ot=V,Bt=nt?1:-1;if(a.each(s,function($t,Jt){var Yt;if(isNaN($t))a.setItemLayout(Jt,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:nt,cx:C,cy:I,r0:z,r:it?NaN:O,viewRect:u});else{(Yt="area"!==it?0===tt&&ct?Q:$t*Q:Tv/G)<Y?_t-=Yt=Y:At+=$t;var ue=Ot+Bt*Yt;a.setItemLayout(Jt,{angle:Yt,startAngle:Ot,endAngle:ue,clockwise:nt,cx:C,cy:I,r0:z,r:it?no($t,vt,[z,O]):O,viewRect:u}),Ot=ue}}),_t<Tv&&G)if(_t<=.001){var Vt=Tv/G;a.each(s,function($t,Jt){if(!isNaN($t)){var Yt=a.getItemLayout(Jt);Yt.angle=Vt,Yt.startAngle=V+Bt*Jt*Vt,Yt.endAngle=V+Bt*(Jt+1)*Vt}})}else Q=_t/At,Ot=V,a.each(s,function($t,Jt){if(!isNaN($t)){var Yt=a.getItemLayout(Jt),ue=Yt.angle===Y?Y:$t*Q;Yt.startAngle=Ot,Yt.endAngle=Ot+Bt*ue,Ot+=Bt*ue}});!function jy(t,e,n,i,o,a){var s,u,d=t.getData(),g=[],p=!1,x=(t.get("minShowLabelAngle")||0)*Uw;d.each(function(S){var C=d.getItemLayout(S),I=d.getItemModel(S),z=I.getModel("label"),O=z.get("position")||I.get("emphasis.label.position"),V=z.get("distanceToLabelLine"),Y=z.get("alignTo"),G=ln(z.get("margin"),n),tt=z.get("bleedMargin"),Q=z.getFont(),nt=I.getModel("labelLine"),it=nt.get("length");it=ln(it,n);var ct=nt.get("length2");if(ct=ln(ct,n),!(C.angle<x)){var vt,_t,At,Ot,Bt=(C.startAngle+C.endAngle)/2,Vt=Math.cos(Bt),$t=Math.sin(Bt);s=C.cx,u=C.cy;var Jt,Yt=t.getFormattedLabel(S,"normal")||d.getName(S),ue=al(Yt,Q,Ot,"top"),Re="inside"===O||"inner"===O;if("center"===O)vt=C.cx,_t=C.cy,Ot="center";else{var ze=(Re?(C.r+C.r0)/2*Vt:C.r*Vt)+s,Ie=(Re?(C.r+C.r0)/2*$t:C.r*$t)+u;if(vt=ze+3*Vt,_t=Ie+3*$t,!Re){var Je=ze+Vt*(it+e-C.r),mn=Ie+$t*(it+e-C.r),hi=Je+(Vt<0?-1:1)*ct;vt="edge"===Y?Vt<0?o+G:o+n-G:hi+(Vt<0?-V:V),At=[[ze,Ie],[Je,mn],[hi,_t=mn]]}Ot=Re?"center":"edge"===Y?0<Vt?"right":"left":0<Vt?"left":"right"}var We=z.get("rotate");Jt="number"==typeof We?We*(Math.PI/180):We?Vt<0?-Bt+Math.PI:-Bt:0,p=!!Jt,C.label={x:vt,y:_t,position:O,height:ue.height,len:it,len2:ct,linePoints:At,textAlign:Ot,verticalAlign:"middle",rotation:Jt,inside:Re,labelDistance:V,labelAlignTo:Y,labelMargin:G,bleedMargin:tt,textRect:ue,text:Yt,font:Q},Re||g.push(C.label)}}),!p&&t.get("avoidLabelOverlap")&&function(S,C,I,z,O,V,Y,G){for(var tt=[],Q=[],nt=Number.MAX_VALUE,it=-Number.MAX_VALUE,ct=0;ct<S.length;ct++)$b(S[ct])||(S[ct].x<C?(nt=Math.min(nt,S[ct].x),tt.push(S[ct])):(it=Math.max(it,S[ct].x),Q.push(S[ct])));for(Wy(Q,C,I,z,1,0,V,0,G,it),Wy(tt,C,I,z,-1,0,V,0,G,nt),ct=0;ct<S.length;ct++){var vt=S[ct];if(!$b(vt)){var _t=vt.linePoints;if(_t){var At,Ot="edge"===vt.labelAlignTo,Bt=vt.textRect.width;(At=Ot?vt.x<C?_t[2][0]-vt.labelDistance-Y-vt.labelMargin:Y+O-vt.labelMargin-_t[2][0]-vt.labelDistance:vt.x<C?vt.x-Y-vt.bleedMargin:Y+O-vt.x-vt.bleedMargin)<vt.textRect.width&&(vt.text=Rc(vt.text,At,vt.font),"edge"===vt.labelAlignTo&&(Bt=Qo(vt.text,vt.font)));var Vt=_t[1][0]-_t[2][0];Ot?_t[2][0]=vt.x<C?Y+vt.labelMargin+Bt+vt.labelDistance:Y+O-vt.labelMargin-Bt-vt.labelDistance:(_t[2][0]=vt.x<C?vt.x+vt.labelDistance:vt.x-vt.labelDistance,_t[1][0]=_t[2][0]+Vt),_t[1][1]=_t[2][1]=vt.y}}}}(g,s,u,e,n,i,o,a)}(o,O,u.width,u.height,u.x,u.y)})},"pie")),$u(Dv("pie")),ra.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return fh(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var Kb=ia({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(t,e){var n=e.points,i=e.size,o=this.symbolProxy,a=o.shape;if(!((t.getContext?t.getContext():t)&&i[0]<4))for(var s=0;s<n.length;){var u=n[s++],d=n[s++];isNaN(u)||isNaN(d)||this.softClipShape&&!this.softClipShape.contain(u,d)||(a.x=u-i[0]/2,a.y=d-i[1]/2,a.width=i[0],a.height=i[1],o.buildPath(t,a,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,i=e.size;if(i[0]<4){this.setTransform(t);for(var o=0;o<n.length;){var a=n[o++],s=n[o++];isNaN(a)||isNaN(s)||this.softClipShape&&!this.softClipShape.contain(a,s)||t.fillRect(a-i[0]/2,s-i[1]/2,i[0],i[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,i=n.points,o=n.size,a=Math.max(o[0],4),s=Math.max(o[1],4),u=i.length/2-1;0<=u;u--){var d=2*u,g=i[d]-a/2,p=i[1+d]-s/2;if(g<=t&&p<=e&&t<=g+a&&e<=p+s)return u}return-1}});function zf(){this.group=new _n}var kc=zf.prototype;function Jb(t,e,n){$a.call(this,t,e,n),this.type="value",this.angle=0,this.name=""}function kd(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=kt(t.getIndicatorModels(),function(i,o){var a="indicator_"+o,s=new Jb(a,"log"===i.get("axisType")?new py:new Dd);return s.name=i.get("name"),(s.model=i).axis=s,this.dimensions.push(a),s},this),this.resize(t,n)}kc.isPersistent=function(){return!this._incremental},kc.updateData=function(t,e){this.group.removeAll();var n=new Kb({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},kc.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild(function(n){null!=n.startIndex&&(e=new Float32Array(e.buffer,4*n.startIndex*2,2*(n.endIndex-n.startIndex))),n.setShape("points",e)})}},kc.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),2e6<t.count()?(this._incremental||(this._incremental=new ss({silent:!0})),this.group.add(this._incremental)):this._incremental=null},kc.incrementalUpdate=function(t,e,n){var i;this._incremental?(i=new Kb,this._incremental.addDisplayable(i,!0)):((i=new Kb({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end})).incremental=!0,this.group.add(i)),i.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(i,e,!!this._incremental,n)},kc._setCommon=function(t,e,n,i){var o=e.hostModel;i=i||{};var a=e.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=i.clipShape||null,t.symbolProxy=Mc(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<4;t.useStyle(o.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var u=e.getVisual("color");u&&t.setColor(u),n||(t.seriesIndex=o.seriesIndex,t.on("mousemove",function(d){t.dataIndex=null;var g=t.findDataIndex(d.offsetX,d.offsetY);0<=g&&(t.dataIndex=g+(t.startIndex||0))}))},kc.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},kc._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},Zu({type:"scatter",render:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||1e4<i.count()||!this._symbolDraw.isPersistent())return{update:!0};var o=mv().reset(t);o.progress&&o.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,i=e.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new zf:new Ng,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),jo(Yh("scatter","circle")),oa(mv("scatter")),ki(Jb,$a),kd.prototype.getIndicatorAxes=function(){return this._indicatorAxes},kd.prototype.dataToPoint=function(t,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(t),e)},kd.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},kd.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var o,a=Math.atan2(-n,e),s=1/0,u=-1,d=0;d<this._indicatorAxes.length;d++){var g=this._indicatorAxes[d],p=Math.abs(a-g.angle);p<s&&(o=g,u=d,s=p)}return[u,+(o&&o.coordToData(i))]},kd.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),o=e.getHeight(),a=Math.min(i,o)/2;this.cx=ln(n[0],i),this.cy=ln(n[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");"string"!=typeof s&&"number"!=typeof s||(s=[0,s]),this.r0=ln(s[0],a),this.r=ln(s[1],a),St(this._indicatorAxes,function(u,d){u.setExtent(this.r0,this.r);var g=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;g=Math.atan2(Math.sin(g),Math.cos(g)),u.angle=g},this)},kd.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;St(n,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,u){if("radar"===s.get("coordinateSystem")&&t.getComponent("radar",s.get("radarIndex"))===i){var d=s.getData();St(n,function(g){g.scale.unionExtentFromData(d,d.mapDimension(g.dim))})}},this);var o=i.get("splitNumber");function a(s){var u=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),d=s/u;return 2===d?d=5:d*=2,d*u}St(n,function(s,u){var d=uv(s.scale,s.model).extent;Pf(s.scale,s.model);var g=s.model,p=s.scale,x=g.getMin(),S=g.getMax(),C=p.getInterval();if(null!=x&&null!=S)p.setExtent(+x,+S),p.setInterval((S-x)/o);else if(null!=x)for(;p.setExtent(+x,z=x+C*o),p.setInterval(C),C=a(C),z<d[1]&&isFinite(z)&&isFinite(d[1]););else if(null!=S)for(;p.setExtent(O=S-C*o,+S),p.setInterval(C),C=a(C),O>d[0]&&isFinite(O)&&isFinite(d[0]););else{var I=p.getTicks().length-1;o<I&&(C=a(C));var z,O=ga((z=Math.ceil(d[1]/C)*C)-C*o);p.setExtent(O,z),p.setInterval(C)}})},kd.dimensions=[],kd.create=function(t,e){var n=[];return t.eachComponent("radar",function(i){var o=new kd(i,t,e);n.push(o),i.coordinateSystem=o}),t.eachSeriesByType("radar",function(i){"radar"===i.get("coordinateSystem")&&(i.coordinateSystem=n[i.get("radarIndex")||0])}),n},Ca.register("radar",kd);var Og=Xh.valueAxis;function Av(t,e){return Dn({show:e},t)}pu({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),a=this.get("axisType"),s=this.get("axisLabel"),u=this.get("name"),d=this.get("name.show"),g=this.get("name.formatter"),p=this.get("nameGap"),x=this.get("triggerEvent"),S=kt(this.get("indicator")||[],function(C){null!=C.max&&0<C.max&&!C.min?C.min=0:null!=C.min&&C.min<0&&!C.max&&(C.max=0);var I=u;if(null!=C.color&&(I=Dn({color:C.color},u)),C=ei(fn(C),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:o,axisType:a,axisLabel:s,name:C.text,nameLocation:"end",nameGap:p,nameTextStyle:I,triggerEvent:x},!1),d||(C.name=""),"string"==typeof g){var z=C.name;C.name=g.replace("{value}",null!=z?z:"")}else"function"==typeof g&&(C.name=g(C.name,C));var O=En(new dr(C,null,this.ecModel),Pg);return O.mainType="radar",O.componentIndex=this.componentIndex,O},this);this.getIndicatorModels=function(){return S}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:ei({lineStyle:{color:"#bbb"}},Og.axisLine),axisLabel:Av(Og.axisLabel,!1),axisTick:Av(Og.axisTick,!1),axisType:"interval",splitLine:Av(Og.splitLine,!0),splitArea:Av(Og.splitArea,!0),indicator:[]}});var Gy=["axisLine","axisTickLabel","axisName"];Oa({type:"radar",render:function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem;St(kt(e.getIndicatorAxes(),function(n){return new Wl(n.model,{position:[e.cx,e.cy],rotation:n.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(n){St(Gy,n.add,n),this.group.add(n.getGroup())},this)},_buildSplitLineAndArea:function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var i=t.get("shape"),o=t.getModel("splitLine"),a=t.getModel("splitArea"),s=o.getModel("lineStyle"),u=a.getModel("areaStyle"),d=o.get("show"),g=a.get("show"),p=s.get("color"),x=u.get("color");p=Fe(p)?p:[p],x=Fe(x)?x:[x];var S=[],C=[];if("circle"===i)for(var I=n[0].getTicksCoords(),z=e.cx,O=e.cy,V=0;V<I.length;V++)d&&S[vt(S,p,V)].push(new un({shape:{cx:z,cy:O,r:I[V].coord}})),g&&V<I.length-1&&C[vt(C,x,V)].push(new oi({shape:{cx:z,cy:O,r0:I[V].coord,r:I[V+1].coord}}));else{var Y,G=kt(n,function(_t,At){var Ot=_t.getTicksCoords();return Y=null==Y?Ot.length-1:Math.min(Ot.length-1,Y),kt(Ot,function(Bt){return e.coordToPoint(Bt.coord,At)})}),tt=[];for(V=0;V<=Y;V++){for(var Q=[],nt=0;nt<n.length;nt++)Q.push(G[nt][V]);Q[0]&&Q.push(Q[0].slice()),d&&S[vt(S,p,V)].push(new rr({shape:{points:Q}})),g&&tt&&C[vt(C,x,V-1)].push(new nr({shape:{points:Q.concat(tt)}})),tt=Q.slice().reverse()}}var it=s.getLineStyle(),ct=u.getAreaStyle();St(C,function(_t,At){this.group.add(zl(_t,{style:Dn({stroke:"none",fill:x[At%x.length]},ct),silent:!0}))},this),St(S,function(_t,At){this.group.add(zl(_t,{style:Dn({fill:"none",stroke:p[At%p.length]},it),silent:!0}))},this)}function vt(_t,At,Ot){var Bt=Ot%At.length;return _t[Bt]=_t[Bt]||[],Bt}}});var kv=ra.extend({type:"series.radar",dependencies:["radar"],init:function(t){kv.superApply(this,"init",arguments),this.legendVisualProvider=new Yp(Rn(this.getData,this),Rn(this.getRawData,this))},getInitialData:function(t,e){return qp(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t,e,n,i){var o=this.getData(),a=this.coordinateSystem.getIndicatorAxes(),s=this.getData().getName(t),u="html"===i?"<br/>":"\n";return Vr(""===s?this.name:s)+u+kt(a,function(d,g){var p=o.get(o.mapDimension(d.dim),t);return Vr(d.name+" : "+p)}).join(u)},getTooltipPosition:function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(kt(n.dimensions,function(u){return e.mapDimension(u)}),t,!0),o=0,a=i.length;o<a;o++)if(!isNaN(i[o])){var s=n.getIndicatorAxes();return n.coordToPoint(s[o].dataToCoord(i[o]),o)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function Uy(t){return!isNaN(t[0])&&!isNaN(t[1])}function Qb(t){return[t.cx,t.cy]}Zu({type:"radar",render:function(t,e,n){var i=t.coordinateSystem,o=this.group,a=t.getData(),s=this._data;function u(p,x){var V,S=p.getItemVisual(x,"symbol")||"circle",C=p.getItemVisual(x,"color");if("none"!==S){var I=(Fe(V=p.getItemVisual(x,"symbolSize"))||(V=[+V,+V]),V),z=Mc(S,-1,-1,2,2,C),O=p.getItemVisual(x,"symbolRotate")||0;return z.attr({style:{strokeNoScale:!0},z2:100,scale:[I[0]/2,I[1]/2],rotation:O*Math.PI/180||0}),z}}function d(p,x,S,C,I,z){S.removeAll();for(var O=0;O<x.length-1;O++){var V=u(C,I);V&&(p[V.__dimIdx=O]?(V.attr("position",p[O]),yl[z?"initProps":"updateProps"](V,{position:x[O]},t,I)):V.attr("position",x[O]),S.add(V))}}function g(p){return kt(p,function(x){return[i.cx,i.cy]})}a.diff(s).add(function(p){var x=a.getItemLayout(p);if(x){var S=new nr,C=new rr,I={shape:{points:x}};S.shape.points=g(x),C.shape.points=g(x),qs(S,I,t,p),qs(C,I,t,p);var z=new _n,O=new _n;z.add(C),z.add(S),z.add(O),d(C.shape.points,x,O,a,p,!0),a.setItemGraphicEl(p,z)}}).update(function(p,x){var S=s.getItemGraphicEl(x),C=S.childAt(0),I=S.childAt(1),z=S.childAt(2),O={shape:{points:a.getItemLayout(p)}};O.shape.points&&(d(C.shape.points,O.shape.points,z,a,p,!1),Xi(C,O,t),Xi(I,O,t),a.setItemGraphicEl(p,S))}).remove(function(p){o.remove(s.getItemGraphicEl(p))}).execute(),a.eachItemGraphicEl(function(p,x){var S=a.getItemModel(x),C=p.childAt(0),I=p.childAt(1),z=p.childAt(2),O=a.getItemVisual(x,"color");o.add(p),C.useStyle(Dn(S.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:O})),C.hoverStyle=S.getModel("emphasis.lineStyle").getLineStyle();var V=S.getModel("areaStyle"),Y=S.getModel("emphasis.areaStyle"),G=V.isEmpty()&&V.parentModel.isEmpty(),tt=Y.isEmpty()&&Y.parentModel.isEmpty();tt=tt&&G,I.ignore=G,I.useStyle(Dn(V.getAreaStyle(),{fill:O,opacity:.7})),I.hoverStyle=Y.getAreaStyle();var Q=S.getModel("itemStyle").getItemStyle(["color"]),nt=S.getModel("emphasis.itemStyle").getItemStyle(),it=S.getModel("label"),ct=S.getModel("emphasis.label");z.eachChild(function(vt){vt.setStyle(Q),vt.hoverStyle=fn(nt);var _t=a.get(a.dimensions[vt.__dimIdx],x);null!=_t&&!isNaN(_t)||(_t=""),Fl(vt.style,vt.hoverStyle,it,ct,{labelFetcher:a.hostModel,labelDataIndex:x,labelDimIndex:vt.__dimIdx,defaultText:_t,autoColor:O,isRectText:!0})}),p.highDownOnUpdate=function(vt,_t){I.attr("ignore","emphasis"===_t?tt:G)},Er(p)}),this._data=a},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),jo(Xp("radar")),jo(Yh("radar","circle")),oa(function(t){t.eachSeriesByType("radar",function(e){var n=e.getData(),i=[],o=e.coordinateSystem;if(o){var a=o.getIndicatorAxes();St(a,function(s,u){n.each(n.mapDimension(a[u].dim),function(d,g){i[g]=i[g]||[];var p=o.dataToPoint(d,u);i[g][u]=Uy(p)?p:Qb(o)})}),n.each(function(s){var u=gr(i[s],function(d){return Uy(d)})||Qb(o);i[s].push(u.slice()),n.setItemLayout(s,i[s])})}})}),$u(Dv("radar")),wl(function(t){var e=t.polar;if(e){Fe(e)||(e=[e]);var n=[];St(e,function(i,o){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),t.radar=t.radar||[],Fe(t.radar)||(t.radar=[t.radar]),t.radar.push(i)):n.push(i)}),t.polar=n}St(t.series,function(i){i&&"radar"===i.type&&i.polarIndex&&(i.radarIndex=i.polarIndex)})});for(var Bg=[126,25],$h=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Ff=0;Ff<$h.length;Ff++)for(var zg=0;zg<$h[Ff].length;zg++)$h[Ff][zg][0]/=10.5,$h[Ff][zg][1]/=-14,$h[Ff][zg][0]+=Bg[0],$h[Ff][zg][1]+=Bg[1];var t1={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},qw={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Yw=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Xw=or(),$w={load:function(t,e,n){var i=Xw(e).parsed;if(i)return i;var o,u,a=e.specialAreas||{},s=e.geoJSON;try{o=s?yb(s,n):[]}catch(u){throw new Error("Invalid geoJson format\n"+u.message)}return"china"===(u=t)&&o.push(new hv("\u5357\u6d77\u8bf8\u5c9b",kt($h,function(g){return{type:"polygon",exterior:g}}),Bg)),St(o,function(u){var x,d=u.name;(function(p,x){if("china"===p){var S=t1[x.name];if(S){var C=x.center;C[0]+=S[0]/10.5,C[1]+=-S[1]/14}}})(t,u),function(p,x){if("world"===p){var S=qw[x.name];if(S){var C=x.center;C[0]=S[0],C[1]=S[1]}}}(t,u),x=u,"china"===t&&"\u53f0\u6e7e"===x.name&&x.geometries.push({type:"polygon",exterior:Yw[0]});var g=a[d];g&&u.transformTo(g.left,g.top,g.width,g.height)}),Xw(e).parsed={regions:o,boundingRect:function(u){for(var d,g=0;g<u.length;g++){var p=u[g].getBoundingRect();(d=d||p.clone()).union(p)}return d}(o)}}},$p=or();function Zw(t,e){var n,i,p,o=t.svgXML;try{Ei(null!=(i=(n=o&&(p=o,(new qm).parse(p,{ignoreViewBox:!0,ignoreRootClip:!0}))||{}).root))}catch(p){throw new Error("Invalid svg format\n"+p.message)}var a=n.width,s=n.height,u=n.viewBoxRect;if(e||(e=null==a||null==s?i.getBoundingRect():new Yi(0,0,0,0),null!=a&&(e.width=a),null!=s&&(e.height=s)),u){var d=Z_(u,e.width,e.height),g=i;(i=new _n).add(g),g.scale=d.scale,g.position=d.position}return i.setClipPath(new Ji({shape:e.plain()})),{root:i,boundingRect:e}}var Kw={geoJSON:$w,svg:{load:function(t,e){var n=$p(e).originRoot;if(n)return{root:n,boundingRect:$p(e).boundingRect};var i=Zw(e);return $p(e).originRoot=i.root,$p(e).boundingRect=i.boundingRect,i},makeGraphic:function(t,e,n){var i=$p(e),o=i.rootMap||(i.rootMap=pe()),a=o.get(n);if(a)return a;var s=i.originRoot;return a=i.originRootHostKey?Zw(e,i.boundingRect).root:(i.originRootHostKey=n,s),o.set(n,a)},removeGraphic:function(t,e,n){var i=$p(e),o=i.rootMap;o&&o.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}}},Iv={load:function(t,e,n){var i,o=[],a=pe(),s=pe();return St(Qw(t),function(u){var d=Kw[u.type].load(t,u,n);St(d.regions,function(p){var x=p.name;e&&e.hasOwnProperty(x)&&(p=p.cloneShallow(x=e[x])),o.push(p),a.set(x,p),s.set(x,p.center)});var g=d.boundingRect;g&&(i?i.union(g):i=g.clone())}),{regions:o,regionsMap:a,nameCoordMap:s,boundingRect:i||new Yi(0,0,0,0)}},makeGraphic:Jw("makeGraphic"),removeGraphic:Jw("removeGraphic")};function Jw(t){return function(e,n){var i=Qw(e),o=[];return St(i,function(a){var s=Kw[a.type][t];s&&o.push(s(e,a,n))}),o}}function Qw(t){return W0_retrieveMap(t)||[]}Fn(ra.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(t){for(var e=qp(this,{coordDimensions:["value"],encodeDefaulter:kn(zm,this)}),n=e.mapDimension("value"),i=pe(),o=[],a=[],s=0,u=e.count();s<u;s++){var d=e.getName(s);i.set(d,!0),o.push({name:d,value:e.get(n,s),selected:ti(e,s,"selected")})}return St(Iv.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(g){var p=g.name;i.get(p)||(o.push({name:p}),a.push(p))}),this.updateSelectedMap(o),e.appendValues([],a),e},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t,e,n,i){for(var o=this.getData(),a=Uc(this.getRawValue(t)),s=o.getName(t),u=this.seriesGroup,d=[],g=0;g<u.length;g++){var p=u[g].originalData.indexOfName(s),x=o.mapDimension("value");isNaN(u[g].originalData.get(x,p))||d.push(Vr(u[g].name))}var S="html"===i?"<br/>":"\n";return d.join(", ")+S+Vr(s+" : "+a)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),Xb);var Kc="\0_ec_interaction_mutex";function e1(t,e){return!!qy(t)[e]}function qy(t){return t[Kc]||(t[Kc]={})}function Id(t){this._zr=t,this._opt={};var e=Rn,n=e(kM,this),i=e(IM,this),o=e(Yy,this),a=e(Cl,this),s=e(tS,this);Ai.call(this),this.setPointerChecker=function(u){this.pointerChecker=u},this.enable=function(u,d){this.disable(),this._opt=Dn(fn(d)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==u&&(u=!0),!0!==u&&"move"!==u&&"pan"!==u||(t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",o)),!0!==u&&"scale"!==u&&"zoom"!==u||(t.on("mousewheel",a),t.on("pinch",s))},this.disable=function(){t.off("mousedown",n),t.off("mousemove",i),t.off("mouseup",o),t.off("mousewheel",a),t.off("pinch",s)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function kM(t){if(!(Za(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}}function IM(t){if(this._dragging&&Xy("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!e1(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,o=this._y,a=e-i,s=n-o;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&vo(t.event),eS(this,"pan","moveOnMouseMove",t,{dx:a,dy:s,oldX:i,oldY:o,newX:e,newY:n})}}function Yy(t){Za(t)||(this._dragging=!1)}function Cl(t){var e=Xy("zoomOnMouseWheel",t,this._opt),n=Xy("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,o=Math.abs(i),a=t.offsetX,s=t.offsetY;if(0!==i&&(e||n)){if(e){var u=3<o?1.4:1<o?1.2:1.1;n1(this,"zoom","zoomOnMouseWheel",t,{scale:0<i?u:1/u,originX:a,originY:s})}if(n){var d=Math.abs(i);n1(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(0<i?1:-1)*(3<d?.4:1<d?.15:.05),originX:a,originY:s})}}}function tS(t){e1(this._zr,"globalPan")||n1(this,"zoom",null,t,{scale:1<t.pinchScale?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY})}function n1(t,e,n,i,o){t.pointerChecker&&t.pointerChecker(i,o.originX,o.originY)&&(vo(i.event),eS(t,e,n,i,o))}function eS(t,e,n,i,o){o.isAvailableBehavior=Rn(Xy,null,n,i),t.trigger(e,o)}function Xy(t,e,n){var i=n[t];return!t||i&&(!bi(i)||e.event[i+"Key"])}function i1(t,e,n){var i=t.target,o=i.position;o[0]+=e,o[1]+=n,i.dirty()}function r1(t,e,n,i){var o=t.target,a=t.zoomLimit,s=o.position,u=o.scale,d=t.zoom=t.zoom||1;if(d*=e,a){var g=a.min||0;d=Math.max(Math.min(a.max||1/0,d),g)}var x=d/t.zoom;t.zoom=d,s[0]-=(n-s[0])*(x-1),s[1]-=(i-s[1])*(x-1),u[0]*=x,u[1]*=x,o.dirty()}Cr({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),Fn(Id,Ai);var nS={axisPointer:1,tooltip:1,brush:1};function Pv(t,e,n){var i=e.getComponentByElement(t.topTarget),o=i&&i.coordinateSystem;return i&&i!==n&&!nS[i.mainType]&&o&&o.model!==n}function iS(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function Zp(t,e){e.eachChild(function(n){St(n.__regions,function(i){n.trigger(t.isSelected(i.name)?"emphasis":"normal")})})}function Ev(t,e){var n=new _n;this.uid=vf("ec_map_draw"),this._controller=new Id(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,n.add(this._regionsGroup=new _n),n.add(this._backgroundGroup=new _n)}Ev.prototype={constructor:Ev,draw:function(t,e,n,i,o){var a="geo"===t.mainType,s=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},function(nt){s||nt.getHostGeoModel()!==t||(s=nt.getData())});var u=t.coordinateSystem;this._updateBackground(u);var d,g=this._regionsGroup,p=this.group,x=u.getTransformInfo(),S=!g.childAt(0)||o;if(S)p.transform=x.roamTransform,p.decomposeTransform(),p.dirty();else{var C=new xn;C.transform=x.roamTransform,C.decomposeTransform(),d=C.scale,Xi(p,{scale:C.scale,position:C.position},t)}var z=x.rawScale,O=x.rawPosition;g.removeAll();var nt,it,ct,vt,_t,V=["itemStyle"],Y=["emphasis","itemStyle"],G=["label"],tt=["emphasis","label"],Q=pe();St(u.regions,function(nt){var it=Q.get(nt.name)||Q.set(nt.name,new _n),ct=new lf({segmentIgnoreThreshold:1,shape:{paths:[]}});it.add(ct);var vt,_t=(We=t.getRegionModel(nt.name)||t).getModel(V),At=We.getModel(Y),Ot=iS(_t),Bt=iS(At),Vt=We.getModel(G),$t=We.getModel(tt);if(s){vt=s.indexOfName(nt.name);var Jt=s.getItemVisual(vt,"color",!0);Jt&&(Ot.fill=Jt)}function Yt(ai){return[ai[0]*z[0]+O[0],ai[1]*z[1]+O[1]]}St(nt.geometries,function(ai){if("polygon"===ai.type){for(var fi=[],Oi=0;Oi<ai.exterior.length;++Oi)fi.push(Yt(ai.exterior[Oi]));for(ct.shape.paths.push(new nr({segmentIgnoreThreshold:1,shape:{points:fi}})),Oi=0;Oi<(ai.interiors?ai.interiors.length:0);++Oi){for(var Ur=ai.interiors[Oi],Pr=(fi=[],0);Pr<Ur.length;++Pr)fi.push(Yt(Ur[Pr]));ct.shape.paths.push(new nr({segmentIgnoreThreshold:1,shape:{points:fi}}))}}}),ct.setStyle(Ot),ct.style.strokeNoScale=!0,ct.culling=!0;var ue=Vt.get("show"),Re=$t.get("show"),ze=s&&isNaN(s.get(s.mapDimension("value"),vt)),Ie=s&&s.getItemLayout(vt);if(a||ze&&(ue||Re)||Ie&&Ie.showLabel){var Je,mn=a?nt.name:vt;(!s||0<=vt)&&(Je=t);var hi=new rn({position:Yt(nt.center.slice()),scale:[1/p.scale[0],1/p.scale[1]],z2:10,silent:!0});Fl(hi.style,hi.hoverStyle={},Vt,$t,{labelFetcher:Je,labelDataIndex:mn,defaultText:nt.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!S&&Xi(hi,{scale:[1/d[0],1/d[1]]},t),it.add(hi)}if(s)s.setItemGraphicEl(vt,it);else{var We=t.getRegionModel(nt.name);ct.eventData={componentType:"geo",componentIndex:t.componentIndex,geoIndex:t.componentIndex,name:nt.name,region:We&&We.option||{}}}(it.__regions||(it.__regions=[])).push(nt),it.highDownSilentOnTouch=!!t.get("selectedMode"),Er(it,Bt),g.add(it)}),this._updateController(t,e,n),nt=this,it=t,vt=n,_t=i,(ct=g).off("click"),ct.off("mousedown"),it.get("selectedMode")&&(ct.on("mousedown",function(){nt._mouseDownFlag=!0}),ct.on("click",function(At){if(nt._mouseDownFlag){nt._mouseDownFlag=!1;for(var Ot=At.target;!Ot.__regions;)Ot=Ot.parent;if(Ot){var Bt={type:("geo"===it.mainType?"geo":"map")+"ToggleSelect",batch:kt(Ot.__regions,function(Vt){return{name:Vt.name,from:_t.uid}})};Bt[it.mainType+"Id"]=it.id,vt.dispatchAction(Bt),Zp(it,ct)}}})),Zp(t,g)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&Iv.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(t){var e=t.map;this._mapName!==e&&St(Iv.makeGraphic(e,this.uid),function(n){this._backgroundGroup.add(n)},this),this._mapName=e},_updateController:function(t,e,n){var i=t.coordinateSystem,o=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=i.getZoom(),o.enable(t.get("roam")||!1);var s=t.mainType;function u(){var d={type:"geoRoam",componentType:s};return d[s+"Id"]=t.id,d}o.off("pan").on("pan",function(d){this._mouseDownFlag=!1,i1(a,d.dx,d.dy),n.dispatchAction(En(u(),{dx:d.dx,dy:d.dy}))},this),o.off("zoom").on("zoom",function(d){if(this._mouseDownFlag=!1,r1(a,d.scale,d.originX,d.originY),n.dispatchAction(En(u(),{zoom:d.scale,originX:d.originX,originY:d.originY})),this._updateGroup){var g=this.group.scale;this._regionsGroup.traverse(function(p){"text"===p.type&&p.attr("scale",[1/g[0],1/g[1]])})}},this),o.setPointerChecker(function(d,g,p){return i.getViewRectAfterRoam().contain(g,p)&&!Pv(d,n,t)})}};var o1="__seriesMapHighDown",rS="__seriesMapCallKey";function oS(t){var e=this[o1];e&&e.recordVersion===this[rS]&&aS(e,t)}function aS(t,e){var n=t.circle,i=t.labelModel,o=t.hoverLabelModel,a=t.emphasisText,s=t.normalText;e?(n.style.extendFrom(Wo({},o,{text:o.get("show")?a:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Wo(n.style,i,{text:i.get("show")?s:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function $y(t,e,n){var i=t.getZoom(),o=t.getCenter(),a=e.zoom,s=t.dataToPoint(o);if(null!=e.dx&&null!=e.dy&&(s[0]-=e.dx,s[1]-=e.dy,o=t.pointToData(s),t.setCenter(o)),null!=a){if(n){var u=n.min||0;a=Math.max(Math.min(i*a,n.max||1/0),u)/i}t.scale[0]*=a,t.scale[1]*=a;var g=t.position,x=(e.originY-g[1])*(a-1);g[0]-=(e.originX-g[0])*(a-1),g[1]-=x,t.updateTransform(),o=t.pointToData(s),t.setCenter(o),t.setZoom(a*i)}return{center:t.getCenter(),zoom:t.getZoom()}}Zu({type:"map",render:function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id)(a=this._mapDraw)&&o.add(a.group);else if(t.needsDrawMap){var a=this._mapDraw||new Ev(n,!0);o.add(a.group),a.draw(t,e,n,this,i),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var i=t.originalData,o=this.group;i.each(i.mapDimension("value"),function(a,s){if(!isNaN(a)){var u=i.getItemLayout(s);if(u&&u.point){var d=u.point,g=u.offset,p=new un({style:{fill:t.getData().getVisual("color")},shape:{cx:d[0]+9*g,cy:d[1],r:3},silent:!0,z2:8+(g?0:2)});if(!g){var x=t.mainSeries.getData(),S=i.getName(s),C=x.indexOfName(S),I=i.getItemModel(s),z=I.getModel("label"),O=I.getModel("emphasis.label"),V=x.getItemGraphicEl(C),Y=_i(t.getFormattedLabel(C,"normal"),S),G=_i(t.getFormattedLabel(C,"emphasis"),Y),tt=V[o1],Q=Math.random();if(!tt){tt=V[o1]={};var nt=kn(oS,!0),it=kn(oS,!1);V.on("mouseover",nt).on("mouseout",it).on("emphasis",nt).on("normal",it)}En(tt,{recordVersion:V[rS]=Q,circle:p,labelModel:z,hoverLabelModel:O,emphasisText:G,normalText:Y}),aS(tt,!1)}o.add(p)}}})}}),Cr({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(i){var o=i.coordinateSystem;if("geo"===o.type){var a=$y(o,t,i.get("scaleLimit"));i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom),"series"===n&&St(i.seriesGroup,function(s){s.setCenter(a.center),s.setZoom(a.zoom)})}})});var sS=Wi;function Kp(){xn.call(this)}function Ds(t){this.name=t,xn.call(this),this._roamTransformable=new Kp,this._rawTransformable=new Kp}function a1(t,e,n,i){var o=n.seriesModel,a=o?o.coordinateSystem:null;return a===this?a[t](i):null}function Jp(t,e,n,i){Ds.call(this,t),this.map=e;var o=Iv.load(e,n);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=null==i||i,this.regions=o.regions,this._rect=o.boundingRect}function s1(t,e,n,i){var o=n.geoModel,a=n.seriesModel,s=o?o.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return s===this?s[t](i):null}function Qp(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],o=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(o[0])||isNaN(o[1])||this.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1])}var a,s=this.getBoundingRect(),u=t.get("layoutCenter"),d=t.get("layoutSize"),g=e.getWidth(),p=e.getHeight(),x=s.width/s.height*this.aspectScale,S=!1;if(u&&d&&(u=[ln(u[0],g),ln(u[1],p)],d=ln(d,Math.min(g,p)),isNaN(u[0])||isNaN(u[1])||isNaN(d)||(S=!0)),S){var C={};1<x?(C.width=d,C.height=d/x):(C.height=d,C.width=d*x),C.y=u[1]-C.height/2,C.x=u[0]-C.width/2}else(a=t.getBoxLayoutParams()).aspect=x,C=xi(a,{width:g,height:p});this.setViewRect(C.x,C.y,C.width,C.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function lS(t,e){St(e.get("geoCoord"),function(n,i){t.addGeoCoord(i,n)})}Fn(Kp,xn),Ds.prototype={constructor:Ds,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,i){return this._rect=new Yi(t,e,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,i){this.transformTo(t,e,n,i),this._viewRect=new Yi(t,e,n,i)},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),a=this._rawTransformable;a.transform=o.calculateTransform(new Yi(t,e,n,i)),a.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=Wi([],i,t),n=Wi([],n,t),e.origin=i,e.position=[n[0]-i[0],n[1]-i[1]],e.scale=[o,o],this._updateTransform()},_updateTransform:function(){var e=this._rawTransformable;(e.parent=this._roamTransformable).updateTransform(),e.updateTransform(),oe(this.transform||(this.transform=[]),e.transform||yt()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],Pe(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var t=this._roamTransformable.transform,e=this._rawTransformable;return{roamTransform:t?mo(t):yt(),rawScale:mo(e.scale),rawPosition:mo(e.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?sS(n,t,i):jt(n,t)},pointToData:function(t){var e=this.invTransform;return e?sS([],t,e):[t[0],t[1]]},convertToPixel:kn(a1,"dataToPoint"),convertFromPixel:kn(a1,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},Fn(Ds,xn),Jp.prototype={constructor:Jp,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),a=this._invertLongitute;o=o.clone(),a&&(o.y=-o.y-o.height);var s=this._rawTransformable;if(s.transform=o.calculateTransform(new Yi(t,e,n,i)),s.decomposeTransform(),a){var u=s.scale;u[1]=-u[1]}s.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return Ds.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:kn(s1,"dataToPoint"),convertFromPixel:kn(s1,"pointToData")},Fn(Jp,Ds);var uS={dimensions:Jp.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",function(o,a){var s=o.get("map"),u=o.get("aspectScale"),d=!0,g=W0_retrieveMap(s);g&&g[0]&&"svg"===g[0].type?(null==u&&(u=1),d=!1):null==u&&(u=.75);var p=new Jp(s+a,s,o.get("nameMap"),d);p.aspectScale=u,p.zoomLimit=o.get("scaleLimit"),n.push(p),lS(p,o),(o.coordinateSystem=p).model=o,p.resize=Qp,p.resize(o,e)}),t.eachSeries(function(o){if("geo"===o.get("coordinateSystem")){var a=o.get("geoIndex")||0;o.coordinateSystem=n[a]}});var i={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var a=o.getMapType();i[a]=i[a]||[],i[a].push(o)}}),St(i,function(o,a){var s=new Jp(a,a,Zt(kt(o,function(u){return u.get("nameMap")})));s.zoomLimit=pr.apply(null,kt(o,function(u){return u.get("scaleLimit")})),n.push(s),s.resize=Qp,s.aspectScale=o[0].get("aspectScale"),s.resize(o[0],e),St(o,function(u){lS(u.coordinateSystem=s,u)})}),n},getFilledRegions:function(t,e,n){for(var i=(t||[]).slice(),o=pe(),a=0;a<i.length;a++)o.set(i[a].name,i[a]);return St(Iv.load(e,n).regions,function(s){var u=s.name;o.get(u)||i.push({name:u})}),i}};J0("geo",uS),oa(function(t){var e={};t.eachSeriesByType("map",function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var o={};St(n.seriesGroup,function(s){var u=s.coordinateSystem,d=s.originalData;s.get("showLegendSymbol")&&t.getComponent("legend")&&d.each(d.mapDimension("value"),function(g,p){var x=d.getName(p),S=u.getRegion(x);if(S&&!isNaN(g)){var C=o[x]||0,I=u.dataToPoint(S.center);o[x]=C+1,d.setItemLayout(p,{point:I,offset:C})}})});var a=n.getData();a.each(function(s){var u=a.getName(s),d=a.getItemLayout(s)||{};d.showLabel=!o[u],a.setItemLayout(s,d)}),e[i]=!0}})}),jo(function(t){t.eachSeriesByType("map",function(e){var n=e.get("color"),i=e.getModel("itemStyle"),o=i.get("areaColor"),a=i.get("color")||n[e.seriesIndex%n.length];e.getData().setVisual({areaColor:o,color:a})})}),$u(Td.PROCESSOR.STATISTIC,function(t){var e={};t.eachSeriesByType("map",function(n){var i=n.getHostGeoModel(),o=i?"o"+i.id:"i"+n.getMapType();(e[o]=e[o]||[]).push(n)}),St(e,function(n,i){for(var o=function(s,u){var d={};return St(s,function(g){g.each(g.mapDimension("value"),function(p,x){var S="ec-"+g.getName(x);d[S]=d[S]||[],isNaN(p)||d[S].push(p)})}),s[0].map(s[0].mapDimension("value"),function(g,p){for(var S="ec-"+s[0].getName(p),C=0,I=1/0,z=-1/0,O=d[S].length,V=0;V<O;V++)I=Math.min(I,d[S][V]),z=Math.max(z,d[S][V]),C+=d[S][V];return 0===O?NaN:"min"===u?I:"max"===u?z:"average"===u?C/O:C})}(kt(n,function(s){return s.getData()}),n[0].get("mapValueCalculation")),a=0;a<n.length;a++)n[a].originalData=n[a].getData();for(a=0;a<n.length;a++)(n[a].seriesGroup=n)[a].needsDrawMap=0===a&&!n[a].getHostGeoModel(),n[a].setData(o.cloneShallow()),n[a].mainSeries=n[0]})}),wl(function(t){var e=[];St(t.series,function(n){n&&"map"===n.type&&(e.push(n),n.map=n.map||n.mapType,Dn(n,n.mapLocation))})}),Vy("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var tm=St,em="\0__link_datas",Nv="\0__link_mainData";function cS(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,dS(e,n,t),tm(n,function(i){tm(e.TRANSFERABLE_METHODS,function(o){i.wrapMethod(o,kn(l1,t))})}),e.wrapMethod("cloneShallow",kn(EM,t)),tm(e.CHANGABLE_METHODS,function(i){e.wrapMethod(i,kn(PM,t))}),Ei(n[e.dataType]===e)}function l1(t,e){if(function(i){return i[Nv]===i}(this)){var n=En({},this[em]);dS(n[this.dataType]=e,n,t)}else Zy(e,this.dataType,this[Nv],t);return e}function PM(t,e){return t.struct&&t.struct.update(this),e}function EM(t,e){return tm(e[em],function(n,i){n!==e&&Zy(n.cloneShallow(),i,e,t)}),e}function NM(t){var e=this[Nv];return null==t||null==e?e:e[em][t]}function dS(t,e,n){t[em]={},tm(e,function(i,o){Zy(i,o,t,n)})}function Zy(t,e,n,i){(n[em][e]=t)[Nv]=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=NM}function Rv(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e}function jl(t){this._nodes=[],this.hostModel=t}function hS(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,o=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){!function(s){for(var u=s.children,d=u.length,g=0,p=0;0<=--d;){var x=u[d];x.hierNode.prelim+=g,x.hierNode.modifier+=g,g+=x.hierNode.shift+(p+=x.hierNode.change)}}(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(t.hierNode.prelim=o.hierNode.prelim+e(t,o),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else o&&(t.hierNode.prelim=o.hierNode.prelim+e(t,o));t.parentNode.hierNode.defaultAncestor=function(s,u,d,g){if(u){for(var p=s,x=s,S=x.parentNode.children[0],C=u,I=p.hierNode.modifier,z=x.hierNode.modifier,O=S.hierNode.modifier,V=C.hierNode.modifier;C=u1(C),x=Lv(x),C&&x;){p=u1(p),S=Lv(S),p.hierNode.ancestor=s;var Y=C.hierNode.prelim+V-x.hierNode.prelim-z+g(C,x);0<Y&&(c1((G=C).hierNode.ancestor.parentNode===s.parentNode?G.hierNode.ancestor:d,s,Y),z+=Y,I+=Y),V+=C.hierNode.modifier,z+=x.hierNode.modifier,I+=p.hierNode.modifier,O+=S.hierNode.modifier}C&&!u1(p)&&(p.hierNode.thread=C,p.hierNode.modifier+=V-I),x&&!Lv(S)&&(S.hierNode.thread=x,S.hierNode.modifier+=z-O,d=s)}var G;return d}(t,o,t.parentNode.hierNode.defaultAncestor||i[0],e)}function fS(t){t.setLayout({x:t.hierNode.prelim+t.parentNode.hierNode.modifier},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function gS(t){return arguments.length?t:d1}function nm(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n}function u1(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function Lv(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function c1(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function d1(t,e){return t.parentNode===e.parentNode?1:2}Rv.prototype={constructor:Rv,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),bi(t=t||{})&&(t={order:t});var i,o=t.order||"preorder",a=this[t.attr||"children"];"preorder"===o&&(i=e.call(n,this));for(var s=0;!i&&s<a.length;s++)a[s].eachNode(t,e,n);"postorder"===o&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var o=n[e].getNodeById(t);if(o)return o}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var o=n[e].contains(t);if(o)return o}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},setVisual:function(t,e){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},jl.prototype={constructor:jl,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},jl.createTree=function(t,e,n){var i=new jl(e),o=[],a=1;(function d(g,p){var x=g.value;a=Math.max(a,Fe(x)?x.length:1),o.push(g);var S=new Rv(g.name,i);p?function Hf(t,e){t.parentNode!==e&&(e.children.push(t),t.parentNode=e)}(S,p):i.root=S,i._nodes.push(S);var C=g.children;if(C)for(var I=0;I<C.length;I++)d(C[I],S)})(t),i.root.updateDepthAndHeight(0);var s=Ku(o,{coordDimensions:["value"],dimensionsCount:a}),u=new qa(s,e);return u.initData(o),n&&n(u),cS({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},ra.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data},n=new dr(t.leaves||{},this,this.ecModel),i=jl.createTree(e,this,function(s){s.wrapMethod("getItemModel",function(u,d){var g=i.getNodeByDataIndex(d);return g.children.length&&g.isExpand||(u.parentModel=n),u})}),o=0;i.eachNode("preorder",function(s){s.depth>o&&(o=s.depth)});var a=t.expandAndCollapse&&0<=t.initialTreeDepth?t.initialTreeDepth:o;return i.root.eachNode("preorder",function(s){var u=s.hostTree.data.getRawDataItem(s.dataIndex);s.isExpand=u&&null!=u.collapsed?!u.collapsed:s.depth<=a}),i.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],i=e.getNodeByDataIndex(t),o=i.getValue(),a=i.name;i&&i!==n;)a=i.parentNode.name+"."+a,i=i.parentNode;return Vr(a+(isNaN(o)||null==o?"":" : "+o))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var h1=ia({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.childPoints,i=n.length,o=e.parentPoint,a=n[0],s=n[i-1];if(1===i)return t.moveTo(o[0],o[1]),void t.lineTo(a[0],a[1]);var u=e.orient,d="TB"===u||"BT"===u?0:1,g=1-d,p=ln(e.forkPosition,1),x=[];x[d]=o[d],x[g]=o[g]+(s[g]-o[g])*p,t.moveTo(o[0],o[1]),t.lineTo(x[0],x[1]),t.moveTo(a[0],a[1]),x[d]=a[d],t.lineTo(x[0],x[1]),x[d]=s[d],t.lineTo(x[0],x[1]),t.lineTo(s[0],s[1]);for(var S=1;S<i-1;S++){var C=n[S];t.moveTo(C[0],C[1]),x[d]=C[d],t.lineTo(x[0],x[1])}}});function f1(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function pS(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),n.symbolInnerColor=!1===t.isExpand&&0!==t.children.length?n.itemStyle.fill:"#fff",n}function g1(t,e,n,i,o,a){var s=!n,u=t.tree.getNodeByDataIndex(e),d=u.getModel(),g=(a=pS(u,d,a),t.tree.root),p=u.parentNode===g?u:u.parentNode||u,x=t.getItemGraphicEl(p.dataIndex),S=p.getLayout(),C=x?{x:x.position[0],y:x.position[1],rawX:x.__radialOldRawX,rawY:x.__radialOldRawY}:S,I=u.getLayout();s?(n=new Ju(t,e,a)).attr("position",[C.x,C.y]):n.updateData(t,e,a),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=I.rawX,n.__radialRawY=I.rawY,i.add(n),t.setItemGraphicEl(e,n),Xi(n,{position:[I.x,I.y]},o);var z=n.getSymbolPath();if("radial"===a.layout){var O,V,Y=g.children[0],G=Y.getLayout(),tt=Y.children.length;if(I.x===G.x&&!0===u.isExpand){var Q={};Q.x=(Y.children[0].getLayout().x+Y.children[tt-1].getLayout().x)/2,Q.y=(Y.children[0].getLayout().y+Y.children[tt-1].getLayout().y)/2,(O=Math.atan2(Q.y-G.y,Q.x-G.x))<0&&(O=2*Math.PI+O),(V=Q.x<G.x)&&(O-=Math.PI)}else(O=Math.atan2(I.y-G.y,I.x-G.x))<0&&(O=2*Math.PI+O),0===u.children.length||0!==u.children.length&&!1===u.isExpand?(V=I.x<G.x)&&(O-=Math.PI):(V=I.x>G.x)||(O-=Math.PI);var nt=V?"left":"right",it=a.labelModel.get("rotate"),ct=it*(Math.PI/180);z.setStyle({textPosition:a.labelModel.get("position")||nt,textRotation:null==it?-O:ct,textOrigin:"center",verticalAlign:"middle"})}!function(vt,_t,At,Ot,Bt,Vt,$t,Jt,Yt){var ue=Yt.edgeShape,Re=Ot.__edge;if("curve"===ue)_t.parentNode&&_t.parentNode!==At&&Xi(Re=Re||(Ot.__edge=new sf({shape:Ky(Yt,Bt,Bt),style:Dn({opacity:0,strokeNoScale:!0},Yt.lineStyle)})),{shape:Ky(Yt,Vt,$t),style:Dn({opacity:1},Yt.lineStyle)},vt);else if("polyline"===ue&&"orthogonal"===Yt.layout&&_t!==At&&_t.children&&0!==_t.children.length&&!0===_t.isExpand){for(var ze=_t.children,Ie=[],Je=0;Je<ze.length;Je++){var mn=ze[Je].getLayout();Ie.push([mn.x,mn.y])}Xi(Re=Re||(Ot.__edge=new h1({shape:{parentPoint:[$t.x,$t.y],childPoints:[[$t.x,$t.y]],orient:Yt.orient,forkPosition:Yt.edgeForkPosition},style:Dn({opacity:0,strokeNoScale:!0},Yt.lineStyle)})),{shape:{parentPoint:[$t.x,$t.y],childPoints:Ie},style:Dn({opacity:1},Yt.lineStyle)},vt)}Jt.add(Re)}(o,u,g,n,C,S,I,i,a)}function p1(t,e,n,i,o,a){for(var s,x,u=t.tree.getNodeByDataIndex(e),d=t.tree.root,g=u.getModel(),p=(a=pS(u,g,a),u.parentNode===d?u:u.parentNode||u);null==(s=p.getLayout());)p=p.parentNode===d?p:p.parentNode||p;Xi(n,{position:[s.x+1,s.y+1]},o,function(){i.remove(n),t.setItemGraphicEl(e,null)}),n.fadeOut(null,{keepLabel:!0});var S=t.getItemGraphicEl(p.dataIndex).__edge,C=n.__edge||(!1===p.isExpand||1===p.children.length?S:void 0);x=a.edgeShape,C&&("curve"===x?Xi(C,{shape:Ky(a,s,s),style:{opacity:0}},o,function(){i.remove(C)}):"polyline"===x&&"orthogonal"===a.layout&&Xi(C,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},o,function(){i.remove(C)}))}function Ky(t,e,n){var i,o,a,s,u,d,g,p,x=t.orient;if("radial"!==t.layout)return u=e.x,g=e.y,d=n.x,p=n.y,"LR"!==x&&"RL"!==x||(i=u+(d-u)*t.curvature,o=g,a=d+(u-d)*t.curvature,s=p),"TB"!==x&&"BT"!==x||(i=u,o=g+(p-g)*t.curvature,a=d,s=p+(g-p)*t.curvature),{x1:u,y1:g,x2:d,y2:p,cpx1:i,cpy1:o,cpx2:a,cpy2:s};d=n.rawX,p=n.rawY;var S=nm(u=e.rawX,g=e.rawY),C=nm(u,g+(p-g)*t.curvature),I=nm(d,p+(g-p)*t.curvature),z=nm(d,p);return{x1:S.x,y1:S.y,x2:z.x,y2:z.y,cpx1:C.x,cpy1:C.y,cpx2:I.x,cpy2:I.y}}function im(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var o=n.children;if(o.length)for(var a=o.length-1;0<=a;a--)i.push(o[a])}}function Ov(t,e,n){if(t&&0<=zn(e,t.type)){var i=n.getData().tree.root,o=t.targetNode;if("string"==typeof o&&(o=i.getNodeById(o)),o&&i.contains(o))return{node:o};var a=t.targetNodeId;if(null!=a&&(o=i.getNodeById(a)))return{node:o}}}function mS(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function m1(t,e){return 0<=zn(mS(t),e)}function v1(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}function Jy(t){this.group=new _n,t.add(this.group)}function RM(t,e,n,i,o,a){var s=[[o?t:t-5,e],[t+n,e],[t+n,e+i],[o?t:t-5,e+i]];return a||s.splice(2,0,[t+n+5,e+i/2]),o||s.push([t,e+i/2]),s}function vS(t){var e=tx(t);return e.stroke=e.fill=e.lineWidth=null,e}Zu({type:"tree",init:function(t,e){this._mainGroup=new _n,this._controller=new Id(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(t,e,n,i){var o=t.getData(),a=t.layoutInfo,s=this._mainGroup,u=t.get("layout");s.attr("position","radial"===u?[a.x+a.width/2,a.y+a.height/2]:[a.x,a.y]),this._updateViewCoordSys(t,a,u),this._updateController(t,e,n);var d=this._data,g={expandAndCollapse:t.get("expandAndCollapse"),layout:u,edgeShape:t.get("edgeShape"),edgeForkPosition:t.get("edgeForkPosition"),orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};o.diff(d).add(function(p){f1(o,p)&&g1(o,p,null,s,t,g)}).update(function(p,x){var S=d.getItemGraphicEl(x);f1(o,p)?g1(o,p,S,s,t,g):S&&p1(d,x,S,s,t,g)}).remove(function(p){var x=d.getItemGraphicEl(p);x&&p1(d,p,x,s,t,g)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===g.expandAndCollapse&&o.eachItemGraphicEl(function(p,x){p.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:x})})}),this._data=o},_updateViewCoordSys:function(t){var e=t.getData(),n=[];e.each(function(d){var g=e.getItemLayout(d);!g||isNaN(g.x)||isNaN(g.y)||n.push([+g.x,+g.y])});var i=[],o=[];lu(n,i,o);var a=this._min,s=this._max;o[0]-i[0]==0&&(i[0]=a?a[0]:i[0]-1,o[0]=s?s[0]:o[0]+1),o[1]-i[1]==0&&(i[1]=a?a[1]:i[1]-1,o[1]=s?s[1]:o[1]+1);var u=t.coordinateSystem=new Ds;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1]),u.setCenter(t.get("center")),u.setZoom(t.get("zoom")),this.group.attr({position:u.position,scale:u.scale}),this._viewCoordSys=u,this._min=i,this._max=o},_updateController:function(t,e,n){var i=this._controller,o=this._controllerHost,a=this.group;i.setPointerChecker(function(s,u,d){var g=a.getBoundingRect();return g.applyTransform(a.transform),g.contain(u,d)&&!Pv(s,n,t)}),i.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(s){i1(o,s.dx,s.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:s.dx,dy:s.dy})},this).on("zoom",function(s){r1(o,s.scale,s.originX,s.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:s.scale,originX:s.originX,originY:s.originY}),this._updateNodeAndLinkScale(t)},this)},_updateNodeAndLinkScale:function(t){var e=t.getData(),n=this._getNodeGlobalScale(t),i=[n,n];e.eachItemGraphicEl(function(o,a){o.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scale,o=i&&i[0]||1;return((e.getZoom()-1)*n+1)/o},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),Cr({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),Cr({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=$y(n.coordinateSystem,t);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})}),jo(Yh("tree","circle")),oa(function(t,e){t.eachSeriesByType("tree",function(n){!function(i,o){var it,a=(it=o,xi(i.getBoxLayoutParams(),{width:it.getWidth(),height:it.getHeight()}));i.layoutInfo=a;var s=i.get("layout"),u=0,d=0,g=null;g="radial"===s?(u=2*Math.PI,d=Math.min(a.height,a.width)/2,gS(function(nt,it){return(nt.parentNode===it.parentNode?1:2)/nt.depth})):(u=a.width,d=a.height,gS());var p=i.getData().tree.root,x=p.children[0];if(x){(function(nt){nt.hierNode={defaultAncestor:null,ancestor:nt,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var it,ct,vt=[nt];it=vt.pop();)if(ct=it.children,it.isExpand&&ct.length)for(var _t=ct.length-1;0<=_t;_t--){var At=ct[_t];At.hierNode={defaultAncestor:null,ancestor:At,prelim:0,modifier:0,change:0,shift:0,i:_t,thread:null},vt.push(At)}})(p),function(nt,it,ct){for(var vt,_t=[nt],At=[];vt=_t.pop();)if(At.push(vt),vt.isExpand){var Ot=vt.children;if(Ot.length)for(var Bt=0;Bt<Ot.length;Bt++)_t.push(Ot[Bt])}for(;vt=At.pop();)it(vt,ct)}(x,hS,g),p.hierNode.modifier=-x.hierNode.prelim,im(x,fS);var S=x,C=x,I=x;im(x,function(nt){var it=nt.getLayout().x;it<S.getLayout().x&&(S=nt),it>C.getLayout().x&&(C=nt),nt.depth>I.depth&&(I=nt)});var z=S===C?1:g(S,C)/2,O=z-S.getLayout().x,V=0,Y=0,G=0,tt=0;if("radial"===s)V=u/(C.getLayout().x+z+O),Y=d/(I.depth-1||1),im(x,function(nt){var it=nm(G=(nt.getLayout().x+O)*V,tt=(nt.depth-1)*Y);nt.setLayout({x:it.x,y:it.y,rawX:G,rawY:tt},!0)});else{var Q=i.getOrient();"RL"===Q||"LR"===Q?(Y=d/(C.getLayout().x+z+O),V=u/(I.depth-1||1),im(x,function(nt){tt=(nt.getLayout().x+O)*Y,nt.setLayout({x:G="LR"===Q?(nt.depth-1)*V:u-(nt.depth-1)*V,y:tt},!0)})):"TB"!==Q&&"BT"!==Q||(V=u/(C.getLayout().x+z+O),Y=d/(I.depth-1||1),im(x,function(nt){G=(nt.getLayout().x+O)*V,nt.setLayout({x:G,y:tt="TB"===Q?(nt.depth-1)*Y:d-(nt.depth-1)*Y},!0)}))}}}(n,e)})}),ra.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var n={name:t.name,children:t.data};!function u(d){var g=0;St(d.children,function(x){u(x);var S=x.value;Fe(S)&&(S=S[0]),g+=S});var p=d.value;Fe(p)&&(p=p[0]),null!=p&&!isNaN(p)||(p=g),p<0&&(p=0),Fe(d.value)?d.value[0]=p:d.value=p}(n);var i=t.levels||[],o=new dr({itemStyle:this.designatedVisualItemStyle={}},this,e),a=kt((i=t.levels=function(u,d){var g,p=d.get("color");if(p)return St(u=u||[],function(x){var S=new dr(x),C=S.get("color");(S.get("itemStyle.color")||C&&"none"!==C)&&(g=!0)}),!g&&((u[0]||(u[0]={})).color=p.slice()),u}(i,e))||[],function(u){return new dr(u,o,e)},this),s=jl.createTree(n,this,function(u){u.wrapMethod("getItemModel",function(d,g){var p=s.getNodeByDataIndex(g);return d.parentModel=a[p.depth]||o,d})});return s.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=Fe(n)?Uc(n[0]):Uc(n);return Vr(e.getName(t)+": "+i)},getDataParams:function(t){var e=ra.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=v1(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},En(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=pe(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}}),Jy.prototype={constructor:Jy,render:function(t,e,n,i){var o=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),o.get("show")&&n){var s=o.getModel("itemStyle"),u=s.getModel("textStyle"),d={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,d,u),this._renderContent(t,d,s,u,i),fu(a,d.pos,d.box)}},_prepare:function(t,e,n){for(var i=t;i;i=i.parentNode){var o=i.getModel().get("name"),a=n.getTextRect(o),s=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=s+8,e.renderList.push({node:i,text:o,width:s})}},_renderContent:function(t,e,n,i,o){for(var a,s,u=0,d=e.emptyItemWidth,g=t.get("breadcrumb.height"),p=(Q=void 0,void 0,void 0,ct=void 0,vt=void 0,_t=void 0,At=void 0,it=(tt=e.box).height,ct=ln((G=e.pos).x,nt=tt.width),vt=ln(G.y,it),_t=ln(G.x2,nt),At=ln(G.y2,it),(isNaN(ct)||isNaN(parseFloat(G.x)))&&(ct=0),(isNaN(_t)||isNaN(parseFloat(G.x2)))&&(_t=nt),(isNaN(vt)||isNaN(parseFloat(G.y)))&&(vt=0),(isNaN(At)||isNaN(parseFloat(G.y2)))&&(At=it),Q=ju(Q||0),{width:Math.max(_t-ct-Q[1]-Q[3],0),height:Math.max(At-vt-Q[0]-Q[2],0)}),x=e.totalWidth,S=e.renderList,C=S.length-1;0<=C;C--){var I=S[C],z=I.node,O=I.width,V=I.text;x>p.width&&(x-=O-d,O=d,V=null);var Y=new nr({shape:{points:RM(u,0,O,g,C===S.length-1,0===C)},style:Dn(n.getItemStyle(),{lineJoin:"bevel",text:V,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:kn(o,z)});this.group.add(Y),Y.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(a=t).componentIndex,seriesIndex:a.componentIndex,seriesName:a.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(s=z)&&s.dataIndex,name:s&&s.name},treePathInfo:s&&v1(s,a)},u+=O+8}var G,tt,Q,nt,it,ct,vt,_t,At},remove:function(){this.group.removeAll()}};var Qy=Rn,yS=_n,xS=Ji,Pd=St,bS=["label"],_S=["emphasis","label"],wS=["upperLabel"],Bv=["emphasis","upperLabel"],tx=ho([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function CS(t,e,n,i,o,a,s,u,d,g){if(s){var p=s.getLayout(),x=t.getData();if(x.setItemGraphicEl(s.dataIndex,null),p&&p.isInView){var S=p.width,C=p.height,I=p.borderWidth,z=p.invisible,O=s.getRawIndex(),V=u&&u.getRawIndex(),Y=s.viewChildren,G=p.upperHeight,tt=Y&&Y.length,Q=s.getModel("itemStyle"),nt=s.getModel("emphasis.itemStyle"),it=Vt("nodeGroup",yS);if(it){if(d.add(it),it.attr("position",[p.x||0,p.y||0]),it.__tmNodeWidth=S,it.__tmNodeHeight=C,p.isAboveViewRoot)return it;var ct=s.getModel(),vt=Vt("background",xS,g,1);if(vt&&function($t,Jt,Yt){if(Jt.dataIndex=s.dataIndex,Jt.seriesIndex=t.seriesIndex,Jt.setShape({x:0,y:0,width:S,height:C}),z)At(Jt);else{Jt.invisible=!1;var ue=s.getVisual("borderColor",!0),Re=nt.get("borderColor"),ze=vS(Q);ze.fill=ue;var Ie=tx(nt);if(Ie.fill=Re,Yt){var Je=S-2*I;Ot(ze,Ie,ue,Je,G,{x:I,y:0,width:Je,height:G})}else ze.text=Ie.text=null;Jt.setStyle(ze),df(Jt,Ie)}$t.add(Jt)}(it,vt,tt&&p.upperLabelHeight),tt)cp(it)&&du(it,!1),vt&&(du(vt,!0),x.setItemGraphicEl(s.dataIndex,vt));else{var _t=Vt("content",xS,g,2);_t&&function($t,Jt){Jt.dataIndex=s.dataIndex,Jt.seriesIndex=t.seriesIndex;var Yt=Math.max(S-2*I,0),ue=Math.max(C-2*I,0);if(Jt.culling=!0,Jt.setShape({x:I,y:I,width:Yt,height:ue}),z)At(Jt);else{Jt.invisible=!1;var Re=s.getVisual("color",!0),ze=vS(Q);ze.fill=Re;var Ie=tx(nt);Ot(ze,Ie,Re,Yt,ue),Jt.setStyle(ze),df(Jt,Ie)}$t.add(Jt)}(it,_t),vt&&cp(vt)&&du(vt,!1),du(it,!0),x.setItemGraphicEl(s.dataIndex,it)}return it}}}function At($t){$t.invisible||a.push($t)}function Ot($t,Jt,Yt,ue,Re,ze){var Ie=ct.get("name"),Je=ct.getModel(ze?wS:bS),mn=ct.getModel(ze?Bv:_S),hi=Je.getShallow("show");Fl($t,Jt,Je,mn,{defaultText:hi?Ie:null,autoColor:Yt,isRectText:!0,labelFetcher:t,labelDataIndex:s.dataIndex,labelProp:ze?"upperLabel":"label"}),Bt($t,ze,p),Bt(Jt,ze,p),ze&&($t.textRect=fn(ze)),$t.truncate=hi&&Je.get("ellipsis")?{outerWidth:ue,outerHeight:Re,minChar:2}:null}function Bt($t,Jt,Yt){var ue=$t.text;if(!Jt&&Yt.isLeafRoot&&null!=ue){var Re=t.get("drillDownIcon",!0);$t.text=Re?Re+" "+ue:ue}}function Vt($t,Jt,Yt,ue){var Je,mn,Re=null!=V&&n[$t][V],ze=o[$t];return Re?(n[$t][V]=null,Je=Re,mn=$t,(ze[O]={}).old="nodeGroup"===mn?Je.position.slice():En({},Je.shape)):z||((Re=new Jt({z:function(Ie,Je){var mn=10*Ie+Je;return(mn-1)/mn}(Yt,ue)})).__tmDepth=Yt,function(Ie,Je,mn){var hi=Ie[O]={},We=s.parentNode;if(We&&(!i||"drillDown"===i.direction)){var ai=0,fi=0,Oi=o.background[We.getRawIndex()];!i&&Oi&&Oi.old&&(ai=Oi.old.width,fi=Oi.old.height),hi.old="nodeGroup"===mn?[0,fi]:{x:ai,y:fi,width:0,height:0}}hi.fadein="nodeGroup"!==mn}(ze,0,Re.__tmStorageName=$t)),e[$t][O]=Re}}Zu({type:"treemap",init:function(t,e){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(t,e,n,i){if(!(zn(e.findComponents({mainType:"series",subType:"treemap",query:i}),t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var o=Ov(i,["treemapZoomToNode","treemapRootToNode"],t),a=i&&i.type,s=t.layoutInfo,u=!this._oldTree,d=this._storage,g="treemapRootToNode"===a&&o&&d?{rootNodeGroup:d.nodeGroup[o.node.getRawIndex()],direction:i.direction}:null,p=this._giveContainerGroup(s),x=this._doRender(p,t,g);u||a&&"treemapZoomToNode"!==a&&"treemapRootToNode"!==a?x.renderFinally():this._doAnimation(p,x,t,g),this._resetController(n),this._renderBreadcrumb(t,n,o)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new yS,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){var i=e.getData().tree,o=this._oldTree,a={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},u=this._storage,d=[],g=kn(CS,e,s,u,n,a,d);!function C(I,z,O,V,Y){function G(Q){return Q.getId()}function tt(Q,nt){var it=null!=Q?I[Q]:null,ct=null!=nt?z[nt]:null,vt=g(it,ct,O,Y);vt&&C(it&&it.viewChildren||[],ct&&ct.viewChildren||[],vt,V,Y+1)}V?Pd(z=I,function(Q,nt){Q.isRemoved()||tt(nt,nt)}):new $c(z,I,G,G).add(tt).update(tt).remove(kn(tt,null)).execute()}(i.root?[i.root]:[],o&&o.root?[o.root]:[],t,i===o||!o,0);var p,x,S=(x={nodeGroup:[],background:[],content:[]},(p=u)&&Pd(p,function(C,I){var z=x[I];Pd(C,function(O){O&&(z.push(O),O.__tmWillDelete=1)})}),x);return this._oldTree=i,this._storage=s,{lastsForAnimation:a,willDeleteEls:S,renderFinally:function(){Pd(S,function(C){Pd(C,function(I){I.parent&&I.parent.remove(I)})}),Pd(d,function(C){C.invisible=!0,C.dirty()})}}},_doAnimation:function(t,e,n,i){if(n.get("animation")){var o=n.get("animationDurationUpdate"),a=n.get("animationEasing"),s=(d=[],g={},{add:function(p,x,S,C,I){return bi(C)&&(I=C,C=0),!g[p.id]&&(g[p.id]=1,d.push({el:p,target:x,time:S,delay:C,easing:I}),!0)},done:function(p){return u=p,this},start:function(){for(var p=d.length,x=0,S=d.length;x<S;x++){var C=d[x];C.el.animateTo(C.target,C.time,C.delay,C.easing,I)}return this;function I(){--p||(d.length=0,g={},u&&u())}}});Pd(e.willDeleteEls,function(u,d){Pd(u,function(g,p){if(!g.invisible){var x,S=g.parent;if(i&&"drillDown"===i.direction)x=S===i.rootNodeGroup?{shape:{x:0,y:0,width:S.__tmNodeWidth,height:S.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var C=0,I=0;S.__tmWillDelete||(C=S.__tmNodeWidth/2,I=S.__tmNodeHeight/2),x="nodeGroup"===d?{position:[C,I],style:{opacity:0}}:{shape:{x:C,y:I,width:0,height:0},style:{opacity:0}}}x&&s.add(g,x,o,a)}})}),Pd(this._storage,function(u,d){Pd(u,function(g,p){var x=e.lastsForAnimation[d][p],S={};x&&("nodeGroup"===d?x.old&&(S.position=g.position.slice(),g.attr("position",x.old)):(x.old&&(S.shape=En({},g.shape),g.setShape(x.old)),x.fadein?(g.setStyle("opacity",0),S.style={opacity:1}):1!==g.style.opacity&&(S.style={opacity:1})),s.add(g,S,o,a))})},this),this._state="animating",s.done(Qy(function(){this._state="ready",e.renderFinally()},this)).start()}var u,d,g},_resetController:function(t){var e=this._controller;e||((e=this._controller=new Id(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",Qy(this._onPan,this)),e.on("zoom",Qy(this._onZoom,this)));var n=new Yi(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(i,o,a){return n.contain(o,a)})},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t){if("animating"!==this._state&&(3<Math.abs(t.dx)||3<Math.abs(t.dy))){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},_onZoom:function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var o=i.getLayout();if(!o)return;var a=new Yi(o.x,o.y,o.width,o.height),s=this.seriesModel.layoutInfo;e-=s.x,n-=s.y;var u=yt();fe(u,u,[-e,-n]),In(u,u,[t.scale,t.scale]),fe(u,u,[e,n]),a.applyTransform(u),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},_initEvents:function(t){t.on("click",function(e){if("ready"===this._state){var n=this.seriesModel.get("nodeClick",!0);if(n){var i=this.findTarget(e.offsetX,e.offsetY);if(i){var o=i.node;if(o.getLayout().isLeafRoot)this._rootToNode(i);else if("zoomToNode"===n)this._zoomToNode(i);else if("link"===n){var a=o.hostTree.data.getItemModel(o.dataIndex),s=a.get("link",!0),u=a.get("target",!0)||"blank";s&&fg(s,u)}}}}},this)},_renderBreadcrumb:function(t,e,n){n=n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||{node:t.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new Jy(this.group))).render(t,e,n.node,Qy(function(i){"animating"!==this._state&&(m1(t.getViewRoot(),i)?this._rootToNode({node:i}):this._zoomToNode({node:i}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var o=this._storage.background[i.getRawIndex()];if(o){var a=o.transformCoordToLocal(t,e),s=o.shape;if(!(s.x<=a[0]&&a[0]<=s.x+s.width&&s.y<=a[1]&&a[1]<=s.y+s.height))return!1;n={node:i,offsetX:a[0],offsetY:a[1]}}},this),n}});for(var ex=function(){},x1=["treemapZoomToNode","treemapRender","treemapMove"],nx=0;nx<x1.length;nx++)Cr({type:x1[nx],update:"updateView"},ex);Cr({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(n,i){var o=Ov(t,["treemapZoomToNode","treemapRootToNode"],n);if(o){var a=n.getViewRoot();a&&(t.direction=m1(a,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}})});var Fg=St,b1=Ln,Nr=function(t){var e=t.mappingMethod,n=t.type,i=this.option=fn(t);this.type=n,this.mappingMethod=e,this._normalizeData=MS[e];var o=zv[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._doMap=o._doMap[e],"piecewise"===e?(_1(i),function(a){var s=a.pieceList;a.hasSpecialVisual=!1,St(s,function(u,d){u.originIndex=d,null!=u.visual&&(a.hasSpecialVisual=!0)})}(i)):"category"===e?i.categories?function(a){var s=a.categories,u=a.visual,d=a.categoryMap={};if(Fg(s,function(x,S){d[x]=S}),!Fe(u)){var g=[];Ln(u)?Fg(u,function(x,S){var C=d[S];g[null!=C?C:-1]=x}):g[-1]=u,u=S1(a,g)}for(var p=s.length-1;0<=p;p--)null==u[p]&&(delete d[s[p]],s.pop())}(i):_1(i,!0):(Ei("linear"!==e||i.dataExtent),_1(i))};Nr.prototype={constructor:Nr,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return Rn(this._normalizeData,this)}};var zv=Nr.visualHandlers={color:{applyVisual:ix("color"),getColorMapper:function(){var t=this.option;return Rn("category"===t.mappingMethod?function(e,n){return n||(e=this._normalizeData(e)),rx.call(this,e)}:function(e,n,i){var o=!!i;return n||(e=this._normalizeData(e)),i=Su(e,t.parsedVisual,i),o?i:Es(i,"rgba")},this)},_doMap:{linear:function(t){return Es(Su(t,this.option.parsedVisual),"rgba")},category:rx,piecewise:function(t,e){var n=ax.call(this,e);return null==n&&(n=Es(Su(t,this.option.parsedVisual),"rgba")),n},fixed:Wf}},colorHue:Fv(function(t,e){return Ps(t,e)}),colorSaturation:Fv(function(t,e){return Ps(t,null,e)}),colorLightness:Fv(function(t,e){return Ps(t,null,null,e)}),colorAlpha:Fv(function(t,e){return Fa(t,e)}),opacity:{applyVisual:ix("opacity"),_doMap:ox([0,1])},liftZ:{applyVisual:ix("liftZ"),_doMap:{linear:Wf,category:Wf,piecewise:Wf,fixed:Wf}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);if(bi(i))n("symbol",i);else if(b1(i))for(var o in i)i.hasOwnProperty(o)&&n(o,i[o])},_doMap:{linear:w1,category:rx,piecewise:function(t,e){var n=ax.call(this,e);return null==n&&(n=w1.call(this,t)),n},fixed:Wf}},symbolSize:{applyVisual:ix("symbolSize"),_doMap:ox([0,1])}};function _1(t,e){var n=t.visual,i=[];Ln(n)?Fg(n,function(o){i.push(o)}):null!=n&&i.push(n),e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),S1(t,i)}function Fv(t){return{applyVisual:function(e,n,i){e=this.mapValueToVisual(e),i("color",t(n("color"),e))},_doMap:ox([0,1])}}function w1(t){var e=this.option.visual;return e[Math.round(no(t,[0,1],[0,e.length-1],!0))]||{}}function ix(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function rx(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function Wf(){return this.option.visual[0]}function ox(t){return{linear:function(e){return no(e,t,this.option.visual,!0)},category:rx,piecewise:function(e,n){var i=ax.call(this,n);return null==i&&(i=no(e,t,this.option.visual,!0)),i},fixed:Wf}}function ax(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=n[Nr.findPieceIndex(t,n)];if(i&&i.visual)return i.visual[this.type]}}function S1(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=kt(e,function(n){return sa(n)})),e}var MS={linear:function(t){return no(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=Nr.findPieceIndex(t,e,!0);if(null!=n)return no(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:_e};function sx(t,e,n){return t?e<=n:e<n}Nr.listVisualTypes=function(){var t=[];return St(zv,function(e,n){t.push(n)}),t},Nr.addVisualHandler=function(t,e){zv[t]=e},Nr.isValidType=function(t){return zv.hasOwnProperty(t)},Nr.eachVisual=function(t,e,n){Ln(t)?St(t,e,n):e.call(n,t)},Nr.mapVisual=function(t,e,n){var i,o=Fe(t)?[]:Ln(t)?{}:(i=!0,null);return Nr.eachVisual(t,function(a,s){var u=e.call(n,a,s);i?o=u:o[s]=u}),o},Nr.retrieveVisuals=function(t){var e,n={};return t&&Fg(zv,function(i,o){t.hasOwnProperty(o)&&(n[o]=t[o],e=!0)}),e?n:null},Nr.prepareVisualTypes=function(t){if(b1(t)){var e=[];Fg(t,function(n,i){e.push(i)}),t=e}else{if(!Fe(t))return[];t=t.slice()}return t.sort(function(n,i){return"color"===i&&"color"!==n&&0===n.indexOf("color")?1:-1}),t},Nr.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},Nr.findPieceIndex=function(t,e,n){for(var i,o=1/0,a=0,s=e.length;a<s;a++){var u=e[a].value;if(null!=u){if(u===t||"string"==typeof u&&u===t+"")return a;n&&x(u,a)}}for(a=0,s=e.length;a<s;a++){var d=e[a],g=d.interval,p=d.close;if(g){if(g[0]===-1/0){if(sx(p[1],t,g[1]))return a}else if(g[1]===1/0){if(sx(p[0],g[0],t))return a}else if(sx(p[0],g[0],t)&&sx(p[1],t,g[1]))return a;n&&x(g[0],a),n&&x(g[1],a)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function x(S,C){var I=Math.abs(S-t);I<o&&(o=I,i=C)}};var LM=Fe,BM={seriesType:"treemap",reset:function(t,e,n,i){var o=t.getData().tree.root;o.isRemoved()||function a(s,u,d,g){var p=s.getModel(),x=s.getLayout();if(x&&!x.invisible&&x.isInView){var O,Y,S=s.getModel("itemStyle"),C=function TS(t,e,n){var i=En({},e),o=n.designatedVisualItemStyle;return St(["color","colorAlpha","colorSaturation"],function(a){o[a]=e[a];var s=t.get(a);(o[a]=null)!=s&&(i[a]=s)}),i}(S,u,g),I=S.get("borderColor"),z=S.get("borderColorSaturation");null!=z&&(I=null!=(Y=O=DS(C))?Ps(Y,null,null,z):null),s.setVisual("borderColor",I);var G=s.viewChildren;if(G&&G.length){var tt=function zM(t,e,n,i,o,a){if(a&&a.length){var s=M1(e,"color")||null!=o.color&&"none"!==o.color&&(M1(e,"colorAlpha")||M1(e,"colorSaturation"));if(s){var u=e.get("visualMin"),d=e.get("visualMax"),g=n.dataExtent.slice();null!=u&&u<g[0]&&(g[0]=u),null!=d&&d>g[1]&&(g[1]=d);var p=e.get("colorMappingBy"),x={type:s.name,dataExtent:g,visual:s.range};"color"!==x.type||"index"!==p&&"id"!==p?x.mappingMethod="linear":(x.mappingMethod="category",x.loop=!0);var S=new Nr(x);return S.__drColorMappingBy=p,S}}}(0,p,x,0,C,G);St(G,function(Q,nt){if(Q.depth>=d.length||Q===d[Q.depth]){var it=function AS(t,e,n,i,o,a){var s=En({},e);if(o){var u=o.type,d="color"===u&&o.__drColorMappingBy,g="index"===d?i:"id"===d?a.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));s[u]=o.mapValueToVisual(g)}return s}(p,C,Q,nt,tt,g);a(Q,it,d,g)}})}else O=DS(C),s.setVisual("color",O)}}(o,{},t.getViewRoot().getAncestors(),t)}};function DS(t){var e=C1(t,"color");if(e){var n=C1(t,"colorAlpha"),i=C1(t,"colorSaturation");return i&&(e=Ps(e,null,null,i)),n&&(e=Fa(e,n)),e}}function C1(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function M1(t,e){var n=t.get(e);return LM(n)&&n.length?{name:e,range:n}:null}var Hv=Math.max,Vv=Math.min,T1=pr,D1=St,A1=["itemStyle","borderWidth"],kS=["itemStyle","gapWidth"],FM=["upperLabel","show"],HM=["upperLabel","height"],VM={seriesType:"treemap",reset:function(t,e,n,i){var o=n.getWidth(),a=n.getHeight(),s=t.option,u=xi(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),d=s.size||[],g=ln(T1(u.width,d[0]),o),p=ln(T1(u.height,d[1]),a),x=i&&i.type,S=Ov(i,["treemapZoomToNode","treemapRootToNode"],t),C="treemapRender"===x||"treemapMove"===x?i.rootRect:null,I=t.getViewRoot(),z=mS(I);if("treemapMove"!==x){var O="treemapZoomToNode"===x?function(Q,nt,it,ct,vt){var _t,At=(nt||{}).node,Ot=[ct,vt];if(!At||At===it)return Ot;for(var Bt=ct*vt,Vt=Bt*Q.option.zoomToNodeRatio;_t=At.parentNode;){for(var $t=0,Jt=_t.children,Yt=0,ue=Jt.length;Yt<ue;Yt++)$t+=Jt[Yt].getValue();var Re=At.getValue();if(0===Re)return Ot;Vt*=$t/Re;var ze=_t.getModel(),Ie=ze.get(A1);Vt+=4*Ie*Ie+(3*Ie+Math.max(Ie,rm(ze)))*Math.pow(Vt,.5),pp<Vt&&(Vt=pp),At=_t}Vt<Bt&&(Vt=Bt);var mn=Math.pow(Vt/Bt,.5);return[ct*mn,vt*mn]}(t,S,I,g,p):C?[C.width,C.height]:[g,p],V=s.sort;V&&"asc"!==V&&"desc"!==V&&(V="desc");var Y={squareRatio:s.squareRatio,sort:V,leafDepth:s.leafDepth};I.hostTree.clearLayouts();var G={x:0,y:0,width:O[0],height:O[1],area:O[0]*O[1]};I.setLayout(G),function Q(nt,it,ct,vt){var _t,At;if(!nt.isRemoved()){var Ot=nt.getLayout();_t=Ot.width,At=Ot.height;var Bt=(Re=nt.getModel()).get(A1),Vt=Re.get(kS)/2,$t=rm(Re),Jt=Math.max(Bt,$t),Yt=Bt-Vt,ue=Jt-Vt,Re=nt.getModel();nt.setLayout({borderWidth:Bt,upperHeight:Jt,upperLabelHeight:$t},!0);var ze=(_t=Hv(_t-2*Yt,0))*(At=Hv(At-Yt-ue,0)),Ie=function IS(t,e,n,i,o,a){var s=t.children||[],u=i.sort;"asc"!==u&&"desc"!==u&&(u=null);var d=null!=i.leafDepth&&i.leafDepth<=a;if(o&&!d)return t.viewChildren=[];!function(C,I){I&&C.sort(function(z,O){var V="asc"===I?z.getValue()-O.getValue():O.getValue()-z.getValue();return 0==V?"asc"===I?z.dataIndex-O.dataIndex:O.dataIndex-z.dataIndex:V})}(s=Mn(s,function(C){return!C.isRemoved()}),u);var g=function(C,I,z){for(var O=0,V=0,Y=I.length;V<Y;V++)O+=I[V].getValue();var G=C.get("visualDimension");if(I&&I.length)if("value"===G&&z)tt=[I[I.length-1].getValue(),I[0].getValue()],"asc"===z&&tt.reverse();else{var tt=[1/0,-1/0];D1(I,function(Q){var nt=Q.getValue(G);nt<tt[0]&&(tt[0]=nt),nt>tt[1]&&(tt[1]=nt)})}else tt=[NaN,NaN];return{sum:O,dataExtent:tt}}(e,s,u);if(0===g.sum)return t.viewChildren=[];if(g.sum=function(C,I,z,O,V){if(!O)return z;for(var Y=C.get("visibleMin"),G=V.length,tt=G,Q=G-1;0<=Q;Q--){var nt=V["asc"===O?G-Q-1:Q].getValue();nt/z*I<Y&&(tt=Q,z-=nt)}return V.splice("asc"===O?0:tt,G-tt),z}(e,n,g.sum,u,s),0===g.sum)return t.viewChildren=[];for(var p=0,x=s.length;p<x;p++){var S=s[p].getValue()/g.sum*n;s[p].setLayout({area:S})}return d&&(s.length&&t.setLayout({isLeafRoot:!0},!0),s.length=0),t.viewChildren=s,t.setLayout({dataExtent:g.dataExtent},!0),s}(nt,Re,ze,it,ct,vt);if(Ie.length){var Je={x:Yt,y:ue,width:_t,height:At},mn=Vv(_t,At),hi=1/0,We=[];We.area=0;for(var ai=0,fi=Ie.length;ai<fi;){var Oi=Ie[ai];We.push(Oi),We.area+=Oi.getLayout().area;var Ur=WM(We,mn,it.squareRatio);hi=Ur<=hi?(ai++,Ur):(We.area-=We.pop().getLayout().area,Zs(We,mn,Je,Vt,!1),mn=Vv(Je.width,Je.height),We.length=We.area=0,1/0)}if(We.length&&Zs(We,mn,Je,Vt,!0),!ct){var Pr=Re.get("childrenVisibleMin");null!=Pr&&ze<Pr&&(ct=!0)}for(ai=0,fi=Ie.length;ai<fi;ai++)Q(Ie[ai],it,ct,vt+1)}}}(I,Y,!1,0),G=I.getLayout(),D1(z,function(Q,nt){var it=(z[nt+1]||I).getValue();Q.setLayout(En({dataExtent:[it,it],borderWidth:0,upperHeight:0},G))})}var tt=t.getData().tree.root;tt.setLayout(function(Q,nt,it){if(nt)return{x:nt.x,y:nt.y};var ct={x:0,y:0};if(!it)return ct;var vt=it.node,_t=vt.getLayout();if(!_t)return ct;for(var At=[_t.width/2,_t.height/2],Ot=vt;Ot;){var Bt=Ot.getLayout();At[0]+=Bt.x,At[1]+=Bt.y,Ot=Ot.parentNode}return{x:Q.width/2-At[0],y:Q.height/2-At[1]}}(u,C,S),!0),t.setLayoutInfo(u),function Q(nt,it,ct,vt,_t){var At=nt.getLayout(),Ot=ct[_t],Bt=Ot&&Ot===nt;if(!(Ot&&!Bt||_t===ct.length&&nt!==vt)){nt.setLayout({isInView:!0,invisible:!Bt&&!it.intersect(At),isAboveViewRoot:Bt},!0);var Vt=new Yi(it.x-At.x,it.y-At.y,it.width,it.height);D1(nt.viewChildren||[],function($t){Q($t,Vt,ct,vt,_t+1)})}}(tt,new Yi(-u.x,-u.y,o,a),z,I,0)}};function WM(t,e,n){for(var i,o=0,a=1/0,s=0,u=t.length;s<u;s++)(i=t[s].getLayout().area)&&(i<a&&(a=i),o<i&&(o=i));var d=t.area*t.area,g=e*e*n;return d?Hv(g*o/d,d/(g*a)):1/0}function Zs(t,e,n,i,o){var a=e===n.width?0:1,s=1-a,u=["x","y"],d=["width","height"],g=n[u[a]],p=e?t.area/e:0;(o||p>n[d[s]])&&(p=n[d[s]]);for(var x=0,S=t.length;x<S;x++){var C=t[x],I={},z=p?C.getLayout().area/p:0,O=I[d[s]]=Hv(p-2*i,0),V=n[u[a]]+n[d[a]]-g,Y=x===S-1||V<z?V:z,G=I[d[a]]=Hv(Y-2*i,0);I[u[s]]=n[u[s]]+Vv(i,O/2),I[u[a]]=g+Vv(i,G/2),g+=Y,C.setLayout(I,!0)}n[u[s]]+=p,n[d[s]]-=p}function rm(t){return t.get(FM)?t.get(HM):0}function om(t){return"_EC_"+t}function Wv(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}jo(BM),oa(VM);var mu=Wv.prototype;function vu(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==e?-1:e}function jv(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}function PS(t,e){return{getValue:function(n){var i=this[t][e];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){0<=this.dataIndex&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[t][e].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){0<=this.dataIndex&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}function ES(t,e,n,i,o){for(var a=new Wv(i),s=0;s<t.length;s++)a.addNode(pr(t[s].id,t[s].name,s),s);var u=[],d=[],g=0;for(s=0;s<e.length;s++){var p=e[s],x=p.source,S=p.target;a.addEdge(x,S,g)&&(d.push(p),u.push(pr(p.id,x+" > "+S)),g++)}var C,I=n.get("coordinateSystem");if("cartesian2d"===I||"polar"===I)C=fh(t,n);else{var z=Ca.get(I),O=z&&"view"!==z.type&&z.dimensions||[];zn(O,"value")<0&&O.concat(["value"]);var V=Ku(t,{coordDimensions:O});(C=new qa(V,n)).initData(t)}var Y=new qa(["value"],n);return Y.initData(d,u),o&&o(C,Y),cS({mainData:C,struct:a,structAttr:"graph",datas:{node:C,edge:Y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}mu.type="graph",mu.isDirected=function(){return this._directed},mu.addNode=function(t,e){var n=this._nodesMap;if(!n[om(t=null==t?""+e:""+t)]){var i=new vu(t,e);return(i.hostGraph=this).nodes.push(i),n[om(t)]=i}},mu.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},mu.getNodeById=function(t){return this._nodesMap[om(t)]},mu.addEdge=function(t,e,n){var i=this._nodesMap,o=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),vu.isInstance(t)||(t=i[om(t)]),vu.isInstance(e)||(e=i[om(e)]),t&&e){var a=t.id+"-"+e.id,s=new jv(t,e,n);return(s.hostGraph=this)._directed&&(t.outEdges.push(s),e.inEdges.push(s)),t.edges.push(s),t!==e&&e.edges.push(s),this.edges.push(s),o[a]=s}},mu.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},mu.getEdge=function(t,e){vu.isInstance(t)&&(t=t.id),vu.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},mu.eachNode=function(t,e){for(var n=this.nodes,i=n.length,o=0;o<i;o++)0<=n[o].dataIndex&&t.call(e,n[o],o)},mu.eachEdge=function(t,e){for(var n=this.edges,i=n.length,o=0;o<i;o++)0<=n[o].dataIndex&&0<=n[o].node1.dataIndex&&0<=n[o].node2.dataIndex&&t.call(e,n[o],o)},mu.breadthFirstTraverse=function(t,e,n,i){if(vu.isInstance(e)||(e=this._nodesMap[om(e)]),e){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(i,e,null))for(var s=[e];s.length;){var u=s.shift(),d=u[o];for(a=0;a<d.length;a++){var g=d[a],p=g.node1===u?g.node2:g.node1;if(!p.__visited){if(t.call(i,p,u))return;s.push(p),p.__visited=!0}}}}},mu.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,o=0,a=n.length;o<a;o++)n[o].dataIndex=-1;for(o=0,a=t.count();o<a;o++)n[t.getRawIndex(o)].dataIndex=o;for(e.filterSelf(function(s){var u=i[e.getRawIndex(s)];return 0<=u.node1.dataIndex&&0<=u.node2.dataIndex}),o=0,a=i.length;o<a;o++)i[o].dataIndex=-1;for(o=0,a=e.count();o<a;o++)i[e.getRawIndex(o)].dataIndex=o},mu.clone=function(){for(var t=new Wv(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(i=0;i<n.length;i++){var o=n[i];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},vu.prototype={constructor:vu,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},jv.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},Fn(vu,PS("hostGraph","data")),Fn(jv,PS("hostGraph","edgeData")),Wv.Node=vu,Wv.Edge=jv,is(vu),is(jv);var Gv=function(t){return t.get("autoCurveness")||null},I1=function(t,e){var n=Gv(t),i=20,o=[];if("number"==typeof n)i=n;else if(Fe(n))return void(t.__curvenessList=n);i<e&&(i=e);var a=i%2?i+2:i+3;o=[];for(var s=0;s<a;s++)o.push((s%2?s+1:s)/10*(s%2?-1:1));t.__curvenessList=o},jf=function(t,e,n){var i=[t.id,t.dataIndex].join("."),o=[e.id,e.dataIndex].join(".");return[n.uid,i,o].join("--\x3e")},Uv=function(t){var e=t.split("--\x3e");return[e[0],e[2],e[1]].join("--\x3e")},qv=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function lx(t,e,n,i){var o=Gv(e),a=Fe(o);if(!o)return null;var s=function(t,e){var n=jf(t.node1,t.node2,e);return e.__edgeMap[n]}(t,e);if(!s)return null;for(var u=-1,d=0;d<s.length;d++)if(s[d]===n){u=d;break}var g=function(t,e){return qv(jf(t.node1,t.node2,e),e)+qv(jf(t.node2,t.node1,e),e)}(t,e);I1(e,g),t.lineStyle=t.lineStyle||{};var p=jf(t.node1,t.node2,e),x=e.__curvenessList,S=a||g%2?0:1;if(s.isForward)return x[S+u];var C=Uv(p),I=qv(C,e),z=x[u+I+S];return i?a?o&&0===o[0]?(I+S)%2?z:-z:((I%2?0:1)+S)%2?z:-z:(I+S)%2?z:-z:x[u+I+S]}var Hg=Q0({type:"series.graph",init:function(t){Hg.superApply(this,"init",arguments);var e=this;function n(){return e._categoriesData}this.legendVisualProvider=new Yp(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){Hg.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){Hg.superApply(this,"mergeDefaultAndTheme",arguments),Vi(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var s,n=t.edges||t.links||[],i=t.data||t.nodes||[],o=this;if(i&&n){Gv(s=this)&&(s.__curvenessList=[],s.__edgeMap={},I1(s));var a=ES(i,n,this,!0,function(s,u){s.wrapMethod("getItemModel",function(C){var I=o._categoriesModels[C.getShallow("category")];return I&&(I.parentModel=C.parentModel,C.parentModel=I),C});var d=o.getModel("edgeLabel"),g=new dr({label:d.option},d.parentModel,e),p=o.getModel("emphasis.edgeLabel"),x=new dr({emphasis:{label:p.option}},p.parentModel,e);function S(C){return(C=this.parsePath(C))&&"label"===C[0]?g:C&&"emphasis"===C[0]&&"label"===C[1]?x:this.parentModel}u.wrapMethod("getItemModel",function(C){return C.customizeGetParent(S),C})});return St(a.edges,function(s){!function(u,d,g,p){if(Gv(g)){var x=jf(u,d,g),S=g.__edgeMap,C=S[Uv(x)];S[x]&&!C?S[x].isForward=!0:C&&S[x]&&(C.isForward=!0,S[x].isForward=!1),S[x]=S[x]||[],S[x].push(p)}}(s.node1,s.node2,this,s.dataIndex)},this),a.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"!==n)return Hg.superApply(this,"formatTooltip",arguments);var i=this.getData(),o=this.getDataParams(t,n),a=i.graph.getEdgeByIndex(t),s=i.getName(a.node1.dataIndex),u=i.getName(a.node2.dataIndex),d=[];return null!=s&&d.push(s),null!=u&&d.push(u),d=Vr(d.join(" > ")),o.value&&(d+=" : "+Vr(o.value)),d},_updateCategoriesData:function(){var t=kt(this.option.categories||[],function(n){return null!=n.value?n:En({value:0},n)}),e=new qa(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(n){return e.getItemModel(n,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return Hg.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),E1=go.prototype,N1=sf.prototype;function Vg(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var GM=ia({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){this[Vg(e)?"_buildPathLine":"_buildPathCurve"](t,e)},_buildPathLine:E1.buildPath,_buildPathCurve:N1.buildPath,pointAt:function(t){return this[Vg(this.shape)?"_pointAtLine":"_pointAtCurve"](t)},_pointAtLine:E1.pointAt,_pointAtCurve:N1.pointAt,tangentAt:function(t){var e=this.shape,n=Vg(e)?[e.x2-e.x1,e.y2-e.y1]:this._tangentAtCurve(t);return mr(n,n)},_tangentAtCurve:N1.tangentAt}),ux=["fromSymbol","toSymbol"];function NS(t){return"_"+t+"Type"}function RS(t,e,n){var i=e.getItemVisual(n,t);if(i&&"none"!==i){var o=e.getItemVisual(n,"color"),a=e.getItemVisual(n,t+"Size"),s=e.getItemVisual(n,t+"Rotate");Fe(a)||(a=[a,a]);var u=Mc(i,-a[0]/2,-a[1]/2,a[0],a[1],o);return u.__specifiedRotation=null==s||isNaN(s)?void 0:+s*Math.PI/180||0,u.name=t,u}}function Gl(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}function Yv(t,e,n){_n.call(this),this._createLine(t,e,n)}var ph=Yv.prototype;function Xv(t){this._ctor=t||Yv,this.group=new _n}ph.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),e=this.childOfName("toSymbol"),n=this.childOfName("label");if(t||e||!n.ignore){for(var i=1,o=this.parent;o;)o.scale&&(i/=o.scale[0]),o=o.parent;var a=this.childOfName("line");if(this.__dirty||a.__dirty){var x,s=a.shape.percent,u=a.pointAt(0),d=a.pointAt(s),g=Jn([],d,u);if(mr(g,g),t){if(t.attr("position",u),null==(x=t.__specifiedRotation)){var p=a.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(p[1],p[0]))}else t.attr("rotation",x);t.attr("scale",[i*s,i*s])}if(e&&(e.attr("position",d),null==(x=e.__specifiedRotation)?(p=a.tangentAt(1),e.attr("rotation",-Math.PI/2-Math.atan2(p[1],p[0]))):e.attr("rotation",x),e.attr("scale",[i*s,i*s])),!n.ignore){var S,C,I,z;n.attr("position",d);var O=n.__labelDistance,V=O[0]*i,Y=O[1]*i,G=s/2,tt=[(p=a.tangentAt(G))[1],-p[0]],Q=a.pointAt(G);0<tt[1]&&(tt[0]=-tt[0],tt[1]=-tt[1]);var nt,it=p[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var ct=-Math.atan2(p[1],p[0]);d[0]<u[0]&&(ct=Math.PI+ct),n.attr("rotation",ct)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":nt=-Y,I="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":nt=Y,I="top";break;default:nt=0,I="middle"}switch(n.__position){case"end":S=[g[0]*V+d[0],g[1]*Y+d[1]],C=.8<g[0]?"left":g[0]<-.8?"right":"center",I=.8<g[1]?"top":g[1]<-.8?"bottom":"middle";break;case"start":S=[-g[0]*V+u[0],-g[1]*Y+u[1]],C=.8<g[0]?"right":g[0]<-.8?"left":"center",I=.8<g[1]?"bottom":g[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":S=[V*it+u[0],u[1]+nt],C=p[0]<0?"right":"left",z=[-V*it,-nt];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":S=[Q[0],Q[1]+nt],C="center",z=[0,-nt];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":S=[-V*it+d[0],d[1]+nt],C=0<=p[0]?"right":"left",z=[V*it,-nt]}n.attr({style:{textVerticalAlign:n.__verticalAlign||I,textAlign:n.__textAlign||C},position:S,scale:[i,i],origin:z})}}}},ph._createLine=function(t,e,n){var s,u,i=t.hostModel,o=(s=t.getItemLayout(e),Gl((u=new GM({name:"line",subPixelOptimize:!0})).shape,s),u);o.shape.percent=0,qs(o,{shape:{percent:1}},i,e),this.add(o);var a=new rn({name:"label",lineLabelOriginalOpacity:1});this.add(a),St(ux,function(s){var u=RS(s,t,e);this.add(u),this[NS(s)]=t.getItemVisual(e,s)},this),this._updateCommonStl(t,e,n)},ph.updateData=function(t,e,n){var i=t.hostModel,o=this.childOfName("line"),a=t.getItemLayout(e),s={shape:{}};Gl(s.shape,a),Xi(o,s,i,e),St(ux,function(u){var d=t.getItemVisual(e,u),g=NS(u);if(this[g]!==d){this.remove(this.childOfName(u));var p=RS(u,t,e);this.add(p)}this[g]=d},this),this._updateCommonStl(t,e,n)},ph._updateCommonStl=function(t,e,n){var i=t.hostModel,o=this.childOfName("line"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle,u=n&&n.labelModel,d=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var g=t.getItemModel(e);a=g.getModel("lineStyle").getLineStyle(),s=g.getModel("emphasis.lineStyle").getLineStyle(),u=g.getModel("label"),d=g.getModel("emphasis.label")}var p=t.getItemVisual(e,"color"),x=Ke(t.getItemVisual(e,"opacity"),a.opacity,1);o.useStyle(Dn({strokeNoScale:!0,fill:"none",stroke:p,opacity:x},a)),o.hoverStyle=s,St(ux,function(nt){var it=this.childOfName(nt);it&&(it.setColor(p),it.setStyle({opacity:x}))},this);var S,C,I=u.getShallow("show"),z=d.getShallow("show"),O=this.childOfName("label");if((I||z)&&(S=p||"#000",null==(C=i.getFormattedLabel(e,"normal",t.dataType)))){var V=i.getRawValue(e);C=null==V?t.getName(e):isFinite(V)?ga(V):V}var Y=I?C:null,G=z?_i(i.getFormattedLabel(e,"emphasis",t.dataType),C):null,tt=O.style;if(null!=Y||null!=G){Wo(O.style,u,{text:Y},{autoColor:S}),O.__textAlign=tt.textAlign,O.__verticalAlign=tt.textVerticalAlign,O.__position=u.get("position")||"middle";var Q=u.get("distance");Fe(Q)||(Q=[Q,Q]),O.__labelDistance=Q}O.hoverStyle=null!=G?{text:G,textFill:d.getTextColor(!0),fontStyle:d.getShallow("fontStyle"),fontWeight:d.getShallow("fontWeight"),fontSize:d.getShallow("fontSize"),fontFamily:d.getShallow("fontFamily")}:{text:null},O.ignore=!I&&!z,Er(this)},ph.highlight=function(){this.trigger("emphasis")},ph.downplay=function(){this.trigger("normal")},ph.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},ph.setLinePoints=function(t){var e=this.childOfName("line");Gl(e.shape,t),e.dirty()},ki(Yv,_n);var Gf=Xv.prototype;function $v(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function Zv(t){return isNaN(t[0])||isNaN(t[1])}function R1(t){return!Zv(t[0])&&!Zv(t[1])}function Zh(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scale,o=i&&i[0]||1;return((e.getZoom()-1)*n+1)/o}function am(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}Gf.isPersistent=function(){return!0},Gf.updateData=function(t){var e=this,n=e.group,i=e._lineData;e._lineData=t,i||n.removeAll();var o=$v(t);t.diff(i).add(function(a){!function(s,u,d,g){if(R1(u.getItemLayout(d))){var p=new s._ctor(u,d,g);u.setItemGraphicEl(d,p),s.group.add(p)}}(e,t,a,o)}).update(function(a,s){!function(u,d,g,p,x,S){var C=d.getItemGraphicEl(p);if(!R1(g.getItemLayout(x)))return u.group.remove(C);C?C.updateData(g,x,S):C=new u._ctor(g,x,S),g.setItemGraphicEl(x,C),u.group.add(C)}(e,i,t,s,a,o)}).remove(function(a){n.remove(i.getItemGraphicEl(a))}).execute()},Gf.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},Gf.incrementalPrepareUpdate=function(t){this._seriesScope=$v(t),this._lineData=null,this.group.removeAll()},Gf.incrementalUpdate=function(t,e){function n(a){var s;a.isGroup||(s=a).animators&&0<s.animators.length||(a.incremental=a.useHoverLayer=!0)}for(var i=t.start;i<t.end;i++)if(R1(e.getItemLayout(i))){var o=new this._ctor(e,i,this._seriesScope);o.traverse(n),this.group.add(o),e.setItemGraphicEl(i,o)}},Gf.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Gf._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var yu=[],L1=[],O1=[],sm=fo,cx=gi,LS=Math.abs;function OS(t,e,n){for(var i,o=t[0],a=t[1],s=t[2],u=1/0,d=n*n,g=.1,p=.1;p<=.9;p+=.1)yu[0]=sm(o[0],a[0],s[0],p),yu[1]=sm(o[1],a[1],s[1],p),(C=LS(cx(yu,e)-d))<u&&(u=C,i=p);for(var x=0;x<32;x++){var S=i+g;L1[0]=sm(o[0],a[0],s[0],i),L1[1]=sm(o[1],a[1],s[1],i),O1[0]=sm(o[0],a[0],s[0],S),O1[1]=sm(o[1],a[1],s[1],S);var C=cx(L1,e)-d;if(LS(C)<.01)break;var I=cx(O1,e)-d;g/=2,C<0?0<=I?i+=g:i-=g:0<=I?i-=g:i+=g}return i}function Kv(t,e){var n=[],i=Ga,o=[[],[],[]],a=[[],[]],s=[];e/=2,t.eachEdge(function(u,d){var g=u.getLayout(),p=u.getVisual("fromSymbol"),x=u.getVisual("toSymbol");g.__original||(g.__original=[je(g[0]),je(g[1])],g[2]&&g.__original.push(je(g[2])));var S=g.__original;if(null!=g[2]){if(jt(o[0],S[0]),jt(o[1],S[2]),jt(o[2],S[1]),p&&"none"!==p){var C=am(u.node1),I=OS(o,S[0],C*e);i(o[0][0],o[1][0],o[2][0],I,n),o[0][0]=n[3],o[1][0]=n[4],i(o[0][1],o[1][1],o[2][1],I,n),o[0][1]=n[3],o[1][1]=n[4]}x&&"none"!==x&&(C=am(u.node2),I=OS(o,S[1],C*e),i(o[0][0],o[1][0],o[2][0],I,n),o[1][0]=n[1],o[2][0]=n[2],i(o[0][1],o[1][1],o[2][1],I,n),o[1][1]=n[1],o[2][1]=n[2]),jt(g[0],o[0]),jt(g[1],o[2]),jt(g[2],o[1])}else jt(a[0],S[0]),jt(a[1],S[1]),Jn(s,a[1],a[0]),mr(s,s),p&&"none"!==p&&(C=am(u.node1),ui(a[0],a[0],s,C*e)),x&&"none"!==x&&(C=am(u.node2),ui(a[1],a[1],s,-C*e)),jt(g[0],a[0]),jt(g[1],a[1])})}var Wg="__focusNodeAdjacency",jg="__unfocusNodeAdjacency",Uf=["itemStyle","opacity"],Jv=["lineStyle","opacity"];function B1(t,e){var n=t.getVisual("opacity");return null!=n?n:t.getModel().get(e)}function dx(t,e,n){var i=t.getGraphicEl(),o=B1(t,e);null!=n&&(null==o&&(o=1),o*=n),i.downplay&&i.downplay(),i.traverse(function(a){if(!a.isGroup){var s=a.lineLabelOriginalOpacity;null!=s&&null==n||(s=o),a.setStyle("opacity",s)}})}function Gg(t,e){var n=B1(t,e),i=t.getGraphicEl();i.traverse(function(o){o.isGroup||o.setStyle("opacity",n)}),i.highlight&&i.highlight()}function Qv(t){return t instanceof Array||(t=[t,t]),t}function z1(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(i){var o=i.getModel();i.setLayout([+o.get("x"),+o.get("y")])}),F1(n,t)}}function F1(t,e){t.eachEdge(function(n,i){var o=Ke(n.getModel().get("lineStyle.curveness"),-lx(n,e,i,!0),0),a=je(n.node1.getLayout()),s=je(n.node2.getLayout()),u=[a,s];+o&&u.push([(a[0]+s[0])/2-(a[1]-s[1])*o,(a[1]+s[1])/2-(s[0]-a[0])*o]),n.setLayout(u)})}Zu({type:"graph",init:function(t,e){var n=new Ng,i=new Xv,o=this.group;this._controller=new Id(e.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(t,e,n){var i=this,o=t.coordinateSystem;this._model=t;var a=this._symbolDraw,s=this._lineDraw,u=this.group;if("view"===o.type){var d={position:o.position,scale:o.scale};this._firstRender?u.attr(d):Xi(u,d,t)}Kv(t.getGraph(),Zh(t));var g=t.getData();a.updateData(g);var p=t.getEdgeData();s.updateData(p),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var x=t.forceLayout,S=t.get("force.layoutAnimation");x&&this._startForceLayoutIteration(x,S),g.eachItemGraphicEl(function(O,V){var Y=g.getItemModel(V);O.off("drag").off("dragend");var G=Y.get("draggable");G&&O.on("drag",function(){x&&(x.warmUp(),this._layouting||this._startForceLayoutIteration(x,S),x.setFixed(V),g.setItemLayout(V,O.position))},this).on("dragend",function(){x&&x.setUnfixed(V)},this),O.setDraggable(G&&x),O[Wg]&&O.off("mouseover",O[Wg]),O[jg]&&O.off("mouseout",O[jg]),Y.get("focusNodeAdjacency")&&(O.on("mouseover",O[Wg]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:O.dataIndex})}),O.on("mouseout",O[jg]=function(){i._dispatchUnfocus(n)}))},this),g.graph.eachEdge(function(O){var V=O.getGraphicEl();V[Wg]&&V.off("mouseover",V[Wg]),V[jg]&&V.off("mouseout",V[jg]),O.getModel().get("focusNodeAdjacency")&&(V.on("mouseover",V[Wg]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:O.dataIndex})}),V.on("mouseout",V[jg]=function(){i._dispatchUnfocus(n)}))});var C="circular"===t.get("layout")&&t.get("circular.rotateLabel"),I=g.getLayout("cx"),z=g.getLayout("cy");g.eachItemGraphicEl(function(O,V){var Y=g.getItemModel(V).get("label.rotate")||0,G=O.getSymbolPath();if(C){var tt=g.getItemLayout(V),Q=Math.atan2(tt[1]-z,tt[0]-I);Q<0&&(Q=2*Math.PI+Q);var nt=tt[0]<I;nt&&(Q-=Math.PI);var it=nt?"left":"right";dp(G,{textRotation:-Q,textPosition:it,textOrigin:"center"},{textPosition:it})}else dp(G,{textRotation:Y*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(t,e){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var o=t.getData().graph,s=i.edgeDataIndex,u=o.getNodeByIndex(i.dataIndex),d=o.getEdgeByIndex(s);(u||d)&&(o.eachNode(function(g){dx(g,Uf,.1)}),o.eachEdge(function(g){dx(g,Jv,.1)}),u&&(Gg(u,Uf),St(u.edges,function(g){g.dataIndex<0||(Gg(g,Jv),Gg(g.node1,Uf),Gg(g.node2,Uf))})),d&&(Gg(d,Jv),Gg(d.node1,Uf),Gg(d.node2,Uf)))},unfocusNodeAdjacency:function(t,e,n,i){var o=t.getData().graph;o.eachNode(function(a){dx(a,Uf)}),o.eachEdge(function(a){dx(a,Jv)})},_startForceLayoutIteration:function(t,e){var n=this;!function i(){t.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(e?n._layoutTimeout=setTimeout(i,16):i())})}()},_updateController:function(t,e,n){var i=this._controller,o=this._controllerHost,a=this.group;i.setPointerChecker(function(s,u,d){var g=a.getBoundingRect();return g.applyTransform(a.transform),g.contain(u,d)&&!Pv(s,n,t)}),"view"===t.coordinateSystem.type?(i.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(s){i1(o,s.dx,s.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:s.dx,dy:s.dy})}).on("zoom",function(s){r1(o,s.scale,s.originX,s.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:s.scale,originX:s.originX,originY:s.originY}),this._updateNodeAndLinkScale(),Kv(t.getGraph(),Zh(t)),this._lineDraw.updateLayout()},this)):i.disable()},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=Zh(t),i=[n,n];e.eachItemGraphicEl(function(o,a){o.attr("scale",i)})},updateLayout:function(t){Kv(t.getGraph(),Zh(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),Cr({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),Cr({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),Cr({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",query:t},function(n){var i=$y(n.coordinateSystem,t);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})});var H1=Math.PI,t0=[];function BS(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),o=t.getData(),a=o.graph,s=i.width/2+i.x,u=i.height/2+i.y,d=Math.min(i.width,i.height)/2,g=o.count();o.setLayout({cx:s,cy:u}),g&&(UM[e](t,n,a,o,d,s,u,g),a.eachEdge(function(p,x){var S,C=Ke(p.getModel().get("lineStyle.curveness"),lx(p,t,x),0),I=je(p.node1.getLayout()),z=je(p.node2.getLayout());+C&&(S=[s*(C*=3)+(I[0]+z[0])/2*(1-C),u*C+(I[1]+z[1])/2*(1-C)]),p.setLayout([I,z,S])}))}}var UM={value:function(t,e,n,i,o,a,s,u){var d=0,g=i.getSum("value"),p=2*Math.PI/(g||u);n.eachNode(function(x){var S=x.getValue("value"),C=p*(g?S:1)/2;d+=C,x.setLayout([o*Math.cos(d)+a,o*Math.sin(d)+s]),d+=C})},symbolSize:function(t,e,n,i,o,a,s,u){var d=0;t0.length=u;var g=Zh(t);n.eachNode(function(S){var C=am(S);isNaN(C)&&(C=2),C<0&&(C=0),C*=g;var I=Math.asin(C/2/o);isNaN(I)&&(I=H1/2),t0[S.dataIndex]=I,d+=2*I});var p=(2*H1-d)/u/2,x=0;n.eachNode(function(S){var C=p+t0[S.dataIndex];x+=C,S.setLayout([o*Math.cos(x)+a,o*Math.sin(x)+s]),x+=C})}},Ug=ui;$u(function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),o=n.getGraph().data,a=i.mapArray(i.getName);o.filterSelf(function(s){var u=o.getItemModel(s).getShallow("category");if(null!=u){"number"==typeof u&&(u=a[u]);for(var d=0;d<e.length;d++)if(!e[d].isSelected(u))return!1}return!0})},this)}),jo(Yh("graph","circle",null)),jo(function(t){var e={};t.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),o=n.getData(),a={};i.each(function(s){var u=i.getName(s);a["ec-"+u]=s;var d=i.getItemModel(s),g=d.get("itemStyle.color")||n.getColorFromPalette(u,e);i.setItemVisual(s,"color",g);for(var p=["opacity","symbol","symbolSize","symbolKeepAspect"],x=0;x<p.length;x++){var S=d.getShallow(p[x],!0);null!=S&&i.setItemVisual(s,p[x],S)}}),i.count()&&o.each(function(s){var u=o.getItemModel(s).getShallow("category");if(null!=u){"string"==typeof u&&(u=a["ec-"+u]);for(var d=["color","opacity","symbol","symbolSize","symbolKeepAspect"],g=0;g<d.length;g++)null==o.getItemVisual(s,d[g],!0)&&o.setItemVisual(s,d[g],i.getItemVisual(u,d[g]))}})})}),jo(function(t){t.eachSeriesByType("graph",function(e){var n=e.getGraph(),i=e.getEdgeData(),o=Qv(e.get("edgeSymbol")),a=Qv(e.get("edgeSymbolSize")),s="lineStyle.color".split("."),u="lineStyle.opacity".split(".");i.setVisual("fromSymbol",o&&o[0]),i.setVisual("toSymbol",o&&o[1]),i.setVisual("fromSymbolSize",a&&a[0]),i.setVisual("toSymbolSize",a&&a[1]),i.setVisual("color",e.get(s)),i.setVisual("opacity",e.get(u)),i.each(function(d){var g=i.getItemModel(d),p=n.getEdgeByIndex(d),x=Qv(g.getShallow("symbol",!0)),S=Qv(g.getShallow("symbolSize",!0)),C=g.get(s),I=g.get(u);switch(C){case"source":C=p.node1.getVisual("color");break;case"target":C=p.node2.getVisual("color")}x[0]&&p.setVisual("fromSymbol",x[0]),x[1]&&p.setVisual("toSymbol",x[1]),S[0]&&p.setVisual("fromSymbolSize",S[0]),S[1]&&p.setVisual("toSymbolSize",S[1]),p.setVisual("color",C),p.setVisual("opacity",I)})})}),oa(function(t,e){t.eachSeriesByType("graph",function(n){var i=n.get("layout"),o=n.coordinateSystem;if(o&&"view"!==o.type){var a=n.getData(),s=[];St(o.dimensions,function(S){s=s.concat(a.mapDimension(S,!0))});for(var u=0;u<a.count();u++){for(var d=[],g=!1,p=0;p<s.length;p++){var x=a.get(s[p],u);isNaN(x)||(g=!0),d.push(x)}a.setItemLayout(u,g?o.dataToPoint(d):[NaN,NaN])}F1(a.graph,n)}else i&&"none"!==i||z1(n)})}),oa(Td.VISUAL.POST_CHART_LAYOUT,function(t){t.eachSeriesByType("graph",function(e){"circular"===e.get("layout")&&BS(e,"symbolSize")})}),oa(function(t){t.eachSeriesByType("graph",function(e){if(!(S=e.coordinateSystem)||"view"===S.type)if("force"===e.get("layout")){var n=e.preservedPoints||{},i=e.getGraph(),o=i.data,a=i.edgeData,s=e.getModel("force"),u=s.get("initLayout");e.preservedPoints?o.each(function(Y){var G=o.getId(Y);o.setItemLayout(Y,n[G]||[NaN,NaN])}):u&&"none"!==u?"circular"===u&&BS(e,"value"):z1(e);var d=o.getDataExtent("value"),g=a.getDataExtent("value"),p=s.get("repulsion"),x=s.get("edgeLength");Fe(p)||(p=[p,p]),Fe(x)||(x=[x,x]),x=[x[1],x[0]];var S,C=o.mapArray("value",function(Y,G){var tt=o.getItemLayout(G),Q=no(Y,d,p);return isNaN(Q)&&(Q=(p[0]+p[1])/2),{w:Q,rep:Q,fixed:o.getItemModel(G).get("fixed"),p:!tt||isNaN(tt[0])||isNaN(tt[1])?null:tt}}),I=a.mapArray("value",function(Y,G){var tt=i.getEdgeByIndex(G),Q=no(Y,g,x);isNaN(Q)&&(Q=(x[0]+x[1])/2);var nt=tt.getModel(),it=Ke(nt.get("lineStyle.curveness"),-lx(tt,e,G,!0),0);return{n1:C[tt.node1.dataIndex],n2:C[tt.node2.dataIndex],d:Q,curveness:it,ignoreForceLayout:nt.get("ignoreForceLayout")}}),z=(S=e.coordinateSystem).getBoundingRect(),O=function(Y,G,tt){for(var Q=tt.rect,nt=Q.width,it=Q.height,ct=[Q.x+nt/2,Q.y+it/2],vt=null==tt.gravity?.1:tt.gravity,_t=0;_t<Y.length;_t++){var At=Y[_t];At.p||(At.p=Xe(nt*(Math.random()-.5)+ct[0],it*(Math.random()-.5)+ct[1])),At.pp=je(At.p),At.edges=null}var Ot=null==tt.friction?.6:tt.friction,Bt=Ot;return{warmUp:function(){Bt=.8*Ot},setFixed:function(Vt){Y[Vt].fixed=!0},setUnfixed:function(Vt){Y[Vt].fixed=!1},step:function(Vt){for(var $t=[],Jt=Y.length,Yt=0;Yt<G.length;Yt++){var ue=G[Yt];if(!ue.ignoreForceLayout){var Re=ue.n1;Jn($t,(mn=ue.n2).p,Re.p);var ze=sn($t)-ue.d,Ie=mn.w/(Re.w+mn.w);isNaN(Ie)&&(Ie=0),mr($t,$t),Re.fixed||Ug(Re.p,Re.p,$t,Ie*ze*Bt),mn.fixed||Ug(mn.p,mn.p,$t,-(1-Ie)*ze*Bt)}}for(Yt=0;Yt<Jt;Yt++)(ai=Y[Yt]).fixed||(Jn($t,ct,ai.p),Ug(ai.p,ai.p,$t,vt*Bt));for(Yt=0;Yt<Jt;Yt++){Re=Y[Yt];for(var Je=Yt+1;Je<Jt;Je++){var mn;Jn($t,(mn=Y[Je]).p,Re.p),0===(ze=sn($t))&&(nn($t,Math.random()-.5,Math.random()-.5),ze=1);var hi=(Re.rep+mn.rep)/ze/ze;Re.fixed||Ug(Re.pp,Re.pp,$t,hi),mn.fixed||Ug(mn.pp,mn.pp,$t,-hi)}}var We=[];for(Yt=0;Yt<Jt;Yt++){var ai;(ai=Y[Yt]).fixed||(Jn(We,ai.p,ai.pp),Ug(ai.p,ai.p,We,Bt),jt(ai.pp,ai.p))}Bt*=.992,Vt&&Vt(Y,G,Bt<.01)}}}(C,I,{rect:z,gravity:s.get("gravity"),friction:s.get("friction")}),V=O.step;O.step=function(Y){for(var G=0,tt=C.length;G<tt;G++)C[G].fixed&&jt(C[G].p,i.getNodeByIndex(G).getLayout());V(function(Q,nt,it){for(var ct=0,vt=Q.length;ct<vt;ct++)Q[ct].fixed||i.getNodeByIndex(ct).setLayout(Q[ct].p),n[o.getId(ct)]=Q[ct].p;for(ct=0,vt=nt.length;ct<vt;ct++){var _t=nt[ct],At=i.getEdgeByIndex(ct),Ot=_t.n1.p,Bt=_t.n2.p,Vt=At.getLayout();(Vt=Vt?Vt.slice():[])[0]=Vt[0]||[],Vt[1]=Vt[1]||[],jt(Vt[0],Ot),jt(Vt[1],Bt),+_t.curveness&&(Vt[2]=[(Ot[0]+Bt[0])/2-(Ot[1]-Bt[1])*_t.curveness,(Ot[1]+Bt[1])/2-(Bt[0]-Ot[0])*_t.curveness]),At.setLayout(Vt)}Y&&Y(it)})},e.forceLayout=O,e.preservedPoints=n,O.step()}else e.forceLayout=null})}),J0("graphView",{create:function(t,e){var n=[];return t.eachSeriesByType("graph",function(i){var O,V,Y,o=i.get("coordinateSystem");if(!o||"view"===o){var a=i.getData(),s=[],u=[];lu(a.mapArray(function(z){var O=a.getItemModel(z);return[+O.get("x"),+O.get("y")]}),s,u),u[0]-s[0]==0&&(u[0]+=1,s[0]-=1),u[1]-s[1]==0&&(u[1]+=1,s[1]-=1);var d=(u[0]-s[0])/(u[1]-s[1]),g=(O=e,V=d,(Y=i.getBoxLayoutParams()).aspect=V,xi(Y,{width:O.getWidth(),height:O.getHeight()}));isNaN(d)&&(s=[g.x,g.y],u=[g.x+g.width,g.y+g.height]);var p=u[0]-s[0],x=u[1]-s[1],S=g.width,C=g.height,I=i.coordinateSystem=new Ds;I.zoomLimit=i.get("scaleLimit"),I.setBoundingRect(s[0],s[1],p,x),I.setViewRect(g.x,g.y,S,C),I.setCenter(i.get("center")),I.setZoom(i.get("zoom")),n.push(I)}}),n}}),ra.extend({type:"series.gauge",getInitialData:function(t,e){return qp(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var zS=R.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,i=Math.sin,o=e.r,a=e.width,s=e.angle,u=e.x-n(s)*a*(o/3<=a?1:2),d=e.y-i(s)*a*(o/3<=a?1:2);s=e.angle-Math.PI/2,t.moveTo(u,d),t.lineTo(e.x+n(s)*a,e.y+i(s)*a),t.lineTo(e.x+n(e.angle)*o,e.y+i(e.angle)*o),t.lineTo(e.x-n(s)*a,e.y-i(s)*a),t.lineTo(u,d)}});function FS(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}var qM=2*Math.PI,HS=(Ta.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var i=t.get("axisLine.lineStyle.color"),o=function(a,s){var u=a.get("center"),d=s.getWidth(),g=s.getHeight(),p=Math.min(d,g);return{cx:ln(u[0],s.getWidth()),cy:ln(u[1],s.getHeight()),r:ln(a.get("radius"),p/2)}}(t,n);this._renderMain(t,e,n,i,o)},dispose:function(){},_renderMain:function(t,e,n,i,o){for(var a=this.group,s=t.getModel("axisLine"),u=s.getModel("lineStyle"),d=t.get("clockwise"),g=-t.get("startAngle")/180*Math.PI,p=((z=-t.get("endAngle")/180*Math.PI)-g)%qM,x=g,S=u.get("width"),C=s.get("show"),I=0;C&&I<i.length;I++){var z,O=Math.min(Math.max(i[I][0],0),1),V=new Kn({shape:{startAngle:x,endAngle:z=g+p*O,cx:o.cx,cy:o.cy,clockwise:d,r0:o.r-S,r:o.r},silent:!0});V.setStyle({fill:i[I][1]}),V.setStyle(u.getLineStyle(["color","borderWidth","borderColor"])),a.add(V),x=z}function Y(tt){if(tt<=0)return i[0][1];for(var Q=0;Q<i.length;Q++)if(i[Q][0]>=tt&&(0===Q?0:i[Q-1][0])<tt)return i[Q][1];return i[Q-1][1]}if(!d){var G=g;g=z,z=G}this._renderTicks(t,e,n,Y,o,g,z,d),this._renderPointer(t,e,n,Y,o,g,z,d),this._renderTitle(t,e,n,Y,o),this._renderDetail(t,e,n,Y,o)},_renderTicks:function(t,e,n,i,o,a,s,u){for(var d=this.group,g=o.cx,p=o.cy,x=o.r,S=+t.get("min"),C=+t.get("max"),I=t.getModel("splitLine"),z=t.getModel("axisTick"),O=t.getModel("axisLabel"),V=t.get("splitNumber"),Y=z.get("splitNumber"),G=ln(I.get("length"),x),tt=ln(z.get("length"),x),Q=a,nt=(s-a)/V,it=nt/Y,ct=I.getModel("lineStyle").getLineStyle(),vt=z.getModel("lineStyle").getLineStyle(),_t=0;_t<=V;_t++){var At=Math.cos(Q),Ot=Math.sin(Q);if(I.get("show")){var Bt=new go({shape:{x1:At*x+g,y1:Ot*x+p,x2:At*(x-G)+g,y2:Ot*(x-G)+p},style:ct,silent:!0});"auto"===ct.stroke&&Bt.setStyle({stroke:i(_t/V)}),d.add(Bt)}if(O.get("show")){var Vt=FS(ga(_t/V*(C-S)+S),O.get("formatter")),$t=O.get("distance"),Jt=i(_t/V);d.add(new rn({style:Wo({},O,{text:Vt,x:At*(x-G-$t)+g,y:Ot*(x-G-$t)+p,textVerticalAlign:Ot<-.4?"top":.4<Ot?"bottom":"middle",textAlign:At<-.4?"left":.4<At?"right":"center"},{autoColor:Jt}),silent:!0}))}if(z.get("show")&&_t!==V){for(var Yt=0;Yt<=Y;Yt++){At=Math.cos(Q),Ot=Math.sin(Q);var ue=new go({shape:{x1:At*x+g,y1:Ot*x+p,x2:At*(x-tt)+g,y2:Ot*(x-tt)+p},silent:!0,style:vt});"auto"===vt.stroke&&ue.setStyle({stroke:i((_t+Yt/Y)/V)}),d.add(ue),Q+=it}Q-=it}else Q+=nt}},_renderPointer:function(t,e,n,i,o,a,s,u){var d=this.group,g=this._data;if(t.get("pointer.show")){var p=[+t.get("min"),+t.get("max")],x=[a,s],S=t.getData(),C=S.mapDimension("value");S.diff(g).add(function(I){var z=new zS({shape:{angle:a}});qs(z,{shape:{angle:no(S.get(C,I),p,x,!0)}},t),d.add(z),S.setItemGraphicEl(I,z)}).update(function(I,z){var O=g.getItemGraphicEl(z);Xi(O,{shape:{angle:no(S.get(C,I),p,x,!0)}},t),d.add(O),S.setItemGraphicEl(I,O)}).remove(function(I){var z=g.getItemGraphicEl(I);d.remove(z)}).execute(),S.eachItemGraphicEl(function(I,z){var O=S.getItemModel(z),V=O.getModel("pointer");I.setShape({x:o.cx,y:o.cy,width:ln(V.get("width"),o.r),r:ln(V.get("length"),o.r)}),I.useStyle(O.getModel("itemStyle").getItemStyle()),"auto"===I.style.fill&&I.setStyle("fill",i(no(S.get(C,z),p,[0,1],!0))),Er(I,O.getModel("emphasis.itemStyle").getItemStyle())}),this._data=S}else g&&g.eachItemGraphicEl(function(I){d.remove(I)})},_renderTitle:function(t,e,n,i,o){var a=t.getData(),s=a.mapDimension("value"),u=t.getModel("title");if(u.get("show")){var d=u.get("offsetCenter"),g=o.cx+ln(d[0],o.r),p=o.cy+ln(d[1],o.r),x=+t.get("min"),S=+t.get("max"),C=i(no(t.getData().get(s,0),[x,S],[0,1],!0));this.group.add(new rn({silent:!0,style:Wo({},u,{x:g,y:p,text:a.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:C,forceRich:!0})}))}},_renderDetail:function(t,e,n,i,o){var a=t.getModel("detail"),s=+t.get("min"),u=+t.get("max");if(a.get("show")){var d=a.get("offsetCenter"),g=o.cx+ln(d[0],o.r),p=o.cy+ln(d[1],o.r),x=ln(a.get("width"),o.r),S=ln(a.get("height"),o.r),C=t.getData(),I=C.get(C.mapDimension("value"),0),z=i(no(I,[s,u],[0,1],!0));this.group.add(new rn({silent:!0,style:Wo({},a,{x:g,y:p,text:FS(I,a.get("formatter")),textWidth:isNaN(x)?null:x,textHeight:isNaN(S)?null:S,textAlign:"center",textVerticalAlign:"middle"},{autoColor:z,forceRich:!0})}))}}}),Q0({type:"series.funnel",init:function(t){HS.superApply(this,"init",arguments),this.legendVisualProvider=new Yp(Rn(this.getData,this),Rn(this.getRawData,this)),this._defaultLabelLine(t)},getInitialData:function(t,e){return qp(this,{coordDimensions:["value"],encodeDefaulter:kn(zm,this)})},_defaultLabelLine:function(t){Vi(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=HS.superCall(this,"getDataParams",t),i=e.mapDimension("value"),o=e.getSum(i);return n.percent=o?+(e.get(i,t)/o*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function hx(t,e){_n.call(this);var n=new nr,i=new rr,o=new rn;this.add(n),this.add(i),this.add(o),this.highDownOnUpdate=function(a,s){"emphasis"===s?(i.ignore=i.hoverIgnore,o.ignore=o.hoverIgnore):(i.ignore=i.normalIgnore,o.ignore=o.normalIgnore)},this.updateData(t,e,!0)}var VS=hx.prototype,YM=["itemStyle","opacity"];function fx(t,e,n,i,o){$a.call(this,t,e,n),this.type=i||"value",this.axisIndex=o}function qf(t,e,n,i,o,a){t=t||0;var s=n[1]-n[0];if(null!=o&&(o=lm(o,[0,s])),null!=a&&(a=Math.max(a,null!=o?o:0)),"all"===i){var u=Math.abs(e[1]-e[0]);o=a=lm(u=lm(u,[0,s]),[o,a]),i=0}e[0]=lm(e[0],n),e[1]=lm(e[1],n);var d=V1(e,i);e[i]+=t;var g=o||0,p=n.slice();d.sign<0?p[0]+=g:p[1]-=g,e[i]=lm(e[i],p);var x=V1(e,i);return null!=o&&(x.sign!==d.sign||x.span<o)&&(e[1-i]=e[i]+d.sign*o),x=V1(e,i),null!=a&&x.span>a&&(e[1-i]=e[i]+x.sign*a),e}function V1(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:0<n?-1:n<0?1:e?-1:1}}function lm(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}VS.updateData=function(t,e,n){var i=this.childAt(0),o=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e),u=t.getItemModel(e).get(YM);u=null==u?1:u,i.useStyle({}),n?(i.setShape({points:s.points}),i.setStyle({opacity:0}),qs(i,{style:{opacity:u}},o,e)):Xi(i,{style:{opacity:u},shape:{points:s.points}},o,e);var d=a.getModel("itemStyle"),g=t.getItemVisual(e,"color");i.setStyle(Dn({lineJoin:"round",fill:g},d.getItemStyle(["opacity"]))),i.hoverStyle=d.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),Er(this)},VS._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),o=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e).label,u=t.getItemVisual(e,"color");Xi(n,{shape:{points:s.linePoints||s.linePoints}},o,e),Xi(i,{style:{x:s.x,y:s.y}},o,e),i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var d=a.getModel("label"),g=a.getModel("emphasis.label"),p=a.getModel("labelLine"),x=a.getModel("emphasis.labelLine");u=t.getItemVisual(e,"color"),Fl(i.style,i.hoverStyle={},d,g,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:u,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign}),i.ignore=i.normalIgnore=!d.get("show"),i.hoverIgnore=!g.get("show"),n.ignore=n.normalIgnore=!p.get("show"),n.hoverIgnore=!x.get("show"),n.setStyle({stroke:u}),n.setStyle(p.getModel("lineStyle").getLineStyle()),n.hoverStyle=x.getModel("lineStyle").getLineStyle()},ki(hx,_n),Ta.extend({type:"funnel",render:function(t,e,n){var i=t.getData(),o=this._data,a=this.group;i.diff(o).add(function(s){var u=new hx(i,s);i.setItemGraphicEl(s,u),a.add(u)}).update(function(s,u){var d=o.getItemGraphicEl(u);d.updateData(i,s),a.add(d),i.setItemGraphicEl(s,d)}).remove(function(s){var u=o.getItemGraphicEl(s);a.remove(u)}).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),jo(Xp("funnel")),oa(function(t,e,n){t.eachSeriesByType("funnel",function(i){var $t,o=i.getData(),a=o.mapDimension("value"),s=i.get("sort"),u=($t=e,xi(i.getBoxLayoutParams(),{width:$t.getWidth(),height:$t.getHeight()})),d=function(Vt,$t){for(var Jt=Vt.mapDimension("value"),Yt=Vt.mapArray(Jt,function(Je){return Je}),ue=[],Re="ascending"===$t,ze=0,Ie=Vt.count();ze<Ie;ze++)ue[ze]=ze;return"function"==typeof $t?ue.sort($t):"none"!==$t&&ue.sort(function(Je,mn){return Re?Yt[Je]-Yt[mn]:Yt[mn]-Yt[Je]}),ue}(o,s),g=i.get("orient"),p=u.width,x=u.height,S=u.x,C=u.y,I="horizontal"===g?[ln(i.get("minSize"),x),ln(i.get("maxSize"),x)]:[ln(i.get("minSize"),p),ln(i.get("maxSize"),p)],z=o.getDataExtent(a),O=i.get("min"),V=i.get("max");function Y(Vt,$t){if("horizontal"===g){var Jt,Yt=no(o.get(a,Vt)||0,[O,V],I,!0);switch(G){case"top":Jt=C;break;case"center":Jt=C+(x-Yt)/2;break;case"bottom":Jt=C+(x-Yt)}return[[$t,Jt],[$t,Jt+Yt]]}var ue,Re=no(o.get(a,Vt)||0,[O,V],I,!0);switch(G){case"left":ue=S;break;case"center":ue=S+(p-Re)/2;break;case"right":ue=S+p-Re}return[[ue,$t],[ue+Re,$t]]}null==O&&(O=Math.min(z[0],0)),null==V&&(V=z[1]);var Vt,G=i.get("funnelAlign"),tt=i.get("gap"),Q=(("horizontal"===g?p:x)-tt*(o.count()-1))/o.count();"ascending"===s&&(Q=-Q,tt=-tt,"horizontal"===g?S+=p:C+=x,d=d.reverse());for(var nt=0;nt<d.length;nt++){var it=d[nt],ct=d[nt+1],vt=o.getItemModel(it);if("horizontal"===g){var _t=vt.get("itemStyle.width");null==_t?_t=Q:(_t=ln(_t,p),"ascending"===s&&(_t=-_t));var At=Y(it,S),Ot=Y(ct,S+_t);S+=_t+tt,o.setItemLayout(it,{points:At.concat(Ot.slice().reverse())})}else{var Bt=vt.get("itemStyle.height");null==Bt?Bt=Q:(Bt=ln(Bt,x),"ascending"===s&&(Bt=-Bt)),At=Y(it,"horizontal"===g?S:C),Ot=Y(ct,"horizontal"===g?S+_t:C+Bt),C+=Bt+tt,o.setItemLayout(it,{points:At.concat(Ot.slice().reverse())})}}(Vt=o).each(function($t){var Jt,Yt,ue,Re,ze=Vt.getItemModel($t),Ie=ze.getModel("label").get("position"),Je=ze.get("orient"),mn=ze.getModel("labelLine"),hi=Vt.getItemLayout($t),We=hi.points,ai="inner"===Ie||"inside"===Ie||"center"===Ie||"insideLeft"===Ie||"insideRight"===Ie;if(ai)Jt="insideLeft"===Ie?(Yt=(We[0][0]+We[3][0])/2+5,ue=(We[0][1]+We[3][1])/2,"left"):"insideRight"===Ie?(Yt=(We[1][0]+We[2][0])/2-5,ue=(We[1][1]+We[2][1])/2,"right"):(Yt=(We[0][0]+We[1][0]+We[2][0]+We[3][0])/4,ue=(We[0][1]+We[1][1]+We[2][1]+We[3][1])/4,"center"),Re=[[Yt,ue],[Yt,ue]];else{var fi,Oi,Ur,Pr,oo=mn.get("length");Jt="left"===Ie?(Oi=(We[3][1]+We[0][1])/2,Yt=(Ur=(fi=(We[3][0]+We[0][0])/2)-oo)-5,"right"):"right"===Ie?(Oi=(We[1][1]+We[2][1])/2,Yt=(Ur=(fi=(We[1][0]+We[2][0])/2)+oo)+5,"left"):"top"===Ie?(fi=(We[3][0]+We[0][0])/2,ue=(Pr=(Oi=(We[3][1]+We[0][1])/2)-oo)-5,"center"):"bottom"===Ie?(fi=(We[1][0]+We[2][0])/2,ue=(Pr=(Oi=(We[1][1]+We[2][1])/2)+oo)+5,"center"):"rightTop"===Ie?(fi="horizontal"===Je?We[3][0]:We[1][0],Oi="horizontal"===Je?We[3][1]:We[1][1],"horizontal"===Je?(ue=(Pr=Oi-oo)-5,"center"):(Yt=(Ur=fi+oo)+5,"top")):"rightBottom"===Ie?(fi=We[2][0],Oi=We[2][1],"horizontal"===Je?(ue=(Pr=Oi+oo)+5,"center"):(Yt=(Ur=fi+oo)+5,"bottom")):"leftTop"===Ie?(fi=We[0][0],Oi="horizontal"===Je?We[0][1]:We[1][1],"horizontal"===Je?(ue=(Pr=Oi-oo)-5,"center"):(Yt=(Ur=fi-oo)-5,"right")):"leftBottom"===Ie?(fi="horizontal"===Je?We[1][0]:We[3][0],Oi="horizontal"===Je?We[1][1]:We[2][1],"horizontal"===Je?(ue=(Pr=Oi+oo)+5,"center"):(Yt=(Ur=fi-oo)-5,"right")):(fi=(We[1][0]+We[2][0])/2,Oi=(We[1][1]+We[2][1])/2,"horizontal"===Je?(ue=(Pr=Oi+oo)+5,"center"):(Yt=(Ur=fi+oo)+5,"left")),"horizontal"===Je?Yt=Ur=fi:ue=Pr=Oi,Re=[[fi,Oi],[Ur,Pr]]}hi.label={linePoints:Re,x:Yt,y:ue,verticalAlign:"middle",textAlign:Jt,inside:ai}})})}),$u(Dv("funnel")),fx.prototype={constructor:fx,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},ki(fx,$a);var W1=St,WS=Math.min,jS=Math.max,GS=Math.floor,XM=Math.ceil,j1=ga,$M=Math.PI;function G1(t,e,n){this._axesMap=pe(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}function mh(t,e){return WS(jS(t,e[0]),e[1])}G1.prototype={type:"parallel",constructor:G1,_init:function(t,e,n){var o=t.parallelAxisIndex;W1(t.dimensions,function(a,s){var u=o[s],d=e.getComponent("parallelAxis",u),g=this._axesMap.set(a,new fx(a,Ig(d),[0,0],d.get("type"),u));g.onBand="category"===g.type&&d.get("boundaryGap"),g.inverse=d.get("inverse"),(d.axis=g).model=d,g.coordinateSystem=d.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,o=e.pixelDimIndex,a=t[1-o],s=t[o];return n<=a&&a<=n+e.axisLength&&i<=s&&s<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var i=n.getData();W1(this.dimensions,function(o){var a=this._axesMap.get(o);a.scale.unionExtentFromData(i,i.mapDimension(o)),Pf(a.scale,a.model)},this)}},this)},resize:function(t,e){this._rect=xi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,i=["x","y"],o=["width","height"],a=e.get("layout"),s="horizontal"===a?0:1,u=n[o[s]],d=[0,u],g=this.dimensions.length,p=mh(e.get("axisExpandWidth"),d),x=mh(e.get("axisExpandCount")||0,[0,g]),S=e.get("axisExpandable")&&3<g&&x<g&&1<x&&0<p&&0<u,C=e.get("axisExpandWindow");C?(t=mh(C[1]-C[0],d),C[1]=C[0]+t):(t=mh(p*(x-1),d),(C=[p*(e.get("axisExpandCenter")||GS(g/2))-t/2])[1]=C[0]+t);var I=(u-t)/(g-x);I<3&&(I=0);var z=[GS(j1(C[0]/p,1))+1,XM(j1(C[1]/p,1))-1];return{layout:a,pixelDimIndex:s,layoutBase:n[i[s]],layoutLength:u,axisBase:n[i[1-s]],axisLength:n[o[1-s]],axisExpandable:S,axisExpandWidth:p,axisCollapseWidth:I,axisExpandWindow:C,axisCount:g,winInnerIndices:z,axisExpandWindow0Pos:I/p*C[0]}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),o=i.layout;e.each(function(a){var s=[0,i.axisLength],u=a.inverse?1:0;a.setExtent(s[u],s[1-u])}),W1(n,function(a,s){var u=(i.axisExpandable?function(C,I){var z,O,Y=I.axisExpandWidth,tt=I.axisCollapseWidth,Q=I.winInnerIndices,nt=tt,it=!1;return C<Q[0]?(z=C*tt,O=tt):C<=Q[1]?(z=I.axisExpandWindow0Pos+C*Y-I.axisExpandWindow[0],nt=Y,it=!0):(z=I.layoutLength-(I.axisCount-1-C)*tt,O=tt),{position:z,axisNameAvailableWidth:nt,axisLabelShow:it,nameTruncateMaxWidth:O}}:function(C,I){var z=I.layoutLength/(I.axisCount-1);return{position:z*C,axisNameAvailableWidth:z,axisLabelShow:!0}})(s,i),d={horizontal:{x:u.position,y:i.axisLength},vertical:{x:0,y:u.position}},p=[d[o].x+t.x,d[o].y+t.y],x={horizontal:$M/2,vertical:0}[o],S=yt();he(S,S,x),fe(S,S,p),this._axesLayout[a]={position:p,rotation:x,transform:S,axisNameAvailableWidth:u.axisNameAvailableWidth,axisLabelShow:u.axisLabelShow,nameTruncateMaxWidth:u.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var o=this._axesMap,a=this.dimensions,s=[],u=[];St(a,function(I){s.push(t.mapDimension(I)),u.push(o.get(I).model)});for(var d=this.hasAxisBrushed(),g=n;g<i;g++){var p;if(d){p="active";for(var x=t.getValues(s,g),S=0,C=a.length;S<C;S++)if("inactive"===u[S].getActiveState(x[S])){p="inactive";break}}else p="normal";e(p,g)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,o=t.length;i<o;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){return fa([t,0],this._axesLayout[e].transform)},getAxisLayout:function(t){return fn(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),o=i[1]-i[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var s,u=t[n]-e.layoutBase-e.axisExpandWindow0Pos,d="slide",g=e.axisCollapseWidth,p=this._model.get("axisExpandSlideTriggerArea"),x=null!=p[0];return g?(x&&g&&u<o*p[0]?(d="jump",s=u-o*p[2]):x&&g&&u>o*(1-p[0])?(d="jump",s=u-o*(1-p[2])):0<=(s=u-o*p[1])&&(s=u-o*(1-p[1]))<=0&&(s=0),(s*=e.axisExpandWidth/g)?qf(s,i,a,"all"):d="none"):((i=[jS(0,a[1]*u/(o=i[1]-i[0])-o/2)])[1]=WS(a[1],i[0]+o),i[0]=i[1]-o),{axisExpandWindow:i,behavior:d}}},Ca.register("parallel",{create:function(t,e){var n=[];return t.eachComponent("parallel",function(i,o){var a=new G1(i,t,e);a.name="parallel_"+o,a.resize(i,e),(i.coordinateSystem=a).model=i,n.push(a)}),t.eachSeries(function(i){if("parallel"===i.get("coordinateSystem")){var o=t.queryComponents({mainType:"parallel",index:i.get("parallelIndex"),id:i.get("parallelId")})[0];i.coordinateSystem=o.coordinateSystem}}),n}});var U1=Sr.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return ho([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=fn(t);if(e)for(var n=e.length-1;0<=n;n--)Vu(e[n])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,o=e.length;i<o;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"}});ei(U1.prototype,Pg),Wp("parallel",U1,function(t,e){return e.type||(e.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),Sr.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Sr.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){t&&ei(this.option,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){St(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];St(Mn(this.dependentModels.parallelAxis,function(n){return(n.get("parallelIndex")||0)===this.componentIndex},this),function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})}}),Cr({type:"axisAreaSelect",event:"axisAreaSelected"},function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(n){n.axis.model.setActiveIntervals(t.intervals)})}),Cr("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(n){n.setAxisExpand(t)})});var vh=kn,tc=St,ZM=kt,e0=Math.min,yh=Math.max,US=Math.pow,$S={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},qg={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},q1={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},JM=0;function um(t){Ai.call(this),this._zr=t,this.group=new _n,this._track=[],this._covers=[],this._uid="brushController_"+JM++,this._handlers={},tc(eC,function(e,n){this._handlers[n]=Rn(e,this)},this)}function ZS(t,e){var n=mx[e.brushType].createCover(t,e);return n.__brushOption=e,JS(n,e),t.group.add(n),n}function Y1(t,e){var n=xu(e);return n.endCreating&&(n.endCreating(t,e),JS(e,e.__brushOption)),e}function KS(t,e){var n=e.__brushOption;xu(e).updateCoverShape(t,e,n.range,n)}function JS(t,e){var n=e.z;null==n&&(n=1e4),t.traverse(function(i){i.z=n,i.z2=n})}function X1(t,e){xu(e).updateCommon(t,e),KS(t,e)}function xu(t){return mx[t.__brushOption.brushType]}function $1(t,e,n){var i,o=t._panels;if(!o)return!0;var a=t._transform;return tc(o,function(s){s.isTargetByCursor(e,n,a)&&(i=s)}),i}function gx(t,e){var n=t._panels;if(!n)return!0;var i=e.__brushOption.panelId;return null==i||n[i]}function Z1(t){var e=t._covers,n=e.length;return tc(e,function(i){t.group.remove(i)},t),e.length=0,!!n}function Kh(t,e){var n=ZM(t._covers,function(i){var o=i.__brushOption,a=fn(o.range);return{brushType:o.brushType,panelId:o.panelId,range:a}});t.trigger("brush",n,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function px(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function QS(t,e,n,i){var o=new _n;return o.add(new Ji({name:"main",style:K1(n),silent:!0,draggable:!0,cursor:"move",drift:vh(t,e,o,"nswe"),ondragend:vh(Kh,e,{isEnd:!0})})),tc(i,function(a){o.add(new Ji({name:a,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:vh(t,e,o,a),ondragend:vh(Kh,e,{isEnd:!0})}))}),o}function n0(t,e,n,i){var o=i.brushStyle.lineWidth||0,a=yh(o,6),s=n[0][0],u=n[1][0],d=s-o/2,g=u-o/2,p=n[0][1],x=n[1][1],S=p-a+o/2,C=x-a+o/2,I=p-s,z=x-u,O=I+o,V=z+o;Jh(t,e,"main",s,u,I,z),i.transformable&&(Jh(t,e,"w",d,g,a,V),Jh(t,e,"e",S,g,a,V),Jh(t,e,"n",d,g,O,a),Jh(t,e,"s",d,C,O,a),Jh(t,e,"nw",d,g,a,a),Jh(t,e,"ne",S,g,a,a),Jh(t,e,"sw",d,C,a,a),Jh(t,e,"se",S,C,a,a))}function cm(t,e){var n=e.__brushOption,i=n.transformable,o=e.childAt(0);o.useStyle(K1(n)),o.attr({silent:!i,cursor:i?"move":"default"}),tc(["w","e","n","s","se","sw","ne","nw"],function(a){var s=e.childOfName(a),u=function d(g,p){return 1<p.length?("e"!==(C=[d(g,(p=p.split(""))[0]),d(g,p[1])])[0]&&"w"!==C[0]||C.reverse(),C.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[C=th({w:"left",e:"right",n:"top",s:"bottom"}[p],Qd(g.group))];var C}(t,a);s&&s.attr({silent:!i,invisible:!i,cursor:i?qg[u]+"-resize":null})})}function Jh(t,e,n,i,o,a,s){var d,g,p,u=e.childOfName(n);u&&u.setShape((d=t_(t,e,[[i,o],[i+a,o+s]]),{x:g=e0(d[0][0],d[1][0]),y:p=e0(d[0][1],d[1][1]),width:yh(d[0][0],d[1][0])-g,height:yh(d[0][1],d[1][1])-p}))}function K1(t){return Dn({strokeNoScale:!0},t.brushStyle)}function Yf(t,e,n,i){var o=[e0(t,n),e0(e,i)],a=[yh(t,n),yh(e,i)];return[[o[0],a[0]],[o[1],a[1]]]}function J1(t,e,n,i,o,a,s,u){var d=i.__brushOption,g=t(d.range),p=Q1(n,a,s);tc(o.split(""),function(x){var S=$S[x];g[S[0]][S[1]]+=p[S[0]]}),d.range=e(Yf(g[0][0],g[1][0],g[0][1],g[1][1])),X1(n,i),Kh(n,{isEnd:!1})}function tC(t,e,n,i,o){var a=e.__brushOption.range,s=Q1(t,n,i);tc(a,function(u){u[0]+=s[0],u[1]+=s[1]}),X1(t,e),Kh(t,{isEnd:!1})}function Q1(t,e,n){var i=t.group,o=i.transformCoordToLocal(e,n),a=i.transformCoordToLocal(0,0);return[o[0]-a[0],o[1]-a[1]]}function t_(t,e,n){var i=gx(t,e);return i&&!0!==i?i.clipPath(n,t._transform):fn(n)}function Yg(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Xg(t,e,n){return t.childOfName("main").contain(e,n)}function i0(t,e,n,i){var o,a=t._creatingCover,s=t._creatingPanel,u=t._brushOption;if(t._track.push(n.slice()),function(p){var x=p._track;if(!x.length)return!1;var S=x[x.length-1],C=x[0],I=S[0]-C[0],z=S[1]-C[1];return 6<US(I*I+z*z,.5)}(t)||a){if(s&&!a){"single"===u.brushMode&&Z1(t);var d=fn(u);d.brushType=Qh(d.brushType,s),d.panelId=!0===s?null:s.panelId,a=t._creatingCover=ZS(t,d),t._covers.push(a)}if(a){var g=mx[Qh(t._brushType,s)];a.__brushOption.range=g.getCreatingRange(t_(t,a,t._track)),i&&(Y1(t,a),g.updateCommon(t,a)),KS(t,a),o={isEnd:i}}}else i&&"single"===u.brushMode&&u.removeOnClick&&$1(t,e,n)&&Z1(t)&&(o={isEnd:i,removeOnClick:!0});return o}function Qh(t,e){return"auto"===t?e.defaultBrushType:t}um.prototype={constructor:um,enableBrush:function(t){return this._brushType&&function(e){var n=e._zr;(function(i,o,a){var s=qy(i);s[o]===a&&(s[o]=null)})(n,"globalPan",e._uid),function(i,o){tc(o,function(a,s){i.off(s,a)})}(n,e._handlers),e._brushType=e._brushOption=null}(this),t.brushType&&function(e,n){var i=e._zr;e._enableGlobalPan||function(o,a,s){qy(o).globalPan=s}(i,0,e._uid),function(o,a){tc(a,function(s,u){o.on(u,s)})}(i,e._handlers),e._brushType=n.brushType,e._brushOption=ei(fn(q1),n,!0)}(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};St(t,function(n){e[n.panelId]=fn(n)})}else this._panels=null;return this},mount:function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){tc(this._covers,t,e)},updateCovers:function(t){t=kt(t,function(d){return ei(fn(q1),d,!0)});var n=this._covers,i=this._covers=[],o=this,a=this._creatingCover;return new $c(n,t,function(d,g){return s(d.__brushOption,g)},s).add(u).update(u).remove(function(d){n[d]!==a&&o.group.remove(n[d])}).execute(),this;function s(d,g){return(null!=d.id?d.id:"\0-brush-index-"+g)+"-"+d.brushType}function u(d,g){var p=t[d];if(null!=g&&n[g]===a)i[d]=n[g];else{var x=i[d]=null!=g?(n[g].__brushOption=p,n[g]):Y1(o,ZS(o,p));X1(o,x)}}},unmount:function(){return this.enableBrush(!1),Z1(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},Fn(um,Ai);var eC={mousedown:function(t){if(this._dragging)nC(this,t);else if(!t.target||!t.target.draggable){Yg(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=$1(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var i=this.group.transformCoordToLocal(t.offsetX,t.offsetY);if(function(a,s,u){if(a._brushType&&(O=a._zr,!((I=s)<0||I>O.getWidth()||undefined>O.getHeight()))){var d=a._zr,g=a._covers,p=$1(a,s,u);if(!a._dragging)for(var x=0;x<g.length;x++){var S=g[x].__brushOption;if(p&&(!0===p||S.panelId===p.panelId)&&mx[S.brushType].contain(g[x],u[0],u[1]))return}p&&d.setCursorStyle("crosshair")}var I,O}(this,t,i),this._dragging){Yg(t);var o=i0(this,t,i,!1);o&&Kh(this,o)}},mouseup:function(t){nC(this,t)}};function nC(t,e){if(t._dragging){Yg(e);var o=t.group.transformCoordToLocal(e.offsetX,e.offsetY),a=i0(t,e,o,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&Kh(t,a)}}var mx={lineX:vx(0),lineY:vx(1),rect:{createCover:function(t,e){return QS(vh(J1,function(n){return n},function(n){return n}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=px(t);return Yf(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){n0(t,e,n,i)},updateCommon:cm,contain:Xg},polygon:{createCover:function(t,e){var n=new _n;return n.add(new rr({name:"main",style:K1(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new nr({name:"main",draggable:!0,drift:vh(tC,t,e),ondragend:vh(Kh,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:t_(t,e,n)})},updateCommon:cm,contain:Xg}};function vx(t){return{createCover:function(e,n){return QS(vh(J1,function(i){var o=[i,[0,100]];return t&&o.reverse(),o},function(i){return i[t]}),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=px(e);return[e0(n[0][t],n[1][t]),yh(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,o){var a,s=gx(e,n);if(!0!==s&&s.getLinearBrushOtherExtent)a=s.getLinearBrushOtherExtent(t,e._transform);else{var u=e._zr;a=[0,[u.getWidth(),u.getHeight()][1-t]]}var d=[i,a];t&&d.reverse(),n0(e,n,d,o)},updateCommon:cm,contain:Xg}}function iC(t){return t=n_(t),function(e,n){return gf(e,t)}}function e_(t,e){return t=n_(t),function(n){var i=null!=e?e:n,a=i?t.x:t.y;return[a,a+((i?t.width:t.height)||0)]}}function rC(t,e,n){return t=n_(t),function(i,o,a){return t.contain(o[0],o[1])&&!Pv(i,e,n)}}function n_(t){return Yi.create(t)}var QM=["axisLine","axisTickLabel","axisName"],ec=Oa({type:"parallelAxis",init:function(t,e){ec.superApply(this,"init",arguments),(this._brushController=new um(e.getZr())).on("brush",Rn(this._onBrush,this))},render:function(t,e,n,i){if(C=t,!(z=i)||"axisAreaSelect"!==z.type||e.findComponents({mainType:"parallelAxis",query:z})[0]!==C){this.axisModel=t,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new _n,this.group.add(this._axisGroup),t.get("show")){var a=function(C,I){return I.getComponent("parallel",C.get("parallelIndex"))}(t,e),s=a.coordinateSystem,u=t.getAreaSelectStyle(),d=u.width,p=En({strokeContainThreshold:d},s.getAxisLayout(t.axis.dim)),x=new Wl(t,p);St(QM,x.add,x),this._axisGroup.add(x.getGroup()),this._refreshBrushController(p,u,t,a,d,n),Na(o,this._axisGroup,i&&!1===i.animation?null:t)}}var C,z},_refreshBrushController:function(t,e,n,i,o,a){var p,x,s=n.axis.getExtent(),u=s[1]-s[0],d=Math.min(30,.1*Math.abs(u)),g=Yi.create({x:s[0],y:-o/2,width:u,height:o});g.x-=d,g.width+=2*d,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:iC(g),isTargetByCursor:rC(g,a,i),getLinearBrushOtherExtent:e_(g,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers((x=(p=n).axis,kt(p.activeIntervals,function(S){return{brushType:"lineX",panelId:"pl",range:[x.dataToCoord(S[0],!0),x.dataToCoord(S[1],!0)]}})))},_onBrush:function(t,e){var n=this.axisModel,i=n.axis,o=kt(t,function(a){return[i.coordToData(a.range[0],!0),i.coordToData(a.range[1],!0)]});!n.option.realtime!==e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},dispose:function(){this._brushController.dispose()}});Oa({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},St(tT,function(i,o){n.getZr().on(o,this._handlers[o]=Rn(i,this))},this)),_g(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){St(this._handlers,function(n,i){e.getZr().off(i,n)}),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(En({type:"parallelAxisExpand"},t))}});var tT={mousedown:function(t){Jc(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(Jc(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(5<Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&Jc(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};function Jc(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function i_(t,e,n,i){for(var o,a=[],s=0;s<n.length;s++){var u=n[s],d=t.get(t.mapDimension(u),e);o=d,("category"===i.getAxis(u).type?null==o:null==o||isNaN(o))||a.push(i.dataToPoint(d,u))}return a}function oC(t,e,n,i,o){var a=i_(t,n,i,o),s=new rr({shape:{points:a},silent:!0,z2:10});return e.add(s),t.setItemGraphicEl(n,s),s}function r_(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:.3}}function xh(t,e,n,i){var o=i.lineStyle;e.hasItemOption&&(o=e.getItemModel(n).getModel("lineStyle").getLineStyle()),t.useStyle(o);var a=t.style;a.fill=null,a.stroke=e.getItemVisual(n,"color"),a.opacity=e.getItemVisual(n,"opacity"),i.smooth&&(t.shape.smooth=i.smooth)}wl(function(t){(function(e){if(!e.parallel){var n=!1;St(e.series,function(i){i&&"parallel"===i.type&&(n=!0)}),n&&(e.parallel=[{}])}})(t),function(e){St(di(e.parallelAxis),function(n){if(Ln(n)){var i=n.parallelIndex||0,o=di(e.parallel)[i];o&&o.parallelAxisDefault&&ei(n,o.parallelAxisDefault,!1)}})}(t)}),ra.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return function(i,o){if(!i.encodeDefine){var a=o.ecModel.getComponent("parallel",o.get("parallelIndex"));if(a){var s=i.encodeDefine=pe();St(a.dimensions,function(u){var d=+u.replace("dim","");s.set(u,d)})}}}(n,this),fh(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,function(o,a){t===o&&i.push(n.getRawIndex(a))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),Ta.extend({type:"parallel",init:function(){this._dataGroup=new _n,this.group.add(this._dataGroup)},render:function(t,e,n,i){var x,S,I,z,O,V,o=this._dataGroup,a=t.getData(),s=this._data,u=t.coordinateSystem,d=u.dimensions,g=r_(t);if(a.diff(s).add(function(x){xh(oC(a,o,x,d,u),a,x,g)}).update(function(x,S){var C=s.getItemGraphicEl(S),I=i_(a,x,d,u);a.setItemGraphicEl(x,C),Xi(C,{shape:{points:I}},i&&!1===i.animation?null:t,x),xh(C,a,x,g)}).remove(function(x){var S=s.getItemGraphicEl(x);o.remove(S)}).execute(),!this._initialized){this._initialized=!0;var p=(S=t,I=(x=u).model,z=x.getRect(),O=new Ji({shape:{x:z.x,y:z.y,width:z.width,height:z.height}}),V="horizontal"===I.get("layout")?"width":"height",O.setShape(V,0),qs(O,{shape:{width:z.width,height:z.height}},S,function(){setTimeout(function(){o.removeClipPath()})}),O);o.setClipPath(p)}this._data=a},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var i=e.getData(),o=e.coordinateSystem,a=o.dimensions,s=r_(e),u=t.start;u<t.end;u++){var d=oC(i,this._dataGroup,u,a,o);d.incremental=!0,xh(d,i,u,s)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var Ul=["lineStyle","normal","opacity"];jo({seriesType:"parallel",reset:function(t,e,n){var i=t.getModel("itemStyle"),o=t.getModel("lineStyle"),a=e.get("color"),s=o.get("color")||i.get("color")||a[t.seriesIndex%a.length],u=t.get("inactiveOpacity"),d=t.get("activeOpacity"),g=t.getModel("lineStyle").getLineStyle(),p=t.coordinateSystem,x=t.getData(),S={normal:g.opacity,active:d,inactive:u};return x.setVisual("color",s),{progress:function(C,I){p.eachActiveState(I,function(z,O){var V=S[z];if("normal"===z&&I.hasItemOption){var Y=I.getItemModel(O).get(Ul,!0);null!=Y&&(V=Y)}I.setItemVisual(O,"opacity",V)},C.start,C.end)}}}});var o_=ra.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(t,e){for(var n=t.edges||t.links,i=t.data||t.nodes,o=t.levels,a=this.levelModels={},s=0;s<o.length;s++)null!=o[s].depth&&0<=o[s].depth&&(a[o[s].depth]=new dr(o[s],this,e));if(i&&n)return ES(i,n,this,!0,function(u,d){u.wrapMethod("getItemModel",function(g,p){return g.customizeGetParent(function(x){var S=this.parentModel,C=S.getData().getItemLayout(p).depth;return S.levelModels[C]||this.parentModel}),g}),d.wrapMethod("getItemModel",function(g,p){return g.customizeGetParent(function(x){var S=this.parentModel,C=S.getGraph().getEdgeByIndex(p).node1.getLayout().depth;return S.levelModels[C]||this.parentModel}),g})}).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getDataParams(t,n),o=i.data,a=o.source+" -- "+o.target;return i.value&&(a+=" : "+i.value),Vr(a)}if("node"!==n)return o_.superCall(this,"formatTooltip",t,e);var s=this.getGraph().getNodeByIndex(t).getLayout().value,u=this.getDataParams(t,n).data.name;return s&&(a=u+" : "+s),Vr(a)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},getDataParams:function(t,e){var n=o_.superCall(this,"getDataParams",t,e);if(null==n.value&&"node"===e){var i=this.getGraph().getNodeByIndex(t).getLayout().value;n.value=i}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),a_=["itemStyle","opacity"],Xf=["emphasis","itemStyle","opacity"],r0=["lineStyle","opacity"],o0=["emphasis","lineStyle","opacity"];function yx(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function a0(t,e,n){var i=t.getGraphicEl(),o=yx(t,e);null!=n&&(null==o&&(o=1),o*=n),i.downplay&&i.downplay(),i.traverse(function(a){"group"!==a.type&&a.setStyle("opacity",o)})}function Ic(t,e){var n=yx(t,e),i=t.getGraphicEl();i.traverse(function(o){"group"!==o.type&&o.setStyle("opacity",n)}),i.highlight&&i.highlight()}var eT=ia({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function s_(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&0<=e.depth}function $f(t,e,n,i,o){var a="vertical"===o?"x":"y";St(t,function(s){var u,d,g;s.sort(function(I,z){return I.getLayout()[a]-z.getLayout()[a]});for(var p=0,x=s.length,S="vertical"===o?"dx":"dy",C=0;C<x;C++)0<(g=p-(d=s[C]).getLayout()[a])&&(u=d.getLayout()[a]+g,d.setLayout("vertical"===o?{x:u}:{y:u},!0)),p=d.getLayout()[a]+d.getLayout()[S]+e;if(0<(g=p-e-("vertical"===o?i:n)))for(u=d.getLayout()[a]-g,d.setLayout("vertical"===o?{x:u}:{y:u},!0),p=u,C=x-2;0<=C;--C)0<(g=(d=s[C]).getLayout()[a]+d.getLayout()[S]+e-p)&&(u=d.getLayout()[a]-g,d.setLayout("vertical"===o?{x:u}:{y:u},!0)),p=d.getLayout()[a]})}function xx(t,e,n){St(t.slice().reverse(),function(i){St(i,function(o){if(o.outEdges.length){var a=Kf(o.outEdges,aC,n)/Kf(o.outEdges,$g,n);if(isNaN(a)){var s=o.outEdges.length;a=s?Kf(o.outEdges,dm,n)/s:0}if("vertical"===n){var u=o.getLayout().x+(a-Zf(o,n))*e;o.setLayout({x:u},!0)}else{var d=o.getLayout().y+(a-Zf(o,n))*e;o.setLayout({y:d},!0)}}})})}function aC(t,e){return Zf(t.node2,e)*t.getValue()}function dm(t,e){return Zf(t.node2,e)}function nT(t,e){return Zf(t.node1,e)*t.getValue()}function s0(t,e){return Zf(t.node1,e)}function Zf(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function $g(t){return t.getValue()}function Kf(t,e,n){for(var i=0,o=t.length,a=-1;++a<o;){var s=+e.call(t,t[a],n);isNaN(s)||(i+=s)}return i}function sC(t,e,n){St(t,function(i){St(i,function(o){if(o.inEdges.length){var a=Kf(o.inEdges,nT,n)/Kf(o.inEdges,$g,n);if(isNaN(a)){var s=o.inEdges.length;a=s?Kf(o.inEdges,s0,n)/s:0}if("vertical"===n){var u=o.getLayout().x+(a-Zf(o,n))*e;o.setLayout({x:u},!0)}else{var d=o.getLayout().y+(a-Zf(o,n))*e;o.setLayout({y:d},!0)}}})})}Zu({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var S,C,z,i=this,o=t.getGraph(),a=this.group,s=t.layoutInfo,u=s.width,d=s.height,g=t.getData(),p=t.getData("edge"),x=t.get("orient");this._model=t,a.removeAll(),a.attr("position",[s.x,s.y]),o.eachEdge(function(S){var C=new eT;C.dataIndex=S.dataIndex,C.seriesIndex=t.seriesIndex,C.dataType="edge";var I,z,O,V,Y,G,tt,Q,nt=S.getModel("lineStyle"),it=nt.get("curveness"),ct=S.node1.getLayout(),vt=S.node1.getModel(),_t=vt.get("localX"),At=vt.get("localY"),Ot=S.node2.getLayout(),Bt=S.node2.getModel(),Vt=Bt.get("localX"),$t=Bt.get("localY"),Jt=S.getLayout();switch(C.shape.extent=Math.max(1,Jt.dy),Q="vertical"===(C.shape.orient=x)?(Y=I=(null!=_t?_t*u:ct.x)+Jt.sy,G=(z=(null!=At?At*d:ct.y)+ct.dy)*(1-it)+(V=null!=$t?$t*d:Ot.y)*it,tt=O=(null!=Vt?Vt*u:Ot.x)+Jt.ty,z*it+V*(1-it)):(Y=(I=(null!=_t?_t*u:ct.x)+ct.dx)*(1-it)+(O=null!=Vt?Vt*u:Ot.x)*it,G=z=(null!=At?At*d:ct.y)+Jt.sy,tt=I*it+O*(1-it),V=(null!=$t?$t*d:Ot.y)+Jt.ty),C.setShape({x1:I,y1:z,x2:O,y2:V,cpx1:Y,cpy1:G,cpx2:tt,cpy2:Q}),C.setStyle(nt.getItemStyle()),C.style.fill){case"source":C.style.fill=S.node1.getVisual("color");break;case"target":C.style.fill=S.node2.getVisual("color")}Er(C,S.getModel("emphasis.lineStyle").getItemStyle()),a.add(C),p.setItemGraphicEl(S.dataIndex,C)}),o.eachNode(function(S){var C=S.getLayout(),I=S.getModel(),z=I.get("localX"),O=I.get("localY"),V=I.getModel("label"),Y=I.getModel("emphasis.label"),G=new Ji({shape:{x:null!=z?z*u:C.x,y:null!=O?O*d:C.y,width:C.dx,height:C.dy},style:I.getModel("itemStyle").getItemStyle()}),tt=S.getModel("emphasis.itemStyle").getItemStyle();Fl(G.style,tt,V,Y,{labelFetcher:t,labelDataIndex:S.dataIndex,defaultText:S.id,isRectText:!0}),G.setStyle("fill",S.getVisual("color")),Er(G,tt),a.add(G),g.setItemGraphicEl(S.dataIndex,G),G.dataType="node"}),g.eachItemGraphicEl(function(S,C){var I=g.getItemModel(C);I.get("draggable")&&(S.drift=function(z,O){i._focusAdjacencyDisabled=!0,this.shape.x+=z,this.shape.y+=O,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:g.getRawIndex(C),localX:this.shape.x/u,localY:this.shape.y/d})},S.ondragend=function(){i._focusAdjacencyDisabled=!1},S.draggable=!0,S.cursor="move"),S.highlight=function(){this.trigger("emphasis")},S.downplay=function(){this.trigger("normal")},S.focusNodeAdjHandler&&S.off("mouseover",S.focusNodeAdjHandler),S.unfocusNodeAdjHandler&&S.off("mouseout",S.unfocusNodeAdjHandler),I.get("focusNodeAdjacency")&&(S.on("mouseover",S.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:S.dataIndex}))}),S.on("mouseout",S.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),p.eachItemGraphicEl(function(S,C){var I=p.getItemModel(C);S.focusNodeAdjHandler&&S.off("mouseover",S.focusNodeAdjHandler),S.unfocusNodeAdjHandler&&S.off("mouseout",S.unfocusNodeAdjHandler),I.get("focusNodeAdjacency")&&(S.on("mouseover",S.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:S.dataIndex}))}),S.on("mouseout",S.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),!this._data&&t.get("animation")&&a.setClipPath((S=a.getBoundingRect(),C=t,qs(z=new Ji({shape:{x:S.x-10,y:S.y-10,width:0,height:S.height+20}}),{shape:{width:S.width+20}},C,function(){a.removeClipPath()}),z)),this._data=t.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(t){var e=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){e._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:e._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var o=t.getData(),a=o.graph,s=i.dataIndex,u=o.getItemModel(s),d=i.edgeDataIndex;if(null!=s||null!=d){var g=a.getNodeByIndex(s),p=a.getEdgeByIndex(d);if(a.eachNode(function(S){a0(S,a_,.1)}),a.eachEdge(function(S){a0(S,r0,.1)}),g){Ic(g,Xf);var x=u.get("focusNodeAdjacency");"outEdges"===x?St(g.outEdges,function(S){S.dataIndex<0||(Ic(S,o0),Ic(S.node2,Xf))}):"inEdges"===x?St(g.inEdges,function(S){S.dataIndex<0||(Ic(S,o0),Ic(S.node1,Xf))}):"allEdges"===x&&St(g.edges,function(S){S.dataIndex<0||(Ic(S,o0),S.node1!==g&&Ic(S.node1,Xf),S.node2!==g&&Ic(S.node2,Xf))})}p&&(Ic(p,o0),Ic(p.node1,Xf),Ic(p.node2,Xf))}},unfocusNodeAdjacency:function(t,e,n,i){var o=t.getGraph();o.eachNode(function(a){a0(a,a_)}),o.eachEdge(function(a){a0(a,r0)})}}),Cr({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(n){n.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),oa(function(t,e,n){t.eachSeriesByType("sankey",function(i){var C,o=i.get("nodeWidth"),a=i.get("nodeGap"),s=(C=e,xi(i.getBoxLayoutParams(),{width:C.getWidth(),height:C.getHeight()})),u=(i.layoutInfo=s).width,d=s.height,g=i.getGraph(),p=g.nodes,x=g.edges;St(p,function(C){var I=Kf(C.outEdges,$g),z=Kf(C.inEdges,$g),O=C.getValue()||0,V=Math.max(I,z,O);C.setLayout({value:V},!0)}),function(S,C,I,z,O,V,Y,G,tt){var Q,it;(function(Q,nt,it,ct,vt,_t,At){for(var Ot=[],Bt=[],Vt=[],$t=[],Jt=0,Yt=0;Yt<nt.length;Yt++)Ot[Yt]=1;for(Yt=0;Yt<Q.length;Yt++)Bt[Yt]=Q[Yt].inEdges.length,0===Bt[Yt]&&Vt.push(Q[Yt]);for(var ue=-1;Vt.length;){for(var Re=0;Re<Vt.length;Re++){var ze=Vt[Re],Ie=ze.hostGraph.data.getRawDataItem(ze.dataIndex),Je=null!=Ie.depth&&0<=Ie.depth;Je&&Ie.depth>ue&&(ue=Ie.depth),ze.setLayout({depth:Je?Ie.depth:Jt},!0),ze.setLayout("vertical"===_t?{dy:it}:{dx:it},!0);for(var mn=0;mn<ze.outEdges.length;mn++){var hi=ze.outEdges[mn];Ot[nt.indexOf(hi)]=0;var ai=hi.node2;0==--Bt[Q.indexOf(ai)]&&$t.indexOf(ai)<0&&$t.push(ai)}}++Jt,Vt=$t,$t=[]}for(Yt=0;Yt<Ot.length;Yt++)if(1===Ot[Yt])throw new Error("Sankey is a DAG, the original data has cycle!");var Pr,oo,Oi=Jt-1<ue?ue:Jt-1;At&&"left"!==At&&function(Ur,Pr,oo,Ec){if("right"===Pr){for(var nc=[],op=Ur,xm=0;op.length;){for(var P_=0;P_<op.length;P_++){var bD=op[P_];bD.setLayout({skNodeHeight:xm},!0);for(var _D=0;_D<bD.inEdges.length;_D++){var sI=bD.inEdges[_D];nc.indexOf(sI.node1)<0&&nc.push(sI.node1)}}op=nc,nc=[],++xm}St(Ur,function(E_){s_(E_)||E_.setLayout({depth:Math.max(0,Ec-E_.getLayout().skNodeHeight)},!0)})}else"justify"===Pr&&(j2=Ec,St(Ur,function(wD){s_(wD)||wD.outEdges.length||wD.setLayout({depth:j2},!0)}));var j2}(Q,At,0,Oi),Pr="vertical"===_t?(vt-it)/Oi:(ct-it)/Oi,oo=_t,St(Q,function(Ec){var nc=Ec.getLayout().depth*Pr;Ec.setLayout("vertical"===oo?{y:nc}:{x:nc},!0)})})(S,C,I,O,V,G,tt),function(Q,nt,it,ct,vt,_t,At){var Jt,Yt,ue,Ot=(Jt=[],Yt="vertical"===At?"y":"x",(ue=ja(Q,function(Re){return Re.getLayout()[Yt]})).keys.sort(function(Re,ze){return Re-ze}),St(ue.keys,function(Re){Jt.push(ue.buckets.get(Re))}),Jt);(function(Vt,$t,Jt,Yt,ue,Re){var ze=1/0;St(Vt,function(Ie){var Je=Ie.length,mn=0;St(Ie,function(We){mn+=We.getLayout().value});var hi="vertical"===Re?(Yt-(Je-1)*ue)/mn:(Jt-(Je-1)*ue)/mn;hi<ze&&(ze=hi)}),St(Vt,function(Ie){St(Ie,function(Je,mn){var hi=Je.getLayout().value*ze;"vertical"===Re?(Je.setLayout({x:mn},!0),Je.setLayout({dx:hi},!0)):(Je.setLayout({y:mn},!0),Je.setLayout({dy:hi},!0))})}),St($t,function(Ie){var Je=+Ie.getValue()*ze;Ie.setLayout({dy:Je},!0)})})(Ot,nt,it,ct,vt,At),$f(Ot,vt,it,ct,At);for(var Bt=1;0<_t;_t--)xx(Ot,Bt*=.99,At),$f(Ot,vt,it,ct,At),sC(Ot,Bt,At),$f(Ot,vt,it,ct,At)}(S,C,V,O,z,Y,G),it="vertical"===G?"x":"y",St(Q=S,function(ct){ct.outEdges.sort(function(vt,_t){return vt.node2.getLayout()[it]-_t.node2.getLayout()[it]}),ct.inEdges.sort(function(vt,_t){return vt.node1.getLayout()[it]-_t.node1.getLayout()[it]})}),St(Q,function(ct){var vt=0,_t=0;St(ct.outEdges,function(At){At.setLayout({sy:vt},!0),vt+=At.getLayout().dy}),St(ct.inEdges,function(At){At.setLayout({ty:_t},!0),_t+=At.getLayout().dy})})}(p,x,o,a,u,d,0!==Mn(p,function(S){return 0===S.getLayout().value}).length?0:i.get("layoutIterations"),i.get("orient"),i.get("nodeAlign"))})}),jo(function(t,e){t.eachSeriesByType("sankey",function(n){var i=n.getGraph().nodes;if(i.length){var o=1/0,a=-1/0;St(i,function(s){var u=s.getLayout().value;u<o&&(o=u),a<u&&(a=u)}),St(i,function(s){var u=new Nr({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:n.get("color")}).mapValueToVisual(s.getLayout().value),d=s.getModel().get("itemStyle.color");s.setVisual("color",null!=d?d:u)})}})});var l0={_baseAxisDim:null,getInitialData:function(t,e){var n,i,o=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),s=o.get("type"),u=a.get("type");"category"===s?(t.layout="horizontal",n=o.getOrdinalMeta(),i=!0):"category"===u?(t.layout="vertical",n=a.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var d=["x","y"],g="horizontal"===t.layout?0:1,p=this._baseAxisDim=d[g],x=d[1-g],S=[o,a],C=S[g].get("type"),I=S[1-g].get("type"),z=t.data;if(z&&i){var O=[];St(z,function(G,tt){var Q;G.value&&Fe(G.value)?(Q=G.value.slice(),G.value.unshift(tt)):Fe(G)?(Q=G.slice(),G.unshift(tt)):Q=G,O.push(Q)}),t.data=O}var V=this.defaultValueDimensions,Y=[{name:p,type:Qm(C),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:x,type:Qm(I),dimsDef:V.slice()}];return qp(this,{coordDimensions:Y,dimensionsCount:V.length+1,encodeDefaulter:kn(A0,Y,this)})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};Fn(ra.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),l0,!0);var bx=["itemStyle"],Zg=["emphasis","itemStyle"],l_=(Ta.extend({type:"boxplot",render:function(t,e,n){var i=t.getData(),o=this.group,a=this._data;this._data||o.removeAll();var s="horizontal"===t.get("layout")?1:0;i.diff(a).add(function(u){if(i.hasValue(u)){var d=_x(i.getItemLayout(u),i,u,s,!0);i.setItemGraphicEl(u,d),o.add(d)}}).update(function(u,d){var g=a.getItemGraphicEl(d);if(i.hasValue(u)){var p=i.getItemLayout(u);g?lC(p,g,i,u):g=_x(p,i,u,s),o.add(g),i.setItemGraphicEl(u,g)}else o.remove(g)}).remove(function(u){var d=a.getItemGraphicEl(u);d&&o.remove(d)}).execute(),this._data=i},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&e.remove(i)})},dispose:_e}),R.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])}}));function _x(t,e,n,i,o){var u,d,g,a=t.ends,s=new l_({shape:{points:o?(u=a,d=i,g=t,kt(u,function(p){return(p=p.slice())[d]=g.initBaseline,p})):a}});return lC(t,s,e,n,o),s}function lC(t,e,n,i,o){(0,yl[o?"initProps":"updateProps"])(e,{shape:{points:t.ends}},n.hostModel,i);var s=n.getItemModel(i),u=s.getModel(bx),d=n.getItemVisual(i,"color"),g=u.getItemStyle(["borderColor"]);g.stroke=d,g.strokeNoScale=!0,e.useStyle(g),e.z2=100,Er(e,s.getModel(Zg).getItemStyle())}var hm=["itemStyle","borderColor"],Kg=St;jo(function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(i){var o=n[i.seriesIndex%n.length],a=i.getData();a.setVisual({legendSymbol:"roundRect",color:i.get(hm)||o}),t.isSeriesFiltered(i)||a.each(function(s){var u=a.getItemModel(s);a.setItemVisual(s,{color:u.get(hm,!0)})})})}),oa(function(t){var e=function(n){var i=[],o=[];return n.eachSeriesByType("boxplot",function(a){var s=a.getBaseAxis(),u=zn(o,s);u<0&&(o[u=o.length]=s,i[u]={axis:s,seriesModels:[]}),i[u].seriesModels.push(a)}),i}(t);Kg(e,function(n){var i=n.seriesModels;i.length&&(function(o){var a,s,u=o.axis,d=o.seriesModels,g=d.length,p=o.boxWidthList=[],x=o.boxOffsetList=[],S=[];if("category"===u.type)s=u.getBandWidth();else{var C=0;Kg(d,function(Y){C=Math.max(C,Y.getData().count())}),a=u.getExtent(),Math.abs(a[1]-a[0])}Kg(d,function(Y){var G=Y.get("boxWidth");Fe(G)||(G=[G,G]),S.push([ln(G[0],s)||0,ln(G[1],s)||0])});var I=.8*s-2,z=I/g*.3,O=(I-z*(g-1))/g,V=O/2-I/2;Kg(d,function(Y,G){x.push(V),V+=z+O,p.push(Math.min(Math.max(O,S[G][0]),S[G][1]))})}(n),Kg(i,function(o,a){!function(s,u,d){var g=s.coordinateSystem,p=s.getData(),x=d/2,S="horizontal"===s.get("layout")?0:1,C=1-S,I=["x","y"],z=p.mapDimension(I[S]),O=p.mapDimension(I[C],!0);if(!(null==z||O.length<5))for(var V=0;V<p.count();V++){var Y=p.get(z,V),G=vt(Y,O[2],V),tt=vt(Y,O[0],V),Q=vt(Y,O[1],V),nt=vt(Y,O[3],V),it=vt(Y,O[4],V),ct=[];_t(ct,Q,0),_t(ct,nt,1),ct.push(tt,Q,it,nt),At(ct,tt),At(ct,it),At(ct,G),p.setItemLayout(V,{initBaseline:G[C],ends:ct})}function vt(Ot,Bt,Vt){var $t,Jt=p.get(Bt,Vt),Yt=[];return Yt[S]=Ot,Yt[C]=Jt,isNaN(Ot)||isNaN(Jt)?$t=[NaN,NaN]:($t=g.dataToPoint(Yt))[S]+=u,$t}function _t(Ot,Bt,Vt){var $t=Bt.slice(),Jt=Bt.slice();$t[S]+=x,Jt[S]-=x,Vt?Ot.push($t,Jt):Ot.push(Jt,$t)}function At(Ot,Bt){var Vt=Bt.slice(),$t=Bt.slice();Vt[S]-=x,$t[S]+=x,Ot.push(Vt,$t)}}(o,n.boxOffsetList[a],n.boxWidthList[a])}))})}),Fn(ra.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)}}),l0,!0);var fm=["itemStyle"],Jg=["emphasis","itemStyle"],Sx=["color","color0","borderColor","borderColor0"],uC=(Ta.extend({type:"candlestick",render:function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,i=this.group,o=e.getLayout("isSimpleBox"),a=t.get("clip",!0),s=t.coordinateSystem,u=s.getArea&&s.getArea();this._data||i.removeAll(),e.diff(n).add(function(d){if(e.hasValue(d)){var g,p=e.getItemLayout(d);if(a&&Cx(u,p))return;qs(g=gm(p,0,!0),{shape:{points:p.ends}},t,d),Mx(g,e,d,o),i.add(g),e.setItemGraphicEl(d,g)}}).update(function(d,g){var p=n.getItemGraphicEl(g);if(e.hasValue(d)){var x=e.getItemLayout(d);a&&Cx(u,x)?i.remove(p):(p?Xi(p,{shape:{points:x.ends}},t,d):p=gm(x),Mx(p,e,d,o),i.add(p),e.setItemGraphicEl(d,p))}else i.remove(p)}).remove(function(d){var g=n.getItemGraphicEl(d);g&&i.remove(g)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),u_(t,this.group);var e=t.get("clip",!0)?Ay(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},_incrementalRenderNormal:function(t,e){for(var n,i=e.getData(),o=i.getLayout("isSimpleBox");null!=(n=t.next());){var a;Mx(a=gm(i.getItemLayout(n)),i,n,o),a.incremental=!0,this.group.add(a)}},_incrementalRenderLarge:function(t,e){u_(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:_e}),R.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}}));function gm(t,e,n){var i=t.ends;return new uC({shape:{points:n?function(o,a){return kt(o,function(s){return(s=s.slice())[1]=a.initBaseline,s})}(i,t):i},z2:100})}function Cx(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function Mx(t,e,n,i){var o=e.getItemModel(n),a=o.getModel(fm),s=e.getItemVisual(n,"color"),u=e.getItemVisual(n,"borderColor")||s,d=a.getItemStyle(Sx);t.useStyle(d),t.style.strokeNoScale=!0,t.style.fill=s,t.style.stroke=u,t.__simpleBox=i,Er(t,o.getModel(Jg).getItemStyle())}var cC=R.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];t.moveTo(o,n[i++]),t.lineTo(o,n[i++])}else i+=3}});function u_(t,e,n){var i=t.getData(),o=i.getLayout("largePoints"),a=new cC({shape:{points:o},__sign:1});e.add(a);var s=new cC({shape:{points:o},__sign:-1});e.add(s),r(1,a,t,i),r(-1,s,t,i),n&&(a.incremental=!0,s.incremental=!0)}function r(t,e,n,i){var o=0<t?"P":"N",a=i.getVisual("borderColor"+o)||i.getVisual("color"+o),s=n.getModel(fm).getItemStyle(Sx);e.useStyle(s),e.style.fill=null,e.style.stroke=a}var l=["itemStyle","borderColor"],c=["itemStyle","borderColor0"],h=["itemStyle","color"],m=["itemStyle","color0"],M={seriesType:"candlestick",plan:Ap(),performRawSeries:!0,reset:function(t,e){if(t.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:i(1,t),borderColorN:i(-1,t)}),!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(o,a){for(var s;null!=(s=o.next());){var u=a.getItemModel(s),d=a.getItemLayout(s).sign;a.setItemVisual(s,{color:n(d,u),borderColor:i(d,u)})}}};function n(o,a){return a.get(0<o?h:m)}function i(o,a){return a.get(0<o?l:c)}}},k="undefined"!=typeof Float32Array?Float32Array:Array,P={seriesType:"candlestick",plan:Ap(),reset:function(t){var x,S,C,I,z,O,V,Y,e=t.coordinateSystem,n=t.getData(),i=(S=n,z="category"===(I=(x=t).getBaseAxis()).type?I.getBandWidth():(C=I.getExtent(),Math.abs(C[1]-C[0])/S.count()),O=ln(_i(x.get("barMaxWidth"),z),z),V=ln(_i(x.get("barMinWidth"),1),z),null!=(Y=x.get("barWidth"))?ln(Y,z):Math.max(Math.min(z/2,O),V)),o=["x","y"],a=n.mapDimension(o[0]),s=n.mapDimension(o[1],!0),u=s[0],d=s[1],g=s[2],p=s[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==a||s.length<4))return{progress:t.pipelineContext.large?function(x,S){for(var C,I,z=new k(4*x.count),O=0,V=[],Y=[];null!=(I=x.next());){var G=S.get(a,I),tt=S.get(u,I),Q=S.get(d,I),nt=S.get(g,I),it=S.get(p,I);isNaN(G)||isNaN(nt)||isNaN(it)?(z[O++]=NaN,O+=3):(z[O++]=N(S,I,tt,Q,d),V[0]=G,V[1]=nt,C=e.dataToPoint(V,null,Y),z[O++]=C?C[0]:NaN,z[O++]=C?C[1]:NaN,V[1]=it,C=e.dataToPoint(V,null,Y),z[O++]=C?C[1]:NaN)}S.setLayout("largePoints",z)}:function(x,S){for(var C;null!=(C=x.next());){var I=S.get(a,C),z=S.get(u,C),O=S.get(d,C),V=S.get(g,C),Y=S.get(p,C),G=Math.min(z,O),tt=Math.max(z,O),Q=_t(G,I),nt=_t(tt,I),it=_t(V,I),ct=_t(Y,I),vt=[];At(vt,nt,0),At(vt,Q,1),vt.push(Bt(ct),Bt(nt),Bt(it),Bt(Q)),S.setItemLayout(C,{sign:N(S,C,z,O,d),initBaseline:O<z?nt[1]:Q[1],ends:vt,brushRect:(Vt=V,$t=Y,Jt=I,Yt=void 0,ue=void 0,Yt=_t(Vt,Jt),ue=_t($t,Jt),Yt[0]-=i/2,ue[0]-=i/2,{x:Yt[0],y:Yt[1],width:i,height:ue[1]-Yt[1]})})}var Vt,$t,Jt,Yt,ue;function _t(Vt,$t){var Jt=[];return Jt[0]=$t,Jt[1]=Vt,isNaN($t)||isNaN(Vt)?[NaN,NaN]:e.dataToPoint(Jt)}function At(Vt,$t,Jt){var Yt=$t.slice(),ue=$t.slice();Yt[0]=ml(Yt[0]+i/2,1,!1),ue[0]=ml(ue[0]-i/2,1,!0),Jt?Vt.push(Yt,ue):Vt.push(ue,Yt)}function Bt(Vt){return Vt[0]=ml(Vt[0],1),Vt}}}}};function N(t,e,n,i,o){return i<n?-1:n<i?1:0<e?t.get(o,e-1)<=i?1:-1:1}function F(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(i){i.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})})}function W(t,e){_n.call(this);var n=new Ju(t,e),i=new _n;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}wl(function(t){t&&Fe(t.series)&&St(t.series,function(e){Ln(e)&&"k"===e.type&&(e.type="candlestick")})}),jo(M),oa(P),ra.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return fh(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var q=W.prototype;q.stopEffectAnimation=function(){this.childAt(1).removeAll()},q.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=this.childAt(1),o=0;o<3;o++){var a=Mc(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var s=-o/3*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(s).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),i.add(a)}F(i,t)},q.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],o=0;o<i.length;o++){var a=i[o];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}F(n,t)},q.highlight=function(){this.trigger("emphasis")},q.downplay=function(){this.trigger("normal")},q.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var z,i=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),s=(Fe(z=t.getItemVisual(e,"symbolSize"))||(z=[+z,+z]),z),u=t.getItemVisual(e,"color");i.attr("scale",s),i.traverse(function(z){z.attr({fill:u})});var d=o.getShallow("symbolOffset");if(d){var g=i.position;g[0]=ln(d[0],s[0]),g[1]=ln(d[1],s[1])}var p=t.getItemVisual(e,"symbolRotate");i.rotation=(p||0)*Math.PI/180||0;var x={};if(x.showEffectOn=n.get("showEffectOn"),x.rippleScale=o.get("rippleEffect.scale"),x.brushType=o.get("rippleEffect.brushType"),x.period=1e3*o.get("rippleEffect.period"),x.effectOffset=e/t.count(),x.z=o.getShallow("z")||0,x.zlevel=o.getShallow("zlevel")||0,x.symbolType=a,x.color=u,x.rippleEffectColor=o.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===x.showEffectOn)this._effectCfg?this.updateEffectAnimation(x):this.startEffectAnimation(x),this._effectCfg=x;else{this._effectCfg=null,this.stopEffectAnimation();var S=this.childAt(0),C=function(){S.highlight(),"render"!==x.showEffectOn&&this.startEffectAnimation(x)},I=function(){S.downplay(),"render"!==x.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",C,this).on("mouseout",I,this).on("emphasis",C,this).on("normal",I,this)}this._effectCfg=x},q.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},ki(W,_n),Zu({type:"effectScatter",init:function(){this._symbolDraw=new Ng(W)},render:function(t,e,n){var i=t.getData(),o=this._symbolDraw;o.updateData(i),this.group.add(o.group)},updateTransform:function(t,e,n){var i=t.getData();this.group.dirty();var o=mv().reset(t);o.progress&&o.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=hn(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}}),jo(Yh("effectScatter","circle")),oa(mv("effectScatter"));var Z="undefined"==typeof Uint32Array?Array:Uint32Array,ht="undefined"==typeof Float64Array?Array:Float64Array;function at(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=kt(e,function(n){var i={coords:[n[0].coord,n[1].coord]};return n[0].name&&(i.fromName=n[0].name),n[1].name&&(i.toName=n[1].name),Zt([i,n[0],n[1]])}))}var gt=ra.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],at(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),gt.superApply(this,"init",arguments)},mergeOption:function(t){if(at(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}gt.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=ee(this._flatCoords,e.flatCoords),this._flatCoordsOffset=ee(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],o=0;o<i;o++)e[o]=e[o]||[],e[o][0]=this._flatCoords[n+2*o],e[o][1]=this._flatCoords[n+2*o+1];return i}var a=this._getCoordsFromItemModel(t);for(o=0;o<a.length;o++)e[o]=e[o]||[],e[o][0]=a[o][0],e[o][1]=a[o][1];return a.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"!=typeof t[0])return{flatCoordsOffset:null,flatCoords:null,count:t.length};for(var n=t.length,i=new Z(n),o=new ht(n),a=0,s=0,u=0,d=0;d<n;){u++;var g=t[d++];i[s++]=a+e,i[s++]=g;for(var p=0;p<g;p++){var x=t[d++],S=t[d++];o[a++]=x,o[a++]=S}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,s),flatCoords:o,count:u}},getInitialData:function(t,e){var n=new qa(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(i,o,a,s){if(i instanceof Array)return NaN;n.hasItemOption=!0;var u=i.value;return null!=u?u instanceof Array?u[s]:u:void 0}),n},formatTooltip:function(t){var e=this.getData().getItemModel(t),n=e.get("name");if(n)return n;var i=e.get("fromName"),o=e.get("toName"),a=[];return null!=i&&a.push(i),null!=o&&a.push(o),Vr(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function rt(t,e,n){_n.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}var dt=rt.prototype;function mt(t,e,n){_n.call(this),this._createPolyline(t,e,n)}dt.createLine=function(t,e,n){return new Yv(t,e,n)},dt._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),i=n.get("symbolSize"),o=n.get("symbol");Fe(i)||(i=[i,i]);var a=n.get("color")||t.getItemVisual(e,"color"),s=this.childAt(1);this._symbolType!==o&&(this.remove(s),(s=Mc(o,-.5,-.5,1,1,a)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",a),s.setStyle(n.getItemStyle(["color"])),s.attr("scale",i),s.setColor(a),s.attr("scale",i),this._symbolType=o,this._symbolScale=i,this._updateEffectAnimation(t,n,e))},dt._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var o=this,a=t.getItemLayout(n),s=1e3*e.get("period"),u=e.get("loop"),d=e.get("constantSpeed"),g=pr(e.get("delay"),function(C){return C/t.count()*s/3}),p="function"==typeof g;if(i.ignore=!0,this.updateAnimationPoints(i,a),0<d&&(s=this.getLineLength(i)/d*1e3),s!==this._period||u!==this._loop){i.stopAnimation();var x=g;p&&(x=g(n)),0<i.__t&&(x=-s*i.__t),i.__t=0;var S=i.animate("",u).when(s,{__t:1}).delay(x).during(function(){o.updateSymbolPosition(i)});u||S.done(function(){o.remove(i)}),S.start()}this._period=s,this._loop=u}},dt.getLineLength=function(t){return lr(t.__p1,t.__cp1)+lr(t.__cp1,t.__p2)},dt.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},dt.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},dt.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,o=t.__t,a=t.position,s=[a[0],a[1]],u=fo,d=Ud;a[0]=u(e[0],i[0],n[0],o),a[1]=u(e[1],i[1],n[1],o);var g=d(e[0],i[0],n[0],o),p=d(e[1],i[1],n[1],o);if(t.rotation=-Math.atan2(p,g)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==t.__lastT&&t.__lastT<t.__t){var x=1.05*lr(s,a);t.attr("scale",[t.scale[0],x]),1===o&&(a[0]=s[0]+(a[0]-s[0])/2,a[1]=s[1]+(a[1]-s[1])/2)}else 1===t.__lastT?(x=2*lr(e,a),t.attr("scale",[t.scale[0],x])):t.attr("scale",this._symbolScale);t.__lastT=t.__t,t.ignore=!1},dt.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},ki(rt,_n);var Dt=mt.prototype;function Pt(t,e,n){rt.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}Dt._createPolyline=function(t,e,n){var i=t.getItemLayout(e),o=new rr({shape:{points:i}});this.add(o),this._updateCommonStl(t,e,n)},Dt.updateData=function(t,e,n){var i=t.hostModel;Xi(this.childAt(0),{shape:{points:t.getItemLayout(e)}},i,e),this._updateCommonStl(t,e,n)},Dt._updateCommonStl=function(t,e,n){var i=this.childAt(0),o=t.getItemModel(e),a=t.getItemVisual(e,"color"),s=n&&n.lineStyle,u=n&&n.hoverLineStyle;n&&!t.hasItemOption||(s=o.getModel("lineStyle").getLineStyle(),u=o.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(Dn({strokeNoScale:!0,fill:"none",stroke:a},s)),i.hoverStyle=u,Er(this)},Dt.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},ki(mt,_n);var wt=Pt.prototype;wt.createLine=function(t,e,n){return new mt(t,e,n)},wt.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,o=1;o<e.length;o++)i+=lr(e[o-1],e[o]),n.push(i);if(0!==i){for(o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i}},wt.getLineLength=function(t){return this._length},wt.updateSymbolPosition=function(t){var e=t.__t,n=this._points,i=this._offsets,o=n.length;if(i){var a=this._lastFrame;if(e<this._lastFramePercent){for(s=Math.min(a+1,o-1);0<=s&&!(i[s]<=e);s--);s=Math.min(s,o-2)}else{for(var s=a;s<o&&!(i[s]>e);s++);s=Math.min(s-1,o-2)}De(t.position,n[s],n[s+1],(e-i[s])/(i[s+1]-i[s])),t.rotation=-Math.atan2(n[s+1][1]-n[s][1],n[s+1][0]-n[s][0])-Math.PI/2,this._lastFrame=s,this._lastFramePercent=e,t.ignore=!1}},ki(Pt,rt);var Ht=ia({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,i=e.curveness;if(e.polyline)for(var o=0;o<n.length;){var a=n[o++];if(0<a){t.moveTo(n[o++],n[o++]);for(var s=1;s<a;s++)t.lineTo(n[o++],n[o++])}}else for(o=0;o<n.length;){var u=n[o++],d=n[o++],g=n[o++],p=n[o++];t.moveTo(u,d),0<i?t.quadraticCurveTo((u+g)/2-(d-p)*i,(d+p)/2-(g-u)*i,g,p):t.lineTo(g,p)}},findDataIndex:function(t,e){var n=this.shape,i=n.segs,o=n.curveness;if(n.polyline)for(var a=0,s=0;s<i.length;){var u=i[s++];if(0<u)for(var d=i[s++],g=i[s++],p=1;p<u;p++)if(Bl(d,g,x=i[s++],S=i[s++]))return a;a++}else for(a=0,s=0;s<i.length;){d=i[s++],g=i[s++];var x=i[s++],S=i[s++];if(0<o){if(uu(d,g,(d+x)/2-(g-S)*o,(g+S)/2-(x-d)*o,x,S))return a}else if(Bl(d,g,x,S))return a;a++}return-1}});function ce(){this.group=new _n}var Xt=ce.prototype;Xt.isPersistent=function(){return!this._incremental},Xt.updateData=function(t){this.group.removeAll();var e=new Ht({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},Xt.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),5e5<t.count()?(this._incremental||(this._incremental=new ss({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Xt.incrementalUpdate=function(t,e){var n=new Ht;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},Xt.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Xt._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=e.getVisual("color");o&&t.setStyle("stroke",o),t.setStyle("fill"),n||(t.seriesIndex=i.seriesIndex,t.on("mousemove",function(a){t.dataIndex=null;var s=t.findDataIndex(a.offsetX,a.offsetY);0<s&&(t.dataIndex=s+t.__startIndex)}))},Xt._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var xe={seriesType:"lines",plan:Ap(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(o,a){var s=[];if(i){var u,d=o.end-o.start;if(n){for(var g=0,p=o.start;p<o.end;p++)g+=t.getLineCoordsCount(p);u=new Float32Array(d+2*g)}else u=new Float32Array(4*d);var x=0,S=[];for(p=o.start;p<o.end;p++){var C=t.getLineCoords(p,s);n&&(u[x++]=C);for(var I=0;I<C;I++)S=e.dataToPoint(s[I],!1,S),u[x++]=S[0],u[x++]=S[1]}a.setLayout("linesPoints",u)}else for(p=o.start;p<o.end;p++){var z=a.getItemModel(p),O=(C=t.getLineCoords(p,s),[]);if(n)for(var V=0;V<C;V++)O.push(e.dataToPoint(s[V]));else{O[0]=e.dataToPoint(s[0]),O[1]=e.dataToPoint(s[1]);var Y=z.get("lineStyle.curveness");+Y&&(O[2]=[(O[0][0]+O[1][0])/2-(O[0][1]-O[1][1])*Y,(O[0][1]+O[1][1])/2-(O[1][0]-O[0][0])*Y])}a.setItemLayout(p,O)}}}}};function te(t){return t instanceof Array||(t=[t,t]),t}Zu({type:"lines",init:function(){},render:function(t,e,n){var i=t.getData(),o=this._updateLineDraw(i,t),a=t.get("zlevel"),s=t.get("effect.trailLength"),u=n.getZr(),d="svg"===u.painter.getType();d||u.painter.getLayer(a).clear(!0),null==this._lastZlevel||d||u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&s&&(d||u.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})),o.updateData(i);var g=t.get("clip",!0)&&Ay(t.coordinateSystem,!1,t);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateLineDraw(i,t).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var a=xe.reset(t);a.progress&&a.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,i=this._showEffect(e),o=!!e.get("polyline"),a=e.pipelineContext.large;return n&&i===this._hasEffet&&o===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new ce:new Xv(o?i?Pt:mt:i?rt:Yv),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}});var Ee="lineStyle.opacity".split("."),be={seriesType:"lines",reset:function(t,e,n){var i=te(t.get("symbol")),o=te(t.get("symbolSize")),a=t.getData();return a.setVisual("fromSymbol",i&&i[0]),a.setVisual("toSymbol",i&&i[1]),a.setVisual("fromSymbolSize",o&&o[0]),a.setVisual("toSymbolSize",o&&o[1]),a.setVisual("opacity",t.get(Ee)),{dataEach:a.hasItemOption?function(s,u){var d=s.getItemModel(u),g=te(d.getShallow("symbol",!0)),p=te(d.getShallow("symbolSize",!0)),x=d.get(Ee);g[0]&&s.setItemVisual(u,"fromSymbol",g[0]),g[1]&&s.setItemVisual(u,"toSymbol",g[1]),p[0]&&s.setItemVisual(u,"fromSymbolSize",p[0]),p[1]&&s.setItemVisual(u,"toSymbolSize",p[1]),s.setItemVisual(u,"opacity",x)}:null}}};function Ne(){var t=Dr();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}oa(xe),jo(be),ra.extend({type:"series.heatmap",getInitialData:function(t,e){return fh(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=Ca.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),Ne.prototype={update:function(t,e,n,i,o,a){var s=this._getBrush(),u=this._getGradient(t,o,"inRange"),d=this._getGradient(t,o,"outOfRange"),g=this.pointSize+this.blurSize,p=this.canvas,x=p.getContext("2d"),S=t.length;p.width=e,p.height=n;for(var C=0;C<S;++C){var I=t[C],z=I[0],O=I[1],V=i(I[2]);x.globalAlpha=V,x.drawImage(s,z-g,O-g)}if(!p.width||!p.height)return p;for(var Y=x.getImageData(0,0,p.width,p.height),G=Y.data,tt=0,Q=G.length,nt=this.minOpacity,it=this.maxOpacity-nt;tt<Q;){V=G[tt+3]/256;var ct=4*Math.floor(255*V);if(0<V){var vt=a(V)?u:d;0<V&&(V=V*it+nt),G[tt++]=vt[ct],G[tt++]=vt[1+ct],G[tt++]=vt[2+ct],G[tt++]=vt[3+ct]*V*256}else tt+=4}return x.putImageData(Y,0,0),p},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=Dr()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},_getGradient:function(t,e,n){for(var i=this._gradientPixels,o=i[n]||(i[n]=new Uint8ClampedArray(1024)),a=[0,0,0,0],s=0,u=0;u<256;u++)e[n](u/255,!0,a),o[s++]=a[0],o[s++]=a[1],o[s++]=a[2],o[s++]=a[3];return o}},Zu({type:"heatmap",render:function(t,e,n){var i;e.eachComponent("visualMap",function(a){a.eachTargetSeries(function(s){s===t&&(i=a)})}),this.group.removeAll(),this._incrementalDisplayable=null;var o=t.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):function(a){var s=a.dimensions;return"lng"===s[0]&&"lat"===s[1]}(o)&&this._renderOnGeo(o,t,i,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,i){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,i,o){var a,s,u=t.coordinateSystem;if("cartesian2d"===u.type){var d=u.getAxis("x"),g=u.getAxis("y");a=d.getBandWidth(),s=g.getBandWidth()}for(var p=this.group,x=t.getData(),S="emphasis.itemStyle",C="emphasis.label",I=t.getModel("itemStyle").getItemStyle(["color"]),z=t.getModel(S).getItemStyle(),O=t.getModel("label"),V=t.getModel(C),Y=u.type,G="cartesian2d"===Y?[x.mapDimension("x"),x.mapDimension("y"),x.mapDimension("value")]:[x.mapDimension("time"),x.mapDimension("value")],tt=n;tt<i;tt++){var Q;if("cartesian2d"===Y){if(isNaN(x.get(G[2],tt)))continue;var nt=u.dataToPoint([x.get(G[0],tt),x.get(G[1],tt)]);Q=new Ji({shape:{x:Math.floor(Math.round(nt[0])-a/2),y:Math.floor(Math.round(nt[1])-s/2),width:Math.ceil(a),height:Math.ceil(s)},style:{fill:x.getItemVisual(tt,"color"),opacity:x.getItemVisual(tt,"opacity")}})}else{if(isNaN(x.get(G[1],tt)))continue;Q=new Ji({z2:1,shape:u.dataToRect([x.get(G[0],tt)]).contentShape,style:{fill:x.getItemVisual(tt,"color"),opacity:x.getItemVisual(tt,"opacity")}})}var it=x.getItemModel(tt);x.hasItemOption&&(I=it.getModel("itemStyle").getItemStyle(["color"]),z=it.getModel(S).getItemStyle(),O=it.getModel("label"),V=it.getModel(C));var ct=t.getRawValue(tt),vt="-";ct&&null!=ct[2]&&(vt=ct[2]),Fl(I,z,O,V,{labelFetcher:t,labelDataIndex:tt,defaultText:vt,isRectText:!0}),Q.setStyle(I),Er(Q,x.hasItemOption?z:En({},z)),(Q.incremental=o)&&(Q.useHoverLayer=!0),p.add(Q),x.setItemGraphicEl(tt,Q)}},_renderOnGeo:function(t,e,n,i){var o=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,s=e.getData(),u=this._hmLayer||this._hmLayer||new Ne;u.blurSize=e.get("blurSize"),u.pointSize=e.get("pointSize"),u.minOpacity=e.get("minOpacity"),u.maxOpacity=e.get("maxOpacity");var d=t.getViewRect().clone(),g=t.getRoamTransform();d.applyTransform(g);var Q,nt,it,p=Math.max(d.x,0),x=Math.max(d.y,0),S=Math.min(d.width+d.x,i.getWidth()),C=Math.min(d.height+d.y,i.getHeight()),I=S-p,z=C-x,O=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],V=s.mapArray(O,function(Q,nt,it){var ct=t.dataToPoint([Q,nt]);return ct[0]-=p,ct[1]-=x,ct.push(it),ct}),Y=n.getExtent(),G="visualMap.continuous"===n.type?(nt=[((nt=n.option.range)[0]-(Q=Y)[0])/(it=Q[1]-Q[0]),(nt[1]-Q[0])/it],function(ct){return ct>=nt[0]&&ct<=nt[1]}):function(Q,nt,it){var ct=Q[1]-Q[0],vt=(nt=kt(nt,function(At){return{interval:[(At.interval[0]-Q[0])/ct,(At.interval[1]-Q[0])/ct]}})).length,_t=0;return function(At){for(var Ot=_t;Ot<vt;Ot++)if((Bt=nt[Ot].interval)[0]<=At&&At<=Bt[1]){_t=Ot;break}if(Ot===vt)for(Ot=_t-1;0<=Ot;Ot--){var Bt;if((Bt=nt[Ot].interval)[0]<=At&&At<=Bt[1]){_t=Ot;break}}return 0<=Ot&&Ot<vt&&it[Ot]}}(Y,n.getPieceList(),n.option.selected);u.update(V,I,z,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:a.color.getColorMapper()},G);var tt=new Po({style:{width:I,height:z,x:p,y:x,image:u.canvas},silent:!0});this.group.add(tt)},dispose:function(){}});var Cn=Wb.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,Cn.superApply(this,"getInitialData",arguments)}}),Ae=["itemStyle","borderWidth"],Be=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Pn=new un;function an(t,e,n,i){var I,z,V,G,tt,Q,nt,it,ct,vt,_t,At,o=t.getItemLayout(e),a=n.get("symbolRepeat"),s=n.get("symbolClip"),u=n.get("symbolPosition")||"start",d=(n.get("symbolRotate")||0)*Math.PI/180||0,g=n.get("symbolPatternSize")||2,p=n.isAnimationEnabled(),x={dataIndex:e,layout:o,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:s,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:g,rotation:d,animationModel:p?n:null,hoverAnimation:p&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};(function(I,z,O,V,Y){var G,tt=V.valueDim,Q=I.get("symbolBoundingData"),nt=V.coordSys.getOtherAxis(V.coordSys.getBaseAxis()),it=nt.toGlobalCoord(nt.dataToCoord(0)),ct=1-+(O[tt.wh]<=0);if(Fe(Q)){var vt=[ke(nt,Q[0])-it,ke(nt,Q[1])-it];vt[1]<vt[0]&&vt.reverse(),G=vt[ct]}else G=null!=Q?ke(nt,Q)-it:z?V.coordSysExtent[tt.index][ct]-it:O[tt.wh];Y.boundingLength=G,z&&(Y.repeatCutLength=O[tt.wh]),Y.pxSign=0<G?1:G<0?-1:0})(n,a,o,i,x),I=t,z=e,V=a,G=x.boundingLength,tt=x.pxSign,Q=g,it=x,ct=(nt=i).valueDim,vt=nt.categoryDim,_t=Math.abs(o[vt.wh]),(At=Fe(At=I.getItemVisual(z,"symbolSize"))?At.slice():(null==At&&(At="100%"),[At,At]))[vt.index]=ln(At[vt.index],_t),At[ct.index]=ln(At[ct.index],V?_t:Math.abs(G)),it.symbolSize=At,(it.symbolScale=[At[0]/Q,At[1]/Q])[ct.index]*=(nt.isHorizontal?-1:1)*tt,function(I,z,O,V,Y){var G=I.get(Ae)||0;G&&(Pn.attr({scale:z.slice(),rotation:O}),Pn.updateTransform(),G/=Pn.getLineScale(),G*=z[V.valueDim.index]),Y.valueLineWidth=G}(n,x.symbolScale,d,i,x);var S=x.symbolSize,C=n.get("symbolOffset");return Fe(C)&&(C=[ln(C[0],S[0]),ln(C[1],S[1])]),function(I,z,O,V,Y,G,tt,Q,nt,it,ct,vt){var _t=ct.categoryDim,At=ct.valueDim,Ot=vt.pxSign,Bt=Math.max(z[At.index]+Q,0),Vt=Bt;if(V){var $t=Math.abs(nt),Jt=pr(I.get("symbolMargin"),"15%")+"",Yt=!1;Jt.lastIndexOf("!")===Jt.length-1&&(Yt=!0,Jt=Jt.slice(0,Jt.length-1)),Jt=ln(Jt,z[At.index]);var ue=Math.max(Bt+2*Jt,0),Re=Yt?0:2*Jt,ze=vp(V),Ie=ze?V:Gr(($t+Re)/ue);ue=Bt+2*(Jt=($t-Ie*Bt)/2/(Yt?Ie:Ie-1)),Re=Yt?0:2*Jt,ze||"fixed"===V||(Ie=it?Gr((Math.abs(it)+Re)/ue):0),Vt=Ie*ue-Re,vt.repeatTimes=Ie,vt.symbolMargin=Jt}var Je=Ot*(Vt/2),mn=vt.pathPosition=[];mn[_t.index]=O[_t.wh]/2,mn[At.index]="start"===tt?Je:"end"===tt?nt-Je:nt/2,G&&(mn[0]+=G[0],mn[1]+=G[1]);var hi=vt.bundlePosition=[];hi[_t.index]=O[_t.xy],hi[At.index]=O[At.xy];var We=vt.barRectShape=En({},O);We[At.wh]=Ot*Math.max(Math.abs(O[At.wh]),Math.abs(mn[At.index]+Je)),We[_t.wh]=O[_t.wh];var ai=vt.clipShape={};ai[_t.xy]=-O[_t.xy],ai[_t.wh]=ct.ecSize[_t.wh],ai[At.xy]=0,ai[At.wh]=O[At.wh]}(n,S,o,a,0,C,u,x.valueLineWidth,x.boundingLength,x.repeatCutLength,i,x),x}function ke(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function Ze(t){var e=t.symbolPatternSize,n=Mc(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function Hn(t,e,n,i){var o=t.__pictorialBundle,u=n.pathPosition,d=e.valueDim,g=n.repeatTimes||0,p=0,x=n.symbolSize[e.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(qi(t,function(V){V.__pictorialAnimationIndex=p,V.__pictorialRepeatTimes=g,p<g?sr(V,null,I(p),n,i):sr(V,null,{scale:[0,0]},n,i,function(){o.remove(V)}),Te(V,n),p++});p<g;p++){var S=Ze(n);S.__pictorialAnimationIndex=p,S.__pictorialRepeatTimes=g,o.add(S);var C=I(p);sr(S,{position:C.position,scale:[0,0]},{scale:C.scale,rotation:C.rotation},n,i),S.on("mouseover",z).on("mouseout",O),Te(S,n)}function I(V){var Y=u.slice(),G=n.pxSign,tt=V;return("start"===n.symbolRepeatDirection?0<G:G<0)&&(tt=g-1-V),Y[d.index]=x*(tt-g/2+.5)+u[d.index],{position:Y,scale:n.symbolScale.slice(),rotation:n.rotation}}function z(){qi(t,function(V){V.trigger("emphasis")})}function O(){qi(t,function(V){V.trigger("normal")})}}function Yn(t,e,n,i){var o=t.__pictorialBundle,a=t.__pictorialMainPath;a?sr(a,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(a=t.__pictorialMainPath=Ze(n),o.add(a),sr(a,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),a.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Te(a,n)}function Wn(t,e,n){var i=En({},e.barRectShape),o=t.__pictorialBarRect;o?sr(o,null,{shape:i},e,n):(o=t.__pictorialBarRect=new Ji({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(o))}function dn(t,e,n,i){if(n.symbolClip){var o=t.__pictorialClipPath,a=En({},n.clipShape),s=e.valueDim,u=n.animationModel,d=n.dataIndex;if(o)Xi(o,{shape:a},u,d);else{a[s.wh]=0,o=new Ji({shape:a}),t.__pictorialBundle.setClipPath(o),t.__pictorialClipPath=o;var g={};g[s.wh]=n.clipShape[s.wh],yl[i?"updateProps":"initProps"](o,{shape:g},u,d)}}}function Xn(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=zt,n.isAnimationEnabled=ie,n}function zt(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function ie(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Te(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function Ge(t,e,n,i){var o=new _n,a=new _n;return o.add(a),(o.__pictorialBundle=a).attr("position",n.bundlePosition.slice()),n.symbolRepeat?Hn(o,e,n):Yn(o,0,n),Wn(o,n,i),dn(o,e,n,i),o.__pictorialShapeStr=Li(t,n),o.__pictorialSymbolMeta=n,o}function Gn(t,e,n,i){var o=i.__pictorialBarRect;o&&(o.style.text=null);var a=[];qi(i,function(s){a.push(s)}),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),St(a,function(s){Xi(s,{scale:[0,0]},n,e,function(){i.parent&&i.parent.remove(i)})}),t.setItemGraphicEl(e,null)}function Li(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function qi(t,e,n){St(t.__pictorialBundle.children(),function(i){i!==t.__pictorialBarRect&&e.call(n,i)})}function sr(t,e,n,i,o,a){e&&t.attr(e),i.symbolClip&&!o?n&&t.attr(n):n&&yl[o?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,a)}function Lo(t,e,n){var i=n.color,o=n.dataIndex,a=n.itemModel,s=a.getModel("itemStyle").getItemStyle(["color"]),u=a.getModel("emphasis.itemStyle").getItemStyle(),d=a.getShallow("cursor");qi(t,function(x){x.setColor(i),x.setStyle(Dn({fill:i,opacity:n.opacity},s)),Er(x,u),d&&(x.cursor=d),x.z2=n.z2});var g={},p=t.__pictorialBarRect;zw(p.style,g,a,i,e.seriesModel,o),Er(p,g)}function Gr(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}function Qc(t,e,n,i,o){$a.call(this,t,e,n),this.type=i||"value",this.position=o||"bottom",this.orient=null}function Jf(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(t,e,n),this.model=t}function Da(t,e){e=e||{};var i=t.axis,o={},a=i.position,s=i.orient,u=t.coordinateSystem.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],g={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};o.position=["vertical"===s?g.vertical[a]:d[0],"horizontal"===s?g.horizontal[a]:d[3]],o.rotation=Math.PI/2*{horizontal:0,vertical:1}[s],o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[a],t.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),pr(e.labelInside,t.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var p=e.rotate;return null==p&&(p=t.get("axisLabel.rotate")),o.labelRotation="top"===a?-p:p,o.z2=1,o}Zu({type:"pictorialBar",render:function(t,e,n){var i=this.group,o=t.getData(),a=this._data,s=t.coordinateSystem,u=!!s.getBaseAxis().isHorizontal(),d=s.grid.getRect(),g={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:s,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:u,valueDim:Be[+u],categoryDim:Be[1-u]};return o.diff(a).add(function(p){if(o.hasValue(p)){var x=Xn(o,p),S=an(o,p,x,g),C=Ge(o,g,S);o.setItemGraphicEl(p,C),i.add(C),Lo(C,g,S)}}).update(function(p,x){var O,V,Y,G,tt,S=a.getItemGraphicEl(x);if(o.hasValue(p)){var C=Xn(o,p),I=an(o,p,C,g),z=Li(o,I);S&&z!==S.__pictorialShapeStr&&(i.remove(S),o.setItemGraphicEl(p,null),S=null),S?(V=g,G=(Y=I).animationModel,tt=Y.dataIndex,Xi((O=S).__pictorialBundle,{position:Y.bundlePosition.slice()},G,tt),Y.symbolRepeat?Hn(O,V,Y,!0):Yn(O,0,Y,!0),Wn(O,Y,!0),dn(O,V,Y,!0)):S=Ge(o,g,I,!0),o.setItemGraphicEl(p,S),S.__pictorialSymbolMeta=I,i.add(S),Lo(S,g,I)}else i.remove(S)}).remove(function(p){var x=a.getItemGraphicEl(p);x&&Gn(a,p,x.__pictorialSymbolMeta.animationModel,x)}).execute(),this._data=o,this.group},dispose:_e,remove:function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(o){Gn(i,o.dataIndex,t,o)}):n.removeAll()}}),oa(kn(hw,"pictorialBar")),jo(Yh("pictorialBar","roundRect")),Qc.prototype={constructor:Qc,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},ki(Qc,$a),Ca.register("single",{create:function(t,e){var n=[];return t.eachComponent("singleAxis",function(i,o){var a=new Jf(i,t,e);a.name="single_"+o,a.resize(i,e),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if("singleAxis"===i.get("coordinateSystem")){var o=t.queryComponents({mainType:"singleAxis",index:i.get("singleAxisIndex"),id:i.get("singleAxisId")})[0];i.coordinateSystem=o&&o.coordinateSystem}}),n},dimensions:(Jf.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:Jf,_init:function(t,e,n){var o=new Qc(this.dimension,Ig(t),[0,0],t.get("type"),t.get("position"));o.onBand="category"===o.type&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),(t.axis=o).model=t,(o.coordinateSystem=this)._axis=o},update:function(t,e){t.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();St(i.mapDimension(this.dimension,!0),function(o){this._axis.scale.unionExtentFromData(i,o)},this),Pf(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=xi({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],o=e.reverse?1:0;e.setExtent(i[o],i[1-o]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),i=n[0]+n[1],o=t.isHorizontal();t.toGlobalCoord=o?function(a){return a+e}:function(a){return i-a+e},t.toLocalCoord=o?function(a){return a-e}:function(a){return i-a+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),i=[],o="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[o]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-o]=0==o?n.y+n.height/2:n.x+n.width/2,i}}).dimensions});var td=["axisLine","axisTickLabel","axisName"],Qg=["splitArea","splitLine"],us=Qu.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,i){var o=this.group;o.removeAll();var a=this._axisGroup;this._axisGroup=new _n;var s=Da(t),u=new Wl(t,s);St(td,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),St(Qg,function(d){t.get(d+".show")&&this["_"+d](t)},this),Na(a,this._axisGroup,t),us.superCall(this,"render",t,e,n,i)},remove:function(){Ow(this)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),i=n.getModel("lineStyle"),o=i.get("width"),a=i.get("color");a=a instanceof Array?a:[a];for(var s=t.coordinateSystem.getRect(),u=e.isHorizontal(),d=[],g=0,p=e.getTicksCoords({tickModel:n}),x=[],S=[],C=0;C<p.length;++C){var I=e.toGlobalCoord(p[C].coord);u?(x[0]=I,x[1]=s.y,S[0]=I,S[1]=s.y+s.height):(x[0]=s.x,x[1]=I,S[0]=s.x+s.width,S[1]=I);var z=g++%a.length;d[z]=d[z]||[],d[z].push(new go({subPixelOptimize:!0,shape:{x1:x[0],y1:x[1],x2:S[0],y2:S[1]},style:{lineWidth:o},silent:!0}))}for(C=0;C<d.length;++C)this.group.add(zl(d[C],{style:{stroke:a[C%a.length],lineDash:i.getLineDash(o),lineWidth:o},silent:!0}))}},_splitArea:function(t){Up(this,this._axisGroup,t,t)}}),tf=Sr.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function Ed(t,e){var n,i=[],o=t.seriesIndex;if(null==o||!(n=e.getSeriesByIndex(o)))return{point:[]};var a=n.getData(),s=Xo(a,t);if(null==s||s<0||Fe(s))return{point:[]};var u=a.getItemGraphicEl(s),d=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(s)||[];else if(d&&d.dataToPoint)i=d.dataToPoint(a.getValues(kt(d.dimensions,function(p){return a.mapDimension(p)}),s,!0))||[];else if(u){var g=u.getBoundingRect().clone();g.applyTransform(u.transform),i=[g.x+g.width/2,g.y+g.height/2]}return{point:i,el:u}}ei(tf.prototype,Pg),Wp("single",tf,function(t,e){return e.type||(e.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var ed=St,Tx=kn,c_=or();function d_(t,e,n,i,o){var g,p,x,S,C,I,z,O,a=t.axis;if(!a.scale.isBlank()&&a.containData(e))if(t.involveSeries){var s=(S=(x=(p=t).axis).dim,C=g=e,I=[],z=Number.MAX_VALUE,O=-1,ed(p.seriesModels,function(V,Y){var G,tt,Q=V.getData().mapDimension(S,!0);if(V.getAxisTooltipData){var nt=V.getAxisTooltipData(Q,g,x);tt=nt.dataIndices,G=nt.nestestValue}else{if(!(tt=V.getData().indicesOfNearest(Q[0],g,"category"===x.type?.5:null)).length)return;G=V.getData().get(Q[0],tt[0])}if(null!=G&&isFinite(G)){var it=g-G,ct=Math.abs(it);ct<=z&&((ct<z||0<=it&&O<0)&&(z=ct,O=it,C=G,I.length=0),ed(tt,function(vt){I.push({seriesIndex:V.seriesIndex,dataIndexInside:vt,dataIndex:V.getData().getRawIndex(vt)})}))}}),{payloadBatch:I,snapToValue:C}),u=s.payloadBatch,d=s.snapToValue;u[0]&&null==o.seriesIndex&&En(o,u[0]),!i&&t.snap&&a.containData(d)&&null!=d&&(e=d),n.showPointer(t,e,u,o),n.showTooltip(t,s,d)}else n.showPointer(t,e)}function Pc(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function Nd(t,e,n,i){var o=n.payloadBatch,a=e.axis,s=a.model,u=e.axisPointerModel;if(e.triggerTooltip&&o.length){var d=e.coordSys.model,g=Of(d),p=t.map[g];p||(p=t.map[g]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},t.list.push(p)),p.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:i,valueLabelOpt:{precision:u.get("label.precision"),formatter:u.get("label.formatter")},seriesDataIndices:o.slice()})}}function h_(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function u0(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}pu({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var tp=or(),cI=St;function CD(t,e,n){if(!Oe.node){var i=e.getZr();tp(i).records||(tp(i).records={}),function(o,a){function s(u,d){o.on(u,function(g){var x,S,C,p=(x=a,{dispatchAction:C=function(I){var z=S[I.type];z?z.push(I):(I.dispatchAction=C,x.dispatchAction(I))},pendings:S={showTip:[],hideTip:[]}});cI(tp(o).records,function(x){x&&d(x,g,p.dispatchAction)}),function(x,S){var C,I=x.showTip.length,z=x.hideTip.length;I?C=x.showTip[I-1]:z&&(C=x.hideTip[z-1]),C&&(C.dispatchAction=null,S.dispatchAction(C))}(p.pendings,a)})}tp(o).initialized||(tp(o).initialized=!0,s("click",kn(MD,"click")),s("mousemove",kn(MD,"mousemove")),s("globalout",dI))}(i,e),(tp(i).records[t]||(tp(i).records[t]={})).handler=n}}function dI(t,e,n){t.handler("leave",null,n)}function MD(t,e,n,i){e.handler(t,n,i)}function iT(t,e){if(!Oe.node){var n=e.getZr();(tp(n).records||{})[t]&&(tp(n).records[t]=null)}}var TD=Oa({type:"axisPointer",render:function(t,e,n){var i=e.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";CD("axisPointer",n,function(a,s,u){"none"!==o&&("leave"===a||0<=o.indexOf(a))&&u({type:"updateAxisPointer",currTrigger:a,x:s&&s.offsetX,y:s&&s.offsetY})})},remove:function(t,e){iT(e.getZr(),"axisPointer"),TD.superApply(this._model,"remove",arguments)},dispose:function(t,e){iT("axisPointer",e),TD.superApply(this._model,"dispose",arguments)}}),c0=or(),DD=fn,rT=Rn;function f_(){}function AD(t,e,n,i){!function o(a,s){if(Ln(a)&&Ln(s)){var u=!0;return St(s,function(d,g){u=u&&o(a[g],d)}),!!u}return a===s}(c0(n).lastProp,i)&&(c0(n).lastProp=i,e?Xi(n,i,t):(n.stopAnimation(),n.attr(i)))}function kD(t,e){t[e.get("label.show")?"show":"hide"]()}function oT(t){return{position:t.position.slice(),rotation:t.rotation||0}}function ID(t,e,n){var i=e.get("z"),o=e.get("zlevel");t&&t.traverse(function(a){"group"!==a.type&&(null!=i&&(a.z=i),null!=o&&(a.zlevel=o),a.silent=n)})}function aT(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e}function PD(t,e,n,i,o){var a=ED(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),s=n.getModel("label"),u=ju(s.get("padding")||0),d=s.getFont(),g=al(a,d),p=o.position,x=g.width+u[1]+u[3],S=g.height+u[0]+u[2],C=o.align;"right"===C&&(p[0]-=x),"center"===C&&(p[0]-=x/2);var O,V,Y,G,tt,Q,I=o.verticalAlign;"bottom"===I&&(p[1]-=S),"middle"===I&&(p[1]-=S/2),O=p,V=x,Y=S,tt=(G=i).getWidth(),Q=G.getHeight(),O[0]=Math.min(O[0]+V,tt)-V,O[1]=Math.min(O[1]+Y,Q)-Y,O[0]=Math.max(O[0],0),O[1]=Math.max(O[1],0);var z=s.get("backgroundColor");z&&"auto"!==z||(z=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:x,height:S,r:s.get("borderRadius")},position:p.slice(),style:{text:a,textFont:d,textFill:s.getTextColor(),textPosition:"inside",textPadding:u,fill:z,stroke:s.get("borderColor")||"transparent",lineWidth:s.get("borderWidth")||0,shadowBlur:s.get("shadowBlur"),shadowColor:s.get("shadowColor"),shadowOffsetX:s.get("shadowOffsetX"),shadowOffsetY:s.get("shadowOffsetY")},z2:10}}function ED(t,e,n,i,o){t=e.scale.parse(t);var a=e.scale.getLabel(t,{precision:o.precision}),s=o.formatter;if(s){var u={value:mb(e,t),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};St(i,function(d){var g=n.getSeriesByIndex(d.seriesIndex),x=g&&g.getDataParams(d.dataIndexInside);x&&u.seriesData.push(x)}),bi(s)?a=s.replace("{value}",a):Ui(s)&&(a=s(u))}return a}function sT(t,e,n){var i=yt();return he(i,i,n.rotation),fe(i,i,n.position),fa([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function ND(t,e,n,i,o,a){var s=Wl.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get("label.margin"),PD(e,i,o,a,{position:sT(i.axis,t,n),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function lT(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function RD(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function LD(t,e,n,i,o,a){return{cx:t,cy:e,r0:n,r:i,startAngle:o,endAngle:a,clockwise:!0}}Vs((f_.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,i){var o=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==o||this._lastStatus!==a){this._lastValue=o,this._lastStatus=a;var s=this._group,u=this._handle;if(!a||"hide"===a)return s&&s.hide(),void(u&&u.hide());s&&s.show(),u&&u.show();var d={};this.makeElOption(d,o,t,e,n);var g=d.graphicKey;g!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=g;var p=this._moveAnimation=this.determineAnimation(t,e);if(s){var x=kn(AD,e,p);this.updatePointerEl(s,d,x,e),this.updateLabelEl(s,d,x,e)}else s=this._group=new _n,this.createPointerEl(s,d,t,e),this.createLabelEl(s,d,t,e),n.getZr().add(s);ID(s,e,!0),this._renderHandle(o)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),i=t.axis,o="category"===i.type,a=e.get("snap");if(!a&&!o)return!1;if("auto"!==n&&null!=n)return!0===n;var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var u=Sv(t).seriesDataCount,d=i.getExtent();return Math.abs(d[0]-d[1])/u>s}return!1},makeElOption:function(t,e,n,i,o){},createPointerEl:function(t,e,n,i){var o=e.pointer;if(o){var a=c0(t).pointerEl=new yl[o.type](DD(e.pointer));t.add(a)}},createLabelEl:function(t,e,n,i){if(e.label){var o=c0(t).labelEl=new Ji(DD(e.label));t.add(o),kD(o,i)}},updatePointerEl:function(t,e,n){var i=c0(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,i){var o=c0(t).labelEl;o&&(o.setStyle(e.label.style),n(o,{shape:e.label.shape,position:e.label.position}),kD(o,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),o=this._handle,a=n.getModel("handle"),s=n.get("status");if(!a.get("show")||!s||"hide"===s)return o&&i.remove(o),void(this._handle=null);this._handle||(e=!0,o=this._handle=vl(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){vo(d.event)},onmousedown:rT(this._onHandleDragMove,this,0,0),drift:rT(this._onHandleDragMove,this),ondragend:rT(this._onHandleDragEnd,this)}),i.add(o)),ID(o,n,!1),o.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var u=a.get("size");Fe(u)||(u=[u,u]),o.attr("scale",[u[0]/2,u[1]/2]),_g(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){AD(this._axisPointerModel,!e&&this._moveAnimation,this._handle,oT(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(oT(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(oT(i)),c0(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=f_);var hI=f_.extend({makeElOption:function(t,e,n,i,o){var a=n.axis,s=a.grid,u=i.get("type"),d=OD(s,a).getOtherAxis(a).getGlobalExtent(),g=a.toGlobalCoord(a.dataToCoord(e,!0));if(u&&"none"!==u){var p=aT(i),x=fI[u](a,g,d);x.style=p,t.graphicKey=x.type,t.pointer=x}ND(e,t,Hb(s.model,n),n,i,o)},getHandleTransform:function(t,e,n){var i=Hb(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:sT(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var o=n.axis,a=o.grid,s=o.getGlobalExtent(!0),u=OD(a,o).getOtherAxis(o).getGlobalExtent(),d="x"===o.dim?0:1,g=t.position;g[d]+=e[d],g[d]=Math.min(s[1],g[d]),g[d]=Math.max(s[0],g[d]);var p=(u[1]+u[0])/2,x=[p,p];return x[d]=g[d],{position:g,rotation:t.rotation,cursorPoint:x,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][d]}}});function OD(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var fI={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:lT([e,n[0]],[e,n[1]],BD(t))}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth());return{type:"Rect",shape:RD([e-i/2,n[0]],[i,n[1]-n[0]],BD(t))}}};function BD(t){return"x"===t.dim?0:1}Qu.registerAxisPointerClass("CartesianAxisPointer",hI),wl(function(t){if(t){t.axisPointer&&0!==t.axisPointer.length||(t.axisPointer={});var e=t.axisPointer.link;e&&!Fe(e)&&(t.axisPointer.link=[e])}}),$u(Td.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function MM(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(i,o,a){var s=o.getComponent("tooltip"),u=o.getComponent("axisPointer"),d=u.get("link",!0)||[],g=[];Lf(a.getCoordinateSystems(),function(p){if(p.axisPointerEnabled){var x=Of(p.model),S=i.coordSysAxesInfo[x]={},C=(i.coordSysMap[x]=p).model.getModel("tooltip",s);if(Lf(p.getAxes(),Bb(V,!1,null)),p.getTooltipAxes&&s&&C.get("show")){var I="axis"===C.get("trigger"),z="cross"===C.get("axisPointer.type"),O=p.getTooltipAxes(C.get("axisPointer.axis"));(I||z)&&Lf(O.baseAxes,Bb(V,!z||"cross",I)),z&&Lf(O.otherAxes,Bb(V,"cross",!1))}}function V(Y,G,tt){var Q=tt.model.getModel("axisPointer",u),nt=Q.get("show");if(nt&&("auto"!==nt||Y||Ey(Q))){null==G&&(G=Q.get("triggerTooltip"));var it=(Q=Y?function(Bt,Vt,$t,Jt,Yt,ue){var Re=Vt.getModel("axisPointer"),ze={};Lf(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(hi){ze[hi]=fn(Re.get(hi))}),ze.snap="category"!==Bt.type&&!!ue,"cross"===Re.get("type")&&(ze.type="line");var Ie=ze.label||(ze.label={});if(null==Ie.show&&(Ie.show=!1),"cross"===Yt){var Je=Re.get("label.show");if(Ie.show=null==Je||Je,!ue){var mn=ze.lineStyle=Re.get("crossStyle");mn&&Dn(Ie,mn.textStyle)}}return Bt.model.getModel("axisPointer",new dr(ze,$t,Jt))}(tt,C,u,o,Y,G):Q).get("snap"),ct=Of(tt.model),vt=G||it||"category"===tt.type,_t=i.axesInfo[ct]={key:ct,axis:tt,coordSys:p,axisPointerModel:Q,triggerTooltip:G,involveSeries:vt,snap:it,useHandle:Ey(Q),seriesModels:[]};S[ct]=_t,i.seriesInvolved|=vt;var At=function(Bt,Vt){for(var $t=Vt.model,Jt=Vt.dim,Yt=0;Yt<Bt.length;Yt++){var ue=Bt[Yt]||{};if(wv(ue[Jt+"AxisId"],$t.id)||wv(ue[Jt+"AxisIndex"],$t.componentIndex)||wv(ue[Jt+"AxisName"],$t.name))return Yt}}(d,tt);if(null!=At){var Ot=g[At]||(g[At]={axesInfo:{}});Ot.axesInfo[ct]=_t,Ot.mapper=d[At].mapper,_t.linkGroup=Ot}}}})}(n,t,e),n.seriesInvolved&&function(i,o){o.eachSeries(function(a){var s=a.coordinateSystem,u=a.get("tooltip.trigger",!0),d=a.get("tooltip.show",!0);s&&"none"!==u&&!1!==u&&"item"!==u&&!1!==d&&!1!==a.get("axisPointer.show",!0)&&Lf(i.coordSysAxesInfo[Of(s.model)],function(g){var p=g.axis;s.getAxis(p.dim)===p&&(g.seriesModels.push(a),null==g.seriesDataCount&&(g.seriesDataCount=0),g.seriesDataCount+=a.getData().count())})},this)}(n,t),n}(t,e)}),Cr({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(t,e,n){var V,Y,tt,i=t.currTrigger,o=[t.x,t.y],a=t,s=t.dispatchAction||Rn(n.dispatchAction,n),u=e.getComponent("axisPointer").coordSysAxesInfo;if(u){u0(o)&&(o=Ed({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var d=u0(o),g=a.axesInfo,p=u.axesInfo,x="leave"===i||u0(o),S={},C={},I={list:[],map:{}},z={showPointer:Tx(Pc,C),showTooltip:Tx(Nd,I)};ed(u.coordSysMap,function(V,Y){var G=d||V.containPoint(o);ed(u.coordSysAxesInfo[Y],function(tt,Q){var nt=tt.axis,it=function(vt,_t){for(var At=0;At<(vt||[]).length;At++){var Ot=vt[At];if(_t.axis.dim===Ot.axisDim&&_t.axis.model.componentIndex===Ot.axisIndex)return Ot}}(g,tt);if(!x&&G&&(!g||it)){var ct=it&&it.value;null!=ct||d||(ct=nt.pointToData(o)),null!=ct&&d_(tt,ct,z,!1,S)}})});var O={};return ed(p,function(V,Y){var G=V.linkGroup;G&&!C[Y]&&ed(G.axesInfo,function(tt,Q){var nt=C[Q];if(tt!==V&&nt){var it=nt.value;G.mapper&&(it=V.axis.scale.parse(G.mapper(it,h_(tt),h_(V)))),O[V.key]=it}})}),ed(O,function(V,Y){d_(p[Y],V,z,!0,S)}),V=C,Y=p,tt=S.axesInfo=[],ed(Y,function(Q,nt){var it=Q.axisPointerModel.option,ct=V[nt];ct?(Q.useHandle||(it.status="show"),it.value=ct.value,it.seriesDataIndices=(ct.payloadBatch||[]).slice()):Q.useHandle||(it.status="hide"),"show"===it.status&&tt.push({axisDim:Q.axis.dim,axisIndex:Q.axis.model.componentIndex,value:it.value})}),function(V,Y,G,tt){if(u0(Y)||!V.list.length)return tt({type:"hideTip"});var Q=((V.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};tt({type:"showTip",escapeConnect:!0,x:Y[0],y:Y[1],tooltipOption:G.tooltipOption,position:G.position,dataIndexInside:Q.dataIndexInside,dataIndex:Q.dataIndex,seriesIndex:Q.seriesIndex,dataByCoordSys:V.list})}(I,o,t,s),function(V,Y,G){var tt=G.getZr(),Q="axisPointerLastHighlights",nt=c_(tt)[Q]||{},it=c_(tt)[Q]={};ed(V,function(_t,At){var Ot=_t.axisPointerModel.option;"show"===Ot.status&&ed(Ot.seriesDataIndices,function(Bt){it[Bt.seriesIndex+" | "+Bt.dataIndex]=Bt})});var ct=[],vt=[];St(nt,function(_t,At){it[At]||vt.push(_t)}),St(it,function(_t,At){nt[At]||ct.push(_t)}),vt.length&&G.dispatchAction({type:"downplay",escapeConnect:!0,batch:vt}),ct.length&&G.dispatchAction({type:"highlight",escapeConnect:!0,batch:ct})}(p,0,n),S}});var zD=["x","y"],gI=["width","height"],pI=f_.extend({makeElOption:function(t,e,n,i,o){var a=n.axis,s=a.coordinateSystem,u=uT(s,1-dC(a)),d=s.dataToPoint(e)[0],g=i.get("type");if(g&&"none"!==g){var p=aT(i),x=mI[g](a,d,u);x.style=p,t.graphicKey=x.type,t.pointer=x}ND(e,t,Da(n),n,i,o)},getHandleTransform:function(t,e,n){var i=Da(e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:sT(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var o=n.axis,a=o.coordinateSystem,s=dC(o),u=uT(a,s),d=t.position;d[s]+=e[s],d[s]=Math.min(u[1],d[s]),d[s]=Math.max(u[0],d[s]);var g=uT(a,1-s),p=(g[1]+g[0])/2,x=[p,p];return x[s]=d[s],{position:d,rotation:t.rotation,cursorPoint:x,tooltipOption:{verticalAlign:"middle"}}}}),mI={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:lT([e,n[0]],[e,n[1]],dC(t))}},shadow:function(t,e,n){var i=t.getBandWidth();return{type:"Rect",shape:RD([e-i/2,n[0]],[i,n[1]-n[0]],dC(t))}}};function dC(t){return t.isHorizontal()?0:1}function uT(t,e){var n=t.getRect();return[n[zD[e]],n[zD[e]]+n[gI[e]]]}Qu.registerAxisPointerClass("SingleAxisPointer",pI),Oa({type:"single"});var vI=ra.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){vI.superApply(this,"init",arguments),this.legendVisualProvider=new Yp(Rn(this.getData,this),Rn(this.getRawData,this))},fixData:function(t){var e=t.length,n={},i=ja(t,function(p){return n.hasOwnProperty(p[0])||(n[p[0]]=-1),p[2]}),o=[];i.buckets.each(function(p,x){o.push({name:x,dataList:p})});for(var a=o.length,s=0;s<a;++s){for(var u=o[s].name,d=0;d<o[s].dataList.length;++d)n[g=o[s].dataList[d][0]]=s;for(var g in n)n.hasOwnProperty(g)&&n[g]!==s&&(n[g]=s,t[e]=[],t[e][0]=g,t[e][1]=0,t[e][2]=u,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=Mn(t.data,function(x){return void 0!==x[2]}),o=this.fixData(i||[]),a=[],s=this.nameMap=pe(),u=0,d=0;d<o.length;++d)a.push(o[d][2]),s.get(o[d][2])||(s.set(o[d][2],u),u++);var g=Ku(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Qm(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),p=new qa(g,this);return p.initData(o),p},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var o=t.mapDimension("single"),a=ja(n,function(u){return t.get("name",u)}),s=[];return a.buckets.each(function(u,d){u.sort(function(g,p){return t.get(o,g)-t.get(o,p)}),s.push({name:d,indices:u})}),s},getAxisTooltipData:function(t,e,n){Fe(t)||(t=t?[t]:[]);for(var i,o=this.getData(),a=this.getLayerSeries(),s=[],u=a.length,d=0;d<u;++d){for(var g=Number.MAX_VALUE,p=-1,x=a[d].indices.length,S=0;S<x;++S){var C=o.get(t[0],a[d].indices[S]),I=Math.abs(C-e);I<=g&&(i=C,g=I,p=a[d].indices[S])}s.push(p)}return{dataIndices:s,nestestValue:i}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),i=e.get(e.mapDimension("value"),t);return!isNaN(i)&&null!=i||(i="-"),Vr(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function FD(t,e,n){if(t.count())for(var i,o=e.coordinateSystem,a=e.getLayerSeries(),s=t.mapDimension("single"),u=t.mapDimension("value"),d=kt(a,function(O){return kt(O.indices,function(V){var Y=o.dataToPoint(t.get(s,V));return Y[1]=t.get(u,V),Y})}),g=function(O){for(var V=O.length,Y=O[0].length,G=[],tt=[],Q=0,nt={},it=0;it<Y;++it){for(var ct=0,vt=0;ct<V;++ct)vt+=O[ct][it][1];Q<vt&&(Q=vt),G.push(vt)}for(var _t=0;_t<Y;++_t)tt[_t]=(Q-G[_t])/2;for(var At=Q=0;At<Y;++At){var Ot=G[At]+tt[At];Q<Ot&&(Q=Ot)}return nt.y0=tt,nt.max=Q,nt}(d),p=g.y0,x=n/g.max,S=a.length,C=a[0].indices.length,I=0;I<C;++I){t.setItemLayout(a[0].indices[I],{layerIndex:0,x:d[0][I][0],y0:i=p[I]*x,y:d[0][I][1]*x});for(var z=1;z<S;++z)t.setItemLayout(a[z].indices[I],{layerIndex:z,x:d[z][I][0],y0:i+=d[z-1][I][1]*x,y:d[z][I][1]*x})}}function hC(t,e,n){_n.call(this);var i=new Kn({z2:2});i.seriesIndex=e.seriesIndex;var o=new rn({z2:4,silent:t.getModel("label").get("silent")});function a(){o.ignore=o.hoverIgnore}function s(){o.ignore=o.normalIgnore}this.add(i),this.add(o),this.updateData(!0,t,"normal",e,n),this.on("emphasis",a).on("normal",s).on("mouseover",a).on("mouseout",s)}Zu({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){var i=t.getData(),o=this.group,a=t.getLayerSeries(),s=i.getLayout("layoutInfo");function g(C){return C.name}o.attr("position",[0,s.rect.y+s.boundaryGap[0]]);var p=new $c(this._layersSeries||[],a,g,g),x={};function S(C,I,z){var Re,ze,Je,O=this._layers;if("remove"!==C){for(var V,Y,G,tt=[],Q=[],nt=a[I].indices,it=0;it<nt.length;it++){var ct=i.getItemLayout(nt[it]),vt=ct.x,_t=ct.y0,At=ct.y;tt.push([vt,_t]),Q.push([vt,_t+At]),V=i.getItemVisual(nt[it],"color")}var Ot=i.getItemLayout(nt[0]),Bt=i.getItemModel(nt[it-1]),Vt=Bt.getModel("label"),$t=Vt.get("margin");if("add"===C){var Jt=x[I]=new _n;Y=new Dy({shape:{points:tt,stackedOnPoints:Q,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),G=new rn({style:{x:Ot.x-$t,y:Ot.y0+Ot.y/2}}),Jt.add(Y),Jt.add(G),o.add(Jt),Y.setClipPath((Re=Y.getBoundingRect(),ze=t,qs(Je=new Ji({shape:{x:Re.x-10,y:Re.y-10,width:0,height:Re.height+20}}),{shape:{width:Re.width+20,height:Re.height+20}},ze,function(){Y.removeClipPath()}),Je))}else Y=(Jt=O[z]).childAt(0),G=Jt.childAt(1),o.add(Jt),x[I]=Jt,Xi(Y,{shape:{points:tt,stackedOnPoints:Q}},t),Xi(G,{style:{x:Ot.x-$t,y:Ot.y0+Ot.y/2}},t);var Yt=Bt.getModel("emphasis.itemStyle"),ue=Bt.getModel("itemStyle");Wo(G.style,Vt,{text:Vt.get("show")?t.getFormattedLabel(nt[it-1],"normal")||i.getName(nt[it-1]):null,textVerticalAlign:"middle"}),Y.setStyle(En({fill:V},ue.getItemStyle(["color"]))),Er(Y,Yt.getItemStyle())}else o.remove(O[I])}p.add(Rn(S,this,"add")).update(Rn(S,this,"update")).remove(Rn(S,this,"remove")).execute(),this._layersSeries=a,this._layers=x},dispose:function(){}}),oa(function(t,e){t.eachSeriesByType("themeRiver",function(n){var i=n.getData(),o=n.coordinateSystem,a={},s=o.getRect();a.rect=s;var u=n.get("boundaryGap"),d=o.getAxis();a.boundaryGap=u,"horizontal"===d.orient?(u[0]=ln(u[0],s.height),u[1]=ln(u[1],s.height),FD(i,n,s.height-u[0]-u[1])):(u[0]=ln(u[0],s.width),u[1]=ln(u[1],s.width),FD(i,n,s.width-u[0]-u[1])),i.setLayout("layoutInfo",a)})}),jo(function(t){t.eachSeriesByType("themeRiver",function(e){var n=e.getData(),i=e.getRawData(),o=e.get("color"),a=pe();n.each(function(s){a.set(n.getRawIndex(s),s)}),i.each(function(s){var u=i.getName(s),d=o[(e.nameMap.get(u)-1)%o.length];i.setItemVisual(s,"color",d);var g=a.get(s);null!=g&&n.setItemVisual(g,"color",d)})})}),$u(Dv("themeRiver")),ra.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var n={name:t.name,children:t.data};!function a(s){var u=0;St(s.children,function(g){a(g);var p=g.value;Fe(p)&&(p=p[0]),u+=p});var d=s.value;Fe(d)&&(d=d[0]),null!=d&&!isNaN(d)||(d=u),d<0&&(d=0),Fe(s.value)?s.value[0]=d:s.value=d}(n);var i=kt(t.levels||[],function(a){return new dr(a,this,e)},this),o=jl.createTree(n,this,function(a){a.wrapMethod("getItemModel",function(s,u){var d=o.getNodeByDataIndex(u),g=i[d.depth];return g&&(s.parentModel=g),s})});return o.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=ra.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=v1(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});var d0=hC.prototype;d0.updateData=function(t,e,n,i,o){(this.node=e).piece=this,i=i||this._seriesModel,o=o||this._ecModel;var a=this.childAt(0);a.dataIndex=e.dataIndex;var s=e.getModel(),u=e.getLayout(),d=En({},u);d.label=null;var I,O,g=function(I,z,O){var V=I.getVisual("color"),Y=I.getVisual("visualMeta");Y&&0!==Y.length||(V=null);var G=I.getModel("itemStyle").get("color");if(G)return G;if(V)return V;if(0===I.depth)return O.option.color[0];var tt=O.option.color.length;return O.option.color[function(Q){for(var nt=Q;1<nt.depth;)nt=nt.parentNode;return zn(Q.getAncestors()[0].children,nt)}(I)%tt]}(e,0,o);I=e,O=g,i.getData().setItemVisual(I.dataIndex,"color",O);var p,x=s.getModel("itemStyle").getItemStyle();p=Dn({lineJoin:"bevel",fill:(p="normal"===n?x:ei(s.getModel(n+".itemStyle").getItemStyle(),x)).fill||g},p),t?(a.setShape(d),a.shape.r=u.r0,Xi(a,{shape:{r:u.r}},i,e.dataIndex),a.useStyle(p)):"object"==typeof p.fill&&p.fill.type||"object"==typeof a.style.fill&&a.style.fill.type?(Xi(a,{shape:d},i),a.useStyle(p)):Xi(a,{shape:d,style:p},i),this._updateLabel(i,g,n);var S=s.getShallow("cursor");if(S&&a.attr("cursor",S),t){var C=i.getShallow("highlightPolicy");this._initEvents(a,e,i,C)}this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel,Er(this)},d0.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):function(i,o,a){return"none"!==a&&("self"===a?i===o:"ancestor"===a?i===o||i.isAncestorOf(o):i===o||i.isDescendantOf(o))}(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):"none"!==t&&n.piece.childAt(0).trigger("downplay"))})},d0.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,"normal")})},d0.onHighlight=function(){this.updateData(!1,this.node,"highlight")},d0.onDownplay=function(){this.updateData(!1,this.node,"downplay")},d0._updateLabel=function(t,e,n){var i=this.node.getModel(),o=i.getModel("label"),a="normal"===n||"emphasis"===n?o:i.getModel(n+".label"),s=i.getModel("emphasis.label"),u=a.get("formatter")?n:"normal",d=pr(t.getFormattedLabel(this.node.dataIndex,u,null,null,"label"),this.node.name);!1===ct("show")&&(d="");var g=this.node.getLayout(),p=a.get("minAngle");null==p&&(p=o.get("minAngle")),null!=(p=p/180*Math.PI)&&Math.abs(g.endAngle-g.startAngle)<p&&(d="");var S=this.childAt(1);Fl(S.style,S.hoverStyle||{},o,s,{defaultText:a.getShallow("show")?d:null,autoColor:e,useInsideStyle:!0});var C,I=(g.startAngle+g.endAngle)/2,z=Math.cos(I),O=Math.sin(I),V=ct("position"),Y=ct("distance")||0,G=ct("align");"outside"===V?(C=g.r+Y,G=I>Math.PI/2?"right":"left"):G&&"center"!==G?"left"===G?(C=g.r0+Y,I>Math.PI/2&&(G="right")):"right"===G&&(C=g.r-Y,I>Math.PI/2&&(G="left")):(C=(g.r+g.r0)/2,G="center"),S.attr("style",{text:d,textAlign:G,textVerticalAlign:ct("verticalAlign")||"middle",opacity:ct("opacity")}),S.attr("position",[C*z+g.cx,C*O+g.cy]);var nt=ct("rotate"),it=0;function ct(vt){var _t=a.get(vt);return null==_t?o.get(vt):_t}"radial"===nt?(it=-I)<-Math.PI/2&&(it+=Math.PI):"tangential"===nt?(it=Math.PI/2-I)>Math.PI/2?it-=Math.PI:it<-Math.PI/2&&(it+=Math.PI):"number"==typeof nt&&(it=nt*Math.PI/180),S.attr("rotation",it)},d0._initEvents=function(t,e,n,i){function o(){s.onEmphasis(i)}function a(){s.onNormal()}t.off("mouseover").off("mouseout").off("emphasis").off("normal");var s=this;n.isAnimationEnabled()&&t.on("mouseover",o).on("mouseout",a).on("emphasis",o).on("normal",a).on("downplay",function(){s.onDownplay()}).on("highlight",function(){s.onHighlight()})},ki(hC,_n),Ta.extend({type:"sunburst",init:function(){},render:function(t,e,n,i){var o=this;this.seriesModel=t,this.api=n,this.ecModel=e;var a=t.getData(),s=a.tree.root,u=t.getViewRoot(),d=this.group,g=t.get("renderLabelForZeroData"),p=[];if(u.eachNode(function(I){p.push(I)}),function(I,z){function O(Y){return Y.getId()}function V(Y,G){!function(tt,Q){if(g||!tt||tt.getValue()||(tt=null),tt!==s&&Q!==s)if(Q&&Q.piece)tt?(Q.piece.updateData(!1,tt,"normal",t,e),a.setItemGraphicEl(tt.dataIndex,Q.piece)):!(it=Q)||it.piece&&(d.remove(it.piece),it.piece=null);else if(tt){var nt=new hC(tt,t,e);d.add(nt),a.setItemGraphicEl(tt.dataIndex,nt)}var it}(null==Y?null:I[Y],null==G?null:z[G])}0===I.length&&0===z.length||new $c(z,I,O,O).add(V).update(V).remove(kn(V,null)).execute()}(p,this._oldChildren||[]),function(I,z){if(0<z.depth){o.virtualPiece?o.virtualPiece.updateData(!1,I,"normal",t,e):(o.virtualPiece=new hC(I,t,e),d.add(o.virtualPiece)),z.piece._onclickEvent&&z.piece.off("click",z.piece._onclickEvent);var O=function(V){o._rootToNode(z.parentNode)};z.piece._onclickEvent=O,o.virtualPiece.on("click",O)}else o.virtualPiece&&(d.remove(o.virtualPiece),o.virtualPiece=null)}(s,u),i&&i.highlight&&i.highlight.piece){var S=t.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(S)}else if(i&&i.unhighlight){var C=this.virtualPiece;!C&&s.children.length&&(C=s.children[0].piece),C&&C.onNormal()}this._initEvents(),this._oldChildren=p},dispose:function(){},_initEvents:function(){function t(n){var i=!1;e.seriesModel.getViewRoot().eachNode(function(o){if(!i&&o.piece&&o.piece.childAt(0)===n.target){var a=o.getModel().get("nodeClick");if("rootToNode"===a)e._rootToNode(o);else if("link"===a){var s=o.getModel(),u=s.get("link");u&&fg(u,s.get("target",!0)||"_blank")}i=!0}})}var e=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",t),this.group._onclickEvent=t},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,o=t[1]-n.cy,a=Math.sqrt(i*i+o*o);return a<=n.r&&a>=n.r0}}});var VD="sunburstRootToNode";Cr({type:VD,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(n,i){var o=Ov(t,[VD],n);if(o){var a=n.getViewRoot();a&&(t.direction=m1(a,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}})});var WD="sunburstHighlight";Cr({type:WD,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(n,i){var o=Ov(t,[WD],n);o&&(t.highlight=o.node)})}),Cr({type:"sunburstUnhighlight",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(n,i){t.unhighlight=!0})});var jD=Math.PI/180;function SI(t,e){return e=e||[0,0],kt(["x","y"],function(n,i){var o=this.getAxis(n),a=e[i],s=t[i]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s))},this)}function CI(t,e){return e=e||[0,0],kt([0,1],function(n){var i=e[n],o=t[n]/2,a=[],s=[];return a[n]=i-o,s[n]=i+o,a[1-n]=s[1-n]=e[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(s)[n])},this)}function MI(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,o=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))}function TI(t,e){return kt(["Radius","Angle"],function(n,i){var o=this["get"+n+"Axis"](),a=e[i],s=t[i]/2,u="dataTo"+n,d="category"===o.type?o.getBandWidth():Math.abs(o[u](a-s)-o[u](a+s));return"Angle"===n&&(d=d*Math.PI/180),d},this)}jo(kn(Xp,"sunburst")),oa(kn(function(t,e,n,i){e.eachSeriesByType(t,function(o){var a=o.get("center"),s=o.get("radius");Fe(s)||(s=[0,s]),Fe(a)||(a=[a,a]);var u=n.getWidth(),d=n.getHeight(),g=Math.min(u,d),p=ln(a[0],u),x=ln(a[1],d),S=ln(s[0],g/2),C=ln(s[1],g/2),I=-o.get("startAngle")*jD,z=o.get("minAngle")*jD,O=o.getData().tree.root,V=o.getViewRoot(),Y=V.depth,G=o.get("sort");null!=G&&function Yt(ue,Re){var ze=ue.children||[];ue.children=function wI(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort(function(i,o){var a=(i.getValue()-o.getValue())*(n?1:-1);return 0==a?(i.dataIndex-o.dataIndex)*(n?-1:1):a})}(ze,Re),ze.length&&St(ue.children,function(Ie){Yt(Ie,Re)})}(V,G);var tt=0;St(V.children,function(Yt){isNaN(Yt.getValue())||tt++});var Q=V.getValue(),nt=Math.PI/(Q||tt)*2,it=0<V.depth,vt=(C-S)/(V.height-(it?-1:1)||1),_t=o.get("clockwise"),At=o.get("stillShowZeroSum"),Ot=_t?1:-1,Bt=function(Yt,ue){if(Yt){var Re=ue;if(Yt!==O){var ze=Yt.getValue(),Ie=0===Q&&At?nt:ze*nt;Ie<z&&(Ie=z),Re=ue+Ot*Ie;var Je=Yt.depth-Y-(it?-1:1),mn=S+vt*Je,hi=S+vt*(1+Je),We=Yt.getModel();null!=We.get("r0")&&(mn=ln(We.get("r0"),g/2)),null!=We.get("r")&&(hi=ln(We.get("r"),g/2)),Yt.setLayout({angle:Ie,startAngle:ue,endAngle:Re,clockwise:_t,cx:p,cy:x,r0:mn,r:hi})}if(Yt.children&&Yt.children.length){var ai=0;St(Yt.children,function(fi){ai+=Bt(fi,ue+ai)})}return Re-ue}};if(it){var Jt=2*Math.PI;O.setLayout({angle:Jt,startAngle:I,endAngle:I+Jt,clockwise:_t,cx:p,cy:x,r0:S,r:S+vt})}Bt(V,I)})},"sunburst")),$u(kn(Dv,"sunburst"));var GD=Kd,DI=["itemStyle"],AI=["emphasis","itemStyle"],kI=["label"],II=["emphasis","label"],EI={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(n){return t.dataToPoint(n)},size:Rn(SI,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(n){return t.dataToPoint(n)},size:Rn(CI,t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(n){return t.dataToPoint(n)},size:Rn(MI,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:Rn(function(o){var a=e.dataToRadius(o[0]),s=n.dataToAngle(o[1]),u=t.coordToPoint([a,s]);return u.push(a,s*Math.PI/180),u}),size:Rn(TI,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(i,o){return t.dataToPoint(i,o)}}}}};function UD(t,e,n,i,o){null==n[t]||o||(e[t]=n[t],n[t]=i[t])}function qD(t,e,n,i){var o=t.get("renderItem"),a=t.coordinateSystem,s={};a&&(s=a.prepareCustoms?a.prepareCustoms():EI[a.type](a));var u,d,g,p,x,O,V,S=Dn({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(O,V){return null==V&&(V=u),e.get(e.getDimension(O||0),V)},style:function(O,V){null==V&&(V=u),z(V);var Y=d.getModel(DI).getItemStyle();null!=x&&(Y.fill=x);var G=e.getItemVisual(V,"opacity");null!=G&&(Y.opacity=G);var tt=O?$D(O,g):g;return Wo(Y,tt,null,{autoColor:x,isRectText:!0}),Y.text=tt.getShallow("show")?_i(t.getFormattedLabel(V,"normal"),_y(e,V)):null,O&&ZD(Y,O),Y},styleEmphasis:function(O,V){null==V&&(V=u),z(V);var Y=d.getModel(AI).getItemStyle(),G=O?$D(O,p):p;return Wo(Y,G,null,{isRectText:!0},!0),Y.text=G.getShallow("show")?Ke(t.getFormattedLabel(V,"emphasis"),t.getFormattedLabel(V,"normal"),_y(e,V)):null,O&&ZD(Y,O),Y},visual:function(O,V){return null==V&&(V=u),e.getItemVisual(V,O)},barLayout:function(O){if(a.getBaseAxis)return function(V){var Y=[],G=V.axis;if("category"===G.type){for(var tt=G.getBandWidth(),Q=0;Q<V.count;Q++)Y.push(Dn({bandWidth:tt,axisKey:"axis0",stackId:av+Q},V));var nt=cw(Y),it=[];for(Q=0;Q<V.count;Q++){var ct=nt.axis0[av+Q];ct.offsetCenter=ct.offset+ct.width/2,it.push(ct)}return it}}(Dn({axis:a.getBaseAxis()},O))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(O){return ff(O,n)}},s.api||{}),C={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:s.coordSys,dataInsideLength:e.count(),encode:(O=t.getData(),V={},St(O.dimensions,function(Y,G){var tt=O.getDimensionInfo(Y);if(!tt.isExtraCoord){var Q=tt.coordDim;(V[Q]=V[Q]||[])[tt.coordDimIndex]=G}}),V)},I=!0;return function(O,V){return u=O,I=!0,o&&o(Dn({dataIndexInside:O,dataIndex:e.getRawIndex(O),actionType:V?V.type:null},C),S)};function z(O){null==O&&(O=u),I&&(d=e.getItemModel(O),g=d.getModel(kI),p=d.getModel(II),x=e.getItemVisual(O,"color"),I=!1)}}function cT(t,e,n,i,o,a){return(t=dT(t,e,n,i,o,a,!0))&&a.setItemGraphicEl(e,t),t}function dT(t,e,n,i,o,a,s){var S,u=!n,d=(n=n||{}).type,g=n.shape,p=n.style;if(t&&(u||null!=d&&d!==t.__customGraphicType||"path"===d&&(S=g)&&(S.hasOwnProperty("pathData")||S.hasOwnProperty("d"))&&KD(g)!==t.__customPathData||"image"===d&&JD(p,"image")&&p.image!==t.__customImagePath||"text"===d&&JD(g,"text")&&p.text!==t.__customText)&&(o.remove(t),t=null),!u){var x=!t;return function(S,C,I,z,O,V,Y){var G={},tt=I.style||{};if(I.shape&&(G.shape=fn(I.shape)),I.position&&(G.position=I.position.slice()),I.scale&&(G.scale=I.scale.slice()),I.origin&&(G.origin=I.origin.slice()),I.rotation&&(G.rotation=I.rotation),"image"===S.type&&I.style){var Q=G.style={};St(["x","y","width","height"],function(ct){UD(ct,Q,tt,S.style,V)})}if("text"===S.type&&I.style&&(Q=G.style={},St(["x","y"],function(ct){UD(ct,Q,tt,S.style,V)}),!tt.hasOwnProperty("textFill")&&tt.fill&&(tt.textFill=tt.fill),!tt.hasOwnProperty("textStroke")&&tt.stroke&&(tt.textStroke=tt.stroke)),"group"!==S.type&&(S.useStyle(tt),V)){S.style.opacity=0;var nt=tt.opacity;null==nt&&(nt=1),qs(S,{style:{opacity:nt}},z,C)}V?S.attr(G):Xi(S,G,z,C),I.hasOwnProperty("z2")&&S.attr("z2",I.z2||0),I.hasOwnProperty("silent")&&S.attr("silent",I.silent),I.hasOwnProperty("invisible")&&S.attr("invisible",I.invisible),I.hasOwnProperty("ignore")&&S.attr("ignore",I.ignore),I.hasOwnProperty("info")&&S.attr("info",I.info);var it=I.styleEmphasis;df(S,it),Y&&du(S,!1!==it)}(t=t||function(S){var C,I=S.type;if("path"===I){var z=S.shape,O=null!=z.width&&null!=z.height?{x:z.x||0,y:z.y||0,width:z.width,height:z.height}:null,V=KD(z);(C=uf(V,null,O,z.layout||"center")).__customPathData=V}else if("image"===I)(C=new Po({})).__customImagePath=S.style.image;else if("text"===I)(C=new rn({})).__customText=S.style.text;else if("group"===I)C=new _n;else{if("compoundPath"===I)throw new Error('"compoundPath" is not supported yet.');C=new(sg(I))}return C.__customGraphicType=I,C.name=S.name,C}(n),e,n,i,0,x,s),"group"===d&&function(S,C,I,z,O){var it,V=I.children,Y=V?V.length:0,G=I.$mergeChildren,tt="byName"===G||I.diffChildrenByName,Q=!1===G;if(Y||tt||Q){if(tt)return void new $c((it={oldChildren:S.children()||[],newChildren:V||[],dataIndex:C,animatableModel:z,group:S,data:O}).oldChildren,it.newChildren,YD,YD,it).add(XD).update(XD).remove(NI).execute();Q&&S.removeAll();for(var nt=0;nt<Y;nt++)V[nt]&&dT(S.childAt(nt),C,V[nt],z,S,O)}}(t,e,n,i,a),o.add(t),t}}function YD(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function XD(t,e){var n=this.context;dT(null!=e?n.oldChildren[e]:null,n.dataIndex,null!=t?n.newChildren[t]:null,n.animatableModel,n.group,n.data)}function $D(t,e){var n=new dr({},e);return St(GD,function(i,o){t.hasOwnProperty(i)&&(n.option[o]=t[i])}),n}function ZD(t,e){for(var n in e)!e.hasOwnProperty(n)&&GD.hasOwnProperty(n)||(t[n]=e[n])}function NI(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}function KD(t){return t&&(t.pathData||t.d)}function JD(t,e){return t&&t.hasOwnProperty(e)}function QD(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function tA(t,e){return e.dim+t.model.componentIndex}function fC(t,e){$a.call(this,"radius",t,e),this.type="category"}ra.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(t,e){return fh(this.getSource(),this)},getDataParams:function(t,e,n){var i=ra.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),Ta.extend({type:"custom",_data:null,render:function(t,e,n,i){var o=this._data,a=t.getData(),s=this.group,u=qD(t,a,e,n);a.diff(o).add(function(g){cT(null,g,u(g,i),t,s,a)}).update(function(g,p){cT(o.getItemGraphicEl(p),g,u(g,i),t,s,a)}).remove(function(g){var p=o.getItemGraphicEl(g);p&&s.remove(p)}).execute();var d=t.get("clip",!0)?Ay(t.coordinateSystem,!1,t):null;d?s.setClipPath(d):s.removeClipPath(),this._data=a},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,i,o){var a=e.getData(),s=qD(e,a,n,i);function u(g){g.isGroup||(g.incremental=!0,g.useHoverLayer=!0)}for(var d=t.start;d<t.end;d++)cT(null,d,s(d,o),e,this.group,a).traverse(u)},dispose:_e,filterForExposedEvent:function(t,e,n,i){var o=e.element;if(null==o||n.name===o)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1}}),fC.prototype={constructor:fC,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:$a.prototype.dataToCoord,radiusToData:$a.prototype.coordToData},ki(fC,$a);var RI=or();function gC(t,e){$a.call(this,"angle",t,e=e||[0,360]),this.type="category"}function pC(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new fC,this._angleAxis=new gC,this._radiusAxis.polar=this._angleAxis.polar=this}gC.prototype={constructor:gC,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:$a.prototype.dataToCoord,angleToData:$a.prototype.coordToData,calculateCategoryInterval:function(){var t=this.getLabelModel(),e=this.scale,n=e.getExtent(),i=e.count();if(n[1]-n[0]<1)return 0;var o=n[0],a=this.dataToCoord(o+1)-this.dataToCoord(o),s=Math.abs(a),u=al(o,t.getFont(),"center","top"),d=Math.max(u.height,7)/s;isNaN(d)&&(d=1/0);var g=Math.max(0,Math.floor(d)),p=RI(this.model),x=p.lastAutoInterval,S=p.lastTickCount;return null!=x&&null!=S&&Math.abs(x-g)<=1&&Math.abs(S-i)<=1&&g<x?g=x:(p.lastTickCount=i,p.lastAutoInterval=g),g}},ki(gC,$a),pC.prototype={type:"polar",axisPointerEnabled:!0,constructor:pC,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),o=i.getExtent(),a=Math.min(o[0],o[1]),s=Math.max(o[0],o[1]);i.inverse?a=s-360:s=a+360;var u=Math.sqrt(e*e+n*n);e/=u,n/=u;for(var d=Math.atan2(-n,e)/Math.PI*180,g=d<a?1:-1;d<a||s<d;)d+=360*g;return[u,d]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]},getArea:function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(o,a){var s=o-this.cx,u=a-this.cy,d=s*s+u*u,g=this.r,p=this.r0;return d<=g*g&&p*p<=d}}}};var hT=Sr.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function eA(t,e){return e.type||(e.data?"category":"value")}function OI(t,e){var n=this,i=n.getAngleAxis(),o=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),t.eachSeries(function(u){if(u.coordinateSystem===n){var d=u.getData();St(d.mapDimension("radius",!0),function(g){o.scale.unionExtentFromData(d,kf(d,g))}),St(d.mapDimension("angle",!0),function(g){i.scale.unionExtentFromData(d,kf(d,g))})}}),Pf(i.scale,i.model),Pf(o.scale,o.model),"category"===i.type&&!i.onBand){var a=i.getExtent(),s=360/i.scale.count();i.inverse?a[1]+=s:a[1]-=s,i.setExtent(a[0],a[1])}}function nA(t,e){if(t.type=e.get("type"),t.scale=Ig(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}(e.axis=t).model=e}ei(hT.prototype,Pg),Wp("angle",hT,eA,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),Wp("radius",hT,eA,{splitNumber:5}),pu({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;return this.ecModel.eachComponent(t,function(n){n.getCoordSysModel()===this&&(e=n)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),Ca.register("polar",{dimensions:pC.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(i,o){var a=new pC(o);a.update=OI;var s=a.getRadiusAxis(),u=a.getAngleAxis(),d=i.findAxisModel("radiusAxis"),g=i.findAxisModel("angleAxis");nA(s,d),nA(u,g),function(p,x,S){var C=x.get("center"),I=S.getWidth(),z=S.getHeight();p.cx=ln(C[0],I),p.cy=ln(C[1],z);var O=p.getRadiusAxis(),V=Math.min(I,z)/2,Y=x.get("radius");null==Y?Y=[0,"100%"]:Fe(Y)||(Y=[0,Y]),Y=[ln(Y[0],V),ln(Y[1],V)],O.inverse?O.setExtent(Y[1],Y[0]):O.setExtent(Y[0],Y[1])}(a,i,e),n.push(a),(i.coordinateSystem=a).model=i}),t.eachSeries(function(i){if("polar"===i.get("coordinateSystem")){var o=t.queryComponents({mainType:"polar",index:i.get("polarIndex"),id:i.get("polarId")})[0];i.coordinateSystem=o.coordinateSystem}}),n}});var BI=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function mC(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),o=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:o[0],y2:o[1]}}function vC(t){return t.getRadiusAxis().inverse?0:1}function iA(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}Qu.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,o=i.getRadiusAxis().getExtent(),a=n.getTicksCoords(),s=n.getMinorTicksCoords(),u=kt(n.getViewLabels(),function(d){return(d=fn(d)).coord=n.dataToCoord(d.tickValue),d});iA(u),iA(a),St(BI,function(d){!t.get(d+".show")||n.scale.isBlank()&&"axisLine"!==d||this["_"+d](t,i,a,s,o,u)},this)}},_axisLine:function(t,e,n,i,o){var a,s=t.getModel("axisLine.lineStyle"),u=vC(e),d=u?0:1;(a=0===o[d]?new un({shape:{cx:e.cx,cy:e.cy,r:o[u]},style:s.getLineStyle(),z2:1,silent:!0}):new oi({shape:{cx:e.cx,cy:e.cy,r:o[u],r0:o[d]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(a)},_axisTick:function(t,e,n,i,o){var a=t.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),u=o[vC(e)],d=kt(n,function(g){return new go({shape:mC(e,[u,u+s],g.coord)})});this.group.add(zl(d,{style:Dn(a.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_minorTick:function(t,e,n,i,o){if(i.length){for(var a=t.getModel("axisTick"),s=t.getModel("minorTick"),u=(a.get("inside")?-1:1)*s.get("length"),d=o[vC(e)],g=[],p=0;p<i.length;p++)for(var x=0;x<i[p].length;x++)g.push(new go({shape:mC(e,[d,d+u],i[p][x].coord)}));this.group.add(zl(g,{style:Dn(s.getModel("lineStyle").getLineStyle(),Dn(a.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(t,e,n,i,o,a){var s=t.getCategories(!0),u=t.getModel("axisLabel"),d=u.get("margin"),g=t.get("triggerEvent");St(a,function(p,x){var S=u,C=p.tickValue,I=o[vC(e)],z=e.coordToPoint([I+d,p.coord]),O=e.cx,V=e.cy,Y=Math.abs(z[0]-O)/I<.3?"center":z[0]>O?"left":"right",G=Math.abs(z[1]-V)/I<.3?"middle":z[1]>V?"top":"bottom";s&&s[C]&&s[C].textStyle&&(S=new dr(s[C].textStyle,u,u.ecModel));var tt=new rn({silent:Wl.isLabelSilent(t)});this.group.add(tt),Wo(tt.style,S,{x:z[0],y:z[1],textFill:S.getTextColor()||t.get("axisLine.lineStyle.color"),text:p.formattedLabel,textAlign:Y,textVerticalAlign:G}),g&&(tt.eventData=Wl.makeAxisEventDataBase(t),tt.eventData.targetType="axisLabel",tt.eventData.value=p.rawLabel)},this)},_splitLine:function(t,e,n,i,o){var a=t.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],g=0;g<n.length;g++){var p=u++%s.length;d[p]=d[p]||[],d[p].push(new go({shape:mC(e,o,n[g].coord)}))}for(g=0;g<d.length;g++)this.group.add(zl(d[g],{style:Dn({stroke:s[g%s.length]},a.getLineStyle()),silent:!0,z:t.get("z")}))},_minorSplitLine:function(t,e,n,i,o){if(i.length){for(var a=t.getModel("minorSplitLine").getModel("lineStyle"),s=[],u=0;u<i.length;u++)for(var d=0;d<i[u].length;d++)s.push(new go({shape:mC(e,o,i[u][d].coord)}));this.group.add(zl(s,{style:a.getLineStyle(),silent:!0,z:t.get("z")}))}},_splitArea:function(t,e,n,i,o){if(n.length){var a=t.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],g=Math.PI/180,p=-n[0].coord*g,x=Math.min(o[0],o[1]),S=Math.max(o[0],o[1]),C=t.get("clockwise"),I=1;I<n.length;I++){var z=u++%s.length;d[z]=d[z]||[],d[z].push(new Kn({shape:{cx:e.cx,cy:e.cy,r0:x,r:S,startAngle:p,endAngle:-n[I].coord*g,clockwise:C},silent:!0})),p=-n[I].coord*g}for(I=0;I<d.length;I++)this.group.add(zl(d[I],{style:Dn({fill:s[I%s.length]},a.getAreaStyle()),silent:!0}))}}});var zI=["axisLine","axisTickLabel","axisName"],FI=["splitLine","splitArea","minorSplitLine"];Qu.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,o=i.getAngleAxis(),a=n.getTicksCoords(),s=n.getMinorTicksCoords(),u=o.getExtent()[0],d=n.getExtent(),g={position:[(x=i).cx,x.cy],rotation:u/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1},p=new Wl(t,g);St(zI,p.add,p),this.group.add(p.getGroup()),St(FI,function(x){t.get(x+".show")&&!n.scale.isBlank()&&this["_"+x](t,i,u,d,a,s)},this)}var x},_splitLine:function(t,e,n,i,o){var a=t.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],g=0;g<o.length;g++){var p=u++%s.length;d[p]=d[p]||[],d[p].push(new un({shape:{cx:e.cx,cy:e.cy,r:o[g].coord}}))}for(g=0;g<d.length;g++)this.group.add(zl(d[g],{style:Dn({stroke:s[g%s.length],fill:null},a.getLineStyle()),silent:!0}))},_minorSplitLine:function(t,e,n,i,o,a){if(a.length){for(var s=t.getModel("minorSplitLine").getModel("lineStyle"),u=[],d=0;d<a.length;d++)for(var g=0;g<a[d].length;g++)u.push(new un({shape:{cx:e.cx,cy:e.cy,r:a[d][g].coord}}));this.group.add(zl(u,{style:Dn({fill:null},s.getLineStyle()),silent:!0}))}},_splitArea:function(t,e,n,i,o){if(o.length){var a=t.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),u=0;s=s instanceof Array?s:[s];for(var d=[],g=o[0].coord,p=1;p<o.length;p++){var x=u++%s.length;d[x]=d[x]||[],d[x].push(new Kn({shape:{cx:e.cx,cy:e.cy,r0:g,r:o[p].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),g=o[p].coord}for(p=0;p<d.length;p++)this.group.add(zl(d[p],{style:Dn({fill:s[p%s.length]},a.getAreaStyle()),silent:!0}))}}});var HI=f_.extend({makeElOption:function(t,e,n,i,o){var a=n.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var s,u=a.polar,d=u.getOtherAxis(a).getExtent();s=a["dataTo"+Lh(a.dim)](e);var g=i.get("type");if(g&&"none"!==g){var p=aT(i),x=VI[g](a,u,s,d,p);x.style=p,t.graphicKey=x.type,t.pointer=x}var S=i.get("label.margin");PD(t,n,i,o,function(C,I,z,O,V){var Y=I.axis,G=Y.dataToCoord(C),tt=O.getAngleAxis().getExtent()[0];tt=tt/180*Math.PI;var Q,nt,it,ct=O.getRadiusAxis().getExtent();if("radius"===Y.dim){var vt=yt();he(vt,vt,tt),fe(vt,vt,[O.cx,O.cy]),Q=fa([G,-V],vt);var _t=I.getModel("axisLabel").get("rotate")||0,At=Wl.innerTextLayout(tt,_t*Math.PI/180,-1);nt=At.textAlign,it=At.textVerticalAlign}else{var Ot=ct[1];Q=O.coordToPoint([Ot+V,G]);var Bt=O.cx,Vt=O.cy;nt=Math.abs(Q[0]-Bt)/Ot<.3?"center":Q[0]>Bt?"left":"right",it=Math.abs(Q[1]-Vt)/Ot<.3?"middle":Q[1]>Vt?"top":"bottom"}return{position:Q,align:nt,verticalAlign:it}}(e,n,0,u,S))}}),VI={line:function(t,e,n,i,o){return"angle"===t.dim?{type:"Line",shape:lT(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i,o){var a=Math.max(1,t.getBandWidth()),s=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:LD(e.cx,e.cy,i[0],i[1],(-n-a/2)*s,(a/2-n)*s)}:{type:"Sector",shape:LD(e.cx,e.cy,n-a/2,n+a/2,0,2*Math.PI)}}};function fT(t,e){e.update="updateView",Cr(e,function(n,i){var o={};return i.eachComponent({mainType:"geo",query:n},function(a){a[t](n.name),St(a.coordinateSystem.regions,function(s){o[s.name]=a.isSelected(s.name)||!1})}),{selected:o,name:n.name}})}function ep(t,e,n){this._model=t}function rA(t,e,n,i){var o=n.calendarModel,a=n.seriesModel,s=o?o.coordinateSystem:a?a.coordinateSystem:null;return s===this?s[t](i):null}Qu.registerAxisPointerClass("PolarAxisPointer",HI),oa(kn(function(t,e,n){var i={},o=function(a){var s={};St(a,function(d,g){var p=d.getData(),x=d.coordinateSystem,S=x.getBaseAxis(),C=tA(x,S),I=S.getExtent(),z="category"===S.type?S.getBandWidth():Math.abs(I[1]-I[0])/p.count(),O=s[C]||{bandWidth:z,remainedWidth:z,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},V=O.stacks;s[C]=O;var Y=QD(d);V[Y]||O.autoWidthCount++,V[Y]=V[Y]||{width:0,maxWidth:0};var G=ln(d.get("barWidth"),z),tt=ln(d.get("barMaxWidth"),z),Q=d.get("barGap"),nt=d.get("barCategoryGap");G&&!V[Y].width&&(G=Math.min(O.remainedWidth,G),V[Y].width=G,O.remainedWidth-=G),tt&&(V[Y].maxWidth=tt),null!=Q&&(O.gap=Q),null!=nt&&(O.categoryGap=nt)});var u={};return St(s,function(d,g){u[g]={};var p=d.stacks,S=ln(d.categoryGap,d.bandWidth),C=ln(d.gap,1),I=d.remainedWidth,z=d.autoWidthCount,O=(I-S)/(z+(z-1)*C);O=Math.max(O,0),St(p,function(tt,Q){var nt=tt.maxWidth;nt&&nt<O&&(nt=Math.min(nt,I),tt.width&&(nt=Math.min(nt,tt.width)),I-=nt,tt.width=nt,z--)}),O=(I-S)/(z+(z-1)*C),O=Math.max(O,0);var V,Y=0;St(p,function(tt,Q){tt.width||(tt.width=O),Y+=(V=tt).width*(1+C)}),V&&(Y-=V.width*C);var G=-Y/2;St(p,function(tt,Q){u[g][Q]=u[g][Q]||{offset:G,width:tt.width},G+=tt.width*(1+C)})}),u}(Mn(e.getSeriesByType(t),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&"polar"===a.coordinateSystem.type}));e.eachSeriesByType(t,function(a){if("polar"===a.coordinateSystem.type){var s=a.getData(),u=a.coordinateSystem,d=u.getBaseAxis(),g=tA(u,d),p=QD(a),x=o[g][p],S=x.offset,C=x.width,I=u.getOtherAxis(d),z=a.coordinateSystem.cx,O=a.coordinateSystem.cy,V=a.get("barMinHeight")||0,Y=a.get("barMinAngle")||0;i[p]=i[p]||[];for(var G=s.mapDimension(I.dim),tt=s.mapDimension(d.dim),Q=hh(s,G),nt="radius"!==d.dim||!a.get("roundCap",!0),it="radius"===I.dim?I.dataToRadius(0):I.dataToAngle(0),ct=0,vt=s.count();ct<vt;ct++){var _t,At,Ot,Bt,Vt=s.get(G,ct),$t=s.get(tt,ct),Jt=0<=Vt?"p":"n",Yt=it;if(Q&&(i[p][$t]||(i[p][$t]={p:it,n:it}),Yt=i[p][$t][Jt]),"radius"===I.dim){var ue=I.dataToRadius(Vt)-it,Re=d.dataToAngle($t);Math.abs(ue)<V&&(ue=(ue<0?-1:1)*V),At=(_t=Yt)+ue,Bt=(Ot=Re-S)-C,Q&&(i[p][$t][Jt]=At)}else{var ze=I.dataToAngle(Vt,nt)-it,Ie=d.dataToRadius($t);Math.abs(ze)<Y&&(ze=(ze<0?-1:1)*Y),At=(_t=Ie+S)+C,Bt=(Ot=Yt)+ze,Q&&(i[p][$t][Jt]=Bt)}s.setItemLayout(ct,{cx:z,cy:O,r0:_t,r:At,startAngle:-Ot*Math.PI/180,endAngle:-Bt*Math.PI/180})}}},this)},"bar")),Oa({type:"polar"}),Fn(Sr.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){Sr.prototype.init.apply(this,arguments),Vi(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=uS.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=yn(t.regions||[],function(n,i){return i.name&&n.set(i.name,new dr(i,e)),n},pe()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new dr(null,this,this.ecModel)},getFormattedLabel:function(t,e){e=e||"normal";var n=this.getRegionModel(t).get(("normal"===e?"":e+".")+"label.formatter"),i={name:t};return"function"==typeof n?(i.status=e,n(i)):"string"==typeof n?n.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}}),Xb),Oa({type:"geo",init:function(t,e){var n=new Ev(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var o=this._mapDraw;t.get("show")?o.draw(t,e,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),fT("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),fT("select",{type:"geoSelect",event:"geoselected"}),fT("unSelect",{type:"geoUnSelect",event:"geounselected"}),ep.prototype={constructor:ep,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){var e=(t=nh(t)).getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var o=t.getDay();return{y:e,m:n,d:i,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+n+"-"+i,date:t}},getNextNDay:function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},update:function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],o=this._model.get("cellSize").slice(),a=this._model.getBoxLayoutParams(),s="horizontal"===this._orient?[n,7]:[7,n];St([0,1],function(p){g(o,p)&&(a[i[p]]=o[p]*s[p])});var u={width:e.getWidth(),height:e.getHeight()},d=this._rect=xi(a,u);function g(p,x){return null!=p[x]&&"auto"!==p[x]}St([0,1],function(p){g(o,p)||(o[p]=d[i[p]]/s[p])}),this._sw=o[0],this._sh=o[1]},dataToPoint:function(t,e){Fe(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var a=n.day,s=this._getRangeInfo([i.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},convertToPixel:kn(rA,"dataToPoint"),convertFromPixel:kn(rA,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(Fe(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),i=n.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);t=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},_getRangeInfo:function(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/864e5)-Math.floor(t[0].time/864e5)+1,i=new Date(t[0].time),o=i.getDate(),a=t[1].date.getDate();i.setDate(o+n-1);var s=i.getDate();if(s!==a)for(var u=0<i.getTime()-t[1].time?1:-1;(s=i.getDate())!==a&&0<(i.getTime()-t[1].time)*u;)n-=u,i.setDate(s-u);var d=Math.floor((n+t[0].day+6)/7),g=e?1-d:d-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:d,nthWeek:g,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return!1;var o=7*(t-1)-i.fweek+e,a=new Date(i.start.time);return a.setDate(i.start.d+o),this.getDateInfo(a)}},ep.dimensions=ep.prototype.dimensions,ep.getDimensionsInfo=ep.prototype.getDimensionsInfo,ep.create=function(t,e){var n=[];return t.eachComponent("calendar",function(i){var o=new ep(i,t,e);n.push(o),i.coordinateSystem=o}),t.eachSeries(function(i){"calendar"===i.get("coordinateSystem")&&(i.coordinateSystem=n[i.get("calendarIndex")||0])}),n},Ca.register("calendar",ep);var oA=Sr.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,i){var o=Oh(t);oA.superApply(this,"init",arguments),aA(t,o)},mergeOption:function(t,e){oA.superApply(this,"mergeOption",arguments),aA(this.option,t)}});function aA(t,e){var n=t.cellSize;Fe(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var i=kt([0,1],function(o){return function(a,s){return null!=a[wd[s][0]]||null!=a[wd[s][1]]&&null!=a[wd[s][2]]}(e,o)&&(n[o]="auto"),null!=n[o]&&"auto"!==n[o]});Gu(t,e,{type:"box",ignoreSize:i})}var WI={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},jI={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};Oa({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var i=this.group;i.removeAll();var o=t.coordinateSystem,a=o.getRangeInfo(),s=o.getOrient();this._renderDayRect(t,a,i),this._renderLines(t,a,s,i),this._renderYearText(t,a,s,i),this._renderMonthText(t,s,i),this._renderWeekText(t,a,s,i)},_renderDayRect:function(t,e,n){for(var i=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),a=i.getCellWidth(),s=i.getCellHeight(),u=e.start.time;u<=e.end.time;u=i.getNextNDay(u,1).time){var d=i.dataToRect([u],!1).tl,g=new Ji({shape:{x:d[0],y:d[1],width:a,height:s},cursor:"default",style:o});n.add(g)}},_renderLines:function(t,e,n,i){var o=this,a=t.coordinateSystem,s=t.getModel("splitLine.lineStyle").getLineStyle(),u=t.get("splitLine.show"),d=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=e.start,p=0;g.time<=e.end.time;p++){S(g.formatedDate),0===p&&(g=a.getDateInfo(e.start.y+"-"+e.start.m));var x=g.date;x.setMonth(x.getMonth()+1),g=a.getDateInfo(x)}function S(C){o._firstDayOfMonth.push(a.getDateInfo(C)),o._firstDayPoints.push(a.dataToRect([C],!1).tl);var I=o._getLinePointsOfOneWeek(t,C,n);o._tlpoints.push(I[0]),o._blpoints.push(I[I.length-1]),u&&o._drawSplitline(I,s,i)}S(a.getNextNDay(e.end.time,1).formatedDate),u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,d,n),s,i),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,d,n),s,i)},_getEdgesPoints:function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],o="horizontal"===n?0:1;return i[0][o]=i[0][o]-e/2,i[1][o]=i[1][o]+e/2,i},_drawSplitline:function(t,e,n){var i=new rr({z2:20,shape:{points:t},style:e});n.add(i)},_getLinePointsOfOneWeek:function(t,e,n){var i=t.coordinateSystem;e=i.getDateInfo(e);for(var o=[],a=0;a<7;a++){var s=i.getNextNDay(e.time,a),u=i.dataToRect([s.time],!1);o[2*s.day]=u.tl,o[2*s.day+1]=u["horizontal"===n?"bl":"tr"]}return o},_formatterLabel:function(t,e){return"string"==typeof t&&t?bp(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,i,o){e=e.slice();var a=["center","bottom"];"bottom"===i?(e[1]+=o,a=["center","top"]):"left"===i?e[0]-=o:"right"===i?(e[0]+=o,a=["center","top"]):e[1]-=o;var s=0;return"left"!==i&&"right"!==i||(s=Math.PI/2),{rotation:s,position:e,style:{textAlign:a[0],textVerticalAlign:a[1]}}},_renderYearText:function(t,e,n,i){var o=t.getModel("yearLabel");if(o.get("show")){var a=o.get("margin"),s=o.get("position");s=s||("horizontal"!==n?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(u[0][0]+u[1][0])/2,g=(u[0][1]+u[1][1])/2,p="horizontal"===n?0:1,x={top:[d,u[p][1]],bottom:[d,u[1-p][1]],left:[u[1-p][0],g],right:[u[p][0],g]},S=e.start.y;+e.end.y>+e.start.y&&(S=S+"-"+e.end.y);var C=o.get("formatter"),z=this._formatterLabel(C,{start:e.start.y,end:e.end.y,nameMap:S}),O=new rn({z2:30});Wo(O.style,o,{text:z}),O.attr(this._yearTextPositionControl(O,x[s],n,s,a)),i.add(O)}},_monthTextPositionControl:function(t,e,n,i,o){var a="left",s="top",u=t[0],d=t[1];return"horizontal"===n?(d+=o,e&&(a="center"),"start"===i&&(s="bottom")):(u+=o,e&&(s="middle"),"start"===i&&(a="right")),{x:u,y:d,textAlign:a,textVerticalAlign:s}},_renderMonthText:function(t,e,n){var i=t.getModel("monthLabel");if(i.get("show")){var o=i.get("nameMap"),a=i.get("margin"),s=i.get("position"),u=i.get("align"),d=[this._tlpoints,this._blpoints];bi(o)&&(o=WI[o.toUpperCase()]||[]);var g="start"===s?0:1,p="horizontal"===e?0:1;a="start"===s?-a:a;for(var x="center"===u,S=0;S<d[g].length-1;S++){var C=d[g][S].slice(),I=this._firstDayOfMonth[S];x&&(C[p]=(this._firstDayPoints[S][p]+d[0][S+1][p])/2);var O=i.get("formatter"),V=o[+I.m-1],Y={yyyy:I.y,yy:(I.y+"").slice(2),MM:I.m,M:+I.m,nameMap:V},G=this._formatterLabel(O,Y),tt=new rn({z2:30});En(Wo(tt.style,i,{text:G}),this._monthTextPositionControl(C,x,e,s,a)),n.add(tt)}}},_weekTextPositionControl:function(t,e,n,i,o){var a="center",s="middle",u=t[0],d=t[1],g="start"===n;return"horizontal"===e?(u=u+i+(g?1:-1)*o[0]/2,a=g?"right":"left"):(d=d+i+(g?1:-1)*o[1]/2,s=g?"bottom":"top"),{x:u,y:d,textAlign:a,textVerticalAlign:s}},_renderWeekText:function(t,e,n,i){var o=t.getModel("dayLabel");if(o.get("show")){var a=t.coordinateSystem,s=o.get("position"),u=o.get("nameMap"),d=o.get("margin"),g=a.getFirstDayOfWeek();bi(u)&&(u=jI[u.toUpperCase()]||[]);var p=a.getNextNDay(e.end.time,7-e.lweek).time,x=[a.getCellWidth(),a.getCellHeight()];d=ln(d,x["horizontal"===n?0:1]),"start"===s&&(p=a.getNextNDay(e.start.time,-(7+e.fweek)).time,d=-d);for(var S=0;S<7;S++){var C,I=a.getNextNDay(p,S),z=a.dataToRect([I.time],!1).center;C=Math.abs((S+g)%7);var O=new rn({z2:30});En(Wo(O.style,o,{text:u[C]}),this._weekTextPositionControl(z,n,s,d,x)),i.add(O)}}}});var sA={path:null,compoundPath:null,group:_n,image:Po,text:rn};wl(function(t){var e=t.graphic;Fe(e)?t.graphic=e[0]&&e[0].elements?[t.graphic[0]]:[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])});var GI=pu({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,GI.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,i=(e?n:t).elements,o=n.elements=e?[]:n.elements,a=[];this._flatten(i,a);var s=Ti(o,a);Ki(s);var u=this._elOptionsToUpdate=[];St(s,function(g,p){var S,C,I,z,O,V,x=g.option;x&&(u.push(x),function(S,C){var I=S.exist;if(C.id=S.keyInfo.id,!C.type&&I&&(C.type=I.type),null==C.parentId){var z=C.parentOption;z?C.parentId=z.id:I&&(C.parentId=I.parentId)}C.parentOption=null}(g,x),S=o,C=p,z=En({},I=x),O=S[C],"merge"===(V=I.$action||"merge")?O?(ei(O,z,!0),Gu(O,z,{ignoreSize:!0}),Bh(I,O)):S[C]=z:"replace"===V?S[C]=z:"remove"===V&&O&&(S[C]=null),function(S,C){!S||(S.hv=C.hv=[uA(C,["left","right"]),uA(C,["top","bottom"])],"group"===S.type&&(null==S.width&&(S.width=C.width=0),null==S.height&&(S.height=C.height=0)))}(o[p],x))},this);for(var d=o.length-1;0<=d;d--)null==o[d]?o.splice(d,1):delete o[d].$action},_flatten:function(t,e,n){St(t,function(i){if(i){n&&(i.parentOption=n),e.push(i);var o=i.children;"group"===i.type&&o&&this._flatten(o,e,i),delete i.children}},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});function lA(t,e,n,i){var o=n.type,a=new(sA.hasOwnProperty(o)?sA[o]:sg(o))(n);e.add(a),i.set(t,a),a.__ecGraphicId=t}function yC(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(i){yC(i,e)}),e.removeKey(t.__ecGraphicId),n.remove(t))}function uA(t,e){var n;return St(e,function(i){null!=t[i]&&"auto"!==t[i]&&(n=!0)}),n}Oa({type:"graphic",init:function(t,e){this._elMap=pe()},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},_updateElements:function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,i=this.group;St(e,function(o){var a=o.$action,s=o.id,u=n.get(s),d=o.parentId,g=null!=d?n.get(d):i,p=o.style;"text"===o.type&&p&&(o.hv&&o.hv[1]&&(p.textVerticalAlign=p.textBaseline=null),!p.hasOwnProperty("textFill")&&p.fill&&(p.textFill=p.fill),!p.hasOwnProperty("textStroke")&&p.stroke&&(p.textStroke=p.stroke));var C,x=(C=En({},C=o),St(["id","parentId","$action","hv","bounding"].concat(Hl),function(I){delete C[I]}),C);a&&"merge"!==a?"replace"===a?(yC(u,n),lA(s,g,x,n)):"remove"===a&&yC(u,n):u?u.attr(x):lA(s,g,x,n);var S=n.get(s);S&&(S.__ecGraphicWidthOption=o.width,S.__ecGraphicHeightOption=o.height,function(C,I){var z=C.eventData;C.silent||C.ignore||z||(z=C.eventData={componentType:"graphic",componentIndex:I.componentIndex,name:C.name}),z&&(z.info=C.info)}(S,t))})}},_relocate:function(t,e){for(var n=t.option.elements,i=this.group,o=this._elMap,a=e.getWidth(),s=e.getHeight(),u=0;u<n.length;u++){var d=n[u];if((p=o.get(d.id))&&p.isGroup){var g=(x=p.parent)===i;p.__ecGraphicWidth=ln(p.__ecGraphicWidthOption,g?a:x.__ecGraphicWidth)||0,p.__ecGraphicHeight=ln(p.__ecGraphicHeightOption,g?s:x.__ecGraphicHeight)||0}}for(u=n.length-1;0<=u;u--){var p,x;(p=o.get((d=n[u]).id))&&fu(p,d,(x=p.parent)===i?{width:a,height:s}:{width:x.__ecGraphicWidth,height:x.__ecGraphicHeight},null,{hv:d.hv,boundingMode:d.bounding})}},_clear:function(){var t=this._elMap;t.each(function(e){yC(e,t)}),this._elMap=pe()},dispose:function(){this._clear()}});var cA={};function Dx(t,e){cA[t]=e}function dA(t){return cA[t]}var UI=pu({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){UI.superApply(this,"optionUpdated",arguments),St(this.option.feature,function(t,e){var n=dA(e);n&&ei(t,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function hA(t,e){var n=ju(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new Ji({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}Oa({type:"toolbox",render:function(t,e,n,i){var p,x,S,C,I,z,O,o=this.group;if(o.removeAll(),t.get("show")){var a=+t.get("itemSize"),s=t.get("feature")||{},u=this._features||(this._features={}),d=[];St(s,function(p,x){d.push(x)}),new $c(this._featureNames||[],d).add(g).update(g).remove(kn(g,null)).execute(),this._featureNames=d,p=o,S=n,C=(x=t).getBoxLayoutParams(),I=x.get("padding"),O=xi(C,z={width:S.getWidth(),height:S.getHeight()},I),Sd(x.get("orient"),p,x.get("itemGap"),O.width,O.height),fu(p,C,z,I),o.add(hA(o.getBoundingRect(),t)),o.eachChild(function(p){var x=p.__title,S=p.hoverStyle;if(S&&x){var C=al(x,cc(S)),I=p.position[0]+o.position[0],z=!1;p.position[1]+o.position[1]+a+C.height>n.getHeight()&&(S.textPosition="top",z=!0);var O=z?-5-C.height:a+8;I+C.width/2>n.getWidth()?(S.textPosition=["100%",O],S.textAlign="right"):I-C.width/2<0&&(S.textPosition=[0,O],S.textAlign="left")}})}function g(p,x){var S,C=d[p],I=d[x],z=s[C],O=new dr(z,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===C&&(z.title=i.newTitle),C&&!I){if(0===C.indexOf("my"))S={model:O,onclick:O.option.onclick,featureName:C};else{var V=dA(C);if(!V)return;S=new V(O,e,n)}u[C]=S}else{if(!(S=u[I]))return;S.model=O,S.ecModel=e,S.api=n}C||!I?O.get("show")&&!S.unusable?(function(Y,G,tt){var Q=Y.getModel("iconStyle"),nt=Y.getModel("emphasis.iconStyle"),it=G.getIcons?G.getIcons():Y.get("icon"),ct=Y.get("title")||{};if("string"==typeof it){var vt=it,_t=ct;ct={},(it={})[tt]=vt,ct[tt]=_t}var At=Y.iconPaths={};St(it,function(Ot,Bt){var Vt=vl(Ot,{},{x:-a/2,y:-a/2,width:a,height:a});Vt.setStyle(Q.getItemStyle()),Vt.hoverStyle=nt.getItemStyle(),Vt.setStyle({text:ct[Bt],textAlign:nt.get("textAlign"),textBorderRadius:nt.get("textBorderRadius"),textPadding:nt.get("textPadding"),textFill:null});var $t=t.getModel("tooltip");$t&&$t.get("show")&&Vt.attr("tooltip",En({content:ct[Bt],formatter:$t.get("formatter",!0)||function(){return ct[Bt]},formatterParams:{componentType:"toolbox",name:Bt,title:ct[Bt],$vars:["name","title"]},position:$t.get("position",!0)||"bottom"},$t.option)),Er(Vt),t.get("showTitle")&&(Vt.__title=ct[Bt],Vt.on("mouseover",function(){var Jt=nt.getItemStyle(),Yt="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";Vt.setStyle({textFill:nt.get("textFill")||Jt.fill||Jt.stroke||"#000",textBackgroundColor:nt.get("textBackgroundColor"),textPosition:nt.get("textPosition")||Yt})}).on("mouseout",function(){Vt.setStyle({textFill:null,textBackgroundColor:null})})),Vt.trigger(Y.get("iconStatus."+Bt)||"normal"),o.add(Vt),Vt.on("click",Rn(G.onclick,G,e,n,Bt)),At[Bt]=Vt})}(O,S,C),O.setIconStatus=function(Y,G){var tt=this.option,Q=this.iconPaths;tt.iconStatus=tt.iconStatus||{},tt.iconStatus[Y]=G,Q[Y]&&Q[Y].trigger(G)},S.render&&S.render(O,e,n,i)):S.remove&&S.remove(e,n):S.dispose&&S.dispose(e,n)}},updateView:function(t,e,n,i){St(this._features,function(o){o.updateView&&o.updateView(o.model,e,n,i)})},remove:function(t,e){St(this._features,function(n){n.remove&&n.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){St(this._features,function(n){n.dispose&&n.dispose(t,e)})}});var fA=uh.toolbox.saveAsImage;function xC(t){this.model=t}xC.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:fA.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:fA.lang.slice()},xC.prototype.unusable=!Oe.canvasSupported,xC.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o="svg"===e.getZr().painter.getType()?"svg":n.get("type",!0)||"png",a=e.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||Oe.browser.ie||Oe.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(a.split(",")[1]),u=s.length,d=new Uint8Array(u);u--;)d[u]=s.charCodeAt(u);var g=new Blob([d]);window.navigator.msSaveOrOpenBlob(g,i+"."+o)}else{var p=n.get("lang"),x='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(p&&p[0]||"")+'" /></body>';window.open().document.write(x)}else{var S=document.createElement("a");S.download=i+"."+o,S.target="_blank",S.href=a;var C=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});S.dispatchEvent(C)}},Dx("saveAsImage",xC);var bC=uh.toolbox.magicType,gT="__ec_magicType_stack__";function pT(t){this.model=t}pT.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:fn(bC.title),option:{},seriesIndex:{}};var gA=pT.prototype;gA.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return St(t.get("type"),function(i){e[i]&&(n[i]=e[i])}),n};var pA={line:function(t,e,n,i){if("bar"===t)return ei({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(t,e,n,i){if("line"===t)return ei({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(t,e,n,i){var o=n.get("stack")===gT;if("line"===t||"bar"===t)return i.setIconStatus("stack",o?"normal":"emphasis"),ei({id:e,stack:o?"":gT},i.get("option.stack")||{},!0)}},qI=[["line","bar"],["stack"]];gA.onclick=function(t,e,n){var i=this.model,o=i.get("seriesIndex."+n);if(pA[n]){var a,s={series:[]};St(qI,function(u){0<=zn(u,n)&&St(u,function(d){i.setIconStatus(d,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(u){var p=pA[n](u.subType,u.id,u,i);p&&(Dn(p,u.option),s.series.push(p));var x=u.coordinateSystem;if(x&&"cartesian2d"===x.type&&("line"===n||"bar"===n)){var S=x.getAxesByScale("ordinal")[0];if(S){var C=S.dim+"Axis",I=t.queryComponents({mainType:C,index:u.get(name+"Index"),id:u.get(name+"Id")})[0].componentIndex;s[C]=s[C]||[];for(var z=0;z<=I;z++)s[C][I]=s[C][I]||{};s[C][I].boundaryGap="bar"===n}}}),"stack"===n&&(a=s.series&&s.series[0]&&s.series[0].stack===gT?ei({stack:bC.title.tiled},bC.title):fn(bC.title)),e.dispatchAction({type:"changeMagicType",currentType:n,newOption:s,newTitle:a,featureName:"magicType"})}},Cr({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),Dx("magicType",pT);var mA=uh.toolbox.dataView,_C=new Array(60).join("-");function wC(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var mT=new RegExp("[\t]+","g");function g_(t){this._dom=null,this.model=t}g_.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:fn(mA.title),lang:fn(mA.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},g_.prototype.onclick=function(t,e){var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var a=document.createElement("h4"),s=i.get("lang")||[];a.innerHTML=s[0]||i.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=i.get("textColor");var u=document.createElement("div"),d=document.createElement("textarea");u.style.cssText="display:block;width:100%;overflow:auto;";var g=i.get("optionToContent"),p=i.get("contentToOption"),x=function YI(t){var e=function(n){var i={},o=[],a=[];return n.eachRawSeries(function(s){var u=s.coordinateSystem;if(!u||"cartesian2d"!==u.type&&"polar"!==u.type)o.push(s);else{var d=u.getBaseAxis();if("category"===d.type){var g=d.dim+"_"+d.index;i[g]||(i[g]={categoryAxis:d,valueAxis:u.getOtherAxis(d),series:[]},a.push({axisDim:d.dim,axisIndex:d.index})),i[g].series.push(s)}else o.push(s)}}),{seriesGroupByCategoryAxis:i,other:o,meta:a}}(t);return{value:Mn([function(n){var i=[];return St(n,function(o,a){var s=o.categoryAxis,u=o.valueAxis.dim,d=[" "].concat(kt(o.series,function(I){return I.name})),g=[s.model.getCategories()];St(o.series,function(I){var z=I.getRawData();g.push(I.getRawData().mapArray(z.mapDimension(u),function(O){return O}))});for(var p=[d.join("\t")],x=0;x<g[0].length;x++){for(var S=[],C=0;C<g.length;C++)S.push(g[C][x]);p.push(S.join("\t"))}i.push(p.join("\n"))}),i.join("\n\n"+_C+"\n\n")}(e.seriesGroupByCategoryAxis),function(n){return kt(n,function(i){var o=i.getRawData(),a=[i.name],s=[];return o.each(o.dimensions,function(){for(var u=arguments.length,g=o.getName(arguments[u-1]),p=0;p<u-1;p++)s[p]=arguments[p];a.push((g?g+"\t":"")+s.join("\t"))}),a.join("\n")}).join("\n\n"+_C+"\n\n")}(e.other)],function(n){return n.replace(/[\n\t\s]/g,"")}).join("\n\n"+_C+"\n\n"),meta:e.meta}}(t);if("function"==typeof g){var S=g(e.getOption());"string"==typeof S?u.innerHTML=S:ao(S)&&u.appendChild(S)}else u.appendChild(d),d.readOnly=i.get("readOnly"),d.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",d.style.color=i.get("textColor"),d.style.borderColor=i.get("textareaBorderColor"),d.style.backgroundColor=i.get("textareaColor"),d.value=x.value;var C=x.meta,I=document.createElement("div");I.style.cssText="position:absolute;bottom:0;left:0;right:0;";var z="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",O=document.createElement("div"),V=document.createElement("div");z+=";background-color:"+i.get("buttonColor"),z+=";color:"+i.get("buttonTextColor");var Y=this;function G(){n.removeChild(o),Y._dom=null}zr(O,"click",G),zr(V,"click",function(){var tt;try{tt="function"==typeof p?p(u,e.getOption()):function XI(t,e){var n=t.split(new RegExp("\n*"+_C+"\n*","g")),i={series:[]};return St(n,function(o,a){if(function(g){if(0<=g.slice(0,g.indexOf("\n")).indexOf("\t"))return!0}(o)){var s=function(g){for(var p=g.split(/\n+/g),x=[],S=kt(wC(p.shift()).split(mT),function(O){return{name:O,data:[]}}),C=0;C<p.length;C++){var I=wC(p[C]).split(mT);x.push(I.shift());for(var z=0;z<I.length;z++)S[z]&&(S[z].data[C]=I[z])}return{series:S,categories:x}}(o),u=e[a],d=u.axisDim+"Axis";u&&(i[d]=i[d]||[],i[d][u.axisIndex]={data:s.categories},i.series=i.series.concat(s.series))}else s=function(g){for(var p=g.split(/\n+/g),x=wC(p.shift()),S=[],C=0;C<p.length;C++){var I=wC(p[C]);if(I){var z,O=I.split(mT),V="",Y=!1;z=isNaN(O[0])?(Y=!0,V=O[0],O=O.slice(1),S[C]={name:V,value:[]},S[C].value):S[C]=[];for(var G=0;G<O.length;G++)z.push(+O[G]);1===z.length&&(Y?S[C].value=z[0]:S[C]=z[0])}}return{name:x,data:S}}(o),i.series.push(s)}),i}(d.value,C)}catch(Q){throw G(),new Error("Data view format error "+Q)}tt&&e.dispatchAction({type:"changeDataView",newOption:tt}),G()}),O.innerHTML=s[1],V.innerHTML=s[2],V.style.cssText=z,O.style.cssText=z,i.get("readOnly")||I.appendChild(V),I.appendChild(O),o.appendChild(a),o.appendChild(u),o.appendChild(I),u.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},g_.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},g_.prototype.dispose=function(t,e){this.remove(t,e)},Dx("dataView",g_),Cr({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];St(t.newOption.series,function(i){var s,u,o=e.getSeriesByName(i.name)[0];if(o){var a=o.get("data");n.push({name:i.name,data:(s=i.data,u=a,kt(s,function(d,g){var p=u&&u[g];if(!Ln(p)||Fe(p))return d;Ln(d)&&!Fe(d)||(d={value:d});var x=null!=p.name&&null==d.name;return d=Dn(d,p),x&&delete d.name,d}))})}else n.push(En({type:"scatter"},i))}),e.mergeOption(Dn({series:n},t.newOption))});var pm=St,SC=zn,CC=kn,vT=["dataToPoint","pointToData"],$I=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function MC(t,e,n){var i=this._targetInfoList=[],o={},a=vA(e,t);pm(ZI,function(s,u){n&&n.include&&!(0<=SC(n.include,u))||s(a,i,o)})}var kx=MC.prototype;function yT(t){return t[0]>t[1]&&t.reverse(),t}function vA(t,e){return ta(t,e,{includeMainTypes:$I})}kx.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(n,i,o){if((n.coordRanges||(n.coordRanges=[])).push(i),!n.coordRange){n.coordRange=i;var a=xT[n.brushType](0,o,i);n.__rangeOffset={offset:_A[n.brushType](a.values,n.range,[1,1]),xyMinMax:a.xyMinMax}}})},kx.matchOutputRanges=function(t,e,n){pm(t,function(i){var o=this.findTargetInfo(i,e);o&&!0!==o&&St(o.coordSyses,function(a){var s=xT[i.brushType](1,a,i.range);n(i,s.values,a,e)})},this)},kx.setInputRanges=function(t,e){pm(t,function(n){var u,d,g,p,i=this.findTargetInfo(n,e);if(n.range=n.range||[],i&&!0!==i){n.panelId=i.panelId;var o=xT[n.brushType](0,i.coordSys,n.coordRange),a=n.__rangeOffset;n.range=a?_A[n.brushType](o.values,a.offset,(u=a.xyMinMax,d=SA(o.xyMinMax),g=SA(u),p=[d[0]/g[0],d[1]/g[1]],isNaN(p[0])&&(p[0]=1),isNaN(p[1])&&(p[1]=1),p)):o.values}},this)},kx.makePanelOpts=function(t,e){return kt(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:iC(i),isTargetByCursor:rC(i,t,n.coordSysModel),getLinearBrushOtherExtent:e_(i)}})},kx.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&0<=SC(i.coordSyses,e.coordinateSystem)},kx.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=vA(e,t),o=0;o<n.length;o++){var a=n[o],s=t.panelId;if(s){if(a.panelId===s)return a}else for(o=0;o<yA.length;o++)if(yA[o](i,a))return a}return!0};var ZI={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,o=t.gridModels,a=pe(),s={},u={};(n||i||o)&&(pm(n,function(d){var g=d.axis.grid.model;a.set(g.id,g),s[g.id]=!0}),pm(i,function(d){var g=d.axis.grid.model;a.set(g.id,g),u[g.id]=!0}),pm(o,function(d){a.set(d.id,d),s[d.id]=!0,u[d.id]=!0}),a.each(function(d){var p=[];pm(d.coordinateSystem.getCartesians(),function(x,S){(0<=SC(n,x.getAxis("x").model)||0<=SC(i,x.getAxis("y").model))&&p.push(x)}),e.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:p[0],coordSyses:p,getPanelRect:xA.grid,xAxisDeclared:s[d.id],yAxisDeclared:u[d.id]})}))},geo:function(t,e){pm(t.geoModels,function(n){var i=n.coordinateSystem;e.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:i,coordSyses:[i],getPanelRect:xA.geo})})}},yA=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,o=t.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&i&&(o=i.axis.grid.model),o&&o===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],xA={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Qd(t)),e}},xT={lineX:CC(bA,0),lineY:CC(bA,1),rect:function(t,e,n){var i=e[vT[t]]([n[0][0],n[1][0]]),o=e[vT[t]]([n[0][1],n[1][1]]),a=[yT([i[0],o[0]]),yT([i[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:kt(n,function(o){var a=e[vT[t]](o);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a}),xyMinMax:i}}};function bA(t,e,n,i){var o=n.getAxis(["x","y"][t]),a=yT(kt([0,1],function(u){return e?o.coordToData(o.toLocalCoord(i[u])):o.toGlobalCoord(o.dataToCoord(i[u]))})),s=[];return s[t]=a,s[1-t]=[NaN,NaN],{values:a,xyMinMax:s}}var _A={lineX:CC(wA,0),lineY:CC(wA,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return kt(t,function(i,o){return[i[0]-n[0]*e[o][0],i[1]-n[1]*e[o][1]]})}};function wA(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function SA(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var CA=St,bT="\0_ec_hist_store";function _T(t){return t[bT]||(t[bT]=[{}])}Sr.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var wT,p_,MA,TA,KI=["cartesian2d","polar","singleAxis"],DA=(p_=["axisIndex","axis","index","id"],MA=kt(wT=(wT=["x","y","z","radius","angle","single"]).slice(),Lh),TA=kt(p_=(p_||[]).slice(),Lh),function(t,e){St(wT,function(n,i){for(var o={name:n,capital:MA[i]},a=0;a<p_.length;a++)o[p_[a]]=n+TA[a];t.call(e,o)})});function ST(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}var h0=St,AA=Vu;function kA(t,e){var n=t.getAxisModel(),i=t._percentWindow,o=t._valueWindow;if(i){var a=cg(o,[0,500]);a=Math.min(a,20);var s=e||0===i[0]&&100===i[1];n.setRange(s?null:+o[0].toFixed(a),s?null:+o[1].toFixed(a))}}ST.prototype={constructor:ST,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries(function(n){if(function(a){return 0<=zn(KI,a)}(n.get("coordinateSystem"))){var i=this._dimName,o=e.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(o&&o.componentIndex)&&t.push(n)}},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n,i=this._dimName,o=this.ecModel,a=this.getAxisModel();return t="x"===i||"y"===i?(e="gridIndex","x"===i?"y":"x"):(e="polarIndex","angle"===i?"radius":"angle"),o.eachComponent(t+"Axis",function(s){(s.get(e)||0)===(a.get(e)||0)&&(n=s)}),n},getMinMaxSpan:function(){return fn(this._minMaxSpan)},calculateDataWindow:function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],u=[];h0(["start","end"],function(p,x){var S=t[p],C=t[p+"Value"];"percent"===o[x]?(null==S&&(S=a[x]),C=i.parse(no(S,a,n))):(e=!0,S=no(C=null==C?n[x]:i.parse(C),n,a)),u[x]=C,s[x]=S}),AA(u),AA(s);var d=this._minMaxSpan;function g(p,x,S,C,I){var z=I?"Span":"ValueSpan";qf(0,p,S,"all",d["min"+z],d["max"+z]);for(var O=0;O<2;O++)x[O]=no(p[O],S,C,!0),I&&(x[O]=i.parse(x[O]))}return e?g(u,s,n,a,!1):g(s,u,a,n,!0),{valueWindow:u,percentWindow:s}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(i,o,a){var s=[1/0,-1/0];return h0(a,function(u){var d=u.getData();d&&h0(d.mapDimension(o,!0),function(g){var p=d.getApproximateExtent(g);p[0]<s[0]&&(s[0]=p[0]),p[1]>s[1]&&(s[1]=p[1])})}),s[1]<s[0]&&(s=[NaN,NaN]),function(u,d){var g=u.getAxisModel(),p=g.getMin(!0),x="category"===g.get("type"),S=x&&g.getCategories().length;null!=p&&"dataMin"!==p&&"function"!=typeof p?d[0]=p:x&&(d[0]=0<S?0:NaN);var C=g.getMax(!0);null!=C&&"dataMax"!==C&&"function"!=typeof C?d[1]=C:x&&(d[1]=0<S?S-1:NaN),g.get("scale",!0)||(0<d[0]&&(d[0]=0),d[1]<0&&(d[1]=0))}(i,s),s}(this,this._dimName,e),function(i){var o=i._minMaxSpan={},a=i._dataZoomModel,s=i._dataExtent;h0(["min","max"],function(u){var d=a.get(u+"Span"),g=a.get(u+"ValueSpan");null!=g&&(g=i.getAxisModel().axis.scale.parse(g)),null!=g?d=no(s[0]+g,s,[0,100],!0):null!=d&&(g=no(d,[0,100],s,!0)-s[0]),o[u+"Span"]=d,o[u+"ValueSpan"]=g})}(this);var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,kA(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,kA(this,!0))},filterData:function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=t.get("filterMode"),a=this._valueWindow;"none"!==o&&h0(i,function(s){var u=s.getData(),d=u.mapDimension(n,!0);d.length&&("weakFilter"===o?u.filterSelf(function(g){for(var p,x,S,C=0;C<d.length;C++){var I=u.get(d[C],g),z=!isNaN(I),O=I<a[0],V=I>a[1];if(z&&!O&&!V)return!0;z&&(S=!0),O&&(p=!0),V&&(x=!0)}return S&&p&&x}):h0(d,function(g){if("empty"===o)s.setData(u=u.map(g,function(x){return(S=x)>=a[0]&&S<=a[1]?x:NaN;var S}));else{var p={};p[g]=a,u.selectRange(p)}}),h0(d,function(g){u.setApproximateExtent(a,g)}))})}}};var f0=St,g0=DA,CT=pu({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=IA(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this.doInit(i)},mergeOption:function(t){var e=IA(t);ei(this.option,t,!0),ei(this.settledOption,e,!0),this.doInit(e)},doInit:function(t){var e=this.option;Oe.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),PA(this,t);var n=this.settledOption;f0([["start","startValue"],["end","endValue"]],function(i,o){"value"===this._rangePropMode[o]&&(e[i[0]]=n[i[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,n,i,o){var a=this.dependentModels[e.axis][n],s=a.__dzAxisProxy||(a.__dzAxisProxy=new ST(e.name,n,this,o));t[e.name+"_"+n]=s},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();g0(function(n){var i=n.axisIndex;t[i]=di(t[i])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;g0(function(i){null!=t[i.axisIndex]&&(e=!0)},this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,i=this.dependentModels;if(t){var o="vertical"===e?"y":"x";i[o+"Axis"].length?(n[o+"AxisIndex"]=[0],t=!1):f0(i.singleAxis,function(a){t&&a.get("orient",!0)===e&&(n.singleAxisIndex=[a.componentIndex],t=!1)})}t&&g0(function(a){if(t){var s=[],u=this.dependentModels[a.axis];if(u.length&&!s.length)for(var d=0,g=u.length;d<g;d++)"category"===u[d].get("type")&&s.push(d);(n[a.axisIndex]=s).length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(a){this._isSeriesHasAllAxesTypeOf(a,"value")&&g0(function(s){var u=n[s.axisIndex],d=a.get(s.axisIndex),g=a.get(s.axisId);zn(u,d=a.ecModel.queryComponents({mainType:s.axis,index:d,id:g})[0].componentIndex)<0&&u.push(d)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){t=t||e.name},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return g0(function(i){var o=t.get(i.axisIndex),a=this.dependentModels[i.axis][o];a&&a.get("type")===e||(n=!1)},this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&0<e.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var t;return g0(function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}},this),t},eachTargetAxis:function(t,e){var n=this.ecModel;g0(function(i){f0(this.get(i.axisIndex),function(o){t.call(e,i,o,this,n)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t){var e=this.option,n=this.settledOption;f0([["start","startValue"],["end","endValue"]],function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])},this),PA(this,t)},setCalculatedRange:function(t){var e=this.option;f0(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function IA(t){var e={};return f0(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function PA(t,e){var n=t._rangePropMode,i=t.get("rangeMode");f0([["start","startValue"],["end","endValue"]],function(o,a){var s=null!=e[o[0]],u=null!=e[o[1]];s&&!u?n[a]="percent":!s&&u?n[a]="value":i?n[a]=i[a]:s&&(n[a]="percent")})}var MT=Cc.extend({type:"dataZoom",render:function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){var e=this.ecModel,n={};return this.dataZoomModel.eachTargetAxis(function(i,o){var a=e.getComponent(i.axis,o);if(a){var s=a.getCoordSysModel();s&&function(u,d,g,p){for(var x,S=0;S<g.length;S++)if(g[S].model===u){x=g[S];break}x||g.push(x={model:u,axisModels:[],coordIndex:p}),x.axisModels.push(d)}(s,a,n[s.mainType]||(n[s.mainType]=[]),s.componentIndex)}},this),n}});CT.extend({type:"dataZoom.select"}),MT.extend({type:"dataZoom.select"}),$u({getTargetSeries:function(t){var e=pe();return t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,o,a){St(a.getAxisProxy(i.name,o).getTargetSeriesModels(),function(s){e.set(s.uid,s)})})}),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,o,a){a.getAxisProxy(i.name,o).reset(a,e)}),n.eachTargetAxis(function(i,o,a){a.getAxisProxy(i.name,o).filterData(a,e)})}),t.eachComponent("dataZoom",function(n){var i=n.findRepresentativeAxisProxy(),o=i.getDataPercentWindow(),a=i.getDataValueWindow();n.setCalculatedRange({start:o[0],end:o[1],startValue:a[0],endValue:a[1]})})}}),Cr("dataZoom",function(t,e){var n=function JI(t,e,n){return function(o){var a,s={nodes:[],records:{}};if(e(function(d){s.records[d.name]={}}),!o)return s;for(i(o,s);a=!1,t(u),a;);function u(d){var g,p,x;!(0<=zn(s.nodes,d))&&(g=d,p=s,x=!1,e(function(S){St(n(g,S)||[],function(C){p.records[S.name][C]&&(x=!0)})}),x)&&(i(d,s),a=!0)}return s};function i(o,a){a.nodes.push(o),e(function(s){St(n(o,s)||[],function(u){a.records[s.name][u]=!0})})}}(Rn(e.eachComponent,e,"dataZoom"),DA,function(o,a){return o.get(a.axisIndex)}),i=[];e.eachComponent({mainType:"dataZoom",query:t},function(o,a){i.push.apply(i,n(o).nodes)}),St(i,function(o,a){o.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})});var EA=St;function TT(t,e,n){(this._brushController=new um(n.getZr())).on("brush",Rn(this._onBrush,this)).mount()}TT.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:fn(uh.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var Ix=TT.prototype;Ix.render=function(t,e,n,i){this.model=t,this.ecModel=e,this.api=n,function(o,a,s,u,d){var g=s._isZoomActive;u&&"takeGlobalCursor"===u.type&&(g="dataZoomSelect"===u.key&&u.dataZoomSelectActive),s._isZoomActive=g,o.setIconStatus("zoom",g?"emphasis":"normal");var p=new MC(NA(o.option),a,{include:["grid"]});s._brushController.setPanels(p.makePanelOpts(d,function(x){return x.xAxisDeclared&&!x.yAxisDeclared?"lineX":!x.xAxisDeclared&&x.yAxisDeclared?"lineY":"rect"})).enableBrush(!!g&&{brushType:"auto",brushStyle:o.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(o,a){o.setIconStatus("back",1<_T(a).length?"emphasis":"normal")}(t,e)},Ix.onclick=function(t,e,n){t2[n].call(this)},Ix.remove=function(t,e){this._brushController.unmount()},Ix.dispose=function(t,e){this._brushController.dispose()};var t2={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(t){var e=_T(t),n=e[e.length-1];1<e.length&&e.pop();var i={};return CA(n,function(o,a){for(var s=e.length-1;0<=s;s--)if(o=e[s][a]){i[a]=o;break}}),i}(this.ecModel))}};function NA(t){var e={};return St(["xAxisIndex","yAxisIndex"],function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),!1!==e[n]&&"none"!==e[n]||(e[n]=[])}),e}function DT(t){this.model=t}Ix._onBrush=function(t,e){if(e.isEnd&&t.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new MC(NA(this.model.option),i,{include:["grid"]}).matchOutputRanges(t,i,function(a,s,u){if("cartesian2d"===u.type){var d=a.brushType;"rect"===d?(o("x",u,s[0]),o("y",u,s[1])):o({lineX:"x",lineY:"y"}[d],u,s)}}),function(a,s){var u=_T(a);CA(s,function(d,g){for(var p=u.length-1;0<=p&&!u[p][g];p--);if(p<0){var x=a.queryComponents({mainType:"dataZoom",subType:"select",id:g})[0];if(x){var S=x.getPercentRange();u[0][g]={dataZoomId:g,start:S[0],end:S[1]}}}}),u.push(s)}(i,n),this._dispatchZoomAction(n)}function o(a,s,u){var S,C,z,d=s.getAxis(a),g=d.model,p=(S=a,C=g,i.eachComponent({mainType:"dataZoom",subType:"select"},function(O){O.getAxisModel(S,C.componentIndex)&&(z=O)}),z),x=p.findRepresentativeAxisProxy(g).getMinMaxSpan();null==x.minValueSpan&&null==x.maxValueSpan||(u=qf(0,u.slice(),d.scale.getExtent(),0,x.minValueSpan,x.maxValueSpan)),p&&(n[p.id]={dataZoomId:p.id,startValue:u[0],endValue:u[1]})}},Ix._dispatchZoomAction=function(t){var e=[];EA(t,function(n,i){e.push(fn(n))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},Dx("dataZoom",TT),wl(function(t){if(t){var e=t.dataZoom||(t.dataZoom=[]);Fe(e)||(t.dataZoom=e=[e]);var n=t.toolbox;if(n&&(Fe(n)&&(n=n[0]),n&&n.feature)){var i=n.feature.dataZoom;o("xAxis",i),o("yAxis",i)}}function o(a,s){if(s){var u=a+"Index",d=s[u];null==d||"all"===d||Fe(d)||(d=!1===d||"none"===d?[]:[d]),Fe(x=t[a])||(x=x?[x]:[]),EA(x,function(g,p){if(null==d||"all"===d||-1!==zn(d,p)){var x={type:"select",$fromToolbox:!0,filterMode:s.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+a+p};x[u]=p,e.push(x)}})}var x}}),DT.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:uh.toolbox.restore.title},DT.prototype.onclick=function(t,e,n){(function(i){i[bT]=null})(t),e.dispatchAction({type:"restore",from:this.uid})},Dx("restore",DT),Cr({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")}),pu({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var RA=St,n2=D0,i2=["","-webkit-","-moz-","-o-"];function LA(t,e,n,i,o){var d,p,a=e&&e.painter;if(n){var s=a&&a.getViewportRoot();s&&(d=t,p=document.body,ma(lo,s,i,o,!0)&&ma(d,p,lo[0],lo[1]))}else{t[0]=i,t[1]=o;var u=a&&a.getViewportRootOffset();u&&(t[0]+=u.offsetLeft,t[1]+=u.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function AT(t,e,n){if(Oe.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=e.getZr(),a=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],LA(this._styleCoord,o,a,e.getWidth()/2,e.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t,this._show=!1;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(u){if(u=u||window.event,!s._enterable){var d=o.handler;ur(o.painter.getViewportRoot(),u,!0),d.dispatch("mousemove",u)}},i.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function OA(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function kT(t){var e=this._zr=t.getZr();this._styleCoord=[0,0,0,0],OA(this._styleCoord,e,t.getWidth()/2,t.getHeight()/2),this._show=!1}AT.prototype={constructor:AT,_enterable:!0,update:function(t){var e=this._container,n=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;"absolute"!==i.position&&"absolute"!==n.position&&(i.position="relative"),t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var e=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(n,i)},show:function(t){clearTimeout(this._hideTimeout);var e=this.el,n=this._styleCoord;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function r2(t){var s,d,e=[],n=t.get("transitionDuration"),i=t.get("backgroundColor"),o=t.getModel("textStyle"),a=t.get("padding");return n&&e.push((d="left "+(s=n)+"s "+"cubic-bezier(0.23, 1, 0.32, 1)"+",top "+s+"s cubic-bezier(0.23, 1, 0.32, 1)",kt(i2,function(g){return g+"transition:"+d}).join(";"))),i&&(Oe.canvasSupported?e.push("background-Color:"+i):(e.push("background-Color:#"+Fr(i)),e.push("filter:alpha(opacity=70)"))),RA(["width","color","radius"],function(s){var u="border-"+s,d=n2(u),g=t.get(d);null!=g&&e.push(u+":"+g+("color"===s?"":"px"))}),e.push(function(s){var u=[],d=s.get("fontSize"),g=s.getTextColor();g&&u.push("color:"+g),u.push("font:"+s.getFont());var p=s.get("lineHeight");null==p&&(p=Math.round(3*d/2)),d&&u.push("line-height:"+p+"px");var x=s.get("textShadowColor"),S=s.get("textShadowBlur")||0,C=s.get("textShadowOffsetX")||0,I=s.get("textShadowOffsetY")||0;return S&&u.push("text-shadow:"+C+"px "+I+"px "+S+"px "+x),RA(["decoration","align"],function(z){var O=s.get(z);O&&u.push("text-"+z+":"+O)}),u.join(";")}(o)),null!=a&&e.push("padding:"+ju(a).join("px ")+"px"),e.join(";")+";"}(t)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n=this._styleCoord;LA(n,this._zr,this._appendToBody,t,e);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Rn(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:e}}},kT.prototype={constructor:kT,_enterable:!0,update:function(t){t.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var e=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(n,i)},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,n){this.el&&this._zr.remove(this.el);for(var i={},o=t,a="{marker",s=o.indexOf(a);0<=s;){var u=o.indexOf("|}"),d=o.substr(s+a.length,u-s-a.length);i["marker"+d]=-1<d.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[d],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[d]},s=(o=o.substr(u+1)).indexOf("{marker")}var g=n.getModel("textStyle"),p=g.get("fontSize"),x=n.get("textLineHeight");null==x&&(x=Math.round(3*p/2)),this.el=new rn({style:Wo({},g,{rich:i,text:t,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:x}),z:n.get("z")}),this._zr.add(this.el);var S=this;this.el.on("mouseover",function(){S._enterable&&(clearTimeout(S._hideTimeout),S._show=!0),S._inContent=!0}),this.el.on("mouseout",function(){S._enterable&&S._show&&S.hideLater(S._hideDelay),S._inContent=!1})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){if(this.el){var n=this._styleCoord;OA(n,this._zr,t,e),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Rn(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var t=this.getSize();return{width:t[0],height:t[1]}}};var BA=Rn,m_=St,zA=ln,o2=new Ji({shape:{x:-1,y:-1,width:2,height:2}});function IT(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(dr.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new dr(n,e,e.ecModel))}return e}function FA(t,e){return t.dispatchAction||Rn(e.dispatchAction,e)}function HA(t){return"center"===t||"middle"===t}Oa({type:"tooltip",init:function(t,e){if(!Oe.node){var n,i=t.getComponent("tooltip"),o=i.get("renderMode");this._renderMode=ws(o),"html"===this._renderMode?(n=new AT(e.getDom(),e,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new kT(e),this._newLine="\n"),this._tooltipContent=n}},render:function(t,e,n){if(!Oe.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");CD("itemTooltip",this._api,BA(function(e,n,i){"none"!==t&&(0<=t.indexOf(e)?this._tryShow(n,i):"leave"===e&&this._hide(i))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,n,i){if(i.from!==this.uid&&!Oe.node){var o=FA(i,n);this._ticket="";var a=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var s=o2;s.position=[i.x,i.y],s.update(),s.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:s},o)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},o);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var u=Ed(i,e),d=u.point[0],g=u.point[1];null!=d&&null!=g&&this._tryShow({offsetX:d,offsetY:g,position:i.position,target:u.el},o)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},manuallyHideTip:function(t,e,n,i){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(FA(i,n))},_manuallyAxisShowTip:function(t,e,n,i){var o=i.seriesIndex,a=i.dataIndex,s=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=a&&null!=s){var u=e.getSeriesByIndex(o);if(u&&"axis"===(t=IT([u.getData().getItemModel(a),u,(u.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:a,position:i.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=Rn(e,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,o=[e.offsetX,e.offsetY],a=[],s=[],u=IT([e.tooltipOption,this._tooltipModel]),d=this._renderMode,g=this._newLine,p={};m_(t,function(S){m_(S.dataByAxis,function(C){var I=n.getComponent(C.axisDim+"Axis",C.axisIndex),z=C.value,O=[];if(I&&null!=z){var V=ED(z,I.axis,n,C.seriesDataIndices,C.valueLabelOpt);St(C.seriesDataIndices,function(G){var tt=n.getSeriesByIndex(G.seriesIndex),Q=G.dataIndexInside,nt=tt&&tt.getDataParams(Q);if(nt.axisDim=C.axisDim,nt.axisIndex=C.axisIndex,nt.axisType=C.axisType,nt.axisId=C.axisId,nt.axisValue=mb(I.axis,z),nt.axisValueLabel=V,nt){s.push(nt);var it,ct=tt.formatTooltip(Q,!0,null,d);Ln(ct)?(it=ct.html,ei(p,ct.markers)):it=ct,O.push(it)}});var Y=V;a.push("html"!==d?O.join(g):(Y?Vr(Y)+g:"")+O.join(g))}})},this),a.reverse(),a=a.join(this._newLine+this._newLine);var x=e.position;this._showOrMove(u,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(u,x,o[0],o[1],this._tooltipContent,s):this._showTooltipContent(u,a,s,Math.random(),o[0],o[1],x,void 0,p)})},_showSeriesItemTooltip:function(t,e,n){var o=e.seriesIndex,a=this._ecModel.getSeriesByIndex(o),s=e.dataModel||a,u=e.dataIndex,d=e.dataType,g=s.getData(d),p=IT([g.getItemModel(u),s,a&&(a.coordinateSystem||{}).model,this._tooltipModel]),x=p.get("trigger");if(null==x||"item"===x){var S,C,I=s.getDataParams(u,d),z=s.formatTooltip(u,!1,d,this._renderMode);C=Ln(z)?(S=z.html,z.markers):(S=z,null);var O="item_"+s.name+"_"+u;this._showOrMove(p,function(){this._showTooltipContent(p,S,I,O,t.offsetX,t.offsetY,t.position,t.target,C)}),n({type:"showTip",dataIndexInside:u,dataIndex:g.getRawIndex(u),seriesIndex:o,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var i=e.tooltip;"string"==typeof i&&(i={content:i,formatter:i});var o=new dr(i,this._tooltipModel,this._ecModel),a=o.get("content"),s=Math.random();this._showOrMove(o,function(){this._showTooltipContent(o,a,o.get("formatterParams")||{},s,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,i,o,a,s,u,d){if(this._ticket="",t.get("showContent")&&t.get("show")){var g=this._tooltipContent,p=t.get("formatter");s=s||t.get("position");var x=e;if(p&&"string"==typeof p)x=mi(p,n,!0);else if("function"==typeof p){var S=BA(function(C,I){C===this._ticket&&(g.setContent(I,d,t),this._updatePosition(t,s,o,a,g,n,u))},this);this._ticket=i,x=p(n,i,S)}g.setContent(x,d,t),g.show(t),this._updatePosition(t,s,o,a,g,n,u)}},_updatePosition:function(t,e,n,i,o,a,s){var u=this._api.getWidth(),d=this._api.getHeight();e=e||t.get("position");var z,O,V,Y,G,tt,Q,nt,it,ct,g=o.getSize(),p=t.get("align"),x=t.get("verticalAlign"),S=s&&s.getBoundingRect().clone();if(s&&S.applyTransform(s.transform),"function"==typeof e&&(e=e([n,i],a,o.el,S,{viewSize:[u,d],contentSize:g.slice()})),Fe(e))n=zA(e[0],u),i=zA(e[1],d);else if(Ln(e)){e.width=g[0],e.height=g[1];var C=xi(e,{width:u,height:d});n=C.x,i=C.y,x=p=null}else if("string"==typeof e&&s)n=(I=function(z,O,V){var Y=V[0],G=V[1],tt=0,Q=0,nt=O.width,it=O.height;switch(z){case"inside":tt=O.x+nt/2-Y/2,Q=O.y+it/2-G/2;break;case"top":tt=O.x+nt/2-Y/2,Q=O.y-G-5;break;case"bottom":tt=O.x+nt/2-Y/2,Q=O.y+it+5;break;case"left":tt=O.x-Y-5,Q=O.y+it/2-G/2;break;case"right":tt=O.x+nt+5,Q=O.y+it/2-G/2}return[tt,Q]}(e,S,g))[0],i=I[1];else{var I;n=(z=n,O=i,V=o,Y=u,G=d,tt=p?null:20,Q=x?null:20,nt=V.getOuterSize(),it=nt.width,ct=nt.height,null!=tt&&(Y<z+it+tt?z-=it+tt:z+=tt),null!=Q&&(G<O+ct+Q?O-=ct+Q:O+=Q),I=[z,O])[0],i=I[1]}p&&(n-=HA(p)?g[0]/2:"right"===p?g[0]:0),x&&(i-=HA(x)?g[1]/2:"bottom"===x?g[1]:0),t.get("confine")&&(n=(I=function(z,O,V,Y,G){var tt=V.getOuterSize(),Q=tt.width,nt=tt.height;return z=Math.min(z+Q,Y)-Q,O=Math.min(O+nt,G)-nt,[z=Math.max(z,0),O=Math.max(O,0)]}(n,i,o,u,d))[0],i=I[1]),o.moveTo(n,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&m_(e,function(i,o){var a=i.dataByAxis||{},s=(t[o]||{}).dataByAxis||[];(n&=a.length===s.length)&&m_(a,function(u,d){var g=s[d]||{},p=u.seriesDataIndices||[],x=g.seriesDataIndices||[];(n&=u.value===g.value&&u.axisType===g.axisType&&u.axisId===g.axisId&&p.length===x.length)&&m_(p,function(S,C){var I=x[C];n&=S.seriesIndex===I.seriesIndex&&S.dataIndex===I.dataIndex})})}),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){Oe.node||(this._tooltipContent.dispose(),iT("itemTooltip",e))}}),Cr({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),Cr({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var a2=["rect","polygon","keep","clear"],VA=St;function WA(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function PT(t,e,n){var i={};return VA(e,function(o){var a=i[o]=function(){function s(){}return s.prototype.__hidden=s.prototype,new s}();VA(t[o],function(s,u){if(Nr.isValidType(u)){var d={type:u,visual:s};n&&n(d,o),a[u]=new Nr(d),"opacity"===u&&((d=fn(d)).type="colorAlpha",a.__hidden.__alphaForOpacity=new Nr(d))}})}),i}function jA(t,e,n){var i;St(n,function(o){e.hasOwnProperty(o)&&WA(e[o])&&(i=!0)}),i&&St(n,function(o){e.hasOwnProperty(o)&&WA(e[o])?t[o]=fn(e[o]):delete t[o]})}var ET={lineX:GA(0),lineY:GA(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&Eg(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var o=t.x,a=t.y,s=t.width,u=t.height,d=i[0];return!!(Eg(i,o,a)||Eg(i,o+s,a)||Eg(i,o,a+u)||Eg(i,o+s,a+u)||Yi.create(t).contain(d[0],d[1])||pf(o,a,o+s,a,i)||pf(o,a,o,a+u,i)||pf(o+s,a,o+s,a+u,i)||pf(o,a+u,o+s,a+u,i))||void 0}}};function GA(t){var e=["x","y"],n=["width","height"];return{point:function(i,o,a){if(i)return v_(i[t],a.range)},rect:function(i,o,a){if(i){var s=a.range,u=[i[e[t]],i[e[t]]+i[n[t]]];return u[1]<u[0]&&u.reverse(),v_(u[0],s)||v_(u[1],s)||v_(s[0],u)||v_(s[1],u)}}}}function v_(t,e){return e[0]<=t&&t<=e[1]}var UA=["inBrush","outOfBrush"],NT="__ecBrushSelect",RT="__ecInBrushSelectEvent",qA=Td.VISUAL.BRUSH;function YA(t){t.eachComponent({mainType:"brush"},function(e){(e.brushTargetManager=new MC(e.option,t)).setInputRanges(e.areas,t)})}function s2(t,e){if(!t.isDisposed()){var n=t.getZr();n[RT]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[RT]=!1}}function XA(t,e,n,i){for(var o=0,a=e.length;o<a;o++){var s=e[o];if(t[s.brushType](i,n,s.selectors,s))return!0}}function $A(t){var e=t.brushSelector;if(bi(e)){var n=[];return St(ET,function(o,a){n[a]=function(s,u,d,g){var p=u.getItemLayout(s);return o[e](p,d,g)}}),n}if(Ui(e)){var i={};return St(ET,function(o,a){i[a]=e}),i}return e}oa(qA,function(t,e,n){t.eachComponent({mainType:"brush"},function(i){n&&"takeGlobalCursor"===n.type&&i.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),YA(t)}),jo(qA,function(t,e,n){var i,o,a=[];t.eachComponent({mainType:"brush"},function(s,u){var d={brushId:s.id,brushIndex:u,brushName:s.name,areas:fn(s.areas),selected:[]};a.push(d);var g=s.option,p=g.brushLink,x=[],S=[],C=[],I=0;u||(i=g.throttleType,o=g.throttleDelay);var z=kt(s.areas,function(G){return tt=Dn({boundingRect:l2[G.brushType](G)},G),Q=tt.selectors={},St(ET[tt.brushType],function(nt,it){Q[it]=function(ct){return nt(ct,Q,tt)}}),tt;var tt,Q}),O=PT(s.option,UA,function(G){G.mappingMethod="fixed"});function V(G){return"all"===p||x[G]}function Y(G){return!!G.length}Fe(p)&&St(p,function(G){x[G]=1}),t.eachSeries(function(G,tt){var nt,it,ct,Q=C[tt]=[];"parallel"===G.subType?(it=tt,I|=(ct=(nt=G).coordinateSystem).hasAxisBrushed(),V(it)&&ct.eachActiveState(nt.getData(),function(vt,_t){"active"===vt&&(S[_t]=1)})):function(nt,it,ct){var Ot,Bt,vt=$A(nt);if(vt&&(Ot=it,null==(Bt=s.option.seriesIndex)||"all"===Bt||!(Fe(Bt)?zn(Bt,Ot)<0:Ot!==Bt))&&(St(z,function(At){vt[At.brushType]&&s.brushTargetManager.controlSeries(At,nt,t)&&ct.push(At),I|=Y(ct)}),V(it)&&Y(ct))){var _t=nt.getData();_t.each(function(At){XA(vt,ct,_t,At)&&(S[At]=1)})}}(G,tt,Q)}),t.eachSeries(function(G,tt){var Q={seriesId:G.id,seriesIndex:tt,seriesName:G.name,dataIndex:[]};d.selected.push(Q);var nt=$A(G),it=C[tt],ct=G.getData(),vt=V(tt)?function(_t){return S[_t]?(Q.dataIndex.push(ct.getRawIndex(_t)),"inBrush"):"outOfBrush"}:function(_t){return XA(nt,it,ct,_t)?(Q.dataIndex.push(ct.getRawIndex(_t)),"inBrush"):"outOfBrush"};(V(tt)?I:Y(it))&&function(_t,At,Ot,Bt,Vt,$t){var Jt,Yt={};function ue(Ie){return Ot.getItemVisual(Jt,Ie)}function Re(Ie,Je){Ot.setItemVisual(Jt,Ie,Je)}St(_t,function(Ie){var Je=Nr.prepareVisualTypes(At[Ie]);Yt[Ie]=Je}),Ot.each(function ze(Ie,Je){var mn=Ot.getRawDataItem(Jt=Ie);if(!mn||!1!==mn.visualMap)for(var hi=Bt.call(void 0,Ie),We=At[hi],ai=Yt[hi],fi=0,Oi=ai.length;fi<Oi;fi++){var Ur=ai[fi];We[Ur]&&We[Ur].applyVisual(Ie,ue,Re)}})}(UA,O,ct,vt)})}),function(s,u,d,g,p){if(p){var x=s.getZr();x[RT]||(x[NT]||(x[NT]=s2),_g(x,NT,d,u)(s,g))}}(e,i,o,a,n)});var l2={lineX:_e,lineY:_e,rect:function(t){return ZA(t.range)},polygon:function(t){for(var e,n=t.range,i=0,o=n.length;i<o;i++){var a=n[i];a[0]<(e=e||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&ZA(e)}};function ZA(t){return new Yi(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var u2=["#ddd"];function KA(t,e){return ei({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new dr(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}function LT(t,e,n,i){i&&i.$from===t.id||this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}function OT(t,e,n){this.model=t,this.ecModel=e,this.api=n}pu({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;e||jA(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:u2},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(t){t&&(this.areas=kt(t,function(e){return KA(this.option,e)},this))},setBrushOption:function(t){this.brushOption=KA(this.option,t),this.brushType=this.brushOption.brushType}}),Oa({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,(this._brushController=new um(e.getZr())).on("brush",Rn(this._onBrush,this)).mount()},render:function(t){return this.model=t,LT.apply(this,arguments)},updateTransform:function(t,e){return YA(e),LT.apply(this,arguments)},updateView:LT,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),e.isEnd&&!e.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:fn(t),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:fn(t),$from:n})}}),Cr({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(n){n.setAreas(t.areas)})}),Cr({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),Cr({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),OT.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:fn(uh.toolbox.brush.title)};var TC=OT.prototype;function JA(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},o=i.normal||(i.normal={}),a={normal:1,emphasis:1};St(i,function(s,u){a[u]||p0(o,u)||(o[u]=s)}),n.label&&!p0(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function p0(t,e){return t.hasOwnProperty(e)}TC.render=TC.updateView=function(t,e,n){var i,o,a;e.eachComponent({mainType:"brush"},function(s){i=s.brushType,o=s.brushOption.brushMode||"single",a|=s.areas.length}),this._brushType=i,this._brushMode=o,St(t.get("type",!0),function(s){t.setIconStatus(s,("keep"===s?"multiple"===o:"clear"===s?a:s===i)?"emphasis":"normal")})},TC.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return St(t.get("type",!0),function(i){e[i]&&(n[i]=e[i])}),n},TC.onclick=function(t,e,n){var i=this._brushType,o=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},Dx("brush",OT),wl(function(t,e){var d,g,n=t&&t.brush;if(Fe(n)||(n=n?[n]:[]),n.length){var i=[];St(n,function(d){var g=d.hasOwnProperty("toolbox")?d.toolbox:[];g instanceof Array&&(i=i.concat(g))});var o=t&&t.toolbox;Fe(o)&&(o=o[0]),o||(t.toolbox=[o={feature:{}}]);var a=o.feature||(o.feature={}),s=a.brush||(a.brush={}),u=s.type||(s.type=[]);u.push.apply(u,i),g={},St(d=u,function(p){g[p]=1}),d.length=0,St(g,function(p,x){d.push(x)}),e&&!u.length&&u.push.apply(u,a2)}}),pu({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),Oa({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,o=t.getModel("textStyle"),a=t.getModel("subtextStyle"),s=t.get("textAlign"),u=_i(t.get("textBaseline"),t.get("textVerticalAlign")),d=new rn({style:Wo({},o,{text:t.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),g=d.getBoundingRect(),p=t.get("subtext"),x=new rn({style:Wo({},a,{text:p,textFill:a.getTextColor(),y:g.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),S=t.get("link"),C=t.get("sublink"),I=t.get("triggerEvent",!0);d.silent=!S&&!I,x.silent=!C&&!I,S&&d.on("click",function(){fg(S,"_"+t.get("target"))}),C&&x.on("click",function(){fg(C,"_"+t.get("subtarget"))}),d.eventData=x.eventData=I?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(d),p&&i.add(x);var z=i.getBoundingRect(),O=t.getBoxLayoutParams();O.width=z.width,O.height=z.height;var V=xi(O,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));s||("middle"===(s=t.get("left")||t.get("right"))&&(s="center"),"right"===s?V.x+=V.width:"center"===s&&(V.x+=V.width/2)),u||("center"===(u=t.get("top")||t.get("bottom"))&&(u="middle"),"bottom"===u?V.y+=V.height:"middle"===u&&(V.y+=V.height/2),u=u||"top"),i.attr("position",[V.x,V.y]);var Y={textAlign:s,textVerticalAlign:u};d.setStyle(Y),x.setStyle(Y),z=i.getBoundingRect();var G=V.margin,tt=t.getItemStyle(["color","opacity"]);tt.fill=t.get("backgroundColor");var Q=new Ji({shape:{x:z.x-G[3],y:z.y-G[0],width:z.width+G[1]+G[3],height:z.height+G[0]+G[2],r:t.get("borderRadius")},style:tt,subPixelOptimize:!0,silent:!0});i.add(Q)}}}),Sr.registerSubTypeDefaulter("timeline",function(){return"slider"}),Cr({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),Dn({currentIndex:n.option.currentIndex},t)}),Cr({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)});var QA=Sr.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){QA.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(e<=t&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],n=t.axisType,i=this._names=[];if("category"===n){var o=[];St(e,function(s,u){var d,g=An(s);Ln(s)?(d=fn(s)).value=u:d=u,o.push(d),bi(g)||null!=g&&!isNaN(g)||(g=""),i.push(g+"")}),e=o}(this._data=new qa([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(e,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function DC(t,e,n,i){$a.call(this,t,e,n),this.type=i||"value",this.model=null}Fn(QA.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Di);var d2=Cc.extend({type:"timeline"});DC.prototype={constructor:DC,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},ki(DC,$a);var mm=Rn,BT=St,zT=Math.PI;function tk(t,e,n,i,o,a){var s=e.get("color");o?(o.setColor(s),n.add(o),a&&a.onUpdate(o)):((o=Mc(t.get("symbol"),-1,-1,2,2,s)).setStyle("strokeNoScale",!0),n.add(o),a&&a.onCreate(o));var u=e.getItemStyle(["color","symbol","symbolSize"]);o.setStyle(u),i=ei({rectHover:!0,z2:100},i,!0);var d=t.get("symbolSize");(d=d instanceof Array?d.slice():[+d,+d])[0]/=2,d[1]/=2,i.scale=d;var g=t.get("symbolOffset");if(g){var p=i.position=i.position||[0,0];p[0]+=ln(g[0],d[0]),p[1]+=ln(g[1],d[1])}var x=t.get("symbolRotate");return i.rotation=(x||0)*Math.PI/180||0,o.attr(i),o.updateTransform(),o}function ek(t,e,n,i,o){if(!t.dragging){var a=i.getModel("checkpointStyle"),s=n.dataToCoord(i.getData().get(["value"],e));o||!a.get("animation",!0)?t.attr({position:[s,0]}):(t.stopAnimation(!0),t.animateTo({position:[s,0]},a.get("animationDuration",!0),a.get("animationEasing",!0)))}}d2.extend({type:"timeline.slider",init:function(t,e){this.api=e},render:function(t,e,n,i){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var o=this._layout(t,n),a=this._createGroup("mainGroup"),s=this._createGroup("labelGroup"),u=this._axis=this._createAxis(o,t);t.formatTooltip=function(d){return Vr(u.scale.getLabel(d))},BT(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](o,a,u,t)},this),this._renderAxisLabel(o,s,u,t),this._position(o,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var vt,_t,n=t.get("label.position"),i=t.get("orient"),o=(_t=e,xi((vt=t).getBoxLayoutParams(),{width:_t.getWidth(),height:_t.getHeight()},vt.get("padding")));null==n||"auto"===n?n="horizontal"===i?o.y+o.height/2<e.getHeight()/2?"-":"+":o.x+o.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var a,s,u,d,g={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},p={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},x={horizontal:0,vertical:zT/2},S="vertical"===i?o.height:o.width,C=t.getModel("controlStyle"),I=C.get("show",!0),z=I?C.get("itemSize"):0,O=I?C.get("itemGap"):0,V=z+O,Y=t.get("label.rotate")||0;Y=Y*zT/180;var G=C.get("position",!0),tt=I&&C.get("showPlayBtn",!0),Q=I&&C.get("showPrevBtn",!0),it=0,ct=S;return"left"===G||"bottom"===G?(tt&&(a=[0,0],it+=V),Q&&(s=[it,0],it+=V)):(tt&&(a=[ct-z,0],ct-=V),Q&&(s=[0,0],it+=V)),I&&C.get("showNextBtn",!0)&&(u=[ct-z,0],ct-=V),d=[it,ct],t.get("inverse")&&d.reverse(),{viewRect:o,mainLength:S,orient:i,rotation:x[i],labelRotation:Y,labelPosOpt:n,labelAlign:t.get("label.align")||g[i],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||p[i],playPosition:a,prevBtnPosition:s,nextBtnPosition:u,axisExtent:d,controlSize:z,controlGap:O}},_position:function(t,e){var n=this._mainGroup,i=this._labelGroup,o=t.viewRect;if("vertical"===t.orient){var a=yt(),s=o.x,u=o.y+o.height;fe(a,a,[-s,-u]),he(a,a,-zT/2),fe(a,a,[s,u]),(o=o.clone()).applyTransform(a)}var d=O(o),g=O(n.getBoundingRect()),p=O(i.getBoundingRect()),x=n.position,S=i.position;S[0]=x[0]=d[0][0];var C,I=t.labelPosOpt;function z(Y){var G=Y.position;Y.origin=[d[0][0]-G[0],d[1][0]-G[1]]}function O(Y){return[[Y.x,Y.x+Y.width],[Y.y,Y.y+Y.height]]}function V(Y,G,tt,Q,nt){Y[Q]+=tt[Q][nt]-G[Q][nt]}isNaN(I)?(V(x,g,d,1,C="+"===I?0:1),V(S,p,d,1,1-C)):(V(x,g,d,1,C=0<=I?0:1),S[1]=x[1]+I),n.attr("position",x),i.attr("position",S),n.rotation=i.rotation=t.rotation,z(n),z(i)},_createAxis:function(t,e){var n=e.getData(),i=e.get("axisType"),o=Ig(e,i);o.getTicks=function(){return n.mapArray(["value"],function(u){return u})};var a=n.getDataExtent("value");o.setExtent(a[0],a[1]),o.niceTicks();var s=new DC("value",o,t.axisExtent,i);return s.model=e,s},_createGroup:function(t){var e=this["_"+t]=new _n;return this.group.add(e),e},_renderAxisLine:function(t,e,n,i){var o=n.getExtent();i.get("lineStyle.show")&&e.add(new go({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:En({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,i){var o=i.getData(),a=n.scale.getTicks();BT(a,function(s){var u=n.dataToCoord(s),d=o.getItemModel(s),g=d.getModel("itemStyle"),p=d.getModel("emphasis.itemStyle"),x={position:[u,0],onclick:mm(this._changeTimeline,this,s)},S=tk(d,g,e,x);Er(S,p.getItemStyle()),d.get("tooltip")?(S.dataIndex=s,S.dataModel=i):S.dataIndex=S.dataModel=null},this)},_renderAxisLabel:function(t,e,n,i){if(n.getLabelModel().get("show")){var o=i.getData(),a=n.getViewLabels();BT(a,function(s){var u=s.tickValue,d=o.getItemModel(u),g=d.getModel("label"),p=d.getModel("emphasis.label"),x=n.dataToCoord(s.tickValue),S=new rn({position:[x,0],rotation:t.labelRotation-t.rotation,onclick:mm(this._changeTimeline,this,u),silent:!1});Wo(S.style,g,{text:s.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(S),Er(S,Wo({},p))},this)}},_renderControl:function(t,e,n,i){var o=t.controlSize,a=t.rotation,s=i.getModel("controlStyle").getItemStyle(),u=i.getModel("emphasis.controlStyle").getItemStyle(),d=[0,-o/2,o,o],g=i.getPlayState(),p=i.get("inverse",!0);function x(S,C,I,z){if(S){var O=(G=d,Q=(tt={position:S,origin:[o/2,0],rotation:z?-a:0,rectHover:!0,style:s,onclick:I}).style,nt=vl(i.get(C),tt||{},new Yi(G[0],G[1],G[2],G[3])),Q&&nt.setStyle(Q),nt);e.add(O),Er(O,u)}var G,tt,Q,nt}x(t.nextBtnPosition,"controlStyle.nextIcon",mm(this._changeTimeline,this,p?"-":"+")),x(t.prevBtnPosition,"controlStyle.prevIcon",mm(this._changeTimeline,this,p?"+":"-")),x(t.playPosition,"controlStyle."+(g?"stopIcon":"playIcon"),mm(this._handlePlayClick,this,!g),!0)},_renderCurrentPointer:function(t,e,n,i){var o=i.getData(),a=i.getCurrentIndex(),s=o.getItemModel(a).getModel("checkpointStyle"),u=this;this._currentPointer=tk(s,s,this._mainGroup,{},this._currentPointer,{onCreate:function(g){g.draggable=!0,g.drift=mm(u._handlePointerDrag,u),g.ondragend=mm(u._handlePointerDragend,u),ek(g,a,n,i,!0)},onUpdate:function(g){ek(g,a,n,i)}})},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],i=Vu(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var o=this._findNearestTick(n),a=this.model;(e||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(mm(function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(t){return fa(t,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(t){var e,n=this.model.getData(),i=1/0,o=this._axis;return n.each(["value"],function(a,s){var u=o.dataToCoord(a),d=Math.abs(u-t);d<i&&(i=d,e=s)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}}),wl(function(t){var e=t&&t.timeline;Fe(e)||(e=e?[e]:[]),St(e,function(n){n&&function(i){var o=i.type,a={number:"value",time:"time"};if(a[o]&&(i.axisType=a[o],delete i.type),JA(i),p0(i,"controlPosition")){var s=i.controlStyle||(i.controlStyle={});p0(s,"position")||(s.position=i.controlPosition),"none"!==s.position||p0(s,"show")||(s.show=!1,delete s.position),delete i.controlPosition}St(i.data||[],function(u){Ln(u)&&!Fe(u)&&(!p0(u,"value")&&p0(u,"name")&&(u.value=u.name),JA(u))})}(n)})});var nk=Uc,FT=Vr;function AC(t){Vi(t,"label",["show"])}var kC=pu({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},isAnimationEnabled:function(){if(Oe.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e){this._mergeOption(t,e,!1,!1)},_mergeOption:function(t,e,n,i){var o=this.constructor,a=this.mainType+"Model";n||e.eachSeries(function(s){var u=s.get(this.mainType,!0),d=s[a];u&&u.data?(d?d._mergeOption(u,e,!0):(i&&AC(u),St(u.data,function(g){g instanceof Array?(AC(g[0]),AC(g[1])):AC(g)}),En(d=new o(u,this,e),{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),d.__hostSeries=s),s[a]=d):s[a]=null},this)},formatTooltip:function(t,e,n,i){var o=this.getData(),a=this.getRawValue(t),s=Fe(a)?kt(a,nk).join(", "):nk(a),u=o.getName(t),d=FT(this.name);return null==a&&!u||(d+="html"===i?"<br/>":"\n"),u&&(d+=FT(u),null!=a&&(d+=" : ")),null!=a&&(d+=FT(s)),d},getData:function(){return this._data},setData:function(t){this._data=t}});Fn(kC,Di),kC.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var ik=zn;function HT(t,e,n,i,o,a){var s=[],u=hh(e,i)?e.getCalculationInfo("stackResultDimension"):i,d=jT(e,u,t),g=e.indicesOfNearest(u,d)[0];s[o]=e.get(n,g),s[a]=e.get(u,g);var p=e.get(i,g),x=yf(e.get(i,g));return 0<=(x=Math.min(x,20))&&(s[a]=+s[a].toFixed(x)),[s,p]}var VT=kn,WT={min:VT(HT,"min"),max:VT(HT,"max"),average:VT(HT,"average")};function y_(t,e){var x,n=t.getData(),i=t.coordinateSystem;if(e&&(x=e,isNaN(parseFloat(x.x))||isNaN(parseFloat(x.y)))&&!Fe(e.coord)&&i){var o=i.dimensions,a=rk(e,n,i,t);if((e=fn(e)).type&&WT[e.type]&&a.baseAxis&&a.valueAxis){var s=ik(o,a.baseAxis.dim),u=ik(o,a.valueAxis.dim),d=WT[e.type](n,a.baseDataDim,a.valueDataDim,s,u);e.coord=d[0],e.value=d[1]}else{for(var g=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],p=0;p<2;p++)WT[g[p]]&&(g[p]=jT(n,n.mapDimension(o[p]),g[p]));e.coord=g}}return e}function rk(t,e,n,i){var o={};return null!=t.valueIndex||null!=t.valueDim?(o.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,o.valueAxis=n.getAxis(function(a,s){var u=a.getData(),d=u.dimensions;s=u.getDimension(s);for(var g=0;g<d.length;g++){var p=u.getDimensionInfo(d[g]);if(p.name===s)return p.coordDim}}(i,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim)):(o.baseAxis=i.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function x_(t,e){return!(t&&t.containData&&e.coord&&!function(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}(e))||t.containData(e.coord)}function ok(t,e,n,i){return i<2?t.coord&&t.coord[i]:t.value}function jT(t,e,n){if("average"!==n)return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0];var i=0,o=0;return t.each(e,function(a,s){isNaN(a)||(i+=a,o++)}),i/o}var GT=Oa({type:"marker",init:function(){this.markerGroupMap=pe()},render:function(t,e,n){var i=this.markerGroupMap;i.each(function(a){a.__keep=!1});var o=this.type+"Model";e.eachSeries(function(a){var s=a[o];s&&this.renderSeries(a,s,e,n)},this),i.each(function(a){a.__keep||this.group.remove(a.group)},this)},renderSeries:function(){}});function ak(t,e,n){var i=e.coordinateSystem;t.each(function(o){var a,s=t.getItemModel(o),u=ln(s.get("x"),n.getWidth()),d=ln(s.get("y"),n.getHeight());if(isNaN(u)||isNaN(d)){if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,o));else if(i){var g=t.get(i.dimensions[0],o),p=t.get(i.dimensions[1],o);a=i.dataToPoint([g,p])}}else a=[u,d];isNaN(u)||(a[0]=u),isNaN(d)||(a[1]=d),t.setItemLayout(o,a)})}function h2(t,e,n,i){var o=t.getData(),a=i.type;if(!Fe(i)&&("min"===a||"max"===a||"average"===a||"median"===a||null!=i.xAxis||null!=i.yAxis)){var s,u;if(null!=i.yAxis||null!=i.xAxis)s=e.getAxis(null!=i.yAxis?"y":"x"),u=pr(i.yAxis,i.xAxis);else{var d=rk(i,o,e,t);s=d.valueAxis,u=jT(o,kf(o,d.valueDataDim),a)}var g="x"===s.dim?0:1,p=1-g,x=fn(i),S={};x.type=null,x.coord=[],S.coord=[],x.coord[p]=-1/0,S.coord[p]=1/0;var C=n.get("precision");0<=C&&"number"==typeof u&&(u=+u.toFixed(Math.min(C,20))),x.coord[g]=S.coord[g]=u,i=[x,S,{type:a,valueIndex:i.valueIndex,value:u}]}return(i=[y_(t,i[0]),y_(t,i[1]),En({},i[2])])[2].type=i[2].type||"",ei(i[2],i[0]),ei(i[2],i[1]),i}function IC(t){return!isNaN(t)&&!isFinite(t)}function sk(t,e,n,i){var o=1-t,a=i.dimensions[t];return IC(e[o])&&IC(n[o])&&e[t]===n[t]&&i.getAxis(a).containData(e[t])}function f2(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(sk(1,n,i,t)||sk(0,n,i,t)))return!0}return x_(t,e[0])&&x_(t,e[1])}function UT(t,e,n,i,o){var a,s=i.coordinateSystem,u=t.getItemModel(e),d=ln(u.get("x"),o.getWidth()),g=ln(u.get("y"),o.getHeight());if(isNaN(d)||isNaN(g)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var p=s.dimensions,x=t.get(p[0],e),S=t.get(p[1],e);a=s.dataToPoint([x,S])}if("cartesian2d"===s.type){var C=s.getAxis("x"),I=s.getAxis("y");IC(t.get((p=s.dimensions)[0],e))?a[0]=C.toGlobalCoord(C.getExtent()[n?0:1]):IC(t.get(p[1],e))&&(a[1]=I.toGlobalCoord(I.getExtent()[n?0:1]))}isNaN(d)||(a[0]=d),isNaN(g)||(a[1]=g)}else a=[d,g];t.setItemLayout(e,a)}function g2(t,e,n,i){var o=y_(t,i[0]),a=y_(t,i[1]),s=pr,u=o.coord,d=a.coord;u[0]=s(u[0],-1/0),u[1]=s(u[1],-1/0),d[0]=s(d[0],1/0),d[1]=s(d[1],1/0);var g=Zt([{},o,a]);return g.coord=[o.coord,a.coord],g.x0=o.x,g.y0=o.y,g.x1=a.x,g.y1=a.y,g}function Px(t){return!isNaN(t)&&!isFinite(t)}function lk(t,e,n){var i=1-t;return Px(e[i])&&Px(n[i])}function p2(t,e){var n=e.coord[0],i=e.coord[1];return!("cartesian2d"!==t.type||!n||!i||!lk(1,n,i)&&!lk(0,n,i))||x_(t,{coord:n,x:e.x0,y:e.y0})||x_(t,{coord:i,x:e.x1,y:e.y1})}function uk(t,e,n,i,o){var a,s=i.coordinateSystem,u=t.getItemModel(e),d=ln(u.get(n[0]),o.getWidth()),g=ln(u.get(n[1]),o.getHeight());if(isNaN(d)||isNaN(g)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(n,e));else{var p=[C=t.get(n[0],e),I=t.get(n[1],e)];s.clampData&&s.clampData(p,p),a=s.dataToPoint(p,!0)}if("cartesian2d"===s.type){var x=s.getAxis("x"),S=s.getAxis("y"),C=t.get(n[0],e),I=t.get(n[1],e);Px(C)?a[0]=x.toGlobalCoord(x.getExtent()["x0"===n[0]?0:1]):Px(I)&&(a[1]=S.toGlobalCoord(S.getExtent()["y0"===n[1]?0:1]))}isNaN(d)||(a[0]=d),isNaN(g)||(a[1]=g)}else a=[d,g];return a}GT.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries(function(i){var o=i.markPointModel;o&&(ak(o.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout(o))},this)},renderSeries:function(t,e,n,i){var o=t.coordinateSystem,a=t.id,s=t.getData(),u=this.markerGroupMap,d=u.get(a)||u.set(a,new Ng),g=function(p,x,S){var C;C=p?kt(p&&p.dimensions,function(O){return Dn({name:O},x.getData().getDimensionInfo(x.getData().mapDimension(O))||{})}):[{name:"value",type:"float"}];var I=new qa(C,S),z=kt(S.get("data"),kn(y_,x));return p&&(z=Mn(z,kn(x_,p))),I.initData(z,null,p?ok:function(O){return O.value}),I}(o,t,e);e.setData(g),ak(e.getData(),t,i),g.each(function(p){var x=g.getItemModel(p),S=x.getShallow("symbol"),C=x.getShallow("symbolSize"),I=x.getShallow("symbolRotate"),z=Ui(S),O=Ui(C),V=Ui(I);if(z||O||V){var Y=e.getRawValue(p),G=e.getDataParams(p);z&&(S=S(Y,G)),O&&(C=C(Y,G)),V&&(I=I(Y,G))}g.setItemVisual(p,{symbol:S,symbolSize:C,symbolRotate:I,color:x.get("itemStyle.color")||s.getVisual("color")})}),d.updateData(g),this.group.add(d.group),g.eachItemGraphicEl(function(p){p.traverse(function(x){x.dataModel=e})}),d.__keep=!0,d.group.silent=e.get("silent")||t.get("silent")}}),wl(function(t){t.markPoint=t.markPoint||{}}),kC.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),GT.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(i){var o=i.markLineModel;if(o){var a=o.getData(),s=o.__from,u=o.__to;s.each(function(d){UT(s,d,!0,i,n),UT(u,d,!1,i,n)}),a.each(function(d){a.setItemLayout(d,[s.getItemLayout(d),u.getItemLayout(d)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},renderSeries:function(t,e,n,i){var o=t.coordinateSystem,a=t.id,s=t.getData(),u=this.markerGroupMap,d=u.get(a)||u.set(a,new Xv);this.group.add(d.group);var g=function(O,V,Y){var G;G=O?kt(O&&O.dimensions,function(vt){return Dn({name:vt},V.getData().getDimensionInfo(V.getData().mapDimension(vt))||{})}):[{name:"value",type:"float"}];var tt=new qa(G,Y),Q=new qa(G,Y),nt=new qa([],Y),it=kt(Y.get("data"),kn(h2,V,O,Y));O&&(it=Mn(it,kn(f2,O)));var ct=O?ok:function(vt){return vt.value};return tt.initData(kt(it,function(vt){return vt[0]}),null,ct),Q.initData(kt(it,function(vt){return vt[1]}),null,ct),nt.initData(kt(it,function(vt){return vt[2]})),nt.hasItemOption=!0,{from:tt,to:Q,line:nt}}(o,t,e),p=g.from,x=g.to,S=g.line;e.__from=p,e.__to=x,e.setData(S);var C=e.get("symbol"),I=e.get("symbolSize");function z(O,V,Y){var G=O.getItemModel(V);UT(O,V,Y,t,i),O.setItemVisual(V,{symbolRotate:G.get("symbolRotate"),symbolSize:G.get("symbolSize")||I[Y?0:1],symbol:G.get("symbol",!0)||C[Y?0:1],color:G.get("itemStyle.color")||s.getVisual("color")})}Fe(C)||(C=[C,C]),"number"==typeof I&&(I=[I,I]),g.from.each(function(O){z(p,O,!0),z(x,O,!1)}),S.each(function(O){var V=S.getItemModel(O).get("lineStyle.color");S.setItemVisual(O,{color:V||p.getItemVisual(O,"color")}),S.setItemLayout(O,[p.getItemLayout(O),x.getItemLayout(O)]),S.setItemVisual(O,{fromSymbolRotate:p.getItemVisual(O,"symbolRotate"),fromSymbolSize:p.getItemVisual(O,"symbolSize"),fromSymbol:p.getItemVisual(O,"symbol"),toSymbolRotate:x.getItemVisual(O,"symbolRotate"),toSymbolSize:x.getItemVisual(O,"symbolSize"),toSymbol:x.getItemVisual(O,"symbol")})}),d.updateData(S),g.line.eachItemGraphicEl(function(O,V){O.traverse(function(Y){Y.dataModel=e})}),d.__keep=!0,d.group.silent=e.get("silent")||t.get("silent")}}),wl(function(t){t.markLine=t.markLine||{}}),kC.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var qT=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];GT.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(i){var o=i.markAreaModel;if(o){var a=o.getData();a.each(function(s){var u=kt(qT,function(d){return uk(a,s,d,i,n)});a.setItemLayout(s,u),a.getItemGraphicEl(s).setShape("points",u)})}},this)},renderSeries:function(t,e,n,i){var o=t.coordinateSystem,a=t.id,s=t.getData(),u=this.markerGroupMap,d=u.get(a)||u.set(a,{group:new _n});this.group.add(d.group),d.__keep=!0;var g=function(p,x,S){var C,I;I=p?(C=kt(p&&p.dimensions,function(V){var Y=x.getData();return Dn({name:V},Y.getDimensionInfo(Y.mapDimension(V))||{})}),new qa(kt(["x0","y0","x1","y1"],function(V,Y){return{name:V,type:C[Y%2].type}}),S)):new qa(C=[{name:"value",type:"float"}],S);var z=kt(S.get("data"),kn(g2,x,p,S));return p&&(z=Mn(z,kn(p2,p))),I.initData(z,null,p?function(V,Y,G,tt){return V.coord[Math.floor(tt/2)][tt%2]}:function(V){return V.value}),I.hasItemOption=!0,I}(o,t,e);e.setData(g),g.each(function(p){var x=kt(qT,function(C){return uk(g,p,C,t,i)}),S=!0;St(qT,function(C){if(S){var I=g.get(C[0],p),z=g.get(C[1],p);(Px(I)||o.getAxis("x").containData(I))&&(Px(z)||o.getAxis("y").containData(z))&&(S=!1)}}),g.setItemLayout(p,{points:x,allClipped:S}),g.setItemVisual(p,{color:s.getVisual("color")})}),g.diff(d.__data).add(function(p){var x=g.getItemLayout(p);if(!x.allClipped){var S=new nr({shape:{points:x.points}});g.setItemGraphicEl(p,S),d.group.add(S)}}).update(function(p,x){var S=d.__data.getItemGraphicEl(x),C=g.getItemLayout(p);C.allClipped?S&&d.group.remove(S):(S?Xi(S,{shape:{points:C.points}},e,p):S=new nr({shape:{points:C.points}}),g.setItemGraphicEl(p,S),d.group.add(S))}).remove(function(p){var x=d.__data.getItemGraphicEl(p);d.group.remove(x)}).execute(),g.eachItemGraphicEl(function(p,x){var S=g.getItemModel(x),C=S.getModel("label"),I=S.getModel("emphasis.label"),z=g.getItemVisual(x,"color");p.useStyle(Dn(S.getModel("itemStyle").getItemStyle(),{fill:Fa(z,.4),stroke:z})),p.hoverStyle=S.getModel("emphasis.itemStyle").getItemStyle(),Fl(p.style,p.hoverStyle,C,I,{labelFetcher:e,labelDataIndex:x,defaultText:g.getName(x)||"",isRectText:!0,autoColor:z}),Er(p,{}),p.dataModel=e}),d.__data=g,d.group.silent=e.get("silent")||t.get("silent")}}),wl(function(t){t.markArea=t.markArea||{}});var ck=uh.legend.selector,m2={all:{type:"all",title:fn(ck.all)},inverse:{type:"inverse",title:fn(ck.inverse)}},dk=pu({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},mergeOption:function(t){dk.superCall(this,"mergeOption",t),this._updateSelector(t)},_updateSelector:function(t){var e=t.selector;!0===e&&(e=t.selector=["all","inverse"]),Fe(e)&&St(e,function(n,i){bi(n)&&(n={type:n}),e[i]=ei(n,m2[n.type])})},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}e||this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries(function(o){var a;if(n.push(o.name),o.legendVisualProvider){var u=o.legendVisualProvider.getAllNames();t.isSeriesFiltered(o)||(n=n.concat(u)),u.length?e=e.concat(u):a=!0}else a=!0;a&&xr(o)&&e.push(o.name)}),this._availableNames=n;var i=kt(this.get("data")||e,function(o){return"string"!=typeof o&&"number"!=typeof o||(o={name:o}),new dr(o,this,this.ecModel)},this);this._data=i},getData:function(){return this._data},select:function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&St(this._data,function(n){e[n.get("name")]=!1}),e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},allSelect:function(){var e=this.option.selected;St(this._data,function(n){e[n.get("name",!0)]=!0})},inverseSelect:function(){var e=this.option.selected;St(this._data,function(n){var i=n.get("name",!0);e.hasOwnProperty(i)||(e[i]=!0),e[i]=!e[i]})},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&0<=zn(this._availableNames,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function b_(t,e,n){var i,o={},a="toggleSelected"===t;return n.eachComponent("legend",function(s){a&&null!=i?s[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?s[t]():(s[t](e.name),i=s.isSelected(e.name)),St(s.getData(),function(u){var d=u.get("name");if("\n"!==d&&""!==d){var g=s.isSelected(d);o[d]=o.hasOwnProperty(d)?o[d]&&g:g}})}),"allSelect"===t||"inverseSelect"===t?{selected:o}:{name:e.name,selected:o}}Cr("legendToggleSelect","legendselectchanged",kn(b_,"toggleSelected")),Cr("legendAllSelect","legendselectall",kn(b_,"allSelect")),Cr("legendInverseSelect","legendinverseselect",kn(b_,"inverseSelect")),Cr("legendSelect","legendselected",kn(b_,"select")),Cr("legendUnSelect","legendunselected",kn(b_,"unSelect"));var Ex=kn,hk=St,PC=_n,v2=Oa({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new PC),this.group.add(this._selectorGroup=new PC),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),a=t.get("orient");o&&"auto"!==o||(o="right"===t.get("left")&&"vertical"===a?"right":"left");var s=t.get("selector",!0),u=t.get("selectorPosition",!0);!s||u&&"auto"!==u||(u="horizontal"===a?"end":"start"),this.renderInner(o,t,e,n,s,a,u);var d=t.getBoxLayoutParams(),g={width:n.getWidth(),height:n.getHeight()},p=t.get("padding"),x=xi(d,g,p),S=this.layoutInner(t,o,x,i,s,u),C=xi(Dn({width:S.width,height:S.height},d),g,p);this.group.attr("position",[C.x-S.x,C.y-S.y]),this.group.add(this._backgroundEl=hA(S,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,e,n,i,o,a,s){var u=this.getContentGroup(),d=pe(),g=e.get("selectedMode"),p=[];n.eachRawSeries(function(x){x.get("legendHoverLink")||p.push(x.id)}),hk(e.getData(),function(x,S){var C=x.get("name");if(this.newlineDisabled||""!==C&&"\n"!==C){var I=n.getSeriesByName(C)[0];if(!d.get(C))if(I){var z=I.getData(),O=z.getVisual("color"),V=z.getVisual("borderColor");"function"==typeof O&&(O=O(I.getDataParams(0))),"function"==typeof V&&(V=V(I.getDataParams(0)));var Y=z.getVisual("legendSymbol")||"roundRect",G=z.getVisual("symbol");this._createItem(C,S,x,e,Y,G,t,O,V,g).on("click",Ex(gk,C,null,i,p)).on("mouseover",Ex(YT,I.name,null,i,p)).on("mouseout",Ex(XT,I.name,null,i,p)),d.set(C,!0)}else n.eachRawSeries(function(tt){if(!d.get(C)&&tt.legendVisualProvider){var Q=tt.legendVisualProvider;if(!Q.containName(C))return;var nt=Q.indexOfName(C),it=Q.getItemVisual(nt,"color"),ct=Q.getItemVisual(nt,"borderColor");this._createItem(C,S,x,e,"roundRect",null,t,it,ct,g).on("click",Ex(gk,null,C,i,p)).on("mouseover",Ex(YT,null,C,i,p)).on("mouseout",Ex(XT,null,C,i,p)),d.set(C,!0)}},this)}else u.add(new PC({newline:!0}))},this),o&&this._createSelector(o,e,i,a,s)},_createSelector:function(t,e,n,i,o){var a=this.getSelectorGroup();hk(t,function(s){!function(u){var d=u.type,g=new rn({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===d?"legendAllSelect":"legendInverseSelect"})}});a.add(g);var p=e.getModel("selectorLabel"),x=e.getModel("emphasis.selectorLabel");Fl(g.style,g.hoverStyle={},p,x,{defaultText:u.title,isRectText:!1}),Er(g)}(s)})},_createItem:function(t,e,n,i,o,a,s,u,d,g){var p=i.get("itemWidth"),x=i.get("itemHeight"),S=i.get("inactiveColor"),C=i.get("inactiveBorderColor"),I=i.get("symbolKeepAspect"),z=i.getModel("itemStyle"),O=i.isSelected(t),V=new PC,Y=n.getModel("textStyle"),G=n.get("icon"),tt=n.getModel("tooltip"),Q=tt.parentModel,nt=Mc(o=G||o,0,0,p,x,O?u:S,null==I||I);if(V.add(fk(nt,o,z,d,C,O)),!G&&a&&(a!==o||"none"===a)){var it=.8*x;"none"===a&&(a="circle");var ct=Mc(a,(p-it)/2,(x-it)/2,it,it,O?u:S,null==I||I);V.add(fk(ct,a,z,d,C,O))}var vt="left"===s?p+5:-5,_t=s,At=i.get("formatter"),Ot=t;"string"==typeof At&&At?Ot=At.replace("{name}",null!=t?t:""):"function"==typeof At&&(Ot=At(t)),V.add(new rn({style:Wo({},Y,{text:Ot,x:vt,y:x/2,textFill:O?Y.getTextColor():S,textAlign:_t,textVerticalAlign:"middle"})}));var Bt=new Ji({shape:V.getBoundingRect(),invisible:!0,tooltip:tt.get("show")?En({content:t,formatter:Q.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},tt.option):null});return V.add(Bt),V.eachChild(function(Vt){Vt.silent=!0}),Bt.silent=!g,this.getContentGroup().add(V),Er(V),V.__legendDataIndex=e,V},layoutInner:function(t,e,n,i,o,a){var s=this.getContentGroup(),u=this.getSelectorGroup();Sd(t.get("orient"),s,t.get("itemGap"),n.width,n.height);var d=s.getBoundingRect(),g=[-d.x,-d.y];if(o){Sd("horizontal",u,t.get("selectorItemGap",!0));var p=u.getBoundingRect(),x=[-p.x,-p.y],S=t.get("selectorButtonGap",!0),C=t.getOrient().index,I=0===C?"width":"height",z=0===C?"height":"width",O=0===C?"y":"x";"end"===a?x[C]+=d[I]+S:g[C]+=p[I]+S,x[1-C]+=d[z]/2-p[z]/2,u.attr("position",x),s.attr("position",g);var V={x:0,y:0};return V[I]=d[I]+S+p[I],V[z]=Math.max(d[z],p[z]),V[O]=Math.min(0,p[O]+x[1-C]),V}return s.attr("position",g),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function fk(t,e,n,i,o,a){var s;return"line"!==e&&e.indexOf("empty")<0?(s=n.getItemStyle(),t.style.stroke=i,a||(s.stroke=o)):s=n.getItemStyle(["borderWidth","borderColor"]),t.setStyle(s)}function gk(t,e,n,i){XT(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),YT(t,e,n,i)}function YT(t,e,n,i){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function XT(t,e,n,i){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}$u(Td.PROCESSOR.SERIES_FILTER,function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var i=0;i<e.length;i++)if(!e[i].isSelected(n.name))return!1;return!0})}),Sr.registerSubTypeDefaulter("legend",function(){return"plain"});var pk=dk.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,i){var o=Oh(t);pk.superCall(this,"init",t,e,n,i),mk(this,t,o)},mergeOption:function(t,e){pk.superCall(this,"mergeOption",t,e),mk(this,this.option,t)}});function mk(t,e,n){var i=[1,1];i[t.getOrient().index]=0,Gu(e,n,{type:"box",ignoreSize:i})}var vk=_n,$T=["width","height"],ZT=["x","y"],KT=v2.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){KT.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new vk),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new vk)},resetInner:function(){KT.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,i,o,a,s){var u=this;KT.superCall(this,"renderInner",t,e,n,i,o,a,s);var d=this._controllerGroup,g=e.get("pageIconSize",!0);Fe(g)||(g=[g,g]),x("pagePrev",0);var p=e.getModel("pageTextStyle");function x(S,C){var I=S+"DataIndex",z=vl(e.get("pageIcons",!0)[e.getOrient().name][C],{onclick:Rn(u._pageGo,u,I,e,i)},{x:-g[0]/2,y:-g[1]/2,width:g[0],height:g[1]});z.name=S,d.add(z)}d.add(new rn({name:"pageText",style:{textFill:p.getTextColor(),font:p.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),x("pageNext",1)},layoutInner:function(t,e,n,i,o,a){var s=this.getSelectorGroup(),u=t.getOrient().index,d=$T[u],g=ZT[u],p=$T[1-u],x=ZT[1-u];o&&Sd("horizontal",s,t.get("selectorItemGap",!0));var S=t.get("selectorButtonGap",!0),C=s.getBoundingRect(),I=[-C.x,-C.y],z=fn(n);o&&(z[d]=n[d]-C[d]-S);var O=this._layoutContentAndController(t,i,z,u,d,p,x);if(o){if("end"===a)I[u]+=O[d]+S;else{var V=C[d]+S;I[u]-=V,O[g]-=V}O[d]+=C[d]+S,I[1-u]+=O[x]+O[p]/2-C[p]/2,O[p]=Math.max(O[p],C[p]),O[x]=Math.min(O[x],C[x]+I[1-u]),s.attr("position",I)}return O},_layoutContentAndController:function(t,e,n,i,o,a,s){var u=this.getContentGroup(),d=this._containerGroup,g=this._controllerGroup;Sd(t.get("orient"),u,t.get("itemGap"),i?n.width:null,i?null:n.height),Sd("horizontal",g,t.get("pageButtonItemGap",!0));var p=u.getBoundingRect(),x=g.getBoundingRect(),S=this._showController=p[o]>n[o],C=[-p.x,-p.y];e||(C[i]=u.position[i]);var I=[0,0],z=[-x.x,-x.y],O=_i(t.get("pageButtonGap",!0),t.get("itemGap",!0));S&&("end"===t.get("pageButtonPosition",!0)?z[i]+=n[o]-x[o]:I[i]+=x[o]+O),z[1-i]+=p[a]/2-x[a]/2,u.attr("position",C),d.attr("position",I),g.attr("position",z);var V={x:0,y:0};if(V[o]=S?n[o]:p[o],V[a]=Math.max(p[a],x[a]),V[s]=Math.min(0,x[s]+z[1-i]),d.__rectSize=n[o],S){var Y={x:0,y:0};Y[o]=Math.max(n[o]-x[o]-O,0),Y[a]=V[a],d.setClipPath(new Ji({shape:Y})),d.__rectSize=Y[o]}else g.eachChild(function(tt){tt.attr({invisible:!0,silent:!0})});var G=this._getPageInfo(t);return null!=G.pageIndex&&Xi(u,{position:G.contentPosition},S&&t),this._updatePageInfoView(t,G),V},_pageGo:function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;St(["pagePrev","pageNext"],function(d){var g=null!=e[d+"DataIndex"],p=n.childOfName(d);p&&(p.setStyle("fill",t.get(g?"pageIconColor":"pageIconInactiveColor",!0)),p.cursor=g?"pointer":"default")});var i=n.childOfName("pageText"),o=t.get("pageFormatter"),a=e.pageIndex,s=null!=a?a+1:0,u=e.pageCount;i&&o&&i.setStyle("text",bi(o)?o.replace("{current}",s).replace("{total}",u):o({current:s,total:u}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,a=$T[o],s=ZT[o],u=this._findTargetItemIndex(e),d=n.children(),g=d[u],p=d.length,x=p?1:0,S={contentPosition:n.position.slice(),pageCount:x,pageIndex:x-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return S;var C=Y(g);S.contentPosition[o]=-C.s;for(var I=u+1,z=C,O=C,V=null;I<=p;++I)(!(V=Y(d[I]))&&O.e>z.s+i||V&&!G(V,z.s))&&(z=O.i>z.i?O:V)&&(null==S.pageNextDataIndex&&(S.pageNextDataIndex=z.i),++S.pageCount),O=V;for(I=u-1,z=C,O=C,V=null;-1<=I;--I)(V=Y(d[I]))&&G(O,V.s)||!(z.i<O.i)||(O=z,null==S.pagePrevDataIndex&&(S.pagePrevDataIndex=z.i),++S.pageCount,++S.pageIndex),z=V;return S;function Y(tt){if(tt){var Q=tt.getBoundingRect(),nt=Q[s]+tt.position[o];return{s:nt,e:nt+Q[a],i:tt.__legendDataIndex}}}function G(tt,Q){return tt.e>=Q&&tt.s<=Q+i}},_findTargetItemIndex:function(t){return this._showController?(this.getContentGroup().eachChild(function(i,o){var a=i.__legendDataIndex;null==n&&null!=a&&(n=o),a===t&&(e=o)}),null!=e?e:n):0;var e,n}});Cr("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})}),CT.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var EC=Ji,m0=no,JT=Vu,np=Rn,QT=St,__="horizontal",yk="vertical",y2=["line","bar","candlestick","scatter"],tD=MT.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this.api=e},render:function(t,e,n,i){tD.superApply(this,"render",arguments),_g(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){tD.superApply(this,"remove",arguments),B0(this,"_dispatchZoomAction")},dispose:function(){tD.superApply(this,"dispose",arguments),B0(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new _n;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},o=this._orient===__?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},a=Oh(t.option);St(["right","top","width","height"],function(u){"ph"===a[u]&&(a[u]=o[u])});var s=xi(a,i,t.padding);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===yk&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),a=this._displayables.barGroup,s=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==__||o?n===__&&o?{scale:s?[-1,1]:[-1,-1]}:n!==yk||o?{scale:s?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:s?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:s?[1,1]:[1,-1]});var u=t.getBoundingRect([a]);t.attr("position",[e.x-u.x,e.y-u.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this._size,n=this._displayables.barGroup;n.add(new EC({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),n.add(new EC({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:Rn(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,i=n.getRawData(),o=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=o){var a=i.getDataExtent(o),s=.3*(a[1]-a[0]);a=[a[0]-s,a[1]+s];var u,d=[0,e[1]],p=[[e[0],0],[0,0]],x=[],S=e[0]/(i.count()-1),C=0,I=Math.round(i.count()/e[0]);i.each([o],function(O,V){if(0<I&&V%I)C+=S;else{var Y=null==O||isNaN(O)||""===O,G=Y?0:m0(O,a,d,!0);Y&&!u&&V?(p.push([p[p.length-1][0],0]),x.push([x[x.length-1][0],0])):!Y&&u&&(p.push([C,0]),x.push([C,0])),p.push([C,G]),x.push([C,G]),C+=S,u=Y}});var z=this.dataZoomModel;this._displayables.barGroup.add(new nr({shape:{points:p},style:Dn({fill:z.get("dataBackgroundColor")},z.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new rr({shape:{points:x},style:z.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis(function(o,a){St(t.getAxisProxy(o.name,a).getTargetSeriesModels(),function(s){if(!(n||!0!==e&&zn(y2,s.get("type"))<0)){var u,d=i.getComponent(o.axis,a).axis,g={x:"y",y:"x",radius:"angle",angle:"radius"}[o.name],p=s.coordinateSystem;null!=g&&p.getOtherAxis&&(u=p.getOtherAxis(d).inverse),g=s.getData().mapDimension(g),n={thisAxis:d,series:s,thisDim:o.name,otherDim:g,otherAxisInverse:u}}},this)},this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],i=this._displayables.barGroup,o=this._size,a=this.dataZoomModel;i.add(t.filler=new EC({draggable:!0,cursor:xk(this._orient),drift:np(this._onDragMove,this,"all"),ondragstart:np(this._showDataInfo,this,!0),ondragend:np(this._onDragEnd,this),onmouseover:np(this._showDataInfo,this,!0),onmouseout:np(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),i.add(new EC({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),QT([0,1],function(s){var u=vl(a.get("handleIcon"),{cursor:xk(this._orient),draggable:!0,drift:np(this._onDragMove,this,s),ondragend:np(this._onDragEnd,this),onmouseover:np(this._showDataInfo,this,!0),onmouseout:np(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),d=u.getBoundingRect();this._handleHeight=ln(a.get("handleSize"),this._size[1]),this._handleWidth=d.width/d.height*this._handleHeight,u.setStyle(a.getModel("handleStyle").getItemStyle());var g=a.get("handleColor");null!=g&&(u.style.fill=g),i.add(e[s]=u);var p=a.textStyleModel;this.group.add(n[s]=new rn({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:p.getTextColor(),textFont:p.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[m0(t[0],[0,100],e,!0),m0(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),s=[0,100];qf(e,i,o,n.get("zoomLock")?"all":t,null!=a.minSpan?m0(a.minSpan,s,o,!0):null,null!=a.maxSpan?m0(a.maxSpan,s,o,!0):null);var u=this._range,d=this._range=JT([m0(i[0],o,s,!0),m0(i[1],o,s,!0)]);return!u||u[0]!==d[0]||u[1]!==d[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,i=JT(n.slice()),o=this._size;QT([0,1],function(a){var u=this._handleHeight;e.handles[a].attr({scale:[u/2,u/2],position:[n[a],o[1]/2-u/2]})},this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,a=["",""];if(e.get("showDetail")){var s=e.findRepresentativeAxisProxy();if(s){var u=s.getAxisModel().axis,d=this._range,g=t?s.calculateDataWindow({start:d[0],end:d[1]}).valueWindow:s.getDataValueWindow();a=[this._formatLabel(g[0],u),this._formatLabel(g[1],u)]}}var p=JT(this._handleEnds.slice());function x(S){var C=Qd(n.handles[S].parent,this.group),I=th(0===S?"right":"left",C),z=this._handleWidth/2+5,O=fa([p[S]+(0===S?-z:z),this._size[1]/2],C);i[S].setStyle({x:O[0],y:O[1],textVerticalAlign:o===__?"middle":I,textAlign:o===__?I:"center",text:a[S]})}x.call(this,0),x.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(o,20));return Ui(i)?i(t,a):bi(i)?i.replace("{value}",a):a},_showDataInfo:function(t){var e=this._displayables.handleLabels;e[0].attr("invisible",!(t=this._dragging||t)),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n,i){this._dragging=!0,vo(i.event);var o=fa([e,n],this._displayables.barGroup.getLocalTransform(),!0),a=this._updateInterval(t,o[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),a&&s&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,a=this._updateInterval("all",n[0]-(i[0]+i[1])/2);this._updateView(),a&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(QT(this.getTargetCoordInfo(),function(i){if(!t&&i.length){var o=i[0].model.coordinateSystem;t=o.getRect&&o.getRect()}}),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}});function xk(t){return"vertical"===t?"ns-resize":"ew-resize"}CT.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var bk="\0_ec_dataZoom_roams";function x2(t,e){var n=wk(t),i=e.dataZoomId,o=e.coordId;St(n,function(u,d){var g=u.dataZoomInfos;g[i]&&zn(e.allCoordIds,o)<0&&(delete g[i],u.count--)}),Sk(n);var d,g,a=n[o];a||((a=n[o]={coordId:o,dataZoomInfos:{},count:0}).controller=(d=a,g=new Id(t.getZr()),St(["pan","zoom","scrollMove"],function(p){g.on(p,function(x){var S=[];St(d.dataZoomInfos,function(C){if(x.isAvailableBehavior(C.dataZoomModel.option)){var I=(C.getRange||{})[p],z=I&&I(d.controller,x);!C.dataZoomModel.get("disabled",!0)&&z&&S.push({dataZoomId:C.dataZoomId,start:z[0],end:z[1]})}}),S.length&&d.dispatchAction(S)})}),g),a.dispatchAction=kn(b2,t)),a.dataZoomInfos[i]||a.count++,a.dataZoomInfos[i]=e;var s=function(u){var d,g={type_true:2,type_move:1,type_false:0,type_undefined:-1},p=!0;return St(u,function(x){var S=x.dataZoomModel,C=!S.get("disabled",!0)&&(!S.get("zoomLock",!0)||"move");g["type_"+d]<g["type_"+C]&&(d=C),p&=S.get("preventDefaultMouseMove",!0)}),{controlType:d,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!p}}}(a.dataZoomInfos);a.controller.enable(s.controlType,s.opt),a.controller.setPointerChecker(e.containsPoint),_g(a,"dispatchAction",e.dataZoomModel.get("throttle",!0),"fixRate")}function _k(t){return t.type+"\0_"+t.id}function wk(t){var e=t.getZr();return e[bk]||(e[bk]={})}function Sk(t){St(t,function(e,n){e.count||(e.controller.dispose(),delete t[n])})}function b2(t,e){t.dispatchAction({type:"dataZoom",batch:e})}var _2=Rn,Ck=MT.extend({type:"dataZoom.inside",init:function(t,e){},render:function(t,e,n,i){Ck.superApply(this,"render",arguments),this._range=t.getPercentRange(),St(this.getTargetCoordInfo(),function(o,a){var s=kt(o,function(u){return _k(u.model)});St(o,function(u){var d=u.model,g={};St(["pan","zoom","scrollMove"],function(p){g[p]=_2(w2[p],this,u,a)},this),x2(n,{coordId:_k(d),allCoordIds:s,containsPoint:function(p,x,S){return d.coordinateSystem.containPoint([x,S])},dataZoomId:t.id,dataZoomModel:t,getRange:g})},this)},this)},dispose:function(){(function(t,e){var n=wk(t);St(n,function(i){i.controller.dispose();var o=i.dataZoomInfos;o[e]&&(delete o[e],i.count--)}),Sk(n)})(this.api,this.dataZoomModel.id),Ck.superApply(this,"dispose",arguments),this._range=null}}),w2={zoom:function(t,e,n,i){var o=this._range,a=o.slice(),s=t.axisModels[0];if(s){var u=eD[e](null,[i.originX,i.originY],s,n,t),d=(0<u.signal?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(a[1]-a[0])+a[0],g=Math.max(1/i.scale,0);a[0]=(a[0]-d)*g+d,a[1]=(a[1]-d)*g+d;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return qf(0,a,[0,100],0,p.minSpan,p.maxSpan),this._range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}},pan:Mk(function(t,e,n,i,o,a){var s=eD[i]([a.oldX,a.oldY],[a.newX,a.newY],e,o,n);return s.signal*(t[1]-t[0])*s.pixel/s.pixelLength}),scrollMove:Mk(function(t,e,n,i,o,a){return eD[i]([0,0],[a.scrollDelta,a.scrollDelta],e,o,n).signal*(t[1]-t[0])*a.scrollDelta})};function Mk(t){return function(e,n,i,o){var a=this._range,s=a.slice(),u=e.axisModels[0];if(u)return qf(t(s,u,e,n,i,o),s,[0,100],"all"),this._range=s,a[0]!==s[0]||a[1]!==s[1]?s:void 0}}function Tk(t){var e=t&&t.visualMap;Fe(e)||(e=e?[e]:[]),Dk(e,function(n){if(n){Nx(n,"splitList")&&!Nx(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var i=n.pieces;i&&Fe(i)&&Dk(i,function(o){Ln(o)&&(Nx(o,"start")&&!Nx(o,"min")&&(o.min=o.start),Nx(o,"end")&&!Nx(o,"max")&&(o.max=o.end))})}})}var eD={grid:function(t,e,n,i,o){var a=n.axis,s={},u=o.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(s.pixel=e[0]-t[0],s.pixelLength=u.width,s.pixelStart=u.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=u.height,s.pixelStart=u.y,s.signal=a.inverse?-1:1),s},polar:function(t,e,n,i,o){var a=n.axis,s={},u=o.model.coordinateSystem,d=u.getRadiusAxis().getExtent(),g=u.getAngleAxis().getExtent();return t=t?u.pointToCoord(t):[0,0],e=u.pointToCoord(e),"radiusAxis"===n.mainType?(s.pixel=e[0]-t[0],s.pixelLength=d[1]-d[0],s.pixelStart=d[0],s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=g[1]-g[0],s.pixelStart=g[0],s.signal=a.inverse?-1:1),s},singleAxis:function(t,e,n,i,o){var a=n.axis,s=o.model.coordinateSystem.getRect(),u={};return t=t||[0,0],"horizontal"===a.orient?(u.pixel=e[0]-t[0],u.pixelLength=s.width,u.pixelStart=s.x,u.signal=a.inverse?1:-1):(u.pixel=e[1]-t[1],u.pixelLength=s.height,u.pixelStart=s.y,u.signal=a.inverse?-1:1),u}},Dk=St;function Nx(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}Sr.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?0<t.pieces.length:0<t.splitNumber)&&!t.calculable?"piecewise":"continuous"});var Ak=Td.VISUAL.COMPONENT;function S2(t,e,n,i){for(var o=e.targetVisuals[i],a=Nr.prepareVisualTypes(o),s={color:t.getData().getVisual("color")},u=0,d=a.length;u<d;u++){var g=a[u],p=o["opacity"===g?"__alphaForOpacity":g];p&&p.applyVisual(n,x,S)}return s.color;function x(C){return s[C]}function S(C,I){s[C]=I}}jo(Ak,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(i){var o=t.pipelineContext;!i.isTargetSeries(t)||o&&o.large||n.push(function(a,s,u,d){var g={};return St(a,function(p){var x=Nr.prepareVisualTypes(s[p]);g[p]=x}),{progress:function(p,x){function S(it){return x.getItemVisual(I,it)}function C(it,ct){x.setItemVisual(I,it,ct)}var I;for(null!=d&&(d=x.getDimension(d));null!=(I=p.next());){var z=x.getRawDataItem(I);if(!z||!1!==z.visualMap)for(var O=null!=d?x.get(d,I,!0):I,V=u(O),Y=s[V],G=g[V],tt=0,Q=G.length;tt<Q;tt++){var nt=G[tt];Y[nt]&&Y[nt].applyVisual(O,S,C)}}}}}(i.stateList,i.targetVisuals,Rn(i.getValueState,i),i.getDataDimension(t.getData())))}),n}}),jo(Ak,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",function(o){if(o.isTargetSeries(t)){var a=o.getVisualMeta(Rn(S2,null,t,o))||{stops:[],outerColors:[]},s=o.getDataDimension(n),u=n.getDimensionInfo(s);null!=u&&(a.dimension=u.index,i.push(a))}}),t.getData().setVisual("visualMeta",i)}});var nD=function(t,e,n){var i=fn((C2[t]||{})[e]);return n&&Fe(i)?i[i.length-1]:i},C2={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},kk=Nr.mapVisual,M2=Nr.eachVisual,T2=Fe,iD=St,D2=Vu,A2=no,NC=pu({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;Oe.canvasSupported||(n.realtime=!1),e||jA(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=Rn(t,this),this.controllerVisuals=PT(this.option.controller,e,t),this.targetVisuals=PT(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(n,i){e.push(i)}):e=di(t),e},eachTargetSeries:function(t,e){St(this.getTargetSeriesIndices(),function(n){t.call(e,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},formatValueText:function(t,e,n){var i,o,a=this.option,s=a.precision,u=this.dataBound,d=a.formatter;return n=n||["<",">"],Fe(t)&&(t=t.slice(),i=!0),o=e?t:i?[g(t[0]),g(t[1])]:g(t),bi(d)?d.replace("{value}",i?o[0]:o).replace("{value2}",i?o[1]:o):Ui(d)?i?d(t[0],t[1]):d(t):i?t[0]===u[0]?n[0]+" "+o[1]:t[1]===u[1]?n[1]+" "+o[0]:o[0]+" - "+o[1]:o;function g(p){return p===u[0]?"min":p===u[1]?"max":(+p).toFixed(Math.min(s,20))}},resetExtent:function(){var t=this.option,e=D2([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;if(null!=e||t.dimensions.length){if(null!=e)return t.getDimension(e);for(var i=t.dimensions,o=i.length-1;0<=o;o--){var a=i[o];if(!t.getDimensionInfo(a).isCalculationCoord)return a}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),o=e.controller||(e.controller={});ei(i,n),ei(o,n);var a=this.isCategory();function s(u){T2(e.color)&&!u.inRange&&(u.inRange={color:e.color.slice().reverse()}),u.inRange=u.inRange||{color:t.get("gradientColor")},iD(this.stateList,function(d){var g=u[d];if(bi(g)){var p=nD(g,"active",a);p?(u[d]={},u[d][g]=p):delete u[d]}},this)}s.call(this,i),s.call(this,o),function(u,d,g){var p=u[d],x=u[g];p&&!x&&(x=u[g]={},iD(p,function(S,C){if(Nr.isValidType(C)){var I=nD(C,"inactive",a);null!=I&&(x[C]=I,"color"!==C||x.hasOwnProperty("opacity")||x.hasOwnProperty("colorAlpha")||(x.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(u){var d=(u.inRange||{}).symbol||(u.outOfRange||{}).symbol,g=(u.inRange||{}).symbolSize||(u.outOfRange||{}).symbolSize,p=this.get("inactiveColor");iD(this.stateList,function(x){var S=this.itemSize,C=u[x];null==(C=C||(u[x]={color:a?p:[p]})).symbol&&(C.symbol=d&&fn(d)||(a?"roundRect":["roundRect"])),null==C.symbolSize&&(C.symbolSize=g&&fn(g)||(a?S[0]:[S[0],S[0]])),C.symbol=kk(C.symbol,function(O){return"none"===O||"square"===O?"roundRect":O});var I=C.symbolSize;if(null!=I){var z=-1/0;M2(I,function(O){z<O&&(z=O)}),C.symbolSize=kk(I,function(O){return A2(O,[0,z],[0,S[0]],!0)})}},this)}.call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:_e,getValueState:_e,getVisualMeta:_e}),Ik=[20,140],Pk=NC.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){Pk.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){Pk.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),null!=t[0]&&!isNaN(t[0])||(t[0]=Ik[0]),null!=t[1]&&!isNaN(t[1])||(t[1]=Ik[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):Fe(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){NC.prototype.completeVisualOption.apply(this,arguments),St(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=Vu((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimension(o),function(a,s){t[0]<=a&&a<=t[1]&&i.push(s)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getVisualMeta:function(t){var e=Ek(0,0,this.getExtent()),n=Ek(0,0,this.option.range.slice()),i=[];function o(x,S){i.push({value:x,color:t(x,S)})}for(var a=0,s=0,u=n.length,d=e.length;s<d&&(!n.length||e[s]<=n[0]);s++)e[s]<n[a]&&o(e[s],"outOfRange");for(var g=1;a<u;a++,g=0)g&&i.length&&o(n[a],"outOfRange"),o(n[a],"inRange");for(g=1;s<d;s++)(!n.length||n[n.length-1]<e[s])&&(g&&(i.length&&o(i[i.length-1].value,"outOfRange"),g=0),o(e[s],"outOfRange"));var p=i.length;return{stops:i,outerColors:[p?i[0].color:"transparent",p?i[p-1].color:"transparent"]}}});function Ek(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,o=n[0],a=[],s=0;s<=200&&o<n[1];s++)a.push(o),o+=i;return a.push(n[1]),a}var Nk=Oa({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e},render:function(t,e,n,i){!1!==(this.visualMapModel=t).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(t){var e=this.visualMapModel,n=ju(e.get("padding")||0),i=t.getBoundingRect();t.add(new Ji({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){var i=(n=n||{}).forceState,o=this.visualMapModel,a={};if("symbol"===e&&(a.symbol=o.get("itemSymbol")),"color"===e){var s=o.get("contentColor");a.color=s}function u(p){return a[p]}function d(p,x){a[p]=x}var g=o.controllerVisuals[i||o.getValueState(t)];return St(Nr.prepareVisualTypes(g),function(p){var x=g[p];n.convertOpacityToAlpha&&"opacity"===p&&(p="colorAlpha",x=g.__alphaForOpacity),Nr.dependsOn(p,e)&&x&&x.applyVisual(t,u,d)}),a[e]},positionGroup:function(t){var n=this.api;fu(t,this.visualMapModel.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:_e});function Rk(t,e,n){var i=t.option,o=i.align;if(null!=o&&"auto"!==o)return o;for(var a={width:e.getWidth(),height:e.getHeight()},s="horizontal"===i.orient?1:0,u=[["left","right","width"],["top","bottom","height"]],d=u[s],g=[0,null,10],p={},x=0;x<3;x++)p[u[1-s][x]]=g[x],p[d[x]]=2===x?n[0]:i[d[x]];var S=[["x","width",3],["y","height",0]][s],C=xi(p,a,i.padding);return d[(C.margin[S[2]]||0)+C[S[0]]+.5*C[S[1]]<.5*a[S[1]]?0:1]}function RC(t,e){return St(t||[],function(n){null!=n.dataIndex&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var ip=no,k2=St,LC=Math.min,w_=Math.max,I2=Nk.extend({type:"visualMap.continuous",init:function(){I2.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var o=this.visualMapModel,a=o.get("textGap"),s=o.itemSize,u=this._shapes.barGroup,d=this._applyTransform([s[0]/2,0===n?-a:s[1]+a],u),g=this._applyTransform(0===n?"bottom":"top",u),p=this._orient,x=this.visualMapModel.textStyleModel;this.group.add(new rn({style:{x:d[0],y:d[1],textVerticalAlign:"horizontal"===p?"middle":g,textAlign:"horizontal"===p?g:"center",text:i,textFont:x.getFont(),textFill:x.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,o=this._orient,a=this._useHandle,s=Rk(e,this.api,i),u=n.barGroup=this._createBarGroup(s);u.add(n.outOfRange=OC()),u.add(n.inRange=OC(null,a?Ok(this._orient):null,Rn(this._dragHandle,this,"all",!1),Rn(this._dragHandle,this,"all",!0)));var d=e.textStyleModel.getTextRect("\u56fd"),g=w_(d.width,d.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(u,0,i,g,o,s),this._createHandle(u,1,i,g,o,s)),this._createIndicator(u,i,g,o),t.add(u)},_createHandle:function(t,e,n,i,o){var C,a=Rn(this._dragHandle,this,e,!1),s=Rn(this._dragHandle,this,e,!0),u=OC((C=i,0===e?[[0,0],[C,0],[C,-C]]:[[0,0],[C,0],[C,C]]),Ok(this._orient),a,s);u.position[0]=n[0],t.add(u);var d=this.visualMapModel.textStyleModel,g=new rn({draggable:!0,drift:a,onmousemove:function(S){vo(S.event)},ondragend:s,style:{x:0,y:0,text:"",textFont:d.getFont(),textFill:d.getTextColor()}});this.group.add(g);var p=["horizontal"===o?i/2:1.5*i,"horizontal"===o?0===e?-1.5*i:1.5*i:0===e?-i/2:i/2],x=this._shapes;x.handleThumbs[e]=u,x.handleLabelPoints[e]=p,x.handleLabels[e]=g},_createIndicator:function(t,e,n,i){var o=OC([[0,0]],"move");o.position[0]=e[0],o.attr({invisible:!0,silent:!0}),t.add(o);var a=this.visualMapModel.textStyleModel,s=new rn({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),textFill:a.getTextColor()}});this.group.add(s);var u=["horizontal"===i?n/2:9,0],d=this._shapes;d.indicator=o,d.indicatorLabel=s,d.indicatorLabelPoint=u},_dragHandle:function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(t,o[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?this._hovering||this._clearHoverLinkToSeries():Lk(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[ip(e[0],n,i,!0),ip(e[1],n,i,!0)]},_updateInterval:function(t,e){var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];qf(e=e||0,i,o,t,0);var a=n.getExtent();this._dataInterval=[ip(i[0],o,a,!0),ip(i[1],o,a,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,o=[0,e.itemSize[1]],a=t?o:this._handleEnds,s=this._createBarVisual(this._dataInterval,n,a,"inRange"),u=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),i.outOfRange.setStyle({fill:u.barColor,opacity:u.opacity}).setShape("points",u.barPoints),this._updateHandle(a,s)},_createBarVisual:function(t,e,n,i){var o={forceState:i,convertOpacityToAlpha:!0},a=this._makeColorGradient(t,o),s=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],u=this._createBarPoints(n,s);return{barColor:new $d(0,0,0,1,a),barPoints:u,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;o<100;o++){var a=t[0]+i*o;if(a>t[1])break;n.push({color:this.getControllerVisual(a,"color",e),offset:o/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new _n("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,a=n.handleLabels;k2([0,1],function(s){var u=o[s];u.setStyle("fill",e.handlesColor[s]),u.position[1]=t[s];var d=fa(n.handleLabelPoints[s],Qd(u,this.group));a[s].setStyle({x:d[0],y:d[1],text:i.formatValueText(this._dataInterval[s]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===s?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(t,e,n,i){var V,Y,G,o=this.visualMapModel,a=o.getExtent(),s=o.itemSize,d=ip(t,a,[0,s[1]],!0),g=this._shapes,p=g.indicator;if(p){p.position[1]=d,p.attr("invisible",!1),p.setShape("points",(V=i,Y=d,G=s[1],n?[[0,-LC(V,w_(Y,0))],[6,0],[0,LC(V,w_(G-Y,0))]]:[[0,0],[5,-5],[5,5]]));var x=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0});p.setStyle("fill",x);var S=fa(g.indicatorLabelPoint,Qd(p,this.group)),C=g.indicatorLabel;C.attr("invisible",!1);var I=this._applyTransform("left",g.barGroup),z=this._orient;C.setStyle({text:(n||"")+o.formatValueText(e),textVerticalAlign:"horizontal"===z?I:"middle",textAlign:"horizontal"===z?"center":I,x:S[0],y:S[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);i[1]=LC(w_(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,t._dragging||t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var I,z,O,V,n=this.visualMapModel;if(n.option.hoverLink){var o=[0,n.itemSize[1]],a=n.getExtent();t=LC(w_(o[0],t),o[1]);var s=(I=a,z=o,O=6,(V=n.get("hoverLinkDataSize"))&&(O=ip(V,I,z,!0)/2),O),u=[t-s,t+s],d=ip(t,o,a,!0),g=[ip(u[0],o,a,!0),ip(u[1],o,a,!0)];u[0]<o[0]&&(g[0]=-1/0),o[1]<u[1]&&(g[1]=1/0),e&&(g[0]===-1/0?this._showIndicator(d,g[1],"< ",s):g[1]===1/0?this._showIndicator(d,g[0],"> ",s):this._showIndicator(d,d,"\u2248 ",s));var p=this._hoverLinkDataIndices,x=[];(e||Lk(n))&&(x=this._hoverLinkDataIndices=n.findTargetDataIndices(g));var S=function(C,I){var z={},O={};return V(C||[],z),V(I||[],O,z),[Y(z),Y(O)];function V(G,tt,Q){for(var nt=0,it=G.length;nt<it;nt++)for(var ct=G[nt].seriesId,vt=di(G[nt].dataIndex),_t=Q&&Q[ct],At=0,Ot=vt.length;At<Ot;At++){var Bt=vt[At];_t&&_t[Bt]?_t[Bt]=null:(tt[ct]||(tt[ct]={}))[Bt]=1}}function Y(G,tt){var Q=[];for(var nt in G)if(G.hasOwnProperty(nt)&&null!=G[nt])if(tt)Q.push(+nt);else{var it=Y(G[nt],!0);it.length&&Q.push({seriesId:nt,dataIndex:it})}return Q}}(p,x);this._dispatchHighDown("downplay",RC(S[0],n)),this._dispatchHighDown("highlight",RC(S[1],n))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(i)){var o=i.getData(e.dataType),a=o.get(n.getDataDimension(o),e.dataIndex,!0);isNaN(a)||this._showIndicator(a,a)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",RC(t,this.visualMapModel)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,i){var o=Qd(e,i?null:this.group);return yl[Fe(t)?"applyTransform":"transformDirection"](t,o,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function OC(t,e,n,i){return new nr({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(o){vo(o.event)},ondragend:i})}function Lk(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function Ok(t){return"vertical"===t?"ns-resize":"ew-resize"}Cr({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(n){n.setSelected(t.selected)})}),wl(Tk);var P2=NC.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){P2.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();E2[this._mode].call(this),this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(o,a){"categories"===n?(o.mappingMethod="category",o.categories=fn(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=kt(this._pieceList,function(s){return s=fn(s),"inRange"!==a&&(s.visual=null),s}))})},completeVisualOption:function(){var t=this.option,e={},n=Nr.listVisualTypes(),i=this.isCategory();function o(a,s,u){return a&&a[s]&&(Ln(a[s])?a[s].hasOwnProperty(u):a[s]===u)}St(t.pieces,function(a){St(n,function(s){a.hasOwnProperty(s)&&(e[s]=1)})}),St(e,function(a,s){var u=0;St(this.stateList,function(d){u|=o(t,d,s)||o(t.target,d,s)},this),u||St(this.stateList,function(d){(t[d]||(t[d]={}))[s]=nD(s,"inRange"===d?"active":"inactive",i)})},this),NC.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,i=this._pieceList,o=(e?n:t).selected||{};if(n.selected=o,St(i,function(s,u){var d=this.getSelectedMapKey(s);o.hasOwnProperty(d)||(o[d]=!0)},this),"single"===n.selectedMode){var a=!1;St(i,function(s,u){var d=this.getSelectedMapKey(s);o[d]&&(a?o[d]=!1:a=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&0<t.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=fn(t)},getValueState:function(t){var e=Nr.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimension(o),function(a,s){Nr.findPieceIndex(a,this._pieceList)===t&&i.push(s)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){if(!this.isCategory()){var e=[],n=[],i=this,o=this._pieceList.slice();if(o.length){var a=o[0].interval[0];a!==-1/0&&o.unshift({interval:[-1/0,a]}),(a=o[o.length-1].interval[1])!==1/0&&o.push({interval:[a,1/0]})}else o.push({interval:[-1/0,1/0]});var s=-1/0;return St(o,function(d){var g=d.interval;g&&(g[0]>s&&u([s,g[0]],"outOfRange"),u(g.slice()),s=g[1])},this),{stops:e,outerColors:n}}function u(d,g){var p=i.getRepresentValue({interval:d});g=g||i.getValueState(p);var x=t(p,g);d[0]===-1/0?n[0]=x:d[1]===1/0?n[1]=x:e.push({value:d[0],color:x},{value:d[1],color:x})}}}),E2={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),i=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var a=(i[1]-i[0])/o;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var s=0,u=i[0];s<o;u+=a,s++)e.push({interval:[u,s===o-1?i[1]:u+a],close:[1,1]});t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),hu(e),St(e,function(g,p){g.index=p,g.text=this.formatValueText(g.interval)},this)},categories:function(){var t=this.option;St(t.categories,function(e){this._pieceList.push({text:this.formatValueText(e,!0),value:e})},this),Bk(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;St(t.pieces,function(n,i){Ln(n)||(n={value:n});var o={text:"",index:i};if(null!=n.label&&(o.text=n.label),n.hasOwnProperty("value")){var a=o.value=n.value;o.interval=[a,a],o.close=[1,1]}else{for(var s=o.interval=[],u=o.close=[0,0],d=[1,0,1],g=[-1/0,1/0],p=[],x=0;x<2;x++){for(var S=[["gte","gt","min"],["lte","lt","max"]][x],C=0;C<3&&null==s[x];C++)s[x]=n[S[C]],u[x]=d[C],p[x]=2===C;null==s[x]&&(s[x]=g[x])}p[0]&&s[1]===1/0&&(u[0]=0),p[1]&&s[0]===-1/0&&(u[1]=0),s[0]===s[1]&&u[0]&&u[1]&&(o.value=s[0])}o.visual=Nr.retrieveVisuals(n),e.push(o)},this),Bk(t,e),hu(e),St(e,function(n){var i=n.close;n.text=n.text||this.formatValueText(null!=n.value?n.value:n.interval,!1,[["<","\u2264"][i[1]],[">","\u2265"][i[0]]])},this)}};function Bk(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}Nk.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,o=i.getFont(),a=i.getTextColor(),s=this._getItemAlign(),u=e.itemSize,d=this._getViewData(),g=d.endsText,p=pr(e.get("showLabel",!0),!g);g&&this._renderEndsText(t,g[0],u,p,s),St(d.viewPieceList,function(x){var S=x.piece,C=new _n;C.onclick=Rn(this._onItemClick,this,S),this._enableHoverLink(C,x.indexInModelPieceList);var I=e.getRepresentValue(S);if(this._createItemSymbol(C,I,[0,0,u[0],u[1]]),p){var z=this.visualMapModel.getValueState(I);C.add(new rn({style:{x:"right"===s?-n:u[0]+n,y:u[1]/2,text:S.text,textVerticalAlign:"middle",textAlign:s,textFont:o,textFill:a,opacity:"outOfRange"===z?.5:1}}))}t.add(C)},this),g&&this._renderEndsText(t,g[1],u,p,s),Sd(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},_enableHoverLink:function(t,e){function n(i){var o=this.visualMapModel;o.option.hoverLink&&this.api.dispatchAction({type:i,batch:RC(o.findTargetDataIndices(e),o)})}t.on("mouseover",Rn(n,this,"highlight")).on("mouseout",Rn(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return Rk(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,i,o){if(e){var a=new _n,s=this.visualMapModel.textStyleModel;a.add(new rn({style:{x:i?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?o:"center",text:e,textFont:s.getFont(),textFill:s.getTextColor()}})),t.add(a)}},_getViewData:function(){var t=this.visualMapModel,e=kt(t.getPieceList(),function(a,s){return{piece:a,indexInModelPieceList:s}}),n=t.get("text"),i=t.get("orient"),o=t.get("inverse");return("horizontal"===i?o:!o)?e.reverse():n=n&&n.slice().reverse(),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(Mc(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,n=e.option,i=fn(n.selected),o=e.getSelectedMapKey(t);"single"===n.selectedMode?(i[o]=!0,St(i,function(a,s){i[s]=s===o})):i[o]=!i[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),wl(Tk);var rD,zk="urn:schemas-microsoft-com:vml",Fk="undefined"==typeof window?null:window,Hk=!1,Rd=Fk&&Fk.document;function oD(t){return rD(t)}if(Rd&&!Oe.canvasSupported)try{Rd.namespaces.zrvml||Rd.namespaces.add("zrvml",zk),rD=function(t){return Rd.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){rD=function(e){return Rd.createElement("<"+e+' xmlns="'+zk+'" class="zrvml">')}}var Vk,v0=os.CMD,ro=Math.round,S_=Math.sqrt,N2=Math.abs,Wk=Math.cos,jk=Math.sin,aD=Math.max;if(!Oe.canvasSupported){var As=",",sD="progid:DXImageTransform.Microsoft",Ml=21600,nd=Ml/2,lD=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=Ml+","+Ml,t.coordorigin="0,0"},Gk=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},Qf=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},C_=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},uD=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},Uk=bs,qk=function(t,e,n){var i=sa(e);n=+n,isNaN(n)&&(n=1),i&&(t.color=Gk(i[0],i[1],i[2]),t.opacity=n*i[3])},BC=function(t,e,n,i){var s,u,o="fill"===e,a=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(o||!o&&n.lineWidth)?(t[o?"filled":"stroked"]="true",n[e]instanceof Tr&&C_(t,a),a=a||oD(e),o?function(s,u,d){var p,x=u.fill;if(null!=x)if(x instanceof Tr){var S,C=0,I=[0,0],z=0,O=1,V=d.getBoundingRect(),Y=V.width,G=V.height;if("linear"===x.type){S="gradient";var tt=d.transform,Q=[x.x*Y,x.y*G],nt=[x.x2*Y,x.y2*G];tt&&(Wi(Q,Q,tt),Wi(nt,nt,tt)),(C=180*Math.atan2(nt[0]-Q[0],nt[1]-Q[1])/Math.PI)<0&&(C+=360),C<1e-6&&(C=0)}else{S="gradientradial";var vt=d.scale,_t=Y,At=G;I=[((Q=[x.x*Y,x.y*G])[0]-V.x)/_t,(Q[1]-V.y)/At],(tt=d.transform)&&Wi(Q,Q,tt);var Ot=aD(_t/=vt[0]*Ml,At/=vt[1]*Ml);O=2*x.r/Ot-(z=0/Ot)}var Bt=x.colorStops.slice();Bt.sort(function(hi,We){return hi.offset-We.offset});for(var Vt=Bt.length,$t=[],Jt=[],Yt=0;Yt<Vt;Yt++){var ue=Bt[Yt],Re=(p=sa(ue.color),[Gk(p[0],p[1],p[2]),p[3]]);Jt.push(ue.offset*O+z+" "+Re[0]),0!==Yt&&Yt!==Vt-1||$t.push(Re)}if(2<=Vt){var ze=$t[0][0],Ie=$t[1][0],Je=$t[0][1]*u.opacity,mn=$t[1][1]*u.opacity;s.type=S,s.method="none",s.focus="100%",s.angle=C,s.color=ze,s.color2=Ie,s.colors=Jt.join(","),s.opacity=mn,s.opacity2=Je}"radial"===S&&(s.focusposition=I.join(","))}else qk(s,x,u.opacity)}(a,n,i):(s=a,(u=n).lineDash&&(s.dashstyle=u.lineDash.join(" ")),null==u.stroke||u.stroke instanceof Tr||qk(s,u.stroke,u.opacity)),Qf(t,a)):(t[o?"filled":"stroked"]="false",C_(t,a))},Ld=[[],[],[]];R.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=oD("shape"),lD(n),this._vmlEl=n),BC(n,"fill",e,this),BC(n,"stroke",e,this);var i=this.transform,o=null!=i,a=n.getElementsByTagName("stroke")[0];if(a){var s=e.lineWidth;o&&!e.strokeNoScale&&(s*=S_(N2(i[0]*i[3]-i[1]*i[2]))),a.weight=s+"px"}var d=this.path||(this.path=new os);this.__dirtyPath&&(d.beginPath(),d.subPixelOptimize=!1,this.buildPath(d,this.shape),d.toStatic(),this.__dirtyPath=!1),n.path=function(g,p){var x,S,C,I,z,O,V=v0.M,Y=v0.C,G=v0.L,tt=v0.A,Q=v0.Q,nt=[],it=g.data,ct=g.len();for(I=0;I<ct;){switch(S="",x=0,C=it[I++]){case V:S=" m ",x=1,z=it[I++],O=it[I++],Ld[0][0]=z,Ld[0][1]=O;break;case G:S=" l ",x=1,z=it[I++],O=it[I++],Ld[0][0]=z,Ld[0][1]=O;break;case Q:case Y:S=" c ",x=3;var vt,_t,At=it[I++],Ot=it[I++],Bt=it[I++],Vt=it[I++];C===Q?(Bt=((vt=Bt)+2*At)/3,Vt=((_t=Vt)+2*Ot)/3,At=(z+2*At)/3,Ot=(O+2*Ot)/3):(vt=it[I++],_t=it[I++]),Ld[0][0]=At,Ld[0][1]=Ot,Ld[1][0]=Bt,Ld[1][1]=Vt,z=Ld[2][0]=vt,O=Ld[2][1]=_t;break;case tt:var $t=0,Jt=0,Yt=1,ue=1,Re=0;p&&($t=p[4],Jt=p[5],Yt=S_(p[0]*p[0]+p[1]*p[1]),ue=S_(p[2]*p[2]+p[3]*p[3]),Re=Math.atan2(-p[1]/ue,p[0]/Yt));var ze=it[I++],Ie=it[I++],Je=it[I++],mn=it[I++],hi=it[I++]+Re,We=it[I++]+hi+Re;I++;var ai=it[I++],fi=ze+Wk(hi)*Je,Oi=Ie+jk(hi)*mn,Ur=(At=ze+Wk(We)*Je,Ot=Ie+jk(We)*mn,ai?" wa ":" at ");Math.abs(fi-At)<1e-4&&(.01<Math.abs(We-hi)?ai&&(fi+=.0125):Math.abs(Oi-Ie)<1e-4?ai&&fi<ze||!ai&&ze<fi?Ot-=.0125:Ot+=.0125:ai&&Oi<Ie||!ai&&Ie<Oi?At+=.0125:At-=.0125),nt.push(Ur,ro(((ze-Je)*Yt+$t)*Ml-nd),As,ro(((Ie-mn)*ue+Jt)*Ml-nd),As,ro(((ze+Je)*Yt+$t)*Ml-nd),As,ro(((Ie+mn)*ue+Jt)*Ml-nd),As,ro((fi*Yt+$t)*Ml-nd),As,ro((Oi*ue+Jt)*Ml-nd),As,ro((At*Yt+$t)*Ml-nd),As,ro((Ot*ue+Jt)*Ml-nd)),z=At,O=Ot;break;case v0.R:var Pr=Ld[0],oo=Ld[1];Pr[0]=it[I++],Pr[1]=it[I++],oo[0]=Pr[0]+it[I++],oo[1]=Pr[1]+it[I++],p&&(Wi(Pr,Pr,p),Wi(oo,oo,p)),Pr[0]=ro(Pr[0]*Ml-nd),oo[0]=ro(oo[0]*Ml-nd),Pr[1]=ro(Pr[1]*Ml-nd),oo[1]=ro(oo[1]*Ml-nd),nt.push(" m ",Pr[0],As,Pr[1]," l ",oo[0],As,Pr[1]," l ",oo[0],As,oo[1]," l ",Pr[0],As,oo[1]);break;case v0.Z:nt.push(" x ")}if(0<x){nt.push(S);for(var Ec=0;Ec<x;Ec++){var nc=Ld[Ec];p&&Wi(nc,nc,p),nt.push(ro(nc[0]*Ml-nd),As,ro(nc[1]*Ml-nd),Ec<x-1?As:"")}}}return nt.join("")}(d,this.transform),n.style.zIndex=uD(this.zlevel,this.z,this.z2),Qf(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},R.prototype.onRemove=function(t){C_(t,this._vmlEl),this.removeRectText(t)},R.prototype.onAdd=function(t){Qf(t,this._vmlEl),this.appendRectText(t)},Po.prototype.brushVML=function(t){var e,n,mn,i=this.style,o=i.image;if("object"==typeof(mn=o)&&mn.tagName&&"IMG"===mn.tagName.toUpperCase()){var a=o.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var s=o.runtimeStyle,u=s.width,d=s.height;s.width="auto",s.height="auto",e=o.width,n=o.height,s.width=u,s.height=d,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}o=a}else o===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(o){var g=i.x||0,p=i.y||0,x=i.width,S=i.height,C=i.sWidth,I=i.sHeight,z=i.sx||0,O=i.sy||0,V=C&&I,Y=this._vmlEl;Y||(Y=Rd.createElement("div"),lD(Y),this._vmlEl=Y);var G,tt=Y.style,Q=!1,nt=1,it=1;if(this.transform&&(nt=S_((G=this.transform)[0]*G[0]+G[1]*G[1]),it=S_(G[2]*G[2]+G[3]*G[3]),Q=G[1]||G[2]),Q){var ct=[g,p],vt=[g+x,p],_t=[g,p+S],At=[g+x,p+S];Wi(ct,ct,G),Wi(vt,vt,G),Wi(_t,_t,G),Wi(At,At,G);var Ot=aD(ct[0],vt[0],_t[0],At[0]),Bt=aD(ct[1],vt[1],_t[1],At[1]),Vt=[];Vt.push("M11=",G[0]/nt,As,"M12=",G[2]/it,As,"M21=",G[1]/nt,As,"M22=",G[3]/it,As,"Dx=",ro(g*nt+G[4]),As,"Dy=",ro(p*it+G[5])),tt.padding="0 "+ro(Ot)+"px "+ro(Bt)+"px 0",tt.filter=sD+".Matrix("+Vt.join("")+", SizingMethod=clip)"}else G&&(g=g*nt+G[4],p=p*it+G[5]),tt.filter="",tt.left=ro(g)+"px",tt.top=ro(p)+"px";var $t=this._imageEl,Jt=this._cropEl;$t||($t=Rd.createElement("div"),this._imageEl=$t);var Yt=$t.style;if(V){if(e&&n)Yt.width=ro(nt*e*x/C)+"px",Yt.height=ro(it*n*S/I)+"px";else{var ue=new Image,Re=this;ue.onload=function(){ue.onload=null,n=ue.height,Yt.width=ro(nt*(e=ue.width)*x/C)+"px",Yt.height=ro(it*n*S/I)+"px",Re._imageWidth=e,Re._imageHeight=n,Re._imageSrc=o},ue.src=o}Jt||((Jt=Rd.createElement("div")).style.overflow="hidden",this._cropEl=Jt);var ze=Jt.style;ze.width=ro((x+z*x/C)*nt),ze.height=ro((S+O*S/I)*it),ze.filter=sD+".Matrix(Dx="+-z*x/C*nt+",Dy="+-O*S/I*it+")",Jt.parentNode||Y.appendChild(Jt),$t.parentNode!==Jt&&Jt.appendChild($t)}else Yt.width=ro(nt*x)+"px",Yt.height=ro(it*S)+"px",Y.appendChild($t),Jt&&Jt.parentNode&&(Y.removeChild(Jt),this._cropEl=null);var Ie="",Je=i.opacity;Je<1&&(Ie+=".Alpha(opacity="+ro(100*Je)+") "),Yt.filter=Ie+=sD+".AlphaImageLoader(src="+o+", SizingMethod=scale)",Y.style.zIndex=uD(this.zlevel,this.z,this.z2),Qf(t,Y),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},Po.prototype.onRemove=function(t){C_(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},Po.prototype.onAdd=function(t){Qf(t,this._vmlEl),this.appendRectText(t)};var y0,cD="normal",dD={},hD=0,R2=document.createElement("div");Vk=function(t,e){var n=Rd;y0||((y0=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",Rd.body.appendChild(y0));try{y0.style.font=e}catch(i){}return y0.innerHTML="",y0.appendChild(n.createTextNode(t)),{width:y0.offsetWidth}},Il.measureText=Vk;for(var fD=new Yi,L2=function(t,e,n,i){var o=this.style;this.__dirty&&Nu(o);var a=o.text;if(null!=a&&(a+=""),a){if(o.rich){var s=Ql(a,o);a=[];for(var u=0;u<s.lines.length;u++){for(var d=s.lines[u].tokens,g=[],p=0;p<d.length;p++)g.push(d[p].text);a.push(g.join(""))}a=a.join("\n")}var x,S,C=o.textAlign,I=o.textVerticalAlign,z=function(At){var Ot=dD[At];if(!Ot){100<hD&&(hD=0,dD={});var Bt,Vt=R2.style;try{Vt.font=At,Bt=Vt.fontFamily.split(",")[0]}catch($t){}Ot={style:Vt.fontStyle||cD,variant:Vt.fontVariant||cD,weight:Vt.fontWeight||cD,size:0|parseFloat(Vt.fontSize||12),family:Bt||"Microsoft YaHei"},dD[At]=Ot,hD++}return Ot}(o.font),O=z.style+" "+z.variant+" "+z.weight+" "+z.size+'px "'+z.family+'"';n=n||al(a,O,C,I,o.textPadding,o.textLineHeight);var V=this.transform;if(V&&!i&&(fD.copy(e),fD.applyTransform(V),e=fD),i)x=e.x,S=e.y;else{var Y=o.textPosition;if(Y instanceof Array)x=e.x+Uk(Y[0],e.width),S=e.y+Uk(Y[1],e.height),C=C||"left";else{var G=this.calculateTextPosition?this.calculateTextPosition({},o,e):ud({},o,e);x=G.x,S=G.y,C=C||G.textAlign,I=I||G.textVerticalAlign}}x=Pu(x,n.width,C),S=Eu(S,n.height,I),S+=n.height/2;var tt,Q,nt,it=oD,ct=this._textVmlEl;ct?Q=(tt=(nt=ct.firstChild).nextSibling).nextSibling:(ct=it("line"),tt=it("path"),Q=it("textpath"),nt=it("skew"),Q.style["v-text-align"]="left",lD(ct),tt.textpathok=!0,Q.on=!0,ct.from="0 0",ct.to="1000 0.05",Qf(ct,nt),Qf(ct,tt),Qf(ct,Q),this._textVmlEl=ct);var vt=[x,S],_t=ct.style;V&&i?(Wi(vt,vt,V),nt.on=!0,nt.matrix=V[0].toFixed(3)+As+V[2].toFixed(3)+As+V[1].toFixed(3)+As+V[3].toFixed(3)+",0,0",nt.offset=(ro(vt[0])||0)+","+(ro(vt[1])||0),nt.origin="0 0",_t.left="0px",_t.top="0px"):(nt.on=!1,_t.left=ro(x)+"px",_t.top=ro(S)+"px"),Q.string=String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{Q.style.font=O}catch(At){}BC(ct,"fill",{fill:o.textFill,opacity:o.opacity},this),BC(ct,"stroke",{stroke:o.textStroke,opacity:o.opacity,lineDash:o.lineDash||null},this),ct.style.zIndex=uD(this.zlevel,this.z,this.z2),Qf(t,ct)}},O2=function(t){C_(t,this._textVmlEl),this._textVmlEl=null},B2=function(t){Qf(t,this._textVmlEl)},Yk=[fc,ya,Po,R,rn],gD=0;gD<Yk.length;gD++){var pD=Yk[gD].prototype;pD.drawRectText=L2,pD.removeRectText=O2,pD.appendRectText=B2}rn.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},rn.prototype.onRemove=function(t){this.removeRectText(t)},rn.prototype.onAdd=function(t){this.appendRectText(t)}}function Rx(t){return parseInt(t,10)}function zC(t,e){(function(){if(!Hk&&Rd){Hk=!0;var s=Rd.styleSheets;s.length<31?Rd.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):s[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=t,this.storage=e;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var o=e.delFromStorage,a=e.addToStorage;e.delFromStorage=function(s){o.call(e,s),s&&s.onRemove&&s.onRemove(i)},e.addToStorage=function(s){s.onAdd&&s.onAdd(i),a.call(e,s)},this._firstPaint=!0}function tg(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}zC.prototype={constructor:zC,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var i=t[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(e),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(e),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,e),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){if(t=null==t?this._getWidth():t,e=null==e?this._getHeight():e,this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||Rx(e.width))-Rx(e.paddingLeft)-Rx(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||Rx(e.height))-Rx(e.paddingTop)-Rx(e.paddingBottom)|0}},St(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){zC.prototype[t]=function(){}}),le("vml",zC);var x0=os.CMD,z2=Array.prototype.join,Lx="none",mD=Math.round,Xk=Math.sin,$k=Math.cos,Zk=Math.PI,vm=2*Math.PI,F2=180/Zk;function ef(t){return mD(1e4*t)/1e4}function Jk(t){return t<1e-4&&-1e-4<t}function vD(t,e){e&&Ba(t,"transform","matrix("+z2.call(e,",")+")")}function Ba(t,e,n){n&&("linear"===n.type||"radial"===n.type)||t.setAttribute(e,n)}function Qk(t,e,n,i){if(s=e,null!=(d=n?s.textFill:s.fill)&&d!==Lx){var o=n?e.textFill:e.fill;Ba(t,"fill",o="transparent"===o?Lx:o),Ba(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else Ba(t,"fill",Lx);var s,d;if(function(s,u){var d=u?s.textStroke:s.stroke;return null!=d&&d!==Lx}(e,n)){var a=n?e.textStroke:e.stroke;Ba(t,"stroke",a="transparent"===a?Lx:a),Ba(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?i.getLineScale():1)),Ba(t,"paint-order",n?"stroke":"fill"),Ba(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(Ba(t,"stroke-dasharray",e.lineDash.join(",")),Ba(t,"stroke-dashoffset",mD(e.lineDashOffset||0))):Ba(t,"stroke-dasharray",""),e.lineCap&&Ba(t,"stroke-linecap",e.lineCap),e.lineJoin&&Ba(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&Ba(t,"stroke-miterlimit",e.miterLimit)}else Ba(t,"stroke",Lx)}var M_={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=tg("path"),t.__svgEl=n),t.path||t.createPathProxy();var i=t.path;if(t.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,t.buildPath(i,t.shape),t.__dirtyPath=!1;var o=function(a){for(var s=[],u=a.data,d=a.len(),g=0;g<d;){var p="",x=0;switch(u[g++]){case x0.M:p="M",x=2;break;case x0.L:p="L",x=2;break;case x0.Q:p="Q",x=4;break;case x0.C:p="C",x=6;break;case x0.A:var S=u[g++],C=u[g++],I=u[g++],z=u[g++],O=u[g++],V=u[g++],Y=u[g++],G=u[g++],tt=Math.abs(V),Q=Jk(tt-vm)||(G?vm<=V:vm<=-V),nt=0<V?V%vm:V%vm+vm,it=!1;it=!!Q||!Jk(tt)&&Zk<=nt==!!G;var ct=ef(S+I*$k(O)),vt=ef(C+z*Xk(O));Q&&(V=G?vm-1e-4:1e-4-vm,it=!0,9===g&&s.push("M",ct,vt));var _t=ef(S+I*$k(O+V)),At=ef(C+z*Xk(O+V));s.push("A",ef(I),ef(z),mD(Y*F2),+it,+G,_t,At);break;case x0.Z:p="Z";break;case x0.R:_t=ef(u[g++]),At=ef(u[g++]);var Ot=ef(u[g++]),Bt=ef(u[g++]);s.push("M",_t,At,"L",_t+Ot,At,"L",_t+Ot,At+Bt,"L",_t,At+Bt,"L",_t,At)}p&&s.push(p);for(var Vt=0;Vt<x;Vt++)s.push(ef(u[g++]))}return s.join(" ")}(i);o.indexOf("NaN")<0&&Ba(n,"d",o)}Qk(n,e,!1,t),vD(n,t.transform),null!=e.text?HC(t,t.getBoundingRect()):xD(t)}},tI={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=e.x||0,o=e.y||0,a=e.width,s=e.height,u=t.__svgEl;u||(u=tg("image"),t.__svgEl=u),n!==t.__imageSrc&&(u.setAttributeNS("http://www.w3.org/1999/xlink","href",n),t.__imageSrc=n),Ba(u,"width",a),Ba(u,"height",s),Ba(u,"x",i),Ba(u,"y",o),vD(u,t.transform),null!=e.text?HC(t,t.getBoundingRect()):xD(t)}}},FC={},yD=new Yi,T_={},rp=[],H2={left:"start",right:"end",center:"middle",middle:"middle"},HC=function(t,e){var n=t.style,i=t.transform,o=t instanceof rn||n.transformText;t.__dirty&&Nu(n);var Bt,Vt,$t,a=n.text;if(null!=a&&(a+=""),iu(a,n)){null==a&&(a=""),!o&&i&&(yD.copy(e),yD.applyTransform(i),e=yD);var s=t.__textSvgEl;s||(s=tg("text"),t.__textSvgEl=s);var u=s.style,d=n.font||es,g=s.__computedFont;d!==s.__styleFont&&(u.font=s.__styleFont=d,g=s.__computedFont=u.font);var p=n.textPadding,S=t.__textCotentBlock;S&&!t.__dirtyText||(S=t.__textCotentBlock=Pl(a,g,p,n.textLineHeight,n.truncate));var C=S.outerHeight,I=S.lineHeight;va(T_,t,n,e);var z=T_.baseX,O=T_.baseY,V=T_.textAlign||"left",Y=T_.textVerticalAlign;!function(Bt,Vt,$t,Jt,Yt,ue,Re){Ft(rp),Vt&&$t&&oe(rp,$t);var ze=Jt.textRotation;if(Yt&&ze){var Ie=Jt.textOrigin;"center"===Ie?(ue=Yt.width/2+Yt.x,Re=Yt.height/2+Yt.y):Ie&&(ue=Ie[0]+Yt.x,Re=Ie[1]+Yt.y),rp[4]-=ue,rp[5]-=Re,he(rp,rp,ze),rp[4]+=ue,rp[5]+=Re}vD(Bt,rp)}(s,o,i,n,e,z,O);var G=z,tt=Eu(O,C,Y);p&&(Bt=z,$t=p,G="right"===(Vt=V)?Bt-$t[1]:"center"===Vt?Bt+$t[3]/2-$t[1]/2:Bt+$t[3],tt+=p[0]),tt+=I/2,Qk(s,n,!0,t);var Q=S.canCacheByTextString,nt=t.__tspanList||(t.__tspanList=[]),it=nt.length;if(Q&&t.__canCacheByTextString&&t.__text===a){if(t.__dirtyText&&it)for(var ct=0;ct<it;++ct)eI(nt[ct],V,G,tt+ct*I)}else{t.__text=a,t.__canCacheByTextString=Q;var vt=S.lines,_t=vt.length;for(ct=0;ct<_t;ct++){var At=nt[ct],Ot=vt[ct];At?At.__zrText!==Ot&&(At.innerHTML="",At.appendChild(document.createTextNode(Ot))):(At=nt[ct]=tg("tspan"),s.appendChild(At),At.appendChild(document.createTextNode(Ot))),eI(At,V,G,tt+ct*I)}if(_t<it){for(;ct<it;ct++)s.removeChild(nt[ct]);nt.length=_t}}}};function eI(t,e,n,i){Ba(t,"dominant-baseline","middle"),Ba(t,"text-anchor",H2[e]),Ba(t,"x",n),Ba(t,"y",i)}function xD(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}function nI(){}function V2(t,e){for(var n=0,i=e.length,o=0,a=0;n<i;n++){var s=e[n];if(s.removed){for(u=[],d=a;d<a+s.count;d++)u.push(d);s.indices=u,a+=s.count}else{for(var u=[],d=o;d<o+s.count;d++)u.push(d);s.indices=u,o+=s.count,s.added||(a+=s.count)}}return e}FC.drawRectText=HC,FC.brush=function(t){null!=t.style.text?HC(t,!1):xD(t)},nI.prototype={diff:function(t,e,n){this.equals=n=n||function(I,z){return I===z};var i=this;t=t.slice();var o=(e=e.slice()).length,a=t.length,s=1,u=o+a,d=[{newPos:-1,components:[]}],g=this.extractCommon(d[0],e,t,0);if(d[0].newPos+1>=o&&a<=g+1){for(var p=[],x=0;x<e.length;x++)p.push(x);return[{indices:p,count:e.length}]}function S(){for(var I=-1*s;I<=s;I+=2){var z,O=d[I-1],V=d[I+1],Y=(V?V.newPos:0)-I;O&&(d[I-1]=void 0);var G=O&&O.newPos+1<o,tt=V&&0<=Y&&Y<a;if(G||tt){if(!G||tt&&O.newPos<V.newPos?(z={newPos:(Q=V).newPos,components:Q.components.slice(0)},i.pushComponent(z.components,void 0,!0)):((z=O).newPos++,i.pushComponent(z.components,!0,void 0)),Y=i.extractCommon(z,e,t,I),z.newPos+1>=o&&a<=Y+1)return V2(0,z.components);d[I]=z}else d[I]=void 0}var Q;s++}for(;s<=u;){var C=S();if(C)return C}},pushComponent:function(t,e,n){var i=t[t.length-1];i&&i.added===e&&i.removed===n?t[t.length-1]={count:i.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,i){for(var o=e.length,a=n.length,s=t.newPos,u=s-i,d=0;s+1<o&&u+1<a&&this.equals(e[s+1],n[u+1]);)s++,u++,d++;return d&&t.components.push({count:d}),t.newPos=s,u},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var W2=new nI;function Aa(t,e,n,i,o){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=o||"_dom",this.nextId=0}function b0(t,e){Aa.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function D_(t,e){Aa.call(this,t,e,"clipPath","__clippath_in_use__")}function ym(t,e){Aa.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function iI(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function VC(t){return parseInt(t,10)}function rI(t,e){return e&&t&&e.parentNode!==t}function A_(t,e,n){if(rI(t,e)&&n){var i=n.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function oI(t,e){if(rI(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function aI(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function k_(t){return t.__textSvgEl}function I_(t){return t.__svgEl}function WC(t,e,n,i){this.root=t,this.storage=e,this._opts=n=En({},n||{});var o=tg("svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;";var a=tg("g");o.appendChild(a);var s=tg("g");o.appendChild(s),this.gradientManager=new b0(i,s),this.clipPathManager=new D_(i,s),this.shadowManager=new ym(i,s);var u=document.createElement("div");u.style.cssText="overflow:hidden;position:relative",this._svgDom=o,this._svgRoot=s,this._backgroundRoot=a,this._viewport=u,t.appendChild(u),u.appendChild(o),this.resize(n.width,n.height),this._visibleList=[]}Aa.prototype.createElement=tg,Aa.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(i){var o=n.children;if(!o)return!1;for(var a=o.length-1;0<=a;--a)if(o[a]===i)return!0;return!1}),n):null:n[0]},Aa.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var i=this.add(t);i&&(t[this._domName]=i)}}},Aa.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},Aa.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},Aa.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return St(this._tagNames,function(n){var i=t.getElementsByTagName(n);e=e.concat([].slice.call(i))}),e},Aa.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;St(t,function(n){n[e._markLabel]="0"})},Aa.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},Aa.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;St(e,function(i){"1"!==i[n._markLabel]&&t.removeChild(i)})}},Aa.prototype.getSvgProxy=function(t){return t instanceof R?M_:t instanceof Po?tI:t instanceof rn?FC:M_},Aa.prototype.getTextSvgElement=function(t){return t.__textSvgEl},Aa.prototype.getSvgElement=function(t){return t.__svgEl},ki(b0,Aa),b0.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;St(["fill","stroke"],function(i){if(e.style[i]&&("linear"===e.style[i].type||"radial"===e.style[i].type)){var o,a=e.style[i],s=n.getDefs(!0);a._dom?(o=a._dom,s.contains(a._dom)||n.addDom(o)):o=n.add(a),n.markUsed(e);var u=o.getAttribute("id");t.setAttribute(i,"url(#"+u+")")}})}},b0.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},b0.prototype.update=function(t){var e=this;Aa.prototype.update.call(this,t,function(){var n=t.type,i=t._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},b0.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return;e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}e.setAttribute("gradientUnits",t.global?"userSpaceOnUse":"objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,o=n.length;i<o;++i){var a=this.createElement("stop");a.setAttribute("offset",100*n[i].offset+"%");var s=n[i].color;if(-1<s.indexOf("rgba")){var u=sa(s)[3],d=Fr(s);a.setAttribute("stop-color","#"+d),a.setAttribute("stop-opacity",u)}else a.setAttribute("stop-color",n[i].color);e.appendChild(a)}t._dom=e},b0.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&Aa.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&Aa.prototype.markUsed.call(this,e._dom)}},ki(D_,Aa),D_.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},D_.prototype.updateDom=function(t,e,n){if(e&&0<e.length){var i,o,a=this.getDefs(!0),s=e[0],u=n?"_textDom":"_dom";s[u]?(o=s[u].getAttribute("id"),a.contains(i=s[u])||a.appendChild(i)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",o),a.appendChild(i),s[u]=i);var d=this.getSvgProxy(s);if(s.transform&&s.parent.invTransform&&!n){var g=Array.prototype.slice.call(s.transform);Kt(s.transform,s.parent.invTransform,s.transform),d.brush(s),s.transform=g}else d.brush(s);var p=this.getSvgElement(s);i.innerHTML="",i.appendChild(p.cloneNode()),t.setAttribute("clip-path","url(#"+o+")"),1<e.length&&this.updateDom(i,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},D_.prototype.markUsed=function(t){var e=this;t.__clipPaths&&St(t.__clipPaths,function(n){n._dom&&Aa.prototype.markUsed.call(e,n._dom),n._textDom&&Aa.prototype.markUsed.call(e,n._textDom)})},ki(ym,Aa),ym.prototype.addWithoutUpdate=function(t,e){if(e&&iI(e.style)){var n;e._shadowDom?(n=e._shadowDom,this.getDefs(!0).contains(e._shadowDom)||this.addDom(n)):n=this.add(e),this.markUsed(e);var i=n.getAttribute("id");t.style.filter="url(#"+i+")"}},ym.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},ym.prototype.update=function(t,e){if(iI(e.style)){var n=this;Aa.prototype.update.call(this,e,function(){n.updateDom(e,e._shadowDom)})}else this.remove(t,e)},ym.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},ym.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,o,a,s,u=t.style,d=t.scale&&t.scale[0]||1,g=t.scale&&t.scale[1]||1;if(u.shadowBlur||u.shadowOffsetX||u.shadowOffsetY)i=u.shadowOffsetX||0,o=u.shadowOffsetY||0,a=u.shadowBlur,s=u.shadowColor;else{if(!u.textShadowBlur)return void this.removeDom(e,u);i=u.textShadowOffsetX||0,o=u.textShadowOffsetY||0,a=u.textShadowBlur,s=u.textShadowColor}n.setAttribute("dx",i/d),n.setAttribute("dy",o/g),n.setAttribute("flood-color",s),n.setAttribute("stdDeviation",a/2/d+" "+a/2/g),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(a/2*200)+"%"),e.setAttribute("height",Math.ceil(a/2*200)+"%"),e.appendChild(n),t._shadowDom=e},ym.prototype.markUsed=function(t){t._shadowDom&&Aa.prototype.markUsed.call(this,t._shadowDom)},WC.prototype={constructor:WC,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=tg("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0),e.style.fill=t,this._backgroundRoot.appendChild(e),this._backgroundNode=e},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n,i=this._svgRoot,o=this._visibleList,a=t.length,s=[];for(e=0;e<a;e++){var u=t[e],d=(n=u)instanceof R?M_:n instanceof Po?tI:n instanceof rn?FC:M_,g=I_(u)||k_(u);u.invisible||(u.__dirty&&(d&&d.brush(u),this.clipPathManager.update(u),u.style&&(this.gradientManager.update(u.style.fill),this.gradientManager.update(u.style.stroke),this.shadowManager.update(g,u)),u.__dirty=!1),s.push(u))}var p,x=W2.diff(o,s,void 0);for(e=0;e<x.length;e++)if((I=x[e]).removed)for(var S=0;S<I.count;S++){g=I_(u=o[I.indices[S]]);var C=k_(u);aI(i,g),aI(i,C)}for(e=0;e<x.length;e++){var I;if((I=x[e]).added)for(S=0;S<I.count;S++)g=I_(u=s[I.indices[S]]),C=k_(u),p?A_(i,g,p):oI(i,g),g?A_(i,C,g):p?A_(i,C,p):oI(i,C),A_(i,C,g),p=C||g||p,this.gradientManager.addWithoutUpdate(g||C,u),this.shadowManager.addWithoutUpdate(g||C,u),this.clipPathManager.markUsed(u);else if(!I.removed)for(S=0;S<I.count;S++)g=I_(u=s[I.indices[S]]),C=k_(u),g=I_(u),C=k_(u),this.gradientManager.markUsed(u),this.gradientManager.addWithoutUpdate(g||C,u),this.shadowManager.markUsed(u),this.shadowManager.addWithoutUpdate(g||C,u),this.clipPathManager.markUsed(u),C&&A_(i,C,g),p=g||C||p}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=s},_getDefs:function(t){var e,n=this._svgDom;return 0!==(e=n.getElementsByTagName("defs")).length?e[0]:t?((e=n.insertBefore(tg("defs"),n.firstChild)).contains||(e.contains=function(i){var o=e.children;if(!o)return!1;for(var a=o.length-1;0<=a;--a)if(o[a]===i)return!0;return!1}),e):null},resize:function(t,e){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var o=n.style;o.width=t+"px",o.height=e+"px";var a=this._svgDom;a.setAttribute("width",t),a.setAttribute("height",e)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var s=this.root,u=document.defaultView.getComputedStyle(s);return(s[i]||VC(u[n])||VC(s.style[n]))-(VC(u[o])||0)-(VC(u[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},St(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(t){WC.prototype[t]=function(){}}),le("svg",WC),Rt.version="4.9.0",Rt.dependencies={zrender:"4.3.2"},Rt.PRIORITY=Td,Rt.init=function(t,e,n){var i=Jx(t);if(i)return i;var o=new Ym(t,e,n);return o.id="ec_"+rM++,Ag[o.id]=o,ba(t,K0,o.id),function(a){var s="__connectUpdateStatus";function u(d,g){for(var p=0;p<d.length;p++)d[p][s]=g}ls(Mg,function(d,g){a._messageCenter.on(g,function(p){if(Km[a.group]&&0!==a[s]){if(p&&p.escapeConnect)return;var x=a.makeActionFromEvent(p),S=[];ls(Ag,function(C){C!==a&&C.group===a.group&&S.push(C)}),u(S,0),ls(S,function(C){1!==C[s]&&C.dispatchAction(x)}),u(S,2)}})})}(o),o},Rt.connect=function(t){if(Fe(t)){var e=t;t=null,ls(e,function(n){null!=n.group&&(t=n.group)}),t=t||"g_"+oM++,ls(e,function(n){n.group=t})}return Km[t]=!0,t},Rt.disConnect=Kx,Rt.disconnect=aM,Rt.dispose=function(t){"string"==typeof t?t=Ag[t]:t instanceof Ym||(t=Jx(t)),t instanceof Ym&&!t.isDisposed()&&t.dispose()},Rt.getInstanceByDom=Jx,Rt.getInstanceById=function(t){return Ag[t]},Rt.registerTheme=Qx,Rt.registerPreprocessor=wl,Rt.registerProcessor=$u,Rt.registerPostUpdate=function(t){Zx.push(t)},Rt.registerAction=Cr,Rt.registerCoordinateSystem=J0,Rt.getCoordinateSystemDimensions=function(t){var e=Ca.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},Rt.registerLayout=oa,Rt.registerVisual=jo,Rt.registerLoading=eb,Rt.extendComponentModel=pu,Rt.extendComponentView=Oa,Rt.extendSeriesModel=Q0,Rt.extendChartView=Zu,Rt.setCanvasCreator=function(t){Si("createCanvas",t)},Rt.registerMap=function(t,e,n){!function(t,e,n){var i;St(i=Fe(e)?e:e.svg?[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),[{type:"geoJSON",source:e,specialAreas:n}]),function(o){var a=o.type;"geoJson"===a&&(a=o.type="geoJSON"),(0,nM[a])(o)}),Ux.set(t,i)}(t,e,n)},Rt.getMap=function(t){var e=W0_retrieveMap(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}},Rt.dataTool={},Rt.zrender=re,Rt.number=T0,Rt.format=Em,Rt.throttle=Gm,Rt.helper=mM,Rt.matrix=vn,Rt.vector=qr,Rt.color=Xl,Rt.parseGeoJSON=yb,Rt.parseGeoJson=by,Rt.util=Sb,Rt.graphic=Sw,Rt.List=qa,Rt.Model=dr,Rt.Axis=$a,Rt.env=Oe}),function(Rt,pi){"object"==typeof exports&&"undefined"!=typeof module?pi(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],pi):pi(Rt.bmap={},Rt.echarts)}(this,function(Rt,pi){"use strict";function bn(on,Ue){this._bmap=on,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=Ue,this._projection=new BMap.MercatorProjection}function Oe(on,Ue){return Ue=Ue||[0,0],pi.util.map([0,1],function(Bi){var Nn=Ue[Bi],Pi=on[Bi]/2,Ci=[],Gi=[];return Ci[Bi]=Nn-Pi,Gi[Bi]=Nn+Pi,Ci[1-Bi]=Gi[1-Bi]=Ue[1-Bi],Math.abs(this.dataToPoint(Ci)[Bi]-this.dataToPoint(Gi)[Bi])},this)}var se;function Ve(on){for(var Ue in on)if(on.hasOwnProperty(Ue))return!1;return!0}bn.prototype.dimensions=["lng","lat"],bn.prototype.setZoom=function(on){this._zoom=on},bn.prototype.setCenter=function(on){this._center=this._projection.lngLatToPoint(new BMap.Point(on[0],on[1]))},bn.prototype.setMapOffset=function(on){this._mapOffset=on},bn.prototype.getBMap=function(){return this._bmap},bn.prototype.dataToPoint=function(on){var Ue=new BMap.Point(on[0],on[1]),Bi=this._bmap.pointToOverlayPixel(Ue),Nn=this._mapOffset;return[Bi.x-Nn[0],Bi.y-Nn[1]]},bn.prototype.pointToData=function(on){var Ue=this._mapOffset;return[(on=this._bmap.overlayPixelToPoint({x:on[0]+Ue[0],y:on[1]+Ue[1]})).lng,on.lat]},bn.prototype.getViewRect=function(){var on=this._api;return new pi.graphic.BoundingRect(0,0,on.getWidth(),on.getHeight())},bn.prototype.getRoamTransform=function(){return pi.matrix.create()},bn.prototype.prepareCustoms=function(on){var Ue=this.getViewRect();return{coordSys:{type:"bmap",x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height},api:{coord:pi.util.bind(this.dataToPoint,this),size:pi.util.bind(Oe,this)}}},bn.dimensions=bn.prototype.dimensions,bn.create=function(on,Ue){var Bi,Nn=Ue.getDom();on.eachComponent("bmap",function(Pi){var Ci=Ue.getZr().painter,Gi=Ci.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(se=se||function(){function Rr(zn){this._root=zn}return(Rr.prototype=new BMap.Overlay).initialize=function(zn){return zn.getPanes().labelPane.appendChild(this._root),this._root},Rr.prototype.draw=function(){},Rr}(),Bi)throw new Error("Only one bmap component can exist");if(!Pi.__bmap){var zi=Nn.querySelector(".ec-extension-bmap");zi&&(Gi.style.left="0px",Gi.style.top="0px",Nn.removeChild(zi)),(zi=document.createElement("div")).style.cssText="width:100%;height:100%",zi.classList.add("ec-extension-bmap"),Nn.appendChild(zi);var Si=Pi.get("mapOptions")||{};delete Si.mapType;var fn=Pi.__bmap=new BMap.Map(zi,Si),ei=new se(Gi);fn.addOverlay(ei),Ci.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}fn=Pi.__bmap;var Zt=Pi.get("center"),En=Pi.get("zoom");if(Zt&&En){var Dn=fn.getCenter(),Dr=fn.getZoom();if(Pi.centerOrZoomChanged([Dn.lng,Dn.lat],Dr)){var po=new BMap.Point(Zt[0],Zt[1]);fn.centerAndZoom(po,En)}}(Bi=new bn(fn,Ue)).setMapOffset(Pi.__mapOffset||[0,0]),Bi.setZoom(En),Bi.setCenter(Zt),Pi.coordinateSystem=Bi}),on.eachSeries(function(Pi){"bmap"===Pi.get("coordinateSystem")&&(Pi.coordinateSystem=Bi)})},pi.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(on,Ue){this.option.center=on,this.option.zoom=Ue},centerOrZoomChanged:function(on,Ue){var Nn,Pi,Bi=this.option;return Pi=Bi.center,!((Nn=on)&&Pi&&Nn[0]===Pi[0]&&Nn[1]===Pi[1]&&Ue===Bi.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),pi.extendComponentView({type:"bmap",render:function(on,Ue,Bi){function Nn(Rr,zn){if(!Pi){var ki=Gi.parentNode.parentNode.parentNode,Fn=[-parseInt(ki.style.left,10)||0,-parseInt(ki.style.top,10)||0];Gi.style.left=Fn[0]+"px",Gi.style.top=Fn[1]+"px",zi.setMapOffset(Fn),on.__mapOffset=Fn,Bi.dispatchAction({type:"bmapRoam"})}}var Pi=!0,Ci=on.getBMap(),Gi=Bi.getZr().painter.getViewportRoot(),zi=on.coordinateSystem;function Si(){Pi||Bi.dispatchAction({type:"bmapRoam"})}Ci.removeEventListener("moving",this._oldMoveHandler),Ci.removeEventListener("moveend",this._oldMoveHandler),Ci.removeEventListener("zoomend",this._oldZoomEndHandler),Ci.addEventListener("moving",Nn),Ci.addEventListener("moveend",Nn),Ci.addEventListener("zoomend",Si),this._oldMoveHandler=Nn,this._oldZoomEndHandler=Si;var fn=on.get("roam");fn&&"scale"!==fn?Ci.enableDragging():Ci.disableDragging(),fn&&"move"!==fn?(Ci.enableScrollWheelZoom(),Ci.enableDoubleClickZoom(),Ci.enablePinchToZoom()):(Ci.disableScrollWheelZoom(),Ci.disableDoubleClickZoom(),Ci.disablePinchToZoom());var ei=on.__mapStyle,Zt=on.get("mapStyle")||{},En=JSON.stringify(Zt);JSON.stringify(ei)!==En&&(Ve(Dr)||Ci.setMapStyle(pi.util.clone(Zt)),on.__mapStyle=JSON.parse(En));var Dn=on.__mapStyle2,Dr=on.get("mapStyleV2")||{},po=JSON.stringify(Dr);JSON.stringify(Dn)!==po&&(Ve(Dr)||Ci.setMapStyleV2(pi.util.clone(Dr)),on.__mapStyle2=JSON.parse(po)),Pi=!1}}),pi.registerCoordinateSystem("bmap",bn),pi.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(on,Ue){Ue.eachComponent("bmap",function(Bi){var Nn=Bi.getBMap(),Pi=Nn.getCenter();Bi.setCenterAndZoom([Pi.lng,Pi.lat],Nn.getZoom())})}),Rt.version="1.0.0"}),function(Rt,pi){"object"==typeof exports&&"undefined"!=typeof module?module.exports=pi():"function"==typeof define&&define.amd?define(pi):(Rt="undefined"!=typeof globalThis?globalThis:Rt||self).Chart=pi()}(this,function(){"use strict";const Rt="undefined"==typeof window?function(_){return _()}:window.requestAnimationFrame;function pi(_,f,y){const w=y||(R=>Array.prototype.slice.call(R));let A=!1,E=[];return function(...R){E=w(R),A||(A=!0,Rt.call(window,()=>{A=!1,_.apply(f,E)}))}}function bn(_,f){let y;return function(...w){return f?(clearTimeout(y),y=setTimeout(_,f,w)):_.apply(this,w),f}}const Oe=_=>"start"===_?"left":"end"===_?"right":"center",se=(_,f,y)=>"start"===_?f:"end"===_?y:(f+y)/2,Ve=(_,f,y,w)=>_===(w?"left":"right")?y:"center"===_?(f+y)/2:f;var on=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(_,f,y,w){const E=f.duration;f.listeners[w].forEach(R=>R({chart:_,initial:f.initial,numSteps:E,currentStep:Math.min(y-f.start,E)}))}_refresh(){this._request||(this._running=!0,this._request=Rt.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(_=Date.now()){let f=0;this._charts.forEach((y,w)=>{if(!y.running||!y.items.length)return;const A=y.items;let E,R=A.length-1,j=!1;for(;R>=0;--R)E=A[R],E._active?(E._total>y.duration&&(y.duration=E._total),E.tick(_),j=!0):(A[R]=A[A.length-1],A.pop());j&&(w.draw(),this._notify(w,y,_,"progress")),A.length||(y.running=!1,this._notify(w,y,_,"complete"),y.initial=!1),f+=A.length}),this._lastDate=_,0===f&&(this._running=!1)}_getAnims(_){const f=this._charts;let y=f.get(_);return y||(y={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},f.set(_,y)),y}listen(_,f,y){this._getAnims(_).listeners[f].push(y)}add(_,f){f&&f.length&&this._getAnims(_).items.push(...f)}has(_){return this._getAnims(_).items.length>0}start(_){const f=this._charts.get(_);f&&(f.running=!0,f.start=Date.now(),f.duration=f.items.reduce((y,w)=>Math.max(y,w._duration),0),this._refresh())}running(_){if(!this._running)return!1;const f=this._charts.get(_);return!!(f&&f.running&&f.items.length)}stop(_){const f=this._charts.get(_);if(!f||!f.items.length)return;const y=f.items;let w=y.length-1;for(;w>=0;--w)y[w].cancel();f.items=[],this._notify(_,f,Date.now(),"complete")}remove(_){return this._charts.delete(_)}};function Ue(_){return _+.5|0}const Bi=(_,f,y)=>Math.max(Math.min(_,y),f);function Nn(_){return Bi(Ue(2.55*_),0,255)}function Pi(_){return Bi(Ue(255*_),0,255)}function Ci(_){return Bi(Ue(_/2.55)/100,0,1)}function Gi(_){return Bi(Ue(100*_),0,100)}const zi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Si=[..."0123456789ABCDEF"],fn=_=>Si[15&_],ei=_=>Si[(240&_)>>4]+Si[15&_],Zt=_=>(240&_)>>4==(15&_),Dn=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dr(_,f,y){const w=f*Math.min(y,1-y),A=(E,R=(E+_/30)%12)=>y-w*Math.max(Math.min(R-3,9-R,1),-1);return[A(0),A(8),A(4)]}function po(_,f,y){const w=(A,E=(A+_/60)%6)=>y-y*f*Math.max(Math.min(E,4-E,1),0);return[w(5),w(3),w(1)]}function Rr(_,f,y){const w=Dr(_,1,.5);let A;for(f+y>1&&(A=1/(f+y),f*=A,y*=A),A=0;A<3;A++)w[A]*=1-f-y,w[A]+=f;return w}function zn(_){const f=_.r/255,y=_.g/255,w=_.b/255,A=Math.max(f,y,w),E=Math.min(f,y,w),R=(A+E)/2;let j,$,K;return A!==E&&(K=A-E,$=R>.5?K/(2-A-E):K/(A+E),ut=y,ft=w,bt=K,j=(st=f)===(Mt=A)?(ut-ft)/bt+(ut<ft?6:0):ut===Mt?(ft-st)/bt+2:(st-ut)/bt+4,j=60*j+.5),[0|j,$||0,R];var st,ut,ft,bt,Mt}function ki(_,f,y,w){return(Array.isArray(f)?_(f[0],f[1],f[2]):_(f,y,w)).map(Pi)}function Fn(_,f,y){return ki(Dr,_,f,y)}function Lr(_){return(_%360+360)%360}const kt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Mn;const Rn=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,kn=_=>_<=.0031308?12.92*_:1.055*Math.pow(_,1/2.4)-.055,Fe=_=>_<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4);function Ui(_,f,y){if(_){let w=zn(_);w[f]=Math.max(0,Math.min(w[f]+w[f]*y,0===f?360:1)),w=Fn(w),_.r=w[0],_.g=w[1],_.b=w[2]}}function bi(_,f){return _&&Object.assign(f||{},_)}function Ln(_){var f={r:0,g:0,b:0,a:255};return Array.isArray(_)?_.length>=3&&(f={r:_[0],g:_[1],b:_[2],a:255},_.length>3&&(f.a=Pi(_[3]))):(f=bi(_,{r:0,g:0,b:0,a:1})).a=Pi(f.a),f}class Br{constructor(f){if(f instanceof Br)return f;const y=typeof f;let w;var A,E,R;"object"===y?w=Ln(f):"string"===y&&(R=(A=f).length,"#"===A[0]&&(4===R||5===R?E={r:255&17*zi[A[1]],g:255&17*zi[A[2]],b:255&17*zi[A[3]],a:5===R?17*zi[A[4]]:255}:7!==R&&9!==R||(E={r:zi[A[1]]<<4|zi[A[2]],g:zi[A[3]]<<4|zi[A[4]],b:zi[A[5]]<<4|zi[A[6]],a:9===R?zi[A[7]]<<4|zi[A[8]]:255})),w=E||function gr(_){Mn||(Mn=function(){const y={},w=Object.keys(yn),A=Object.keys(kt);let E,R,j,$,K;for(E=0;E<w.length;E++){for($=K=w[E],R=0;R<A.length;R++)j=A[R],K=K.replace(j,kt[j]);j=parseInt(yn[$],16),y[K]=[j>>16&255,j>>8&255,255&j]}return y}(),Mn.transparent=[0,0,0,0]);const f=Mn[_.toLowerCase()];return f&&{r:f[0],g:f[1],b:f[2],a:4===f.length?f[3]:255}}(f)||function aa(_){return"r"===_.charAt(0)?function(f){const y=Rn.exec(f);let w,A,E,R=255;if(y){if(y[7]!==w){const j=+y[7];R=y[8]?Nn(j):Bi(255*j,0,255)}return w=+y[1],A=+y[3],E=+y[5],w=255&(y[2]?Nn(w):Bi(w,0,255)),A=255&(y[4]?Nn(A):Bi(A,0,255)),E=255&(y[6]?Nn(E):Bi(E,0,255)),{r:w,g:A,b:E,a:R}}}(_):function St(_){const f=Dn.exec(_);let y,w=255;if(!f)return;f[5]!==y&&(w=f[6]?Nn(+f[5]):Pi(+f[5]));const A=Lr(+f[2]),E=+f[3]/100,R=+f[4]/100;return y="hwb"===f[1]?ki(Rr,A,E,R):"hsv"===f[1]?ki(po,A,E,R):Fn(A,E,R),{r:y[0],g:y[1],b:y[2],a:w}}(_)}(f)),this._rgb=w,this._valid=!!w}get valid(){return this._valid}get rgb(){var f=bi(this._rgb);return f&&(f.a=Ci(f.a)),f}set rgb(f){this._rgb=Ln(f)}rgbString(){return this._valid?(f=this._rgb)&&(f.a<255?`rgba(${f.r}, ${f.g}, ${f.b}, ${Ci(f.a)})`:`rgb(${f.r}, ${f.g}, ${f.b})`):void 0;var f}hexString(){return this._valid?function En(_){var y,f=Zt((y=_).r)&&Zt(y.g)&&Zt(y.b)&&Zt(y.a)?fn:ei;return _?"#"+f(_.r)+f(_.g)+f(_.b)+((y,w)=>y<255?w(y):"")(_.a,f):void 0}(this._rgb):void 0}hslString(){return this._valid?function(f){if(!f)return;const y=zn(f),w=y[0],A=Gi(y[1]),E=Gi(y[2]);return f.a<255?`hsla(${w}, ${A}%, ${E}%, ${Ci(f.a)})`:`hsl(${w}, ${A}%, ${E}%)`}(this._rgb):void 0}mix(f,y){if(f){const w=this.rgb,A=f.rgb;let E;const R=y===E?.5:y,j=2*R-1,$=w.a-A.a,K=((j*$==-1?j:(j+$)/(1+j*$))+1)/2;E=1-K,w.r=255&K*w.r+E*A.r+.5,w.g=255&K*w.g+E*A.g+.5,w.b=255&K*w.b+E*A.b+.5,w.a=R*w.a+(1-R)*A.a,this.rgb=w}return this}interpolate(f,y){return f&&(this._rgb=function(w,A,E){const R=Fe(Ci(w.r)),j=Fe(Ci(w.g)),$=Fe(Ci(w.b));return{r:Pi(kn(R+E*(Fe(Ci(A.r))-R))),g:Pi(kn(j+E*(Fe(Ci(A.g))-j))),b:Pi(kn($+E*(Fe(Ci(A.b))-$))),a:w.a+E*(A.a-w.a)}}(this._rgb,f._rgb,y)),this}clone(){return new Br(this.rgb)}alpha(f){return this._rgb.a=Pi(f),this}clearer(f){return this._rgb.a*=1-f,this}greyscale(){const f=this._rgb,y=Ue(.3*f.r+.59*f.g+.11*f.b);return f.r=f.g=f.b=y,this}opaquer(f){return this._rgb.a*=1+f,this}negate(){const f=this._rgb;return f.r=255-f.r,f.g=255-f.g,f.b=255-f.b,this}lighten(f){return Ui(this._rgb,2,f),this}darken(f){return Ui(this._rgb,2,-f),this}saturate(f){return Ui(this._rgb,1,f),this}desaturate(f){return Ui(this._rgb,1,-f),this}rotate(f){return w=f,(A=zn(y=this._rgb))[0]=Lr(A[0]+w),A=Fn(A),y.r=A[0],y.g=A[1],y.b=A[2],this;var y,w,A}}function ao(_){return new Br(_)}function br(_){if(_&&"object"==typeof _){const f=_.toString();return"[object CanvasPattern]"===f||"[object CanvasGradient]"===f}return!1}function pr(_){return br(_)?_:ao(_)}function _i(_){return br(_)?_:ao(_).saturate(.5).darken(.1).hexString()}function Ke(){}const mo=function(){let _=0;return function(){return _++}}();function Vn(_){return null==_}function Ei(_){if(Array.isArray&&Array.isArray(_))return!0;const f=Object.prototype.toString.call(_);return"[object"===f.slice(0,7)&&"Array]"===f.slice(-6)}function Zn(_){return null!==_&&"[object Object]"===Object.prototype.toString.call(_)}const Qi=_=>("number"==typeof _||_ instanceof Number)&&isFinite(+_);function Mr(_,f){return Qi(_)?_:f}function yi(_,f){return void 0===_?f:_}const To=(_,f)=>"string"==typeof _&&_.endsWith("%")?parseFloat(_)/100:_/f,pe=(_,f)=>"string"==typeof _&&_.endsWith("%")?parseFloat(_)/100*f:+_;function ee(_,f,y){if(_&&"function"==typeof _.call)return _.apply(y,f)}function _e(_,f,y,w){let A,E,R;if(Ei(_))if(E=_.length,w)for(A=E-1;A>=0;A--)f.call(y,_[A],A);else for(A=0;A<E;A++)f.call(y,_[A],A);else if(Zn(_))for(R=Object.keys(_),E=R.length,A=0;A<E;A++)f.call(y,_[R[A]],R[A])}function Qe(_,f){let y,w,A,E;if(!_||!f||_.length!==f.length)return!1;for(y=0,w=_.length;y<w;++y)if(A=_[y],E=f[y],A.datasetIndex!==E.datasetIndex||A.index!==E.index)return!1;return!0}function cn(_){if(Ei(_))return _.map(cn);if(Zn(_)){const f=Object.create(null),y=Object.keys(_),w=y.length;let A=0;for(;A<w;++A)f[y[A]]=cn(_[y[A]]);return f}return _}function Xe(_){return-1===["__proto__","prototype","constructor"].indexOf(_)}function jt(_,f,y,w){if(!Xe(_))return;const A=f[_],E=y[_];Zn(A)&&Zn(E)?je(A,E,w):f[_]=cn(E)}function je(_,f,y){const w=Ei(f)?f:[f],A=w.length;if(!Zn(_))return _;const E=(y=y||{}).merger||jt;for(let R=0;R<A;++R){if(!Zn(f=w[R]))continue;const j=Object.keys(f);for(let $=0,K=j.length;$<K;++$)E(j[$],_,f,y)}return _}function nn(_,f){return je(_,f,{merger:gn})}function gn(_,f,y){if(!Xe(_))return;const w=f[_],A=y[_];Zn(w)&&Zn(A)?nn(w,A):Object.prototype.hasOwnProperty.call(f,_)||(f[_]=cn(A))}function ui(_,f){const y=_.indexOf(".",f);return-1===y?_.length:y}function Jn(_,f){if(""===f)return _;let y=0,w=ui(f,y);for(;_&&w>y;)_=_[f.slice(y,w)],y=w+1,w=ui(f,y);return _}function sn(_){return _.charAt(0).toUpperCase()+_.slice(1)}const Fi=_=>void 0!==_,tr=_=>"function"==typeof _,so=(_,f)=>{if(_.size!==f.size)return!1;for(const y of _)if(!f.has(y))return!1;return!0};function hr(_){return"mouseup"===_.type||"click"===_.type||"contextmenu"===_.type}const mr=Object.create(null),vr=Object.create(null);function lr(_,f){if(!f)return _;const y=f.split(".");for(let w=0,A=y.length;w<A;++w){const E=y[w];_=_[E]||(_[E]=Object.create(null))}return _}function Qn(_,f,y){return"string"==typeof f?je(lr(_,f),y):je(lr(_,""),f)}var gi=new class{constructor(_){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=f=>f.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(f,y)=>_i(y.backgroundColor),this.hoverBorderColor=(f,y)=>_i(y.borderColor),this.hoverColor=(f,y)=>_i(y.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(_)}set(_,f){return Qn(this,_,f)}get(_){return lr(this,_)}describe(_,f){return Qn(vr,_,f)}override(_,f){return Qn(mr,_,f)}route(_,f,y,w){const A=lr(this,_),E=lr(this,y),R="_"+f;Object.defineProperties(A,{[R]:{value:A[f],writable:!0},[f]:{enumerable:!0,get(){const j=this[R],$=E[w];return Zn(j)?Object.assign({},$,j):yi(j,$)},set(j){this[R]=j}}})}}({_scriptable:_=>!_.startsWith("on"),_indexable:_=>"events"!==_,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function De(_,f,y){y=y||(R=>_[R]<f);let w,A=_.length-1,E=0;for(;A-E>1;)w=E+A>>1,y(w)?E=w:A=w;return{lo:E,hi:A}}const Wi=(_,f,y)=>De(_,y,w=>_[w][f]<y),$i=(_,f,y)=>De(_,y,w=>_[w][f]>=y);function _r(_,f,y){let w=0,A=_.length;for(;w<A&&_[w]<f;)w++;for(;A>w&&_[A-1]>y;)A--;return w>0||A<_.length?_.slice(w,A):_}const qr=["push","pop","shift","splice","unshift"];function yr(_,f){_._chartjs?_._chartjs.listeners.push(f):(Object.defineProperty(_,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[f]}}),qr.forEach(y=>{const w="_onData"+sn(y),A=_[y];Object.defineProperty(_,y,{configurable:!0,enumerable:!1,value(...E){const R=A.apply(this,E);return _._chartjs.listeners.forEach(j=>{"function"==typeof j[w]&&j[w](...E)}),R}})}))}function Mi(_,f){const y=_._chartjs;if(!y)return;const w=y.listeners,A=w.indexOf(f);-1!==A&&w.splice(A,1),w.length>0||(qr.forEach(E=>{delete _[E]}),delete _._chartjs)}function wi(_){const f=new Set;let y,w;for(y=0,w=_.length;y<w;++y)f.add(_[y]);return f.size===w?_:Array.from(f)}const Ai=Math.PI,ir=2*Ai,pa=ir+Ai,Ks=Number.POSITIVE_INFINITY,Js=Ai/180,Ar=Ai/2,lo=Ai/4,ma=2*Ai/3,Yr=Math.log10,kr=Math.sign;function ql(_){const f=Math.round(_);_=ka(_,f,_/1e3)?f:_;const y=Math.pow(10,Math.floor(Yr(_))),w=_/y;return(w<=1?1:w<=2?2:w<=5?5:10)*y}function uo(_){const f=[],y=Math.sqrt(_);let w;for(w=1;w<y;w++)_%w==0&&(f.push(w),f.push(_/w));return y===(0|y)&&f.push(y),f.sort((A,E)=>A-E).pop(),f}function Ko(_){return!isNaN(parseFloat(_))&&isFinite(_)}function ka(_,f,y){return Math.abs(_-f)<y}function za(_,f){const y=Math.round(_);return y-f<=_&&y+f>=_}function ur(_,f,y){let w,A,E;for(w=0,A=_.length;w<A;w++)E=_[w][y],isNaN(E)||(f.min=Math.min(f.min,E),f.max=Math.max(f.max,E))}function zr(_){return _*(Ai/180)}function vo(_){return _*(180/Ai)}function Za(_){if(!Qi(_))return;let f=1,y=0;for(;Math.round(_*f)/f!==_;)f*=10,y++;return y}function Ka(_,f){const y=f.x-_.x,w=f.y-_.y,A=Math.sqrt(y*y+w*w);let E=Math.atan2(w,y);return E<-.5*Ai&&(E+=ir),{angle:E,distance:A}}function Qs(_,f){return Math.sqrt(Math.pow(f.x-_.x,2)+Math.pow(f.y-_.y,2))}function Ja(_,f){return(_-f+pa)%ir-Ai}function yo(_){return(_%ir+ir)%ir}function ks(_,f,y,w){const A=yo(_),E=yo(f),R=yo(y),j=yo(E-A),$=yo(R-A),K=yo(A-E),st=yo(A-R);return A===E||A===R||w&&E===R||j>$&&K<st}function co(_,f,y){return Math.max(f,Math.min(y,_))}function xo(_){return co(_,-32768,32767)}function cs(_,f,y,w=1e-6){return _>=Math.min(f,y)-w&&_<=Math.max(f,y)+w}function bu(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Ia(_){let f=_.parentNode;return f&&"[object ShadowRoot]"===f.toString()&&(f=f.host),f}function Go(_,f,y){let w;return"string"==typeof _?(w=parseInt(_,10),-1!==_.indexOf("%")&&(w=w/100*f.parentNode[y])):w=_,w}const yt=_=>window.getComputedStyle(_,null);function Ft(_,f){return yt(_).getPropertyValue(f)}const oe=["top","right","bottom","left"];function Kt(_,f,y){const w={};y=y?"-"+y:"";for(let A=0;A<4;A++){const E=oe[A];w[E]=parseFloat(_[f+"-"+E+y])||0}return w.width=w.left+w.right,w.height=w.top+w.bottom,w}function fe(_,f){if("native"in _)return _;const{canvas:y,currentDevicePixelRatio:w}=f,A=yt(y),E="border-box"===A.boxSizing,R=Kt(A,"padding"),j=Kt(A,"border","width"),{x:$,y:K,box:st}=function(It,Nt){const Gt=It.touches,ne=Gt&&Gt.length?Gt[0]:It,{offsetX:de,offsetY:ye}=ne;let qe,$e,wn=!1;if(un=It.target,!(de>0||ye>0)||un&&un.shadowRoot){const rn=Nt.getBoundingClientRect();qe=ne.clientX-rn.left,$e=ne.clientY-rn.top,wn=!0}else qe=de,$e=ye;var un;return{x:qe,y:$e,box:wn}}(_,y),ut=R.left+(st&&j.left),ft=R.top+(st&&j.top);let{width:bt,height:Mt}=f;return E&&(bt-=R.width+j.width,Mt-=R.height+j.height),{x:Math.round(($-ut)/bt*y.width/w),y:Math.round((K-ft)/Mt*y.height/w)}}const he=_=>Math.round(10*_)/10;function In(_,f,y,w){const A=yt(_),E=Kt(A,"margin"),R=Go(A.maxWidth,_,"clientWidth")||Ks,j=Go(A.maxHeight,_,"clientHeight")||Ks,$=function(ut,ft,bt){let Mt,It;if(void 0===ft||void 0===bt){const Nt=Ia(ut);if(Nt){const Gt=Nt.getBoundingClientRect(),ne=yt(Nt),de=Kt(ne,"border","width"),ye=Kt(ne,"padding");ft=Gt.width-ye.width-de.width,bt=Gt.height-ye.height-de.height,Mt=Go(ne.maxWidth,Nt,"clientWidth"),It=Go(ne.maxHeight,Nt,"clientHeight")}else ft=ut.clientWidth,bt=ut.clientHeight}return{width:ft,height:bt,maxWidth:Mt||Ks,maxHeight:It||Ks}}(_,f,y);let{width:K,height:st}=$;if("content-box"===A.boxSizing){const ut=Kt(A,"border","width"),ft=Kt(A,"padding");K-=ft.width+ut.width,st-=ft.height+ut.height}return K=Math.max(0,K-E.width),st=Math.max(0,w?Math.floor(K/w):st-E.height),K=he(Math.min(K,R,$.maxWidth)),st=he(Math.min(st,j,$.maxHeight)),K&&!st&&(st=he(K/2)),{width:K,height:st}}function Pe(_,f,y){const w=f||1,A=Math.floor(_.height*w),E=Math.floor(_.width*w);_.height=A/w,_.width=E/w;const R=_.canvas;return R.style&&(y||!R.style.height&&!R.style.width)&&(R.style.height=`${_.height}px`,R.style.width=`${_.width}px`),(_.currentDevicePixelRatio!==w||R.height!==A||R.width!==E)&&(_.currentDevicePixelRatio=w,R.height=A,R.width=E,_.ctx.setTransform(w,0,0,w,0,0),!0)}const hn=function(){let _=!1;try{const f={get passive(){return _=!0,!1}};window.addEventListener("test",null,f),window.removeEventListener("test",null,f)}catch(f){}return _}();function vn(_,f){const y=Ft(_,f),w=y&&y.match(/^(\d+)(\.\d+)?px$/);return w?+w[1]:void 0}function pn(_){return!_||Vn(_.size)||Vn(_.family)?null:(_.style?_.style+" ":"")+(_.weight?_.weight+" ":"")+_.size+"px "+_.family}function Le(_,f,y,w,A){let E=f[A];return E||(E=f[A]=_.measureText(A).width,y.push(A)),E>w&&(w=E),w}function xn(_,f,y,w){let A=(w=w||{}).data=w.data||{},E=w.garbageCollect=w.garbageCollect||[];w.font!==f&&(A=w.data={},E=w.garbageCollect=[],w.font=f),_.save(),_.font=f;let R=0;const j=y.length;let $,K,st,ut,ft;for($=0;$<j;$++)if(ut=y[$],null!=ut&&!0!==Ei(ut))R=Le(_,A,E,R,ut);else if(Ei(ut))for(K=0,st=ut.length;K<st;K++)ft=ut[K],null==ft||Ei(ft)||(R=Le(_,A,E,R,ft));_.restore();const bt=E.length/2;if(bt>y.length){for($=0;$<bt;$++)delete A[E[$]];E.splice(0,bt)}return R}function en(_,f,y){const w=_.currentDevicePixelRatio,A=0!==y?Math.max(y/2,.5):0;return Math.round((f-A)*w)/w+A}function He(_,f){(f=f||_.getContext("2d")).save(),f.resetTransform(),f.clearRect(0,0,_.width,_.height),f.restore()}function Un(_,f,y,w){let A,E,R,j,$;const K=f.pointStyle,st=f.rotation,ut=f.radius;let ft=(st||0)*Js;if(K&&"object"==typeof K&&(A=K.toString(),"[object HTMLImageElement]"===A||"[object HTMLCanvasElement]"===A))return _.save(),_.translate(y,w),_.rotate(ft),_.drawImage(K,-K.width/2,-K.height/2,K.width,K.height),void _.restore();if(!(isNaN(ut)||ut<=0)){switch(_.beginPath(),K){default:_.arc(y,w,ut,0,ir),_.closePath();break;case"triangle":_.moveTo(y+Math.sin(ft)*ut,w-Math.cos(ft)*ut),ft+=ma,_.lineTo(y+Math.sin(ft)*ut,w-Math.cos(ft)*ut),ft+=ma,_.lineTo(y+Math.sin(ft)*ut,w-Math.cos(ft)*ut),_.closePath();break;case"rectRounded":$=.516*ut,j=ut-$,E=Math.cos(ft+lo)*j,R=Math.sin(ft+lo)*j,_.arc(y-E,w-R,$,ft-Ai,ft-Ar),_.arc(y+R,w-E,$,ft-Ar,ft),_.arc(y+E,w+R,$,ft,ft+Ar),_.arc(y-R,w+E,$,ft+Ar,ft+Ai),_.closePath();break;case"rect":if(!st){j=Math.SQRT1_2*ut,_.rect(y-j,w-j,2*j,2*j);break}ft+=lo;case"rectRot":E=Math.cos(ft)*ut,R=Math.sin(ft)*ut,_.moveTo(y-E,w-R),_.lineTo(y+R,w-E),_.lineTo(y+E,w+R),_.lineTo(y-R,w+E),_.closePath();break;case"crossRot":ft+=lo;case"cross":E=Math.cos(ft)*ut,R=Math.sin(ft)*ut,_.moveTo(y-E,w-R),_.lineTo(y+E,w+R),_.moveTo(y+R,w-E),_.lineTo(y-R,w+E);break;case"star":E=Math.cos(ft)*ut,R=Math.sin(ft)*ut,_.moveTo(y-E,w-R),_.lineTo(y+E,w+R),_.moveTo(y+R,w-E),_.lineTo(y-R,w+E),ft+=lo,E=Math.cos(ft)*ut,R=Math.sin(ft)*ut,_.moveTo(y-E,w-R),_.lineTo(y+E,w+R),_.moveTo(y+R,w-E),_.lineTo(y-R,w+E);break;case"line":E=Math.cos(ft)*ut,R=Math.sin(ft)*ut,_.moveTo(y-E,w-R),_.lineTo(y+E,w+R);break;case"dash":_.moveTo(y,w),_.lineTo(y+Math.cos(ft)*ut,w+Math.sin(ft)*ut)}_.fill(),f.borderWidth>0&&_.stroke()}}function li(_,f,y){return y=y||.5,!f||_&&_.x>f.left-y&&_.x<f.right+y&&_.y>f.top-y&&_.y<f.bottom+y}function Ii(_,f){_.save(),_.beginPath(),_.rect(f.left,f.top,f.right-f.left,f.bottom-f.top),_.clip()}function ri(_){_.restore()}function er(_,f,y,w,A){if(!f)return _.lineTo(y.x,y.y);if("middle"===A){const E=(f.x+y.x)/2;_.lineTo(E,f.y),_.lineTo(E,y.y)}else"after"===A!=!!w?_.lineTo(f.x,y.y):_.lineTo(y.x,f.y);_.lineTo(y.x,y.y)}function Hi(_,f,y,w){if(!f)return _.lineTo(y.x,y.y);_.bezierCurveTo(w?f.cp1x:f.cp2x,w?f.cp1y:f.cp2y,w?y.cp2x:y.cp1x,w?y.cp2y:y.cp1y,y.x,y.y)}function bo(_,f,y,w,A,E={}){const R=Ei(f)?f:[f],j=E.strokeWidth>0&&""!==E.strokeColor;let $,K;for(_.save(),_.font=A.string,st=_,(ut=E).translation&&st.translate(ut.translation[0],ut.translation[1]),Vn(ut.rotation)||st.rotate(ut.rotation),ut.color&&(st.fillStyle=ut.color),ut.textAlign&&(st.textAlign=ut.textAlign),ut.textBaseline&&(st.textBaseline=ut.textBaseline),$=0;$<R.length;++$)K=R[$],j&&(E.strokeColor&&(_.strokeStyle=E.strokeColor),Vn(E.strokeWidth)||(_.lineWidth=E.strokeWidth),_.strokeText(K,y,w,E.maxWidth)),_.fillText(K,y,w,E.maxWidth),Qr(_,y,w,K,E),w+=A.lineHeight;var st,ut;_.restore()}function Qr(_,f,y,w,A){if(A.strikethrough||A.underline){const E=_.measureText(w),R=f-E.actualBoundingBoxLeft,j=f+E.actualBoundingBoxRight,$=y-E.actualBoundingBoxAscent,K=y+E.actualBoundingBoxDescent,st=A.strikethrough?($+K)/2:K;_.strokeStyle=_.fillStyle,_.beginPath(),_.lineWidth=A.decorationWidth||2,_.moveTo(R,st),_.lineTo(j,st),_.stroke()}}function Xr(_,f){const{x:y,y:w,w:A,h:E,radius:R}=f;_.arc(y+R.topLeft,w+R.topLeft,R.topLeft,-Ar,Ai,!0),_.lineTo(y,w+E-R.bottomLeft),_.arc(y+R.bottomLeft,w+E-R.bottomLeft,R.bottomLeft,Ai,Ar,!0),_.lineTo(y+A-R.bottomRight,w+E),_.arc(y+A-R.bottomRight,w+E-R.bottomRight,R.bottomRight,Ar,0,!0),_.lineTo(y+A,w+R.topRight),_.arc(y+A-R.topRight,w+R.topRight,R.topRight,0,-Ar,!0),_.lineTo(y+R.topLeft,w)}function Is(_,f=[""],y=_,w,A=(()=>_[0])){Fi(w)||(w=el("_fallback",_));const E={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:_,_rootScopes:y,_fallback:w,_getTarget:A,override:R=>Is([R,..._],f,y,w)};return new Proxy(E,{deleteProperty:(R,j)=>(delete R[j],delete R._keys,delete _[0][j],!0),get:(R,j)=>_u(R,j,()=>function($,K,st,ut){let ft;for(const bt of K)if(ft=el(Yl(bt,$),st),Fi(ft))return tl($,ft)?Tl(st,ut,$,ft):ft}(j,f,_,R)),getOwnPropertyDescriptor:(R,j)=>Reflect.getOwnPropertyDescriptor(R._scopes[0],j),getPrototypeOf:()=>Reflect.getPrototypeOf(_[0]),has:(R,j)=>sa(R).includes(j),ownKeys:R=>sa(R),set(R,j,$){const K=R._storage||(R._storage=A());return R[j]=K[j]=$,delete R._keys,!0}})}function _o(_,f,y,w){const A={_cacheable:!1,_proxy:_,_context:f,_subProxy:y,_stack:new Set,_descriptors:fr(_,w),setContext:E=>_o(_,E,y,w),override:E=>_o(_.override(E),f,y,w)};return new Proxy(A,{deleteProperty:(E,R)=>(delete E[R],delete _[R],!0),get:(E,R,j)=>_u(E,R,()=>function($,K,st){const{_proxy:ut,_context:ft,_subProxy:bt,_descriptors:Mt}=$;let It=ut[K];return tr(It)&&Mt.isScriptable(K)&&(It=function(Nt,Gt,ne,de){const{_proxy:ye,_context:qe,_subProxy:$e,_stack:wn}=ne;if(wn.has(Nt))throw new Error("Recursion detected: "+Array.from(wn).join("->")+"->"+Nt);return wn.add(Nt),Gt=Gt(qe,$e||de),wn.delete(Nt),tl(Nt,Gt)&&(Gt=Tl(ye._scopes,ye,Nt,Gt)),Gt}(K,It,$,st)),Ei(It)&&It.length&&(It=function(Nt,Gt,ne,de){const{_proxy:ye,_context:qe,_subProxy:$e,_descriptors:wn}=ne;if(Fi(qe.index)&&de(Nt))Gt=Gt[qe.index%Gt.length];else if(Zn(Gt[0])){const rn=Gt,$n=ye._scopes.filter(un=>un!==rn);Gt=[];for(const un of rn){const ni=Tl($n,ye,Nt,un);Gt.push(_o(ni,qe,$e&&$e[Nt],wn))}}return Gt}(K,It,$,Mt.isIndexable)),tl(K,It)&&(It=_o(It,ft,bt&&bt[K],Mt)),It}(E,R,j)),getOwnPropertyDescriptor:(E,R)=>E._descriptors.allKeys?Reflect.has(_,R)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(_,R),getPrototypeOf:()=>Reflect.getPrototypeOf(_),has:(E,R)=>Reflect.has(_,R),ownKeys:()=>Reflect.ownKeys(_),set:(E,R,j)=>(_[R]=j,delete E[R],!0)})}function fr(_,f={scriptable:!0,indexable:!0}){const{_scriptable:y=f.scriptable,_indexable:w=f.indexable,_allKeys:A=f.allKeys}=_;return{allKeys:A,scriptable:y,indexable:w,isScriptable:tr(y)?y:()=>y,isIndexable:tr(w)?w:()=>w}}const Yl=(_,f)=>_?_+sn(f):f,tl=(_,f)=>Zn(f)&&"adapters"!==_&&(null===Object.getPrototypeOf(f)||f.constructor===Object);function _u(_,f,y){if(Object.prototype.hasOwnProperty.call(_,f))return _[f];const w=y();return _[f]=w,w}function ds(_,f,y){return tr(_)?_(f,y):_}const cr=(_,f)=>!0===_?f:"string"==typeof _?Jn(f,_):void 0;function wu(_,f,y,w,A){for(const E of f){const R=cr(y,E);if(R){_.add(R);const j=ds(R._fallback,y,A);if(Fi(j)&&j!==y&&j!==w)return j}else if(!1===R&&Fi(w)&&y!==w)return null}return!1}function Tl(_,f,y,w){const A=f._rootScopes,E=ds(f._fallback,y,w),R=[..._,...A],j=new Set;j.add(w);let $=ic(j,R,y,E||y,w);return null!==$&&(!Fi(E)||E===y||($=ic(j,R,E,$,w),null!==$))&&Is(Array.from(j),[""],A,E,()=>function(K,st,ut){const ft=K._getTarget();st in ft||(ft[st]={});const bt=ft[st];return Ei(bt)&&Zn(ut)?ut:bt}(f,y,w))}function ic(_,f,y,w,A){for(;y;)y=wu(_,f,y,w,A);return y}function el(_,f){for(const y of f){if(!y)continue;const w=y[_];if(Fi(w))return w}}function sa(_){let f=_._keys;return f||(f=_._keys=function(y){const w=new Set;for(const A of y)for(const E of Object.keys(A).filter(R=>!R.startsWith("_")))w.add(E);return Array.from(w)}(_._scopes)),f}function nl(_,f,y,w){const{iScale:A}=_,{key:E="r"}=this._parsing,R=new Array(w);let j,$,K,st;for(j=0,$=w;j<$;++j)K=j+y,st=f[K],R[j]={r:A.parse(Jn(st,E),K)};return R}const wr=Number.EPSILON||1e-14,Fr=(_,f)=>f<_.length&&!_[f].skip&&_[f],Su=_=>"x"===_?"y":"x";function Cu(_,f,y,w){const A=_.skip?f:_,E=f,R=y.skip?f:y,j=Qs(E,A),$=Qs(R,E);let K=j/(j+$),st=$/(j+$);K=isNaN(K)?0:K,st=isNaN(st)?0:st;const ut=w*K,ft=w*st;return{previous:{x:E.x-ut*(R.x-A.x),y:E.y-ut*(R.y-A.y)},next:{x:E.x+ft*(R.x-A.x),y:E.y+ft*(R.y-A.y)}}}function il(_,f="x"){const y=Su(f),w=_.length,A=Array(w).fill(0),E=Array(w);let R,j,$,K=Fr(_,0);for(R=0;R<w;++R)if(j=$,$=K,K=Fr(_,R+1),$){if(K){const st=K[f]-$[f];A[R]=0!==st?(K[y]-$[y])/st:0}E[R]=j?K?kr(A[R-1])!==kr(A[R])?0:(A[R-1]+A[R])/2:A[R-1]:A[R]}(function(st,ut,ft){const bt=st.length;let Mt,It,Nt,Gt,ne,de=Fr(st,0);for(let ye=0;ye<bt-1;++ye)ne=de,de=Fr(st,ye+1),ne&&de&&(ka(ut[ye],0,wr)?ft[ye]=ft[ye+1]=0:(Mt=ft[ye]/ut[ye],It=ft[ye+1]/ut[ye],Gt=Math.pow(Mt,2)+Math.pow(It,2),Gt<=9||(Nt=3/Math.sqrt(Gt),ft[ye]=Mt*Nt*ut[ye],ft[ye+1]=It*Nt*ut[ye])))})(_,A,E),function(st,ut,ft="x"){const bt=Su(ft),Mt=st.length;let It,Nt,Gt,ne=Fr(st,0);for(let de=0;de<Mt;++de){if(Nt=Gt,Gt=ne,ne=Fr(st,de+1),!Gt)continue;const ye=Gt[ft],qe=Gt[bt];Nt&&(It=(ye-Nt[ft])/3,Gt[`cp1${ft}`]=ye-It,Gt[`cp1${bt}`]=qe-It*ut[de]),ne&&(It=(ne[ft]-ye)/3,Gt[`cp2${ft}`]=ye+It,Gt[`cp2${bt}`]=qe+It*ut[de])}}(_,E,f)}function ge(_,f,y){return Math.max(Math.min(_,y),f)}function Ps(_,f,y,w,A){let E,R,j,$;if(f.spanGaps&&(_=_.filter(K=>!K.skip)),"monotone"===f.cubicInterpolationMode)il(_,A);else{let K=w?_[_.length-1]:_[0];for(E=0,R=_.length;E<R;++E)j=_[E],$=Cu(K,j,_[Math.min(E+1,R-(w?0:1))%R],f.tension),j.cp1x=$.previous.x,j.cp1y=$.previous.y,j.cp2x=$.next.x,j.cp2y=$.next.y,K=j}f.capBezierPoints&&function(K,st){let ut,ft,bt,Mt,It,Nt=li(K[0],st);for(ut=0,ft=K.length;ut<ft;++ut)It=Mt,Mt=Nt,Nt=ut<ft-1&&li(K[ut+1],st),Mt&&(bt=K[ut],It&&(bt.cp1x=ge(bt.cp1x,st.left,st.right),bt.cp1y=ge(bt.cp1y,st.top,st.bottom)),Nt&&(bt.cp2x=ge(bt.cp2x,st.left,st.right),bt.cp2y=ge(bt.cp2y,st.top,st.bottom)))}(_,y)}const Fa=_=>0===_||1===_,Es=(_,f,y)=>-Math.pow(2,10*(_-=1))*Math.sin((_-f)*ir/y),Xl=(_,f,y)=>Math.pow(2,-10*_)*Math.sin((_-f)*ir/y)+1,Ir={linear:_=>_,easeInQuad:_=>_*_,easeOutQuad:_=>-_*(_-2),easeInOutQuad:_=>(_/=.5)<1?.5*_*_:-.5*(--_*(_-2)-1),easeInCubic:_=>_*_*_,easeOutCubic:_=>(_-=1)*_*_+1,easeInOutCubic:_=>(_/=.5)<1?.5*_*_*_:.5*((_-=2)*_*_+2),easeInQuart:_=>_*_*_*_,easeOutQuart:_=>-((_-=1)*_*_*_-1),easeInOutQuart:_=>(_/=.5)<1?.5*_*_*_*_:-.5*((_-=2)*_*_*_-2),easeInQuint:_=>_*_*_*_*_,easeOutQuint:_=>(_-=1)*_*_*_*_+1,easeInOutQuint:_=>(_/=.5)<1?.5*_*_*_*_*_:.5*((_-=2)*_*_*_*_+2),easeInSine:_=>1-Math.cos(_*Ar),easeOutSine:_=>Math.sin(_*Ar),easeInOutSine:_=>-.5*(Math.cos(Ai*_)-1),easeInExpo:_=>0===_?0:Math.pow(2,10*(_-1)),easeOutExpo:_=>1===_?1:1-Math.pow(2,-10*_),easeInOutExpo:_=>Fa(_)?_:_<.5?.5*Math.pow(2,10*(2*_-1)):.5*(2-Math.pow(2,-10*(2*_-1))),easeInCirc:_=>_>=1?_:-(Math.sqrt(1-_*_)-1),easeOutCirc:_=>Math.sqrt(1-(_-=1)*_),easeInOutCirc:_=>(_/=.5)<1?-.5*(Math.sqrt(1-_*_)-1):.5*(Math.sqrt(1-(_-=2)*_)+1),easeInElastic:_=>Fa(_)?_:Es(_,.075,.3),easeOutElastic:_=>Fa(_)?_:Xl(_,.075,.3),easeInOutElastic:_=>Fa(_)?_:_<.5?.5*Es(2*_,.1125,.45):.5+.5*Xl(2*_-1,.1125,.45),easeInBack:_=>_*_*(2.70158*_-1.70158),easeOutBack:_=>(_-=1)*_*(2.70158*_+1.70158)+1,easeInOutBack(_){let f=1.70158;return(_/=.5)<1?_*_*((1+(f*=1.525))*_-f)*.5:.5*((_-=2)*_*((1+(f*=1.525))*_+f)+2)},easeInBounce:_=>1-Ir.easeOutBounce(1-_),easeOutBounce:_=>_<1/2.75?7.5625*_*_:_<2/2.75?7.5625*(_-=1.5/2.75)*_+.75:_<2.5/2.75?7.5625*(_-=2.25/2.75)*_+.9375:7.5625*(_-=2.625/2.75)*_+.984375,easeInOutBounce:_=>_<.5?.5*Ir.easeInBounce(2*_):.5*Ir.easeOutBounce(2*_-1)+.5};function Dl(_,f,y,w){return{x:_.x+y*(f.x-_.x),y:_.y+y*(f.y-_.y)}}function rl(_,f,y,w){return{x:_.x+y*(f.x-_.x),y:"middle"===w?y<.5?_.y:f.y:"after"===w?y<1?_.y:f.y:y>0?f.y:_.y}}function Mu(_,f,y,w){const A={x:_.cp2x,y:_.cp2y},E={x:f.cp1x,y:f.cp1y},R=Dl(_,A,y),j=Dl(A,E,y),$=Dl(E,f,y),K=Dl(R,j,y),st=Dl(j,$,y);return Dl(K,st,y)}const id=new Map;function hs(_,f,y){return function(w,A){A=A||{};const E=w+JSON.stringify(A);let R=id.get(E);return R||(R=new Intl.NumberFormat(w,A),id.set(E,R)),R}(f,y).format(_)}const bh=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Od=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function wo(_,f){const y=(""+_).match(bh);if(!y||"normal"===y[1])return 1.2*f;switch(_=+y[2],y[3]){case"px":return _;case"%":_/=100}return f*_}function fs(_,f){const y={},w=Zn(f),A=w?Object.keys(f):f,E=Zn(_)?w?R=>yi(_[R],_[f[R]]):R=>_[R]:()=>_;for(const R of A)y[R]=+E(R)||0;return y}function Bd(_){return fs(_,{top:"y",right:"x",bottom:"y",left:"x"})}function gs(_){return fs(_,["topLeft","topRight","bottomLeft","bottomRight"])}function Do(_){const f=Bd(_);return f.width=f.left+f.right,f.height=f.top+f.bottom,f}function ji(_,f){let y=yi((_=_||{}).size,(f=f||gi.font).size);"string"==typeof y&&(y=parseInt(y,10));let w=yi(_.style,f.style);w&&!(""+w).match(Od)&&(console.warn('Invalid font style specified: "'+w+'"'),w="");const A={family:yi(_.family,f.family),lineHeight:wo(yi(_.lineHeight,f.lineHeight),y),size:y,style:w,weight:yi(_.weight,f.weight),string:""};return A.string=pn(A),A}function Bn(_,f,y,w){let A,E,R,j=!0;for(A=0,E=_.length;A<E;++A)if(R=_[A],void 0!==R&&(void 0!==f&&"function"==typeof R&&(R=R(f),j=!1),void 0!==y&&Ei(R)&&(R=R[y%R.length],j=!1),void 0!==R))return w&&!j&&(w.cacheable=!1),R}function Tu(_,f,y){const{min:w,max:A}=_,E=pe(f,(A-w)/2),R=(j,$)=>y&&0===j?0:j+$;return{min:R(w,-Math.abs(E)),max:R(A,E)}}function Ns(_,f){return Object.assign(Object.create(_),f)}function Ao(_,f,y){return _?(w=f,A=y,{x:E=>w+w+A-E,setWidth(E){A=E},textAlign:E=>"center"===E?E:"right"===E?"left":"right",xPlus:(E,R)=>E-R,leftForLtr:(E,R)=>E-R}):{x:w=>w,setWidth(w){},textAlign:w=>w,xPlus:(w,A)=>w+A,leftForLtr:(w,A)=>w};var w,A}function Rs(_,f){let y,w;"ltr"!==f&&"rtl"!==f||(y=_.canvas.style,w=[y.getPropertyValue("direction"),y.getPropertyPriority("direction")],y.setProperty("direction",f,"important"),_.prevTextDirection=w)}function rc(_,f){void 0!==f&&(delete _.prevTextDirection,_.canvas.style.setProperty("direction",f[0],f[1]))}function ps(_){return"angle"===_?{between:ks,compare:Ja,normalize:yo}:{between:cs,compare:(f,y)=>f-y,normalize:f=>f}}function Ha({start:_,end:f,count:y,loop:w,style:A}){return{start:_%y,end:f%y,loop:w&&(f-_+1)%y==0,style:A}}function Qa(_,f,y){if(!y)return[_];const{property:w,start:A,end:E}=y,R=f.length,{compare:j,between:$,normalize:K}=ps(w),{start:st,end:ut,loop:ft,style:bt}=function($e,wn,rn){const{property:$n,start:un,end:ni}=rn,{between:Kn,normalize:oi}=ps($n),Tn=wn.length;let qn,nr,{start:rr,end:Kr,loop:$o}=$e;if($o){for(rr+=Tn,Kr+=Tn,qn=0,nr=Tn;qn<nr&&Kn(oi(wn[rr%Tn][$n]),un,ni);++qn)rr--,Kr--;rr%=Tn,Kr%=Tn}return Kr<rr&&(Kr+=Tn),{start:rr,end:Kr,loop:$o,style:$e.style}}(_,f,y),Mt=[];let It,Nt,Gt,ne=!1,de=null;for(let $e=st,wn=st;$e<=ut;++$e)Nt=f[$e%R],Nt.skip||(It=K(Nt[w]),It!==Gt&&(ne=$(It,A,E),null===de&&(ne||$(A,Gt,It)&&0!==j(A,Gt))&&(de=0===j(It,A)?$e:wn),null!==de&&(!ne||0===j(E,It)||$(E,Gt,It))&&(Mt.push(Ha({start:de,end:$e,loop:ft,count:R,style:bt})),de=null),wn=$e,Gt=It));return null!==de&&Mt.push(Ha({start:de,end:ut,loop:ft,count:R,style:bt})),Mt}function Oo(_,f){const y=[],w=_.segments;for(let A=0;A<w.length;A++){const E=Qa(w[A],_.points,f);E.length&&y.push(...E)}return y}function ts(_,f){const y=_.points,w=_.options.spanGaps,A=y.length;if(!A)return[];const E=!!_._loop,{start:R,end:j}=function($,K,st,ut){let ft=0,bt=K-1;if(st&&!ut)for(;ft<K&&!$[ft].skip;)ft++;for(;ft<K&&$[ft].skip;)ft++;for(ft%=K,st&&(bt+=ft);bt>ft&&$[bt%K].skip;)bt--;return bt%=K,{start:ft,end:bt}}(y,A,E,w);return function Ls(_,f,y,w){return w&&w.setContext&&y?function(A,E,R,j){const $=A._chart.getContext(),K=$l(A.options),{_datasetIndex:st,options:{spanGaps:ut}}=A,ft=R.length,bt=[];let Mt=K,It=E[0].start,Nt=It;function Gt(ne,de,ye,qe){const $e=ut?-1:1;if(ne!==de){for(ne+=ft;R[ne%ft].skip;)ne-=$e;for(;R[de%ft].skip;)de+=$e;ne%ft!=de%ft&&(bt.push({start:ne%ft,end:de%ft,loop:ye,style:qe}),Mt=qe,It=de%ft)}}for(const ne of E){It=ut?It:ne.start;let de,ye=R[It%ft];for(Nt=It+1;Nt<=ne.end;Nt++){const qe=R[Nt%ft];de=$l(j.setContext(Ns($,{type:"segment",p0:ye,p1:qe,p0DataIndex:(Nt-1)%ft,p1DataIndex:Nt%ft,datasetIndex:st}))),Zl(de,Mt)&&Gt(It,Nt-1,ne.loop,Mt),ye=qe,Mt=de}It<Nt-1&&Gt(It,Nt-1,ne.loop,Mt)}return bt}(_,f,y,w):f}(_,!0===w?[{start:R,end:j,loop:E}]:function($,K,st,ut){const ft=$.length,bt=[];let Mt,It=K,Nt=$[K];for(Mt=K+1;Mt<=st;++Mt){const Gt=$[Mt%ft];Gt.skip||Gt.stop?Nt.skip||(bt.push({start:K%ft,end:(Mt-1)%ft,loop:ut=!1}),K=It=Gt.stop?Mt:null):(It=Mt,Nt.skip&&(K=Mt)),Nt=Gt}return null!==It&&bt.push({start:K%ft,end:It%ft,loop:ut}),bt}(y,R,j<R?j+A:j,!!_._fullLoop&&0===R&&j===A-1),y,f)}function $l(_){return{backgroundColor:_.backgroundColor,borderCapStyle:_.borderCapStyle,borderDash:_.borderDash,borderDashOffset:_.borderDashOffset,borderJoinStyle:_.borderJoinStyle,borderWidth:_.borderWidth,borderColor:_.borderColor}}function Zl(_,f){return f&&JSON.stringify(_)!==JSON.stringify(f)}var Kl=Object.freeze({__proto__:null,easingEffects:Ir,isPatternOrGradient:br,color:pr,getHoverColor:_i,noop:Ke,uid:mo,isNullOrUndef:Vn,isArray:Ei,isObject:Zn,isFinite:Qi,finiteOrDefault:Mr,valueOrDefault:yi,toPercentage:To,toDimension:pe,callback:ee,each:_e,_elementsEqual:Qe,clone:cn,_merger:jt,merge:je,mergeIf:nn,_mergerIf:gn,_deprecated:function(_,f,y,w){void 0!==f&&console.warn(_+': "'+y+'" is deprecated. Please use "'+w+'" instead')},resolveObjectKey:Jn,_capitalize:sn,defined:Fi,isFunction:tr,setsEqual:so,_isClickEvent:hr,toFontString:pn,_measureText:Le,_longestText:xn,_alignPixel:en,clearCanvas:He,drawPoint:Un,_isPointInArea:li,clipArea:Ii,unclipArea:ri,_steppedLineTo:er,_bezierCurveTo:Hi,renderText:bo,addRoundedRectPath:Xr,_lookup:De,_lookupByKey:Wi,_rlookupByKey:$i,_filterBetween:_r,listenArrayEvents:yr,unlistenArrayEvents:Mi,_arrayUnique:wi,_createResolver:Is,_attachContext:_o,_descriptors:fr,_parseObjectDataRadialScale:nl,splineCurve:Cu,splineCurveMonotone:il,_updateBezierControlPoints:Ps,_isDomSupported:bu,_getParentNode:Ia,getStyle:Ft,getRelativePosition:fe,getMaximumSize:In,retinaScale:Pe,supportsEventListenerOptions:hn,readUsedSize:vn,fontString:function(_,f,y){return f+" "+_+"px "+y},requestAnimFrame:Rt,throttled:pi,debounce:bn,_toLeftRightCenter:Oe,_alignStartEnd:se,_textX:Ve,_pointInLine:Dl,_steppedInterpolation:rl,_bezierInterpolation:Mu,formatNumber:hs,toLineHeight:wo,_readValueToProps:fs,toTRBL:Bd,toTRBLCorners:gs,toPadding:Do,toFont:ji,resolve:Bn,_addGrace:Tu,createContext:Ns,PI:Ai,TAU:ir,PITAU:pa,INFINITY:Ks,RAD_PER_DEG:Js,HALF_PI:Ar,QUARTER_PI:lo,TWO_THIRDS_PI:ma,log10:Yr,sign:kr,niceNum:ql,_factorize:uo,isNumber:Ko,almostEquals:ka,almostWhole:za,_setMinAndMaxByKey:ur,toRadians:zr,toDegrees:vo,_decimalPlaces:Za,getAngleFromPoint:Ka,distanceBetweenPoints:Qs,_angleDiff:Ja,_normalizeAngle:yo,_angleBetween:ks,_limitValue:co,_int16Range:xo,_isBetween:cs,getRtlAdapter:Ao,overrideTextDirection:Rs,restoreTextDirection:rc,_boundSegment:Qa,_boundSegments:Oo,_computeSegments:ts});function Yi(_,f,y,w){const{controller:A,data:E,_sorted:R}=_,j=A._cachedMeta.iScale;if(j&&f===j.axis&&"r"!==f&&R&&E.length){const $=j._reversePixels?$i:Wi;if(!w)return $(E,f,y);if(A._sharedOptions){const K=E[0],st="function"==typeof K.getRange&&K.getRange(f);if(st){const ut=$(E,f,y-st),ft=$(E,f,y+st);return{lo:ut.lo,hi:ft.hi}}}}return{lo:0,hi:E.length-1}}function _n(_,f,y,w,A){const E=_.getSortedVisibleDatasetMetas(),R=y[f];for(let j=0,$=E.length;j<$;++j){const{index:K,data:st}=E[j],{lo:ut,hi:ft}=Yi(E[j],f,R,A);for(let bt=ut;bt<=ft;++bt){const Mt=st[bt];Mt.skip||w(Mt,K,bt)}}}function rd(_,f,y,w,A){const E=[];return!A&&!_.isPointInArea(f)||_n(_,y,f,function(R,j,$){(A||li(R,_.chartArea,0))&&R.inRange(f.x,f.y,w)&&E.push({element:R,datasetIndex:j,index:$})},!0),E}function Du(_,f,y,w,A,E){return E||_.isPointInArea(f)?"r"!==y||w?function oc(_,f,y,w,A,E){let R=[];const j=function(K){const st=-1!==K.indexOf("x"),ut=-1!==K.indexOf("y");return function(ft,bt){const Mt=st?Math.abs(ft.x-bt.x):0,It=ut?Math.abs(ft.y-bt.y):0;return Math.sqrt(Math.pow(Mt,2)+Math.pow(It,2))}}(y);let $=Number.POSITIVE_INFINITY;return _n(_,y,f,function(K,st,ut){const ft=K.inRange(f.x,f.y,A);if(w&&!ft)return;const bt=K.getCenterPoint(A);if(!E&&!_.isPointInArea(bt)&&!ft)return;const Mt=j(f,bt);Mt<$?(R=[{element:K,datasetIndex:st,index:ut}],$=Mt):Mt===$&&R.push({element:K,datasetIndex:st,index:ut})}),R}(_,f,y,w,A,E):function(R,j,$,K){let st=[];return _n(R,$,j,function(ut,ft,bt){const{startAngle:Mt,endAngle:It}=ut.getProps(["startAngle","endAngle"],K),{angle:Nt}=Ka(ut,{x:j.x,y:j.y});ks(Nt,Mt,It)&&st.push({element:ut,datasetIndex:ft,index:bt})}),st}(_,f,y,A):[]}function ac(_,f,y,w,A){const E=[],R="x"===y?"inXRange":"inYRange";let j=!1;return _n(_,y,f,($,K,st)=>{$[R](f[y],A)&&(E.push({element:$,datasetIndex:K,index:st}),j=j||$.inRange(f.x,f.y,A))}),w&&!j?[]:E}var Nc={evaluateInteractionItems:_n,modes:{index(_,f,y,w){const A=fe(f,_),E=y.axis||"x",R=y.includeInvisible||!1,j=y.intersect?rd(_,A,E,w,R):Du(_,A,E,!1,w,R),$=[];return j.length?(_.getSortedVisibleDatasetMetas().forEach(K=>{const st=j[0].index,ut=K.data[st];ut&&!ut.skip&&$.push({element:ut,datasetIndex:K.index,index:st})}),$):[]},dataset(_,f,y,w){const A=fe(f,_),E=y.axis||"xy",R=y.includeInvisible||!1;let j=y.intersect?rd(_,A,E,w,R):Du(_,A,E,!1,w,R);if(j.length>0){const $=j[0].datasetIndex,K=_.getDatasetMeta($).data;j=[];for(let st=0;st<K.length;++st)j.push({element:K[st],datasetIndex:$,index:st})}return j},point:(_,f,y,w)=>rd(_,fe(f,_),y.axis||"xy",w,y.includeInvisible||!1),nearest:(_,f,y,w)=>Du(_,fe(f,_),y.axis||"xy",y.intersect,w,y.includeInvisible||!1),x:(_,f,y,w)=>ac(_,fe(f,_),"x",y.intersect,w),y:(_,f,y,w)=>ac(_,fe(f,_),"y",y.intersect,w)}};const ko=["left","top","right","bottom"];function Au(_,f){return _.filter(y=>y.pos===f)}function ms(_,f){return _.filter(y=>-1===ko.indexOf(y.pos)&&y.box.axis===f)}function ku(_,f){return _.sort((y,w)=>{const A=f?w:y,E=f?y:w;return A.weight===E.weight?A.index-E.index:A.weight-E.weight})}function Fd(_,f,y,w){return Math.max(_[y],f[y])+Math.max(_[w],f[w])}function od(_,f){_.top=Math.max(_.top,f.top),_.left=Math.max(_.left,f.left),_.bottom=Math.max(_.bottom,f.bottom),_.right=Math.max(_.right,f.right)}function Pa(_,f,y,w){const{pos:A,box:E}=y,R=_.maxPadding;if(!Zn(A)){y.size&&(_[A]-=y.size);const ut=w[y.stack]||{size:0,count:1};ut.size=Math.max(ut.size,y.horizontal?E.height:E.width),y.size=ut.size/ut.count,_[A]+=y.size}E.getPadding&&od(R,E.getPadding());const j=Math.max(0,f.outerWidth-Fd(R,_,"left","right")),$=Math.max(0,f.outerHeight-Fd(R,_,"top","bottom")),K=j!==_.w,st=$!==_.h;return _.w=j,_.h=$,y.horizontal?{same:K,other:st}:{same:st,other:K}}function ad(_,f){const y=f.maxPadding;return function w(A){const E={left:0,top:0,right:0,bottom:0};return A.forEach(R=>{E[R]=Math.max(f[R],y[R])}),E}(_?["left","right"]:["top","bottom"])}function Os(_,f,y,w){const A=[];let E,R,j,$,K,st;for(E=0,R=_.length,K=0;E<R;++E){j=_[E],$=j.box,$.update(j.width||f.w,j.height||f.h,ad(j.horizontal,f));const{same:ut,other:ft}=Pa(f,y,j,w);K|=ut&&A.length,st=st||ft,$.fullSize||A.push(j)}return K&&Os(A,f,y,w)||st}function vs(_,f,y,w,A){_.top=y,_.left=f,_.right=f+w,_.bottom=y+A,_.width=w,_.height=A}function nf(_,f,y,w){const A=y.padding;let{x:E,y:R}=f;for(const j of _){const $=j.box,K=w[j.stack]||{count:1,placed:0,weight:1},st=j.stackWeight/K.weight||1;if(j.horizontal){const ut=f.w*st,ft=K.size||$.height;Fi(K.start)&&(R=K.start),$.fullSize?vs($,A.left,R,y.outerWidth-A.right-A.left,ft):vs($,f.left+K.placed,R,ut,ft),K.start=R,K.placed+=ut,R=$.bottom}else{const ut=f.h*st,ft=K.size||$.width;Fi(K.start)&&(E=K.start),$.fullSize?vs($,E,A.top,ft,y.outerHeight-A.bottom-A.top):vs($,E,f.top+K.placed,ft,ut),K.start=E,K.placed+=ut,E=$.right}}f.x=E,f.y=R}gi.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Uo={addBox(_,f){_.boxes||(_.boxes=[]),f.fullSize=f.fullSize||!1,f.position=f.position||"top",f.weight=f.weight||0,f._layers=f._layers||function(){return[{z:0,draw(y){f.draw(y)}}]},_.boxes.push(f)},removeBox(_,f){const y=_.boxes?_.boxes.indexOf(f):-1;-1!==y&&_.boxes.splice(y,1)},configure(_,f,y){f.fullSize=y.fullSize,f.position=y.position,f.weight=y.weight},update(_,f,y,w){if(!_)return;const A=Do(_.options.layout.padding),E=Math.max(f-A.width,0),R=Math.max(y-A.height,0),j=function(It){const Nt=function(rn){const $n=[];let un,ni,Kn,oi,Tn,qn;for(un=0,ni=(rn||[]).length;un<ni;++un)Kn=rn[un],({position:oi,options:{stack:Tn,stackWeight:qn=1}}=Kn),$n.push({index:un,box:Kn,pos:oi,horizontal:Kn.isHorizontal(),weight:Kn.weight,stack:Tn&&oi+Tn,stackWeight:qn});return $n}(It),Gt=ku(Nt.filter(rn=>rn.box.fullSize),!0),ne=ku(Au(Nt,"left"),!0),de=ku(Au(Nt,"right")),ye=ku(Au(Nt,"top"),!0),qe=ku(Au(Nt,"bottom")),$e=ms(Nt,"x"),wn=ms(Nt,"y");return{fullSize:Gt,leftAndTop:ne.concat(ye),rightAndBottom:de.concat(wn).concat(qe).concat($e),chartArea:Au(Nt,"chartArea"),vertical:ne.concat(de).concat(wn),horizontal:ye.concat(qe).concat($e)}}(_.boxes),$=j.vertical,K=j.horizontal;_e(_.boxes,It=>{"function"==typeof It.beforeLayout&&It.beforeLayout()});const st=$.reduce((It,Nt)=>Nt.box.options&&!1===Nt.box.options.display?It:It+1,0)||1,ut=Object.freeze({outerWidth:f,outerHeight:y,padding:A,availableWidth:E,availableHeight:R,vBoxMaxWidth:E/2/st,hBoxMaxHeight:R/2}),ft=Object.assign({},A);od(ft,Do(w));const bt=Object.assign({maxPadding:ft,w:E,h:R,x:A.left,y:A.top},A),Mt=function zd(_,f){const y=function($){const K={};for(const st of $){const{stack:ut,pos:ft,stackWeight:bt}=st;if(!ut||!ko.includes(ft))continue;const Mt=K[ut]||(K[ut]={count:0,placed:0,weight:0,size:0});Mt.count++,Mt.weight+=bt}return K}(_),{vBoxMaxWidth:w,hBoxMaxHeight:A}=f;let E,R,j;for(E=0,R=_.length;E<R;++E){j=_[E];const{fullSize:$}=j.box,K=y[j.stack],st=K&&j.stackWeight/K.weight;j.horizontal?(j.width=st?st*w:$&&f.availableWidth,j.height=A):(j.width=w,j.height=st?st*A:$&&f.availableHeight)}return y}($.concat(K),ut);Os(j.fullSize,bt,ut,Mt),Os($,bt,ut,Mt),Os(K,bt,ut,Mt)&&Os($,bt,ut,Mt),function(It){const Nt=It.maxPadding;function Gt(ne){const de=Math.max(Nt[ne]-It[ne],0);return It[ne]+=de,de}It.y+=Gt("top"),It.x+=Gt("left"),Gt("right"),Gt("bottom")}(bt),nf(j.leftAndTop,bt,ut,Mt),bt.x+=bt.w,bt.y+=bt.h,nf(j.rightAndBottom,bt,ut,Mt),_.chartArea={left:bt.left,top:bt.top,right:bt.left+bt.w,bottom:bt.top+bt.h,height:bt.h,width:bt.w},_e(j.chartArea,It=>{const Nt=It.box;Object.assign(Nt,_.chartArea),Nt.update(bt.w,bt.h,{left:0,top:0,right:0,bottom:0})})}};class Jo{acquireContext(f,y){}releaseContext(f){return!1}addEventListener(f,y,w){}removeEventListener(f,y,w){}getDevicePixelRatio(){return 1}getMaximumSize(f,y,w,A){return y=Math.max(0,y||f.width),w=w||f.height,{width:y,height:Math.max(0,A?Math.floor(y/A):w)}}isAttached(f){return!0}updateConfig(f){}}class Hd extends Jo{acquireContext(f){return f&&f.getContext&&f.getContext("2d")||null}updateConfig(f){f.options.animation=!1}}const sc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Iu=_=>null===_||""===_,Al=!!hn&&{passive:!0};function _h(_,f,y){_.canvas.removeEventListener(f,y,Al)}function Jl(_,f){for(const y of _)if(y===f||y.contains(f))return!0}function sd(_,f,y){const w=_.canvas,A=new MutationObserver(E=>{let R=!1;for(const j of E)R=R||Jl(j.addedNodes,w),R=R&&!Jl(j.removedNodes,w);R&&y()});return A.observe(document,{childList:!0,subtree:!0}),A}function ld(_,f,y){const w=_.canvas,A=new MutationObserver(E=>{let R=!1;for(const j of E)R=R||Jl(j.removedNodes,w),R=R&&!Jl(j.addedNodes,w);R&&y()});return A.observe(document,{childList:!0,subtree:!0}),A}const ys=new Map;let Bs=0;function Ce(){const _=window.devicePixelRatio;_!==Bs&&(Bs=_,ys.forEach((f,y)=>{y.currentDevicePixelRatio!==_&&f()}))}function lc(_,f,y){const w=_.canvas,A=w&&Ia(w);if(!A)return;const E=pi((j,$)=>{const K=A.clientWidth;y(j,$),K<A.clientWidth&&y()},window),R=new ResizeObserver(j=>{const $=j[0],K=$.contentRect.width,st=$.contentRect.height;0===K&&0===st||E(K,st)});return R.observe(A),j=_,$=E,ys.size||window.addEventListener("resize",Ce),ys.set(j,$),R;var j,$}function ol(_,f,y){y&&y.disconnect(),"resize"===f&&(ys.delete(_),ys.size||window.removeEventListener("resize",Ce))}function kl(_,f,y){const w=_.canvas,A=pi(E=>{null!==_.ctx&&y(function(R,j){const $=sc[R.type]||R.type,{x:K,y:st}=fe(R,j);return{type:$,chart:j,native:R,x:void 0!==K?K:null,y:void 0!==st?st:null}}(E,_))},_,E=>{const R=E[0];return[R,R.offsetX,R.offsetY]});return w.addEventListener(f,A,Al),A}class la extends Jo{acquireContext(f,y){const w=f&&f.getContext&&f.getContext("2d");return w&&w.canvas===f?(function(A,E){const R=A.style,j=A.getAttribute("height"),$=A.getAttribute("width");if(A.$chartjs={initial:{height:j,width:$,style:{display:R.display,height:R.height,width:R.width}}},R.display=R.display||"block",R.boxSizing=R.boxSizing||"border-box",Iu($)){const K=vn(A,"width");void 0!==K&&(A.width=K)}if(Iu(j))if(""===A.style.height)A.height=A.width/(E||2);else{const K=vn(A,"height");void 0!==K&&(A.height=K)}}(f,y),w):null}releaseContext(f){const y=f.canvas;if(!y.$chartjs)return!1;const w=y.$chartjs.initial;["height","width"].forEach(E=>{const R=w[E];Vn(R)?y.removeAttribute(E):y.setAttribute(E,R)});const A=w.style||{};return Object.keys(A).forEach(E=>{y.style[E]=A[E]}),y.width=y.width,delete y.$chartjs,!0}addEventListener(f,y,w){this.removeEventListener(f,y),(f.$proxies||(f.$proxies={}))[y]=({attach:sd,detach:ld,resize:lc}[y]||kl)(f,y,w)}removeEventListener(f,y){const w=f.$proxies||(f.$proxies={}),A=w[y];!A||(({attach:ol,detach:ol,resize:ol}[y]||_h)(f,y,A),w[y]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(f,y,w,A){return In(f,y,w,A)}isAttached(f){const y=Ia(f);return!(!y||!y.isConnected)}}function uc(_){return!bu()||"undefined"!=typeof OffscreenCanvas&&_ instanceof OffscreenCanvas?Hd:la}var es=Object.freeze({__proto__:null,_detectPlatform:uc,BasePlatform:Jo,BasicPlatform:Hd,DomPlatform:la});const Il="transparent",Qo={boolean:(_,f,y)=>y>.5?f:_,color(_,f,y){const w=pr(_||Il),A=w.valid&&pr(f||Il);return A&&A.valid?A.mix(w,y).hexString():f},number:(_,f,y)=>_+(f-_)*y};class al{constructor(f,y,w,A){const E=y[w];A=Bn([f.to,A,E,f.from]);const R=Bn([f.from,E,A]);this._active=!0,this._fn=f.fn||Qo[f.type||typeof R],this._easing=Ir[f.easing]||Ir.linear,this._start=Math.floor(Date.now()+(f.delay||0)),this._duration=this._total=Math.floor(f.duration),this._loop=!!f.loop,this._target=y,this._prop=w,this._from=R,this._to=A,this._promises=void 0}active(){return this._active}update(f,y,w){if(this._active){this._notify(!1);const A=this._target[this._prop],E=w-this._start,R=this._duration-E;this._start=w,this._duration=Math.floor(Math.max(R,f.duration)),this._total+=E,this._loop=!!f.loop,this._to=Bn([f.to,y,A,f.from]),this._from=Bn([f.from,A,y])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(f){const y=f-this._start,w=this._duration,A=this._prop,E=this._from,R=this._loop,j=this._to;let $;if(this._active=E!==j&&(R||y<w),!this._active)return this._target[A]=j,void this._notify(!0);y<0?this._target[A]=E:($=y/w%2,$=R&&$>1?2-$:$,$=this._easing(Math.min(1,Math.max(0,$))),this._target[A]=this._fn(E,j,$))}wait(){const f=this._promises||(this._promises=[]);return new Promise((y,w)=>{f.push({res:y,rej:w})})}_notify(f){const y=f?"res":"rej",w=this._promises||[];for(let A=0;A<w.length;A++)w[A][y]()}}gi.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Pu=Object.keys(gi.animation);gi.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:_=>"onProgress"!==_&&"onComplete"!==_&&"fn"!==_}),gi.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),gi.describe("animations",{_fallback:"animation"}),gi.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:_=>0|_}}}});class Eu{constructor(f,y){this._chart=f,this._properties=new Map,this.configure(y)}configure(f){if(!Zn(f))return;const y=this._properties;Object.getOwnPropertyNames(f).forEach(w=>{const A=f[w];if(!Zn(A))return;const E={};for(const R of Pu)E[R]=A[R];(Ei(A.properties)&&A.properties||[w]).forEach(R=>{R!==w&&y.has(R)||y.set(R,E)})})}_animateOptions(f,y){const w=y.options,A=function(R,j){if(!j)return;let $=R.options;return $?($.$shared&&(R.options=$=Object.assign({},$,{$shared:!1,$animations:{}})),$):void(R.options=j)}(f,w);if(!A)return[];const E=this._createAnimations(A,w);return w.$shared&&function(R,j){const $=[],K=Object.keys(j);for(let st=0;st<K.length;st++){const ut=R[K[st]];ut&&ut.active()&&$.push(ut.wait())}return Promise.all($)}(f.options.$animations,w).then(()=>{f.options=w},()=>{}),E}_createAnimations(f,y){const w=this._properties,A=[],E=f.$animations||(f.$animations={}),R=Object.keys(y),j=Date.now();let $;for($=R.length-1;$>=0;--$){const K=R[$];if("$"===K.charAt(0))continue;if("options"===K){A.push(...this._animateOptions(f,y));continue}const st=y[K];let ut=E[K];const ft=w.get(K);if(ut){if(ft&&ut.active()){ut.update(ft,st,j);continue}ut.cancel()}ft&&ft.duration?(E[K]=ut=new al(ft,f,K,st),A.push(ut)):f[K]=st}return A}update(f,y){if(0===this._properties.size)return void Object.assign(f,y);const w=this._createAnimations(f,y);return w.length?(on.add(this._chart,w),!0):void 0}}function ud(_,f){const y=_&&_.options||{},w=y.reverse,A=void 0===y.min?f:0,E=void 0===y.max?f:0;return{start:w?E:A,end:w?A:E}}function Rc(_,f){const y=[],w=_._getSortedDatasetMetas(f);let A,E;for(A=0,E=w.length;A<E;++A)y.push(w[A].index);return y}function zs(_,f,y,w={}){const A=_.keys,E="single"===w.mode;let R,j,$,K;if(null!==f){for(R=0,j=A.length;R<j;++R){if($=+A[R],$===y){if(w.all)continue;break}K=_.values[$],Qi(K)&&(E||0===f||kr(f)===kr(K))&&(f+=K)}return f}}function sl(_,f){const y=_&&_.options.stacked;return y||void 0===y&&void 0!==f.stack}function Va(_,f,y){const w=_[f]||(_[f]={});return w[y]||(w[y]={})}function ns(_,f,y,w){for(const A of f.getMatchingVisibleMetas(w).reverse()){const E=_[A.index];if(y&&E>0||!y&&E<0)return A.index}return null}function Pl(_,f){const{chart:y,_cachedMeta:w}=_,A=y._stacks||(y._stacks={}),{iScale:E,vScale:R,index:j}=w,$=E.axis,K=R.axis,st=`${E.id}.${R.id}.${(It=w).stack||It.type}`,ut=f.length;var It;let ft;for(let bt=0;bt<ut;++bt){const Mt=f[bt],{[$]:It,[K]:Nt}=Mt;ft=(Mt._stacks||(Mt._stacks={}))[K]=Va(A,st,It),ft[j]=Nt,ft._top=ns(ft,R,!0,w.type),ft._bottom=ns(ft,R,!1,w.type)}}function Ql(_,f){const y=_.scales;return Object.keys(y).filter(w=>y[w].axis===f).shift()}function tu(_,f){const y=_.controller.index,w=_.vScale&&_.vScale.axis;if(w){f=f||_._parsed;for(const A of f){const E=A._stacks;if(!E||void 0===E[w]||void 0===E[w][y])return;delete E[w][y]}}}const cc=_=>"reset"===_||"none"===_,cd=(_,f)=>f?_:Object.assign({},_);class Io{constructor(f,y){this.chart=f,this._ctx=f.ctx,this.index=y,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const f=this._cachedMeta;this.configure(),this.linkScales(),f._stacked=sl(f.vScale,f),this.addElements()}updateIndex(f){this.index!==f&&tu(this._cachedMeta),this.index=f}linkScales(){const f=this.chart,y=this._cachedMeta,w=this.getDataset(),A=(ut,ft,bt,Mt)=>"x"===ut?ft:"r"===ut?Mt:bt,E=y.xAxisID=yi(w.xAxisID,Ql(f,"x")),R=y.yAxisID=yi(w.yAxisID,Ql(f,"y")),j=y.rAxisID=yi(w.rAxisID,Ql(f,"r")),$=y.indexAxis,K=y.iAxisID=A($,E,R,j),st=y.vAxisID=A($,R,E,j);y.xScale=this.getScaleForId(E),y.yScale=this.getScaleForId(R),y.rScale=this.getScaleForId(j),y.iScale=this.getScaleForId(K),y.vScale=this.getScaleForId(st)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(f){return this.chart.scales[f]}_getOtherScale(f){const y=this._cachedMeta;return f===y.iScale?y.vScale:y.iScale}reset(){this._update("reset")}_destroy(){const f=this._cachedMeta;this._data&&Mi(this._data,this),f._stacked&&tu(f)}_dataCheck(){const f=this.getDataset(),y=f.data||(f.data=[]),w=this._data;if(Zn(y))this._data=function(A){const E=Object.keys(A),R=new Array(E.length);let j,$,K;for(j=0,$=E.length;j<$;++j)K=E[j],R[j]={x:K,y:A[K]};return R}(y);else if(w!==y){if(w){Mi(w,this);const A=this._cachedMeta;tu(A),A._parsed=[]}y&&Object.isExtensible(y)&&yr(y,this),this._syncList=[],this._data=y}}addElements(){const f=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(f.dataset=new this.datasetElementType)}buildOrUpdateElements(f){const y=this._cachedMeta,w=this.getDataset();let A=!1;this._dataCheck();const E=y._stacked;y._stacked=sl(y.vScale,y),y.stack!==w.stack&&(A=!0,tu(y),y.stack=w.stack),this._resyncElements(f),(A||E!==y._stacked)&&Pl(this,y._parsed)}configure(){const f=this.chart.config,y=f.datasetScopeKeys(this._type),w=f.getOptionScopes(this.getDataset(),y,!0);this.options=f.createResolver(w,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(f,y){const{_cachedMeta:w,_data:A}=this,{iScale:E,_stacked:R}=w,j=E.axis;let $,K,st,ut=0===f&&y===A.length||w._sorted,ft=f>0&&w._parsed[f-1];if(!1===this._parsing)w._parsed=A,w._sorted=!0,st=A;else{st=Ei(A[f])?this.parseArrayData(w,A,f,y):Zn(A[f])?this.parseObjectData(w,A,f,y):this.parsePrimitiveData(w,A,f,y);const bt=()=>null===K[j]||ft&&K[j]<ft[j];for($=0;$<y;++$)w._parsed[$+f]=K=st[$],ut&&(bt()&&(ut=!1),ft=K);w._sorted=ut}R&&Pl(this,st)}parsePrimitiveData(f,y,w,A){const{iScale:E,vScale:R}=f,j=E.axis,$=R.axis,K=E.getLabels(),st=E===R,ut=new Array(A);let ft,bt,Mt;for(ft=0,bt=A;ft<bt;++ft)Mt=ft+w,ut[ft]={[j]:st||E.parse(K[Mt],Mt),[$]:R.parse(y[Mt],Mt)};return ut}parseArrayData(f,y,w,A){const{xScale:E,yScale:R}=f,j=new Array(A);let $,K,st,ut;for($=0,K=A;$<K;++$)st=$+w,ut=y[st],j[$]={x:E.parse(ut[0],st),y:R.parse(ut[1],st)};return j}parseObjectData(f,y,w,A){const{xScale:E,yScale:R}=f,{xAxisKey:j="x",yAxisKey:$="y"}=this._parsing,K=new Array(A);let st,ut,ft,bt;for(st=0,ut=A;st<ut;++st)ft=st+w,bt=y[ft],K[st]={x:E.parse(Jn(bt,j),ft),y:R.parse(Jn(bt,$),ft)};return K}getParsed(f){return this._cachedMeta._parsed[f]}getDataElement(f){return this._cachedMeta.data[f]}applyStack(f,y,w){const E=this._cachedMeta,R=y[f.axis];return zs({keys:Rc(this.chart,!0),values:y._stacks[f.axis]},R,E.index,{mode:w})}updateRangeFromParsed(f,y,w,A){const E=w[y.axis];let R=null===E?NaN:E;const j=A&&w._stacks[y.axis];A&&j&&(A.values=j,R=zs(A,E,this._cachedMeta.index)),f.min=Math.min(f.min,R),f.max=Math.max(f.max,R)}getMinMax(f,y){const w=this._cachedMeta,A=w._parsed,E=w._sorted&&f===w.iScale,R=A.length,j=this._getOtherScale(f),$=((It,Nt,Gt)=>It&&!Nt.hidden&&Nt._stacked&&{keys:Rc(this.chart,!0),values:null})(y,w),K={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:st,max:ut}=function(It){const{min:Nt,max:Gt,minDefined:ne,maxDefined:de}=It.getUserBounds();return{min:ne?Nt:Number.NEGATIVE_INFINITY,max:de?Gt:Number.POSITIVE_INFINITY}}(j);let ft,bt;function Mt(){bt=A[ft];const It=bt[j.axis];return!Qi(bt[f.axis])||st>It||ut<It}for(ft=0;ft<R&&(Mt()||(this.updateRangeFromParsed(K,f,bt,$),!E));++ft);if(E)for(ft=R-1;ft>=0;--ft)if(!Mt()){this.updateRangeFromParsed(K,f,bt,$);break}return K}getAllParsedValues(f){const y=this._cachedMeta._parsed,w=[];let A,E,R;for(A=0,E=y.length;A<E;++A)R=y[A][f.axis],Qi(R)&&w.push(R);return w}getMaxOverflow(){return!1}getLabelAndValue(f){const y=this._cachedMeta,w=y.iScale,A=y.vScale,E=this.getParsed(f);return{label:w?""+w.getLabelForValue(E[w.axis]):"",value:A?""+A.getLabelForValue(E[A.axis]):""}}_update(f){const y=this._cachedMeta;this.update(f||"default"),y._clip=function(w){let A,E,R,j;return Zn(w)?(A=w.top,E=w.right,R=w.bottom,j=w.left):A=E=R=j=w,{top:A,right:E,bottom:R,left:j,disabled:!1===w}}(yi(this.options.clip,function(w,A,E){if(!1===E)return!1;const R=ud(w,E),j=ud(A,E);return{top:j.end,right:R.end,bottom:j.start,left:R.start}}(y.xScale,y.yScale,this.getMaxOverflow())))}update(f){}draw(){const f=this._ctx,w=this._cachedMeta,A=w.data||[],E=this.chart.chartArea,R=[],j=this._drawStart||0,$=this._drawCount||A.length-j,K=this.options.drawActiveElementsOnTop;let st;for(w.dataset&&w.dataset.draw(f,E,j,$),st=j;st<j+$;++st){const ut=A[st];ut.hidden||(ut.active&&K?R.push(ut):ut.draw(f,E))}for(st=0;st<R.length;++st)R[st].draw(f,E)}getStyle(f,y){const w=y?"active":"default";return void 0===f&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(w):this.resolveDataElementOptions(f||0,w)}getContext(f,y,w){const A=this.getDataset();let E;if(f>=0&&f<this._cachedMeta.data.length){const R=this._cachedMeta.data[f];E=R.$context||(R.$context=Ns(this.getContext(),{active:!1,dataIndex:$=f,parsed:void 0,raw:void 0,element:R,index:$,mode:"default",type:"data"})),E.parsed=this.getParsed(f),E.raw=A.data[f],E.index=E.dataIndex=f}else E=this.$context||(this.$context=Ns(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:j=this.index,index:j,mode:"default",type:"dataset"})),E.dataset=A,E.index=E.datasetIndex=this.index;var j,$;return E.active=!!y,E.mode=w,E}resolveDatasetElementOptions(f){return this._resolveElementOptions(this.datasetElementType.id,f)}resolveDataElementOptions(f,y){return this._resolveElementOptions(this.dataElementType.id,y,f)}_resolveElementOptions(f,y="default",w){const A="active"===y,E=this._cachedDataOpts,R=f+"-"+y,j=E[R],$=this.enableOptionSharing&&Fi(w);if(j)return cd(j,$);const K=this.chart.config,st=K.datasetElementScopeKeys(this._type,f),ut=A?[`${f}Hover`,"hover",f,""]:[f,""],ft=K.getOptionScopes(this.getDataset(),st),bt=Object.keys(gi.elements[f]),Mt=K.resolveNamedOptions(ft,bt,()=>this.getContext(w,A),ut);return Mt.$shared&&(Mt.$shared=$,E[R]=Object.freeze(cd(Mt,$))),Mt}_resolveAnimations(f,y,w){const A=this.chart,E=this._cachedDataOpts,R=`animation-${y}`,j=E[R];if(j)return j;let $;if(!1!==A.options.animation){const st=this.chart.config,ut=st.datasetAnimationScopeKeys(this._type,y),ft=st.getOptionScopes(this.getDataset(),ut);$=st.createResolver(ft,this.getContext(f,w,y))}const K=new Eu(A,$&&$.animations);return $&&$._cacheable&&(E[R]=Object.freeze(K)),K}getSharedOptions(f){if(f.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},f))}includeOptions(f,y){return!y||cc(f)||this.chart._animationsDisabled}updateElement(f,y,w,A){cc(A)?Object.assign(f,w):this._resolveAnimations(y,A).update(f,w)}updateSharedOptions(f,y,w){f&&!cc(y)&&this._resolveAnimations(void 0,y).update(f,w)}_setStyle(f,y,w,A){f.active=A;const E=this.getStyle(y,A);this._resolveAnimations(y,w,A).update(f,{options:!A&&this.getSharedOptions(E)||E})}removeHoverStyle(f,y,w){this._setStyle(f,w,"active",!1)}setHoverStyle(f,y,w){this._setStyle(f,w,"active",!0)}_removeDatasetHoverStyle(){const f=this._cachedMeta.dataset;f&&this._setStyle(f,void 0,"active",!1)}_setDatasetHoverStyle(){const f=this._cachedMeta.dataset;f&&this._setStyle(f,void 0,"active",!0)}_resyncElements(f){const y=this._data,w=this._cachedMeta.data;for(const[j,$,K]of this._syncList)this[j]($,K);this._syncList=[];const A=w.length,E=y.length,R=Math.min(E,A);R&&this.parse(0,R),E>A?this._insertElements(A,E-A,f):E<A&&this._removeElements(E,A-E)}_insertElements(f,y,w=!0){const A=this._cachedMeta,E=A.data,R=f+y;let j;const $=K=>{for(K.length+=y,j=K.length-1;j>=R;j--)K[j]=K[j-y]};for($(E),j=f;j<R;++j)E[j]=new this.dataElementType;this._parsing&&$(A._parsed),this.parse(f,y),w&&this.updateElements(E,f,y,"reset")}updateElements(f,y,w,A){}_removeElements(f,y){const w=this._cachedMeta;if(this._parsing){const A=w._parsed.splice(f,y);w._stacked&&tu(w,A)}w.data.splice(f,y)}_sync(f){if(this._parsing)this._syncList.push(f);else{const[y,w,A]=f;this[y](w,A)}this.chart._dataChanges.push([this.index,...f])}_onDataPush(){const f=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-f,f])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(f,y){y&&this._sync(["_removeElements",f,y]);const w=arguments.length-2;w&&this._sync(["_insertElements",f,w])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Io.defaults={},Io.prototype.datasetElementType=null,Io.prototype.dataElementType=null;class ua{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(f){const{x:y,y:w}=this.getProps(["x","y"],f);return{x:y,y:w}}hasValue(){return Ko(this.x)&&Ko(this.y)}getProps(f,y){const w=this.$animations;if(!y||!w)return this;const A={};return f.forEach(E=>{A[E]=w[E]&&w[E].active()?w[E]._to:this[E]}),A}}ua.defaults={},ua.defaultRoutes=void 0;const rf={values:_=>Ei(_)?_:""+_,numeric(_,f,y){if(0===_)return"0";const w=this.chart.options.locale;let A,E=_;if(y.length>1){const K=Math.max(Math.abs(y[0].value),Math.abs(y[y.length-1].value));(K<1e-4||K>1e15)&&(A="scientific"),E=function(st,ut){let ft=ut.length>3?ut[2].value-ut[1].value:ut[1].value-ut[0].value;return Math.abs(ft)>=1&&st!==Math.floor(st)&&(ft=st-Math.floor(st)),ft}(_,y)}const R=Yr(Math.abs(E)),j=Math.max(Math.min(-1*Math.floor(R),20),0),$={notation:A,minimumFractionDigits:j,maximumFractionDigits:j};return Object.assign($,this.options.ticks.format),hs(_,w,$)},logarithmic(_,f,y){if(0===_)return"0";const w=_/Math.pow(10,Math.floor(Yr(_)));return 1===w||2===w||5===w?rf.numeric.call(this,_,f,y):""}};var dc={formatters:rf};function eu(_,f,y,w,A){const E=yi(w,0),R=Math.min(yi(A,_.length),_.length);let j,$,K,st=0;for(y=Math.ceil(y),A&&(j=A-w,y=j/Math.floor(j/y)),K=E;K<0;)st++,K=Math.round(E+st*y);for($=Math.max(E,0);$<R;$++)$===K&&(f.push(_[$]),st++,K=Math.round(E+st*y))}gi.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(_,f)=>f.lineWidth,tickColor:(_,f)=>f.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),gi.route("scale.ticks","color","","color"),gi.route("scale.grid","color","","borderColor"),gi.route("scale.grid","borderColor","","borderColor"),gi.route("scale.title","color","","color"),gi.describe("scale",{_fallback:!1,_scriptable:_=>!_.startsWith("before")&&!_.startsWith("after")&&"callback"!==_&&"parser"!==_,_indexable:_=>"borderDash"!==_&&"tickBorderDash"!==_}),gi.describe("scales",{_fallback:"scale"}),gi.describe("scale.ticks",{_scriptable:_=>"backdropPadding"!==_&&"callback"!==_,_indexable:_=>"backdropPadding"!==_});const Nu=(_,f,y)=>"top"===f||"left"===f?_[f]+y:_[f]-y;function Ru(_,f){const y=[],w=_.length/f,A=_.length;let E=0;for(;E<A;E+=w)y.push(_[Math.floor(E)]);return y}function nu(_,f,y){const w=_.ticks.length,A=Math.min(f,w-1),E=_._startPixel,R=_._endPixel,j=1e-6;let $,K=_.getPixelForTick(A);if(!(y&&($=1===w?Math.max(K-E,R-K):0===f?(_.getPixelForTick(1)-K)/2:(K-_.getPixelForTick(A-1))/2,K+=A<f?$:-$,K<E-j||K>R+j)))return K}function jr(_){return _.drawTicks?_.tickLength:0}function xs(_,f){if(!_.display)return 0;const y=ji(_.font,f),w=Do(_.padding);return(Ei(_.text)?_.text.length:1)*y.lineHeight+w.height}function Fs(_,f,y){let w=Oe(_);return(y&&"right"!==f||!y&&"right"===f)&&(w="left"===(A=w)?"right":"right"===A?"left":A),w;var A}class ll extends ua{constructor(f){super(),this.id=f.id,this.type=f.type,this.options=void 0,this.ctx=f.ctx,this.chart=f.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(f){this.options=f.setContext(this.getContext()),this.axis=f.axis,this._userMin=this.parse(f.min),this._userMax=this.parse(f.max),this._suggestedMin=this.parse(f.suggestedMin),this._suggestedMax=this.parse(f.suggestedMax)}parse(f,y){return f}getUserBounds(){let{_userMin:f,_userMax:y,_suggestedMin:w,_suggestedMax:A}=this;return f=Mr(f,Number.POSITIVE_INFINITY),y=Mr(y,Number.NEGATIVE_INFINITY),w=Mr(w,Number.POSITIVE_INFINITY),A=Mr(A,Number.NEGATIVE_INFINITY),{min:Mr(f,w),max:Mr(y,A),minDefined:Qi(f),maxDefined:Qi(y)}}getMinMax(f){let y,{min:w,max:A,minDefined:E,maxDefined:R}=this.getUserBounds();if(E&&R)return{min:w,max:A};const j=this.getMatchingVisibleMetas();for(let $=0,K=j.length;$<K;++$)y=j[$].controller.getMinMax(this,f),E||(w=Math.min(w,y.min)),R||(A=Math.max(A,y.max));return w=R&&w>A?A:w,A=E&&w>A?w:A,{min:Mr(w,Mr(A,w)),max:Mr(A,Mr(w,A))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const f=this.chart.data;return this.options.labels||(this.isHorizontal()?f.xLabels:f.yLabels)||f.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ee(this.options.beforeUpdate,[this])}update(f,y,w){const{beginAtZero:A,grace:E,ticks:R}=this.options,j=R.sampleSize;this.beforeUpdate(),this.maxWidth=f,this.maxHeight=y,this._margins=w=Object.assign({left:0,right:0,top:0,bottom:0},w),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+w.left+w.right:this.height+w.top+w.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Tu(this,E,A),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const $=j<this.ticks.length;this._convertTicksToLabels($?Ru(this.ticks,j):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),R.display&&(R.autoSkip||"auto"===R.source)&&(this.ticks=function wh(_,f){const y=_.options.ticks,w=y.maxTicksLimit||function(st){const ut=st.options.offset,ft=st._tickSize();return Math.floor(Math.min(st._length/ft+(ut?0:1),st._maxLength/ft))}(_),A=y.major.enabled?function(st){const ut=[];let ft,bt;for(ft=0,bt=st.length;ft<bt;ft++)st[ft].major&&ut.push(ft);return ut}(f):[],E=A.length,R=A[0],j=A[E-1],$=[];if(E>w)return function(st,ut,ft,bt){let Mt,It=0,Nt=ft[0];for(bt=Math.ceil(bt),Mt=0;Mt<st.length;Mt++)Mt===Nt&&(ut.push(st[Mt]),It++,Nt=ft[It*bt])}(f,$,A,E/w),$;const K=function(st,ut,ft){const bt=function(Nt){const Gt=Nt.length;let ne,de;if(Gt<2)return!1;for(de=Nt[0],ne=1;ne<Gt;++ne)if(Nt[ne]-Nt[ne-1]!==de)return!1;return de}(st),Mt=ut.length/ft;if(!bt)return Math.max(Mt,1);const It=uo(bt);for(let Nt=0,Gt=It.length-1;Nt<Gt;Nt++){const ne=It[Nt];if(ne>Mt)return ne}return Math.max(Mt,1)}(A,f,w);if(E>0){let st,ut;const ft=E>1?Math.round((j-R)/(E-1)):null;for(eu(f,$,K,Vn(ft)?0:R-ft,R),st=0,ut=E-1;st<ut;st++)eu(f,$,K,A[st],A[st+1]);return eu(f,$,K,j,Vn(ft)?f.length:j+ft),$}return eu(f,$,K),$}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),$&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let f,y,w=this.options.reverse;this.isHorizontal()?(f=this.left,y=this.right):(f=this.top,y=this.bottom,w=!w),this._startPixel=f,this._endPixel=y,this._reversePixels=w,this._length=y-f,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ee(this.options.afterUpdate,[this])}beforeSetDimensions(){ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ee(this.options.afterSetDimensions,[this])}_callHooks(f){this.chart.notifyPlugins(f,this.getContext()),ee(this.options[f],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(f){const y=this.options.ticks;let w,A,E;for(w=0,A=f.length;w<A;w++)E=f[w],E.label=ee(y.callback,[E.value,w,f],this)}afterTickToLabelConversion(){ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const f=this.options,y=f.ticks,w=this.ticks.length,A=y.minRotation||0,E=y.maxRotation;let R,j,$,K=A;if(!this._isVisible()||!y.display||A>=E||w<=1||!this.isHorizontal())return void(this.labelRotation=A);const st=this._getLabelSizes(),ut=st.widest.width,ft=st.highest.height,bt=co(this.chart.width-ut,0,this.maxWidth);R=f.offset?this.maxWidth/w:bt/(w-1),ut+6>R&&(R=bt/(w-(f.offset?.5:1)),j=this.maxHeight-jr(f.grid)-y.padding-xs(f.title,this.chart.options.font),$=Math.sqrt(ut*ut+ft*ft),K=vo(Math.min(Math.asin(co((st.highest.height+6)/R,-1,1)),Math.asin(co(j/$,-1,1))-Math.asin(co(ft/$,-1,1)))),K=Math.max(A,Math.min(E,K))),this.labelRotation=K}afterCalculateLabelRotation(){ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ee(this.options.beforeFit,[this])}fit(){const f={width:0,height:0},{chart:y,options:{ticks:w,title:A,grid:E}}=this,R=this._isVisible(),j=this.isHorizontal();if(R){const $=xs(A,y.options.font);if(j?(f.width=this.maxWidth,f.height=jr(E)+$):(f.height=this.maxHeight,f.width=jr(E)+$),w.display&&this.ticks.length){const{first:K,last:st,widest:ut,highest:ft}=this._getLabelSizes(),bt=2*w.padding,Mt=zr(this.labelRotation),It=Math.cos(Mt),Nt=Math.sin(Mt);j?f.height=Math.min(this.maxHeight,f.height+(w.mirror?0:Nt*ut.width+It*ft.height)+bt):f.width=Math.min(this.maxWidth,f.width+(w.mirror?0:It*ut.width+Nt*ft.height)+bt),this._calculatePadding(K,st,Nt,It)}}this._handleMargins(),j?(this.width=this._length=y.width-this._margins.left-this._margins.right,this.height=f.height):(this.width=f.width,this.height=this._length=y.height-this._margins.top-this._margins.bottom)}_calculatePadding(f,y,w,A){const{ticks:{align:E,padding:R},position:j}=this.options,$=0!==this.labelRotation,K="top"!==j&&"x"===this.axis;if(this.isHorizontal()){const st=this.getPixelForTick(0)-this.left,ut=this.right-this.getPixelForTick(this.ticks.length-1);let ft=0,bt=0;$?K?(ft=A*f.width,bt=w*y.height):(ft=w*f.height,bt=A*y.width):"start"===E?bt=y.width:"end"===E?ft=f.width:"inner"!==E&&(ft=f.width/2,bt=y.width/2),this.paddingLeft=Math.max((ft-st+R)*this.width/(this.width-st),0),this.paddingRight=Math.max((bt-ut+R)*this.width/(this.width-ut),0)}else{let st=y.height/2,ut=f.height/2;"start"===E?(st=0,ut=f.height):"end"===E&&(st=y.height,ut=0),this.paddingTop=st+R,this.paddingBottom=ut+R}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ee(this.options.afterFit,[this])}isHorizontal(){const{axis:f,position:y}=this.options;return"top"===y||"bottom"===y||"x"===f}isFullSize(){return this.options.fullSize}_convertTicksToLabels(f){let y,w;for(this.beforeTickToLabelConversion(),this.generateTickLabels(f),y=0,w=f.length;y<w;y++)Vn(f[y].label)&&(f.splice(y,1),w--,y--);this.afterTickToLabelConversion()}_getLabelSizes(){let f=this._labelSizes;if(!f){const y=this.options.ticks.sampleSize;let w=this.ticks;y<w.length&&(w=Ru(w,y)),this._labelSizes=f=this._computeLabelSizes(w,w.length)}return f}_computeLabelSizes(f,y){const{ctx:w,_longestTextCache:A}=this,E=[],R=[];let j,$,K,st,ut,ft,bt,Mt,It,Nt,Gt,ne=0,de=0;for(j=0;j<y;++j){if(st=f[j].label,ut=this._resolveTickFontOptions(j),w.font=ft=ut.string,bt=A[ft]=A[ft]||{data:{},gc:[]},Mt=ut.lineHeight,It=Nt=0,Vn(st)||Ei(st)){if(Ei(st))for($=0,K=st.length;$<K;++$)Gt=st[$],Vn(Gt)||Ei(Gt)||(It=Le(w,bt.data,bt.gc,It,Gt),Nt+=Mt)}else It=Le(w,bt.data,bt.gc,It,st),Nt=Mt;E.push(It),R.push(Nt),ne=Math.max(It,ne),de=Math.max(Nt,de)}var rn;rn=y,_e(A,$n=>{const un=$n.gc,ni=un.length/2;let Kn;if(ni>rn){for(Kn=0;Kn<ni;++Kn)delete $n.data[un[Kn]];un.splice(0,ni)}});const ye=E.indexOf(ne),qe=R.indexOf(de),$e=wn=>({width:E[wn]||0,height:R[wn]||0});return{first:$e(0),last:$e(y-1),widest:$e(ye),highest:$e(qe),widths:E,heights:R}}getLabelForValue(f){return f}getPixelForValue(f,y){return NaN}getValueForPixel(f){}getPixelForTick(f){const y=this.ticks;return f<0||f>y.length-1?null:this.getPixelForValue(y[f].value)}getPixelForDecimal(f){this._reversePixels&&(f=1-f);const y=this._startPixel+f*this._length;return xo(this._alignToPixels?en(this.chart,y,0):y)}getDecimalForPixel(f){const y=(f-this._startPixel)/this._length;return this._reversePixels?1-y:y}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:f,max:y}=this;return f<0&&y<0?y:f>0&&y>0?f:0}getContext(f){const y=this.ticks||[];if(f>=0&&f<y.length){const w=y[f];return w.$context||(w.$context=Ns(this.getContext(),{tick:w,index:f,type:"tick"}))}return this.$context||(this.$context=Ns(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const f=this.options.ticks,y=zr(this.labelRotation),w=Math.abs(Math.cos(y)),A=Math.abs(Math.sin(y)),E=this._getLabelSizes(),R=f.autoSkipPadding||0,j=E?E.widest.width+R:0,$=E?E.highest.height+R:0;return this.isHorizontal()?$*w>j*A?j/w:$/A:$*A<j*w?$/w:j/A}_isVisible(){const f=this.options.display;return"auto"!==f?!!f:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(f){const y=this.axis,w=this.chart,A=this.options,{grid:E,position:R}=A,j=E.offset,$=this.isHorizontal(),K=this.ticks.length+(j?1:0),st=jr(E),ut=[],ft=E.setContext(this.getContext()),bt=ft.drawBorder?ft.borderWidth:0,Mt=bt/2,It=function(Tn){return en(w,Tn,bt)};let Nt,Gt,ne,de,ye,qe,$e,wn,rn,$n,un,ni;if("top"===R)Nt=It(this.bottom),qe=this.bottom-st,wn=Nt-Mt,$n=It(f.top)+Mt,ni=f.bottom;else if("bottom"===R)Nt=It(this.top),$n=f.top,ni=It(f.bottom)-Mt,qe=Nt+Mt,wn=this.top+st;else if("left"===R)Nt=It(this.right),ye=this.right-st,$e=Nt-Mt,rn=It(f.left)+Mt,un=f.right;else if("right"===R)Nt=It(this.left),rn=f.left,un=It(f.right)-Mt,ye=Nt+Mt,$e=this.left+st;else if("x"===y){if("center"===R)Nt=It((f.top+f.bottom)/2+.5);else if(Zn(R)){const Tn=Object.keys(R)[0];Nt=It(this.chart.scales[Tn].getPixelForValue(R[Tn]))}$n=f.top,ni=f.bottom,qe=Nt+Mt,wn=qe+st}else if("y"===y){if("center"===R)Nt=It((f.left+f.right)/2);else if(Zn(R)){const Tn=Object.keys(R)[0];Nt=It(this.chart.scales[Tn].getPixelForValue(R[Tn]))}ye=Nt-Mt,$e=ye-st,rn=f.left,un=f.right}const Kn=yi(A.ticks.maxTicksLimit,K),oi=Math.max(1,Math.ceil(K/Kn));for(Gt=0;Gt<K;Gt+=oi){const Tn=E.setContext(this.getContext(Gt)),qn=Tn.lineWidth,nr=Tn.color,rr=E.borderDash||[],Kr=Tn.borderDashOffset,$o=Tn.tickWidth,Jr=Tn.tickColor,na=Tn.tickBorderDash||[],Sa=Tn.tickBorderDashOffset;ne=nu(this,Gt,j),void 0!==ne&&(de=en(w,ne,qn),$?ye=$e=rn=un=de:qe=wn=$n=ni=de,ut.push({tx1:ye,ty1:qe,tx2:$e,ty2:wn,x1:rn,y1:$n,x2:un,y2:ni,width:qn,color:nr,borderDash:rr,borderDashOffset:Kr,tickWidth:$o,tickColor:Jr,tickBorderDash:na,tickBorderDashOffset:Sa}))}return this._ticksLength=K,this._borderValue=Nt,ut}_computeLabelItems(f){const y=this.axis,w=this.options,{position:A,ticks:E}=w,R=this.isHorizontal(),j=this.ticks,{align:$,crossAlign:K,padding:st,mirror:ut}=E,ft=jr(w.grid),bt=ft+st,Mt=ut?-st:bt,It=-zr(this.labelRotation),Nt=[];let Gt,ne,de,ye,qe,$e,wn,rn,$n,un,ni,Kn,oi="middle";if("top"===A)$e=this.bottom-Mt,wn=this._getXAxisLabelAlignment();else if("bottom"===A)$e=this.top+Mt,wn=this._getXAxisLabelAlignment();else if("left"===A){const qn=this._getYAxisLabelAlignment(ft);wn=qn.textAlign,qe=qn.x}else if("right"===A){const qn=this._getYAxisLabelAlignment(ft);wn=qn.textAlign,qe=qn.x}else if("x"===y){if("center"===A)$e=(f.top+f.bottom)/2+bt;else if(Zn(A)){const qn=Object.keys(A)[0];$e=this.chart.scales[qn].getPixelForValue(A[qn])+bt}wn=this._getXAxisLabelAlignment()}else if("y"===y){if("center"===A)qe=(f.left+f.right)/2-bt;else if(Zn(A)){const qn=Object.keys(A)[0];qe=this.chart.scales[qn].getPixelForValue(A[qn])}wn=this._getYAxisLabelAlignment(ft).textAlign}"y"===y&&("start"===$?oi="top":"end"===$&&(oi="bottom"));const Tn=this._getLabelSizes();for(Gt=0,ne=j.length;Gt<ne;++Gt){de=j[Gt],ye=de.label;const qn=E.setContext(this.getContext(Gt));rn=this.getPixelForTick(Gt)+E.labelOffset,$n=this._resolveTickFontOptions(Gt),un=$n.lineHeight,ni=Ei(ye)?ye.length:1;const nr=ni/2,rr=qn.color,Kr=qn.textStrokeColor,$o=qn.textStrokeWidth;let Jr,na=wn;if(R?(qe=rn,"inner"===wn&&(na=Gt===ne-1?this.options.reverse?"left":"right":0===Gt?this.options.reverse?"right":"left":"center"),Kn="top"===A?"near"===K||0!==It?-ni*un+un/2:"center"===K?-Tn.highest.height/2-nr*un+un:un/2-Tn.highest.height:"near"===K||0!==It?un/2:"center"===K?Tn.highest.height/2-nr*un:Tn.highest.height-ni*un,ut&&(Kn*=-1)):($e=rn,Kn=(1-ni)*un/2),qn.showLabelBackdrop){const Sa=Do(qn.backdropPadding),Ji=Tn.heights[Gt],pl=Tn.widths[Gt];let go=$e+Kn-Sa.top,Vo=qe-Sa.left;switch(oi){case"middle":go-=Ji/2;break;case"bottom":go-=Ji}switch(wn){case"center":Vo-=pl/2;break;case"right":Vo-=pl}Jr={left:Vo,top:go,width:pl+Sa.width,height:Ji+Sa.height,color:qn.backdropColor}}Nt.push({rotation:It,label:ye,font:$n,color:rr,strokeColor:Kr,strokeWidth:$o,textOffset:Kn,textAlign:na,textBaseline:oi,translation:[qe,$e],backdrop:Jr})}return Nt}_getXAxisLabelAlignment(){const{position:f,ticks:y}=this.options;if(-zr(this.labelRotation))return"top"===f?"left":"right";let w="center";return"start"===y.align?w="left":"end"===y.align?w="right":"inner"===y.align&&(w="inner"),w}_getYAxisLabelAlignment(f){const{position:y,ticks:{crossAlign:w,mirror:A,padding:E}}=this.options,R=f+E,j=this._getLabelSizes().widest.width;let $,K;return"left"===y?A?(K=this.right+E,"near"===w?$="left":"center"===w?($="center",K+=j/2):($="right",K+=j)):(K=this.right-R,"near"===w?$="right":"center"===w?($="center",K-=j/2):($="left",K=this.left)):"right"===y?A?(K=this.left+E,"near"===w?$="right":"center"===w?($="center",K-=j/2):($="left",K-=j)):(K=this.left+R,"near"===w?$="left":"center"===w?($="center",K+=j/2):($="right",K=this.right)):$="right",{textAlign:$,x:K}}_computeLabelArea(){if(this.options.ticks.mirror)return;const f=this.chart,y=this.options.position;return"left"===y||"right"===y?{top:0,left:this.left,bottom:f.height,right:this.right}:"top"===y||"bottom"===y?{top:this.top,left:0,bottom:this.bottom,right:f.width}:void 0}drawBackground(){const{ctx:f,options:{backgroundColor:y},left:w,top:A,width:E,height:R}=this;y&&(f.save(),f.fillStyle=y,f.fillRect(w,A,E,R),f.restore())}getLineWidthForValue(f){const y=this.options.grid;if(!this._isVisible()||!y.display)return 0;const w=this.ticks.findIndex(A=>A.value===f);return w>=0?y.setContext(this.getContext(w)).lineWidth:0}drawGrid(f){const y=this.options.grid,w=this.ctx,A=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(f));let E,R;const j=($,K,st)=>{st.width&&st.color&&(w.save(),w.lineWidth=st.width,w.strokeStyle=st.color,w.setLineDash(st.borderDash||[]),w.lineDashOffset=st.borderDashOffset,w.beginPath(),w.moveTo($.x,$.y),w.lineTo(K.x,K.y),w.stroke(),w.restore())};if(y.display)for(E=0,R=A.length;E<R;++E){const $=A[E];y.drawOnChartArea&&j({x:$.x1,y:$.y1},{x:$.x2,y:$.y2},$),y.drawTicks&&j({x:$.tx1,y:$.ty1},{x:$.tx2,y:$.ty2},{color:$.tickColor,width:$.tickWidth,borderDash:$.tickBorderDash,borderDashOffset:$.tickBorderDashOffset})}}drawBorder(){const{chart:f,ctx:y,options:{grid:w}}=this,A=w.setContext(this.getContext()),E=w.drawBorder?A.borderWidth:0;if(!E)return;const R=w.setContext(this.getContext(0)).lineWidth,j=this._borderValue;let $,K,st,ut;this.isHorizontal()?($=en(f,this.left,E)-E/2,K=en(f,this.right,R)+R/2,st=ut=j):(st=en(f,this.top,E)-E/2,ut=en(f,this.bottom,R)+R/2,$=K=j),y.save(),y.lineWidth=A.borderWidth,y.strokeStyle=A.borderColor,y.beginPath(),y.moveTo($,st),y.lineTo(K,ut),y.stroke(),y.restore()}drawLabels(f){if(!this.options.ticks.display)return;const y=this.ctx,w=this._computeLabelArea();w&&Ii(y,w);const A=this._labelItems||(this._labelItems=this._computeLabelItems(f));let E,R;for(E=0,R=A.length;E<R;++E){const j=A[E],$=j.font,K=j.label;j.backdrop&&(y.fillStyle=j.backdrop.color,y.fillRect(j.backdrop.left,j.backdrop.top,j.backdrop.width,j.backdrop.height)),bo(y,K,0,j.textOffset,$,j)}w&&ri(y)}drawTitle(){const{ctx:f,options:{position:y,title:w,reverse:A}}=this;if(!w.display)return;const E=ji(w.font),R=Do(w.padding),j=w.align;let $=E.lineHeight/2;"bottom"===y||"center"===y||Zn(y)?($+=R.bottom,Ei(w.text)&&($+=E.lineHeight*(w.text.length-1))):$+=R.top;const{titleX:K,titleY:st,maxWidth:ut,rotation:ft}=function(bt,Mt,It,Nt){const{top:Gt,left:ne,bottom:de,right:ye,chart:qe}=bt,{chartArea:$e,scales:wn}=qe;let rn,$n,un,ni=0;const Kn=de-Gt,oi=ye-ne;if(bt.isHorizontal()){if($n=se(Nt,ne,ye),Zn(It)){const Tn=Object.keys(It)[0];un=wn[Tn].getPixelForValue(It[Tn])+Kn-Mt}else un="center"===It?($e.bottom+$e.top)/2+Kn-Mt:Nu(bt,It,Mt);rn=ye-ne}else{if(Zn(It)){const Tn=Object.keys(It)[0];$n=wn[Tn].getPixelForValue(It[Tn])-oi+Mt}else $n="center"===It?($e.left+$e.right)/2-oi+Mt:Nu(bt,It,Mt);un=se(Nt,de,Gt),ni="left"===It?-Ar:Ar}return{titleX:$n,titleY:un,maxWidth:rn,rotation:ni}}(this,$,y,j);bo(f,w.text,0,0,E,{color:w.color,maxWidth:ut,rotation:ft,textAlign:Fs(j,y,A),textBaseline:"middle",translation:[K,st]})}draw(f){this._isVisible()&&(this.drawBackground(),this.drawGrid(f),this.drawBorder(),this.drawTitle(),this.drawLabels(f))}_layers(){const f=this.options,y=f.ticks&&f.ticks.z||0,w=yi(f.grid&&f.grid.z,-1);return this._isVisible()&&this.draw===ll.prototype.draw?[{z:w,draw:A=>{this.drawBackground(),this.drawGrid(A),this.drawTitle()}},{z:w+1,draw:()=>{this.drawBorder()}},{z:y,draw:A=>{this.drawLabels(A)}}]:[{z:y,draw:A=>{this.draw(A)}}]}getMatchingVisibleMetas(f){const y=this.chart.getSortedVisibleDatasetMetas(),w=this.axis+"AxisID",A=[];let E,R;for(E=0,R=y.length;E<R;++E){const j=y[E];j[w]!==this.id||f&&j.type!==f||A.push(j)}return A}_resolveTickFontOptions(f){return ji(this.options.ticks.setContext(this.getContext(f)).font)}_maxDigits(){const f=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/f}}class ul{constructor(f,y,w){this.type=f,this.scope=y,this.override=w,this.items=Object.create(null)}isForType(f){return Object.prototype.isPrototypeOf.call(this.type.prototype,f.prototype)}register(f){const y=Object.getPrototypeOf(f);let w;var j;"id"in(j=y)&&"defaults"in j&&(w=this.register(y));const A=this.items,E=f.id,R=this.scope+"."+E;if(!E)throw new Error("class does not have id: "+f);return E in A||(A[E]=f,function(j,$,K){const st=je(Object.create(null),[K?gi.get(K):{},gi.get($),j.defaults]);var ut,ft;gi.set($,st),j.defaultRoutes&&(ut=$,ft=j.defaultRoutes,Object.keys(ft).forEach(bt=>{const Mt=bt.split("."),It=Mt.pop(),Nt=[ut].concat(Mt).join("."),Gt=ft[bt].split("."),ne=Gt.pop(),de=Gt.join(".");gi.route(Nt,It,de,ne)})),j.descriptors&&gi.describe($,j.descriptors)}(f,R,w),this.override&&gi.override(f.id,f.overrides)),R}get(f){return this.items[f]}unregister(f){const y=this.items,w=f.id,A=this.scope;w in y&&delete y[w],A&&w in gi[A]&&(delete gi[A][w],this.override&&delete mr[w])}}var va=new class{constructor(){this.controllers=new ul(Io,"datasets",!0),this.elements=new ul(ua,"elements"),this.plugins=new ul(Object,"plugins"),this.scales=new ul(ll,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(..._){this._each("register",_)}remove(..._){this._each("unregister",_)}addControllers(..._){this._each("register",_,this.controllers)}addElements(..._){this._each("register",_,this.elements)}addPlugins(..._){this._each("register",_,this.plugins)}addScales(..._){this._each("register",_,this.scales)}getController(_){return this._get(_,this.controllers,"controller")}getElement(_){return this._get(_,this.elements,"element")}getPlugin(_){return this._get(_,this.plugins,"plugin")}getScale(_){return this._get(_,this.scales,"scale")}removeControllers(..._){this._each("unregister",_,this.controllers)}removeElements(..._){this._each("unregister",_,this.elements)}removePlugins(..._){this._each("unregister",_,this.plugins)}removeScales(..._){this._each("unregister",_,this.scales)}_each(_,f,y){[...f].forEach(w=>{const A=y||this._getRegistryForType(w);y||A.isForType(w)||A===this.plugins&&w.id?this._exec(_,A,w):_e(w,E=>{const R=y||this._getRegistryForType(E);this._exec(_,R,E)})})}_exec(_,f,y){const w=sn(_);ee(y["before"+w],[],y),f[_](y),ee(y["after"+w],[],y)}_getRegistryForType(_){for(let f=0;f<this._typedRegistries.length;f++){const y=this._typedRegistries[f];if(y.isForType(_))return y}return this.plugins}_get(_,f,y){const w=f.get(_);if(void 0===w)throw new Error('"'+_+'" is not a registered '+y+".");return w}};class qo{constructor(){this._init=[]}notify(f,y,w,A){"beforeInit"===y&&(this._init=this._createDescriptors(f,!0),this._notify(this._init,f,"install"));const E=A?this._descriptors(f).filter(A):this._descriptors(f),R=this._notify(E,f,y,w);return"afterDestroy"===y&&(this._notify(E,f,"stop"),this._notify(this._init,f,"uninstall")),R}_notify(f,y,w,A){A=A||{};for(const E of f){const R=E.plugin;if(!1===ee(R[w],[y,A,E.options],R)&&A.cancelable)return!1}return!0}invalidate(){Vn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(f){if(this._cache)return this._cache;const y=this._cache=this._createDescriptors(f);return this._notifyStateChanges(f),y}_createDescriptors(f,y){const w=f&&f.config,A=yi(w.options&&w.options.plugins,{}),E=function(R){const j=[],$=Object.keys(va.plugins.items);for(let st=0;st<$.length;st++)j.push(va.getPlugin($[st]));const K=R.plugins||[];for(let st=0;st<K.length;st++){const ut=K[st];-1===j.indexOf(ut)&&j.push(ut)}return j}(w);return!1!==A||y?function(R,j,$,K){const st=[],ut=R.getContext();for(let ft=0;ft<j.length;ft++){const bt=j[ft],Mt=dd($[bt.id],K);null!==Mt&&st.push({plugin:bt,options:Lc(R.config,bt,Mt,ut)})}return st}(f,E,A,y):[]}_notifyStateChanges(f){const y=this._oldCache||[],w=this._cache,A=(E,R)=>E.filter(j=>!R.some($=>j.plugin.id===$.plugin.id));this._notify(A(y,w),f,"stop"),this._notify(A(w,y),f,"start")}}function dd(_,f){return f||!1!==_?!0===_?{}:_:null}function Lc(_,f,y,w){const A=_.pluginScopeKeys(f),E=_.getOptionScopes(y,A);return _.createResolver(E,w,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bs(_,f){return((f.datasets||{})[_]||{}).indexAxis||f.indexAxis||(gi.datasets[_]||{}).indexAxis||"x"}function hc(_,f){return"x"===_||"y"===_?_:f.axis||("top"===(y=f.position)||"bottom"===y?"x":"left"===y||"right"===y?"y":void 0)||_.charAt(0).toLowerCase();var y}function iu(_){const f=_.options||(_.options={});f.plugins=yi(f.plugins,{}),f.scales=function(y,w){const A=mr[y.type]||{scales:{}},E=w.scales||{},R=bs(y.type,w),j=Object.create(null),$=Object.create(null);return Object.keys(E).forEach(K=>{const st=E[K];if(!Zn(st))return console.error(`Invalid scale configuration for scale: ${K}`);if(st._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${K}`);const ut=hc(K,st),ft=ut===R?"_index_":"_value_",bt=A.scales||{};j[ut]=j[ut]||K,$[K]=nn(Object.create(null),[{axis:ut},st,bt[ut],bt[ft]])}),y.data.datasets.forEach(K=>{const st=K.type||y.type,ut=K.indexAxis||bs(st,w),ft=(mr[st]||{}).scales||{};Object.keys(ft).forEach(bt=>{const Mt=function(Nt,Gt){let ne=Nt;return"_index_"===Nt?ne=Gt:"_value_"===Nt&&(ne="x"===Gt?"y":"x"),ne}(bt,ut),It=K[Mt+"AxisID"]||j[Mt]||Mt;$[It]=$[It]||Object.create(null),nn($[It],[{axis:Mt},E[It],ft[bt]])})}),Object.keys($).forEach(K=>{const st=$[K];nn(st,[gi.scales[st.type],gi.scale])}),$}(_,f)}function fc(_){return(_=_||{}).datasets=_.datasets||[],_.labels=_.labels||[],_}const Bo=new Map,ya=new Set;function Po(_,f){let y=Bo.get(_);return y||(y=f(),Bo.set(_,y),ya.add(y)),y}const Yo=(_,f,y)=>{const w=Jn(f,y);void 0!==w&&_.add(w)};class ru{constructor(f){var y;this._config=((y=(y=f)||{}).data=fc(y.data),iu(y),y),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(f){this._config.type=f}get data(){return this._config.data}set data(f){this._config.data=fc(f)}get options(){return this._config.options}set options(f){this._config.options=f}get plugins(){return this._config.plugins}update(){const f=this._config;this.clearCache(),iu(f)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(f){return Po(f,()=>[[`datasets.${f}`,""]])}datasetAnimationScopeKeys(f,y){return Po(`${f}.transition.${y}`,()=>[[`datasets.${f}.transitions.${y}`,`transitions.${y}`],[`datasets.${f}`,""]])}datasetElementScopeKeys(f,y){return Po(`${f}-${y}`,()=>[[`datasets.${f}.elements.${y}`,`datasets.${f}`,`elements.${y}`,""]])}pluginScopeKeys(f){const y=f.id;return Po(`${this.type}-plugin-${y}`,()=>[[`plugins.${y}`,...f.additionalOptionScopes||[]]])}_cachedScopes(f,y){const w=this._scopeCache;let A=w.get(f);return A&&!y||(A=new Map,w.set(f,A)),A}getOptionScopes(f,y,w){const{options:A,type:E}=this,R=this._cachedScopes(f,w),j=R.get(y);if(j)return j;const $=new Set;y.forEach(st=>{f&&($.add(f),st.forEach(ut=>Yo($,f,ut))),st.forEach(ut=>Yo($,A,ut)),st.forEach(ut=>Yo($,mr[E]||{},ut)),st.forEach(ut=>Yo($,gi,ut)),st.forEach(ut=>Yo($,vr,ut))});const K=Array.from($);return 0===K.length&&K.push(Object.create(null)),ya.has(y)&&R.set(y,K),K}chartOptionScopes(){const{options:f,type:y}=this;return[f,mr[y]||{},gi.datasets[y]||{},{type:y},gi,vr]}resolveNamedOptions(f,y,w,A=[""]){const E={$shared:!0},{resolver:R,subPrefixes:j}=cl(this._resolverCache,f,A);let $=R;(function(K,st){const{isScriptable:ut,isIndexable:ft}=fr(K);for(const bt of st){const Mt=ut(bt),It=ft(bt),Nt=(It||Mt)&&K[bt];if(Mt&&(tr(Nt)||Oc(Nt))||It&&Ei(Nt))return!0}return!1})(R,y)&&(E.$shared=!1,$=_o(R,w=tr(w)?w():w,this.createResolver(f,w,j)));for(const K of y)E[K]=$[K];return E}createResolver(f,y,w=[""],A){const{resolver:E}=cl(this._resolverCache,f,w);return Zn(y)?_o(E,y,void 0,A):E}}function cl(_,f,y){let w=_.get(f);w||(w=new Map,_.set(f,w));const A=y.join();let E=w.get(A);return E||(E={resolver:Is(f,y),subPrefixes:y.filter(R=>!R.toLowerCase().includes("hover"))},w.set(A,E)),E}const Oc=_=>Zn(_)&&Object.getOwnPropertyNames(_).reduce((f,y)=>f||tr(_[y]),!1),Vd=["top","bottom","left","right","chartArea"];function Bc(_,f){return"top"===_||"bottom"===_||-1===Vd.indexOf(_)&&"x"===f}function ou(_,f){return function(y,w){return y[_]===w[_]?y[f]-w[f]:y[_]-w[_]}}function hd(_){const f=_.chart,y=f.options.animation;f.notifyPlugins("afterRender"),ee(y&&y.onComplete,[_],f)}function fd(_){const f=_.chart,y=f.options.animation;ee(y&&y.onProgress,[_],f)}function gd(_){return bu()&&"string"==typeof _?_=document.getElementById(_):_&&_.length&&(_=_[0]),_&&_.canvas&&(_=_.canvas),_}const _s={},El=_=>{const f=gd(_);return Object.values(_s).filter(y=>y.canvas===f).pop()};function pd(_,f,y){const w=Object.keys(_);for(const A of w){const E=+A;if(E>=f){const R=_[A];delete _[A],(y>0||E>f)&&(_[E+y]=R)}}}class Zi{constructor(f,y){const w=this.config=new ru(y),A=gd(f),E=El(A);if(E)throw new Error("Canvas is already in use. Chart with ID '"+E.id+"' must be destroyed before the canvas can be reused.");const R=w.createResolver(w.chartOptionScopes(),this.getContext());this.platform=new(w.platform||uc(A)),this.platform.updateConfig(w);const j=this.platform.acquireContext(A,R.aspectRatio),$=j&&j.canvas,K=$&&$.height,st=$&&$.width;this.id=mo(),this.ctx=j,this.canvas=$,this.width=st,this.height=K,this._options=R,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bn(ut=>this.update(ut),R.resizeDelay||0),this._dataChanges=[],_s[this.id]=this,j&&$?(on.listen(this,"complete",hd),on.listen(this,"progress",fd),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:f,maintainAspectRatio:y},width:w,height:A,_aspectRatio:E}=this;return Vn(f)?y&&E?E:A?w/A:null:f}get data(){return this.config.data}set data(f){this.config.data=f}get options(){return this._options}set options(f){this.config.options=f}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Pe(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return He(this.canvas,this.ctx),this}stop(){return on.stop(this),this}resize(f,y){on.running(this)?this._resizeBeforeDraw={width:f,height:y}:this._resize(f,y)}_resize(f,y){const w=this.options,R=this.platform.getMaximumSize(this.canvas,f,y,w.maintainAspectRatio&&this.aspectRatio),j=w.devicePixelRatio||this.platform.getDevicePixelRatio(),$=this.width?"resize":"attach";this.width=R.width,this.height=R.height,this._aspectRatio=this.aspectRatio,Pe(this,j,!0)&&(this.notifyPlugins("resize",{size:R}),ee(w.onResize,[this,R],this),this.attached&&this._doResize($)&&this.render())}ensureScalesHaveIDs(){_e(this.options.scales||{},(f,y)=>{f.id=y})}buildOrUpdateScales(){const f=this.options,y=f.scales,w=this.scales,A=Object.keys(w).reduce((R,j)=>(R[j]=!1,R),{});let E=[];y&&(E=E.concat(Object.keys(y).map(R=>{const j=y[R],$=hc(R,j),K="r"===$,st="x"===$;return{options:j,dposition:K?"chartArea":st?"bottom":"left",dtype:K?"radialLinear":st?"category":"linear"}}))),_e(E,R=>{const j=R.options,$=j.id,K=hc($,j),st=yi(j.type,R.dtype);void 0!==j.position&&Bc(j.position,K)===Bc(R.dposition)||(j.position=R.dposition),A[$]=!0;let ut=null;$ in w&&w[$].type===st?ut=w[$]:(ut=new(va.getScale(st))({id:$,type:st,ctx:this.ctx,chart:this}),w[ut.id]=ut),ut.init(j,f)}),_e(A,(R,j)=>{R||delete w[j]}),_e(w,R=>{Uo.configure(this,R,R.options),Uo.addBox(this,R)})}_updateMetasets(){const f=this._metasets,y=this.data.datasets.length,w=f.length;if(f.sort((A,E)=>A.index-E.index),w>y){for(let A=y;A<w;++A)this._destroyDatasetMeta(A);f.splice(y,w-y)}this._sortedMetasets=f.slice(0).sort(ou("order","index"))}_removeUnreferencedMetasets(){const{_metasets:f,data:{datasets:y}}=this;f.length>y.length&&delete this._stacks,f.forEach((w,A)=>{0===y.filter(E=>E===w._dataset).length&&this._destroyDatasetMeta(A)})}buildOrUpdateControllers(){const f=[],y=this.data.datasets;let w,A;for(this._removeUnreferencedMetasets(),w=0,A=y.length;w<A;w++){const E=y[w];let R=this.getDatasetMeta(w);const j=E.type||this.config.type;if(R.type&&R.type!==j&&(this._destroyDatasetMeta(w),R=this.getDatasetMeta(w)),R.type=j,R.indexAxis=E.indexAxis||bs(j,this.options),R.order=E.order||0,R.index=w,R.label=""+E.label,R.visible=this.isDatasetVisible(w),R.controller)R.controller.updateIndex(w),R.controller.linkScales();else{const $=va.getController(j),{datasetElementType:K,dataElementType:st}=gi.datasets[j];Object.assign($.prototype,{dataElementType:va.getElement(st),datasetElementType:K&&va.getElement(K)}),R.controller=new $(this,w),f.push(R.controller)}}return this._updateMetasets(),f}_resetElements(){_e(this.data.datasets,(f,y)=>{this.getDatasetMeta(y).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(f){const y=this.config;y.update();const w=this._options=y.createResolver(y.chartOptionScopes(),this.getContext()),A=this._animationsDisabled=!w.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:f,cancelable:!0}))return;const E=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let R=0;for(let K=0,st=this.data.datasets.length;K<st;K++){const{controller:ut}=this.getDatasetMeta(K),ft=!A&&-1===E.indexOf(ut);ut.buildOrUpdateElements(ft),R=Math.max(+ut.getMaxOverflow(),R)}R=this._minPadding=w.layout.autoPadding?R:0,this._updateLayout(R),A||_e(E,K=>{K.reset()}),this._updateDatasets(f),this.notifyPlugins("afterUpdate",{mode:f}),this._layers.sort(ou("z","_idx"));const{_active:j,_lastEvent:$}=this;$?this._eventHandler($,!0):j.length&&this._updateHoverStyles(j,j,!0),this.render()}_updateScales(){_e(this.scales,f=>{Uo.removeBox(this,f)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const f=this.options,y=new Set(Object.keys(this._listeners)),w=new Set(f.events);so(y,w)&&!!this._responsiveListeners===f.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:f}=this,y=this._getUniformDataChanges()||[];for(const{method:w,start:A,count:E}of y)pd(f,A,"_removeElements"===w?-E:E)}_getUniformDataChanges(){const f=this._dataChanges;if(!f||!f.length)return;this._dataChanges=[];const y=this.data.datasets.length,w=E=>new Set(f.filter(R=>R[0]===E).map((R,j)=>j+","+R.splice(1).join(","))),A=w(0);for(let E=1;E<y;E++)if(!so(A,w(E)))return;return Array.from(A).map(E=>E.split(",")).map(E=>({method:E[1],start:+E[2],count:+E[3]}))}_updateLayout(f){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Uo.update(this,this.width,this.height,f);const y=this.chartArea,w=y.width<=0||y.height<=0;this._layers=[],_e(this.boxes,A=>{w&&"chartArea"===A.position||(A.configure&&A.configure(),this._layers.push(...A._layers()))},this),this._layers.forEach((A,E)=>{A._idx=E}),this.notifyPlugins("afterLayout")}_updateDatasets(f){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:f,cancelable:!0})){for(let y=0,w=this.data.datasets.length;y<w;++y)this.getDatasetMeta(y).controller.configure();for(let y=0,w=this.data.datasets.length;y<w;++y)this._updateDataset(y,tr(f)?f({datasetIndex:y}):f);this.notifyPlugins("afterDatasetsUpdate",{mode:f})}}_updateDataset(f,y){const w=this.getDatasetMeta(f),A={meta:w,index:f,mode:y,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",A)&&(w.controller._update(y),A.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",A))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(on.has(this)?this.attached&&!on.running(this)&&on.start(this):(this.draw(),hd({chart:this})))}draw(){let f;if(this._resizeBeforeDraw){const{width:w,height:A}=this._resizeBeforeDraw;this._resize(w,A),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const y=this._layers;for(f=0;f<y.length&&y[f].z<=0;++f)y[f].draw(this.chartArea);for(this._drawDatasets();f<y.length;++f)y[f].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(f){const y=this._sortedMetasets,w=[];let A,E;for(A=0,E=y.length;A<E;++A){const R=y[A];f&&!R.visible||w.push(R)}return w}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const f=this.getSortedVisibleDatasetMetas();for(let y=f.length-1;y>=0;--y)this._drawDataset(f[y]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(f){const y=this.ctx,w=f._clip,A=!w.disabled,E=this.chartArea,R={meta:f,index:f.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",R)&&(A&&Ii(y,{left:!1===w.left?0:E.left-w.left,right:!1===w.right?this.width:E.right+w.right,top:!1===w.top?0:E.top-w.top,bottom:!1===w.bottom?this.height:E.bottom+w.bottom}),f.controller.draw(),A&&ri(y),R.cancelable=!1,this.notifyPlugins("afterDatasetDraw",R))}isPointInArea(f){return li(f,this.chartArea,this._minPadding)}getElementsAtEventForMode(f,y,w,A){const E=Nc.modes[y];return"function"==typeof E?E(this,f,w,A):[]}getDatasetMeta(f){const y=this.data.datasets[f],w=this._metasets;let A=w.filter(E=>E&&E._dataset===y).pop();return A||(A={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:y&&y.order||0,index:f,_dataset:y,_parsed:[],_sorted:!1},w.push(A)),A}getContext(){return this.$context||(this.$context=Ns(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(f){const y=this.data.datasets[f];if(!y)return!1;const w=this.getDatasetMeta(f);return"boolean"==typeof w.hidden?!w.hidden:!y.hidden}setDatasetVisibility(f,y){this.getDatasetMeta(f).hidden=!y}toggleDataVisibility(f){this._hiddenIndices[f]=!this._hiddenIndices[f]}getDataVisibility(f){return!this._hiddenIndices[f]}_updateVisibility(f,y,w){const A=w?"show":"hide",E=this.getDatasetMeta(f),R=E.controller._resolveAnimations(void 0,A);Fi(y)?(E.data[y].hidden=!w,this.update()):(this.setDatasetVisibility(f,w),R.update(E,{visible:w}),this.update(j=>j.datasetIndex===f?A:void 0))}hide(f,y){this._updateVisibility(f,y,!1)}show(f,y){this._updateVisibility(f,y,!0)}_destroyDatasetMeta(f){const y=this._metasets[f];y&&y.controller&&y.controller._destroy(),delete this._metasets[f]}_stop(){let f,y;for(this.stop(),on.remove(this),f=0,y=this.data.datasets.length;f<y;++f)this._destroyDatasetMeta(f)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:f,ctx:y}=this;this._stop(),this.config.clearCache(),f&&(this.unbindEvents(),He(f,y),this.platform.releaseContext(y),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete _s[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...f){return this.canvas.toDataURL(...f)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const f=this._listeners,y=this.platform,w=(E,R)=>{y.addEventListener(this,E,R),f[E]=R},A=(E,R,j)=>{E.offsetX=R,E.offsetY=j,this._eventHandler(E)};_e(this.options.events,E=>w(E,A))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const f=this._responsiveListeners,y=this.platform,w=($,K)=>{y.addEventListener(this,$,K),f[$]=K},A=($,K)=>{f[$]&&(y.removeEventListener(this,$,K),delete f[$])},E=($,K)=>{this.canvas&&this.resize($,K)};let R;const j=()=>{A("attach",j),this.attached=!0,this.resize(),w("resize",E),w("detach",R)};R=()=>{this.attached=!1,A("resize",E),this._stop(),this._resize(0,0),w("attach",j)},y.isAttached(this.canvas)?j():R()}unbindEvents(){_e(this._listeners,(f,y)=>{this.platform.removeEventListener(this,y,f)}),this._listeners={},_e(this._responsiveListeners,(f,y)=>{this.platform.removeEventListener(this,y,f)}),this._responsiveListeners=void 0}updateHoverStyle(f,y,w){const A=w?"set":"remove";let E,R,j,$;for("dataset"===y&&(E=this.getDatasetMeta(f[0].datasetIndex),E.controller["_"+A+"DatasetHoverStyle"]()),j=0,$=f.length;j<$;++j){R=f[j];const K=R&&this.getDatasetMeta(R.datasetIndex).controller;K&&K[A+"HoverStyle"](R.element,R.datasetIndex,R.index)}}getActiveElements(){return this._active||[]}setActiveElements(f){const y=this._active||[],w=f.map(({datasetIndex:A,index:E})=>{const R=this.getDatasetMeta(A);if(!R)throw new Error("No dataset found at index "+A);return{datasetIndex:A,element:R.data[E],index:E}});!Qe(w,y)&&(this._active=w,this._lastEvent=null,this._updateHoverStyles(w,y))}notifyPlugins(f,y,w){return this._plugins.notify(this,f,y,w)}_updateHoverStyles(f,y,w){const A=this.options.hover,E=($,K)=>$.filter(st=>!K.some(ut=>st.datasetIndex===ut.datasetIndex&&st.index===ut.index)),R=E(y,f),j=w?f:E(f,y);R.length&&this.updateHoverStyle(R,A.mode,!1),j.length&&A.mode&&this.updateHoverStyle(j,A.mode,!0)}_eventHandler(f,y){const w={event:f,replay:y,cancelable:!0,inChartArea:this.isPointInArea(f)},A=R=>(R.options.events||this.options.events).includes(f.native.type);if(!1===this.notifyPlugins("beforeEvent",w,A))return;const E=this._handleEvent(f,y,w.inChartArea);return w.cancelable=!1,this.notifyPlugins("afterEvent",w,A),(E||w.changed)&&this.render(),this}_handleEvent(f,y,w){const{_active:A=[],options:E}=this,j=this._getActiveElements(f,A,w,y),$=hr(f),K=(ut=f,w&&"mouseout"!==ut.type?$?this._lastEvent:ut:null);var ut;w&&(this._lastEvent=null,ee(E.onHover,[f,j,this],this),$&&ee(E.onClick,[f,j,this],this));const st=!Qe(j,A);return(st||y)&&(this._active=j,this._updateHoverStyles(j,A,y)),this._lastEvent=K,st}_getActiveElements(f,y,w,A){if("mouseout"===f.type)return[];if(!w)return y;const E=this.options.hover;return this.getElementsAtEventForMode(f,E.mode,E,A)}}const au=()=>_e(Zi.instances,_=>_._plugins.invalidate()),xa=!0;function dl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(Zi,{defaults:{enumerable:xa,value:gi},instances:{enumerable:xa,value:_s},overrides:{enumerable:xa,value:mr},registry:{enumerable:xa,value:va},version:{enumerable:xa,value:"3.8.0"},getChart:{enumerable:xa,value:El},register:{enumerable:xa,value:(..._)=>{va.add(..._),au()}},unregister:{enumerable:xa,value:(..._)=>{va.remove(..._),au()}}});class Eo{constructor(f){this.options=f||{}}formats(){return dl()}parse(f,y){return dl()}format(f,y){return dl()}add(f,y,w){return dl()}diff(f,y,w){return dl()}startOf(f,y,w){return dl()}endOf(f,y){return dl()}}Eo.override=function(_){Object.assign(Eo.prototype,_)};var hl={_date:Eo};function Hs(_){const f=_.iScale,y=function(K,st){if(!K._cache.$bar){const ut=K.getMatchingVisibleMetas(st);let ft=[];for(let bt=0,Mt=ut.length;bt<Mt;bt++)ft=ft.concat(ut[bt].controller.getAllParsedValues(K));K._cache.$bar=wi(ft.sort((bt,Mt)=>bt-Mt))}return K._cache.$bar}(f,_.type);let w,A,E,R,j=f._length;const $=()=>{32767!==E&&-32768!==E&&(Fi(R)&&(j=Math.min(j,Math.abs(E-R)||j)),R=E)};for(w=0,A=y.length;w<A;++w)E=f.getPixelForValue(y[w]),$();for(R=void 0,w=0,A=f.ticks.length;w<A;++w)E=f.getPixelForTick(w),$();return j}function Lu(_,f,y,w){return Ei(_)?function(A,E,R,j){const $=R.parse(A[0],j),K=R.parse(A[1],j),st=Math.min($,K),ut=Math.max($,K);let ft=st,bt=ut;Math.abs(st)>Math.abs(ut)&&(ft=ut,bt=st),E[R.axis]=bt,E._custom={barStart:ft,barEnd:bt,start:$,end:K,min:st,max:ut}}(_,f,y,w):f[y.axis]=y.parse(_,w),f}function v(_,f,y,w){const A=_.iScale,E=_.vScale,R=A.getLabels(),j=A===E,$=[];let K,st,ut,ft;for(K=y,st=y+w;K<st;++K)ft=f[K],ut={},ut[A.axis]=j||A.parse(R[K],K),$.push(Lu(ft,ut,E,K));return $}function T(_){return _&&void 0!==_.barStart&&void 0!==_.barEnd}function B(_,f,y,w){let A=f.borderSkipped;const E={};if(!A)return void(_.borderSkipped=E);const{start:R,end:j,reverse:$,top:K,bottom:st}=function(ut){let ft,bt,Mt,It,Nt;return ut.horizontal?(ft=ut.base>ut.x,bt="left",Mt="right"):(ft=ut.base<ut.y,bt="bottom",Mt="top"),ft?(It="end",Nt="start"):(It="start",Nt="end"),{start:bt,end:Mt,reverse:ft,top:It,bottom:Nt}}(_);"middle"===A&&y&&(_.enableBorderRadius=!0,(y._top||0)===w?A=K:(y._bottom||0)===w?A=st:(E[U(st,R,j,$)]=!0,A=K)),E[U(A,R,j,$)]=!0,_.borderSkipped=E}function U(_,f,y,w){var A,E,R;return w?(R=y,_=et(_=(A=_)===(E=f)?R:A===R?E:A,y,f)):_=et(_,f,y),_}function et(_,f,y){return"start"===_?f:"end"===_?y:_}function ot(_,{inflateAmount:f},y){_.inflateAmount="auto"===f?1===y?.33:0:f}class xt extends Io{parsePrimitiveData(f,y,w,A){return v(f,y,w,A)}parseArrayData(f,y,w,A){return v(f,y,w,A)}parseObjectData(f,y,w,A){const{iScale:E,vScale:R}=f,{xAxisKey:j="x",yAxisKey:$="y"}=this._parsing,K="x"===E.axis?j:$,st="x"===R.axis?j:$,ut=[];let ft,bt,Mt,It;for(ft=w,bt=w+A;ft<bt;++ft)It=y[ft],Mt={},Mt[E.axis]=E.parse(Jn(It,K),ft),ut.push(Lu(Jn(It,st),Mt,R,ft));return ut}updateRangeFromParsed(f,y,w,A){super.updateRangeFromParsed(f,y,w,A);const E=w._custom;E&&y===this._cachedMeta.vScale&&(f.min=Math.min(f.min,E.min),f.max=Math.max(f.max,E.max))}getMaxOverflow(){return 0}getLabelAndValue(f){const y=this._cachedMeta,{iScale:w,vScale:A}=y,E=this.getParsed(f),R=E._custom,j=T(R)?"["+R.start+", "+R.end+"]":""+A.getLabelForValue(E[A.axis]);return{label:""+w.getLabelForValue(E[w.axis]),value:j}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(f){const y=this._cachedMeta;this.updateElements(y.data,0,y.data.length,f)}updateElements(f,y,w,A){const E="reset"===A,{index:R,_cachedMeta:{vScale:j}}=this,$=j.getBasePixel(),K=j.isHorizontal(),st=this._getRuler(),ut=this.resolveDataElementOptions(y,A),ft=this.getSharedOptions(ut),bt=this.includeOptions(A,ft);this.updateSharedOptions(ft,A,ut);for(let Mt=y;Mt<y+w;Mt++){const It=this.getParsed(Mt),Nt=E||Vn(It[j.axis])?{base:$,head:$}:this._calculateBarValuePixels(Mt),Gt=this._calculateBarIndexPixels(Mt,st),ne=(It._stacks||{})[j.axis],de={horizontal:K,base:Nt.base,enableBorderRadius:!ne||T(It._custom)||R===ne._top||R===ne._bottom,x:K?Nt.head:Gt.center,y:K?Gt.center:Nt.head,height:K?Gt.size:Math.abs(Nt.size),width:K?Math.abs(Nt.size):Gt.size};bt&&(de.options=ft||this.resolveDataElementOptions(Mt,f[Mt].active?"active":A));const ye=de.options||f[Mt].options;B(de,ye,ne,R),ot(de,ye,st.ratio),this.updateElement(f[Mt],Mt,de,A)}}_getStacks(f,y){const w=this._cachedMeta.iScale,A=w.getMatchingVisibleMetas(this._type),E=w.options.stacked,R=A.length,j=[];let $,K;for($=0;$<R;++$)if(K=A[$],K.controller.options.grouped){if(void 0!==y){const st=K.controller.getParsed(y)[K.controller._cachedMeta.vScale.axis];if(Vn(st)||isNaN(st))continue}if((!1===E||-1===j.indexOf(K.stack)||void 0===E&&void 0===K.stack)&&j.push(K.stack),K.index===f)break}return j.length||j.push(void 0),j}_getStackCount(f){return this._getStacks(void 0,f).length}_getStackIndex(f,y,w){const A=this._getStacks(f,w),E=void 0!==y?A.indexOf(y):-1;return-1===E?A.length-1:E}_getRuler(){const f=this.options,y=this._cachedMeta,w=y.iScale,A=[];let E,R;for(E=0,R=y.data.length;E<R;++E)A.push(w.getPixelForValue(this.getParsed(E)[w.axis],E));const j=f.barThickness;return{min:j||Hs(y),pixels:A,start:w._startPixel,end:w._endPixel,stackCount:this._getStackCount(),scale:w,grouped:f.grouped,ratio:j?1:f.categoryPercentage*f.barPercentage}}_calculateBarValuePixels(f){const{_cachedMeta:{vScale:y,_stacked:w},options:{base:A,minBarLength:E}}=this,R=A||0,j=this.getParsed(f),$=j._custom,K=T($);let st,ut,ft=j[y.axis],bt=0,Mt=w?this.applyStack(y,j,w):ft;Mt!==ft&&(bt=Mt-ft,Mt=ft),K&&(ft=$.barStart,Mt=$.barEnd-$.barStart,0!==ft&&kr(ft)!==kr($.barEnd)&&(bt=0),bt+=ft);const It=Vn(A)||K?bt:A;let Nt=y.getPixelForValue(It);if(st=this.chart.getDataVisibility(f)?y.getPixelForValue(bt+Mt):Nt,ut=st-Nt,Math.abs(ut)<E){$e=y,wn=R,ut=(0!==(qe=ut)?kr(qe):($e.isHorizontal()?1:-1)*($e.min>=wn?1:-1))*E,ft===R&&(Nt-=ut/2);const Gt=y.getPixelForDecimal(0),ne=y.getPixelForDecimal(1),de=Math.min(Gt,ne),ye=Math.max(Gt,ne);Nt=Math.max(Math.min(Nt,ye),de),st=Nt+ut}var qe,$e,wn;if(Nt===y.getPixelForValue(R)){const Gt=kr(ut)*y.getLineWidthForValue(R)/2;Nt+=Gt,ut-=Gt}return{size:ut,base:Nt,head:st,center:st+ut/2}}_calculateBarIndexPixels(f,y){const w=y.scale,A=this.options,E=A.skipNull,R=yi(A.maxBarThickness,1/0);let j,$;if(y.grouped){const K=E?this._getStackCount(f):y.stackCount,st="flex"===A.barThickness?function(ft,bt,Mt,It){const Nt=bt.pixels,Gt=Nt[ft];let ne=ft>0?Nt[ft-1]:null,de=ft<Nt.length-1?Nt[ft+1]:null;const ye=Mt.categoryPercentage;null===ne&&(ne=Gt-(null===de?bt.end-bt.start:de-Gt)),null===de&&(de=Gt+Gt-ne);const qe=Gt-(Gt-Math.min(ne,de))/2*ye;return{chunk:Math.abs(de-ne)/2*ye/It,ratio:Mt.barPercentage,start:qe}}(f,y,A,K):function(ft,bt,Mt,It){const Nt=Mt.barThickness;let Gt,ne;return Vn(Nt)?(Gt=bt.min*Mt.categoryPercentage,ne=Mt.barPercentage):(Gt=Nt*It,ne=1),{chunk:Gt/It,ratio:ne,start:bt.pixels[ft]-Gt/2}}(f,y,A,K),ut=this._getStackIndex(this.index,this._cachedMeta.stack,E?f:void 0);j=st.start+st.chunk*ut+st.chunk/2,$=Math.min(R,st.chunk*st.ratio)}else j=w.getPixelForValue(this.getParsed(f)[w.axis],f),$=Math.min(R,y.min*y.ratio);return{base:j-$/2,head:j+$/2,center:j,size:$}}draw(){const f=this._cachedMeta,y=f.vScale,w=f.data,A=w.length;let E=0;for(;E<A;++E)null!==this.getParsed(E)[y.axis]&&w[E].draw(this._ctx)}}xt.id="bar",xt.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},xt.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Tt extends Io{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(f,y,w,A){const E=super.parsePrimitiveData(f,y,w,A);for(let R=0;R<E.length;R++)E[R]._custom=this.resolveDataElementOptions(R+w).radius;return E}parseArrayData(f,y,w,A){const E=super.parseArrayData(f,y,w,A);for(let R=0;R<E.length;R++)E[R]._custom=yi(y[w+R][2],this.resolveDataElementOptions(R+w).radius);return E}parseObjectData(f,y,w,A){const E=super.parseObjectData(f,y,w,A);for(let R=0;R<E.length;R++){const j=y[w+R];E[R]._custom=yi(j&&j.r&&+j.r,this.resolveDataElementOptions(R+w).radius)}return E}getMaxOverflow(){const f=this._cachedMeta.data;let y=0;for(let w=f.length-1;w>=0;--w)y=Math.max(y,f[w].size(this.resolveDataElementOptions(w))/2);return y>0&&y}getLabelAndValue(f){const y=this._cachedMeta,{xScale:w,yScale:A}=y,E=this.getParsed(f),R=w.getLabelForValue(E.x),j=A.getLabelForValue(E.y),$=E._custom;return{label:y.label,value:"("+R+", "+j+($?", "+$:"")+")"}}update(f){const y=this._cachedMeta.data;this.updateElements(y,0,y.length,f)}updateElements(f,y,w,A){const E="reset"===A,{iScale:R,vScale:j}=this._cachedMeta,$=this.resolveDataElementOptions(y,A),K=this.getSharedOptions($),st=this.includeOptions(A,K),ut=R.axis,ft=j.axis;for(let bt=y;bt<y+w;bt++){const Mt=f[bt],It=!E&&this.getParsed(bt),Nt={},Gt=Nt[ut]=E?R.getPixelForDecimal(.5):R.getPixelForValue(It[ut]),ne=Nt[ft]=E?j.getBasePixel():j.getPixelForValue(It[ft]);Nt.skip=isNaN(Gt)||isNaN(ne),st&&(Nt.options=this.resolveDataElementOptions(bt,Mt.active?"active":A),E&&(Nt.options.radius=0)),this.updateElement(Mt,bt,Nt,A)}this.updateSharedOptions(K,A,$)}resolveDataElementOptions(f,y){const w=this.getParsed(f);let A=super.resolveDataElementOptions(f,y);A.$shared&&(A=Object.assign({},A,{$shared:!1}));const E=A.radius;return"active"!==y&&(A.radius=0),A.radius+=yi(w&&w._custom,E),A}}Tt.id="bubble",Tt.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Tt.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Et extends Io{constructor(f,y){super(f,y),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(f,y){const w=this.getDataset().data,A=this._cachedMeta;if(!1===this._parsing)A._parsed=w;else{let E,R,j=$=>+w[$];if(Zn(w[f])){const{key:$="value"}=this._parsing;j=K=>+Jn(w[K],$)}for(E=f,R=f+y;E<R;++E)A._parsed[E]=j(E)}}_getRotation(){return zr(this.options.rotation-90)}_getCircumference(){return zr(this.options.circumference)}_getRotationExtents(){let f=ir,y=-ir;for(let w=0;w<this.chart.data.datasets.length;++w)if(this.chart.isDatasetVisible(w)){const A=this.chart.getDatasetMeta(w).controller,E=A._getRotation(),R=A._getCircumference();f=Math.min(f,E),y=Math.max(y,E+R)}return{rotation:f,circumference:y-f}}update(f){const y=this.chart,{chartArea:w}=y,A=this._cachedMeta,E=A.data,R=this.getMaxBorderWidth()+this.getMaxOffset(E)+this.options.spacing,j=Math.max((Math.min(w.width,w.height)-R)/2,0),$=Math.min(To(this.options.cutout,j),1),K=this._getRingWeight(this.index),{circumference:st,rotation:ut}=this._getRotationExtents(),{ratioX:ft,ratioY:bt,offsetX:Mt,offsetY:It}=function(qe,$e,wn){let rn=1,$n=1,un=0,ni=0;if($e<ir){const Kn=qe,oi=Kn+$e,Tn=Math.cos(Kn),qn=Math.sin(Kn),nr=Math.cos(oi),rr=Math.sin(oi),Kr=(pl,go,Vo)=>ks(pl,Kn,oi,!0)?1:Math.max(go,go*wn,Vo,Vo*wn),$o=(pl,go,Vo)=>ks(pl,Kn,oi,!0)?-1:Math.min(go,go*wn,Vo,Vo*wn),Jr=Kr(0,Tn,nr),na=Kr(Ar,qn,rr),Sa=$o(Ai,Tn,nr),Ji=$o(Ai+Ar,qn,rr);rn=(Jr-Sa)/2,$n=(na-Ji)/2,un=-(Jr+Sa)/2,ni=-(na+Ji)/2}return{ratioX:rn,ratioY:$n,offsetX:un,offsetY:ni}}(ut,st,$),ne=Math.max(Math.min((w.width-R)/ft,(w.height-R)/bt)/2,0),de=pe(this.options.radius,ne),ye=(de-Math.max(de*$,0))/this._getVisibleDatasetWeightTotal();this.offsetX=Mt*de,this.offsetY=It*de,A.total=this.calculateTotal(),this.outerRadius=de-ye*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ye*K,0),this.updateElements(E,0,E.length,f)}_circumference(f,y){const w=this.options,A=this._cachedMeta,E=this._getCircumference();return y&&w.animation.animateRotate||!this.chart.getDataVisibility(f)||null===A._parsed[f]||A.data[f].hidden?0:this.calculateCircumference(A._parsed[f]*E/ir)}updateElements(f,y,w,A){const E="reset"===A,R=this.chart,j=R.chartArea,K=(j.left+j.right)/2,st=(j.top+j.bottom)/2,ut=E&&R.options.animation.animateScale,ft=ut?0:this.innerRadius,bt=ut?0:this.outerRadius,Mt=this.resolveDataElementOptions(y,A),It=this.getSharedOptions(Mt),Nt=this.includeOptions(A,It);let Gt,ne=this._getRotation();for(Gt=0;Gt<y;++Gt)ne+=this._circumference(Gt,E);for(Gt=y;Gt<y+w;++Gt){const de=this._circumference(Gt,E),ye=f[Gt],qe={x:K+this.offsetX,y:st+this.offsetY,startAngle:ne,endAngle:ne+de,circumference:de,outerRadius:bt,innerRadius:ft};Nt&&(qe.options=It||this.resolveDataElementOptions(Gt,ye.active?"active":A)),ne+=de,this.updateElement(ye,Gt,qe,A)}this.updateSharedOptions(It,A,Mt)}calculateTotal(){const f=this._cachedMeta,y=f.data;let w,A=0;for(w=0;w<y.length;w++){const E=f._parsed[w];null===E||isNaN(E)||!this.chart.getDataVisibility(w)||y[w].hidden||(A+=Math.abs(E))}return A}calculateCircumference(f){const y=this._cachedMeta.total;return y>0&&!isNaN(f)?ir*(Math.abs(f)/y):0}getLabelAndValue(f){const w=this.chart,A=w.data.labels||[],E=hs(this._cachedMeta._parsed[f],w.options.locale);return{label:A[f]||"",value:E}}getMaxBorderWidth(f){let y=0;const w=this.chart;let A,E,R,j,$;if(!f)for(A=0,E=w.data.datasets.length;A<E;++A)if(w.isDatasetVisible(A)){R=w.getDatasetMeta(A),f=R.data,j=R.controller;break}if(!f)return 0;for(A=0,E=f.length;A<E;++A)$=j.resolveDataElementOptions(A),"inner"!==$.borderAlign&&(y=Math.max(y,$.borderWidth||0,$.hoverBorderWidth||0));return y}getMaxOffset(f){let y=0;for(let w=0,A=f.length;w<A;++w){const E=this.resolveDataElementOptions(w);y=Math.max(y,E.offset||0,E.hoverOffset||0)}return y}_getRingWeightOffset(f){let y=0;for(let w=0;w<f;++w)this.chart.isDatasetVisible(w)&&(y+=this._getRingWeight(w));return y}_getRingWeight(f){return Math.max(yi(this.chart.data.datasets[f].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Et.id="doughnut",Et.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Et.descriptors={_scriptable:_=>"spacing"!==_,_indexable:_=>"spacing"!==_},Et.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(_){const f=_.data;if(f.labels.length&&f.datasets.length){const{labels:{pointStyle:y}}=_.legend.options;return f.labels.map((w,A)=>{const E=_.getDatasetMeta(0).controller.getStyle(A);return{text:w,fillStyle:E.backgroundColor,strokeStyle:E.borderColor,lineWidth:E.borderWidth,pointStyle:y,hidden:!_.getDataVisibility(A),index:A}})}return[]}},onClick(_,f,y){y.chart.toggleDataVisibility(f.index),y.chart.update()}},tooltip:{callbacks:{title:()=>"",label(_){let f=_.label;const y=": "+_.formattedValue;return Ei(f)?(f=f.slice(),f[0]+=y):f+=y,f}}}}};class Ut extends Io{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(f){const y=this._cachedMeta,{dataset:w,data:A=[],_dataset:E}=y,R=this.chart._animationsDisabled;let{start:j,count:$}=function(st,ut,ft){const bt=ut.length;let Mt=0,It=bt;if(st._sorted){const{iScale:Nt,_parsed:Gt}=st,ne=Nt.axis,{min:de,max:ye,minDefined:qe,maxDefined:$e}=Nt.getUserBounds();qe&&(Mt=co(Math.min(Wi(Gt,Nt.axis,de).lo,ft?bt:Wi(ut,ne,Nt.getPixelForValue(de)).lo),0,bt-1)),It=$e?co(Math.max(Wi(Gt,Nt.axis,ye).hi+1,ft?0:Wi(ut,ne,Nt.getPixelForValue(ye)).hi+1),Mt,bt)-Mt:bt-Mt}return{start:Mt,count:It}}(y,A,R);this._drawStart=j,this._drawCount=$,function(st){const{xScale:ut,yScale:ft,_scaleRanges:bt}=st,Mt={xmin:ut.min,xmax:ut.max,ymin:ft.min,ymax:ft.max};if(!bt)return st._scaleRanges=Mt,!0;const It=bt.xmin!==ut.min||bt.xmax!==ut.max||bt.ymin!==ft.min||bt.ymax!==ft.max;return Object.assign(bt,Mt),It}(y)&&(j=0,$=A.length),w._chart=this.chart,w._datasetIndex=this.index,w._decimated=!!E._decimated,w.points=A;const K=this.resolveDatasetElementOptions(f);this.options.showLine||(K.borderWidth=0),K.segment=this.options.segment,this.updateElement(w,void 0,{animated:!R,options:K},f),this.updateElements(A,j,$,f)}updateElements(f,y,w,A){const E="reset"===A,{iScale:R,vScale:j,_stacked:$,_dataset:K}=this._cachedMeta,st=this.resolveDataElementOptions(y,A),ut=this.getSharedOptions(st),ft=this.includeOptions(A,ut),bt=R.axis,Mt=j.axis,{spanGaps:It,segment:Nt}=this.options,Gt=Ko(It)?It:Number.POSITIVE_INFINITY,ne=this.chart._animationsDisabled||E||"none"===A;let de=y>0&&this.getParsed(y-1);for(let ye=y;ye<y+w;++ye){const qe=f[ye],$e=this.getParsed(ye),wn=ne?qe:{},rn=Vn($e[Mt]),$n=wn[bt]=R.getPixelForValue($e[bt],ye),un=wn[Mt]=E||rn?j.getBasePixel():j.getPixelForValue($?this.applyStack(j,$e,$):$e[Mt],ye);wn.skip=isNaN($n)||isNaN(un)||rn,wn.stop=ye>0&&Math.abs($e[bt]-de[bt])>Gt,Nt&&(wn.parsed=$e,wn.raw=K.data[ye]),ft&&(wn.options=ut||this.resolveDataElementOptions(ye,qe.active?"active":A)),ne||this.updateElement(qe,ye,wn,A),de=$e}this.updateSharedOptions(ut,A,st)}getMaxOverflow(){const f=this._cachedMeta,y=f.dataset,w=y.options&&y.options.borderWidth||0,A=f.data||[];if(!A.length)return w;const E=A[0].size(this.resolveDataElementOptions(0)),R=A[A.length-1].size(this.resolveDataElementOptions(A.length-1));return Math.max(w,E,R)/2}draw(){const f=this._cachedMeta;f.dataset.updateControlPoints(this.chart.chartArea,f.iScale.axis),super.draw()}}Ut.id="line",Ut.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Ut.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class le extends Io{constructor(f,y){super(f,y),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(f){const w=this.chart,A=w.data.labels||[],E=hs(this._cachedMeta._parsed[f].r,w.options.locale);return{label:A[f]||"",value:E}}parseObjectData(f,y,w,A){return nl.bind(this)(f,y,w,A)}update(f){const y=this._cachedMeta.data;this._updateRadius(),this.updateElements(y,0,y.length,f)}getMinMax(){const y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((w,A)=>{const E=this.getParsed(A).r;!isNaN(E)&&this.chart.getDataVisibility(A)&&(E<y.min&&(y.min=E),E>y.max&&(y.max=E))}),y}_updateRadius(){const f=this.chart,y=f.chartArea,w=f.options,A=Math.min(y.right-y.left,y.bottom-y.top),E=Math.max(A/2,0),R=(E-Math.max(w.cutoutPercentage?E/100*w.cutoutPercentage:1,0))/f.getVisibleDatasetCount();this.outerRadius=E-R*this.index,this.innerRadius=this.outerRadius-R}updateElements(f,y,w,A){const E="reset"===A,R=this.chart,j=R.options.animation,$=this._cachedMeta.rScale,K=$.xCenter,st=$.yCenter,ut=$.getIndexAngle(0)-.5*Ai;let ft,bt=ut;const Mt=360/this.countVisibleElements();for(ft=0;ft<y;++ft)bt+=this._computeAngle(ft,A,Mt);for(ft=y;ft<y+w;ft++){const It=f[ft];let Nt=bt,Gt=bt+this._computeAngle(ft,A,Mt),ne=R.getDataVisibility(ft)?$.getDistanceFromCenterForValue(this.getParsed(ft).r):0;bt=Gt,E&&(j.animateScale&&(ne=0),j.animateRotate&&(Nt=Gt=ut));const de={x:K,y:st,innerRadius:0,outerRadius:ne,startAngle:Nt,endAngle:Gt,options:this.resolveDataElementOptions(ft,It.active?"active":A)};this.updateElement(It,ft,de,A)}}countVisibleElements(){let y=0;return this._cachedMeta.data.forEach((w,A)=>{!isNaN(this.getParsed(A).r)&&this.chart.getDataVisibility(A)&&y++}),y}_computeAngle(f,y,w){return this.chart.getDataVisibility(f)?zr(this.resolveDataElementOptions(f,y).angle||w):0}}le.id="polarArea",le.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},le.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(_){const f=_.data;if(f.labels.length&&f.datasets.length){const{labels:{pointStyle:y}}=_.legend.options;return f.labels.map((w,A)=>{const E=_.getDatasetMeta(0).controller.getStyle(A);return{text:w,fillStyle:E.backgroundColor,strokeStyle:E.borderColor,lineWidth:E.borderWidth,pointStyle:y,hidden:!_.getDataVisibility(A),index:A}})}return[]}},onClick(_,f,y){y.chart.toggleDataVisibility(f.index),y.chart.update()}},tooltip:{callbacks:{title:()=>"",label:_=>_.chart.data.labels[_.dataIndex]+": "+_.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class qt extends Et{}qt.id="pie",qt.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class re extends Io{getLabelAndValue(f){const y=this._cachedMeta.vScale,w=this.getParsed(f);return{label:y.getLabels()[f],value:""+y.getLabelForValue(w[y.axis])}}parseObjectData(f,y,w,A){return nl.bind(this)(f,y,w,A)}update(f){const y=this._cachedMeta,w=y.dataset,A=y.data||[],E=y.iScale.getLabels();if(w.points=A,"resize"!==f){const R=this.resolveDatasetElementOptions(f);this.options.showLine||(R.borderWidth=0),this.updateElement(w,void 0,{_loop:!0,_fullLoop:E.length===A.length,options:R},f)}this.updateElements(A,0,A.length,f)}updateElements(f,y,w,A){const E=this._cachedMeta.rScale,R="reset"===A;for(let j=y;j<y+w;j++){const $=f[j],K=this.resolveDataElementOptions(j,$.active?"active":A),st=E.getPointPositionForValue(j,this.getParsed(j).r),ut=R?E.xCenter:st.x,ft=R?E.yCenter:st.y,bt={x:ut,y:ft,angle:st.angle,skip:isNaN(ut)||isNaN(ft),options:K};this.updateElement($,j,bt,A)}}}re.id="radar",re.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},re.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class we extends Ut{}we.id="scatter",we.defaults={showLine:!1,fill:!1},we.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:_=>"("+_.label+", "+_.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Me=Object.freeze({__proto__:null,BarController:xt,BubbleController:Tt,DoughnutController:Et,LineController:Ut,PolarAreaController:le,PieController:qt,RadarController:re,ScatterController:we});function ci(_,f,y){const{startAngle:w,pixelMargin:A,x:E,y:R,outerRadius:j,innerRadius:$}=f;let K=A/j;_.beginPath(),_.arc(E,R,j,w-K,y+K),$>A?(K=A/$,_.arc(E,R,$,y+K,w-K,!0)):_.arc(E,R,A,y+Ar,w-Ar),_.closePath(),_.clip()}function di(_,f,y,w){return{x:y+_*Math.cos(f),y:w+_*Math.sin(f)}}function Vi(_,f,y,w,A){const{x:E,y:R,startAngle:j,pixelMargin:$,innerRadius:K}=f,st=Math.max(f.outerRadius+w+y-$,0),ut=K>0?K+w+y+$:0;let ft=0;const bt=A-j;if(w){const qn=((K>0?K-w:0)+(st>0?st-w:0))/2;ft=(bt-(0!==qn?bt*qn/(qn+w):bt))/2}const Mt=(bt-Math.max(.001,bt*st-y/Ai)/st)/2,It=j+Mt+ft,Nt=A-Mt-ft,{outerStart:Gt,outerEnd:ne,innerStart:de,innerEnd:ye}=function ii(_,f,y,w){const A=fs(_.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),E=(y-f)/2,R=Math.min(E,w*f/2),j=$=>{const K=(y-Math.min(E,$))*w/2;return co($,0,Math.min(E,K))};return{outerStart:j(A.outerStart),outerEnd:j(A.outerEnd),innerStart:co(A.innerStart,0,R),innerEnd:co(A.innerEnd,0,R)}}(f,ut,st,Nt-It),qe=st-Gt,$e=st-ne,wn=It+Gt/qe,rn=Nt-ne/$e,$n=ut+de,un=ut+ye,ni=It+de/$n,Kn=Nt-ye/un;if(_.beginPath(),_.arc(E,R,st,wn,rn),ne>0){const qn=di($e,rn,E,R);_.arc(qn.x,qn.y,ne,rn,Nt+Ar)}const oi=di(un,Nt,E,R);if(_.lineTo(oi.x,oi.y),ye>0){const qn=di(un,Kn,E,R);_.arc(qn.x,qn.y,ye,Nt+Ar,Kn+Math.PI)}if(_.arc(E,R,ut,Nt-ye/ut,It+de/ut,!0),de>0){const qn=di($n,ni,E,R);_.arc(qn.x,qn.y,de,ni+Math.PI,It-Ar)}const Tn=di(qe,It,E,R);if(_.lineTo(Tn.x,Tn.y),Gt>0){const qn=di(qe,wn,E,R);_.arc(qn.x,qn.y,Gt,It-Ar,wn)}_.closePath()}class An extends ua{constructor(f){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,f&&Object.assign(this,f)}inRange(f,y,w){const A=this.getProps(["x","y"],w),{angle:E,distance:R}=Ka(A,{x:f,y}),{startAngle:j,endAngle:$,innerRadius:K,outerRadius:st,circumference:ut}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],w),ft=this.options.spacing/2,bt=yi(ut,$-j)>=ir||ks(E,j,$),Mt=cs(R,K+ft,st+ft);return bt&&Mt}getCenterPoint(f){const{x:y,y:w,startAngle:A,endAngle:E,innerRadius:R,outerRadius:j}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],f),{offset:$,spacing:K}=this.options,st=(A+E)/2,ut=(R+j+K+$)/2;return{x:y+Math.cos(st)*ut,y:w+Math.sin(st)*ut}}tooltipPosition(f){return this.getCenterPoint(f)}draw(f){const{options:y,circumference:w}=this,A=(y.offset||0)/2,E=(y.spacing||0)/2;if(this.pixelMargin="inner"===y.borderAlign?.33:0,this.fullCircles=w>ir?Math.floor(w/ir):0,0===w||this.innerRadius<0||this.outerRadius<0)return;f.save();let R=0;if(A){R=A/2;const $=(this.startAngle+this.endAngle)/2;f.translate(Math.cos($)*R,Math.sin($)*R),this.circumference>=Ai&&(R=A)}f.fillStyle=y.backgroundColor,f.strokeStyle=y.borderColor,function Lt(_,f,y,w,A){const{options:E}=f,{borderWidth:R,borderJoinStyle:j}=E,$="inner"===E.borderAlign;R&&($?(_.lineWidth=2*R,_.lineJoin=j||"round"):(_.lineWidth=R,_.lineJoin=j||"bevel"),f.fullCircles&&function(K,st,ut){const{x:ft,y:bt,startAngle:Mt,pixelMargin:It,fullCircles:Nt}=st,Gt=Math.max(st.outerRadius-It,0),ne=st.innerRadius+It;let de;for(ut&&ci(K,st,Mt+ir),K.beginPath(),K.arc(ft,bt,ne,Mt+ir,Mt,!0),de=0;de<Nt;++de)K.stroke();for(K.beginPath(),K.arc(ft,bt,Gt,Mt,Mt+ir),de=0;de<Nt;++de)K.stroke()}(_,f,$),$&&ci(_,f,A),Vi(_,f,y,w,A),_.stroke())}(f,this,R,E,function($,K,st,ut){const{fullCircles:ft,startAngle:bt,circumference:Mt}=K;let It=K.endAngle;if(ft){Vi($,K,st,ut,bt+ir);for(let Nt=0;Nt<ft;++Nt)$.fill();isNaN(Mt)||(It=bt+Mt%ir,Mt%ir==0&&(It+=ir))}return Vi($,K,st,ut,It),$.fill(),It}(f,this,R,E)),f.restore()}}function Ti(_,f,y=f){_.lineCap=yi(y.borderCapStyle,f.borderCapStyle),_.setLineDash(yi(y.borderDash,f.borderDash)),_.lineDashOffset=yi(y.borderDashOffset,f.borderDashOffset),_.lineJoin=yi(y.borderJoinStyle,f.borderJoinStyle),_.lineWidth=yi(y.borderWidth,f.borderWidth),_.strokeStyle=yi(y.borderColor,f.borderColor)}function Ki(_,f,y){_.lineTo(y.x,y.y)}function xr(_,f,y={}){const w=_.length,{start:A=0,end:E=w-1}=y,{start:R,end:j}=f,$=Math.max(A,R),K=Math.min(E,j);return{count:w,start:$,loop:f.loop,ilen:K<$&&!(A<R&&E<R||A>j&&E>j)?w+K-$:K-$}}function So(_,f,y,w){const{points:A,options:E}=f,{count:R,start:j,loop:$,ilen:K}=xr(A,y,w),st=(Nt=E).stepped?er:Nt.tension||"monotone"===Nt.cubicInterpolationMode?Hi:Ki;var Nt;let ut,ft,bt,{move:Mt=!0,reverse:It}=w||{};for(ut=0;ut<=K;++ut)ft=A[(j+(It?K-ut:ut))%R],ft.skip||(Mt?(_.moveTo(ft.x,ft.y),Mt=!1):st(_,bt,ft,It,E.stepped),bt=ft);return $&&(ft=A[(j+(It?K:0))%R],st(_,bt,ft,It,E.stepped)),!!$}function Xo(_,f,y,w){const A=f.points,{count:E,start:R,ilen:j}=xr(A,y,w),{move:$=!0,reverse:K}=w||{};let st,ut,ft,bt,Mt,It,Nt=0,Gt=0;const ne=ye=>(R+(K?j-ye:ye))%E,de=()=>{bt!==Mt&&(_.lineTo(Nt,Mt),_.lineTo(Nt,bt),_.lineTo(Nt,It))};for($&&(ut=A[ne(0)],_.moveTo(ut.x,ut.y)),st=0;st<=j;++st){if(ut=A[ne(st)],ut.skip)continue;const ye=ut.x,qe=ut.y,$e=0|ye;$e===ft?(qe<bt?bt=qe:qe>Mt&&(Mt=qe),Nt=(Gt*Nt+ye)/++Gt):(de(),_.lineTo(ye,qe),ft=$e,Gt=0,bt=Mt=qe),It=qe}de()}function or(_){const f=_.options;return _._decimated||_._loop||f.tension||"monotone"===f.cubicInterpolationMode||f.stepped||f.borderDash&&f.borderDash.length?So:Xo}An.id="arc",An.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},An.defaultRoutes={backgroundColor:"backgroundColor"};const Wa="function"==typeof Path2D;class Or extends ua{constructor(f){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,f&&Object.assign(this,f)}updateControlPoints(f,y){const w=this.options;!w.tension&&"monotone"!==w.cubicInterpolationMode||w.stepped||this._pointsUpdated||(Ps(this._points,w,f,w.spanGaps?this._loop:this._fullLoop,y),this._pointsUpdated=!0)}set points(f){this._points=f,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ts(this,this.options.segment))}first(){const f=this.segments;return f.length&&this.points[f[0].start]}last(){const f=this.segments,w=f.length;return w&&this.points[f[w-1].end]}interpolate(f,y){const w=this.options,A=f[y],E=this.points,R=Oo(this,{property:y,start:A,end:A});if(!R.length)return;const j=[],$=(ut=w).stepped?rl:ut.tension||"monotone"===ut.cubicInterpolationMode?Mu:Dl;var ut;let K,st;for(K=0,st=R.length;K<st;++K){const{start:ut,end:ft}=R[K],bt=E[ut],Mt=E[ft];if(bt===Mt){j.push(bt);continue}const It=$(bt,Mt,Math.abs((A-bt[y])/(Mt[y]-bt[y])),w.stepped);It[y]=f[y],j.push(It)}return 1===j.length?j[0]:j}pathSegment(f,y,w){return or(this)(f,this,y,w)}path(f,y,w){const A=this.segments,E=or(this);let R=this._loop;y=y||0,w=w||this.points.length-y;for(const j of A)R&=E(f,this,j,{start:y,end:y+w-1});return!!R}draw(f,y,w,A){(this.points||[]).length&&(this.options||{}).borderWidth&&(f.save(),function ta(_,f,y,w){Wa&&!f.options.segment?function(A,E,R,j){let $=E._path;$||($=E._path=new Path2D,E.path($,R,j)&&$.closePath()),Ti(A,E.options),A.stroke($)}(_,f,y,w):function(A,E,R,j){const{segments:$,options:K}=E,st=or(E);for(const ut of $)Ti(A,K,ut.style),A.beginPath(),st(A,E,ut,{start:R,end:R+j-1})&&A.closePath(),A.stroke()}(_,f,y,w)}(f,this,w,A),f.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ba(_,f,y,w){const A=_.options,{[y]:E}=_.getProps([y],w);return Math.abs(f-E)<A.radius+A.hitRadius}Or.id="line",Or.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Or.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Or.descriptors={_scriptable:!0,_indexable:_=>"borderDash"!==_&&"fill"!==_};class ws extends ua{constructor(f){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,f&&Object.assign(this,f)}inRange(f,y,w){const A=this.options,{x:E,y:R}=this.getProps(["x","y"],w);return Math.pow(f-E,2)+Math.pow(y-R,2)<Math.pow(A.hitRadius+A.radius,2)}inXRange(f,y){return ba(this,f,"x",y)}inYRange(f,y){return ba(this,f,"y",y)}getCenterPoint(f){const{x:y,y:w}=this.getProps(["x","y"],f);return{x:y,y:w}}size(f){let y=(f=f||this.options||{}).radius||0;return y=Math.max(y,y&&f.hoverRadius||0),2*(y+(y&&f.borderWidth||0))}draw(f,y){const w=this.options;this.skip||w.radius<.1||!li(this,y,this.size(w)/2)||(f.strokeStyle=w.borderColor,f.lineWidth=w.borderWidth,f.fillStyle=w.backgroundColor,Un(f,w,this.x,this.y))}getRange(){const f=this.options||{};return f.radius+f.hitRadius}}function ja(_,f){const{x:y,y:w,base:A,width:E,height:R}=_.getProps(["x","y","base","width","height"],f);let j,$,K,st,ut;return _.horizontal?(ut=R/2,j=Math.min(y,A),$=Math.max(y,A),K=w-ut,st=w+ut):(ut=E/2,j=y-ut,$=y+ut,K=Math.min(w,A),st=Math.max(w,A)),{left:j,top:K,right:$,bottom:st}}function to(_,f,y,w){return _?0:co(f,y,w)}function ca(_,f,y,w){const A=null===f,E=null===y,R=_&&!(A&&E)&&ja(_,w);return R&&(A||cs(f,R.left,R.right))&&(E||cs(y,R.top,R.bottom))}function Vs(_,f){_.rect(f.x,f.y,f.w,f.h)}function zo(_,f,y={}){const w=_.x!==y.x?-f:0,A=_.y!==y.y?-f:0;return{x:_.x+w,y:_.y+A,w:_.w+((_.x+_.w!==y.x+y.w?f:0)-w),h:_.h+((_.y+_.h!==y.y+y.h?f:0)-A),radius:_.radius}}ws.id="point",ws.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},ws.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class is extends ua{constructor(f){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,f&&Object.assign(this,f)}draw(f){const{inflateAmount:y,options:{borderColor:w,backgroundColor:A}}=this,{inner:E,outer:R}=function si(_){const f=ja(_),y=f.right-f.left,w=f.bottom-f.top,A=function(R,j,$){const st=R.borderSkipped,ut=Bd(R.options.borderWidth);return{t:to(st.top,ut.top,0,$),r:to(st.right,ut.right,0,j),b:to(st.bottom,ut.bottom,0,$),l:to(st.left,ut.left,0,j)}}(_,y/2,w/2),E=function(R,j,$){const{enableBorderRadius:K}=R.getProps(["enableBorderRadius"]),st=R.options.borderRadius,ut=gs(st),ft=Math.min(j,$),bt=R.borderSkipped,Mt=K||Zn(st);return{topLeft:to(!Mt||bt.top||bt.left,ut.topLeft,0,ft),topRight:to(!Mt||bt.top||bt.right,ut.topRight,0,ft),bottomLeft:to(!Mt||bt.bottom||bt.left,ut.bottomLeft,0,ft),bottomRight:to(!Mt||bt.bottom||bt.right,ut.bottomRight,0,ft)}}(_,y/2,w/2);return{outer:{x:f.left,y:f.top,w:y,h:w,radius:E},inner:{x:f.left+A.l,y:f.top+A.t,w:y-A.l-A.r,h:w-A.t-A.b,radius:{topLeft:Math.max(0,E.topLeft-Math.max(A.t,A.l)),topRight:Math.max(0,E.topRight-Math.max(A.t,A.r)),bottomLeft:Math.max(0,E.bottomLeft-Math.max(A.b,A.l)),bottomRight:Math.max(0,E.bottomRight-Math.max(A.b,A.r))}}}}(this),j=($=R.radius).topLeft||$.topRight||$.bottomLeft||$.bottomRight?Xr:Vs;var $;f.save(),R.w===E.w&&R.h===E.h||(f.beginPath(),j(f,zo(R,y,E)),f.clip(),j(f,zo(E,-y,R)),f.fillStyle=w,f.fill("evenodd")),f.beginPath(),j(f,zo(E,y)),f.fillStyle=A,f.fill(),f.restore()}inRange(f,y,w){return ca(this,f,y,w)}inXRange(f,y){return ca(this,f,null,y)}inYRange(f,y){return ca(this,null,f,y)}getCenterPoint(f){const{x:y,y:w,base:A,horizontal:E}=this.getProps(["x","y","base","horizontal"],f);return{x:E?(y+A)/2:y,y:E?w:(w+A)/2}}getRange(f){return"x"===f?this.width/2:this.height/2}}is.id="bar",is.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},is.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var zc=Object.freeze({__proto__:null,ArcElement:An,LineElement:Or,PointElement:ws,BarElement:is});function Wd(_){if(_._decimated){const f=_._data;delete _._decimated,delete _._data,Object.defineProperty(_,"data",{value:f})}}function Hr(_){_.data.datasets.forEach(f=>{Wd(f)})}var ho={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(_,f,y)=>{if(!y.enabled)return void Hr(_);const w=_.width;_.data.datasets.forEach((A,E)=>{const{_data:R,indexAxis:j}=A,$=_.getDatasetMeta(E),K=R||A.data;if("y"===Bn([j,_.options.indexAxis])||!$.controller.supportsDecimation)return;const st=_.scales[$.xAxisID];if("linear"!==st.type&&"time"!==st.type||_.options.parsing)return;let bt,{start:ut,count:ft}=function(Mt,It){const Nt=It.length;let Gt,ne=0;const{iScale:de}=Mt,{min:ye,max:qe,minDefined:$e,maxDefined:wn}=de.getUserBounds();return $e&&(ne=co(Wi(It,de.axis,ye).lo,0,Nt-1)),Gt=wn?co(Wi(It,de.axis,qe).hi+1,ne,Nt)-ne:Nt-ne,{start:ne,count:Gt}}($,K);if(ft<=(y.threshold||4*w))Wd(A);else{switch(Vn(R)&&(A._data=K,delete A.data,Object.defineProperty(A,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(Mt){this._data=Mt}})),y.algorithm){case"lttb":bt=function(Mt,It,Nt,Gt,ne){const de=ne.samples||Gt;if(de>=Nt)return Mt.slice(It,It+Nt);const ye=[],qe=(Nt-2)/(de-2);let $e=0;const wn=It+Nt-1;let rn,$n,un,ni,Kn,oi=It;for(ye[$e++]=Mt[oi],rn=0;rn<de-2;rn++){let Tn,qn=0,nr=0;const rr=Math.floor((rn+1)*qe)+1+It,Kr=Math.min(Math.floor((rn+2)*qe)+1,Nt)+It,$o=Kr-rr;for(Tn=rr;Tn<Kr;Tn++)qn+=Mt[Tn].x,nr+=Mt[Tn].y;qn/=$o,nr/=$o;const Jr=Math.floor(rn*qe)+1+It,na=Math.min(Math.floor((rn+1)*qe)+1,Nt)+It,{x:Sa,y:Ji}=Mt[oi];for(un=ni=-1,Tn=Jr;Tn<na;Tn++)ni=.5*Math.abs((Sa-qn)*(Mt[Tn].y-Ji)-(Sa-Mt[Tn].x)*(nr-Ji)),ni>un&&(un=ni,$n=Mt[Tn],Kn=Tn);ye[$e++]=$n,oi=Kn}return ye[$e++]=Mt[wn],ye}(K,ut,ft,w,y);break;case"min-max":bt=function(Mt,It,Nt,Gt){let ne,de,ye,qe,$e,wn,rn,$n,un,ni,Kn=0,oi=0;const Tn=[],nr=Mt[It].x,rr=Mt[It+Nt-1].x-nr;for(ne=It;ne<It+Nt;++ne){de=Mt[ne],ye=(de.x-nr)/rr*Gt,qe=de.y;const Kr=0|ye;if(Kr===$e)qe<un?(un=qe,wn=ne):qe>ni&&(ni=qe,rn=ne),Kn=(oi*Kn+de.x)/++oi;else{const $o=ne-1;if(!Vn(wn)&&!Vn(rn)){const Jr=Math.min(wn,rn),na=Math.max(wn,rn);Jr!==$n&&Jr!==$o&&Tn.push(SD(jC({},Mt[Jr]),{x:Kn})),na!==$n&&na!==$o&&Tn.push(SD(jC({},Mt[na]),{x:Kn}))}ne>0&&$o!==$n&&Tn.push(Mt[$o]),Tn.push(de),$e=Kr,oi=0,un=ni=qe,wn=rn=$n=ne}}return Tn}(K,ut,ft,w);break;default:throw new Error(`Unsupported decimation algorithm '${y.algorithm}'`)}A._decimated=bt}})},destroy(_){Hr(_)}};function Ws(_,f,y,w){if(w)return;let A=f[_],E=y[_];return"angle"===_&&(A=yo(A),E=yo(E)),{property:_,start:A,end:E}}function su(_,f,y){for(;f>_;f--){const w=y[f];if(!isNaN(w.x)&&!isNaN(w.y))break}return f}function gc(_,f,y,w){return _&&f?w(_[y],f[y]):_?_[y]:f?f[y]:0}function pc(_,f){let y=[],w=!1;return Ei(_)?(w=!0,y=_):y=function(A,E){const{x:R=null,y:j=null}=A||{},$=E.points,K=[];return E.segments.forEach(({start:st,end:ut})=>{ut=su(st,ut,$);const ft=$[st],bt=$[ut];null!==j?(K.push({x:ft.x,y:j}),K.push({x:bt.x,y:j})):null!==R&&(K.push({x:R,y:ft.y}),K.push({x:R,y:bt.y}))}),K}(_,f),y.length?new Or({points:y,options:{tension:0},_loop:w,_fullLoop:w}):null}function Ou(_,f,y){let w=_[f].fill;const A=[f];let E;if(!y)return w;for(;!1!==w&&-1===A.indexOf(w);){if(!Qi(w))return w;if(E=_[w],!E)return!1;if(E.visible)return w;A.push(w),w=E.fill}return!1}function js(_,f,y){const w=function(E){const R=E.options,j=R.fill;let $=yi(j&&j.target,j);return void 0===$&&($=!!R.backgroundColor),!1!==$&&null!==$&&(!0===$?"origin":$)}(_);if(Zn(w))return!isNaN(w.value)&&w;let A=parseFloat(w);return Qi(A)&&Math.floor(A)===A?(R=f,j=A,"-"!==(E=w[0])&&"+"!==E||(j=R+j),!(j===R||j<0||j>=y)&&j):["origin","start","end","stack","shape"].indexOf(w)>=0&&w;var E,R,j}function Sh(_,f,y){const w=[];for(let A=0;A<y.length;A++){const E=y[A],{first:R,last:j,point:$}=eg(E,f,"x");if(!(!$||R&&j))if(R)w.unshift($);else if(_.push($),!j)break}_.push(...w)}function eg(_,f,y){const w=_.interpolate(f,y);if(!w)return{};const A=w[y],E=_.segments,R=_.points;let j=!1,$=!1;for(let K=0;K<E.length;K++){const st=E[K],ut=R[st.start][y],ft=R[st.end][y];if(cs(A,ut,ft)){j=A===ut,$=A===ft;break}}return{first:j,last:$,point:w}}class ng{constructor(f){this.x=f.x,this.y=f.y,this.radius=f.radius}pathSegment(f,y,w){const{x:A,y:E,radius:R}=this;return f.arc(A,E,R,(y=y||{start:0,end:ir}).end,y.start,!0),!w.bounds}interpolate(f){const{x:y,y:w,radius:A}=this,E=f.angle;return{x:y+Math.cos(E)*A,y:w+Math.sin(E)*A,angle:E}}}function fl(_,f,y){const w=function Ch(_){const{chart:f,fill:y,line:w}=_;if(Qi(y))return function(E,R){const j=E.getDatasetMeta(R);return j&&E.isDatasetVisible(R)?j.dataset:null}(f,y);if("stack"===y)return function(E){const{scale:R,index:j,line:$}=E,K=[],st=$.segments,ut=$.points,ft=function(bt,Mt){const It=[],Nt=bt.getMatchingVisibleMetas("line");for(let Gt=0;Gt<Nt.length;Gt++){const ne=Nt[Gt];if(ne.index===Mt)break;ne.hidden||It.unshift(ne.dataset)}return It}(R,j);ft.push(pc({x:null,y:R.bottom},$));for(let bt=0;bt<st.length;bt++){const Mt=st[bt];for(let It=Mt.start;It<=Mt.end;It++)Sh(K,ut[It],ft)}return new Or({points:K,options:{}})}(_);if("shape"===y)return!0;const A=((E=_).scale||{}).getPointPositionForValue?function(R){const{scale:j,fill:$}=R,K=j.options,st=j.getLabels().length,ut=K.reverse?j.max:j.min,ft=function(Mt,It,Nt){let Gt;return Gt="start"===Mt?Nt:"end"===Mt?It.options.reverse?It.min:It.max:Zn(Mt)?Mt.value:It.getBaseValue(),Gt}($,j,ut),bt=[];if(K.grid.circular){const Mt=j.getPointPositionForValue(0,ut);return new ng({x:Mt.x,y:Mt.y,radius:j.getDistanceFromCenterForValue(ft)})}for(let Mt=0;Mt<st;++Mt)bt.push(j.getPointPositionForValue(Mt,ft));return bt}(E):function(R){const{scale:j={},fill:$}=R,K=function(st,ut){let ft=null;return"start"===st?ft=ut.bottom:"end"===st?ft=ut.top:Zn(st)?ft=ut.getPixelForValue(st.value):ut.getBasePixel&&(ft=ut.getBasePixel()),ft}($,j);if(Qi(K)){const st=j.isHorizontal();return{x:st?K:null,y:st?null:K}}return null}(E);var E;return A instanceof ng?A:pc(A,w)}(f),{line:A,scale:E,axis:R}=f,j=A.options,$=j.fill,K=j.backgroundColor,{above:st=K,below:ut=K}=$||{};w&&A.points.length&&(Ii(_,y),function(ft,bt){const{line:Mt,target:It,above:Nt,below:Gt,area:ne,scale:de}=bt,ye=Mt._loop?"angle":bt.axis;ft.save(),"x"===ye&&Gt!==Nt&&(rs(ft,It,ne.top),Nl(ft,{line:Mt,target:It,color:Nt,scale:de,property:ye}),ft.restore(),ft.save(),rs(ft,It,ne.bottom)),Nl(ft,{line:Mt,target:It,color:Gt,scale:de,property:ye}),ft.restore()}(_,{line:A,target:w,above:st,below:ut,area:y,scale:E,axis:R}),ri(_))}function rs(_,f,y){const{segments:w,points:A}=f;let E=!0,R=!1;_.beginPath();for(const j of w){const{start:$,end:K}=j,st=A[$],ut=A[su($,K,A)];E?(_.moveTo(st.x,st.y),E=!1):(_.lineTo(st.x,y),_.lineTo(st.x,st.y)),R=!!f.pathSegment(_,j,{move:R}),R?_.closePath():_.lineTo(ut.x,y)}_.lineTo(f.first().x,y),_.closePath(),_.clip()}function Nl(_,f){const{line:y,target:w,property:A,color:E,scale:R}=f,j=function($,K,st){const ut=$.segments,ft=$.points,bt=K.points,Mt=[];for(const It of ut){let{start:Nt,end:Gt}=It;Gt=su(Nt,Gt,ft);const ne=Ws(st,ft[Nt],ft[Gt],It.loop);if(!K.segments){Mt.push({source:It,target:ne,start:ft[Nt],end:ft[Gt]});continue}const de=Oo(K,ne);for(const ye of de){const qe=Ws(st,bt[ye.start],bt[ye.end],ye.loop),$e=Qa(It,ft,qe);for(const wn of $e)Mt.push({source:wn,target:ye,start:{[st]:gc(ne,qe,"start",Math.max)},end:{[st]:gc(ne,qe,"end",Math.min)}})}}return Mt}(y,w,A);for(const{source:$,target:K,start:st,end:ut}of j){const{style:{backgroundColor:ft=E}={}}=$,bt=!0!==w;_.save(),_.fillStyle=ft,Gs(_,R,bt&&Ws(A,st,ut)),_.beginPath();const Mt=!!y.pathSegment(_,$);let It;if(bt){Mt?_.closePath():eo(_,w,ut,A);const Nt=!!w.pathSegment(_,K,{move:Mt,reverse:!0});It=Mt&&Nt,It||eo(_,w,st,A)}_.closePath(),_.fill(It?"evenodd":"nonzero"),_.restore()}}function Gs(_,f,y){const{top:w,bottom:A}=f.chart.chartArea,{property:E,start:R,end:j}=y||{};"x"===E&&(_.beginPath(),_.rect(R,w,j-R,A-w),_.clip())}function eo(_,f,y,w){const A=f.interpolate(y,w);A&&_.lineTo(A.x,A.y)}var Ss={id:"filler",afterDatasetsUpdate(_,f,y){const w=(_.data.datasets||[]).length,A=[];let E,R,j,$;for(R=0;R<w;++R)E=_.getDatasetMeta(R),j=E.dataset,$=null,j&&j.options&&j instanceof Or&&($={visible:_.isDatasetVisible(R),index:R,fill:js(j,R,w),chart:_,axis:E.controller.options.indexAxis,scale:E.vScale,line:j}),E.$filler=$,A.push($);for(R=0;R<w;++R)$=A[R],$&&!1!==$.fill&&($.fill=Ou(A,R,y.propagate))},beforeDraw(_,f,y){const w="beforeDraw"===y.drawTime,A=_.getSortedVisibleDatasetMetas(),E=_.chartArea;for(let R=A.length-1;R>=0;--R){const j=A[R].$filler;j&&(j.line.updateControlPoints(E,j.axis),w&&fl(_.ctx,j,E))}},beforeDatasetsDraw(_,f,y){if("beforeDatasetsDraw"!==y.drawTime)return;const w=_.getSortedVisibleDatasetMetas();for(let A=w.length-1;A>=0;--A){const E=w[A].$filler;E&&fl(_.ctx,E,_.chartArea)}},beforeDatasetDraw(_,f,y){const w=f.meta.$filler;w&&!1!==w.fill&&"beforeDatasetDraw"===y.drawTime&&fl(_.ctx,w,_.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const jd=(_,f)=>{let{boxHeight:y=f,boxWidth:w=f}=_;return _.usePointStyle&&(y=Math.min(y,f),w=Math.min(w,f)),{boxWidth:w,boxHeight:y,itemHeight:Math.max(f,y)}};class Gd extends ua{constructor(f){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=f.chart,this.options=f.options,this.ctx=f.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(f,y,w){this.maxWidth=f,this.maxHeight=y,this._margins=w,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const f=this.options.labels||{};let y=ee(f.generateLabels,[this.chart],this)||[];f.filter&&(y=y.filter(w=>f.filter(w,this.chart.data))),f.sort&&(y=y.sort((w,A)=>f.sort(w,A,this.chart.data))),this.options.reverse&&y.reverse(),this.legendItems=y}fit(){const{options:f,ctx:y}=this;if(!f.display)return void(this.width=this.height=0);const w=f.labels,A=ji(w.font),E=A.size,R=this._computeTitleHeight(),{boxWidth:j,itemHeight:$}=jd(w,E);let K,st;y.font=A.string,this.isHorizontal()?(K=this.maxWidth,st=this._fitRows(R,E,j,$)+10):(st=this.maxHeight,K=this._fitCols(R,E,j,$)+10),this.width=Math.min(K,f.maxWidth||this.maxWidth),this.height=Math.min(st,f.maxHeight||this.maxHeight)}_fitRows(f,y,w,A){const{ctx:E,maxWidth:R,options:{labels:{padding:j}}}=this,$=this.legendHitBoxes=[],K=this.lineWidths=[0],st=A+j;let ut=f;E.textAlign="left",E.textBaseline="middle";let ft=-1,bt=-st;return this.legendItems.forEach((Mt,It)=>{const Nt=w+y/2+E.measureText(Mt.text).width;(0===It||K[K.length-1]+Nt+2*j>R)&&(ut+=st,K[K.length-(It>0?0:1)]=0,bt+=st,ft++),$[It]={left:0,top:bt,row:ft,width:Nt,height:A},K[K.length-1]+=Nt+j}),ut}_fitCols(f,y,w,A){const{ctx:E,maxHeight:R,options:{labels:{padding:j}}}=this,$=this.legendHitBoxes=[],K=this.columnSizes=[],st=R-f;let ut=j,ft=0,bt=0,Mt=0,It=0;return this.legendItems.forEach((Nt,Gt)=>{const ne=w+y/2+E.measureText(Nt.text).width;Gt>0&&bt+A+2*j>st&&(ut+=ft+j,K.push({width:ft,height:bt}),Mt+=ft+j,It++,ft=bt=0),$[Gt]={left:Mt,top:bt,col:It,width:ne,height:A},ft=Math.max(ft,ne),bt+=A+j}),ut+=ft,K.push({width:ft,height:bt}),ut}adjustHitBoxes(){if(!this.options.display)return;const f=this._computeTitleHeight(),{legendHitBoxes:y,options:{align:w,labels:{padding:A},rtl:E}}=this,R=Ao(E,this.left,this.width);if(this.isHorizontal()){let j=0,$=se(w,this.left+A,this.right-this.lineWidths[j]);for(const K of y)j!==K.row&&(j=K.row,$=se(w,this.left+A,this.right-this.lineWidths[j])),K.top+=this.top+f+A,K.left=R.leftForLtr(R.x($),K.width),$+=K.width+A}else{let j=0,$=se(w,this.top+f+A,this.bottom-this.columnSizes[j].height);for(const K of y)K.col!==j&&(j=K.col,$=se(w,this.top+f+A,this.bottom-this.columnSizes[j].height)),K.top=$,K.left+=this.left+A,K.left=R.leftForLtr(R.x(K.left),K.width),$+=K.height+A}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const f=this.ctx;Ii(f,this),this._draw(),ri(f)}}_draw(){const{options:f,columnSizes:y,lineWidths:w,ctx:A}=this,{align:E,labels:R}=f,j=gi.color,$=Ao(f.rtl,this.left,this.width),K=ji(R.font),{color:st,padding:ut}=R,ft=K.size,bt=ft/2;let Mt;this.drawTitle(),A.textAlign=$.textAlign("left"),A.textBaseline="middle",A.lineWidth=.5,A.font=K.string;const{boxWidth:It,boxHeight:Nt,itemHeight:Gt}=jd(R,ft),ne=this.isHorizontal(),de=this._computeTitleHeight();Mt=ne?{x:se(E,this.left+ut,this.right-w[0]),y:this.top+ut+de,line:0}:{x:this.left+ut,y:se(E,this.top+de+ut,this.bottom-y[0].height),line:0},Rs(this.ctx,f.textDirection);const ye=Gt+ut;this.legendItems.forEach((qe,$e)=>{A.strokeStyle=qe.fontColor||st,A.fillStyle=qe.fontColor||st;const wn=A.measureText(qe.text).width,rn=$.textAlign(qe.textAlign||(qe.textAlign=R.textAlign)),$n=It+bt+wn;let un=Mt.x,ni=Mt.y;var Kn,Tn;$.setWidth(this.width),ne?$e>0&&un+$n+ut>this.right&&(ni=Mt.y+=ye,Mt.line++,un=Mt.x=se(E,this.left+ut,this.right-w[Mt.line])):$e>0&&ni+ye>this.bottom&&(un=Mt.x=un+y[Mt.line].width+ut,Mt.line++,ni=Mt.y=se(E,this.top+de+ut,this.bottom-y[Mt.line].height)),function(Kn,oi,Tn){if(isNaN(It)||It<=0||isNaN(Nt)||Nt<0)return;A.save();const qn=yi(Tn.lineWidth,1);if(A.fillStyle=yi(Tn.fillStyle,j),A.lineCap=yi(Tn.lineCap,"butt"),A.lineDashOffset=yi(Tn.lineDashOffset,0),A.lineJoin=yi(Tn.lineJoin,"miter"),A.lineWidth=qn,A.strokeStyle=yi(Tn.strokeStyle,j),A.setLineDash(yi(Tn.lineDash,[])),R.usePointStyle){const nr={radius:It*Math.SQRT2/2,pointStyle:Tn.pointStyle,rotation:Tn.rotation,borderWidth:qn},rr=$.xPlus(Kn,It/2);Un(A,nr,rr,oi+bt)}else{const nr=oi+Math.max((ft-Nt)/2,0),rr=$.leftForLtr(Kn,It),Kr=gs(Tn.borderRadius);A.beginPath(),Object.values(Kr).some($o=>0!==$o)?Xr(A,{x:rr,y:nr,w:It,h:Nt,radius:Kr}):A.rect(rr,nr,It,Nt),A.fill(),0!==qn&&A.stroke()}A.restore()}($.x(un),ni,qe),un=Ve(rn,un+It+bt,ne?un+$n:this.right,f.rtl),Kn=$.x(un),bo(A,(Tn=qe).text,Kn,ni+Gt/2,K,{strikethrough:Tn.hidden,textAlign:$.textAlign(Tn.textAlign)}),ne?Mt.x+=$n+ut:Mt.y+=ye}),rc(this.ctx,f.textDirection)}drawTitle(){const f=this.options,y=f.title,w=ji(y.font),A=Do(y.padding);if(!y.display)return;const E=Ao(f.rtl,this.left,this.width),R=this.ctx,j=y.position,K=A.top+w.size/2;let st,ut=this.left,ft=this.width;if(this.isHorizontal())ft=Math.max(...this.lineWidths),st=this.top+K,ut=se(f.align,ut,this.right-ft);else{const Mt=this.columnSizes.reduce((It,Nt)=>Math.max(It,Nt.height),0);st=K+se(f.align,this.top,this.bottom-Mt-f.labels.padding-this._computeTitleHeight())}const bt=se(j,ut,ut+ft);R.textAlign=E.textAlign(Oe(j)),R.textBaseline="middle",R.strokeStyle=y.color,R.fillStyle=y.color,R.font=w.string,bo(R,y.text,bt,st,w)}_computeTitleHeight(){const f=this.options.title,y=ji(f.font),w=Do(f.padding);return f.display?y.lineHeight+w.height:0}_getLegendItemAt(f,y){let w,A,E;if(cs(f,this.left,this.right)&&cs(y,this.top,this.bottom))for(E=this.legendHitBoxes,w=0;w<E.length;++w)if(A=E[w],cs(f,A.left,A.left+A.width)&&cs(y,A.top,A.top+A.height))return this.legendItems[w];return null}handleEvent(f){const y=this.options;if(j=y,("mousemove"!==(R=f.type)&&"mouseout"!==R||!j.onHover&&!j.onLeave)&&(!j.onClick||"click"!==R&&"mouseup"!==R))return;var R,j;const w=this._getLegendItemAt(f.x,f.y);if("mousemove"===f.type||"mouseout"===f.type){const R=this._hoveredItem,j=(E=w,null!==(A=R)&&null!==E&&A.datasetIndex===E.datasetIndex&&A.index===E.index);R&&!j&&ee(y.onLeave,[f,R,this],this),this._hoveredItem=w,w&&!j&&ee(y.onHover,[f,w,this],this)}else w&&ee(y.onClick,[f,w,this],this);var A,E}}var Fc={id:"legend",_element:Gd,start(_,f,y){const w=_.legend=new Gd({ctx:_.ctx,options:y,chart:_});Uo.configure(_,w,y),Uo.addBox(_,w)},stop(_){Uo.removeBox(_,_.legend),delete _.legend},beforeUpdate(_,f,y){const w=_.legend;Uo.configure(_,w,y),w.options=y},afterUpdate(_){const f=_.legend;f.buildLabels(),f.adjustHitBoxes()},afterEvent(_,f){f.replay||_.legend.handleEvent(f.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(_,f,y){const w=f.datasetIndex,A=y.chart;A.isDatasetVisible(w)?(A.hide(w),f.hidden=!0):(A.show(w),f.hidden=!1)},onHover:null,onLeave:null,labels:{color:_=>_.chart.options.color,boxWidth:40,padding:10,generateLabels(_){const f=_.data.datasets,{labels:{usePointStyle:y,pointStyle:w,textAlign:A,color:E}}=_.legend.options;return _._getSortedDatasetMetas().map(R=>{const j=R.controller.getStyle(y?0:void 0),$=Do(j.borderWidth);return{text:f[R.index].label,fillStyle:j.backgroundColor,fontColor:E,hidden:!R.visible,lineCap:j.borderCapStyle,lineDash:j.borderDash,lineDashOffset:j.borderDashOffset,lineJoin:j.borderJoinStyle,lineWidth:($.width+$.height)/4,strokeStyle:j.borderColor,pointStyle:w||j.pointStyle,rotation:j.rotation,textAlign:A||j.textAlign,borderRadius:0,datasetIndex:R.index}},this)}},title:{color:_=>_.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:_=>!_.startsWith("on"),labels:{_scriptable:_=>!["generateLabels","filter","sort"].includes(_)}}};class fo extends ua{constructor(f){super(),this.chart=f.chart,this.options=f.options,this.ctx=f.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(f,y){const w=this.options;if(this.left=0,this.top=0,!w.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=f,this.height=this.bottom=y;const A=Ei(w.text)?w.text.length:1;this._padding=Do(w.padding);const E=A*ji(w.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=E:this.width=E}isHorizontal(){const f=this.options.position;return"top"===f||"bottom"===f}_drawArgs(f){const{top:y,left:w,bottom:A,right:E,options:R}=this,j=R.align;let $,K,st,ut=0;return this.isHorizontal()?(K=se(j,w,E),st=y+f,$=E-w):("left"===R.position?(K=w+f,st=se(j,A,y),ut=-.5*Ai):(K=E-f,st=se(j,y,A),ut=.5*Ai),$=A-y),{titleX:K,titleY:st,maxWidth:$,rotation:ut}}draw(){const f=this.ctx,y=this.options;if(!y.display)return;const w=ji(y.font),A=w.lineHeight/2+this._padding.top,{titleX:E,titleY:R,maxWidth:j,rotation:$}=this._drawArgs(A);bo(f,y.text,0,0,w,{color:y.color,maxWidth:j,rotation:$,textAlign:Oe(y.align),textBaseline:"middle",translation:[E,R]})}}var Ud={id:"title",_element:fo,start(_,f,y){!function(w,A){const E=new fo({ctx:w.ctx,options:A,chart:w});Uo.configure(w,E,A),Uo.addBox(w,E),w.titleBlock=E}(_,y)},stop(_){Uo.removeBox(_,_.titleBlock),delete _.titleBlock},beforeUpdate(_,f,y){const w=_.titleBlock;Uo.configure(_,w,y),w.options=y},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const md=new WeakMap;var Ga={id:"subtitle",start(_,f,y){const w=new fo({ctx:_.ctx,options:y,chart:_});Uo.configure(_,w,y),Uo.addBox(_,w),md.set(_,w)},stop(_){Uo.removeBox(_,md.get(_)),md.delete(_)},beforeUpdate(_,f,y){const w=md.get(_);Uo.configure(_,w,y),w.options=y},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $r={average(_){if(!_.length)return!1;let f,y,w=0,A=0,E=0;for(f=0,y=_.length;f<y;++f){const R=_[f].element;if(R&&R.hasValue()){const j=R.tooltipPosition();w+=j.x,A+=j.y,++E}}return{x:w/E,y:A/E}},nearest(_,f){if(!_.length)return!1;let y,w,A,E=f.x,R=f.y,j=Number.POSITIVE_INFINITY;for(y=0,w=_.length;y<w;++y){const $=_[y].element;if($&&$.hasValue()){const K=Qs(f,$.getCenterPoint());K<j&&(j=K,A=$)}}if(A){const $=A.tooltipPosition();E=$.x,R=$.y}return{x:E,y:R}}};function Zr(_,f){return f&&(Ei(f)?Array.prototype.push.apply(_,f):_.push(f)),_}function gl(_){return("string"==typeof _||_ instanceof String)&&_.indexOf("\n")>-1?_.split("\n"):_}function da(_,f){const{element:y,datasetIndex:w,index:A}=f,E=_.getDatasetMeta(w).controller,{label:R,value:j}=E.getLabelAndValue(A);return{chart:_,label:R,parsed:E.getParsed(A),raw:_.data.datasets[w].data[A],formattedValue:j,dataset:E.getDataset(),dataIndex:A,datasetIndex:w,element:y}}function Rl(_,f){const y=_.chart.ctx,{body:w,footer:A,title:E}=_,{boxWidth:R,boxHeight:j}=f,$=ji(f.bodyFont),K=ji(f.titleFont),st=ji(f.footerFont),ut=E.length,ft=A.length,bt=w.length,Mt=Do(f.padding);let It=Mt.height,Nt=0,Gt=w.reduce((ye,qe)=>ye+qe.before.length+qe.lines.length+qe.after.length,0);Gt+=_.beforeBody.length+_.afterBody.length,ut&&(It+=ut*K.lineHeight+(ut-1)*f.titleSpacing+f.titleMarginBottom),Gt&&(It+=bt*(f.displayColors?Math.max(j,$.lineHeight):$.lineHeight)+(Gt-bt)*$.lineHeight+(Gt-1)*f.bodySpacing),ft&&(It+=f.footerMarginTop+ft*st.lineHeight+(ft-1)*f.footerSpacing);let ne=0;const de=function(ye){Nt=Math.max(Nt,y.measureText(ye).width+ne)};return y.save(),y.font=K.string,_e(_.title,de),y.font=$.string,_e(_.beforeBody.concat(_.afterBody),de),ne=f.displayColors?R+2+f.boxPadding:0,_e(w,ye=>{_e(ye.before,de),_e(ye.lines,de),_e(ye.after,de)}),ne=0,y.font=st.string,_e(_.footer,de),y.restore(),Nt+=Mt.width,{width:Nt,height:It}}function qd(_,f,y,w){const{x:A,width:E}=y,{width:R,chartArea:{left:j,right:$}}=_;let K="center";return"center"===w?K=A<=(j+$)/2?"left":"right":A<=E/2?K="left":A>=R-E/2&&(K="right"),function(st,ut,ft,bt){const{x:Mt,width:It}=bt,Nt=ft.caretSize+ft.caretPadding;return"left"===st&&Mt+It+Nt>ut.width||"right"===st&&Mt-It-Nt<0||void 0}(K,_,f,y)&&(K="center"),K}function Fo(_,f,y){const w=y.yAlign||f.yAlign||function(A,E){const{y:R,height:j}=E;return R<j/2?"top":R>A.height-j/2?"bottom":"center"}(_,y);return{xAlign:y.xAlign||f.xAlign||qd(_,f,y,w),yAlign:w}}function Yd(_,f,y,w){const{caretSize:A,caretPadding:E,cornerRadius:R}=_,{xAlign:j,yAlign:$}=y,K=A+E,{topLeft:st,topRight:ut,bottomLeft:ft,bottomRight:bt}=gs(R);let Mt=function(Nt,Gt){let{x:ne,width:de}=Nt;return"right"===Gt?ne-=de:"center"===Gt&&(ne-=de/2),ne}(f,j);const It=function(Nt,Gt,ne){let{y:de,height:ye}=Nt;return"top"===Gt?de+=ne:de-="bottom"===Gt?ye+ne:ye/2,de}(f,$,K);return"center"===$?"left"===j?Mt+=K:"right"===j&&(Mt-=K):"left"===j?Mt-=Math.max(st,ft)+A:"right"===j&&(Mt+=Math.max(ut,bt)+A),{x:co(Mt,0,w.width-f.width),y:co(It,0,w.height-f.height)}}function lu(_,f,y){const w=Do(y.padding);return"center"===f?_.x+_.width/2:"right"===f?_.x+_.width-w.right:_.x+w.left}function _a(_){return Zr([],gl(_))}function Xd(_,f){const y=f&&f.dataset&&f.dataset.tooltip&&f.dataset.tooltip.callbacks;return y?_.override(y):_}class vd extends ua{constructor(f){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=f.chart||f._chart,this._chart=this.chart,this.options=f.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(f){this.options=f,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const f=this._cachedAnimations;if(f)return f;const y=this.chart,w=this.options.setContext(this.getContext()),A=w.enabled&&y.options.animation&&w.animations,E=new Eu(this.chart,A);return A._cacheable&&(this._cachedAnimations=Object.freeze(E)),E}getContext(){return this.$context||(this.$context=Ns(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(f,y){const{callbacks:w}=y,A=w.beforeTitle.apply(this,[f]),E=w.title.apply(this,[f]),R=w.afterTitle.apply(this,[f]);let j=[];return j=Zr(j,gl(A)),j=Zr(j,gl(E)),j=Zr(j,gl(R)),j}getBeforeBody(f,y){return _a(y.callbacks.beforeBody.apply(this,[f]))}getBody(f,y){const{callbacks:w}=y,A=[];return _e(f,E=>{const R={before:[],lines:[],after:[]},j=Xd(w,E);Zr(R.before,gl(j.beforeLabel.call(this,E))),Zr(R.lines,j.label.call(this,E)),Zr(R.after,gl(j.afterLabel.call(this,E))),A.push(R)}),A}getAfterBody(f,y){return _a(y.callbacks.afterBody.apply(this,[f]))}getFooter(f,y){const{callbacks:w}=y,A=w.beforeFooter.apply(this,[f]),E=w.footer.apply(this,[f]),R=w.afterFooter.apply(this,[f]);let j=[];return j=Zr(j,gl(A)),j=Zr(j,gl(E)),j=Zr(j,gl(R)),j}_createItems(f){const y=this._active,w=this.chart.data,A=[],E=[],R=[];let j,$,K=[];for(j=0,$=y.length;j<$;++j)K.push(da(this.chart,y[j]));return f.filter&&(K=K.filter((st,ut,ft)=>f.filter(st,ut,ft,w))),f.itemSort&&(K=K.sort((st,ut)=>f.itemSort(st,ut,w))),_e(K,st=>{const ut=Xd(f.callbacks,st);A.push(ut.labelColor.call(this,st)),E.push(ut.labelPointStyle.call(this,st)),R.push(ut.labelTextColor.call(this,st))}),this.labelColors=A,this.labelPointStyles=E,this.labelTextColors=R,this.dataPoints=K,K}update(f,y){const w=this.options.setContext(this.getContext()),A=this._active;let E,R=[];if(A.length){const j=$r[w.position].call(this,A,this._eventPosition);R=this._createItems(w),this.title=this.getTitle(R,w),this.beforeBody=this.getBeforeBody(R,w),this.body=this.getBody(R,w),this.afterBody=this.getAfterBody(R,w),this.footer=this.getFooter(R,w);const $=this._size=Rl(this,w),K=Object.assign({},j,$),st=Fo(this.chart,w,K),ut=Yd(w,K,st,this.chart);this.xAlign=st.xAlign,this.yAlign=st.yAlign,E={opacity:1,x:ut.x,y:ut.y,width:$.width,height:$.height,caretX:j.x,caretY:j.y}}else 0!==this.opacity&&(E={opacity:0});this._tooltipItems=R,this.$context=void 0,E&&this._resolveAnimations().update(this,E),f&&w.external&&w.external.call(this,{chart:this.chart,tooltip:this,replay:y})}drawCaret(f,y,w,A){const E=this.getCaretPosition(f,w,A);y.lineTo(E.x1,E.y1),y.lineTo(E.x2,E.y2),y.lineTo(E.x3,E.y3)}getCaretPosition(f,y,w){const{xAlign:A,yAlign:E}=this,{caretSize:R,cornerRadius:j}=w,{topLeft:$,topRight:K,bottomLeft:st,bottomRight:ut}=gs(j),{x:ft,y:bt}=f,{width:Mt,height:It}=y;let Nt,Gt,ne,de,ye,qe;return"center"===E?(ye=bt+It/2,"left"===A?(Nt=ft,Gt=Nt-R,de=ye+R,qe=ye-R):(Nt=ft+Mt,Gt=Nt+R,de=ye-R,qe=ye+R),ne=Nt):(Gt="left"===A?ft+Math.max($,st)+R:"right"===A?ft+Mt-Math.max(K,ut)-R:this.caretX,"top"===E?(de=bt,ye=de-R,Nt=Gt-R,ne=Gt+R):(de=bt+It,ye=de+R,Nt=Gt+R,ne=Gt-R),qe=de),{x1:Nt,x2:Gt,x3:ne,y1:de,y2:ye,y3:qe}}drawTitle(f,y,w){const A=this.title,E=A.length;let R,j,$;if(E){const K=Ao(w.rtl,this.x,this.width);for(f.x=lu(this,w.titleAlign,w),y.textAlign=K.textAlign(w.titleAlign),y.textBaseline="middle",R=ji(w.titleFont),j=w.titleSpacing,y.fillStyle=w.titleColor,y.font=R.string,$=0;$<E;++$)y.fillText(A[$],K.x(f.x),f.y+R.lineHeight/2),f.y+=R.lineHeight+j,$+1===E&&(f.y+=w.titleMarginBottom-j)}}_drawColorBox(f,y,w,A,E){const R=this.labelColors[w],j=this.labelPointStyles[w],{boxHeight:$,boxWidth:K,boxPadding:st}=E,ut=ji(E.bodyFont),ft=lu(this,"left",E),bt=A.x(ft),It=y.y+($<ut.lineHeight?(ut.lineHeight-$)/2:0);if(E.usePointStyle){const Nt={radius:Math.min(K,$)/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:1},Gt=A.leftForLtr(bt,K)+K/2,ne=It+$/2;f.strokeStyle=E.multiKeyBackground,f.fillStyle=E.multiKeyBackground,Un(f,Nt,Gt,ne),f.strokeStyle=R.borderColor,f.fillStyle=R.backgroundColor,Un(f,Nt,Gt,ne)}else{f.lineWidth=R.borderWidth||1,f.strokeStyle=R.borderColor,f.setLineDash(R.borderDash||[]),f.lineDashOffset=R.borderDashOffset||0;const Nt=A.leftForLtr(bt,K-st),Gt=A.leftForLtr(A.xPlus(bt,1),K-st-2),ne=gs(R.borderRadius);Object.values(ne).some(de=>0!==de)?(f.beginPath(),f.fillStyle=E.multiKeyBackground,Xr(f,{x:Nt,y:It,w:K,h:$,radius:ne}),f.fill(),f.stroke(),f.fillStyle=R.backgroundColor,f.beginPath(),Xr(f,{x:Gt,y:It+1,w:K-2,h:$-2,radius:ne}),f.fill()):(f.fillStyle=E.multiKeyBackground,f.fillRect(Nt,It,K,$),f.strokeRect(Nt,It,K,$),f.fillStyle=R.backgroundColor,f.fillRect(Gt,It+1,K-2,$-2))}f.fillStyle=this.labelTextColors[w]}drawBody(f,y,w){const{body:A}=this,{bodySpacing:E,bodyAlign:R,displayColors:j,boxHeight:$,boxWidth:K,boxPadding:st}=w,ut=ji(w.bodyFont);let ft=ut.lineHeight,bt=0;const Mt=Ao(w.rtl,this.x,this.width),It=function(rn){y.fillText(rn,Mt.x(f.x+bt),f.y+ft/2),f.y+=ft+E},Nt=Mt.textAlign(R);let Gt,ne,de,ye,qe,$e,wn;for(y.textAlign=R,y.textBaseline="middle",y.font=ut.string,f.x=lu(this,Nt,w),y.fillStyle=w.bodyColor,_e(this.beforeBody,It),bt=j&&"right"!==Nt?"center"===R?K/2+st:K+2+st:0,ye=0,$e=A.length;ye<$e;++ye){for(Gt=A[ye],ne=this.labelTextColors[ye],y.fillStyle=ne,_e(Gt.before,It),de=Gt.lines,j&&de.length&&(this._drawColorBox(y,f,ye,Mt,w),ft=Math.max(ut.lineHeight,$)),qe=0,wn=de.length;qe<wn;++qe)It(de[qe]),ft=ut.lineHeight;_e(Gt.after,It)}bt=0,ft=ut.lineHeight,_e(this.afterBody,It),f.y-=E}drawFooter(f,y,w){const A=this.footer,E=A.length;let R,j;if(E){const $=Ao(w.rtl,this.x,this.width);for(f.x=lu(this,w.footerAlign,w),f.y+=w.footerMarginTop,y.textAlign=$.textAlign(w.footerAlign),y.textBaseline="middle",R=ji(w.footerFont),y.fillStyle=w.footerColor,y.font=R.string,j=0;j<E;++j)y.fillText(A[j],$.x(f.x),f.y+R.lineHeight/2),f.y+=R.lineHeight+w.footerSpacing}}drawBackground(f,y,w,A){const{xAlign:E,yAlign:R}=this,{x:j,y:$}=f,{width:K,height:st}=w,{topLeft:ut,topRight:ft,bottomLeft:bt,bottomRight:Mt}=gs(A.cornerRadius);y.fillStyle=A.backgroundColor,y.strokeStyle=A.borderColor,y.lineWidth=A.borderWidth,y.beginPath(),y.moveTo(j+ut,$),"top"===R&&this.drawCaret(f,y,w,A),y.lineTo(j+K-ft,$),y.quadraticCurveTo(j+K,$,j+K,$+ft),"center"===R&&"right"===E&&this.drawCaret(f,y,w,A),y.lineTo(j+K,$+st-Mt),y.quadraticCurveTo(j+K,$+st,j+K-Mt,$+st),"bottom"===R&&this.drawCaret(f,y,w,A),y.lineTo(j+bt,$+st),y.quadraticCurveTo(j,$+st,j,$+st-bt),"center"===R&&"left"===E&&this.drawCaret(f,y,w,A),y.lineTo(j,$+ut),y.quadraticCurveTo(j,$,j+ut,$),y.closePath(),y.fill(),A.borderWidth>0&&y.stroke()}_updateAnimationTarget(f){const y=this.chart,w=this.$animations,A=w&&w.x,E=w&&w.y;if(A||E){const R=$r[f.position].call(this,this._active,this._eventPosition);if(!R)return;const j=this._size=Rl(this,f),$=Object.assign({},R,this._size),K=Fo(y,f,$),st=Yd(f,$,K,y);A._to===st.x&&E._to===st.y||(this.xAlign=K.xAlign,this.yAlign=K.yAlign,this.width=j.width,this.height=j.height,this.caretX=R.x,this.caretY=R.y,this._resolveAnimations().update(this,st))}}_willRender(){return!!this.opacity}draw(f){const y=this.options.setContext(this.getContext());let w=this.opacity;if(!w)return;this._updateAnimationTarget(y);const A={width:this.width,height:this.height},E={x:this.x,y:this.y};w=Math.abs(w)<.001?0:w;const R=Do(y.padding);y.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(f.save(),f.globalAlpha=w,this.drawBackground(E,f,A,y),Rs(f,y.textDirection),E.y+=R.top,this.drawTitle(E,f,y),this.drawBody(E,f,y),this.drawFooter(E,f,y),rc(f,y.textDirection),f.restore())}getActiveElements(){return this._active||[]}setActiveElements(f,y){const w=this._active,A=f.map(({datasetIndex:j,index:$})=>{const K=this.chart.getDatasetMeta(j);if(!K)throw new Error("Cannot find a dataset at index "+j);return{datasetIndex:j,element:K.data[$],index:$}}),E=!Qe(w,A),R=this._positionChanged(A,y);(E||R)&&(this._active=A,this._eventPosition=y,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(f,y,w=!0){if(y&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const A=this.options,E=this._active||[],R=this._getActiveElements(f,E,y,w),j=this._positionChanged(R,f),$=y||!Qe(R,E)||j;return $&&(this._active=R,(A.enabled||A.external)&&(this._eventPosition={x:f.x,y:f.y},this.update(!0,y))),$}_getActiveElements(f,y,w,A){const E=this.options;if("mouseout"===f.type)return[];if(!A)return y;const R=this.chart.getElementsAtEventForMode(f,E.mode,E,w);return E.reverse&&R.reverse(),R}_positionChanged(f,y){const{caretX:w,caretY:A,options:E}=this,R=$r[E.position].call(this,f,y);return!1!==R&&(w!==R.x||A!==R.y)}}vd.positioners=$r;var of=Object.freeze({__proto__:null,Decimation:ho,Filler:Ss,Legend:Fc,SubTitle:Ga,Title:Ud,Tooltip:{id:"tooltip",_element:vd,positioners:$r,afterInit(_,f,y){y&&(_.tooltip=new vd({chart:_,options:y}))},beforeUpdate(_,f,y){_.tooltip&&_.tooltip.initialize(y)},reset(_,f,y){_.tooltip&&_.tooltip.initialize(y)},afterDraw(_){const f=_.tooltip;if(f&&f._willRender()){const y={tooltip:f};if(!1===_.notifyPlugins("beforeTooltipDraw",y))return;f.draw(_.ctx),_.notifyPlugins("afterTooltipDraw",y)}},afterEvent(_,f){_.tooltip&&_.tooltip.handleEvent(f.event,f.replay,f.inChartArea)&&(f.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(_,f)=>f.bodyFont.size,boxWidth:(_,f)=>f.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ke,title(_){if(_.length>0){const f=_[0],y=f.chart.data.labels,w=y?y.length:0;if(this&&this.options&&"dataset"===this.options.mode)return f.dataset.label||"";if(f.label)return f.label;if(w>0&&f.dataIndex<w)return y[f.dataIndex]}return""},afterTitle:Ke,beforeBody:Ke,beforeLabel:Ke,label(_){if(this&&this.options&&"dataset"===this.options.mode)return _.label+": "+_.formattedValue||_.formattedValue;let f=_.dataset.label||"";f&&(f+=": ");const y=_.formattedValue;return Vn(y)||(f+=y),f},labelColor(_){const f=_.chart.getDatasetMeta(_.datasetIndex).controller.getStyle(_.dataIndex);return{borderColor:f.borderColor,backgroundColor:f.backgroundColor,borderWidth:f.borderWidth,borderDash:f.borderDash,borderDashOffset:f.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(_){const f=_.chart.getDatasetMeta(_.datasetIndex).controller.getStyle(_.dataIndex);return{pointStyle:f.pointStyle,rotation:f.rotation}},afterLabel:Ke,afterBody:Ke,beforeFooter:Ke,footer:Ke,afterFooter:Ke}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:_=>"filter"!==_&&"itemSort"!==_&&"external"!==_,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Us extends ll{constructor(f){super(f),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(f){const y=this._addedLabels;if(y.length){const w=this.getLabels();for(const{index:A,label:E}of y)w[A]===E&&w.splice(A,1);this._addedLabels=[]}super.init(f)}parse(f,y){if(Vn(f))return null;const w=this.getLabels();return A=y=isFinite(y)&&w[y]===f?y:function Co(_,f,y,w){const A=_.indexOf(f);return-1===A?(j=y,$=w,"string"==typeof(R=f)?(j=_.push(R)-1,$.unshift({index:j,label:R})):isNaN(R)&&(j=null),j):A!==_.lastIndexOf(f)?y:A;var R,j,$}(w,f,yi(y,f),this._addedLabels),E=w.length-1,null===A?null:co(Math.round(A),0,E);var A,E}determineDataLimits(){const{minDefined:f,maxDefined:y}=this.getUserBounds();let{min:w,max:A}=this.getMinMax(!0);"ticks"===this.options.bounds&&(f||(w=0),y||(A=this.getLabels().length-1)),this.min=w,this.max=A}buildTicks(){const f=this.min,y=this.max,w=this.options.offset,A=[];let E=this.getLabels();E=0===f&&y===E.length-1?E:E.slice(f,y+1),this._valueRange=Math.max(E.length-(w?0:1),1),this._startValue=this.min-(w?.5:0);for(let R=f;R<=y;R++)A.push({value:R});return A}getLabelForValue(f){const y=this.getLabels();return f>=0&&f<y.length?y[f]:f}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(f){return"number"!=typeof f&&(f=this.parse(f)),null===f?NaN:this.getPixelForDecimal((f-this._startValue)/this._valueRange)}getPixelForTick(f){const y=this.ticks;return f<0||f>y.length-1?null:this.getPixelForValue(y[f].value)}getValueForPixel(f){return Math.round(this._startValue+this.getDecimalForPixel(f)*this._valueRange)}getBasePixel(){return this.bottom}}function Ll(_,f,{horizontal:y,minRotation:w}){const A=zr(w),E=(y?Math.sin(A):Math.cos(A))||.001;return Math.min(f/E,.75*f*(""+_).length)}Us.id="category",Us.defaults={ticks:{callback:Us.prototype.getLabelForValue}};class Cs extends ll{constructor(f){super(f),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(f,y){return Vn(f)||("number"==typeof f||f instanceof Number)&&!isFinite(+f)?null:+f}handleTickRangeOptions(){const{beginAtZero:f}=this.options,{minDefined:y,maxDefined:w}=this.getUserBounds();let{min:A,max:E}=this;const R=$=>A=y?A:$,j=$=>E=w?E:$;if(f){const $=kr(A),K=kr(E);$<0&&K<0?j(0):$>0&&K>0&&R(0)}if(A===E){let $=1;(E>=Number.MAX_SAFE_INTEGER||A<=Number.MIN_SAFE_INTEGER)&&($=Math.abs(.05*E)),j(E+$),f||R(A-$)}this.min=A,this.max=E}getTickLimit(){const f=this.options.ticks;let y,{maxTicksLimit:w,stepSize:A}=f;return A?(y=Math.ceil(this.max/A)-Math.floor(this.min/A)+1,y>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${A} would result generating up to ${y} ticks. Limiting to 1000.`),y=1e3)):(y=this.computeTickLimit(),w=w||11),w&&(y=Math.min(w,y)),y}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const f=this.options,y=f.ticks;let w=this.getTickLimit();w=Math.max(2,w);const A=function(E,R){const j=[],{bounds:$,step:K,min:st,max:ut,precision:ft,count:bt,maxTicks:Mt,maxDigits:It,includeBounds:Nt}=E,Gt=K||1,ne=Mt-1,{min:de,max:ye}=R,qe=!Vn(st),$e=!Vn(ut),wn=!Vn(bt),rn=(ye-de)/(It+1);let $n,un,ni,Kn,oi=ql((ye-de)/ne/Gt)*Gt;if(oi<1e-14&&!qe&&!$e)return[{value:de},{value:ye}];Kn=Math.ceil(ye/oi)-Math.floor(de/oi),Kn>ne&&(oi=ql(Kn*oi/ne/Gt)*Gt),Vn(ft)||($n=Math.pow(10,ft),oi=Math.ceil(oi*$n)/$n),"ticks"===$?(un=Math.floor(de/oi)*oi,ni=Math.ceil(ye/oi)*oi):(un=de,ni=ye),qe&&$e&&K&&za((ut-st)/K,oi/1e3)?(Kn=Math.round(Math.min((ut-st)/oi,Mt)),oi=(ut-st)/Kn,un=st,ni=ut):wn?(un=qe?st:un,ni=$e?ut:ni,Kn=bt-1,oi=(ni-un)/Kn):(Kn=(ni-un)/oi,Kn=ka(Kn,Math.round(Kn),oi/1e3)?Math.round(Kn):Math.ceil(Kn));const Tn=Math.max(Za(oi),Za(un));$n=Math.pow(10,Vn(ft)?Tn:ft),un=Math.round(un*$n)/$n,ni=Math.round(ni*$n)/$n;let qn=0;for(qe&&(Nt&&un!==st?(j.push({value:st}),un<st&&qn++,ka(Math.round((un+qn*oi)*$n)/$n,st,Ll(st,rn,E))&&qn++):un<st&&qn++);qn<Kn;++qn)j.push({value:Math.round((un+qn*oi)*$n)/$n});return $e&&Nt&&ni!==ut?j.length&&ka(j[j.length-1].value,ut,Ll(ut,rn,E))?j[j.length-1].value=ut:j.push({value:ut}):$e&&ni!==ut||j.push({value:ni}),j}({maxTicks:w,bounds:f.bounds,min:f.min,max:f.max,precision:y.precision,step:y.stepSize,count:y.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:y.minRotation||0,includeBounds:!1!==y.includeBounds},this._range||this);return"ticks"===f.bounds&&ur(A,this,"value"),f.reverse?(A.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),A}configure(){const f=this.ticks;let y=this.min,w=this.max;if(super.configure(),this.options.offset&&f.length){const A=(w-y)/Math.max(f.length-1,1)/2;y-=A,w+=A}this._startValue=y,this._endValue=w,this._valueRange=w-y}getLabelForValue(f){return hs(f,this.chart.options.locale,this.options.ticks.format)}}class Ho extends Cs{determineDataLimits(){const{min:f,max:y}=this.getMinMax(!0);this.min=Qi(f)?f:0,this.max=Qi(y)?y:1,this.handleTickRangeOptions()}computeTickLimit(){const f=this.isHorizontal(),y=f?this.width:this.height,w=zr(this.options.ticks.minRotation),A=(f?Math.sin(w):Math.cos(w))||.001,E=this._resolveTickFontOptions(0);return Math.ceil(y/Math.min(40,E.lineHeight/A))}getPixelForValue(f){return null===f?NaN:this.getPixelForDecimal((f-this._startValue)/this._valueRange)}getValueForPixel(f){return this._startValue+this.getDecimalForPixel(f)*this._valueRange}}function af(_){return _/Math.pow(10,Math.floor(Yr(_)))==1}Ho.id="linear",Ho.defaults={ticks:{callback:dc.formatters.numeric}};class Ea extends ll{constructor(f){super(f),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(f,y){const w=Cs.prototype.parse.apply(this,[f,y]);if(0!==w)return Qi(w)&&w>0?w:null;this._zero=!0}determineDataLimits(){const{min:f,max:y}=this.getMinMax(!0);this.min=Qi(f)?Math.max(0,f):null,this.max=Qi(y)?Math.max(0,y):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:f,maxDefined:y}=this.getUserBounds();let w=this.min,A=this.max;const E=$=>w=f?w:$,R=$=>A=y?A:$,j=($,K)=>Math.pow(10,Math.floor(Yr($))+K);w===A&&(w<=0?(E(1),R(10)):(E(j(w,-1)),R(j(A,1)))),w<=0&&E(j(A,-1)),A<=0&&R(j(w,1)),this._zero&&this.min!==this._suggestedMin&&w===j(this.min,0)&&E(j(w,-1)),this.min=w,this.max=A}buildTicks(){const f=this.options,y=function(w,A){const E=Math.floor(Yr(A.max)),R=Math.ceil(A.max/Math.pow(10,E)),j=[];let $=Mr(w.min,Math.pow(10,Math.floor(Yr(A.min)))),K=Math.floor(Yr($)),st=Math.floor($/Math.pow(10,K)),ut=K<0?Math.pow(10,Math.abs(K)):1;do{j.push({value:$,major:af($)}),++st,10===st&&(st=1,++K,ut=K>=0?1:ut),$=Math.round(st*Math.pow(10,K)*ut)/ut}while(K<E||K===E&&st<R);const ft=Mr(w.max,$);return j.push({value:ft,major:af($)}),j}({min:this._userMin,max:this._userMax},this);return"ticks"===f.bounds&&ur(y,this,"value"),f.reverse?(y.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),y}getLabelForValue(f){return void 0===f?"0":hs(f,this.chart.options.locale,this.options.ticks.format)}configure(){const f=this.min;super.configure(),this._startValue=Yr(f),this._valueRange=Yr(this.max)-Yr(f)}getPixelForValue(f){return void 0!==f&&0!==f||(f=this.min),null===f||isNaN(f)?NaN:this.getPixelForDecimal(f===this.min?0:(Yr(f)-this._startValue)/this._valueRange)}getValueForPixel(f){const y=this.getDecimalForPixel(f);return Math.pow(10,this._startValue+y*this._valueRange)}}function Ol(_){const f=_.ticks;if(f.display&&_.display){const y=Do(f.backdropPadding);return yi(f.font&&f.font.size,gi.font.size)+y.height}return 0}function mc(_,f,y,w,A){return _===w||_===A?{start:f-y/2,end:f+y/2}:_<w||_>A?{start:f-y,end:f}:{start:f,end:f+y}}function Bu(_,f,y,w,A){const E=Math.abs(Math.sin(y)),R=Math.abs(Math.cos(y));let j=0,$=0;w.start<f.l?(j=(f.l-w.start)/E,_.l=Math.min(_.l,f.l-j)):w.end>f.r&&(j=(w.end-f.r)/E,_.r=Math.max(_.r,f.r+j)),A.start<f.t?($=(f.t-A.start)/R,_.t=Math.min(_.t,f.t-$)):A.end>f.b&&($=(A.end-f.b)/R,_.b=Math.max(_.b,f.b+$))}function Mh(_){return 0===_||180===_?"center":_<180?"left":"right"}function os(_,f,y){return"right"===y?_-=f:"center"===y&&(_-=f/2),_}function Bl(_,f,y){return 90===y||270===y?_-=f/2:(y>270||y<90)&&(_-=f),_}function Th(_,f,y,w){const{ctx:A}=_;if(y)A.arc(_.xCenter,_.yCenter,f,0,ir);else{let E=_.getPointPosition(0,f);A.moveTo(E.x,E.y);for(let R=1;R<w;R++)E=_.getPointPosition(R,f),A.lineTo(E.x,E.y)}}Ea.id="logarithmic",Ea.defaults={ticks:{callback:dc.formatters.logarithmic,major:{enabled:!0}}};class uu extends Cs{constructor(f){super(f),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const f=this._padding=Do(Ol(this.options)/2),y=this.width=this.maxWidth-f.width,w=this.height=this.maxHeight-f.height;this.xCenter=Math.floor(this.left+y/2+f.left),this.yCenter=Math.floor(this.top+w/2+f.top),this.drawingArea=Math.floor(Math.min(y,w)/2)}determineDataLimits(){const{min:f,max:y}=this.getMinMax(!1);this.min=Qi(f)&&!isNaN(f)?f:0,this.max=Qi(y)&&!isNaN(y)?y:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ol(this.options))}generateTickLabels(f){Cs.prototype.generateTickLabels.call(this,f),this._pointLabels=this.getLabels().map((y,w)=>{const A=ee(this.options.pointLabels.callback,[y,w],this);return A||0===A?A:""}).filter((y,w)=>this.chart.getDataVisibility(w))}fit(){const f=this.options;f.display&&f.pointLabels.display?function Hc(_){const f={l:_.left+_._padding.left,r:_.right-_._padding.right,t:_.top+_._padding.top,b:_.bottom-_._padding.bottom},y=Object.assign({},f),w=[],A=[],E=_._pointLabels.length,R=_.options.pointLabels,j=R.centerPointLabels?Ai/E:0;for(let ut=0;ut<E;ut++){const ft=R.setContext(_.getPointLabelContext(ut));A[ut]=ft.padding;const bt=_.getPointPosition(ut,_.drawingArea+A[ut],j),Mt=ji(ft.font),It=($=_.ctx,K=Mt,st=Ei(st=_._pointLabels[ut])?st:[st],{w:xn($,K.string,st),h:st.length*K.lineHeight});w[ut]=It;const Nt=yo(_.getIndexAngle(ut)+j),Gt=Math.round(vo(Nt));Bu(y,f,Nt,mc(Gt,bt.x,It.w,0,180),mc(Gt,bt.y,It.h,90,270))}var $,K,st;_.setCenterPoint(f.l-y.l,y.r-f.r,f.t-y.t,y.b-f.b),_._pointLabelItems=function(ut,ft,bt){const Mt=[],It=ut._pointLabels.length,Nt=ut.options,Gt=Ol(Nt)/2,ne=ut.drawingArea,de=Nt.pointLabels.centerPointLabels?Ai/It:0;for(let ye=0;ye<It;ye++){const qe=ut.getPointPosition(ye,ne+Gt+bt[ye],de),$e=Math.round(vo(yo(qe.angle+Ar))),wn=ft[ye],rn=Bl(qe.y,wn.h,$e),$n=Mh($e),un=os(qe.x,wn.w,$n);Mt.push({x:qe.x,y:rn,textAlign:$n,left:un,top:rn,right:un+wn.w,bottom:rn+wn.h})}return Mt}(_,w,A)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(f,y,w,A){this.xCenter+=Math.floor((f-y)/2),this.yCenter+=Math.floor((w-A)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(f,y,w,A))}getIndexAngle(f){return yo(f*(ir/(this._pointLabels.length||1))+zr(this.options.startAngle||0))}getDistanceFromCenterForValue(f){if(Vn(f))return NaN;const y=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-f)*y:(f-this.min)*y}getValueForDistanceFromCenter(f){if(Vn(f))return NaN;const y=f/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-y:this.min+y}getPointLabelContext(f){const y=this._pointLabels||[];if(f>=0&&f<y.length){const w=y[f];return Ns(this.getContext(),{label:w,index:f,type:"pointLabel"})}}getPointPosition(f,y,w=0){const A=this.getIndexAngle(f)-Ar+w;return{x:Math.cos(A)*y+this.xCenter,y:Math.sin(A)*y+this.yCenter,angle:A}}getPointPositionForValue(f,y){return this.getPointPosition(f,this.getDistanceFromCenterForValue(y))}getBasePosition(f){return this.getPointPositionForValue(f||0,this.getBaseValue())}getPointLabelPosition(f){const{left:y,top:w,right:A,bottom:E}=this._pointLabelItems[f];return{left:y,top:w,right:A,bottom:E}}drawBackground(){const{backgroundColor:f,grid:{circular:y}}=this.options;if(f){const w=this.ctx;w.save(),w.beginPath(),Th(this,this.getDistanceFromCenterForValue(this._endValue),y,this._pointLabels.length),w.closePath(),w.fillStyle=f,w.fill(),w.restore()}}drawGrid(){const f=this.ctx,y=this.options,{angleLines:w,grid:A}=y,E=this._pointLabels.length;let R,j,$;if(y.pointLabels.display&&function(K,st){const{ctx:ut,options:{pointLabels:ft}}=K;for(let bt=st-1;bt>=0;bt--){const Mt=ft.setContext(K.getPointLabelContext(bt)),It=ji(Mt.font),{x:Nt,y:Gt,textAlign:ne,left:de,top:ye,right:qe,bottom:$e}=K._pointLabelItems[bt],{backdropColor:wn}=Mt;if(!Vn(wn)){const rn=gs(Mt.borderRadius),$n=Do(Mt.backdropPadding);ut.fillStyle=wn;const un=de-$n.left,ni=ye-$n.top,Kn=qe-de+$n.width,oi=$e-ye+$n.height;Object.values(rn).some(Tn=>0!==Tn)?(ut.beginPath(),Xr(ut,{x:un,y:ni,w:Kn,h:oi,radius:rn}),ut.fill()):ut.fillRect(un,ni,Kn,oi)}bo(ut,K._pointLabels[bt],Nt,Gt+It.lineHeight/2,It,{color:Mt.color,textAlign:ne,textBaseline:"middle"})}}(this,E),A.display&&this.ticks.forEach((K,st)=>{0!==st&&(j=this.getDistanceFromCenterForValue(K.value),function(ut,ft,bt,Mt){const It=ut.ctx,Nt=ft.circular,{color:Gt,lineWidth:ne}=ft;!Nt&&!Mt||!Gt||!ne||bt<0||(It.save(),It.strokeStyle=Gt,It.lineWidth=ne,It.setLineDash(ft.borderDash),It.lineDashOffset=ft.borderDashOffset,It.beginPath(),Th(ut,bt,Nt,Mt),It.closePath(),It.stroke(),It.restore())}(this,A.setContext(this.getContext(st-1)),j,E))}),w.display){for(f.save(),R=E-1;R>=0;R--){const K=w.setContext(this.getPointLabelContext(R)),{color:st,lineWidth:ut}=K;ut&&st&&(f.lineWidth=ut,f.strokeStyle=st,f.setLineDash(K.borderDash),f.lineDashOffset=K.borderDashOffset,j=this.getDistanceFromCenterForValue(y.ticks.reverse?this.min:this.max),$=this.getPointPosition(R,j),f.beginPath(),f.moveTo(this.xCenter,this.yCenter),f.lineTo($.x,$.y),f.stroke())}f.restore()}}drawBorder(){}drawLabels(){const f=this.ctx,y=this.options,w=y.ticks;if(!w.display)return;const A=this.getIndexAngle(0);let E,R;f.save(),f.translate(this.xCenter,this.yCenter),f.rotate(A),f.textAlign="center",f.textBaseline="middle",this.ticks.forEach((j,$)=>{if(0===$&&!y.reverse)return;const K=w.setContext(this.getContext($)),st=ji(K.font);if(E=this.getDistanceFromCenterForValue(this.ticks[$].value),K.showLabelBackdrop){f.font=st.string,R=f.measureText(j.label).width,f.fillStyle=K.backdropColor;const ut=Do(K.backdropPadding);f.fillRect(-R/2-ut.left,-E-st.size/2-ut.top,R+ut.width,st.size+ut.height)}bo(f,j.label,0,-E,st,{color:K.color})}),f.restore()}drawTitle(){}}uu.id="radialLinear",uu.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:dc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:_=>_,padding:5,centerPointLabels:!1}},uu.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},uu.descriptors={angleLines:{_fallback:"grid"}};const Dh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ea=Object.keys(Dh);function Vc(_,f){return _-f}function vc(_,f){if(Vn(f))return null;const y=_._adapter,{parser:w,round:A,isoWeekday:E}=_._parseOpts;let R=f;return"function"==typeof w&&(R=w(R)),Qi(R)||(R="string"==typeof w?y.parse(R,w):y.parse(R)),null===R?null:(A&&(R="week"!==A||!Ko(E)&&!0!==E?y.startOf(R,A):y.startOf(R,"isoWeek",E)),+R)}function zu(_,f,y,w){const A=ea.length;for(let E=ea.indexOf(_);E<A-1;++E){const R=Dh[ea[E]],j=R.steps?R.steps:Number.MAX_SAFE_INTEGER;if(R.common&&Math.ceil((y-f)/(j*R.size))<=w)return ea[E]}return ea[A-1]}function No(_,f,y){if(y){if(y.length){const{lo:w,hi:A}=De(y,f);_[y[w]>=f?y[w]:y[A]]=!0}}else _[f]=!0}function Ms(_,f,y){const w=[],A={},E=f.length;let R,j;for(R=0;R<E;++R)j=f[R],A[j]=R,w.push({value:j,major:!1});return 0!==E&&y?function($,K,st,ut){const ft=$._adapter,bt=+ft.startOf(K[0].value,ut),Mt=K[K.length-1].value;let It,Nt;for(It=bt;It<=Mt;It=+ft.add(It,1,ut))Nt=st[It],Nt>=0&&(K[Nt].major=!0);return K}(_,w,A,y):w}class yd extends ll{constructor(f){super(f),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(f,y){const w=f.time||(f.time={}),A=this._adapter=new hl._date(f.adapters.date);nn(w.displayFormats,A.formats()),this._parseOpts={parser:w.parser,round:w.round,isoWeekday:w.isoWeekday},super.init(f),this._normalized=y.normalized}parse(f,y){return void 0===f?null:vc(this,f)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const f=this.options,y=this._adapter,w=f.time.unit||"day";let{min:A,max:E,minDefined:R,maxDefined:j}=this.getUserBounds();function $(K){R||isNaN(K.min)||(A=Math.min(A,K.min)),j||isNaN(K.max)||(E=Math.max(E,K.max))}R&&j||($(this._getLabelBounds()),"ticks"===f.bounds&&"labels"===f.ticks.source||$(this.getMinMax(!1))),A=Qi(A)&&!isNaN(A)?A:+y.startOf(Date.now(),w),E=Qi(E)&&!isNaN(E)?E:+y.endOf(Date.now(),w)+1,this.min=Math.min(A,E-1),this.max=Math.max(A+1,E)}_getLabelBounds(){const f=this.getLabelTimestamps();let y=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;return f.length&&(y=f[0],w=f[f.length-1]),{min:y,max:w}}buildTicks(){const f=this.options,y=f.time,w=f.ticks,A="labels"===w.source?this.getLabelTimestamps():this._generate();"ticks"===f.bounds&&A.length&&(this.min=this._userMin||A[0],this.max=this._userMax||A[A.length-1]);const E=this.min,R=_r(A,E,this.max);return this._unit=y.unit||(w.autoSkip?zu(y.minUnit,this.min,this.max,this._getLabelCapacity(E)):function(j,$,K,st,ut){for(let ft=ea.length-1;ft>=ea.indexOf(K);ft--){const bt=ea[ft];if(Dh[bt].common&&j._adapter.diff(ut,st,bt)>=$-1)return bt}return ea[K?ea.indexOf(K):0]}(this,R.length,y.minUnit,this.min,this.max)),this._majorUnit=w.major.enabled&&"year"!==this._unit?function(j){for(let $=ea.indexOf(j)+1,K=ea.length;$<K;++$)if(Dh[ea[$]].common)return ea[$]}(this._unit):void 0,this.initOffsets(A),f.reverse&&R.reverse(),Ms(this,R,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(f=>+f.value))}initOffsets(f){let y,w,A=0,E=0;this.options.offset&&f.length&&(y=this.getDecimalForValue(f[0]),A=1===f.length?1-y:(this.getDecimalForValue(f[1])-y)/2,w=this.getDecimalForValue(f[f.length-1]),E=1===f.length?w:(w-this.getDecimalForValue(f[f.length-2]))/2);const R=f.length<3?.5:.25;A=co(A,0,R),E=co(E,0,R),this._offsets={start:A,end:E,factor:1/(A+1+E)}}_generate(){const f=this._adapter,y=this.min,w=this.max,A=this.options,E=A.time,R=E.unit||zu(E.minUnit,y,w,this._getLabelCapacity(y)),j=yi(E.stepSize,1),$="week"===R&&E.isoWeekday,K=Ko($)||!0===$,st={};let ut,ft,bt=y;if(K&&(bt=+f.startOf(bt,"isoWeek",$)),bt=+f.startOf(bt,K?"day":R),f.diff(w,y,R)>1e5*j)throw new Error(y+" and "+w+" are too far apart with stepSize of "+j+" "+R);const Mt="data"===A.ticks.source&&this.getDataTimestamps();for(ut=bt,ft=0;ut<w;ut=+f.add(ut,j,R),ft++)No(st,ut,Mt);return ut!==w&&"ticks"!==A.bounds&&1!==ft||No(st,ut,Mt),Object.keys(st).sort((It,Nt)=>It-Nt).map(It=>+It)}getLabelForValue(f){const w=this.options.time;return this._adapter.format(f,w.tooltipFormat?w.tooltipFormat:w.displayFormats.datetime)}_tickFormatFunction(f,y,w,A){const E=this.options,R=E.time.displayFormats,j=this._unit,$=this._majorUnit,st=$&&R[$],ut=w[y],bt=this._adapter.format(f,A||($&&st&&ut&&ut.major?st:j&&R[j])),Mt=E.ticks.callback;return Mt?ee(Mt,[bt,y,w],this):bt}generateTickLabels(f){let y,w,A;for(y=0,w=f.length;y<w;++y)A=f[y],A.label=this._tickFormatFunction(A.value,y,f)}getDecimalForValue(f){return null===f?NaN:(f-this.min)/(this.max-this.min)}getPixelForValue(f){const y=this._offsets,w=this.getDecimalForValue(f);return this.getPixelForDecimal((y.start+w)*y.factor)}getValueForPixel(f){const y=this._offsets,w=this.getDecimalForPixel(f)/y.factor-y.end;return this.min+w*(this.max-this.min)}_getLabelSize(f){const y=this.options.ticks,w=this.ctx.measureText(f).width,A=zr(this.isHorizontal()?y.maxRotation:y.minRotation),E=Math.cos(A),R=Math.sin(A),j=this._resolveTickFontOptions(0).size;return{w:w*E+j*R,h:w*R+j*E}}_getLabelCapacity(f){const y=this.options.time,w=y.displayFormats,A=w[y.unit]||w.millisecond,E=this._tickFormatFunction(f,0,Ms(this,[f],this._majorUnit),A),R=this._getLabelSize(E),j=Math.floor(this.isHorizontal()?this.width/R.w:this.height/R.h)-1;return j>0?j:1}getDataTimestamps(){let f,y,w=this._cache.data||[];if(w.length)return w;const A=this.getMatchingVisibleMetas();if(this._normalized&&A.length)return this._cache.data=A[0].controller.getAllParsedValues(this);for(f=0,y=A.length;f<y;++f)w=w.concat(A[f].controller.getAllParsedValues(this));return this._cache.data=this.normalize(w)}getLabelTimestamps(){const f=this._cache.labels||[];let y,w;if(f.length)return f;const A=this.getLabels();for(y=0,w=A.length;y<w;++y)f.push(vc(this,A[y]));return this._cache.labels=this._normalized?f:this.normalize(f)}normalize(f){return wi(f.sort(Vc))}}function wa(_,f,y){let w,A,E,R,j=0,$=_.length-1;y?(f>=_[j].pos&&f<=_[$].pos&&({lo:j,hi:$}=Wi(_,"pos",f)),({pos:w,time:E}=_[j]),({pos:A,time:R}=_[$])):(f>=_[j].time&&f<=_[$].time&&({lo:j,hi:$}=Wi(_,"time",f)),({time:w,pos:E}=_[j]),({time:A,pos:R}=_[$]));const K=A-w;return K?E+(R-E)*(f-w)/K:E}yd.id="time",yd.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class as extends yd{constructor(f){super(f),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const f=this._getTimestampsForTable(),y=this._table=this.buildLookupTable(f);this._minPos=wa(y,this.min),this._tableRange=wa(y,this.max)-this._minPos,super.initOffsets(f)}buildLookupTable(f){const{min:y,max:w}=this,A=[],E=[];let R,j,$,K,st;for(R=0,j=f.length;R<j;++R)K=f[R],K>=y&&K<=w&&A.push(K);if(A.length<2)return[{time:y,pos:0},{time:w,pos:1}];for(R=0,j=A.length;R<j;++R)st=A[R+1],$=A[R-1],K=A[R],Math.round((st+$)/2)!==K&&E.push({time:K,pos:R/(j-1)});return E}_getTimestampsForTable(){let f=this._cache.all||[];if(f.length)return f;const y=this.getDataTimestamps(),w=this.getLabelTimestamps();return f=y.length&&w.length?this.normalize(y.concat(w)):y.length?y:w,f=this._cache.all=f,f}getDecimalForValue(f){return(wa(this._table,f)-this._minPos)/this._tableRange}getValueForPixel(f){const y=this._offsets,w=this.getDecimalForPixel(f)/y.factor-y.end;return wa(this._table,w*this._tableRange+this._minPos,!0)}}as.id="timeseries",as.defaults=yd.defaults;var ig=Object.freeze({__proto__:null,CategoryScale:Us,LinearScale:Ho,LogarithmicScale:Ea,RadialLinearScale:uu,TimeScale:yd,TimeSeriesScale:as});return Zi.register(Me,ig,zc,of),Zi.helpers=jC({},Kl),Zi._adapters=hl,Zi.Animation=al,Zi.Animations=Eu,Zi.animator=on,Zi.controllers=va.controllers.items,Zi.DatasetController=Io,Zi.Element=ua,Zi.elements=zc,Zi.Interaction=Nc,Zi.layouts=Uo,Zi.platforms=es,Zi.Scale=ll,Zi.Ticks=dc,Object.assign(Zi,Me,ig,zc,of,es),Zi.Chart=Zi,"undefined"!=typeof window&&(window.Chart=Zi),Zi});